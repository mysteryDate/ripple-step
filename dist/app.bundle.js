var RS =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./js/mainEntryPoint.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./js/AppData.js":
/*!***********************!*\
  !*** ./js/AppData.js ***!
  \***********************/
/*! exports provided: Constants, Scales, Settings, Controls */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Constants\", function() { return Constants; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Scales\", function() { return Scales; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Settings\", function() { return Settings; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Controls\", function() { return Controls; });\nvar Settings = {\n  MOBILE_DOWNSAMPLE: 4,\n  DESKTOP_DOWNSAMPLE: 1,\n};\n\nvar Constants = {\n  BASE_COLOR: 0x1d1e26,\n  MIN_UI_PADDING: 0.2,\n  SECONDARY_BASE_COLOR: 0xaaaaaa,\n  NUM_STEPS: 16,\n  NUM_NOTES: 16,\n  SPACING_RATIO: 1/10,\n  STEP_VALUE: 1/8,\n  RELATIVE: false,\n  MUTE_COLOR_VALUE: 0.7,\n  MAX_KNOB_RADIUS: 70,\n};\n\nvar Controls = {\n  TEMPO: 120,\n  SWING: 0,\n  // NUM_NOTES_BEFORE_KNOBS_DISPLAY: 3,\n  NUM_NOTES_BEFORE_KNOBS_DISPLAY: 0,\n};\n\nControls.Envelope = {\n  attack: {\n    control: \"attack\",\n    minValue: 0.005,\n    maxValue: 0.2,\n    numLights: 16,\n  },\n  decay: {\n    control: \"decay\",\n    minValue: 0.005,\n    maxValue: 0.2,\n    numLights: 20,\n  },\n  sustain: {\n    control: \"sustain\",\n    minValue: 0.0,\n    maxValue: 1.0,\n    numLights: 50,\n  },\n  release: {\n    control: \"release\",\n    minValue: 0.001,\n    maxValue: 20,\n    numLights: 100,\n    initialValue: 20,\n  },\n};\n\nControls.Filter = {\n  frequency: {\n    control: \"frequency\",\n    minValue: 0,\n    maxValue: 5000,\n    numLights: 50,\n  },\n  resonance: {\n    control: \"Q\",\n    minValue: 0,\n    maxValue: 20,\n    numLights: 16,\n    initialValue: 5,\n  },\n};\n\nControls.Knobs = [\n  Controls.Filter.frequency,\n  // Controls.Filter.resonance,\n  // Controls.Envelope.attack,\n  // Controls.Envelope.decay,\n  // Controls.Envelope.sustain,\n  Controls.Envelope.release,\n  {\n    control: \"swing\",\n    minValue: 0,\n    maxValue: 0.5,\n    numLights: 10,\n  },\n];\n\nvar Scales = {\n  \"IV\": {\n    \"relative_notes\": [\"C\", \"D\", \"F\", \"G\", \"A\"],\n    \"relative_octaves\": [0, 0, 0, 0, 0],\n    \"notes\": [\"F\", \"G\", \"A\", \"C\", \"D\"],\n    \"octaves\": [0, 0, 0, 1, 1],\n    \"color\": 0xbf4944,\n    \"ripple_color\": 0xff0000, // red\n  },\n  \"I\": {\n    \"notes\": [\"C\", \"D\", \"E\", \"G\", \"A\"],\n    \"octaves\": [0, 0, 0, 0, 0],\n    \"relative_notes\": [\"C\", \"D\", \"E\", \"G\", \"A\"],\n    \"relative_octaves\": [0, 0, 0, 0, 0],\n    \"color\": 0xc3c045,\n    \"ripple_color\": 0xffff00, // yellow\n  },\n  \"V\": {\n    \"relative_notes\": [\"B\", \"D\", \"F\", \"G\", \"A\"],\n    \"relative_octaves\": [-1, 0, 0, 0, 0],\n    \"notes\": [\"G\", \"A\", \"B\", \"D\", \"F\"],\n    \"octaves\": [-1, -1, -1, 0, 0],\n    \"color\": 0x3bc34c,\n    \"ripple_color\": 0x00ff00, // green\n  },\n  \"ii\": {\n    \"relative_notes\": [\"B\", \"D\", \"E\", \"F\", \"A\"],\n    \"relative_octaves\": [-1, 0, 0, 0, 0],\n    \"notes\": [\"D\", \"E\", \"F\", \"A\", \"B\"],\n    \"octaves\": [0, 0, 0, 0, 0],\n    \"color\": 0x43a5bf,\n    \"ripple_color\": 0x00ffff, // cyan\n  },\n  \"vi\": {\n    \"relative_notes\": [\"B\", \"C\", \"E\", \"F\", \"A\"],\n    \"relative_octaves\": [-1, 0, 0, 0, 0],\n    \"notes\": [\"A\", \"B\", \"C\", \"E\", \"F\"],\n    \"octaves\": [-1, -1, 0, 0, 0],\n    \"color\": 0x5455b7,\n    \"ripple_color\": 0x0000ff, // blue\n  },\n  \"iii\": {\n    \"relative_notes\": [\"B\", \"C\", \"E\", \"F\", \"G\"],\n    \"relative_octaves\": [-1, 0, 0, 0, 0],\n    \"notes\": [\"E\", \"F\", \"G\", \"B\", \"C\"],\n    \"octaves\": [0, 0, 0, 0, 1],\n    \"color\": 0x8a49bd,\n    \"ripple_color\": 0xff00ff, // magenta\n  },\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9BcHBEYXRhLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUlMvLi9qcy9BcHBEYXRhLmpzPzdjYTkiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIFNldHRpbmdzID0ge1xuICBNT0JJTEVfRE9XTlNBTVBMRTogNCxcbiAgREVTS1RPUF9ET1dOU0FNUExFOiAxLFxufTtcblxudmFyIENvbnN0YW50cyA9IHtcbiAgQkFTRV9DT0xPUjogMHgxZDFlMjYsXG4gIE1JTl9VSV9QQURESU5HOiAwLjIsXG4gIFNFQ09OREFSWV9CQVNFX0NPTE9SOiAweGFhYWFhYSxcbiAgTlVNX1NURVBTOiAxNixcbiAgTlVNX05PVEVTOiAxNixcbiAgU1BBQ0lOR19SQVRJTzogMS8xMCxcbiAgU1RFUF9WQUxVRTogMS84LFxuICBSRUxBVElWRTogZmFsc2UsXG4gIE1VVEVfQ09MT1JfVkFMVUU6IDAuNyxcbiAgTUFYX0tOT0JfUkFESVVTOiA3MCxcbn07XG5cbnZhciBDb250cm9scyA9IHtcbiAgVEVNUE86IDEyMCxcbiAgU1dJTkc6IDAsXG4gIC8vIE5VTV9OT1RFU19CRUZPUkVfS05PQlNfRElTUExBWTogMyxcbiAgTlVNX05PVEVTX0JFRk9SRV9LTk9CU19ESVNQTEFZOiAwLFxufTtcblxuQ29udHJvbHMuRW52ZWxvcGUgPSB7XG4gIGF0dGFjazoge1xuICAgIGNvbnRyb2w6IFwiYXR0YWNrXCIsXG4gICAgbWluVmFsdWU6IDAuMDA1LFxuICAgIG1heFZhbHVlOiAwLjIsXG4gICAgbnVtTGlnaHRzOiAxNixcbiAgfSxcbiAgZGVjYXk6IHtcbiAgICBjb250cm9sOiBcImRlY2F5XCIsXG4gICAgbWluVmFsdWU6IDAuMDA1LFxuICAgIG1heFZhbHVlOiAwLjIsXG4gICAgbnVtTGlnaHRzOiAyMCxcbiAgfSxcbiAgc3VzdGFpbjoge1xuICAgIGNvbnRyb2w6IFwic3VzdGFpblwiLFxuICAgIG1pblZhbHVlOiAwLjAsXG4gICAgbWF4VmFsdWU6IDEuMCxcbiAgICBudW1MaWdodHM6IDUwLFxuICB9LFxuICByZWxlYXNlOiB7XG4gICAgY29udHJvbDogXCJyZWxlYXNlXCIsXG4gICAgbWluVmFsdWU6IDAuMDAxLFxuICAgIG1heFZhbHVlOiAyMCxcbiAgICBudW1MaWdodHM6IDEwMCxcbiAgICBpbml0aWFsVmFsdWU6IDIwLFxuICB9LFxufTtcblxuQ29udHJvbHMuRmlsdGVyID0ge1xuICBmcmVxdWVuY3k6IHtcbiAgICBjb250cm9sOiBcImZyZXF1ZW5jeVwiLFxuICAgIG1pblZhbHVlOiAwLFxuICAgIG1heFZhbHVlOiA1MDAwLFxuICAgIG51bUxpZ2h0czogNTAsXG4gIH0sXG4gIHJlc29uYW5jZToge1xuICAgIGNvbnRyb2w6IFwiUVwiLFxuICAgIG1pblZhbHVlOiAwLFxuICAgIG1heFZhbHVlOiAyMCxcbiAgICBudW1MaWdodHM6IDE2LFxuICAgIGluaXRpYWxWYWx1ZTogNSxcbiAgfSxcbn07XG5cbkNvbnRyb2xzLktub2JzID0gW1xuICBDb250cm9scy5GaWx0ZXIuZnJlcXVlbmN5LFxuICAvLyBDb250cm9scy5GaWx0ZXIucmVzb25hbmNlLFxuICAvLyBDb250cm9scy5FbnZlbG9wZS5hdHRhY2ssXG4gIC8vIENvbnRyb2xzLkVudmVsb3BlLmRlY2F5LFxuICAvLyBDb250cm9scy5FbnZlbG9wZS5zdXN0YWluLFxuICBDb250cm9scy5FbnZlbG9wZS5yZWxlYXNlLFxuICB7XG4gICAgY29udHJvbDogXCJzd2luZ1wiLFxuICAgIG1pblZhbHVlOiAwLFxuICAgIG1heFZhbHVlOiAwLjUsXG4gICAgbnVtTGlnaHRzOiAxMCxcbiAgfSxcbl07XG5cbnZhciBTY2FsZXMgPSB7XG4gIFwiSVZcIjoge1xuICAgIFwicmVsYXRpdmVfbm90ZXNcIjogW1wiQ1wiLCBcIkRcIiwgXCJGXCIsIFwiR1wiLCBcIkFcIl0sXG4gICAgXCJyZWxhdGl2ZV9vY3RhdmVzXCI6IFswLCAwLCAwLCAwLCAwXSxcbiAgICBcIm5vdGVzXCI6IFtcIkZcIiwgXCJHXCIsIFwiQVwiLCBcIkNcIiwgXCJEXCJdLFxuICAgIFwib2N0YXZlc1wiOiBbMCwgMCwgMCwgMSwgMV0sXG4gICAgXCJjb2xvclwiOiAweGJmNDk0NCxcbiAgICBcInJpcHBsZV9jb2xvclwiOiAweGZmMDAwMCwgLy8gcmVkXG4gIH0sXG4gIFwiSVwiOiB7XG4gICAgXCJub3Rlc1wiOiBbXCJDXCIsIFwiRFwiLCBcIkVcIiwgXCJHXCIsIFwiQVwiXSxcbiAgICBcIm9jdGF2ZXNcIjogWzAsIDAsIDAsIDAsIDBdLFxuICAgIFwicmVsYXRpdmVfbm90ZXNcIjogW1wiQ1wiLCBcIkRcIiwgXCJFXCIsIFwiR1wiLCBcIkFcIl0sXG4gICAgXCJyZWxhdGl2ZV9vY3RhdmVzXCI6IFswLCAwLCAwLCAwLCAwXSxcbiAgICBcImNvbG9yXCI6IDB4YzNjMDQ1LFxuICAgIFwicmlwcGxlX2NvbG9yXCI6IDB4ZmZmZjAwLCAvLyB5ZWxsb3dcbiAgfSxcbiAgXCJWXCI6IHtcbiAgICBcInJlbGF0aXZlX25vdGVzXCI6IFtcIkJcIiwgXCJEXCIsIFwiRlwiLCBcIkdcIiwgXCJBXCJdLFxuICAgIFwicmVsYXRpdmVfb2N0YXZlc1wiOiBbLTEsIDAsIDAsIDAsIDBdLFxuICAgIFwibm90ZXNcIjogW1wiR1wiLCBcIkFcIiwgXCJCXCIsIFwiRFwiLCBcIkZcIl0sXG4gICAgXCJvY3RhdmVzXCI6IFstMSwgLTEsIC0xLCAwLCAwXSxcbiAgICBcImNvbG9yXCI6IDB4M2JjMzRjLFxuICAgIFwicmlwcGxlX2NvbG9yXCI6IDB4MDBmZjAwLCAvLyBncmVlblxuICB9LFxuICBcImlpXCI6IHtcbiAgICBcInJlbGF0aXZlX25vdGVzXCI6IFtcIkJcIiwgXCJEXCIsIFwiRVwiLCBcIkZcIiwgXCJBXCJdLFxuICAgIFwicmVsYXRpdmVfb2N0YXZlc1wiOiBbLTEsIDAsIDAsIDAsIDBdLFxuICAgIFwibm90ZXNcIjogW1wiRFwiLCBcIkVcIiwgXCJGXCIsIFwiQVwiLCBcIkJcIl0sXG4gICAgXCJvY3RhdmVzXCI6IFswLCAwLCAwLCAwLCAwXSxcbiAgICBcImNvbG9yXCI6IDB4NDNhNWJmLFxuICAgIFwicmlwcGxlX2NvbG9yXCI6IDB4MDBmZmZmLCAvLyBjeWFuXG4gIH0sXG4gIFwidmlcIjoge1xuICAgIFwicmVsYXRpdmVfbm90ZXNcIjogW1wiQlwiLCBcIkNcIiwgXCJFXCIsIFwiRlwiLCBcIkFcIl0sXG4gICAgXCJyZWxhdGl2ZV9vY3RhdmVzXCI6IFstMSwgMCwgMCwgMCwgMF0sXG4gICAgXCJub3Rlc1wiOiBbXCJBXCIsIFwiQlwiLCBcIkNcIiwgXCJFXCIsIFwiRlwiXSxcbiAgICBcIm9jdGF2ZXNcIjogWy0xLCAtMSwgMCwgMCwgMF0sXG4gICAgXCJjb2xvclwiOiAweDU0NTViNyxcbiAgICBcInJpcHBsZV9jb2xvclwiOiAweDAwMDBmZiwgLy8gYmx1ZVxuICB9LFxuICBcImlpaVwiOiB7XG4gICAgXCJyZWxhdGl2ZV9ub3Rlc1wiOiBbXCJCXCIsIFwiQ1wiLCBcIkVcIiwgXCJGXCIsIFwiR1wiXSxcbiAgICBcInJlbGF0aXZlX29jdGF2ZXNcIjogWy0xLCAwLCAwLCAwLCAwXSxcbiAgICBcIm5vdGVzXCI6IFtcIkVcIiwgXCJGXCIsIFwiR1wiLCBcIkJcIiwgXCJDXCJdLFxuICAgIFwib2N0YXZlc1wiOiBbMCwgMCwgMCwgMCwgMV0sXG4gICAgXCJjb2xvclwiOiAweDhhNDliZCxcbiAgICBcInJpcHBsZV9jb2xvclwiOiAweGZmMDBmZiwgLy8gbWFnZW50YVxuICB9LFxufTtcblxuZXhwb3J0IHtDb25zdGFudHMsIFNjYWxlcywgU2V0dGluZ3MsIENvbnRyb2xzfTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./js/AppData.js\n");

/***/ }),

/***/ "./js/Application.js":
/*!***************************!*\
  !*** ./js/Application.js ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/three/build/three.min.js */ \"./node_modules/three/build/three.min.js\");\n/* harmony import */ var _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/underscore */ \"./node_modules/underscore/underscore.js\");\n/* harmony import */ var _node_modules_underscore__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_underscore__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _AppData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AppData */ \"./js/AppData.js\");\n/* harmony import */ var _ToneMatrix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ToneMatrix */ \"./js/ToneMatrix.js\");\n/* harmony import */ var _ScaleChooser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ScaleChooser */ \"./js/ScaleChooser.js\");\n/* harmony import */ var _RippleSynth__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./RippleSynth */ \"./js/RippleSynth.js\");\n/* harmony import */ var _ControlPanel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ControlPanel */ \"./js/ControlPanel.js\");\n/* harmony import */ var _Transport__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Transport */ \"./js/Transport.js\");\n\n\n\n\n\n\n\n\n\n\nfunction Application(selector, width, height, options) {\n  var canvas = document.querySelector(selector);\n  var downsample = (options.isMobile === true) ? _AppData__WEBPACK_IMPORTED_MODULE_2__[\"Settings\"].MOBILE_DOWNSAMPLE : _AppData__WEBPACK_IMPORTED_MODULE_2__[\"Settings\"].DESKTOP_DOWNSAMPLE;\n  var renderer = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"WebGLRenderer\"]({canvas: canvas, antialias: true});\n  renderer.setPixelRatio(window.devicePixelRatio/downsample);\n  var scene = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Scene\"]();\n  var camera = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"OrthographicCamera\"]();\n\n  var currentScaleName = Object(_node_modules_underscore__WEBPACK_IMPORTED_MODULE_1__[\"sample\"])(Object.keys(_AppData__WEBPACK_IMPORTED_MODULE_2__[\"Scales\"]));\n  var currentScale = _AppData__WEBPACK_IMPORTED_MODULE_2__[\"Scales\"][currentScaleName];\n  var toneMatrix = new _ToneMatrix__WEBPACK_IMPORTED_MODULE_3__[\"default\"](options.numSteps, options.numNotes);\n  toneMatrix.armButton(0, Object(_node_modules_underscore__WEBPACK_IMPORTED_MODULE_1__[\"random\"])(0, options.numNotes - 1)); // Arm random button\n  scene.add(toneMatrix);\n\n  var scaleChooser = new _ScaleChooser__WEBPACK_IMPORTED_MODULE_4__[\"default\"](_AppData__WEBPACK_IMPORTED_MODULE_2__[\"Scales\"], currentScaleName);\n  scene.add(scaleChooser);\n\n  // SYNTH\n  var synth = new _RippleSynth__WEBPACK_IMPORTED_MODULE_5__[\"default\"](_AppData__WEBPACK_IMPORTED_MODULE_2__[\"Constants\"].NUM_NOTES, {});\n  synth.setVolume(-6);\n\n  // Controls for the envelope\n  var knobPanel = new _ControlPanel__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({\n    knobs: _AppData__WEBPACK_IMPORTED_MODULE_2__[\"Controls\"].Knobs,\n    getter: synth.getControl,\n    setter: synth.setControl,\n  });\n  scene.add(knobPanel);\n\n  var transport = new _Transport__WEBPACK_IMPORTED_MODULE_7__[\"default\"]();\n  var raycaster = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Raycaster\"]();\n\n  var paused = false;\n  var muted = false;\n  var startTime = null;\n  var currentTime = null;\n\n  // Things to execute on the frame of a beat\n  function onBeat() {\n    toneMatrix.activateColumn(transport.position);\n    if (!muted) {\n      var rowsToPlay = toneMatrix.getActiveNotesInColumn(transport.position);\n      if (!window.app.muted) {\n        rowsToPlay.forEach(function(row) {\n          window.app.synth.playRow(row);\n        });\n      }\n    }\n  }\n\n  Object.assign(this, {\n    scaleChooser: scaleChooser,\n    currentScale: currentScale,\n    currentTime: currentTime,\n    toneMatrix: toneMatrix,\n    downsample: downsample,\n    raycaster: raycaster,\n    transport: transport,\n    startTime: startTime,\n    knobPanel: knobPanel,\n    renderer: renderer,\n    onBeat: onBeat,\n    camera: camera,\n    paused: paused,\n    height: height,\n    muted: muted,\n    scene: scene,\n    synth: synth,\n    width: width,\n  });\n}\n\nApplication.prototype.init = function() {\n  this.setScale(this.currentScale);\n  this.resize(this.width, this.height);\n};\n\nApplication.prototype.render = function() {\n  this.toneMatrix.render(this.renderer);\n  this.renderer.render(this.scene, this.camera);\n};\n\nApplication.prototype.setScale = function(newScale) {\n  this.currentScale = newScale;\n  this.toneMatrix.setActiveColor({\n    buttonColor: new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"](this.currentScale.color),\n    shadowColor: new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"](this.currentScale.ripple_color),\n  });\n  this.synth.scale = this.currentScale;\n  this.knobPanel.setColor(new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"](this.currentScale.color));\n};\n\nApplication.prototype.resize = function(width, height) {\n  this.renderer.setSize(width, height);\n  this.renderer.setPixelRatio(window.devicePixelRatio/this.downsample);\n  this.camera.left = -width/2;\n  this.camera.right = width/2;\n  this.camera.top = height/2;\n  this.camera.bottom = -height/2;\n  this.camera.position.set(width/2, height/2, 50);\n  this.camera.updateProjectionMatrix();\n\n  var toneMatrixSize = Math.min(width, height);\n  var aspectRatio = width/height;\n  if (aspectRatio > 1 - _AppData__WEBPACK_IMPORTED_MODULE_2__[\"Constants\"].MIN_UI_PADDING && aspectRatio < 1/(1 - _AppData__WEBPACK_IMPORTED_MODULE_2__[\"Constants\"].MIN_UI_PADDING)) {\n    if (aspectRatio > 1) {\n      toneMatrixSize = (1 - _AppData__WEBPACK_IMPORTED_MODULE_2__[\"Constants\"].MIN_UI_PADDING) * width;\n    } else {\n      toneMatrixSize = (1 - _AppData__WEBPACK_IMPORTED_MODULE_2__[\"Constants\"].MIN_UI_PADDING) * height;\n    }\n  }\n  this.toneMatrix.scale.set(toneMatrixSize, toneMatrixSize, 1);\n  this.toneMatrix.position.set(width/2, height/2, 1);\n\n  var controlPanelLayout = (width > height) ? \"vertical\" : \"horizontal\";\n  var availableSpace = height - (height/2 + toneMatrixSize/2);\n  var controlPanelHeight = availableSpace * 0.7;\n  var controlPanelWidth = width;\n  if (controlPanelLayout === \"vertical\") {\n    availableSpace = width - (width/2 + toneMatrixSize/2);\n    controlPanelWidth = availableSpace * 0.7;\n    controlPanelHeight = height;\n  }\n\n  this.knobPanel.resize(controlPanelWidth, controlPanelHeight);\n  if (controlPanelLayout === \"vertical\") { // On the right side\n    this.knobPanel.position.x = (3 * width + toneMatrixSize) / 4;\n    this.knobPanel.position.y = height/2;\n  } else { // On the top\n    this.knobPanel.position.x = width/2;\n    this.knobPanel.position.y = (3 * height + toneMatrixSize) / 4;\n  }\n\n  this.scaleChooser.position.set(0, 0, 0);\n  this.scaleChooser.rotation.set(0, 0, 0);\n  var numScales = Object.keys(_AppData__WEBPACK_IMPORTED_MODULE_2__[\"Scales\"]).length;\n  var scaleChooserSize = 0.5;\n  if (controlPanelLayout === \"vertical\") {\n    this.scaleChooser.position.x = (width - toneMatrixSize) / 4;\n    this.scaleChooser.position.y = height/2;\n    this.scaleChooser.rotateZ(Math.PI /2);\n    scaleChooserSize *= height/numScales;\n  } else {\n    this.scaleChooser.position.x = width/2;\n    this.scaleChooser.position.y = (height - toneMatrixSize) / 4;\n    scaleChooserSize *= width/numScales;\n  }\n  this.scaleChooser.scale.set(scaleChooserSize, scaleChooserSize, 1);\n\n  this.width = width;\n  this.height = height;\n};\n\n// TODO store interactables in array\nApplication.prototype.touchStart = function(event) {\n  var mouse = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n  mouse.x = (event.pageX / this.width) * 2 - 1;\n  mouse.y = -(event.pageY / this.height) * 2 + 1;\n  this.raycaster.setFromCamera(mouse, this.camera);\n  this.toneMatrix.touchStart(this.raycaster);\n  this.scaleChooser.touchStart(this.raycaster);\n  this.knobPanel.touchStart(this.raycaster, event);\n};\n\nApplication.prototype.touch = function(event) {\n  var mouse = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n  mouse.x = (event.pageX / this.width) * 2 - 1;\n  mouse.y = -(event.pageY / this.height) * 2 + 1;\n  this.raycaster.setFromCamera(mouse, this.camera);\n  this.toneMatrix.touch(this.raycaster);\n  this.knobPanel.touch(this.raycaster, event);\n  this.scaleChooser.touch(this.raycaster);\n};\n\nApplication.prototype.touchEnd = function() {\n  this.knobPanel.touchEnd();\n  this.toneMatrix.touchEnd();\n};\n\nApplication.prototype.clear = function() {\n  this.toneMatrix.clear();\n};\n\nApplication.prototype.toggleMute = function() {\n  this.muted = !this.muted;\n  this.toneMatrix.mute(this.muted);\n  this.knobPanel.setColor(new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"](this.currentScale.color).multiplyScalar(\n    _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Math\"].lerp(1.0, _AppData__WEBPACK_IMPORTED_MODULE_2__[\"Constants\"].MUTE_COLOR_VALUE, this.muted)\n  )); // TODO set damping\n};\n\nApplication.prototype.togglePaused = function() {\n  this.transport.togglePaused();\n  if (this.paused) {\n    this.toneMatrix.deactivateColumns();\n  }\n};\n\n\nApplication.prototype.start = function() {\n  this.synth.start();\n  this.transport.start();\n};\n\nApplication.prototype.update = function() {\n  this.currentTime = performance.now();\n  this.transport.update(this.onBeat);\n  this.scaleChooser.update(this.currentTime);\n\n  // TODO have more robust control infrastructure\n  this.transport.swing = this.synth.getControl(\"swing\");\n\n  // TODO, this is hideous\n  var newDamping = (function getRelease() {\n    var release = window.app.synth.getControl(\"release\");\n    var minRelease = _AppData__WEBPACK_IMPORTED_MODULE_2__[\"Controls\"].Envelope.release.minValue;\n    var maxRelease = _AppData__WEBPACK_IMPORTED_MODULE_2__[\"Controls\"].Envelope.release.maxValue;\n    var dampingValue;\n    var firstStop = 0.05;\n    if (release < _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Math\"].lerp(minRelease, maxRelease, firstStop)) {\n      dampingValue = _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Math\"].mapLinear(release, minRelease, _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Math\"].lerp(minRelease, maxRelease, firstStop), 0.9, 0.995);\n    } else if (release === _AppData__WEBPACK_IMPORTED_MODULE_2__[\"Controls\"].Envelope.release.maxValue) {\n      dampingValue = 0.999;\n    } else {\n      dampingValue = _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Math\"].mapLinear(release, _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Math\"].lerp(minRelease, maxRelease, firstStop), maxRelease, 0.995, 0.999);\n    }\n    return dampingValue;\n  })();\n  this.toneMatrix.setDamping(newDamping);\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Application);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9BcHBsaWNhdGlvbi5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1JTLy4vanMvQXBwbGljYXRpb24uanM/ZTAxYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBUSFJFRSBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL3RocmVlL2J1aWxkL3RocmVlLm1pbi5qc1wiO1xuaW1wb3J0IHtzYW1wbGUsIHJhbmRvbX0gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlXCI7XG5cbmltcG9ydCB7Q29uc3RhbnRzLCBTY2FsZXMsIFNldHRpbmdzLCBDb250cm9sc30gZnJvbSBcIi4vQXBwRGF0YVwiO1xuaW1wb3J0IFRvbmVNYXRyaXggZnJvbSBcIi4vVG9uZU1hdHJpeFwiO1xuaW1wb3J0IFNjYWxlQ2hvb3NlciBmcm9tIFwiLi9TY2FsZUNob29zZXJcIjtcbmltcG9ydCBSaXBwbGVTeW50aCBmcm9tIFwiLi9SaXBwbGVTeW50aFwiO1xuaW1wb3J0IENvbnRyb2xQYW5lbCBmcm9tIFwiLi9Db250cm9sUGFuZWxcIjtcbmltcG9ydCBUcmFuc3BvcnQgZnJvbSBcIi4vVHJhbnNwb3J0XCI7XG5cbmZ1bmN0aW9uIEFwcGxpY2F0aW9uKHNlbGVjdG9yLCB3aWR0aCwgaGVpZ2h0LCBvcHRpb25zKSB7XG4gIHZhciBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgdmFyIGRvd25zYW1wbGUgPSAob3B0aW9ucy5pc01vYmlsZSA9PT0gdHJ1ZSkgPyBTZXR0aW5ncy5NT0JJTEVfRE9XTlNBTVBMRSA6IFNldHRpbmdzLkRFU0tUT1BfRE9XTlNBTVBMRTtcbiAgdmFyIHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoe2NhbnZhczogY2FudmFzLCBhbnRpYWxpYXM6IHRydWV9KTtcbiAgcmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpby9kb3duc2FtcGxlKTtcbiAgdmFyIHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XG4gIHZhciBjYW1lcmEgPSBuZXcgVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhKCk7XG5cbiAgdmFyIGN1cnJlbnRTY2FsZU5hbWUgPSBzYW1wbGUoT2JqZWN0LmtleXMoU2NhbGVzKSk7XG4gIHZhciBjdXJyZW50U2NhbGUgPSBTY2FsZXNbY3VycmVudFNjYWxlTmFtZV07XG4gIHZhciB0b25lTWF0cml4ID0gbmV3IFRvbmVNYXRyaXgob3B0aW9ucy5udW1TdGVwcywgb3B0aW9ucy5udW1Ob3Rlcyk7XG4gIHRvbmVNYXRyaXguYXJtQnV0dG9uKDAsIHJhbmRvbSgwLCBvcHRpb25zLm51bU5vdGVzIC0gMSkpOyAvLyBBcm0gcmFuZG9tIGJ1dHRvblxuICBzY2VuZS5hZGQodG9uZU1hdHJpeCk7XG5cbiAgdmFyIHNjYWxlQ2hvb3NlciA9IG5ldyBTY2FsZUNob29zZXIoU2NhbGVzLCBjdXJyZW50U2NhbGVOYW1lKTtcbiAgc2NlbmUuYWRkKHNjYWxlQ2hvb3Nlcik7XG5cbiAgLy8gU1lOVEhcbiAgdmFyIHN5bnRoID0gbmV3IFJpcHBsZVN5bnRoKENvbnN0YW50cy5OVU1fTk9URVMsIHt9KTtcbiAgc3ludGguc2V0Vm9sdW1lKC02KTtcblxuICAvLyBDb250cm9scyBmb3IgdGhlIGVudmVsb3BlXG4gIHZhciBrbm9iUGFuZWwgPSBuZXcgQ29udHJvbFBhbmVsKHtcbiAgICBrbm9iczogQ29udHJvbHMuS25vYnMsXG4gICAgZ2V0dGVyOiBzeW50aC5nZXRDb250cm9sLFxuICAgIHNldHRlcjogc3ludGguc2V0Q29udHJvbCxcbiAgfSk7XG4gIHNjZW5lLmFkZChrbm9iUGFuZWwpO1xuXG4gIHZhciB0cmFuc3BvcnQgPSBuZXcgVHJhbnNwb3J0KCk7XG4gIHZhciByYXljYXN0ZXIgPSBuZXcgVEhSRUUuUmF5Y2FzdGVyKCk7XG5cbiAgdmFyIHBhdXNlZCA9IGZhbHNlO1xuICB2YXIgbXV0ZWQgPSBmYWxzZTtcbiAgdmFyIHN0YXJ0VGltZSA9IG51bGw7XG4gIHZhciBjdXJyZW50VGltZSA9IG51bGw7XG5cbiAgLy8gVGhpbmdzIHRvIGV4ZWN1dGUgb24gdGhlIGZyYW1lIG9mIGEgYmVhdFxuICBmdW5jdGlvbiBvbkJlYXQoKSB7XG4gICAgdG9uZU1hdHJpeC5hY3RpdmF0ZUNvbHVtbih0cmFuc3BvcnQucG9zaXRpb24pO1xuICAgIGlmICghbXV0ZWQpIHtcbiAgICAgIHZhciByb3dzVG9QbGF5ID0gdG9uZU1hdHJpeC5nZXRBY3RpdmVOb3Rlc0luQ29sdW1uKHRyYW5zcG9ydC5wb3NpdGlvbik7XG4gICAgICBpZiAoIXdpbmRvdy5hcHAubXV0ZWQpIHtcbiAgICAgICAgcm93c1RvUGxheS5mb3JFYWNoKGZ1bmN0aW9uKHJvdykge1xuICAgICAgICAgIHdpbmRvdy5hcHAuc3ludGgucGxheVJvdyhyb3cpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBPYmplY3QuYXNzaWduKHRoaXMsIHtcbiAgICBzY2FsZUNob29zZXI6IHNjYWxlQ2hvb3NlcixcbiAgICBjdXJyZW50U2NhbGU6IGN1cnJlbnRTY2FsZSxcbiAgICBjdXJyZW50VGltZTogY3VycmVudFRpbWUsXG4gICAgdG9uZU1hdHJpeDogdG9uZU1hdHJpeCxcbiAgICBkb3duc2FtcGxlOiBkb3duc2FtcGxlLFxuICAgIHJheWNhc3RlcjogcmF5Y2FzdGVyLFxuICAgIHRyYW5zcG9ydDogdHJhbnNwb3J0LFxuICAgIHN0YXJ0VGltZTogc3RhcnRUaW1lLFxuICAgIGtub2JQYW5lbDoga25vYlBhbmVsLFxuICAgIHJlbmRlcmVyOiByZW5kZXJlcixcbiAgICBvbkJlYXQ6IG9uQmVhdCxcbiAgICBjYW1lcmE6IGNhbWVyYSxcbiAgICBwYXVzZWQ6IHBhdXNlZCxcbiAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICBtdXRlZDogbXV0ZWQsXG4gICAgc2NlbmU6IHNjZW5lLFxuICAgIHN5bnRoOiBzeW50aCxcbiAgICB3aWR0aDogd2lkdGgsXG4gIH0pO1xufVxuXG5BcHBsaWNhdGlvbi5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnNldFNjYWxlKHRoaXMuY3VycmVudFNjYWxlKTtcbiAgdGhpcy5yZXNpemUodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xufTtcblxuQXBwbGljYXRpb24ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnRvbmVNYXRyaXgucmVuZGVyKHRoaXMucmVuZGVyZXIpO1xuICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLnNjZW5lLCB0aGlzLmNhbWVyYSk7XG59O1xuXG5BcHBsaWNhdGlvbi5wcm90b3R5cGUuc2V0U2NhbGUgPSBmdW5jdGlvbihuZXdTY2FsZSkge1xuICB0aGlzLmN1cnJlbnRTY2FsZSA9IG5ld1NjYWxlO1xuICB0aGlzLnRvbmVNYXRyaXguc2V0QWN0aXZlQ29sb3Ioe1xuICAgIGJ1dHRvbkNvbG9yOiBuZXcgVEhSRUUuQ29sb3IodGhpcy5jdXJyZW50U2NhbGUuY29sb3IpLFxuICAgIHNoYWRvd0NvbG9yOiBuZXcgVEhSRUUuQ29sb3IodGhpcy5jdXJyZW50U2NhbGUucmlwcGxlX2NvbG9yKSxcbiAgfSk7XG4gIHRoaXMuc3ludGguc2NhbGUgPSB0aGlzLmN1cnJlbnRTY2FsZTtcbiAgdGhpcy5rbm9iUGFuZWwuc2V0Q29sb3IobmV3IFRIUkVFLkNvbG9yKHRoaXMuY3VycmVudFNjYWxlLmNvbG9yKSk7XG59O1xuXG5BcHBsaWNhdGlvbi5wcm90b3R5cGUucmVzaXplID0gZnVuY3Rpb24od2lkdGgsIGhlaWdodCkge1xuICB0aGlzLnJlbmRlcmVyLnNldFNpemUod2lkdGgsIGhlaWdodCk7XG4gIHRoaXMucmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpby90aGlzLmRvd25zYW1wbGUpO1xuICB0aGlzLmNhbWVyYS5sZWZ0ID0gLXdpZHRoLzI7XG4gIHRoaXMuY2FtZXJhLnJpZ2h0ID0gd2lkdGgvMjtcbiAgdGhpcy5jYW1lcmEudG9wID0gaGVpZ2h0LzI7XG4gIHRoaXMuY2FtZXJhLmJvdHRvbSA9IC1oZWlnaHQvMjtcbiAgdGhpcy5jYW1lcmEucG9zaXRpb24uc2V0KHdpZHRoLzIsIGhlaWdodC8yLCA1MCk7XG4gIHRoaXMuY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcblxuICB2YXIgdG9uZU1hdHJpeFNpemUgPSBNYXRoLm1pbih3aWR0aCwgaGVpZ2h0KTtcbiAgdmFyIGFzcGVjdFJhdGlvID0gd2lkdGgvaGVpZ2h0O1xuICBpZiAoYXNwZWN0UmF0aW8gPiAxIC0gQ29uc3RhbnRzLk1JTl9VSV9QQURESU5HICYmIGFzcGVjdFJhdGlvIDwgMS8oMSAtIENvbnN0YW50cy5NSU5fVUlfUEFERElORykpIHtcbiAgICBpZiAoYXNwZWN0UmF0aW8gPiAxKSB7XG4gICAgICB0b25lTWF0cml4U2l6ZSA9ICgxIC0gQ29uc3RhbnRzLk1JTl9VSV9QQURESU5HKSAqIHdpZHRoO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b25lTWF0cml4U2l6ZSA9ICgxIC0gQ29uc3RhbnRzLk1JTl9VSV9QQURESU5HKSAqIGhlaWdodDtcbiAgICB9XG4gIH1cbiAgdGhpcy50b25lTWF0cml4LnNjYWxlLnNldCh0b25lTWF0cml4U2l6ZSwgdG9uZU1hdHJpeFNpemUsIDEpO1xuICB0aGlzLnRvbmVNYXRyaXgucG9zaXRpb24uc2V0KHdpZHRoLzIsIGhlaWdodC8yLCAxKTtcblxuICB2YXIgY29udHJvbFBhbmVsTGF5b3V0ID0gKHdpZHRoID4gaGVpZ2h0KSA/IFwidmVydGljYWxcIiA6IFwiaG9yaXpvbnRhbFwiO1xuICB2YXIgYXZhaWxhYmxlU3BhY2UgPSBoZWlnaHQgLSAoaGVpZ2h0LzIgKyB0b25lTWF0cml4U2l6ZS8yKTtcbiAgdmFyIGNvbnRyb2xQYW5lbEhlaWdodCA9IGF2YWlsYWJsZVNwYWNlICogMC43O1xuICB2YXIgY29udHJvbFBhbmVsV2lkdGggPSB3aWR0aDtcbiAgaWYgKGNvbnRyb2xQYW5lbExheW91dCA9PT0gXCJ2ZXJ0aWNhbFwiKSB7XG4gICAgYXZhaWxhYmxlU3BhY2UgPSB3aWR0aCAtICh3aWR0aC8yICsgdG9uZU1hdHJpeFNpemUvMik7XG4gICAgY29udHJvbFBhbmVsV2lkdGggPSBhdmFpbGFibGVTcGFjZSAqIDAuNztcbiAgICBjb250cm9sUGFuZWxIZWlnaHQgPSBoZWlnaHQ7XG4gIH1cblxuICB0aGlzLmtub2JQYW5lbC5yZXNpemUoY29udHJvbFBhbmVsV2lkdGgsIGNvbnRyb2xQYW5lbEhlaWdodCk7XG4gIGlmIChjb250cm9sUGFuZWxMYXlvdXQgPT09IFwidmVydGljYWxcIikgeyAvLyBPbiB0aGUgcmlnaHQgc2lkZVxuICAgIHRoaXMua25vYlBhbmVsLnBvc2l0aW9uLnggPSAoMyAqIHdpZHRoICsgdG9uZU1hdHJpeFNpemUpIC8gNDtcbiAgICB0aGlzLmtub2JQYW5lbC5wb3NpdGlvbi55ID0gaGVpZ2h0LzI7XG4gIH0gZWxzZSB7IC8vIE9uIHRoZSB0b3BcbiAgICB0aGlzLmtub2JQYW5lbC5wb3NpdGlvbi54ID0gd2lkdGgvMjtcbiAgICB0aGlzLmtub2JQYW5lbC5wb3NpdGlvbi55ID0gKDMgKiBoZWlnaHQgKyB0b25lTWF0cml4U2l6ZSkgLyA0O1xuICB9XG5cbiAgdGhpcy5zY2FsZUNob29zZXIucG9zaXRpb24uc2V0KDAsIDAsIDApO1xuICB0aGlzLnNjYWxlQ2hvb3Nlci5yb3RhdGlvbi5zZXQoMCwgMCwgMCk7XG4gIHZhciBudW1TY2FsZXMgPSBPYmplY3Qua2V5cyhTY2FsZXMpLmxlbmd0aDtcbiAgdmFyIHNjYWxlQ2hvb3NlclNpemUgPSAwLjU7XG4gIGlmIChjb250cm9sUGFuZWxMYXlvdXQgPT09IFwidmVydGljYWxcIikge1xuICAgIHRoaXMuc2NhbGVDaG9vc2VyLnBvc2l0aW9uLnggPSAod2lkdGggLSB0b25lTWF0cml4U2l6ZSkgLyA0O1xuICAgIHRoaXMuc2NhbGVDaG9vc2VyLnBvc2l0aW9uLnkgPSBoZWlnaHQvMjtcbiAgICB0aGlzLnNjYWxlQ2hvb3Nlci5yb3RhdGVaKE1hdGguUEkgLzIpO1xuICAgIHNjYWxlQ2hvb3NlclNpemUgKj0gaGVpZ2h0L251bVNjYWxlcztcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnNjYWxlQ2hvb3Nlci5wb3NpdGlvbi54ID0gd2lkdGgvMjtcbiAgICB0aGlzLnNjYWxlQ2hvb3Nlci5wb3NpdGlvbi55ID0gKGhlaWdodCAtIHRvbmVNYXRyaXhTaXplKSAvIDQ7XG4gICAgc2NhbGVDaG9vc2VyU2l6ZSAqPSB3aWR0aC9udW1TY2FsZXM7XG4gIH1cbiAgdGhpcy5zY2FsZUNob29zZXIuc2NhbGUuc2V0KHNjYWxlQ2hvb3NlclNpemUsIHNjYWxlQ2hvb3NlclNpemUsIDEpO1xuXG4gIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG59O1xuXG4vLyBUT0RPIHN0b3JlIGludGVyYWN0YWJsZXMgaW4gYXJyYXlcbkFwcGxpY2F0aW9uLnByb3RvdHlwZS50b3VjaFN0YXJ0ID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgdmFyIG1vdXNlID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcbiAgbW91c2UueCA9IChldmVudC5wYWdlWCAvIHRoaXMud2lkdGgpICogMiAtIDE7XG4gIG1vdXNlLnkgPSAtKGV2ZW50LnBhZ2VZIC8gdGhpcy5oZWlnaHQpICogMiArIDE7XG4gIHRoaXMucmF5Y2FzdGVyLnNldEZyb21DYW1lcmEobW91c2UsIHRoaXMuY2FtZXJhKTtcbiAgdGhpcy50b25lTWF0cml4LnRvdWNoU3RhcnQodGhpcy5yYXljYXN0ZXIpO1xuICB0aGlzLnNjYWxlQ2hvb3Nlci50b3VjaFN0YXJ0KHRoaXMucmF5Y2FzdGVyKTtcbiAgdGhpcy5rbm9iUGFuZWwudG91Y2hTdGFydCh0aGlzLnJheWNhc3RlciwgZXZlbnQpO1xufTtcblxuQXBwbGljYXRpb24ucHJvdG90eXBlLnRvdWNoID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgdmFyIG1vdXNlID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcbiAgbW91c2UueCA9IChldmVudC5wYWdlWCAvIHRoaXMud2lkdGgpICogMiAtIDE7XG4gIG1vdXNlLnkgPSAtKGV2ZW50LnBhZ2VZIC8gdGhpcy5oZWlnaHQpICogMiArIDE7XG4gIHRoaXMucmF5Y2FzdGVyLnNldEZyb21DYW1lcmEobW91c2UsIHRoaXMuY2FtZXJhKTtcbiAgdGhpcy50b25lTWF0cml4LnRvdWNoKHRoaXMucmF5Y2FzdGVyKTtcbiAgdGhpcy5rbm9iUGFuZWwudG91Y2godGhpcy5yYXljYXN0ZXIsIGV2ZW50KTtcbiAgdGhpcy5zY2FsZUNob29zZXIudG91Y2godGhpcy5yYXljYXN0ZXIpO1xufTtcblxuQXBwbGljYXRpb24ucHJvdG90eXBlLnRvdWNoRW5kID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMua25vYlBhbmVsLnRvdWNoRW5kKCk7XG4gIHRoaXMudG9uZU1hdHJpeC50b3VjaEVuZCgpO1xufTtcblxuQXBwbGljYXRpb24ucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMudG9uZU1hdHJpeC5jbGVhcigpO1xufTtcblxuQXBwbGljYXRpb24ucHJvdG90eXBlLnRvZ2dsZU11dGUgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5tdXRlZCA9ICF0aGlzLm11dGVkO1xuICB0aGlzLnRvbmVNYXRyaXgubXV0ZSh0aGlzLm11dGVkKTtcbiAgdGhpcy5rbm9iUGFuZWwuc2V0Q29sb3IobmV3IFRIUkVFLkNvbG9yKHRoaXMuY3VycmVudFNjYWxlLmNvbG9yKS5tdWx0aXBseVNjYWxhcihcbiAgICBUSFJFRS5NYXRoLmxlcnAoMS4wLCBDb25zdGFudHMuTVVURV9DT0xPUl9WQUxVRSwgdGhpcy5tdXRlZClcbiAgKSk7IC8vIFRPRE8gc2V0IGRhbXBpbmdcbn07XG5cbkFwcGxpY2F0aW9uLnByb3RvdHlwZS50b2dnbGVQYXVzZWQgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy50cmFuc3BvcnQudG9nZ2xlUGF1c2VkKCk7XG4gIGlmICh0aGlzLnBhdXNlZCkge1xuICAgIHRoaXMudG9uZU1hdHJpeC5kZWFjdGl2YXRlQ29sdW1ucygpO1xuICB9XG59O1xuXG5cbkFwcGxpY2F0aW9uLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnN5bnRoLnN0YXJ0KCk7XG4gIHRoaXMudHJhbnNwb3J0LnN0YXJ0KCk7XG59O1xuXG5BcHBsaWNhdGlvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuY3VycmVudFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgdGhpcy50cmFuc3BvcnQudXBkYXRlKHRoaXMub25CZWF0KTtcbiAgdGhpcy5zY2FsZUNob29zZXIudXBkYXRlKHRoaXMuY3VycmVudFRpbWUpO1xuXG4gIC8vIFRPRE8gaGF2ZSBtb3JlIHJvYnVzdCBjb250cm9sIGluZnJhc3RydWN0dXJlXG4gIHRoaXMudHJhbnNwb3J0LnN3aW5nID0gdGhpcy5zeW50aC5nZXRDb250cm9sKFwic3dpbmdcIik7XG5cbiAgLy8gVE9ETywgdGhpcyBpcyBoaWRlb3VzXG4gIHZhciBuZXdEYW1waW5nID0gKGZ1bmN0aW9uIGdldFJlbGVhc2UoKSB7XG4gICAgdmFyIHJlbGVhc2UgPSB3aW5kb3cuYXBwLnN5bnRoLmdldENvbnRyb2woXCJyZWxlYXNlXCIpO1xuICAgIHZhciBtaW5SZWxlYXNlID0gQ29udHJvbHMuRW52ZWxvcGUucmVsZWFzZS5taW5WYWx1ZTtcbiAgICB2YXIgbWF4UmVsZWFzZSA9IENvbnRyb2xzLkVudmVsb3BlLnJlbGVhc2UubWF4VmFsdWU7XG4gICAgdmFyIGRhbXBpbmdWYWx1ZTtcbiAgICB2YXIgZmlyc3RTdG9wID0gMC4wNTtcbiAgICBpZiAocmVsZWFzZSA8IFRIUkVFLk1hdGgubGVycChtaW5SZWxlYXNlLCBtYXhSZWxlYXNlLCBmaXJzdFN0b3ApKSB7XG4gICAgICBkYW1waW5nVmFsdWUgPSBUSFJFRS5NYXRoLm1hcExpbmVhcihyZWxlYXNlLCBtaW5SZWxlYXNlLCBUSFJFRS5NYXRoLmxlcnAobWluUmVsZWFzZSwgbWF4UmVsZWFzZSwgZmlyc3RTdG9wKSwgMC45LCAwLjk5NSk7XG4gICAgfSBlbHNlIGlmIChyZWxlYXNlID09PSBDb250cm9scy5FbnZlbG9wZS5yZWxlYXNlLm1heFZhbHVlKSB7XG4gICAgICBkYW1waW5nVmFsdWUgPSAwLjk5OTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGFtcGluZ1ZhbHVlID0gVEhSRUUuTWF0aC5tYXBMaW5lYXIocmVsZWFzZSwgVEhSRUUuTWF0aC5sZXJwKG1pblJlbGVhc2UsIG1heFJlbGVhc2UsIGZpcnN0U3RvcCksIG1heFJlbGVhc2UsIDAuOTk1LCAwLjk5OSk7XG4gICAgfVxuICAgIHJldHVybiBkYW1waW5nVmFsdWU7XG4gIH0pKCk7XG4gIHRoaXMudG9uZU1hdHJpeC5zZXREYW1waW5nKG5ld0RhbXBpbmcpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQXBwbGljYXRpb247XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./js/Application.js\n");

/***/ }),

/***/ "./js/ControlPanel.js":
/*!****************************!*\
  !*** ./js/ControlPanel.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/three/build/three.min.js */ \"./node_modules/three/build/three.min.js\");\n/* harmony import */ var _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Knob__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Knob */ \"./js/Knob.js\");\n/* harmony import */ var _AppData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AppData */ \"./js/AppData.js\");\n\n\n\n\nfunction sizeAndPositionKnobs(knobGroup, width, height) {\n  var numKnobs = knobGroup.children.length;\n  var layout = (width > height) ? \"horizontal\" : \"vertical\";\n  var knobRadius = Math.min(width/2, height/2/numKnobs);\n  if (layout === \"horizontal\") {\n    knobRadius = Math.min(width/2/numKnobs, height/2);\n  }\n  knobRadius = Math.min(knobRadius, _AppData__WEBPACK_IMPORTED_MODULE_2__[\"Constants\"].MAX_KNOB_RADIUS);\n  knobGroup.children.forEach(function(knob, i) {\n    knob.position.set(0, 0, 0);\n    knob.scale.set(knobRadius, knobRadius, 1);\n    if (numKnobs > 1) {\n      if (layout === \"horizontal\") {\n        var panelWidth = 2 * knobRadius * numKnobs;\n        knob.position.x = _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Math\"].mapLinear(i, 0, numKnobs - 1, -panelWidth/2 + knobRadius, panelWidth/2 - knobRadius);\n      } else {\n        var panelHeight = 2 * knobRadius * numKnobs;\n        knob.position.y = _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Math\"].mapLinear(i, 0, numKnobs - 1, panelHeight/2 - knobRadius, -panelHeight/2 + knobRadius);\n      }\n    }\n  });\n}\n\nfunction makeKnobs(knobOptions, getter, setter) {\n  var knobGroup = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Group\"]();\n  var numKnobs = knobOptions.length;\n  for (var i = 0; i < numKnobs; i++) {\n    var knob = new _Knob__WEBPACK_IMPORTED_MODULE_1__[\"default\"](Object.assign(knobOptions[i], {\n      currentValue: knobOptions[i].initialValue || getter(knobOptions[i].control),\n      sensitivity: 2 / window.devicePixelRatio,\n    }));\n    setter(knob.control, knob.getValue());\n    knobGroup.add(knob);\n  }\n  return knobGroup;\n}\n\nfunction ControlPanel(options) {\n  _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Group\"].call(this);\n  var knobOptions = options.knobs || [];\n\n  var knobGroup = makeKnobs(knobOptions, options.getter, options.setter);\n  this.add(knobGroup);\n\n  this.touch = function(raycaster, event) {\n    knobGroup.children.forEach(function(knob) {\n      knob.touch(new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"](event.pageX, -event.pageY)); // TODO why redo this?\n      options.setter(knob.control, knob.getValue());\n    });\n  };\n\n  this.touchStart = function(raycaster, event) {\n    knobGroup.children.forEach(function(knob) {\n      knob.touchStart(raycaster, new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"](event.pageX, -event.pageY)); // TODO why redo this?\n    });\n  };\n\n  this.touchEnd = function(raycaster) {\n    knobGroup.children.forEach(function(knob) {\n      knob.touchEnd();\n    });\n  };\n\n  this.setColor = function(color) {\n    knobGroup.children.forEach(function(knob) {\n      knob.setColor(color);\n    });\n  };\n\n  this.resize = function(width, height) {\n    sizeAndPositionKnobs(knobGroup, width, height);\n  };\n}\nControlPanel.prototype = Object.create(_node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Object3D\"].prototype);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ControlPanel);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9Db250cm9sUGFuZWwuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9SUy8uL2pzL0NvbnRyb2xQYW5lbC5qcz84MzQ1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFRIUkVFIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvdGhyZWUvYnVpbGQvdGhyZWUubWluLmpzXCI7XG5pbXBvcnQgS25vYiBmcm9tIFwiLi9Lbm9iXCI7XG5pbXBvcnQge0NvbnN0YW50c30gZnJvbSBcIi4vQXBwRGF0YVwiO1xuXG5mdW5jdGlvbiBzaXplQW5kUG9zaXRpb25Lbm9icyhrbm9iR3JvdXAsIHdpZHRoLCBoZWlnaHQpIHtcbiAgdmFyIG51bUtub2JzID0ga25vYkdyb3VwLmNoaWxkcmVuLmxlbmd0aDtcbiAgdmFyIGxheW91dCA9ICh3aWR0aCA+IGhlaWdodCkgPyBcImhvcml6b250YWxcIiA6IFwidmVydGljYWxcIjtcbiAgdmFyIGtub2JSYWRpdXMgPSBNYXRoLm1pbih3aWR0aC8yLCBoZWlnaHQvMi9udW1Lbm9icyk7XG4gIGlmIChsYXlvdXQgPT09IFwiaG9yaXpvbnRhbFwiKSB7XG4gICAga25vYlJhZGl1cyA9IE1hdGgubWluKHdpZHRoLzIvbnVtS25vYnMsIGhlaWdodC8yKTtcbiAgfVxuICBrbm9iUmFkaXVzID0gTWF0aC5taW4oa25vYlJhZGl1cywgQ29uc3RhbnRzLk1BWF9LTk9CX1JBRElVUyk7XG4gIGtub2JHcm91cC5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGtub2IsIGkpIHtcbiAgICBrbm9iLnBvc2l0aW9uLnNldCgwLCAwLCAwKTtcbiAgICBrbm9iLnNjYWxlLnNldChrbm9iUmFkaXVzLCBrbm9iUmFkaXVzLCAxKTtcbiAgICBpZiAobnVtS25vYnMgPiAxKSB7XG4gICAgICBpZiAobGF5b3V0ID09PSBcImhvcml6b250YWxcIikge1xuICAgICAgICB2YXIgcGFuZWxXaWR0aCA9IDIgKiBrbm9iUmFkaXVzICogbnVtS25vYnM7XG4gICAgICAgIGtub2IucG9zaXRpb24ueCA9IFRIUkVFLk1hdGgubWFwTGluZWFyKGksIDAsIG51bUtub2JzIC0gMSwgLXBhbmVsV2lkdGgvMiArIGtub2JSYWRpdXMsIHBhbmVsV2lkdGgvMiAtIGtub2JSYWRpdXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHBhbmVsSGVpZ2h0ID0gMiAqIGtub2JSYWRpdXMgKiBudW1Lbm9icztcbiAgICAgICAga25vYi5wb3NpdGlvbi55ID0gVEhSRUUuTWF0aC5tYXBMaW5lYXIoaSwgMCwgbnVtS25vYnMgLSAxLCBwYW5lbEhlaWdodC8yIC0ga25vYlJhZGl1cywgLXBhbmVsSGVpZ2h0LzIgKyBrbm9iUmFkaXVzKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBtYWtlS25vYnMoa25vYk9wdGlvbnMsIGdldHRlciwgc2V0dGVyKSB7XG4gIHZhciBrbm9iR3JvdXAgPSBuZXcgVEhSRUUuR3JvdXAoKTtcbiAgdmFyIG51bUtub2JzID0ga25vYk9wdGlvbnMubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUtub2JzOyBpKyspIHtcbiAgICB2YXIga25vYiA9IG5ldyBLbm9iKE9iamVjdC5hc3NpZ24oa25vYk9wdGlvbnNbaV0sIHtcbiAgICAgIGN1cnJlbnRWYWx1ZToga25vYk9wdGlvbnNbaV0uaW5pdGlhbFZhbHVlIHx8IGdldHRlcihrbm9iT3B0aW9uc1tpXS5jb250cm9sKSxcbiAgICAgIHNlbnNpdGl2aXR5OiAyIC8gd2luZG93LmRldmljZVBpeGVsUmF0aW8sXG4gICAgfSkpO1xuICAgIHNldHRlcihrbm9iLmNvbnRyb2wsIGtub2IuZ2V0VmFsdWUoKSk7XG4gICAga25vYkdyb3VwLmFkZChrbm9iKTtcbiAgfVxuICByZXR1cm4ga25vYkdyb3VwO1xufVxuXG5mdW5jdGlvbiBDb250cm9sUGFuZWwob3B0aW9ucykge1xuICBUSFJFRS5Hcm91cC5jYWxsKHRoaXMpO1xuICB2YXIga25vYk9wdGlvbnMgPSBvcHRpb25zLmtub2JzIHx8IFtdO1xuXG4gIHZhciBrbm9iR3JvdXAgPSBtYWtlS25vYnMoa25vYk9wdGlvbnMsIG9wdGlvbnMuZ2V0dGVyLCBvcHRpb25zLnNldHRlcik7XG4gIHRoaXMuYWRkKGtub2JHcm91cCk7XG5cbiAgdGhpcy50b3VjaCA9IGZ1bmN0aW9uKHJheWNhc3RlciwgZXZlbnQpIHtcbiAgICBrbm9iR3JvdXAuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihrbm9iKSB7XG4gICAgICBrbm9iLnRvdWNoKG5ldyBUSFJFRS5WZWN0b3IyKGV2ZW50LnBhZ2VYLCAtZXZlbnQucGFnZVkpKTsgLy8gVE9ETyB3aHkgcmVkbyB0aGlzP1xuICAgICAgb3B0aW9ucy5zZXR0ZXIoa25vYi5jb250cm9sLCBrbm9iLmdldFZhbHVlKCkpO1xuICAgIH0pO1xuICB9O1xuXG4gIHRoaXMudG91Y2hTdGFydCA9IGZ1bmN0aW9uKHJheWNhc3RlciwgZXZlbnQpIHtcbiAgICBrbm9iR3JvdXAuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihrbm9iKSB7XG4gICAgICBrbm9iLnRvdWNoU3RhcnQocmF5Y2FzdGVyLCBuZXcgVEhSRUUuVmVjdG9yMihldmVudC5wYWdlWCwgLWV2ZW50LnBhZ2VZKSk7IC8vIFRPRE8gd2h5IHJlZG8gdGhpcz9cbiAgICB9KTtcbiAgfTtcblxuICB0aGlzLnRvdWNoRW5kID0gZnVuY3Rpb24ocmF5Y2FzdGVyKSB7XG4gICAga25vYkdyb3VwLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oa25vYikge1xuICAgICAga25vYi50b3VjaEVuZCgpO1xuICAgIH0pO1xuICB9O1xuXG4gIHRoaXMuc2V0Q29sb3IgPSBmdW5jdGlvbihjb2xvcikge1xuICAgIGtub2JHcm91cC5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGtub2IpIHtcbiAgICAgIGtub2Iuc2V0Q29sb3IoY29sb3IpO1xuICAgIH0pO1xuICB9O1xuXG4gIHRoaXMucmVzaXplID0gZnVuY3Rpb24od2lkdGgsIGhlaWdodCkge1xuICAgIHNpemVBbmRQb3NpdGlvbktub2JzKGtub2JHcm91cCwgd2lkdGgsIGhlaWdodCk7XG4gIH07XG59XG5Db250cm9sUGFuZWwucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1xuXG5leHBvcnQgZGVmYXVsdCBDb250cm9sUGFuZWw7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./js/ControlPanel.js\n");

/***/ }),

/***/ "./js/Graphics.js":
/*!************************!*\
  !*** ./js/Graphics.js ***!
  \************************/
/*! exports provided: blitTexture */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"blitTexture\", function() { return blitTexture; });\n/* harmony import */ var _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/three/build/three.min.js */ \"./node_modules/three/build/three.min.js\");\n/* harmony import */ var _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__);\n\n\n// Render a texture with a particular shader, useful for blurs\nvar blitTexture = (function() {\n  var blitCamera = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"OrthographicCamera\"](-1, 1, 1, -1, 0, 1);\n  var subScene = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Scene\"]();\n  var quad = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Mesh\"](new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"PlaneBufferGeometry\"](2, 2), null);\n  subScene.add(quad);\n\n  return function bt(renderer, material, target) {\n    quad.material = material;\n    renderer.render(subScene, blitCamera, target);\n    quad.material = null;\n  };\n})();\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9HcmFwaGljcy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1JTLy4vanMvR3JhcGhpY3MuanM/N2IzZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBUSFJFRSBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL3RocmVlL2J1aWxkL3RocmVlLm1pbi5qc1wiO1xuXG4vLyBSZW5kZXIgYSB0ZXh0dXJlIHdpdGggYSBwYXJ0aWN1bGFyIHNoYWRlciwgdXNlZnVsIGZvciBibHVyc1xudmFyIGJsaXRUZXh0dXJlID0gKGZ1bmN0aW9uKCkge1xuICB2YXIgYmxpdENhbWVyYSA9IG5ldyBUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmEoLTEsIDEsIDEsIC0xLCAwLCAxKTtcbiAgdmFyIHN1YlNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XG4gIHZhciBxdWFkID0gbmV3IFRIUkVFLk1lc2gobmV3IFRIUkVFLlBsYW5lQnVmZmVyR2VvbWV0cnkoMiwgMiksIG51bGwpO1xuICBzdWJTY2VuZS5hZGQocXVhZCk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGJ0KHJlbmRlcmVyLCBtYXRlcmlhbCwgdGFyZ2V0KSB7XG4gICAgcXVhZC5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuICAgIHJlbmRlcmVyLnJlbmRlcihzdWJTY2VuZSwgYmxpdENhbWVyYSwgdGFyZ2V0KTtcbiAgICBxdWFkLm1hdGVyaWFsID0gbnVsbDtcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCB7YmxpdFRleHR1cmV9O1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/Graphics.js\n");

/***/ }),

/***/ "./js/Knob.js":
/*!********************!*\
  !*** ./js/Knob.js ***!
  \********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/three/build/three.min.js */ \"./node_modules/three/build/three.min.js\");\n/* harmony import */ var _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Materials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Materials */ \"./js/Materials.js\");\n/* harmony import */ var _AppData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AppData */ \"./js/AppData.js\");\n\n\n\n\nfunction Knob(options) {\n  _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Group\"].call(this);\n  const NUM_CIRCLE_SEGMENTS = 100; // How smooth is the circle\n  const INDICATOR_LIGHT_DISTANCE_RATIO = 1.25; // distance of indicator lights relative to radius\n  const INDICATOR_LIGHT_SIZE_RATIO = 0.2; // radius of lights relative to knob radius\n\n  options = options || {};\n  var sensitivity = options.sensitivity || 1; // How many degrees the knob turns per pixel\n  var minRotation = options.minRotation || -0.75 * Math.PI;\n  var maxRotation = options.maxRotation || 0.75 * Math.PI;\n  var minValue = options.minValue || 0;\n  var maxValue = options.maxValue || 100;\n  var currentValue = options.currentValue || minValue;\n  var numLights = options.numLights || 16;\n  this.control = options.control;\n\n  var isActive = false;\n  var touchStartRotation = 0;\n  var touchStartPos = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\n  var radius = 1 / (INDICATOR_LIGHT_DISTANCE_RATIO + INDICATOR_LIGHT_SIZE_RATIO);\n  var bodyGeom = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"CircleBufferGeometry\"](radius, NUM_CIRCLE_SEGMENTS);\n  var bodyMat = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshBasicMaterial\"]({color: _AppData__WEBPACK_IMPORTED_MODULE_2__[\"Constants\"].BASE_COLOR});\n  var body = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Mesh\"](bodyGeom, bodyMat);\n  this.add(body);\n\n  var nib = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Mesh\"](bodyGeom, new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshBasicMaterial\"]({color: _AppData__WEBPACK_IMPORTED_MODULE_2__[\"Constants\"].SECONDARY_BASE_COLOR}));\n  nib.scale.multiplyScalar(0.1);\n  body.add(nib);\n  nib.position.y += radius * 0.8;\n\n  var lights = (function makeLights() {\n    var icRadius = INDICATOR_LIGHT_SIZE_RATIO * radius;\n    var positions = [0, 2 * icRadius, 0, 2 * icRadius, 2 * icRadius, 0, 0, 0, 0, 2 * icRadius, 0, 0];\n    var indices = [0, 2, 1, 2, 3, 1];\n    var uvs = [0, 1, 1, 1, 0, 0, 1, 0];\n    var geom = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"InstancedBufferGeometry\"]();\n    geom.addAttribute(\"position\", new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferAttribute\"](new Float32Array(positions), 3));\n    geom.translate(-icRadius, -icRadius, 0);\n    geom.setIndex(indices);\n    geom.addAttribute(\"uv\", new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferAttribute\"](new Float32Array(uvs), 2));\n    var relativePositions = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"InstancedBufferAttribute\"](new Float32Array(numLights * 3), 3, 1);\n    var angles = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"InstancedBufferAttribute\"](new Float32Array(numLights), 1, 1);\n\n    for (let i = 0; i < numLights; i++) {\n      var rot = _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Math\"].mapLinear(i, 0, numLights - 1, minRotation, maxRotation);\n      // Our rotations start pointing up and have positive values going clockwise\n      // Yes, this is absurd, stop waving your arms\n      rot = -rot + Math.PI/2;\n      var x = INDICATOR_LIGHT_DISTANCE_RATIO * radius * Math.cos(rot);\n      var y = INDICATOR_LIGHT_DISTANCE_RATIO * radius * Math.sin(rot);\n      relativePositions.setXYZ(i, x, y, 0);\n      angles.setX(i, rot);\n    }\n    geom.addAttribute(\"relativePosition\", relativePositions);\n    geom.addAttribute(\"angle\", angles);\n    var instancedMesh = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Mesh\"](geom, _Materials__WEBPACK_IMPORTED_MODULE_1__[\"default\"].indicatorLight());\n    return instancedMesh;\n  })();\n  this.add(lights);\n\n  function setRotation(rotation) {\n    // This is necessary because values are counter clockwise\n    body.rotation.z = -rotation;\n    // same regrettable transformation as above\n    lights.material.uniforms.u_currentRotation.value = -rotation + Math.PI/2;\n  }\n  function getRotationFromValue(value) {\n    return _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Math\"].mapLinear(value, minValue, maxValue, minRotation, maxRotation);\n  }\n  function getValueFromRotation(rotation) {\n    return _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Math\"].mapLinear(rotation, minRotation, maxRotation, minValue, maxValue);\n  }\n\n  setRotation(getRotationFromValue(currentValue));\n\n  this.getValue = function() {\n    return currentValue;\n  };\n\n  this.touchStart = function(raycaster, mouse) {\n    var touch = raycaster.intersectObjects(this.children)[0];\n    if (touch) {\n      isActive = true;\n      touchStartPos = mouse;\n      touchStartRotation = -body.rotation.z;\n    }\n  };\n\n  this.touchEnd = function() {\n    isActive = false;\n  };\n\n  var touchDiff = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n  this.touch = function(mouse) {\n    if (isActive) {\n      touchDiff.subVectors(mouse, touchStartPos);\n      var touchStrength = touchDiff.x + touchDiff.y;\n      var newRotation = touchStartRotation + _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Math\"].degToRad(sensitivity * touchStrength);\n      newRotation = _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Math\"].clamp(newRotation, minRotation, maxRotation);\n      setRotation(newRotation);\n      currentValue = getValueFromRotation(newRotation);\n    }\n  };\n\n  this.setColor = function(color) {\n    lights.material.uniforms.u_color.value = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"](color); // TODO come in as a three.color?\n  };\n}\nKnob.prototype = Object.create(_node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Object3D\"].prototype);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Knob);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9Lbm9iLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUlMvLi9qcy9Lbm9iLmpzPzE0YmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSBcIi4uL25vZGVfbW9kdWxlcy90aHJlZS9idWlsZC90aHJlZS5taW4uanNcIjtcbmltcG9ydCBNYXRlcmlhbHMgZnJvbSBcIi4vTWF0ZXJpYWxzXCI7XG5pbXBvcnQge0NvbnN0YW50c30gZnJvbSBcIi4vQXBwRGF0YVwiO1xuXG5mdW5jdGlvbiBLbm9iKG9wdGlvbnMpIHtcbiAgVEhSRUUuR3JvdXAuY2FsbCh0aGlzKTtcbiAgY29uc3QgTlVNX0NJUkNMRV9TRUdNRU5UUyA9IDEwMDsgLy8gSG93IHNtb290aCBpcyB0aGUgY2lyY2xlXG4gIGNvbnN0IElORElDQVRPUl9MSUdIVF9ESVNUQU5DRV9SQVRJTyA9IDEuMjU7IC8vIGRpc3RhbmNlIG9mIGluZGljYXRvciBsaWdodHMgcmVsYXRpdmUgdG8gcmFkaXVzXG4gIGNvbnN0IElORElDQVRPUl9MSUdIVF9TSVpFX1JBVElPID0gMC4yOyAvLyByYWRpdXMgb2YgbGlnaHRzIHJlbGF0aXZlIHRvIGtub2IgcmFkaXVzXG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBzZW5zaXRpdml0eSA9IG9wdGlvbnMuc2Vuc2l0aXZpdHkgfHwgMTsgLy8gSG93IG1hbnkgZGVncmVlcyB0aGUga25vYiB0dXJucyBwZXIgcGl4ZWxcbiAgdmFyIG1pblJvdGF0aW9uID0gb3B0aW9ucy5taW5Sb3RhdGlvbiB8fCAtMC43NSAqIE1hdGguUEk7XG4gIHZhciBtYXhSb3RhdGlvbiA9IG9wdGlvbnMubWF4Um90YXRpb24gfHwgMC43NSAqIE1hdGguUEk7XG4gIHZhciBtaW5WYWx1ZSA9IG9wdGlvbnMubWluVmFsdWUgfHwgMDtcbiAgdmFyIG1heFZhbHVlID0gb3B0aW9ucy5tYXhWYWx1ZSB8fCAxMDA7XG4gIHZhciBjdXJyZW50VmFsdWUgPSBvcHRpb25zLmN1cnJlbnRWYWx1ZSB8fCBtaW5WYWx1ZTtcbiAgdmFyIG51bUxpZ2h0cyA9IG9wdGlvbnMubnVtTGlnaHRzIHx8IDE2O1xuICB0aGlzLmNvbnRyb2wgPSBvcHRpb25zLmNvbnRyb2w7XG5cbiAgdmFyIGlzQWN0aXZlID0gZmFsc2U7XG4gIHZhciB0b3VjaFN0YXJ0Um90YXRpb24gPSAwO1xuICB2YXIgdG91Y2hTdGFydFBvcyA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XG5cbiAgdmFyIHJhZGl1cyA9IDEgLyAoSU5ESUNBVE9SX0xJR0hUX0RJU1RBTkNFX1JBVElPICsgSU5ESUNBVE9SX0xJR0hUX1NJWkVfUkFUSU8pO1xuICB2YXIgYm9keUdlb20gPSBuZXcgVEhSRUUuQ2lyY2xlQnVmZmVyR2VvbWV0cnkocmFkaXVzLCBOVU1fQ0lSQ0xFX1NFR01FTlRTKTtcbiAgdmFyIGJvZHlNYXQgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiBDb25zdGFudHMuQkFTRV9DT0xPUn0pO1xuICB2YXIgYm9keSA9IG5ldyBUSFJFRS5NZXNoKGJvZHlHZW9tLCBib2R5TWF0KTtcbiAgdGhpcy5hZGQoYm9keSk7XG5cbiAgdmFyIG5pYiA9IG5ldyBUSFJFRS5NZXNoKGJvZHlHZW9tLCBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiBDb25zdGFudHMuU0VDT05EQVJZX0JBU0VfQ09MT1J9KSk7XG4gIG5pYi5zY2FsZS5tdWx0aXBseVNjYWxhcigwLjEpO1xuICBib2R5LmFkZChuaWIpO1xuICBuaWIucG9zaXRpb24ueSArPSByYWRpdXMgKiAwLjg7XG5cbiAgdmFyIGxpZ2h0cyA9IChmdW5jdGlvbiBtYWtlTGlnaHRzKCkge1xuICAgIHZhciBpY1JhZGl1cyA9IElORElDQVRPUl9MSUdIVF9TSVpFX1JBVElPICogcmFkaXVzO1xuICAgIHZhciBwb3NpdGlvbnMgPSBbMCwgMiAqIGljUmFkaXVzLCAwLCAyICogaWNSYWRpdXMsIDIgKiBpY1JhZGl1cywgMCwgMCwgMCwgMCwgMiAqIGljUmFkaXVzLCAwLCAwXTtcbiAgICB2YXIgaW5kaWNlcyA9IFswLCAyLCAxLCAyLCAzLCAxXTtcbiAgICB2YXIgdXZzID0gWzAsIDEsIDEsIDEsIDAsIDAsIDEsIDBdO1xuICAgIHZhciBnZW9tID0gbmV3IFRIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5KCk7XG4gICAgZ2VvbS5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkocG9zaXRpb25zKSwgMykpO1xuICAgIGdlb20udHJhbnNsYXRlKC1pY1JhZGl1cywgLWljUmFkaXVzLCAwKTtcbiAgICBnZW9tLnNldEluZGV4KGluZGljZXMpO1xuICAgIGdlb20uYWRkQXR0cmlidXRlKFwidXZcIiwgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KHV2cyksIDIpKTtcbiAgICB2YXIgcmVsYXRpdmVQb3NpdGlvbnMgPSBuZXcgVEhSRUUuSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkobnVtTGlnaHRzICogMyksIDMsIDEpO1xuICAgIHZhciBhbmdsZXMgPSBuZXcgVEhSRUUuSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkobnVtTGlnaHRzKSwgMSwgMSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUxpZ2h0czsgaSsrKSB7XG4gICAgICB2YXIgcm90ID0gVEhSRUUuTWF0aC5tYXBMaW5lYXIoaSwgMCwgbnVtTGlnaHRzIC0gMSwgbWluUm90YXRpb24sIG1heFJvdGF0aW9uKTtcbiAgICAgIC8vIE91ciByb3RhdGlvbnMgc3RhcnQgcG9pbnRpbmcgdXAgYW5kIGhhdmUgcG9zaXRpdmUgdmFsdWVzIGdvaW5nIGNsb2Nrd2lzZVxuICAgICAgLy8gWWVzLCB0aGlzIGlzIGFic3VyZCwgc3RvcCB3YXZpbmcgeW91ciBhcm1zXG4gICAgICByb3QgPSAtcm90ICsgTWF0aC5QSS8yO1xuICAgICAgdmFyIHggPSBJTkRJQ0FUT1JfTElHSFRfRElTVEFOQ0VfUkFUSU8gKiByYWRpdXMgKiBNYXRoLmNvcyhyb3QpO1xuICAgICAgdmFyIHkgPSBJTkRJQ0FUT1JfTElHSFRfRElTVEFOQ0VfUkFUSU8gKiByYWRpdXMgKiBNYXRoLnNpbihyb3QpO1xuICAgICAgcmVsYXRpdmVQb3NpdGlvbnMuc2V0WFlaKGksIHgsIHksIDApO1xuICAgICAgYW5nbGVzLnNldFgoaSwgcm90KTtcbiAgICB9XG4gICAgZ2VvbS5hZGRBdHRyaWJ1dGUoXCJyZWxhdGl2ZVBvc2l0aW9uXCIsIHJlbGF0aXZlUG9zaXRpb25zKTtcbiAgICBnZW9tLmFkZEF0dHJpYnV0ZShcImFuZ2xlXCIsIGFuZ2xlcyk7XG4gICAgdmFyIGluc3RhbmNlZE1lc2ggPSBuZXcgVEhSRUUuTWVzaChnZW9tLCBNYXRlcmlhbHMuaW5kaWNhdG9yTGlnaHQoKSk7XG4gICAgcmV0dXJuIGluc3RhbmNlZE1lc2g7XG4gIH0pKCk7XG4gIHRoaXMuYWRkKGxpZ2h0cyk7XG5cbiAgZnVuY3Rpb24gc2V0Um90YXRpb24ocm90YXRpb24pIHtcbiAgICAvLyBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHZhbHVlcyBhcmUgY291bnRlciBjbG9ja3dpc2VcbiAgICBib2R5LnJvdGF0aW9uLnogPSAtcm90YXRpb247XG4gICAgLy8gc2FtZSByZWdyZXR0YWJsZSB0cmFuc2Zvcm1hdGlvbiBhcyBhYm92ZVxuICAgIGxpZ2h0cy5tYXRlcmlhbC51bmlmb3Jtcy51X2N1cnJlbnRSb3RhdGlvbi52YWx1ZSA9IC1yb3RhdGlvbiArIE1hdGguUEkvMjtcbiAgfVxuICBmdW5jdGlvbiBnZXRSb3RhdGlvbkZyb21WYWx1ZSh2YWx1ZSkge1xuICAgIHJldHVybiBUSFJFRS5NYXRoLm1hcExpbmVhcih2YWx1ZSwgbWluVmFsdWUsIG1heFZhbHVlLCBtaW5Sb3RhdGlvbiwgbWF4Um90YXRpb24pO1xuICB9XG4gIGZ1bmN0aW9uIGdldFZhbHVlRnJvbVJvdGF0aW9uKHJvdGF0aW9uKSB7XG4gICAgcmV0dXJuIFRIUkVFLk1hdGgubWFwTGluZWFyKHJvdGF0aW9uLCBtaW5Sb3RhdGlvbiwgbWF4Um90YXRpb24sIG1pblZhbHVlLCBtYXhWYWx1ZSk7XG4gIH1cblxuICBzZXRSb3RhdGlvbihnZXRSb3RhdGlvbkZyb21WYWx1ZShjdXJyZW50VmFsdWUpKTtcblxuICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGN1cnJlbnRWYWx1ZTtcbiAgfTtcblxuICB0aGlzLnRvdWNoU3RhcnQgPSBmdW5jdGlvbihyYXljYXN0ZXIsIG1vdXNlKSB7XG4gICAgdmFyIHRvdWNoID0gcmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHModGhpcy5jaGlsZHJlbilbMF07XG4gICAgaWYgKHRvdWNoKSB7XG4gICAgICBpc0FjdGl2ZSA9IHRydWU7XG4gICAgICB0b3VjaFN0YXJ0UG9zID0gbW91c2U7XG4gICAgICB0b3VjaFN0YXJ0Um90YXRpb24gPSAtYm9keS5yb3RhdGlvbi56O1xuICAgIH1cbiAgfTtcblxuICB0aGlzLnRvdWNoRW5kID0gZnVuY3Rpb24oKSB7XG4gICAgaXNBY3RpdmUgPSBmYWxzZTtcbiAgfTtcblxuICB2YXIgdG91Y2hEaWZmID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcbiAgdGhpcy50b3VjaCA9IGZ1bmN0aW9uKG1vdXNlKSB7XG4gICAgaWYgKGlzQWN0aXZlKSB7XG4gICAgICB0b3VjaERpZmYuc3ViVmVjdG9ycyhtb3VzZSwgdG91Y2hTdGFydFBvcyk7XG4gICAgICB2YXIgdG91Y2hTdHJlbmd0aCA9IHRvdWNoRGlmZi54ICsgdG91Y2hEaWZmLnk7XG4gICAgICB2YXIgbmV3Um90YXRpb24gPSB0b3VjaFN0YXJ0Um90YXRpb24gKyBUSFJFRS5NYXRoLmRlZ1RvUmFkKHNlbnNpdGl2aXR5ICogdG91Y2hTdHJlbmd0aCk7XG4gICAgICBuZXdSb3RhdGlvbiA9IFRIUkVFLk1hdGguY2xhbXAobmV3Um90YXRpb24sIG1pblJvdGF0aW9uLCBtYXhSb3RhdGlvbik7XG4gICAgICBzZXRSb3RhdGlvbihuZXdSb3RhdGlvbik7XG4gICAgICBjdXJyZW50VmFsdWUgPSBnZXRWYWx1ZUZyb21Sb3RhdGlvbihuZXdSb3RhdGlvbik7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuc2V0Q29sb3IgPSBmdW5jdGlvbihjb2xvcikge1xuICAgIGxpZ2h0cy5tYXRlcmlhbC51bmlmb3Jtcy51X2NvbG9yLnZhbHVlID0gbmV3IFRIUkVFLkNvbG9yKGNvbG9yKTsgLy8gVE9ETyBjb21lIGluIGFzIGEgdGhyZWUuY29sb3I/XG4gIH07XG59XG5Lbm9iLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtcblxuZXhwb3J0IGRlZmF1bHQgS25vYjtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/Knob.js\n");

/***/ }),

/***/ "./js/Materials.js":
/*!*************************!*\
  !*** ./js/Materials.js ***!
  \*************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/three/build/three.min.js */ \"./node_modules/three/build/three.min.js\");\n/* harmony import */ var _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__);\n\n\nvar Materials = {};\n\nMaterials.Include = {};\nMaterials.Include.map = `\n  float map(float value, float inMin, float inMax, float outMin, float outMax) {\n    return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n  }\n\n  vec2 map(vec2 value, vec2 inMin, vec2 inMax, vec2 outMin, vec2 outMax) {\n    vec2 result = vec2(0.0);\n    result.x = map(value.x, inMin.x, inMax.x, outMin.x, outMax.x);\n    result.y = map(value.y, inMin.y, inMax.y, outMin.y, outMax.y);\n    return result;\n  }\n\n  vec2 map(vec2 value, float inMin, float inMax, float outMin, float outMax) {\n    return map(value, vec2(inMin), vec2(inMax), vec2(outMin), vec2(outMax));\n  }`;\n\nMaterials.ripple = function(options) {\n  var defaultOptions = {\n    width: 512,\n    height: 512,\n  };\n  options = Object.assign({}, defaultOptions, options);\n  return new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"ShaderMaterial\"]({\n    name: \"ripple\",\n    uniforms: {\n      u_mainTex: {value: null}, // Texture of the current frame\n      u_backTex: {value: null}, // Texture of the previous frame\n      u_sceneTex: {value: null}, // New additions from the scene\n      u_texelSize: {value: new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"](1/options.width, 1/options.height)},\n      u_damping: {value: 0.999},\n      u_speed: {value: 1.0},\n    },\n    vertexShader: `\n      varying vec2 v_uv;\n      void main() {\n        v_uv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n      }\n    `,\n    fragmentShader: `\n      varying vec2 v_uv;\n\n      uniform sampler2D u_mainTex;\n      uniform sampler2D u_backTex;\n      uniform sampler2D u_sceneTex;\n      uniform vec2 u_texelSize;\n      uniform float u_damping;\n      uniform float u_speed;\n\n      vec2 offset[4];\n\n      void main() {\n        offset[0] = vec2(-1.0, 0.0);\n        offset[1] = vec2(1.0, 0.0);\n        offset[2] = vec2(0.0, 1.0);\n        offset[3] = vec2(0.0, -1.0);\n\n        vec4 sum = vec4(0.0);\n\n        for (int i = 0; i < 4 ; i++){\n          sum += texture2D(u_mainTex, v_uv + offset[i] * u_texelSize * u_speed);\n        }\n        //  make an average and subtract the center value\n        sum = (sum / 2.0) - texture2D(u_backTex, v_uv);\n        sum *= u_damping;\n\n        vec4 sceneCol = texture2D(u_sceneTex, v_uv);\n        gl_FragColor = mix(sum, sceneCol, sceneCol.a);\n        gl_FragColor = sum + sceneCol;\n      }\n    `,\n  });\n};\n\nMaterials.indicatorLight = function() {\n  return new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"ShaderMaterial\"]({\n    name: \"indicator light\",\n    transparent: true,\n    uniforms: {\n      u_color: {value: new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"](0xff00ff)},\n      u_currentRotation: {value: 0.0},\n    },\n    vertexShader: `\n      attribute vec3 relativePosition;\n      attribute float angle;\n      varying vec2 v_uv;\n      varying float v_angle;\n      void main() {\n        v_uv = uv;\n        v_angle = angle;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position + relativePosition, 1.0);\n      }\n    `,\n    fragmentShader: `\n      varying vec2 v_uv;\n      varying float v_angle;\n      uniform vec3 u_color;\n      uniform float u_currentRotation;\n      ${Materials.Include.map}\n\n      void main() {\n        float isOn = step(0.0, v_angle - u_currentRotation);\n        float dist = length(v_uv - vec2(0.5));\n        float centerCircle = 1.0 - smoothstep(0.0, 0.2, dist);\n\n        float brightness = smoothstep(u_currentRotation - 0.5, u_currentRotation, v_angle);\n        brightness = map(brightness, 0.0, 1.0, 0.05, 0.3);\n\n        float outerGlow = (1.0 - smoothstep(0.1, 0.5, dist)) * brightness;\n        float alpha = outerGlow + centerCircle * isOn;\n        gl_FragColor = vec4(u_color, alpha);\n      }\n    `,\n  });\n};\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Materials);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9NYXRlcmlhbHMuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9SUy8uL2pzL01hdGVyaWFscy5qcz8wZjY4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFRIUkVFIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvdGhyZWUvYnVpbGQvdGhyZWUubWluLmpzXCI7XG5cbnZhciBNYXRlcmlhbHMgPSB7fTtcblxuTWF0ZXJpYWxzLkluY2x1ZGUgPSB7fTtcbk1hdGVyaWFscy5JbmNsdWRlLm1hcCA9IGBcbiAgZmxvYXQgbWFwKGZsb2F0IHZhbHVlLCBmbG9hdCBpbk1pbiwgZmxvYXQgaW5NYXgsIGZsb2F0IG91dE1pbiwgZmxvYXQgb3V0TWF4KSB7XG4gICAgcmV0dXJuIG91dE1pbiArIChvdXRNYXggLSBvdXRNaW4pICogKHZhbHVlIC0gaW5NaW4pIC8gKGluTWF4IC0gaW5NaW4pO1xuICB9XG5cbiAgdmVjMiBtYXAodmVjMiB2YWx1ZSwgdmVjMiBpbk1pbiwgdmVjMiBpbk1heCwgdmVjMiBvdXRNaW4sIHZlYzIgb3V0TWF4KSB7XG4gICAgdmVjMiByZXN1bHQgPSB2ZWMyKDAuMCk7XG4gICAgcmVzdWx0LnggPSBtYXAodmFsdWUueCwgaW5NaW4ueCwgaW5NYXgueCwgb3V0TWluLngsIG91dE1heC54KTtcbiAgICByZXN1bHQueSA9IG1hcCh2YWx1ZS55LCBpbk1pbi55LCBpbk1heC55LCBvdXRNaW4ueSwgb3V0TWF4LnkpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICB2ZWMyIG1hcCh2ZWMyIHZhbHVlLCBmbG9hdCBpbk1pbiwgZmxvYXQgaW5NYXgsIGZsb2F0IG91dE1pbiwgZmxvYXQgb3V0TWF4KSB7XG4gICAgcmV0dXJuIG1hcCh2YWx1ZSwgdmVjMihpbk1pbiksIHZlYzIoaW5NYXgpLCB2ZWMyKG91dE1pbiksIHZlYzIob3V0TWF4KSk7XG4gIH1gO1xuXG5NYXRlcmlhbHMucmlwcGxlID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgd2lkdGg6IDUxMixcbiAgICBoZWlnaHQ6IDUxMixcbiAgfTtcbiAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcbiAgcmV0dXJuIG5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCh7XG4gICAgbmFtZTogXCJyaXBwbGVcIixcbiAgICB1bmlmb3Jtczoge1xuICAgICAgdV9tYWluVGV4OiB7dmFsdWU6IG51bGx9LCAvLyBUZXh0dXJlIG9mIHRoZSBjdXJyZW50IGZyYW1lXG4gICAgICB1X2JhY2tUZXg6IHt2YWx1ZTogbnVsbH0sIC8vIFRleHR1cmUgb2YgdGhlIHByZXZpb3VzIGZyYW1lXG4gICAgICB1X3NjZW5lVGV4OiB7dmFsdWU6IG51bGx9LCAvLyBOZXcgYWRkaXRpb25zIGZyb20gdGhlIHNjZW5lXG4gICAgICB1X3RleGVsU2l6ZToge3ZhbHVlOiBuZXcgVEhSRUUuVmVjdG9yMigxL29wdGlvbnMud2lkdGgsIDEvb3B0aW9ucy5oZWlnaHQpfSxcbiAgICAgIHVfZGFtcGluZzoge3ZhbHVlOiAwLjk5OX0sXG4gICAgICB1X3NwZWVkOiB7dmFsdWU6IDEuMH0sXG4gICAgfSxcbiAgICB2ZXJ0ZXhTaGFkZXI6IGBcbiAgICAgIHZhcnlpbmcgdmVjMiB2X3V2O1xuICAgICAgdm9pZCBtYWluKCkge1xuICAgICAgICB2X3V2ID0gdXY7XG4gICAgICAgIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQocG9zaXRpb24sIDEuMCk7XG4gICAgICB9XG4gICAgYCxcbiAgICBmcmFnbWVudFNoYWRlcjogYFxuICAgICAgdmFyeWluZyB2ZWMyIHZfdXY7XG5cbiAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVfbWFpblRleDtcbiAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVfYmFja1RleDtcbiAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVfc2NlbmVUZXg7XG4gICAgICB1bmlmb3JtIHZlYzIgdV90ZXhlbFNpemU7XG4gICAgICB1bmlmb3JtIGZsb2F0IHVfZGFtcGluZztcbiAgICAgIHVuaWZvcm0gZmxvYXQgdV9zcGVlZDtcblxuICAgICAgdmVjMiBvZmZzZXRbNF07XG5cbiAgICAgIHZvaWQgbWFpbigpIHtcbiAgICAgICAgb2Zmc2V0WzBdID0gdmVjMigtMS4wLCAwLjApO1xuICAgICAgICBvZmZzZXRbMV0gPSB2ZWMyKDEuMCwgMC4wKTtcbiAgICAgICAgb2Zmc2V0WzJdID0gdmVjMigwLjAsIDEuMCk7XG4gICAgICAgIG9mZnNldFszXSA9IHZlYzIoMC4wLCAtMS4wKTtcblxuICAgICAgICB2ZWM0IHN1bSA9IHZlYzQoMC4wKTtcblxuICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDQgOyBpKyspe1xuICAgICAgICAgIHN1bSArPSB0ZXh0dXJlMkQodV9tYWluVGV4LCB2X3V2ICsgb2Zmc2V0W2ldICogdV90ZXhlbFNpemUgKiB1X3NwZWVkKTtcbiAgICAgICAgfVxuICAgICAgICAvLyAgbWFrZSBhbiBhdmVyYWdlIGFuZCBzdWJ0cmFjdCB0aGUgY2VudGVyIHZhbHVlXG4gICAgICAgIHN1bSA9IChzdW0gLyAyLjApIC0gdGV4dHVyZTJEKHVfYmFja1RleCwgdl91dik7XG4gICAgICAgIHN1bSAqPSB1X2RhbXBpbmc7XG5cbiAgICAgICAgdmVjNCBzY2VuZUNvbCA9IHRleHR1cmUyRCh1X3NjZW5lVGV4LCB2X3V2KTtcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gbWl4KHN1bSwgc2NlbmVDb2wsIHNjZW5lQ29sLmEpO1xuICAgICAgICBnbF9GcmFnQ29sb3IgPSBzdW0gKyBzY2VuZUNvbDtcbiAgICAgIH1cbiAgICBgLFxuICB9KTtcbn07XG5cbk1hdGVyaWFscy5pbmRpY2F0b3JMaWdodCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRIUkVFLlNoYWRlck1hdGVyaWFsKHtcbiAgICBuYW1lOiBcImluZGljYXRvciBsaWdodFwiLFxuICAgIHRyYW5zcGFyZW50OiB0cnVlLFxuICAgIHVuaWZvcm1zOiB7XG4gICAgICB1X2NvbG9yOiB7dmFsdWU6IG5ldyBUSFJFRS5Db2xvcigweGZmMDBmZil9LFxuICAgICAgdV9jdXJyZW50Um90YXRpb246IHt2YWx1ZTogMC4wfSxcbiAgICB9LFxuICAgIHZlcnRleFNoYWRlcjogYFxuICAgICAgYXR0cmlidXRlIHZlYzMgcmVsYXRpdmVQb3NpdGlvbjtcbiAgICAgIGF0dHJpYnV0ZSBmbG9hdCBhbmdsZTtcbiAgICAgIHZhcnlpbmcgdmVjMiB2X3V2O1xuICAgICAgdmFyeWluZyBmbG9hdCB2X2FuZ2xlO1xuICAgICAgdm9pZCBtYWluKCkge1xuICAgICAgICB2X3V2ID0gdXY7XG4gICAgICAgIHZfYW5nbGUgPSBhbmdsZTtcbiAgICAgICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNChwb3NpdGlvbiArIHJlbGF0aXZlUG9zaXRpb24sIDEuMCk7XG4gICAgICB9XG4gICAgYCxcbiAgICBmcmFnbWVudFNoYWRlcjogYFxuICAgICAgdmFyeWluZyB2ZWMyIHZfdXY7XG4gICAgICB2YXJ5aW5nIGZsb2F0IHZfYW5nbGU7XG4gICAgICB1bmlmb3JtIHZlYzMgdV9jb2xvcjtcbiAgICAgIHVuaWZvcm0gZmxvYXQgdV9jdXJyZW50Um90YXRpb247XG4gICAgICAke01hdGVyaWFscy5JbmNsdWRlLm1hcH1cblxuICAgICAgdm9pZCBtYWluKCkge1xuICAgICAgICBmbG9hdCBpc09uID0gc3RlcCgwLjAsIHZfYW5nbGUgLSB1X2N1cnJlbnRSb3RhdGlvbik7XG4gICAgICAgIGZsb2F0IGRpc3QgPSBsZW5ndGgodl91diAtIHZlYzIoMC41KSk7XG4gICAgICAgIGZsb2F0IGNlbnRlckNpcmNsZSA9IDEuMCAtIHNtb290aHN0ZXAoMC4wLCAwLjIsIGRpc3QpO1xuXG4gICAgICAgIGZsb2F0IGJyaWdodG5lc3MgPSBzbW9vdGhzdGVwKHVfY3VycmVudFJvdGF0aW9uIC0gMC41LCB1X2N1cnJlbnRSb3RhdGlvbiwgdl9hbmdsZSk7XG4gICAgICAgIGJyaWdodG5lc3MgPSBtYXAoYnJpZ2h0bmVzcywgMC4wLCAxLjAsIDAuMDUsIDAuMyk7XG5cbiAgICAgICAgZmxvYXQgb3V0ZXJHbG93ID0gKDEuMCAtIHNtb290aHN0ZXAoMC4xLCAwLjUsIGRpc3QpKSAqIGJyaWdodG5lc3M7XG4gICAgICAgIGZsb2F0IGFscGhhID0gb3V0ZXJHbG93ICsgY2VudGVyQ2lyY2xlICogaXNPbjtcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh1X2NvbG9yLCBhbHBoYSk7XG4gICAgICB9XG4gICAgYCxcbiAgfSk7XG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IE1hdGVyaWFscztcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./js/Materials.js\n");

/***/ }),

/***/ "./js/RippleSynth.js":
/*!***************************!*\
  !*** ./js/RippleSynth.js ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_Tone_build_Tone_min_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/Tone/build/Tone.min.js */ \"./node_modules/Tone/build/Tone.min.js\");\n/* harmony import */ var _node_modules_Tone_build_Tone_min_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_Tone_build_Tone_min_js__WEBPACK_IMPORTED_MODULE_0__);\n\n\nfunction RippleSynth(numVoices, options) {\n  _node_modules_Tone_build_Tone_min_js__WEBPACK_IMPORTED_MODULE_0___default.a.PolySynth.call(this, numVoices, _node_modules_Tone_build_Tone_min_js__WEBPACK_IMPORTED_MODULE_0___default.a.Synth);\n\n  this.relative = (options.relative !== undefined) ? options.relative : false;\n  this.scale = options.scale;\n  this.voices.forEach(function(voice) {\n    voice.oscillator.type = \"triangle\";\n    voice.filter = new _node_modules_Tone_build_Tone_min_js__WEBPACK_IMPORTED_MODULE_0___default.a.Filter(2000, \"lowpass\", -24);\n    voice.oscillator.disconnect(voice.envelope);\n    voice.oscillator.chain(voice.filter, voice.envelope);\n  });\n\n  var controls = {\n    attack: {group: \"envelope\", value: this.voices[0].envelope.attack},\n    decay: {group: \"envelope\", value: this.voices[0].envelope.decay},\n    sustain: {group: \"envelope\", value: this.voices[0].envelope.sustain},\n    release: {group: \"envelope\", value: this.voices[0].envelope.release},\n    frequency: {group: \"filter\", value: this.voices[0].filter.frequency.input.value},\n    Q: {group: \"filter\", value: this.voices[0].filter.Q.input.value},\n    swing: {value: 0},\n  };\n\n  this.getControl = function(param) {\n    return controls[param].value;\n  };\n\n  this.setControl = function(param, value) {\n    this.voices.forEach(function(voice) {\n      if (controls[param].group !== undefined) {\n        if (voice[controls[param].group][param].input !== undefined) {\n          voice[controls[param].group][param].input.value = value;\n        } else {\n          voice[controls[param].group][param] = value;\n        }\n      } else {\n        controls[param].value = value;\n      }\n    });\n    controls[param].value = value;\n  }.bind(this);\n}\nRippleSynth.prototype = Object.create(_node_modules_Tone_build_Tone_min_js__WEBPACK_IMPORTED_MODULE_0___default.a.PolySynth.prototype);\n\nRippleSynth.prototype.setVolume = function(newVolume) {\n  _node_modules_Tone_build_Tone_min_js__WEBPACK_IMPORTED_MODULE_0___default.a.Master.volume.value = newVolume;\n};\n\nRippleSynth.prototype.start = function() {\n  this.toMaster();\n  _node_modules_Tone_build_Tone_min_js__WEBPACK_IMPORTED_MODULE_0___default.a.context.resume();\n};\n\nRippleSynth.prototype.playRow = function(row) { // TODO relative\n  var note = this.scale.notes[(row) % this.scale.notes.length];\n  var octave = Math.floor(row / this.scale.notes.length) + 3;\n  octave += this.scale.octaves[(row) % this.scale.notes.length];\n  // Duration of an 8th note\n  this.triggerAttackRelease(note + octave, \"16n\");\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (RippleSynth);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9SaXBwbGVTeW50aC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1JTLy4vanMvUmlwcGxlU3ludGguanM/YzBkNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVG9uZSBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL1RvbmUvYnVpbGQvVG9uZS5taW4uanNcIjtcblxuZnVuY3Rpb24gUmlwcGxlU3ludGgobnVtVm9pY2VzLCBvcHRpb25zKSB7XG4gIFRvbmUuUG9seVN5bnRoLmNhbGwodGhpcywgbnVtVm9pY2VzLCBUb25lLlN5bnRoKTtcblxuICB0aGlzLnJlbGF0aXZlID0gKG9wdGlvbnMucmVsYXRpdmUgIT09IHVuZGVmaW5lZCkgPyBvcHRpb25zLnJlbGF0aXZlIDogZmFsc2U7XG4gIHRoaXMuc2NhbGUgPSBvcHRpb25zLnNjYWxlO1xuICB0aGlzLnZvaWNlcy5mb3JFYWNoKGZ1bmN0aW9uKHZvaWNlKSB7XG4gICAgdm9pY2Uub3NjaWxsYXRvci50eXBlID0gXCJ0cmlhbmdsZVwiO1xuICAgIHZvaWNlLmZpbHRlciA9IG5ldyBUb25lLkZpbHRlcigyMDAwLCBcImxvd3Bhc3NcIiwgLTI0KTtcbiAgICB2b2ljZS5vc2NpbGxhdG9yLmRpc2Nvbm5lY3Qodm9pY2UuZW52ZWxvcGUpO1xuICAgIHZvaWNlLm9zY2lsbGF0b3IuY2hhaW4odm9pY2UuZmlsdGVyLCB2b2ljZS5lbnZlbG9wZSk7XG4gIH0pO1xuXG4gIHZhciBjb250cm9scyA9IHtcbiAgICBhdHRhY2s6IHtncm91cDogXCJlbnZlbG9wZVwiLCB2YWx1ZTogdGhpcy52b2ljZXNbMF0uZW52ZWxvcGUuYXR0YWNrfSxcbiAgICBkZWNheToge2dyb3VwOiBcImVudmVsb3BlXCIsIHZhbHVlOiB0aGlzLnZvaWNlc1swXS5lbnZlbG9wZS5kZWNheX0sXG4gICAgc3VzdGFpbjoge2dyb3VwOiBcImVudmVsb3BlXCIsIHZhbHVlOiB0aGlzLnZvaWNlc1swXS5lbnZlbG9wZS5zdXN0YWlufSxcbiAgICByZWxlYXNlOiB7Z3JvdXA6IFwiZW52ZWxvcGVcIiwgdmFsdWU6IHRoaXMudm9pY2VzWzBdLmVudmVsb3BlLnJlbGVhc2V9LFxuICAgIGZyZXF1ZW5jeToge2dyb3VwOiBcImZpbHRlclwiLCB2YWx1ZTogdGhpcy52b2ljZXNbMF0uZmlsdGVyLmZyZXF1ZW5jeS5pbnB1dC52YWx1ZX0sXG4gICAgUToge2dyb3VwOiBcImZpbHRlclwiLCB2YWx1ZTogdGhpcy52b2ljZXNbMF0uZmlsdGVyLlEuaW5wdXQudmFsdWV9LFxuICAgIHN3aW5nOiB7dmFsdWU6IDB9LFxuICB9O1xuXG4gIHRoaXMuZ2V0Q29udHJvbCA9IGZ1bmN0aW9uKHBhcmFtKSB7XG4gICAgcmV0dXJuIGNvbnRyb2xzW3BhcmFtXS52YWx1ZTtcbiAgfTtcblxuICB0aGlzLnNldENvbnRyb2wgPSBmdW5jdGlvbihwYXJhbSwgdmFsdWUpIHtcbiAgICB0aGlzLnZvaWNlcy5mb3JFYWNoKGZ1bmN0aW9uKHZvaWNlKSB7XG4gICAgICBpZiAoY29udHJvbHNbcGFyYW1dLmdyb3VwICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHZvaWNlW2NvbnRyb2xzW3BhcmFtXS5ncm91cF1bcGFyYW1dLmlucHV0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB2b2ljZVtjb250cm9sc1twYXJhbV0uZ3JvdXBdW3BhcmFtXS5pbnB1dC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZvaWNlW2NvbnRyb2xzW3BhcmFtXS5ncm91cF1bcGFyYW1dID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRyb2xzW3BhcmFtXS52YWx1ZSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnRyb2xzW3BhcmFtXS52YWx1ZSA9IHZhbHVlO1xuICB9LmJpbmQodGhpcyk7XG59XG5SaXBwbGVTeW50aC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFRvbmUuUG9seVN5bnRoLnByb3RvdHlwZSk7XG5cblJpcHBsZVN5bnRoLnByb3RvdHlwZS5zZXRWb2x1bWUgPSBmdW5jdGlvbihuZXdWb2x1bWUpIHtcbiAgVG9uZS5NYXN0ZXIudm9sdW1lLnZhbHVlID0gbmV3Vm9sdW1lO1xufTtcblxuUmlwcGxlU3ludGgucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMudG9NYXN0ZXIoKTtcbiAgVG9uZS5jb250ZXh0LnJlc3VtZSgpO1xufTtcblxuUmlwcGxlU3ludGgucHJvdG90eXBlLnBsYXlSb3cgPSBmdW5jdGlvbihyb3cpIHsgLy8gVE9ETyByZWxhdGl2ZVxuICB2YXIgbm90ZSA9IHRoaXMuc2NhbGUubm90ZXNbKHJvdykgJSB0aGlzLnNjYWxlLm5vdGVzLmxlbmd0aF07XG4gIHZhciBvY3RhdmUgPSBNYXRoLmZsb29yKHJvdyAvIHRoaXMuc2NhbGUubm90ZXMubGVuZ3RoKSArIDM7XG4gIG9jdGF2ZSArPSB0aGlzLnNjYWxlLm9jdGF2ZXNbKHJvdykgJSB0aGlzLnNjYWxlLm5vdGVzLmxlbmd0aF07XG4gIC8vIER1cmF0aW9uIG9mIGFuIDh0aCBub3RlXG4gIHRoaXMudHJpZ2dlckF0dGFja1JlbGVhc2Uobm90ZSArIG9jdGF2ZSwgXCIxNm5cIik7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBSaXBwbGVTeW50aDtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./js/RippleSynth.js\n");

/***/ }),

/***/ "./js/Rippleizer.js":
/*!**************************!*\
  !*** ./js/Rippleizer.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/three/build/three.min.js */ \"./node_modules/three/build/three.min.js\");\n/* harmony import */ var _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Materials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Materials */ \"./js/Materials.js\");\n/* harmony import */ var _Graphics__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Graphics */ \"./js/Graphics.js\");\n\n\n\n\nvar rtOptions = {\n  depthBuffer: false,\n  stencilBuffer: false,\n};\nvar RENDER_TEXTURE_RESOLUTION = 256;\n// For off-screen, ripple renders\nfunction makeShadowScene(group) {\n  var shadowGroup = group; // TODO, find a way to clone this, law of demeter and all\n  var scene = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Scene\"]();\n  scene.add(shadowGroup);\n  var boundingBox = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Box3\"]().setFromObject(shadowGroup);\n  var bbSize = boundingBox.getSize();\n  var camera = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"OrthographicCamera\"](-bbSize.x/2, bbSize.x/2, bbSize.y/2, -bbSize.y/2, 0.1, 100);\n  var target = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"WebGLRenderTarget\"](RENDER_TEXTURE_RESOLUTION, RENDER_TEXTURE_RESOLUTION, rtOptions);\n  camera.position.copy(boundingBox.getCenter());\n  camera.position.z = 10;\n\n  scene.texture = target.texture;\n  scene.render = function(renderer) {\n    renderer.render(scene, camera, target);\n  };\n\n  return scene;\n}\n\nvar RATIO = 0.4; // TODO\nfunction Rippleizer(group) {\n  var rippleMaterial = _Materials__WEBPACK_IMPORTED_MODULE_1__[\"default\"].ripple();\n  var shadowScene = makeShadowScene(group);\n  rippleMaterial.uniforms.u_sceneTex.value = shadowScene.texture;\n\n  var subTextureResolution = RATIO * RENDER_TEXTURE_RESOLUTION;\n  var mainTarget = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"WebGLRenderTarget\"](subTextureResolution, subTextureResolution, rtOptions);\n  var backTarget = mainTarget.clone();\n  var finalTarget = mainTarget.clone();\n  rippleMaterial.uniforms.u_texelSize.value = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"](1/subTextureResolution, 1/subTextureResolution);\n\n  function render(renderer) {\n    shadowScene.render(renderer);\n    rippleMaterial.uniforms.u_mainTex.value = mainTarget.texture;\n    rippleMaterial.uniforms.u_backTex.value = backTarget.texture;\n    Object(_Graphics__WEBPACK_IMPORTED_MODULE_2__[\"blitTexture\"])(renderer, rippleMaterial, finalTarget);\n    [finalTarget, backTarget, mainTarget] = [backTarget, mainTarget, finalTarget]; // Ping-pong\n  }\n\n  function getActiveTexture() {\n    return finalTarget.texture;\n  }\n\n  return {\n    damping: rippleMaterial.uniforms.u_damping,\n    getActiveTexture: getActiveTexture,\n    render: render,\n  };\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Rippleizer);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9SaXBwbGVpemVyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUlMvLi9qcy9SaXBwbGVpemVyLmpzPzhlN2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSBcIi4uL25vZGVfbW9kdWxlcy90aHJlZS9idWlsZC90aHJlZS5taW4uanNcIjtcbmltcG9ydCBNYXRlcmlhbHMgZnJvbSBcIi4vTWF0ZXJpYWxzXCI7XG5pbXBvcnQge2JsaXRUZXh0dXJlfSBmcm9tIFwiLi9HcmFwaGljc1wiO1xuXG52YXIgcnRPcHRpb25zID0ge1xuICBkZXB0aEJ1ZmZlcjogZmFsc2UsXG4gIHN0ZW5jaWxCdWZmZXI6IGZhbHNlLFxufTtcbnZhciBSRU5ERVJfVEVYVFVSRV9SRVNPTFVUSU9OID0gMjU2O1xuLy8gRm9yIG9mZi1zY3JlZW4sIHJpcHBsZSByZW5kZXJzXG5mdW5jdGlvbiBtYWtlU2hhZG93U2NlbmUoZ3JvdXApIHtcbiAgdmFyIHNoYWRvd0dyb3VwID0gZ3JvdXA7IC8vIFRPRE8sIGZpbmQgYSB3YXkgdG8gY2xvbmUgdGhpcywgbGF3IG9mIGRlbWV0ZXIgYW5kIGFsbFxuICB2YXIgc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcbiAgc2NlbmUuYWRkKHNoYWRvd0dyb3VwKTtcbiAgdmFyIGJvdW5kaW5nQm94ID0gbmV3IFRIUkVFLkJveDMoKS5zZXRGcm9tT2JqZWN0KHNoYWRvd0dyb3VwKTtcbiAgdmFyIGJiU2l6ZSA9IGJvdW5kaW5nQm94LmdldFNpemUoKTtcbiAgdmFyIGNhbWVyYSA9IG5ldyBUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmEoLWJiU2l6ZS54LzIsIGJiU2l6ZS54LzIsIGJiU2l6ZS55LzIsIC1iYlNpemUueS8yLCAwLjEsIDEwMCk7XG4gIHZhciB0YXJnZXQgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQoUkVOREVSX1RFWFRVUkVfUkVTT0xVVElPTiwgUkVOREVSX1RFWFRVUkVfUkVTT0xVVElPTiwgcnRPcHRpb25zKTtcbiAgY2FtZXJhLnBvc2l0aW9uLmNvcHkoYm91bmRpbmdCb3guZ2V0Q2VudGVyKCkpO1xuICBjYW1lcmEucG9zaXRpb24ueiA9IDEwO1xuXG4gIHNjZW5lLnRleHR1cmUgPSB0YXJnZXQudGV4dHVyZTtcbiAgc2NlbmUucmVuZGVyID0gZnVuY3Rpb24ocmVuZGVyZXIpIHtcbiAgICByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSwgdGFyZ2V0KTtcbiAgfTtcblxuICByZXR1cm4gc2NlbmU7XG59XG5cbnZhciBSQVRJTyA9IDAuNDsgLy8gVE9ET1xuZnVuY3Rpb24gUmlwcGxlaXplcihncm91cCkge1xuICB2YXIgcmlwcGxlTWF0ZXJpYWwgPSBNYXRlcmlhbHMucmlwcGxlKCk7XG4gIHZhciBzaGFkb3dTY2VuZSA9IG1ha2VTaGFkb3dTY2VuZShncm91cCk7XG4gIHJpcHBsZU1hdGVyaWFsLnVuaWZvcm1zLnVfc2NlbmVUZXgudmFsdWUgPSBzaGFkb3dTY2VuZS50ZXh0dXJlO1xuXG4gIHZhciBzdWJUZXh0dXJlUmVzb2x1dGlvbiA9IFJBVElPICogUkVOREVSX1RFWFRVUkVfUkVTT0xVVElPTjtcbiAgdmFyIG1haW5UYXJnZXQgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQoc3ViVGV4dHVyZVJlc29sdXRpb24sIHN1YlRleHR1cmVSZXNvbHV0aW9uLCBydE9wdGlvbnMpO1xuICB2YXIgYmFja1RhcmdldCA9IG1haW5UYXJnZXQuY2xvbmUoKTtcbiAgdmFyIGZpbmFsVGFyZ2V0ID0gbWFpblRhcmdldC5jbG9uZSgpO1xuICByaXBwbGVNYXRlcmlhbC51bmlmb3Jtcy51X3RleGVsU2l6ZS52YWx1ZSA9IG5ldyBUSFJFRS5WZWN0b3IyKDEvc3ViVGV4dHVyZVJlc29sdXRpb24sIDEvc3ViVGV4dHVyZVJlc29sdXRpb24pO1xuXG4gIGZ1bmN0aW9uIHJlbmRlcihyZW5kZXJlcikge1xuICAgIHNoYWRvd1NjZW5lLnJlbmRlcihyZW5kZXJlcik7XG4gICAgcmlwcGxlTWF0ZXJpYWwudW5pZm9ybXMudV9tYWluVGV4LnZhbHVlID0gbWFpblRhcmdldC50ZXh0dXJlO1xuICAgIHJpcHBsZU1hdGVyaWFsLnVuaWZvcm1zLnVfYmFja1RleC52YWx1ZSA9IGJhY2tUYXJnZXQudGV4dHVyZTtcbiAgICBibGl0VGV4dHVyZShyZW5kZXJlciwgcmlwcGxlTWF0ZXJpYWwsIGZpbmFsVGFyZ2V0KTtcbiAgICBbZmluYWxUYXJnZXQsIGJhY2tUYXJnZXQsIG1haW5UYXJnZXRdID0gW2JhY2tUYXJnZXQsIG1haW5UYXJnZXQsIGZpbmFsVGFyZ2V0XTsgLy8gUGluZy1wb25nXG4gIH1cblxuICBmdW5jdGlvbiBnZXRBY3RpdmVUZXh0dXJlKCkge1xuICAgIHJldHVybiBmaW5hbFRhcmdldC50ZXh0dXJlO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBkYW1waW5nOiByaXBwbGVNYXRlcmlhbC51bmlmb3Jtcy51X2RhbXBpbmcsXG4gICAgZ2V0QWN0aXZlVGV4dHVyZTogZ2V0QWN0aXZlVGV4dHVyZSxcbiAgICByZW5kZXI6IHJlbmRlcixcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgUmlwcGxlaXplcjtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./js/Rippleizer.js\n");

/***/ }),

/***/ "./js/ScaleChooser.js":
/*!****************************!*\
  !*** ./js/ScaleChooser.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/three/build/three.min.js */ \"./node_modules/three/build/three.min.js\");\n/* harmony import */ var _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _AppData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AppData */ \"./js/AppData.js\");\n\n\n\nfunction makeChooserMaterial(color) {\n  return new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"ShaderMaterial\"]({\n    uniforms: {\n      u_color: {value: new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"](color)},\n      u_baseColor: {value: new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"](_AppData__WEBPACK_IMPORTED_MODULE_1__[\"Constants\"].BASE_COLOR)},\n      u_mouseOver: {value: false},\n      u_selected: {value: false},\n      u_time: {value: 0.0},\n    },\n    vertexShader: `\n      void main() {\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n      }\n    `,\n    fragmentShader: `\n      uniform vec3 u_color;\n      uniform vec3 u_baseColor;\n      uniform float u_mouseOver;\n      uniform float u_selected;\n      uniform float u_time;\n      void main() {\n        vec3 color = mix(u_baseColor, u_color, 0.1);\n        color = mix(color, u_color * 0.8, u_mouseOver);\n        color = mix(color, u_color, u_selected);\n        color += 0.05 * (sin(u_time / 200.0) * u_selected);\n        gl_FragColor = vec4(color, 1.0);\n      }\n    `,\n  });\n}\n\nfunction ScaleChooser(scales, currentScale) {\n  _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Group\"].call(this);\n  Object.keys(scales).forEach(function(scale, index) {\n    var pickerKey = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Mesh\"](\n      new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"PlaneBufferGeometry\"](1, 1),\n      makeChooserMaterial(scales[scale].color)\n    );\n    this.add(pickerKey);\n    pickerKey.position.set(index * ((1 + _AppData__WEBPACK_IMPORTED_MODULE_1__[\"Constants\"].SPACING_RATIO)), 0, 0);\n    pickerKey.position.x -= (Object.keys(scales).length/2 - 0.5) * (1 + _AppData__WEBPACK_IMPORTED_MODULE_1__[\"Constants\"].SPACING_RATIO); // Center it\n    pickerKey.scaleName = scale;\n    if (scale === currentScale) {\n      pickerKey.material.uniforms.u_selected.value = true;\n    }\n  }.bind(this));\n  this.scales = scales;\n}\nScaleChooser.prototype = Object.create(_node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Object3D\"].prototype);\n\nScaleChooser.prototype.touchStart = function(raycaster) {\n  var clickedScale = raycaster.intersectObjects(this.children)[0];\n  if (clickedScale !== undefined) {\n    this.children.forEach(function(key) {\n      key.material.uniforms.u_selected.value = false;\n    });\n    clickedScale.object.material.uniforms.u_selected.value = true;\n    window.app.setScale(this.scales[clickedScale.object.scaleName]); // TODO, demeter\n    mixpanel.track(\"Scale Set\");\n  }\n};\nScaleChooser.prototype.touch = function(raycaster) {\n  this.children.forEach(function(key) {\n    key.material.uniforms.u_mouseOver.value = false;\n  });\n  var touched = raycaster.intersectObjects(this.children)[0];\n  if (touched !== undefined) {\n    touched.object.material.uniforms.u_mouseOver.value = true;\n  }\n};\nScaleChooser.prototype.update = function(time) {\n  this.children.forEach(function(key) {\n    key.material.uniforms.u_time.value = time;\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ScaleChooser);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9TY2FsZUNob29zZXIuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9SUy8uL2pzL1NjYWxlQ2hvb3Nlci5qcz9iYzEwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFRIUkVFIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvdGhyZWUvYnVpbGQvdGhyZWUubWluLmpzXCI7XG5pbXBvcnQge0NvbnN0YW50c30gZnJvbSBcIi4vQXBwRGF0YVwiO1xuXG5mdW5jdGlvbiBtYWtlQ2hvb3Nlck1hdGVyaWFsKGNvbG9yKSB7XG4gIHJldHVybiBuZXcgVEhSRUUuU2hhZGVyTWF0ZXJpYWwoe1xuICAgIHVuaWZvcm1zOiB7XG4gICAgICB1X2NvbG9yOiB7dmFsdWU6IG5ldyBUSFJFRS5Db2xvcihjb2xvcil9LFxuICAgICAgdV9iYXNlQ29sb3I6IHt2YWx1ZTogbmV3IFRIUkVFLkNvbG9yKENvbnN0YW50cy5CQVNFX0NPTE9SKX0sXG4gICAgICB1X21vdXNlT3Zlcjoge3ZhbHVlOiBmYWxzZX0sXG4gICAgICB1X3NlbGVjdGVkOiB7dmFsdWU6IGZhbHNlfSxcbiAgICAgIHVfdGltZToge3ZhbHVlOiAwLjB9LFxuICAgIH0sXG4gICAgdmVydGV4U2hhZGVyOiBgXG4gICAgICB2b2lkIG1haW4oKSB7XG4gICAgICAgIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQocG9zaXRpb24sIDEuMCk7XG4gICAgICB9XG4gICAgYCxcbiAgICBmcmFnbWVudFNoYWRlcjogYFxuICAgICAgdW5pZm9ybSB2ZWMzIHVfY29sb3I7XG4gICAgICB1bmlmb3JtIHZlYzMgdV9iYXNlQ29sb3I7XG4gICAgICB1bmlmb3JtIGZsb2F0IHVfbW91c2VPdmVyO1xuICAgICAgdW5pZm9ybSBmbG9hdCB1X3NlbGVjdGVkO1xuICAgICAgdW5pZm9ybSBmbG9hdCB1X3RpbWU7XG4gICAgICB2b2lkIG1haW4oKSB7XG4gICAgICAgIHZlYzMgY29sb3IgPSBtaXgodV9iYXNlQ29sb3IsIHVfY29sb3IsIDAuMSk7XG4gICAgICAgIGNvbG9yID0gbWl4KGNvbG9yLCB1X2NvbG9yICogMC44LCB1X21vdXNlT3Zlcik7XG4gICAgICAgIGNvbG9yID0gbWl4KGNvbG9yLCB1X2NvbG9yLCB1X3NlbGVjdGVkKTtcbiAgICAgICAgY29sb3IgKz0gMC4wNSAqIChzaW4odV90aW1lIC8gMjAwLjApICogdV9zZWxlY3RlZCk7XG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoY29sb3IsIDEuMCk7XG4gICAgICB9XG4gICAgYCxcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIFNjYWxlQ2hvb3NlcihzY2FsZXMsIGN1cnJlbnRTY2FsZSkge1xuICBUSFJFRS5Hcm91cC5jYWxsKHRoaXMpO1xuICBPYmplY3Qua2V5cyhzY2FsZXMpLmZvckVhY2goZnVuY3Rpb24oc2NhbGUsIGluZGV4KSB7XG4gICAgdmFyIHBpY2tlcktleSA9IG5ldyBUSFJFRS5NZXNoKFxuICAgICAgbmV3IFRIUkVFLlBsYW5lQnVmZmVyR2VvbWV0cnkoMSwgMSksXG4gICAgICBtYWtlQ2hvb3Nlck1hdGVyaWFsKHNjYWxlc1tzY2FsZV0uY29sb3IpXG4gICAgKTtcbiAgICB0aGlzLmFkZChwaWNrZXJLZXkpO1xuICAgIHBpY2tlcktleS5wb3NpdGlvbi5zZXQoaW5kZXggKiAoKDEgKyBDb25zdGFudHMuU1BBQ0lOR19SQVRJTykpLCAwLCAwKTtcbiAgICBwaWNrZXJLZXkucG9zaXRpb24ueCAtPSAoT2JqZWN0LmtleXMoc2NhbGVzKS5sZW5ndGgvMiAtIDAuNSkgKiAoMSArIENvbnN0YW50cy5TUEFDSU5HX1JBVElPKTsgLy8gQ2VudGVyIGl0XG4gICAgcGlja2VyS2V5LnNjYWxlTmFtZSA9IHNjYWxlO1xuICAgIGlmIChzY2FsZSA9PT0gY3VycmVudFNjYWxlKSB7XG4gICAgICBwaWNrZXJLZXkubWF0ZXJpYWwudW5pZm9ybXMudV9zZWxlY3RlZC52YWx1ZSA9IHRydWU7XG4gICAgfVxuICB9LmJpbmQodGhpcykpO1xuICB0aGlzLnNjYWxlcyA9IHNjYWxlcztcbn1cblNjYWxlQ2hvb3Nlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7XG5cblNjYWxlQ2hvb3Nlci5wcm90b3R5cGUudG91Y2hTdGFydCA9IGZ1bmN0aW9uKHJheWNhc3Rlcikge1xuICB2YXIgY2xpY2tlZFNjYWxlID0gcmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHModGhpcy5jaGlsZHJlbilbMF07XG4gIGlmIChjbGlja2VkU2NhbGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICAgIGtleS5tYXRlcmlhbC51bmlmb3Jtcy51X3NlbGVjdGVkLnZhbHVlID0gZmFsc2U7XG4gICAgfSk7XG4gICAgY2xpY2tlZFNjYWxlLm9iamVjdC5tYXRlcmlhbC51bmlmb3Jtcy51X3NlbGVjdGVkLnZhbHVlID0gdHJ1ZTtcbiAgICB3aW5kb3cuYXBwLnNldFNjYWxlKHRoaXMuc2NhbGVzW2NsaWNrZWRTY2FsZS5vYmplY3Quc2NhbGVOYW1lXSk7IC8vIFRPRE8sIGRlbWV0ZXJcbiAgICBtaXhwYW5lbC50cmFjayhcIlNjYWxlIFNldFwiKTtcbiAgfVxufTtcblNjYWxlQ2hvb3Nlci5wcm90b3R5cGUudG91Y2ggPSBmdW5jdGlvbihyYXljYXN0ZXIpIHtcbiAgdGhpcy5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgIGtleS5tYXRlcmlhbC51bmlmb3Jtcy51X21vdXNlT3Zlci52YWx1ZSA9IGZhbHNlO1xuICB9KTtcbiAgdmFyIHRvdWNoZWQgPSByYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyh0aGlzLmNoaWxkcmVuKVswXTtcbiAgaWYgKHRvdWNoZWQgIT09IHVuZGVmaW5lZCkge1xuICAgIHRvdWNoZWQub2JqZWN0Lm1hdGVyaWFsLnVuaWZvcm1zLnVfbW91c2VPdmVyLnZhbHVlID0gdHJ1ZTtcbiAgfVxufTtcblNjYWxlQ2hvb3Nlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24odGltZSkge1xuICB0aGlzLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAga2V5Lm1hdGVyaWFsLnVuaWZvcm1zLnVfdGltZS52YWx1ZSA9IHRpbWU7XG4gIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU2NhbGVDaG9vc2VyO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/ScaleChooser.js\n");

/***/ }),

/***/ "./js/ToneMatrix.js":
/*!**************************!*\
  !*** ./js/ToneMatrix.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/three/build/three.min.js */ \"./node_modules/three/build/three.min.js\");\n/* harmony import */ var _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _AppData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AppData */ \"./js/AppData.js\");\n/* harmony import */ var _Materials__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Materials */ \"./js/Materials.js\");\n/* harmony import */ var _Rippleizer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Rippleizer */ \"./js/Rippleizer.js\");\n\n // TODO pass in as options\n\n\n\nfunction makeKeyMaterial(options) {\n  return new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"ShaderMaterial\"]({\n    uniforms: {\n      u_activeColor: {value: new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"](options.activeColor)},\n      u_numHorizontalNotes: {value: options.numHorizontalNotes},\n      u_baseColor: {value: new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"](options.baseColor)},\n      u_numVerticalNotes: {value: options.numVerticalNotes},\n      u_activeColumn: {value: -1},\n      u_rippleTex: {value: null},\n      u_muted: {value: false},\n    },\n    vertexShader: `\n      attribute vec2 relativePosition;\n      attribute float isArmed;\n      uniform float u_numHorizontalNotes;\n      uniform float u_numVerticalNotes;\n      varying vec2 v_relativePosition;\n      varying vec2 v_uv;\n      varying float v_armed;\n      ${_Materials__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Include.map}\n      void main() {\n        v_uv = uv;\n        v_armed = isArmed;\n        v_relativePosition = relativePosition;\n\n        vec2 offset = map(relativePosition, vec2(0.0), vec2(u_numHorizontalNotes, u_numVerticalNotes), vec2(0.0), vec2(1.0));\n        vec3 pos = vec3(position.xy + offset - 0.5, 1.0); // Center it with -0.5\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n      }\n    `,\n    fragmentShader: `\n      uniform sampler2D u_rippleTex;\n      uniform vec3 u_baseColor;\n      uniform vec3 u_activeColor;\n      uniform float u_numHorizontalNotes;\n      uniform float u_numVerticalNotes;\n      uniform float u_activeColumn;\n      uniform float u_muted;\n      varying vec2 v_relativePosition;\n      varying vec2 v_uv;\n      varying float v_armed;\n\n      float rectangleSDF(vec2 st, vec2 s) {\n        st = st * 2.0 - 1.0;\n        return max(abs(st.x/s.x), abs(st.y/s.y));\n      }\n\n      float squareSDF(vec2 st) {\n        return rectangleSDF(st, vec2(1.0));\n      }\n\n      #define MUTE_COLOR_VALUE ${_AppData__WEBPACK_IMPORTED_MODULE_1__[\"Constants\"].MUTE_COLOR_VALUE.toFixed(3)}\n      void main() {\n        vec3 col = mix(u_activeColor, u_activeColor * MUTE_COLOR_VALUE, u_muted);\n        col = mix(u_baseColor, col, v_armed);\n        float isColumnActive = 1.0 - step(0.1, abs(u_activeColumn - v_relativePosition.x));\n        col = mix(col, vec3(1.0), isColumnActive * v_armed);\n\n        vec3 rippleTex = texture2D(u_rippleTex, (v_uv + v_relativePosition) / vec2(u_numHorizontalNotes, u_numVerticalNotes)).rgb;\n        col += rippleTex * rippleTex;\n\n        float rect = squareSDF(v_uv);\n        col *= 1.0 - step(1.0 - ${_AppData__WEBPACK_IMPORTED_MODULE_1__[\"Constants\"].SPACING_RATIO.toFixed(3)}, rect);\n\n        gl_FragColor = vec4(col, 1.0);\n      }\n    `,\n  });\n}\n\nfunction makeShadowKeyMaterial(options) {\n  return new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"ShaderMaterial\"]({\n    transparent: true,\n    uniforms: {\n      u_numHorizontalNotes: {value: options.numHorizontalNotes},\n      u_numVerticalNotes: {value: options.numVerticalNotes},\n      u_activeColor: {value: new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"](\"#ffffff\")},\n      u_activeColumn: {value: -1},\n      u_muted: {value: false},\n    },\n    vertexShader: `\n      attribute vec2 relativePosition;\n      attribute float isArmed;\n      uniform float u_numHorizontalNotes;\n      uniform float u_numVerticalNotes;\n      varying vec2 v_relativePosition;\n      varying float v_armed;\n      ${_Materials__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Include.map}\n      void main() {\n        v_armed = isArmed;\n        v_relativePosition = relativePosition;\n        vec2 offset = map(relativePosition, vec2(0.0), vec2(u_numHorizontalNotes, u_numVerticalNotes), vec2(0.0), vec2(1.0));\n        vec3 pos = vec3(position.xy + offset - 0.5, 1.0); // Center it with -0.5\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n      }\n    `,\n    fragmentShader: `\n      uniform vec3 u_activeColor;\n      uniform float u_muted;\n      uniform float u_activeColumn;\n      varying vec2 v_relativePosition;\n      varying float v_armed;\n      #define MUTE_COLOR_VALUE ${_AppData__WEBPACK_IMPORTED_MODULE_1__[\"Constants\"].MUTE_COLOR_VALUE.toFixed(3)}\n      void main() {\n        vec3 col = mix(u_activeColor, u_activeColor * MUTE_COLOR_VALUE, u_muted);\n\n        float isColumnActive = 1.0 - step(0.1, abs(u_activeColumn - v_relativePosition.x));\n        float opacity = v_armed * isColumnActive;\n\n        gl_FragColor = vec4(col, opacity);\n      }\n    `,\n  });\n}\n\nfunction MatrixButton(column, row, buttonIndex, armedBuffer) {\n  this.column = column;\n  this.row = row;\n  var armed = false;\n\n  this.arm = function() {\n    armed = true;\n    armedBuffer.setX(buttonIndex, 1);\n    armedBuffer.needsUpdate = true;\n  };\n  this.disarm = function() {\n    armed = false;\n    armedBuffer.setX(buttonIndex, 0);\n    armedBuffer.needsUpdate = true;\n  };\n  this.isArmed = function() {\n    return armed;\n  };\n}\nMatrixButton.prototype = Object.create(_node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Mesh\"].prototype);\n\nfunction ToneMatrix(numHorizontalSteps, numVerticalSteps) {\n  _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Group\"].call(this);\n  // Some hacky debouncing\n  var arming = true;\n  var touchActive = false;\n\n  var keyGeometry = (function makeKeyGeometry() {\n    var w = numHorizontalSteps;\n    var h = numVerticalSteps;\n    /* Copied from PlaneBufferGeometry\n    0 ----- 1\n    |       |\n    |       |\n    2 ----- 3\n    */\n    var positions = [0, 1/h, 0, 1/w, 1/h, 0, 0, 0, 0, 1/w, 0, 0];\n    var indices = [0, 2, 1, 2, 3, 1];\n    var uvs = [0, 1, 1, 1, 0, 0, 1, 0];\n\n    var g = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"InstancedBufferGeometry\"]();\n    g.addAttribute(\"position\", new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferAttribute\"](new Float32Array(positions), 3));\n    g.setIndex(indices);\n    g.addAttribute(\"uv\", new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferAttribute\"](new Float32Array(uvs), 2));\n    return g;\n  })();\n  var buttons = [];\n  var columns = [];\n  var numButtons = numHorizontalSteps * numVerticalSteps;\n  var relativePositions = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"InstancedBufferAttribute\"](new Float32Array(numButtons * 2), 2, 1);\n  var armedBuffer = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"InstancedBufferAttribute\"](new Float32Array(numButtons), 1, 1); // 0 = inactive, 1 = armed\n\n  var shadowGroup = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Group\"]();\n  var buttonIndex = 0;\n  for (var col = 0; col < numHorizontalSteps; col++) {\n    columns.push([]);\n    for (var row = 0; row < numVerticalSteps; row++) {\n      var button = new MatrixButton(col, row, buttonIndex, armedBuffer);\n      relativePositions.setXY(buttonIndex, col, row);\n      armedBuffer.setX(buttonIndex, 0); // Set all to inactive\n      buttons.push(button);\n      columns[col].push(button);\n      buttonIndex++;\n    }\n  }\n  armedBuffer.setDynamic(true);\n  keyGeometry.addAttribute(\"relativePosition\", relativePositions);\n  keyGeometry.addAttribute(\"isArmed\", armedBuffer);\n  var keyMaterial = makeKeyMaterial({\n    numHorizontalNotes: numHorizontalSteps,\n    numVerticalNotes: numVerticalSteps,\n    baseColor: _AppData__WEBPACK_IMPORTED_MODULE_1__[\"Constants\"].BASE_COLOR,\n  });\n  this.add(new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Mesh\"](keyGeometry, keyMaterial));\n\n  // Because the instanced buffer geometries don't have true bounding boxes\n  var clickScreen = new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Mesh\"](new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"PlaneBufferGeometry\"](), new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshBasicMaterial\"]({transparent: true, opacity: 0}));\n  this.add(clickScreen);\n\n  var shadowKeyMaterial = makeShadowKeyMaterial({numHorizontalNotes: numHorizontalSteps, numVerticalNotes: numVerticalSteps});\n  shadowGroup.add(new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Mesh\"](keyGeometry, shadowKeyMaterial));\n  shadowGroup.add(clickScreen.clone()); // So that it has a proper BB\n  var rippleizer = new _Rippleizer__WEBPACK_IMPORTED_MODULE_3__[\"default\"](shadowGroup);\n\n  function setButtonUniform(uniformName, value, shadowValue) {\n    keyMaterial.uniforms[uniformName].value = value;\n    if (shadowValue === undefined) shadowValue = value;\n    if (shadowKeyMaterial.uniforms[uniformName] !== undefined) {\n      shadowKeyMaterial.uniforms[uniformName].value = shadowValue;\n    }\n  }\n\n  function armButton(x, y) {\n    columns[x][y].arm();\n  }\n\n  function getButton(x, y) {\n    return columns[x][y];\n  }\n\n  function clear() {\n    buttons.forEach(function(btn) {\n      btn.disarm();\n    });\n  }\n\n  function getActiveNotesInColumn(columnNum) {\n    var activeNotesInColumn = [];\n    columns[columnNum].forEach(function(btn) {\n      if (btn.isArmed()) {\n        activeNotesInColumn.push(btn.row);\n      }\n    });\n    return activeNotesInColumn;\n  }\n\n  function uvToButtonIndex(uv) {\n    var result = uv.clone().multiply(new _node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"](numHorizontalSteps, numVerticalSteps));\n    result.x = Math.floor(result.x);\n    result.y = Math.floor(result.y);\n    return result;\n  }\n\n  function setDamping(newDamping) {\n    rippleizer.damping.value = newDamping;\n  }\n\n  function render(renderer) {\n    rippleizer.render(renderer);\n    setButtonUniform(\"u_rippleTex\", rippleizer.getActiveTexture());\n  }\n\n  Object.assign(this, {\n    getActiveNotesInColumn: getActiveNotesInColumn,\n    setButtonUniform: setButtonUniform,\n    uvToButtonIndex: uvToButtonIndex,\n    touchActive: touchActive,\n    shadowGroup: shadowGroup,\n    clickScreen: clickScreen,\n    setDamping: setDamping,\n    getButton: getButton,\n    armButton: armButton,\n    render: render,\n    arming: arming,\n    clear: clear,\n  });\n}\nToneMatrix.prototype = Object.create(_node_modules_three_build_three_min_js__WEBPACK_IMPORTED_MODULE_0__[\"Object3D\"].prototype);\n\nToneMatrix.prototype.touch = function(raycaster) {\n  var intersection = raycaster.intersectObject(this.clickScreen)[0];\n  if (intersection && this.touchActive) {\n    var address = this.uvToButtonIndex(intersection.uv);\n    var touchedButton = this.getButton(address.x, address.y);\n    if (this.arming === true) {\n      touchedButton.arm();\n    } else {\n      touchedButton.disarm();\n    }\n  }\n};\n\nToneMatrix.prototype.touchStart = function(raycaster) {\n  var intersection = raycaster.intersectObject(this.clickScreen)[0];\n  if (intersection) {\n    var address = this.uvToButtonIndex(intersection.uv);\n    var touchedButton = this.getButton(address.x, address.y);\n    this.arming = !touchedButton.isArmed();\n    this.touchActive = true;\n  }\n  this.touch(raycaster);\n};\n\nToneMatrix.prototype.touchEnd = function() {\n  this.touchActive = false;\n};\n\nToneMatrix.prototype.deactivateColumns = function(num) {\n  this.setButtonUniform(\"u_activeColumn\", -1);\n};\n\nToneMatrix.prototype.setActiveColor = function({buttonColor, shadowColor}) {\n  this.setButtonUniform(\"u_activeColor\", buttonColor, shadowColor);\n};\n\nToneMatrix.prototype.mute = function(value) {\n  this.setButtonUniform(\"u_muted\", value);\n};\n\nToneMatrix.prototype.setRippleTexture = function(texture) {\n  this.setButtonUniform(\"u_rippleTex\", texture);\n};\n\nToneMatrix.prototype.activateColumn = function(num) {\n  this.setButtonUniform(\"u_activeColumn\", num);\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ToneMatrix);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9Ub25lTWF0cml4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUlMvLi9qcy9Ub25lTWF0cml4LmpzP2NhYjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSBcIi4uL25vZGVfbW9kdWxlcy90aHJlZS9idWlsZC90aHJlZS5taW4uanNcIjtcbmltcG9ydCB7Q29uc3RhbnRzfSBmcm9tIFwiLi9BcHBEYXRhXCI7IC8vIFRPRE8gcGFzcyBpbiBhcyBvcHRpb25zXG5pbXBvcnQgTWF0ZXJpYWxzIGZyb20gXCIuL01hdGVyaWFsc1wiO1xuaW1wb3J0IFJpcHBsZWl6ZXIgZnJvbSBcIi4vUmlwcGxlaXplclwiO1xuXG5mdW5jdGlvbiBtYWtlS2V5TWF0ZXJpYWwob3B0aW9ucykge1xuICByZXR1cm4gbmV3IFRIUkVFLlNoYWRlck1hdGVyaWFsKHtcbiAgICB1bmlmb3Jtczoge1xuICAgICAgdV9hY3RpdmVDb2xvcjoge3ZhbHVlOiBuZXcgVEhSRUUuQ29sb3Iob3B0aW9ucy5hY3RpdmVDb2xvcil9LFxuICAgICAgdV9udW1Ib3Jpem9udGFsTm90ZXM6IHt2YWx1ZTogb3B0aW9ucy5udW1Ib3Jpem9udGFsTm90ZXN9LFxuICAgICAgdV9iYXNlQ29sb3I6IHt2YWx1ZTogbmV3IFRIUkVFLkNvbG9yKG9wdGlvbnMuYmFzZUNvbG9yKX0sXG4gICAgICB1X251bVZlcnRpY2FsTm90ZXM6IHt2YWx1ZTogb3B0aW9ucy5udW1WZXJ0aWNhbE5vdGVzfSxcbiAgICAgIHVfYWN0aXZlQ29sdW1uOiB7dmFsdWU6IC0xfSxcbiAgICAgIHVfcmlwcGxlVGV4OiB7dmFsdWU6IG51bGx9LFxuICAgICAgdV9tdXRlZDoge3ZhbHVlOiBmYWxzZX0sXG4gICAgfSxcbiAgICB2ZXJ0ZXhTaGFkZXI6IGBcbiAgICAgIGF0dHJpYnV0ZSB2ZWMyIHJlbGF0aXZlUG9zaXRpb247XG4gICAgICBhdHRyaWJ1dGUgZmxvYXQgaXNBcm1lZDtcbiAgICAgIHVuaWZvcm0gZmxvYXQgdV9udW1Ib3Jpem9udGFsTm90ZXM7XG4gICAgICB1bmlmb3JtIGZsb2F0IHVfbnVtVmVydGljYWxOb3RlcztcbiAgICAgIHZhcnlpbmcgdmVjMiB2X3JlbGF0aXZlUG9zaXRpb247XG4gICAgICB2YXJ5aW5nIHZlYzIgdl91djtcbiAgICAgIHZhcnlpbmcgZmxvYXQgdl9hcm1lZDtcbiAgICAgICR7TWF0ZXJpYWxzLkluY2x1ZGUubWFwfVxuICAgICAgdm9pZCBtYWluKCkge1xuICAgICAgICB2X3V2ID0gdXY7XG4gICAgICAgIHZfYXJtZWQgPSBpc0FybWVkO1xuICAgICAgICB2X3JlbGF0aXZlUG9zaXRpb24gPSByZWxhdGl2ZVBvc2l0aW9uO1xuXG4gICAgICAgIHZlYzIgb2Zmc2V0ID0gbWFwKHJlbGF0aXZlUG9zaXRpb24sIHZlYzIoMC4wKSwgdmVjMih1X251bUhvcml6b250YWxOb3RlcywgdV9udW1WZXJ0aWNhbE5vdGVzKSwgdmVjMigwLjApLCB2ZWMyKDEuMCkpO1xuICAgICAgICB2ZWMzIHBvcyA9IHZlYzMocG9zaXRpb24ueHkgKyBvZmZzZXQgLSAwLjUsIDEuMCk7IC8vIENlbnRlciBpdCB3aXRoIC0wLjVcblxuICAgICAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KHBvcywgMS4wKTtcbiAgICAgIH1cbiAgICBgLFxuICAgIGZyYWdtZW50U2hhZGVyOiBgXG4gICAgICB1bmlmb3JtIHNhbXBsZXIyRCB1X3JpcHBsZVRleDtcbiAgICAgIHVuaWZvcm0gdmVjMyB1X2Jhc2VDb2xvcjtcbiAgICAgIHVuaWZvcm0gdmVjMyB1X2FjdGl2ZUNvbG9yO1xuICAgICAgdW5pZm9ybSBmbG9hdCB1X251bUhvcml6b250YWxOb3RlcztcbiAgICAgIHVuaWZvcm0gZmxvYXQgdV9udW1WZXJ0aWNhbE5vdGVzO1xuICAgICAgdW5pZm9ybSBmbG9hdCB1X2FjdGl2ZUNvbHVtbjtcbiAgICAgIHVuaWZvcm0gZmxvYXQgdV9tdXRlZDtcbiAgICAgIHZhcnlpbmcgdmVjMiB2X3JlbGF0aXZlUG9zaXRpb247XG4gICAgICB2YXJ5aW5nIHZlYzIgdl91djtcbiAgICAgIHZhcnlpbmcgZmxvYXQgdl9hcm1lZDtcblxuICAgICAgZmxvYXQgcmVjdGFuZ2xlU0RGKHZlYzIgc3QsIHZlYzIgcykge1xuICAgICAgICBzdCA9IHN0ICogMi4wIC0gMS4wO1xuICAgICAgICByZXR1cm4gbWF4KGFicyhzdC54L3MueCksIGFicyhzdC55L3MueSkpO1xuICAgICAgfVxuXG4gICAgICBmbG9hdCBzcXVhcmVTREYodmVjMiBzdCkge1xuICAgICAgICByZXR1cm4gcmVjdGFuZ2xlU0RGKHN0LCB2ZWMyKDEuMCkpO1xuICAgICAgfVxuXG4gICAgICAjZGVmaW5lIE1VVEVfQ09MT1JfVkFMVUUgJHtDb25zdGFudHMuTVVURV9DT0xPUl9WQUxVRS50b0ZpeGVkKDMpfVxuICAgICAgdm9pZCBtYWluKCkge1xuICAgICAgICB2ZWMzIGNvbCA9IG1peCh1X2FjdGl2ZUNvbG9yLCB1X2FjdGl2ZUNvbG9yICogTVVURV9DT0xPUl9WQUxVRSwgdV9tdXRlZCk7XG4gICAgICAgIGNvbCA9IG1peCh1X2Jhc2VDb2xvciwgY29sLCB2X2FybWVkKTtcbiAgICAgICAgZmxvYXQgaXNDb2x1bW5BY3RpdmUgPSAxLjAgLSBzdGVwKDAuMSwgYWJzKHVfYWN0aXZlQ29sdW1uIC0gdl9yZWxhdGl2ZVBvc2l0aW9uLngpKTtcbiAgICAgICAgY29sID0gbWl4KGNvbCwgdmVjMygxLjApLCBpc0NvbHVtbkFjdGl2ZSAqIHZfYXJtZWQpO1xuXG4gICAgICAgIHZlYzMgcmlwcGxlVGV4ID0gdGV4dHVyZTJEKHVfcmlwcGxlVGV4LCAodl91diArIHZfcmVsYXRpdmVQb3NpdGlvbikgLyB2ZWMyKHVfbnVtSG9yaXpvbnRhbE5vdGVzLCB1X251bVZlcnRpY2FsTm90ZXMpKS5yZ2I7XG4gICAgICAgIGNvbCArPSByaXBwbGVUZXggKiByaXBwbGVUZXg7XG5cbiAgICAgICAgZmxvYXQgcmVjdCA9IHNxdWFyZVNERih2X3V2KTtcbiAgICAgICAgY29sICo9IDEuMCAtIHN0ZXAoMS4wIC0gJHtDb25zdGFudHMuU1BBQ0lOR19SQVRJTy50b0ZpeGVkKDMpfSwgcmVjdCk7XG5cbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNChjb2wsIDEuMCk7XG4gICAgICB9XG4gICAgYCxcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG1ha2VTaGFkb3dLZXlNYXRlcmlhbChvcHRpb25zKSB7XG4gIHJldHVybiBuZXcgVEhSRUUuU2hhZGVyTWF0ZXJpYWwoe1xuICAgIHRyYW5zcGFyZW50OiB0cnVlLFxuICAgIHVuaWZvcm1zOiB7XG4gICAgICB1X251bUhvcml6b250YWxOb3Rlczoge3ZhbHVlOiBvcHRpb25zLm51bUhvcml6b250YWxOb3Rlc30sXG4gICAgICB1X251bVZlcnRpY2FsTm90ZXM6IHt2YWx1ZTogb3B0aW9ucy5udW1WZXJ0aWNhbE5vdGVzfSxcbiAgICAgIHVfYWN0aXZlQ29sb3I6IHt2YWx1ZTogbmV3IFRIUkVFLkNvbG9yKFwiI2ZmZmZmZlwiKX0sXG4gICAgICB1X2FjdGl2ZUNvbHVtbjoge3ZhbHVlOiAtMX0sXG4gICAgICB1X211dGVkOiB7dmFsdWU6IGZhbHNlfSxcbiAgICB9LFxuICAgIHZlcnRleFNoYWRlcjogYFxuICAgICAgYXR0cmlidXRlIHZlYzIgcmVsYXRpdmVQb3NpdGlvbjtcbiAgICAgIGF0dHJpYnV0ZSBmbG9hdCBpc0FybWVkO1xuICAgICAgdW5pZm9ybSBmbG9hdCB1X251bUhvcml6b250YWxOb3RlcztcbiAgICAgIHVuaWZvcm0gZmxvYXQgdV9udW1WZXJ0aWNhbE5vdGVzO1xuICAgICAgdmFyeWluZyB2ZWMyIHZfcmVsYXRpdmVQb3NpdGlvbjtcbiAgICAgIHZhcnlpbmcgZmxvYXQgdl9hcm1lZDtcbiAgICAgICR7TWF0ZXJpYWxzLkluY2x1ZGUubWFwfVxuICAgICAgdm9pZCBtYWluKCkge1xuICAgICAgICB2X2FybWVkID0gaXNBcm1lZDtcbiAgICAgICAgdl9yZWxhdGl2ZVBvc2l0aW9uID0gcmVsYXRpdmVQb3NpdGlvbjtcbiAgICAgICAgdmVjMiBvZmZzZXQgPSBtYXAocmVsYXRpdmVQb3NpdGlvbiwgdmVjMigwLjApLCB2ZWMyKHVfbnVtSG9yaXpvbnRhbE5vdGVzLCB1X251bVZlcnRpY2FsTm90ZXMpLCB2ZWMyKDAuMCksIHZlYzIoMS4wKSk7XG4gICAgICAgIHZlYzMgcG9zID0gdmVjMyhwb3NpdGlvbi54eSArIG9mZnNldCAtIDAuNSwgMS4wKTsgLy8gQ2VudGVyIGl0IHdpdGggLTAuNVxuICAgICAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KHBvcywgMS4wKTtcbiAgICAgIH1cbiAgICBgLFxuICAgIGZyYWdtZW50U2hhZGVyOiBgXG4gICAgICB1bmlmb3JtIHZlYzMgdV9hY3RpdmVDb2xvcjtcbiAgICAgIHVuaWZvcm0gZmxvYXQgdV9tdXRlZDtcbiAgICAgIHVuaWZvcm0gZmxvYXQgdV9hY3RpdmVDb2x1bW47XG4gICAgICB2YXJ5aW5nIHZlYzIgdl9yZWxhdGl2ZVBvc2l0aW9uO1xuICAgICAgdmFyeWluZyBmbG9hdCB2X2FybWVkO1xuICAgICAgI2RlZmluZSBNVVRFX0NPTE9SX1ZBTFVFICR7Q29uc3RhbnRzLk1VVEVfQ09MT1JfVkFMVUUudG9GaXhlZCgzKX1cbiAgICAgIHZvaWQgbWFpbigpIHtcbiAgICAgICAgdmVjMyBjb2wgPSBtaXgodV9hY3RpdmVDb2xvciwgdV9hY3RpdmVDb2xvciAqIE1VVEVfQ09MT1JfVkFMVUUsIHVfbXV0ZWQpO1xuXG4gICAgICAgIGZsb2F0IGlzQ29sdW1uQWN0aXZlID0gMS4wIC0gc3RlcCgwLjEsIGFicyh1X2FjdGl2ZUNvbHVtbiAtIHZfcmVsYXRpdmVQb3NpdGlvbi54KSk7XG4gICAgICAgIGZsb2F0IG9wYWNpdHkgPSB2X2FybWVkICogaXNDb2x1bW5BY3RpdmU7XG5cbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNChjb2wsIG9wYWNpdHkpO1xuICAgICAgfVxuICAgIGAsXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBNYXRyaXhCdXR0b24oY29sdW1uLCByb3csIGJ1dHRvbkluZGV4LCBhcm1lZEJ1ZmZlcikge1xuICB0aGlzLmNvbHVtbiA9IGNvbHVtbjtcbiAgdGhpcy5yb3cgPSByb3c7XG4gIHZhciBhcm1lZCA9IGZhbHNlO1xuXG4gIHRoaXMuYXJtID0gZnVuY3Rpb24oKSB7XG4gICAgYXJtZWQgPSB0cnVlO1xuICAgIGFybWVkQnVmZmVyLnNldFgoYnV0dG9uSW5kZXgsIDEpO1xuICAgIGFybWVkQnVmZmVyLm5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgfTtcbiAgdGhpcy5kaXNhcm0gPSBmdW5jdGlvbigpIHtcbiAgICBhcm1lZCA9IGZhbHNlO1xuICAgIGFybWVkQnVmZmVyLnNldFgoYnV0dG9uSW5kZXgsIDApO1xuICAgIGFybWVkQnVmZmVyLm5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgfTtcbiAgdGhpcy5pc0FybWVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGFybWVkO1xuICB9O1xufVxuTWF0cml4QnV0dG9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoVEhSRUUuTWVzaC5wcm90b3R5cGUpO1xuXG5mdW5jdGlvbiBUb25lTWF0cml4KG51bUhvcml6b250YWxTdGVwcywgbnVtVmVydGljYWxTdGVwcykge1xuICBUSFJFRS5Hcm91cC5jYWxsKHRoaXMpO1xuICAvLyBTb21lIGhhY2t5IGRlYm91bmNpbmdcbiAgdmFyIGFybWluZyA9IHRydWU7XG4gIHZhciB0b3VjaEFjdGl2ZSA9IGZhbHNlO1xuXG4gIHZhciBrZXlHZW9tZXRyeSA9IChmdW5jdGlvbiBtYWtlS2V5R2VvbWV0cnkoKSB7XG4gICAgdmFyIHcgPSBudW1Ib3Jpem9udGFsU3RlcHM7XG4gICAgdmFyIGggPSBudW1WZXJ0aWNhbFN0ZXBzO1xuICAgIC8qIENvcGllZCBmcm9tIFBsYW5lQnVmZmVyR2VvbWV0cnlcbiAgICAwIC0tLS0tIDFcbiAgICB8ICAgICAgIHxcbiAgICB8ICAgICAgIHxcbiAgICAyIC0tLS0tIDNcbiAgICAqL1xuICAgIHZhciBwb3NpdGlvbnMgPSBbMCwgMS9oLCAwLCAxL3csIDEvaCwgMCwgMCwgMCwgMCwgMS93LCAwLCAwXTtcbiAgICB2YXIgaW5kaWNlcyA9IFswLCAyLCAxLCAyLCAzLCAxXTtcbiAgICB2YXIgdXZzID0gWzAsIDEsIDEsIDEsIDAsIDAsIDEsIDBdO1xuXG4gICAgdmFyIGcgPSBuZXcgVEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkoKTtcbiAgICBnLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheShwb3NpdGlvbnMpLCAzKSk7XG4gICAgZy5zZXRJbmRleChpbmRpY2VzKTtcbiAgICBnLmFkZEF0dHJpYnV0ZShcInV2XCIsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheSh1dnMpLCAyKSk7XG4gICAgcmV0dXJuIGc7XG4gIH0pKCk7XG4gIHZhciBidXR0b25zID0gW107XG4gIHZhciBjb2x1bW5zID0gW107XG4gIHZhciBudW1CdXR0b25zID0gbnVtSG9yaXpvbnRhbFN0ZXBzICogbnVtVmVydGljYWxTdGVwcztcbiAgdmFyIHJlbGF0aXZlUG9zaXRpb25zID0gbmV3IFRIUkVFLkluc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KG51bUJ1dHRvbnMgKiAyKSwgMiwgMSk7XG4gIHZhciBhcm1lZEJ1ZmZlciA9IG5ldyBUSFJFRS5JbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheShudW1CdXR0b25zKSwgMSwgMSk7IC8vIDAgPSBpbmFjdGl2ZSwgMSA9IGFybWVkXG5cbiAgdmFyIHNoYWRvd0dyb3VwID0gbmV3IFRIUkVFLkdyb3VwKCk7XG4gIHZhciBidXR0b25JbmRleCA9IDA7XG4gIGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IG51bUhvcml6b250YWxTdGVwczsgY29sKyspIHtcbiAgICBjb2x1bW5zLnB1c2goW10pO1xuICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG51bVZlcnRpY2FsU3RlcHM7IHJvdysrKSB7XG4gICAgICB2YXIgYnV0dG9uID0gbmV3IE1hdHJpeEJ1dHRvbihjb2wsIHJvdywgYnV0dG9uSW5kZXgsIGFybWVkQnVmZmVyKTtcbiAgICAgIHJlbGF0aXZlUG9zaXRpb25zLnNldFhZKGJ1dHRvbkluZGV4LCBjb2wsIHJvdyk7XG4gICAgICBhcm1lZEJ1ZmZlci5zZXRYKGJ1dHRvbkluZGV4LCAwKTsgLy8gU2V0IGFsbCB0byBpbmFjdGl2ZVxuICAgICAgYnV0dG9ucy5wdXNoKGJ1dHRvbik7XG4gICAgICBjb2x1bW5zW2NvbF0ucHVzaChidXR0b24pO1xuICAgICAgYnV0dG9uSW5kZXgrKztcbiAgICB9XG4gIH1cbiAgYXJtZWRCdWZmZXIuc2V0RHluYW1pYyh0cnVlKTtcbiAga2V5R2VvbWV0cnkuYWRkQXR0cmlidXRlKFwicmVsYXRpdmVQb3NpdGlvblwiLCByZWxhdGl2ZVBvc2l0aW9ucyk7XG4gIGtleUdlb21ldHJ5LmFkZEF0dHJpYnV0ZShcImlzQXJtZWRcIiwgYXJtZWRCdWZmZXIpO1xuICB2YXIga2V5TWF0ZXJpYWwgPSBtYWtlS2V5TWF0ZXJpYWwoe1xuICAgIG51bUhvcml6b250YWxOb3RlczogbnVtSG9yaXpvbnRhbFN0ZXBzLFxuICAgIG51bVZlcnRpY2FsTm90ZXM6IG51bVZlcnRpY2FsU3RlcHMsXG4gICAgYmFzZUNvbG9yOiBDb25zdGFudHMuQkFTRV9DT0xPUixcbiAgfSk7XG4gIHRoaXMuYWRkKG5ldyBUSFJFRS5NZXNoKGtleUdlb21ldHJ5LCBrZXlNYXRlcmlhbCkpO1xuXG4gIC8vIEJlY2F1c2UgdGhlIGluc3RhbmNlZCBidWZmZXIgZ2VvbWV0cmllcyBkb24ndCBoYXZlIHRydWUgYm91bmRpbmcgYm94ZXNcbiAgdmFyIGNsaWNrU2NyZWVuID0gbmV3IFRIUkVFLk1lc2gobmV3IFRIUkVFLlBsYW5lQnVmZmVyR2VvbWV0cnkoKSwgbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHt0cmFuc3BhcmVudDogdHJ1ZSwgb3BhY2l0eTogMH0pKTtcbiAgdGhpcy5hZGQoY2xpY2tTY3JlZW4pO1xuXG4gIHZhciBzaGFkb3dLZXlNYXRlcmlhbCA9IG1ha2VTaGFkb3dLZXlNYXRlcmlhbCh7bnVtSG9yaXpvbnRhbE5vdGVzOiBudW1Ib3Jpem9udGFsU3RlcHMsIG51bVZlcnRpY2FsTm90ZXM6IG51bVZlcnRpY2FsU3RlcHN9KTtcbiAgc2hhZG93R3JvdXAuYWRkKG5ldyBUSFJFRS5NZXNoKGtleUdlb21ldHJ5LCBzaGFkb3dLZXlNYXRlcmlhbCkpO1xuICBzaGFkb3dHcm91cC5hZGQoY2xpY2tTY3JlZW4uY2xvbmUoKSk7IC8vIFNvIHRoYXQgaXQgaGFzIGEgcHJvcGVyIEJCXG4gIHZhciByaXBwbGVpemVyID0gbmV3IFJpcHBsZWl6ZXIoc2hhZG93R3JvdXApO1xuXG4gIGZ1bmN0aW9uIHNldEJ1dHRvblVuaWZvcm0odW5pZm9ybU5hbWUsIHZhbHVlLCBzaGFkb3dWYWx1ZSkge1xuICAgIGtleU1hdGVyaWFsLnVuaWZvcm1zW3VuaWZvcm1OYW1lXS52YWx1ZSA9IHZhbHVlO1xuICAgIGlmIChzaGFkb3dWYWx1ZSA9PT0gdW5kZWZpbmVkKSBzaGFkb3dWYWx1ZSA9IHZhbHVlO1xuICAgIGlmIChzaGFkb3dLZXlNYXRlcmlhbC51bmlmb3Jtc1t1bmlmb3JtTmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgc2hhZG93S2V5TWF0ZXJpYWwudW5pZm9ybXNbdW5pZm9ybU5hbWVdLnZhbHVlID0gc2hhZG93VmFsdWU7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gYXJtQnV0dG9uKHgsIHkpIHtcbiAgICBjb2x1bW5zW3hdW3ldLmFybSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0QnV0dG9uKHgsIHkpIHtcbiAgICByZXR1cm4gY29sdW1uc1t4XVt5XTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgIGJ1dHRvbnMuZm9yRWFjaChmdW5jdGlvbihidG4pIHtcbiAgICAgIGJ0bi5kaXNhcm0oKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEFjdGl2ZU5vdGVzSW5Db2x1bW4oY29sdW1uTnVtKSB7XG4gICAgdmFyIGFjdGl2ZU5vdGVzSW5Db2x1bW4gPSBbXTtcbiAgICBjb2x1bW5zW2NvbHVtbk51bV0uZm9yRWFjaChmdW5jdGlvbihidG4pIHtcbiAgICAgIGlmIChidG4uaXNBcm1lZCgpKSB7XG4gICAgICAgIGFjdGl2ZU5vdGVzSW5Db2x1bW4ucHVzaChidG4ucm93KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gYWN0aXZlTm90ZXNJbkNvbHVtbjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHV2VG9CdXR0b25JbmRleCh1dikge1xuICAgIHZhciByZXN1bHQgPSB1di5jbG9uZSgpLm11bHRpcGx5KG5ldyBUSFJFRS5WZWN0b3IyKG51bUhvcml6b250YWxTdGVwcywgbnVtVmVydGljYWxTdGVwcykpO1xuICAgIHJlc3VsdC54ID0gTWF0aC5mbG9vcihyZXN1bHQueCk7XG4gICAgcmVzdWx0LnkgPSBNYXRoLmZsb29yKHJlc3VsdC55KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0RGFtcGluZyhuZXdEYW1waW5nKSB7XG4gICAgcmlwcGxlaXplci5kYW1waW5nLnZhbHVlID0gbmV3RGFtcGluZztcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlcihyZW5kZXJlcikge1xuICAgIHJpcHBsZWl6ZXIucmVuZGVyKHJlbmRlcmVyKTtcbiAgICBzZXRCdXR0b25Vbmlmb3JtKFwidV9yaXBwbGVUZXhcIiwgcmlwcGxlaXplci5nZXRBY3RpdmVUZXh0dXJlKCkpO1xuICB9XG5cbiAgT2JqZWN0LmFzc2lnbih0aGlzLCB7XG4gICAgZ2V0QWN0aXZlTm90ZXNJbkNvbHVtbjogZ2V0QWN0aXZlTm90ZXNJbkNvbHVtbixcbiAgICBzZXRCdXR0b25Vbmlmb3JtOiBzZXRCdXR0b25Vbmlmb3JtLFxuICAgIHV2VG9CdXR0b25JbmRleDogdXZUb0J1dHRvbkluZGV4LFxuICAgIHRvdWNoQWN0aXZlOiB0b3VjaEFjdGl2ZSxcbiAgICBzaGFkb3dHcm91cDogc2hhZG93R3JvdXAsXG4gICAgY2xpY2tTY3JlZW46IGNsaWNrU2NyZWVuLFxuICAgIHNldERhbXBpbmc6IHNldERhbXBpbmcsXG4gICAgZ2V0QnV0dG9uOiBnZXRCdXR0b24sXG4gICAgYXJtQnV0dG9uOiBhcm1CdXR0b24sXG4gICAgcmVuZGVyOiByZW5kZXIsXG4gICAgYXJtaW5nOiBhcm1pbmcsXG4gICAgY2xlYXI6IGNsZWFyLFxuICB9KTtcbn1cblRvbmVNYXRyaXgucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1xuXG5Ub25lTWF0cml4LnByb3RvdHlwZS50b3VjaCA9IGZ1bmN0aW9uKHJheWNhc3Rlcikge1xuICB2YXIgaW50ZXJzZWN0aW9uID0gcmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdCh0aGlzLmNsaWNrU2NyZWVuKVswXTtcbiAgaWYgKGludGVyc2VjdGlvbiAmJiB0aGlzLnRvdWNoQWN0aXZlKSB7XG4gICAgdmFyIGFkZHJlc3MgPSB0aGlzLnV2VG9CdXR0b25JbmRleChpbnRlcnNlY3Rpb24udXYpO1xuICAgIHZhciB0b3VjaGVkQnV0dG9uID0gdGhpcy5nZXRCdXR0b24oYWRkcmVzcy54LCBhZGRyZXNzLnkpO1xuICAgIGlmICh0aGlzLmFybWluZyA9PT0gdHJ1ZSkge1xuICAgICAgdG91Y2hlZEJ1dHRvbi5hcm0oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdG91Y2hlZEJ1dHRvbi5kaXNhcm0oKTtcbiAgICB9XG4gIH1cbn07XG5cblRvbmVNYXRyaXgucHJvdG90eXBlLnRvdWNoU3RhcnQgPSBmdW5jdGlvbihyYXljYXN0ZXIpIHtcbiAgdmFyIGludGVyc2VjdGlvbiA9IHJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3QodGhpcy5jbGlja1NjcmVlbilbMF07XG4gIGlmIChpbnRlcnNlY3Rpb24pIHtcbiAgICB2YXIgYWRkcmVzcyA9IHRoaXMudXZUb0J1dHRvbkluZGV4KGludGVyc2VjdGlvbi51dik7XG4gICAgdmFyIHRvdWNoZWRCdXR0b24gPSB0aGlzLmdldEJ1dHRvbihhZGRyZXNzLngsIGFkZHJlc3MueSk7XG4gICAgdGhpcy5hcm1pbmcgPSAhdG91Y2hlZEJ1dHRvbi5pc0FybWVkKCk7XG4gICAgdGhpcy50b3VjaEFjdGl2ZSA9IHRydWU7XG4gIH1cbiAgdGhpcy50b3VjaChyYXljYXN0ZXIpO1xufTtcblxuVG9uZU1hdHJpeC5wcm90b3R5cGUudG91Y2hFbmQgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy50b3VjaEFjdGl2ZSA9IGZhbHNlO1xufTtcblxuVG9uZU1hdHJpeC5wcm90b3R5cGUuZGVhY3RpdmF0ZUNvbHVtbnMgPSBmdW5jdGlvbihudW0pIHtcbiAgdGhpcy5zZXRCdXR0b25Vbmlmb3JtKFwidV9hY3RpdmVDb2x1bW5cIiwgLTEpO1xufTtcblxuVG9uZU1hdHJpeC5wcm90b3R5cGUuc2V0QWN0aXZlQ29sb3IgPSBmdW5jdGlvbih7YnV0dG9uQ29sb3IsIHNoYWRvd0NvbG9yfSkge1xuICB0aGlzLnNldEJ1dHRvblVuaWZvcm0oXCJ1X2FjdGl2ZUNvbG9yXCIsIGJ1dHRvbkNvbG9yLCBzaGFkb3dDb2xvcik7XG59O1xuXG5Ub25lTWF0cml4LnByb3RvdHlwZS5tdXRlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgdGhpcy5zZXRCdXR0b25Vbmlmb3JtKFwidV9tdXRlZFwiLCB2YWx1ZSk7XG59O1xuXG5Ub25lTWF0cml4LnByb3RvdHlwZS5zZXRSaXBwbGVUZXh0dXJlID0gZnVuY3Rpb24odGV4dHVyZSkge1xuICB0aGlzLnNldEJ1dHRvblVuaWZvcm0oXCJ1X3JpcHBsZVRleFwiLCB0ZXh0dXJlKTtcbn07XG5cblRvbmVNYXRyaXgucHJvdG90eXBlLmFjdGl2YXRlQ29sdW1uID0gZnVuY3Rpb24obnVtKSB7XG4gIHRoaXMuc2V0QnV0dG9uVW5pZm9ybShcInVfYWN0aXZlQ29sdW1uXCIsIG51bSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBUb25lTWF0cml4O1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./js/ToneMatrix.js\n");

/***/ }),

/***/ "./js/Transport.js":
/*!*************************!*\
  !*** ./js/Transport.js ***!
  \*************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _AppData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AppData */ \"./js/AppData.js\");\n\n\nfunction Transport(options) {\n  options = options || {};\n  this.startTime = performance.now();\n  this.paused = true;\n  this.startPosition = _AppData__WEBPACK_IMPORTED_MODULE_0__[\"Constants\"].NUM_STEPS - 1;\n  this.previousPosition = _AppData__WEBPACK_IMPORTED_MODULE_0__[\"Constants\"].NUM_STEPS - 1;\n  this.position = this.previousPosition;\n  this.distanceFromBeat = 0;\n  this.swing = (options.swing !== undefined) ? 0 : options.swing;\n\n  this.start = function() {\n    this.startTime = performance.now();\n    this.paused = false;\n  };\n\n  this.togglePaused = function() {\n    if (!this.paused) {\n      this.startPosition = this.position;\n      this.previousPosition = this.position;\n      this.paused = true;\n    } else {\n      this.start();\n    }\n  };\n}\n\nTransport.prototype.update = function(beatCallback) {\n  if (this.paused) {\n    return;\n  }\n  var secondsSinceStart = (performance.now() - this.startTime) / 1000;\n  var numBeatsPassed = _AppData__WEBPACK_IMPORTED_MODULE_0__[\"Controls\"].TEMPO * secondsSinceStart / 60;\n  var floatPosition = numBeatsPassed * (1/4 / _AppData__WEBPACK_IMPORTED_MODULE_0__[\"Constants\"].STEP_VALUE) + this.startPosition;\n  if (Math.floor(floatPosition) % 2 === 1) {\n    floatPosition += this.swing;\n  }\n  var normalizedFloatPosition = floatPosition % _AppData__WEBPACK_IMPORTED_MODULE_0__[\"Constants\"].NUM_STEPS;\n  this.position = Math.floor(normalizedFloatPosition);\n  this.distanceFromBeat = normalizedFloatPosition - this.position;\n\n  if (this.position !== this.previousPosition) {\n    this.previousPosition = this.position;\n    beatCallback();\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Transport);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9UcmFuc3BvcnQuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9SUy8uL2pzL1RyYW5zcG9ydC5qcz9iMDFlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q29uc3RhbnRzLCBDb250cm9sc30gZnJvbSBcIi4vQXBwRGF0YVwiO1xuXG5mdW5jdGlvbiBUcmFuc3BvcnQob3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdGhpcy5zdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgdGhpcy5wYXVzZWQgPSB0cnVlO1xuICB0aGlzLnN0YXJ0UG9zaXRpb24gPSBDb25zdGFudHMuTlVNX1NURVBTIC0gMTtcbiAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uID0gQ29uc3RhbnRzLk5VTV9TVEVQUyAtIDE7XG4gIHRoaXMucG9zaXRpb24gPSB0aGlzLnByZXZpb3VzUG9zaXRpb247XG4gIHRoaXMuZGlzdGFuY2VGcm9tQmVhdCA9IDA7XG4gIHRoaXMuc3dpbmcgPSAob3B0aW9ucy5zd2luZyAhPT0gdW5kZWZpbmVkKSA/IDAgOiBvcHRpb25zLnN3aW5nO1xuXG4gIHRoaXMuc3RhcnQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIHRoaXMucGF1c2VkID0gZmFsc2U7XG4gIH07XG5cbiAgdGhpcy50b2dnbGVQYXVzZWQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMucGF1c2VkKSB7XG4gICAgICB0aGlzLnN0YXJ0UG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uO1xuICAgICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uID0gdGhpcy5wb3NpdGlvbjtcbiAgICAgIHRoaXMucGF1c2VkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdGFydCgpO1xuICAgIH1cbiAgfTtcbn1cblxuVHJhbnNwb3J0LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbihiZWF0Q2FsbGJhY2spIHtcbiAgaWYgKHRoaXMucGF1c2VkKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBzZWNvbmRzU2luY2VTdGFydCA9IChwZXJmb3JtYW5jZS5ub3coKSAtIHRoaXMuc3RhcnRUaW1lKSAvIDEwMDA7XG4gIHZhciBudW1CZWF0c1Bhc3NlZCA9IENvbnRyb2xzLlRFTVBPICogc2Vjb25kc1NpbmNlU3RhcnQgLyA2MDtcbiAgdmFyIGZsb2F0UG9zaXRpb24gPSBudW1CZWF0c1Bhc3NlZCAqICgxLzQgLyBDb25zdGFudHMuU1RFUF9WQUxVRSkgKyB0aGlzLnN0YXJ0UG9zaXRpb247XG4gIGlmIChNYXRoLmZsb29yKGZsb2F0UG9zaXRpb24pICUgMiA9PT0gMSkge1xuICAgIGZsb2F0UG9zaXRpb24gKz0gdGhpcy5zd2luZztcbiAgfVxuICB2YXIgbm9ybWFsaXplZEZsb2F0UG9zaXRpb24gPSBmbG9hdFBvc2l0aW9uICUgQ29uc3RhbnRzLk5VTV9TVEVQUztcbiAgdGhpcy5wb3NpdGlvbiA9IE1hdGguZmxvb3Iobm9ybWFsaXplZEZsb2F0UG9zaXRpb24pO1xuICB0aGlzLmRpc3RhbmNlRnJvbUJlYXQgPSBub3JtYWxpemVkRmxvYXRQb3NpdGlvbiAtIHRoaXMucG9zaXRpb247XG5cbiAgaWYgKHRoaXMucG9zaXRpb24gIT09IHRoaXMucHJldmlvdXNQb3NpdGlvbikge1xuICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbiA9IHRoaXMucG9zaXRpb247XG4gICAgYmVhdENhbGxiYWNrKCk7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IFRyYW5zcG9ydDtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./js/Transport.js\n");

/***/ }),

/***/ "./js/mainEntryPoint.js":
/*!******************************!*\
  !*** ./js/mainEntryPoint.js ***!
  \******************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_stats_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/stats.js */ \"./node_modules/stats.js/build/stats.min.js\");\n/* harmony import */ var _node_modules_stats_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_stats_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Application__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Application */ \"./js/Application.js\");\n/* harmony import */ var _AppData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AppData */ \"./js/AppData.js\");\n// export some globals for debugging\n// import * as THREE from \"../node_modules/three/build/three.min.js\";\n// import Tone from \"../node_modules/Tone/build/Tone.min.js\";\n// window.Tone = Tone;\n// window.THREE = THREE;\n\n\n\n\n\nvar isMobile = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\nvar hasInteracted = false;\nvar interactionGate = document.getElementById(\"interactionGate\");\n\n// HANDLERS\nfunction mouseMove(event) {\n  window.app.touch(event);\n}\nfunction touchMove(event) {\n  event.pageX = event.changedTouches[0].pageX;\n  event.pageY = event.changedTouches[0].pageY;\n  mouseMove(event);\n}\nfunction mouseDown(event) {\n  if (!hasInteracted) {\n    window.app.start();\n    interactionGate.style.display = \"none\";\n    hasInteracted = true;\n  } else {\n    window.app.touchStart(event);\n  }\n}\nfunction touchStart(event) {\n  event.pageX = event.changedTouches[0].pageX;\n  event.pageY = event.changedTouches[0].pageY;\n  mouseDown(event);\n}\nfunction mouseUp(event) {\n  window.app.touchEnd();\n}\nfunction touchEnd(event) {\n  mouseUp(event);\n}\nfunction onDocumentKeyPress(event) {\n  switch (event.code) {\n    case \"KeyC\":\n      window.app.clear();\n      break;\n    case \"KeyM\":\n      window.app.toggleMute();\n      break;\n    case \"Space\":\n      window.app.togglePaused();\n      break;\n    default:\n      break;\n  }\n}\nfunction windowResize(event) {\n  window.app.resize(window.innerWidth, window.innerHeight);\n}\n\nif (isMobile) {\n  document.addEventListener(\"touchmove\", touchMove, false);\n  document.addEventListener(\"touchstart\", touchStart, false);\n  document.addEventListener(\"touchend\", touchEnd, false);\n} else {\n  document.addEventListener(\"mousemove\", mouseMove, false);\n  document.addEventListener(\"mousedown\", mouseDown, false);\n  document.addEventListener(\"mouseup\", mouseUp, false);\n  document.addEventListener(\"keypress\", onDocumentKeyPress, false);\n}\nwindow.onresize = windowResize;\n\nvar canvas = document.getElementById(\"app\");\ncanvas.addEventListener(\"touchmove\", function(event) {\n  event.preventDefault();\n});\n\nvar stats = new _node_modules_stats_js__WEBPACK_IMPORTED_MODULE_0___default.a();\nfunction update() {\n  stats.update();\n  window.app.update();\n  window.app.render();\n  requestAnimationFrame(update);\n}\n\nwindow.onload = function() {\n  window.app = new _Application__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\"#app\", window.innerWidth, window.innerHeight, {\n    numSteps: _AppData__WEBPACK_IMPORTED_MODULE_2__[\"Constants\"].NUM_STEPS,\n    numNotes: _AppData__WEBPACK_IMPORTED_MODULE_2__[\"Constants\"].NUM_NOTES,\n    isMobile: isMobile,\n  });\n  window.app.init();\n  window.app.render();\n  var domElement = document.getElementById(\"soundOn\");\n  domElement.innerHTML = \"SOUND ON!<br>\";\n  domElement.style.top = \"calc(50% - 24vw)\";\n  domElement.style.lineHeight = \"25vw\";\n  domElement.style.animationName = \"fade\";\n  domElement.style.animationIterationCount = 1;\n  domElement.style.animationDuration = \"0.5s\";\n\n  // document.body.appendChild(stats.domElement);\n  window.setTimeout(function() {\n    mixpanel.track(\"App Started\");\n    update();\n  }, 0);\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9tYWluRW50cnlQb2ludC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1JTLy4vanMvbWFpbkVudHJ5UG9pbnQuanM/OGNlYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHBvcnQgc29tZSBnbG9iYWxzIGZvciBkZWJ1Z2dpbmdcbi8vIGltcG9ydCAqIGFzIFRIUkVFIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvdGhyZWUvYnVpbGQvdGhyZWUubWluLmpzXCI7XG4vLyBpbXBvcnQgVG9uZSBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL1RvbmUvYnVpbGQvVG9uZS5taW4uanNcIjtcbi8vIHdpbmRvdy5Ub25lID0gVG9uZTtcbi8vIHdpbmRvdy5USFJFRSA9IFRIUkVFO1xuXG5pbXBvcnQgU3RhdHMgZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9zdGF0cy5qc1wiO1xuaW1wb3J0IEFwcGxpY2F0aW9uIGZyb20gXCIuL0FwcGxpY2F0aW9uXCI7XG5pbXBvcnQge0NvbnN0YW50c30gZnJvbSBcIi4vQXBwRGF0YVwiO1xuXG52YXIgaXNNb2JpbGUgPSAoL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKTtcbnZhciBoYXNJbnRlcmFjdGVkID0gZmFsc2U7XG52YXIgaW50ZXJhY3Rpb25HYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbnRlcmFjdGlvbkdhdGVcIik7XG5cbi8vIEhBTkRMRVJTXG5mdW5jdGlvbiBtb3VzZU1vdmUoZXZlbnQpIHtcbiAgd2luZG93LmFwcC50b3VjaChldmVudCk7XG59XG5mdW5jdGlvbiB0b3VjaE1vdmUoZXZlbnQpIHtcbiAgZXZlbnQucGFnZVggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWDtcbiAgZXZlbnQucGFnZVkgPSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWTtcbiAgbW91c2VNb3ZlKGV2ZW50KTtcbn1cbmZ1bmN0aW9uIG1vdXNlRG93bihldmVudCkge1xuICBpZiAoIWhhc0ludGVyYWN0ZWQpIHtcbiAgICB3aW5kb3cuYXBwLnN0YXJ0KCk7XG4gICAgaW50ZXJhY3Rpb25HYXRlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICBoYXNJbnRlcmFjdGVkID0gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICB3aW5kb3cuYXBwLnRvdWNoU3RhcnQoZXZlbnQpO1xuICB9XG59XG5mdW5jdGlvbiB0b3VjaFN0YXJ0KGV2ZW50KSB7XG4gIGV2ZW50LnBhZ2VYID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVg7XG4gIGV2ZW50LnBhZ2VZID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVk7XG4gIG1vdXNlRG93bihldmVudCk7XG59XG5mdW5jdGlvbiBtb3VzZVVwKGV2ZW50KSB7XG4gIHdpbmRvdy5hcHAudG91Y2hFbmQoKTtcbn1cbmZ1bmN0aW9uIHRvdWNoRW5kKGV2ZW50KSB7XG4gIG1vdXNlVXAoZXZlbnQpO1xufVxuZnVuY3Rpb24gb25Eb2N1bWVudEtleVByZXNzKGV2ZW50KSB7XG4gIHN3aXRjaCAoZXZlbnQuY29kZSkge1xuICAgIGNhc2UgXCJLZXlDXCI6XG4gICAgICB3aW5kb3cuYXBwLmNsZWFyKCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiS2V5TVwiOlxuICAgICAgd2luZG93LmFwcC50b2dnbGVNdXRlKCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiU3BhY2VcIjpcbiAgICAgIHdpbmRvdy5hcHAudG9nZ2xlUGF1c2VkKCk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgYnJlYWs7XG4gIH1cbn1cbmZ1bmN0aW9uIHdpbmRvd1Jlc2l6ZShldmVudCkge1xuICB3aW5kb3cuYXBwLnJlc2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcbn1cblxuaWYgKGlzTW9iaWxlKSB7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgdG91Y2hNb3ZlLCBmYWxzZSk7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIHRvdWNoU3RhcnQsIGZhbHNlKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIHRvdWNoRW5kLCBmYWxzZSk7XG59IGVsc2Uge1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG1vdXNlTW92ZSwgZmFsc2UpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIG1vdXNlRG93biwgZmFsc2UpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBtb3VzZVVwLCBmYWxzZSk7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCBvbkRvY3VtZW50S2V5UHJlc3MsIGZhbHNlKTtcbn1cbndpbmRvdy5vbnJlc2l6ZSA9IHdpbmRvd1Jlc2l6ZTtcblxudmFyIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYXBwXCIpO1xuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbn0pO1xuXG52YXIgc3RhdHMgPSBuZXcgU3RhdHMoKTtcbmZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgc3RhdHMudXBkYXRlKCk7XG4gIHdpbmRvdy5hcHAudXBkYXRlKCk7XG4gIHdpbmRvdy5hcHAucmVuZGVyKCk7XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGUpO1xufVxuXG53aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gIHdpbmRvdy5hcHAgPSBuZXcgQXBwbGljYXRpb24oXCIjYXBwXCIsIHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQsIHtcbiAgICBudW1TdGVwczogQ29uc3RhbnRzLk5VTV9TVEVQUyxcbiAgICBudW1Ob3RlczogQ29uc3RhbnRzLk5VTV9OT1RFUyxcbiAgICBpc01vYmlsZTogaXNNb2JpbGUsXG4gIH0pO1xuICB3aW5kb3cuYXBwLmluaXQoKTtcbiAgd2luZG93LmFwcC5yZW5kZXIoKTtcbiAgdmFyIGRvbUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNvdW5kT25cIik7XG4gIGRvbUVsZW1lbnQuaW5uZXJIVE1MID0gXCJTT1VORCBPTiE8YnI+4pa277iOXCI7XG4gIGRvbUVsZW1lbnQuc3R5bGUudG9wID0gXCJjYWxjKDUwJSAtIDI0dncpXCI7XG4gIGRvbUVsZW1lbnQuc3R5bGUubGluZUhlaWdodCA9IFwiMjV2d1wiO1xuICBkb21FbGVtZW50LnN0eWxlLmFuaW1hdGlvbk5hbWUgPSBcImZhZGVcIjtcbiAgZG9tRWxlbWVudC5zdHlsZS5hbmltYXRpb25JdGVyYXRpb25Db3VudCA9IDE7XG4gIGRvbUVsZW1lbnQuc3R5bGUuYW5pbWF0aW9uRHVyYXRpb24gPSBcIjAuNXNcIjtcblxuICAvLyBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHN0YXRzLmRvbUVsZW1lbnQpO1xuICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBtaXhwYW5lbC50cmFjayhcIkFwcCBTdGFydGVkXCIpO1xuICAgIHVwZGF0ZSgpO1xuICB9LCAwKTtcbn07XG5cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/mainEntryPoint.js\n");

/***/ }),

/***/ "./node_modules/Tone/build/Tone.min.js":
/*!*********************************************!*\
  !*** ./node_modules/Tone/build/Tone.min.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_RESULT__;!function(t,e){ true?!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(){return e()}).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):undefined}(this,function(){\"use strict\";function t(t){t(e)}var e;/**\n\t *  Tone.js\n\t *  @author Yotam Mann\n\t *  @license http://opensource.org/licenses/MIT MIT License\n\t *  @copyright 2014-2017 Yotam Mann\n\t */\nreturn function(t){e=t()}(function(){var t,e=function(){};return e.prototype.toString=function(){var t,i,n;for(t in e)if(i=t[0].match(/^[A-Z]$/),n=e[t]===this.constructor,e.isFunction(e[t])&&i&&n)return t;return\"Tone\"},e.prototype.dispose=function(){return this},e.prototype.set=function(t,i,n){var s,o,r,a,l,h,u;e.isObject(t)?n=i:e.isString(t)&&(s={},s[t]=i,t=s);t:for(o in t){if(i=t[o],r=this,-1!==o.indexOf(\".\")){for(a=o.split(\".\"),l=0;l<a.length-1;l++)if((r=r[a[l]])instanceof e){a.splice(0,l+1),h=a.join(\".\"),r.set(h,i);continue t}o=a[a.length-1]}u=r[o],e.isUndef(u)||(e.Signal&&u instanceof e.Signal||e.Param&&u instanceof e.Param?u.value!==i&&(e.isUndef(n)?u.value=i:u.rampTo(i,n)):u instanceof AudioParam?u.value!==i&&(u.value=i):u instanceof e?u.set(i):u!==i&&(r[o]=i))}return this},e.prototype.get=function(t){var i,n,s,o,r,a,l,h,u;for(e.isUndef(t)?t=this._collectDefaults(this.constructor):e.isString(t)&&(t=[t]),i={},n=0;n<t.length;n++){if(s=t[n],o=this,r=i,-1!==s.indexOf(\".\")){for(a=s.split(\".\"),l=0;l<a.length-1;l++)h=a[l],r[h]=r[h]||{},r=r[h],o=o[h];s=a[a.length-1]}u=o[s],e.isObject(t[s])?r[s]=u.get():e.Signal&&u instanceof e.Signal?r[s]=u.value:e.Param&&u instanceof e.Param?r[s]=u.value:u instanceof AudioParam?r[s]=u.value:u instanceof e?r[s]=u.get():e.isFunction(u)||e.isUndef(u)||(r[s]=u)}return i},e.prototype._collectDefaults=function(t){var i,n,s=[];if(e.isUndef(t.defaults)||(s=Object.keys(t.defaults)),!e.isUndef(t._super))for(i=this._collectDefaults(t._super),n=0;n<i.length;n++)-1===s.indexOf(i[n])&&s.push(i[n]);return s},e.defaults=function(t,i,n){var s,o={};if(1===t.length&&e.isObject(t[0]))o=t[0];else for(s=0;s<i.length;s++)o[i[s]]=t[s];return e.isUndef(n.defaults)?e.isObject(n)?e.defaultArg(o,n):o:e.defaultArg(o,n.defaults)},e.defaultArg=function(t,i){var n,s,o;if(e.isObject(t)&&e.isObject(i)){n={};for(s in t)n[s]=e.defaultArg(i[s],t[s]);for(o in i)n[o]=e.defaultArg(t[o],i[o]);return n}return e.isUndef(t)?i:t},e.connectSeries=function(){var t,i,n=arguments[0];for(t=1;t<arguments.length;t++)i=arguments[t],n.connect(i),n=i;return e},e.isUndef=function(t){return void 0===t},e.isFunction=function(t){return\"function\"==typeof t},e.isNumber=function(t){return\"number\"==typeof t},e.isObject=function(t){return\"[object Object]\"===Object.prototype.toString.call(t)&&t.constructor===Object},e.isBoolean=function(t){return\"boolean\"==typeof t},e.isArray=function(t){return Array.isArray(t)},e.isString=function(t){return\"string\"==typeof t},e.isNote=function(t){return e.isString(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)},e.noOp=function(){},e.prototype._readOnly=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._readOnly(t[e]);else Object.defineProperty(this,t,{writable:!1,enumerable:!0})},e.prototype._writable=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._writable(t[e]);else Object.defineProperty(this,t,{writable:!0})},e.State={Started:\"started\",Stopped:\"stopped\",Paused:\"paused\"},e.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},e.dbToGain=function(t){return Math.pow(2,t/6)},e.gainToDb=function(t){return Math.log(t)/Math.LN10*20},e.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)},e.prototype.now=function(){return e.context.now()},e.now=function(){return e.context.now()},e.isPast=function(t){t<e.context.currentTime&&console.warn(\"Time '\"+t+\"' is in the past. Scheduled time must be  AudioContext.currentTime\")},e.extend=function(t,i){function n(){}e.isUndef(i)&&(i=e),n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t,t._super=i},t=null,Object.defineProperty(e,\"context\",{get:function(){return t},set:function(i){t=e.Context&&i instanceof e.Context?i:new e.Context(i),e.Context.emit(\"init\",t)}}),Object.defineProperty(e.prototype,\"context\",{get:function(){return e.context}}),e.setContext=function(t){e.context=t},Object.defineProperty(e.prototype,\"blockTime\",{get:function(){return 128/this.context.sampleRate}}),Object.defineProperty(e.prototype,\"sampleTime\",{get:function(){return 1/this.context.sampleRate}}),Object.defineProperty(e,\"supported\",{get:function(){var t=window.hasOwnProperty(\"AudioContext\")||window.hasOwnProperty(\"webkitAudioContext\"),e=window.hasOwnProperty(\"Promise\"),i=window.hasOwnProperty(\"Worker\");return t&&e&&i}}),Object.defineProperty(e,\"initialized\",{get:function(){return null!==t}}),e.getContext=function(t){if(e.initialized)t(e.context);else{var i=function(){t(e.context),e.Context.off(\"init\",i)};e.Context.on(\"init\",i)}return e},e.version=\"r11\",window.TONE_SILENCE_VERSION_LOGGING||console.log(\"%c * Tone.js \"+e.version+\" * \",\"background: #000; color: #fff\"),e}),t(function(t){return t.Emitter=function(){t.call(this),this._events={}},t.extend(t.Emitter),t.Emitter.prototype.on=function(t,e){var i,n,s=t.split(/\\W+/);for(i=0;i<s.length;i++)n=s[i],this._events.hasOwnProperty(n)||(this._events[n]=[]),this._events[n].push(e);return this},t.Emitter.prototype.off=function(e,i){var n,s,o,r=e.split(/\\W+/);for(n=0;n<r.length;n++)if(e=r[n],this._events.hasOwnProperty(e))if(t.isUndef(i))this._events[e]=[];else for(s=this._events[e],o=0;o<s.length;o++)s[o]===i&&s.splice(o,1);return this},t.Emitter.prototype.emit=function(t){var e,i,n,s;if(this._events&&(e=Array.apply(null,arguments).slice(1),this._events.hasOwnProperty(t)))for(i=this._events[t],n=0,s=i.length;n<s;n++)i[n].apply(this,e);return this},t.Emitter.mixin=function(e){var i,n,s,o=[\"on\",\"off\",\"emit\"];for(e._events={},i=0;i<o.length;i++)n=o[i],s=t.Emitter.prototype[n],e[n]=s;return t.Emitter},t.Emitter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events=null,this},t.Emitter}),t(function(t){return t.Timeline=function(){var e=t.defaults(arguments,[\"memory\"],t.Timeline);t.call(this),this._timeline=[],this._toRemove=[],this._toAdd=[],this._iterating=!1,this.memory=e.memory},t.extend(t.Timeline),t.Timeline.defaults={memory:1/0},Object.defineProperty(t.Timeline.prototype,\"length\",{get:function(){return this._timeline.length}}),t.Timeline.prototype.add=function(e){var i,n;if(t.isUndef(e.time))throw new Error(\"Tone.Timeline: events must have a time attribute\");return this._iterating?this._toAdd.push(e):(i=this._search(e.time),this._timeline.splice(i+1,0,e),this.length>this.memory&&(n=this.length-this.memory,this._timeline.splice(0,n))),this},t.Timeline.prototype.remove=function(t){if(this._iterating)this._toRemove.push(t);else{var e=this._timeline.indexOf(t);-1!==e&&this._timeline.splice(e,1)}return this},t.Timeline.prototype.get=function(e,i){i=t.defaultArg(i,\"time\");var n=this._search(e,i);return-1!==n?this._timeline[n]:null},t.Timeline.prototype.peek=function(){return this._timeline[0]},t.Timeline.prototype.shift=function(){return this._timeline.shift()},t.Timeline.prototype.getAfter=function(e,i){i=t.defaultArg(i,\"time\");var n=this._search(e,i);return n+1<this._timeline.length?this._timeline[n+1]:null},t.Timeline.prototype.getBefore=function(e,i){var n,s;return i=t.defaultArg(i,\"time\"),(n=this._timeline.length)>0&&this._timeline[n-1][i]<e?this._timeline[n-1]:(s=this._search(e,i),s-1>=0?this._timeline[s-1]:null)},t.Timeline.prototype.cancel=function(t){var e,i;if(this._timeline.length>1)if((e=this._search(t))>=0)if(this._timeline[e].time===t){for(i=e;i>=0&&this._timeline[i].time===t;i--)e=i;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[];else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},t.Timeline.prototype.cancelBefore=function(t){var e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this},t.Timeline.prototype.previousEvent=function(t){var e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null},t.Timeline.prototype._search=function(e,i){var n,s,o,r,a,l,h,u;if(0===this._timeline.length)return-1;if(i=t.defaultArg(i,\"time\"),n=0,s=this._timeline.length,o=s,s>0&&this._timeline[s-1][i]<=e)return s-1;for(;n<o;){if(r=Math.floor(n+(o-n)/2),a=this._timeline[r],l=this._timeline[r+1],a[i]===e){for(h=r;h<this._timeline.length;h++)u=this._timeline[h],u[i]===e&&(r=h);return r}if(a[i]<e&&l[i]>e)return r;a[i]>e?o=r:n=r+1}return-1},t.Timeline.prototype._iterate=function(e,i,n){this._iterating=!0,i=t.defaultArg(i,0),n=t.defaultArg(n,this._timeline.length-1);for(var s=i;s<=n;s++)e.call(this,this._timeline[s]);this._iterating=!1,this._toRemove.forEach(function(t){this.remove(t)}.bind(this)),this._toRemove=[],this._toAdd.forEach(function(t){this.add(t)}.bind(this)),this._toAdd=[]},t.Timeline.prototype.forEach=function(t){return this._iterate(t),this},t.Timeline.prototype.forEachBefore=function(t,e){var i=this._search(t);return-1!==i&&this._iterate(e,0,i),this},t.Timeline.prototype.forEachAfter=function(t,e){var i=this._search(t);return this._iterate(e,i+1),this},t.Timeline.prototype.forEachFrom=function(t,e){for(var i=this._search(t);i>=0&&this._timeline[i].time>=t;)i--;return this._iterate(e,i+1),this},t.Timeline.prototype.forEachAtTime=function(t,e){var i=this._search(t);return-1!==i&&this._iterate(function(i){i.time===t&&e.call(this,i)},0,i),this},t.Timeline.prototype.dispose=function(){return t.prototype.dispose.call(this),this._timeline=null,this._toRemove=null,this._toAdd=null,this},t.Timeline}),t(function(t){!window.hasOwnProperty(\"AudioContext\")&&window.hasOwnProperty(\"webkitAudioContext\")&&(window.AudioContext=window.webkitAudioContext),t.Context=function(){var i,n;t.Emitter.call(this),i=t.defaults(arguments,[\"context\"],t.Context),i.context||(i.context=new window.AudioContext),this._context=i.context;for(n in this._context)this._defineProperty(this._context,n);this._latencyHint=i.latencyHint,this._constants={},this.lookAhead=i.lookAhead,this._computedUpdateInterval=0,this._ticker=new e(this.emit.bind(this,\"tick\"),i.clockSource,i.updateInterval),this._timeouts=new t.Timeline,this._timeoutIds=0,this.on(\"tick\",this._timeoutLoop.bind(this))},t.extend(t.Context,t.Emitter),t.Emitter.mixin(t.Context),t.Context.defaults={clockSource:\"worker\",latencyHint:\"interactive\",lookAhead:.1,updateInterval:.03},t.Context.prototype._defineProperty=function(e,i){t.isUndef(this[i])&&Object.defineProperty(this,i,{get:function(){return\"function\"==typeof e[i]?e[i].bind(e):e[i]},set:function(t){e[i]=t}})},t.Context.prototype.now=function(){return this._context.currentTime+this.lookAhead},t.Context.prototype.getConstant=function(t){var e,i,n,s;if(this._constants[t])return this._constants[t];for(e=this._context.createBuffer(1,128,this._context.sampleRate),i=e.getChannelData(0),n=0;n<i.length;n++)i[n]=t;return s=this._context.createBufferSource(),s.channelCount=1,s.channelCountMode=\"explicit\",s.buffer=e,s.loop=!0,s.start(0),this._constants[t]=s,s},t.Context.prototype._timeoutLoop=function(){for(var t=this.now();this._timeouts&&this._timeouts.length&&this._timeouts.peek().time<=t;)this._timeouts.shift().callback()},t.Context.prototype.setTimeout=function(t,e){this._timeoutIds++;var i=this.now();return this._timeouts.add({callback:t,time:i+e,id:this._timeoutIds}),this._timeoutIds},t.Context.prototype.clearTimeout=function(t){return this._timeouts.forEach(function(e){e.id===t&&this.remove(e)}),this},Object.defineProperty(t.Context.prototype,\"updateInterval\",{get:function(){return this._ticker.updateInterval},set:function(t){this._ticker.updateInterval=t}}),Object.defineProperty(t.Context.prototype,\"clockSource\",{get:function(){return this._ticker.type},set:function(t){this._ticker.type=t}}),Object.defineProperty(t.Context.prototype,\"latencyHint\",{get:function(){return this._latencyHint},set:function(e){var i=e;if(this._latencyHint=e,t.isString(e))switch(e){case\"interactive\":i=.1,this._context.latencyHint=e;break;case\"playback\":i=.8,this._context.latencyHint=e;break;case\"balanced\":i=.25,this._context.latencyHint=e;break;case\"fastest\":this._context.latencyHint=\"interactive\",i=.01}this.lookAhead=i,this.updateInterval=i/3}}),t.Context.prototype.dispose=function(){t.Context.emit(\"close\",this),t.Emitter.prototype.dispose.call(this),this._ticker.dispose(),this._ticker=null,this._timeouts.dispose(),this._timeouts=null;for(var e in this._constants)this._constants[e].disconnect();return this._constants=null,this.close(),this};var e=function(e,i,n){this._type=i,this._updateInterval=n,this._callback=t.defaultArg(e,t.noOp),this._createClock()};return e.Type={Worker:\"worker\",Timeout:\"timeout\",Offline:\"offline\"},e.prototype._createWorker=function(){var t,e,i;window.URL=window.URL||window.webkitURL,t=new Blob([\"var timeoutTime = \"+(1e3*this._updateInterval).toFixed(1)+\";self.onmessage = function(msg){\\ttimeoutTime = parseInt(msg.data);};function tick(){\\tsetTimeout(tick, timeoutTime);\\tself.postMessage('tick');}tick();\"]),e=URL.createObjectURL(t),i=new Worker(e),i.onmessage=this._callback.bind(this),this._worker=i},e.prototype._createTimeout=function(){this._timeout=setTimeout(function(){this._createTimeout(),this._callback()}.bind(this),1e3*this._updateInterval)},e.prototype._createClock=function(){if(this._type===e.Type.Worker)try{this._createWorker()}catch(t){this._type=e.Type.Timeout,this._createClock()}else this._type===e.Type.Timeout&&this._createTimeout()},Object.defineProperty(e.prototype,\"updateInterval\",{get:function(){return this._updateInterval},set:function(t){this._updateInterval=Math.max(t,128/44100),this._type===e.Type.Worker&&this._worker.postMessage(Math.max(1e3*t,1))}}),Object.defineProperty(e.prototype,\"type\",{get:function(){return this._type},set:function(t){this._disposeClock(),this._type=t,this._createClock()}}),e.prototype._disposeClock=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this._worker&&(this._worker.terminate(),this._worker.onmessage=null,this._worker=null)},e.prototype.dispose=function(){this._disposeClock(),this._callback=null},t.getContext(function(){function e(e,i,s){if(e.input)s=t.defaultArg(s,0),t.isArray(e.input)?this.connect(e.input[s]):this.connect(e.input,i,s);else try{e instanceof AudioNode?n.call(this,e,i,s):n.call(this,e,i)}catch(t){throw new Error(\"error connecting to node: \"+e+\"\\n\"+t)}}function i(e,i,n){if(e&&e.input&&t.isArray(e.input))n=t.defaultArg(n,0),this.disconnect(e.input[n],i,0);else if(e&&e.input)this.disconnect(e.input,i,n);else try{s.apply(this,arguments)}catch(t){throw new Error(\"error disconnecting node: \"+e+\"\\n\"+t)}}var n=AudioNode.prototype.connect,s=AudioNode.prototype.disconnect;AudioNode.prototype.connect!==e&&(AudioNode.prototype.connect=e,AudioNode.prototype.disconnect=i)}),t.supported?t.context=new t.Context:console.warn(\"This browser does not support Tone.js\"),t.Context}),t(function(t){return t.AudioNode=function(){t.call(this);var e=t.defaults(arguments,[\"context\"],{context:t.context});this._context=e.context},t.extend(t.AudioNode),Object.defineProperty(t.AudioNode.prototype,\"context\",{get:function(){return this._context}}),t.AudioNode.prototype.createInsOuts=function(t,e){1===t?this.input=this.context.createGain():t>1&&(this.input=new Array(t)),1===e?this.output=this.context.createGain():e>1&&(this.output=new Array(e))},Object.defineProperty(t.AudioNode.prototype,\"numberOfInputs\",{get:function(){return this.input?t.isArray(this.input)?this.input.length:1:0}}),Object.defineProperty(t.AudioNode.prototype,\"numberOfOutputs\",{get:function(){return this.output?t.isArray(this.output)?this.output.length:1:0}}),t.AudioNode.prototype.connect=function(e,i,n){return t.isArray(this.output)?(i=t.defaultArg(i,0),this.output[i].connect(e,0,n)):this.output.connect(e,i,n),this},t.AudioNode.prototype.disconnect=function(e,i,n){t.isArray(this.output)?t.isNumber(e)?this.output[e].disconnect():(i=t.defaultArg(i,0),this.output[i].disconnect(e,0,n)):this.output.disconnect.apply(this.output,arguments)},t.AudioNode.prototype.chain=function(){var t,e,i=this;for(t=0;t<arguments.length;t++)e=arguments[t],i.connect(e),i=e;return this},t.AudioNode.prototype.fan=function(){for(var t=0;t<arguments.length;t++)this.connect(arguments[t]);return this},window.AudioNode&&(AudioNode.prototype.chain=t.AudioNode.prototype.chain,AudioNode.prototype.fan=t.AudioNode.prototype.fan),t.AudioNode.prototype.dispose=function(){return t.isUndef(this.input)||(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),t.isUndef(this.output)||(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this._context=null,this},t.AudioNode}),t(function(t){return t.SignalBase=function(){t.AudioNode.call(this)},t.extend(t.SignalBase,t.AudioNode),t.SignalBase.prototype.connect=function(e,i,n){return t.Signal&&t.Signal===e.constructor||t.Param&&t.Param===e.constructor||t.TimelineSignal&&t.TimelineSignal===e.constructor?(e._param.cancelScheduledValues(0),e._param.value=0,e.overridden=!0):e instanceof AudioParam&&(e.cancelScheduledValues(0),e.value=0),t.AudioNode.prototype.connect.call(this,e,i,n),this},t.SignalBase}),t(function(t){return t.WaveShaper=function(e,i){t.SignalBase.call(this),this._shaper=this.input=this.output=this.context.createWaveShaper(),this._curve=null,Array.isArray(e)?this.curve=e:isFinite(e)||t.isUndef(e)?this._curve=new Float32Array(t.defaultArg(e,1024)):t.isFunction(e)&&(this._curve=new Float32Array(t.defaultArg(i,1024)),this.setMap(e))},t.extend(t.WaveShaper,t.SignalBase),t.WaveShaper.prototype.setMap=function(t){var e,i,n;for(e=0,i=this._curve.length;e<i;e++)n=e/(i-1)*2-1,this._curve[e]=t(n,e);return this._shaper.curve=this._curve,this},Object.defineProperty(t.WaveShaper.prototype,\"curve\",{get:function(){return this._shaper.curve},set:function(t){this._curve=new Float32Array(t),this._shaper.curve=this._curve}}),Object.defineProperty(t.WaveShaper.prototype,\"oversample\",{get:function(){return this._shaper.oversample},set:function(t){if(-1===[\"none\",\"2x\",\"4x\"].indexOf(t))throw new RangeError(\"Tone.WaveShaper: oversampling must be either 'none', '2x', or '4x'\");this._shaper.oversample=t}}),t.WaveShaper.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._shaper.disconnect(),this._shaper=null,this._curve=null,this},t.WaveShaper}),t(function(t){return t.TimeBase=function(e,i){if(!(this instanceof t.TimeBase))return new t.TimeBase(e,i);if(this._expr=this._noOp,e instanceof t.TimeBase)this.copy(e);else if(!t.isUndef(i)||t.isNumber(e)){i=t.defaultArg(i,this._defaultUnits);var n=this._primaryExpressions[i].method;this._expr=n.bind(this,e)}else t.isString(e)?this.set(e):t.isUndef(e)&&(this._expr=this._defaultExpr())},t.extend(t.TimeBase),t.TimeBase.prototype.set=function(t){return this._expr=this._parseExprString(t),this},t.TimeBase.prototype.clone=function(){var t=new this.constructor;return t.copy(this),t},t.TimeBase.prototype.copy=function(t){var e=t._expr();return this.set(e)},t.TimeBase.prototype._primaryExpressions={n:{regexp:/^(\\d+)n/i,method:function(t){return t=parseInt(t),1===t?this._beatsToUnits(this._timeSignature()):this._beatsToUnits(4/t)}},t:{regexp:/^(\\d+)t/i,method:function(t){return t=parseInt(t),this._beatsToUnits(8/(3*parseInt(t)))}},m:{regexp:/^(\\d+)m/i,method:function(t){return this._beatsToUnits(parseInt(t)*this._timeSignature())}},i:{regexp:/^(\\d+)i/i,method:function(t){return this._ticksToUnits(parseInt(t))}},hz:{regexp:/^(\\d+(?:\\.\\d+)?)hz/i,method:function(t){return this._frequencyToUnits(parseFloat(t))}},tr:{regexp:/^(\\d+(?:\\.\\d+)?):(\\d+(?:\\.\\d+)?):?(\\d+(?:\\.\\d+)?)?/,method:function(t,e,i){var n=0;return t&&\"0\"!==t&&(n+=this._beatsToUnits(this._timeSignature()*parseFloat(t))),e&&\"0\"!==e&&(n+=this._beatsToUnits(parseFloat(e))),i&&\"0\"!==i&&(n+=this._beatsToUnits(parseFloat(i)/4)),n}},s:{regexp:/^(\\d+(?:\\.\\d+)?s)/,method:function(t){return this._secondsToUnits(parseFloat(t))}},samples:{regexp:/^(\\d+)samples/,method:function(t){return parseInt(t)/this.context.sampleRate}},default:{regexp:/^(\\d+(?:\\.\\d+)?)/,method:function(t){return this._primaryExpressions[this._defaultUnits].method.call(this,t)}}},t.TimeBase.prototype._binaryExpressions={\"+\":{regexp:/^\\+/,precedence:2,method:function(t,e){return t()+e()}},\"-\":{regexp:/^\\-/,precedence:2,method:function(t,e){return t()-e()}},\"*\":{regexp:/^\\*/,precedence:1,method:function(t,e){return t()*e()}},\"/\":{regexp:/^\\//,precedence:1,method:function(t,e){return t()/e()}}},t.TimeBase.prototype._unaryExpressions={neg:{regexp:/^\\-/,method:function(t){return-t()}}},t.TimeBase.prototype._syntaxGlue={\"(\":{regexp:/^\\(/},\")\":{regexp:/^\\)/}},t.TimeBase.prototype._tokenize=function(t){for(var e,i=-1,n=[];t.length>0;)t=t.trim(),e=function(t,e){var i,n,s,o,r,a,l=[\"_binaryExpressions\",\"_unaryExpressions\",\"_primaryExpressions\",\"_syntaxGlue\"];for(i=0;i<l.length;i++){n=e[l[i]];for(s in n)if(o=n[s],r=o.regexp,null!==(a=t.match(r)))return{method:o.method,precedence:o.precedence,regexp:o.regexp,value:a[0]}}throw new SyntaxError(\"Tone.TimeBase: Unexpected token \"+t)}(t,this),n.push(e),t=t.substr(e.value.length);return{next:function(){return n[++i]},peek:function(){return n[i+1]}}},t.TimeBase.prototype._matchGroup=function(e,i,n){var s,o,r=!1;if(!t.isUndef(e))for(s in i)if(o=i[s],o.regexp.test(e.value)){if(t.isUndef(n))return o;if(o.precedence===n)return o}return r},t.TimeBase.prototype._parseBinary=function(e,i){var n,s;for(t.isUndef(i)&&(i=2),n=i<0?this._parseUnary(e):this._parseBinary(e,i-1),s=e.peek();s&&this._matchGroup(s,this._binaryExpressions,i);)s=e.next(),n=s.method.bind(this,n,this._parseBinary(e,i-1)),s=e.peek();return n},t.TimeBase.prototype._parseUnary=function(t){var e,i=t.peek(),n=this._matchGroup(i,this._unaryExpressions);return n?(i=t.next(),e=this._parseUnary(t),n.method.bind(this,e)):this._parsePrimary(t)},t.TimeBase.prototype._parsePrimary=function(e){var i,n,s=e.peek();if(t.isUndef(s))throw new SyntaxError(\"Tone.TimeBase: Unexpected end of expression\");if(this._matchGroup(s,this._primaryExpressions))return s=e.next(),n=s.value.match(s.regexp),s.method.bind(this,n[1],n[2],n[3]);if(s&&\"(\"===s.value){if(e.next(),i=this._parseBinary(e),!(s=e.next())||\")\"!==s.value)throw new SyntaxError(\"Expected )\");return i}throw new SyntaxError(\"Tone.TimeBase: Cannot process token \"+s.value)},t.TimeBase.prototype._parseExprString=function(e){var i;return t.isString(e)||(e=e.toString()),i=this._tokenize(e),this._parseBinary(i)},t.TimeBase.prototype._noOp=function(){return 0},t.TimeBase.prototype._defaultExpr=function(){return this._noOp},t.TimeBase.prototype._defaultUnits=\"s\",t.TimeBase.prototype._frequencyToUnits=function(t){return 1/t},t.TimeBase.prototype._beatsToUnits=function(e){return 60/t.Transport.bpm.value*e},t.TimeBase.prototype._secondsToUnits=function(t){return t},t.TimeBase.prototype._ticksToUnits=function(e){return e*(this._beatsToUnits(1)/t.Transport.PPQ)},t.TimeBase.prototype._timeSignature=function(){return t.Transport.timeSignature},t.TimeBase.prototype._pushExpr=function(e,i,n){return e instanceof t.TimeBase||(e=new this.constructor(e,n)),this._expr=this._binaryExpressions[i].method.bind(this,this._expr,e._expr),this},t.TimeBase.prototype.add=function(t,e){return this._pushExpr(t,\"+\",e)},t.TimeBase.prototype.sub=function(t,e){return this._pushExpr(t,\"-\",e)},t.TimeBase.prototype.mult=function(t,e){return this._pushExpr(t,\"*\",e)},t.TimeBase.prototype.div=function(t,e){return this._pushExpr(t,\"/\",e)},t.TimeBase.prototype.valueOf=function(){return this._expr()},t.TimeBase.prototype.dispose=function(){this._expr=null},t.TimeBase}),t(function(t){return t.Time=function(e,i){if(!(this instanceof t.Time))return new t.Time(e,i);this._plusNow=!1,t.TimeBase.call(this,e,i)},t.extend(t.Time,t.TimeBase),t.Time.prototype._unaryExpressions=Object.create(t.TimeBase.prototype._unaryExpressions),t.Time.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(e){return t.Transport.nextSubdivision(e())}},t.Time.prototype._unaryExpressions.now={regexp:/^\\+/,method:function(t){return this._plusNow=!0,t()}},t.Time.prototype.quantize=function(e,i){return i=t.defaultArg(i,1),this._expr=function(t,e,i){var n,s,o;return t=t(),e=e.toSeconds(),n=Math.round(t/e),s=n*e,o=s-t,t+o*i}.bind(this,this._expr,new this.constructor(e),i),this},t.Time.prototype.addNow=function(){return this._plusNow=!0,this},t.Time.prototype._defaultExpr=function(){return this._plusNow=!0,this._noOp},t.Time.prototype.copy=function(e){return t.TimeBase.prototype.copy.call(this,e),this._plusNow=e._plusNow,this},t.Time.prototype.toNotation=function(){var t=this.toSeconds(),e=[\"1m\",\"2n\",\"4n\",\"8n\",\"16n\",\"32n\",\"64n\",\"128n\"],i=this._toNotationHelper(t,e),n=[\"1m\",\"2n\",\"2t\",\"4n\",\"4t\",\"8n\",\"8t\",\"16n\",\"16t\",\"32n\",\"32t\",\"64n\",\"64t\",\"128n\"],s=this._toNotationHelper(t,n);return s.split(\"+\").length<i.split(\"+\").length?s:i},t.Time.prototype._toNotationHelper=function(t,e){var i,n,s,o,r=this._notationToUnits(e[e.length-1]),a=\"\";for(i=0;i<e.length;i++)if(n=this._notationToUnits(e[i]),s=t/n,o=1e-6,1-s%1<o&&(s+=o),(s=Math.floor(s))>0){if(a+=1===s?e[i]:s.toString()+\"*\"+e[i],(t-=s*n)<r)break;a+=\" + \"}return\"\"===a&&(a=\"0\"),a},t.Time.prototype._notationToUnits=function(t){var e,i,n,s=this._primaryExpressions,o=[s.n,s.t,s.m];for(e=0;e<o.length;e++)if(i=o[e],n=t.match(i.regexp))return i.method.call(this,n[1])},t.Time.prototype.toBarsBeatsSixteenths=function(){var t,e=this._beatsToUnits(1),i=this.toSeconds()/e,n=Math.floor(i/this._timeSignature()),s=i%1*4;return i=Math.floor(i)%this._timeSignature(),s=s.toString(),s.length>3&&(s=parseFloat(parseFloat(s).toFixed(3))),t=[n,i,s],t.join(\":\")},t.Time.prototype.toTicks=function(){var e=this._beatsToUnits(1),i=this.valueOf()/e;return Math.floor(i*t.Transport.PPQ)},t.Time.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},t.Time.prototype.toFrequency=function(){return 1/this.toSeconds()},t.Time.prototype.toSeconds=function(){return this.valueOf()},t.Time.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},t.Time.prototype.valueOf=function(){return this._expr()+(this._plusNow?this.now():0)},t.Time}),t(function(t){var e,i;return t.Frequency=function(e,i){if(!(this instanceof t.Frequency))return new t.Frequency(e,i);t.TimeBase.call(this,e,i)},t.extend(t.Frequency,t.TimeBase),t.Frequency.prototype._primaryExpressions=Object.create(t.TimeBase.prototype._primaryExpressions),t.Frequency.prototype._primaryExpressions.midi={regexp:/^(\\d+(?:\\.\\d+)?midi)/,method:function(t){return this.midiToFrequency(t)}},t.Frequency.prototype._primaryExpressions.note={regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(t,i){var n=e[t.toLowerCase()],s=n+12*(parseInt(i)+1);return this.midiToFrequency(s)}},t.Frequency.prototype._primaryExpressions.tr={regexp:/^(\\d+(?:\\.\\d+)?):(\\d+(?:\\.\\d+)?):?(\\d+(?:\\.\\d+)?)?/,method:function(t,e,i){var n=1;return t&&\"0\"!==t&&(n*=this._beatsToUnits(this._timeSignature()*parseFloat(t))),e&&\"0\"!==e&&(n*=this._beatsToUnits(parseFloat(e))),i&&\"0\"!==i&&(n*=this._beatsToUnits(parseFloat(i)/4)),n}},t.Frequency.prototype.transpose=function(e){return this._expr=function(e,i){return e()*t.intervalToFrequencyRatio(i)}.bind(this,this._expr,e),this},t.Frequency.prototype.harmonize=function(e){return this._expr=function(e,i){var n,s=e(),o=[];for(n=0;n<i.length;n++)o[n]=s*t.intervalToFrequencyRatio(i[n]);return o}.bind(this,this._expr,e),this},t.Frequency.prototype.toMidi=function(){return this.frequencyToMidi(this.valueOf())},t.Frequency.prototype.toNote=function(){var e=this.valueOf(),n=Math.log(e/t.Frequency.A4)/Math.LN2,s=Math.round(12*n)+57,o=Math.floor(s/12);return o<0&&(s+=-12*o),i[s%12]+o.toString()},t.Frequency.prototype.toSeconds=function(){return 1/this.valueOf()},t.Frequency.prototype.toFrequency=function(){return this.valueOf()},t.Frequency.prototype.toTicks=function(){var e=this._beatsToUnits(1),i=this.valueOf()/e;return Math.floor(i*t.Transport.PPQ)},t.Frequency.prototype._frequencyToUnits=function(t){return t},t.Frequency.prototype._ticksToUnits=function(e){return 1/(60*e/(t.Transport.bpm.value*t.Transport.PPQ))},t.Frequency.prototype._beatsToUnits=function(e){return 1/t.TimeBase.prototype._beatsToUnits.call(this,e)},t.Frequency.prototype._secondsToUnits=function(t){return 1/t},t.Frequency.prototype._defaultUnits=\"hz\",e={cbb:-2,cb:-1,c:0,\"c#\":1,cx:2,dbb:0,db:1,d:2,\"d#\":3,dx:4,ebb:2,eb:3,e:4,\"e#\":5,ex:6,fbb:3,fb:4,f:5,\"f#\":6,fx:7,gbb:5,gb:6,g:7,\"g#\":8,gx:9,abb:7,ab:8,a:9,\"a#\":10,ax:11,bbb:9,bb:10,b:11,\"b#\":12,bx:13},i=[\"C\",\"C#\",\"D\",\"D#\",\"E\",\"F\",\"F#\",\"G\",\"G#\",\"A\",\"A#\",\"B\"],t.Frequency.A4=440,t.Frequency.prototype.midiToFrequency=function(e){return t.Frequency.A4*Math.pow(2,(e-69)/12)},t.Frequency.prototype.frequencyToMidi=function(e){return 69+Math.round(12*Math.log(e/t.Frequency.A4)/Math.LN2)},t.Frequency}),t(function(t){return t.TransportTime=function(e,i){if(!(this instanceof t.TransportTime))return new t.TransportTime(e,i);t.Time.call(this,e,i)},t.extend(t.TransportTime,t.Time),t.TransportTime.prototype._unaryExpressions=Object.create(t.Time.prototype._unaryExpressions),t.TransportTime.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(e){var i=this._secondsToTicks(e()),n=Math.ceil(t.Transport.ticks/i);return this._ticksToUnits(n*i)}},t.TransportTime.prototype._secondsToTicks=function(e){var i=this._beatsToUnits(1),n=e/i;return Math.round(n*t.Transport.PPQ)},t.TransportTime.prototype.valueOf=function(){return this._secondsToTicks(this._expr())+(this._plusNow?t.Transport.ticks:0)},t.TransportTime.prototype.toTicks=function(){return this.valueOf()},t.TransportTime.prototype.toSeconds=function(){return this._expr()+(this._plusNow?t.Transport.seconds:0)},t.TransportTime.prototype.toFrequency=function(){return 1/this.toSeconds()},t.TransportTime}),t(function(t){return t.Type={Default:\"number\",Time:\"time\",Frequency:\"frequency\",TransportTime:\"transportTime\",Ticks:\"ticks\",NormalRange:\"normalRange\",AudioRange:\"audioRange\",Decibels:\"db\",Interval:\"interval\",BPM:\"bpm\",Positive:\"positive\",Gain:\"gain\",Cents:\"cents\",Degrees:\"degrees\",MIDI:\"midi\",BarsBeatsSixteenths:\"barsBeatsSixteenths\",Samples:\"samples\",Hertz:\"hertz\",Note:\"note\",Milliseconds:\"milliseconds\",Seconds:\"seconds\",Notation:\"notation\"},t.prototype.toSeconds=function(e){return t.isNumber(e)?e:t.isUndef(e)?this.now():t.isString(e)?new t.Time(e).toSeconds():e instanceof t.TimeBase?e.toSeconds():void 0},t.prototype.toFrequency=function(e){return t.isNumber(e)?e:t.isString(e)||t.isUndef(e)?new t.Frequency(e).valueOf():e instanceof t.TimeBase?e.toFrequency():void 0},t.prototype.toTicks=function(e){return t.isNumber(e)||t.isString(e)?new t.TransportTime(e).toTicks():t.isUndef(e)?t.Transport.ticks:e instanceof t.TimeBase?e.toTicks():void 0},t}),t(function(t){return t.Param=function(){var e=t.defaults(arguments,[\"param\",\"units\",\"convert\"],t.Param);t.AudioNode.call(this),this._param=this.input=e.param,this.units=e.units,this.convert=e.convert,this.overridden=!1,this._lfo=null,t.isObject(e.lfo)?this.value=e.lfo:t.isUndef(e.value)||(this.value=e.value)},t.extend(t.Param,t.AudioNode),t.Param.defaults={units:t.Type.Default,convert:!0,param:void 0},Object.defineProperty(t.Param.prototype,\"value\",{get:function(){return this._toUnits(this._param.value)},set:function(e){if(t.isObject(e)){if(t.isUndef(t.LFO))throw new Error(\"Include 'Tone.LFO' to use an LFO as a Param value.\");this._lfo&&this._lfo.dispose(),this._lfo=new t.LFO(e).start(),this._lfo.connect(this.input)}else{var i=this._fromUnits(e);this._param.cancelScheduledValues(0),this._param.value=i}}}),t.Param.prototype._fromUnits=function(e){if(!this.convert&&!t.isUndef(this.convert))return e;switch(this.units){case t.Type.Time:return this.toSeconds(e);case t.Type.Frequency:return this.toFrequency(e);case t.Type.Decibels:return t.dbToGain(e);case t.Type.NormalRange:return Math.min(Math.max(e,0),1);case t.Type.AudioRange:return Math.min(Math.max(e,-1),1);case t.Type.Positive:return Math.max(e,0);default:return e}},t.Param.prototype._toUnits=function(e){if(!this.convert&&!t.isUndef(this.convert))return e;switch(this.units){case t.Type.Decibels:return t.gainToDb(e);default:return e}},t.Param.prototype._minOutput=1e-5,t.Param.prototype.setValueAtTime=function(e,i){return i=this.toSeconds(i),t.isPast(i),this._param.setValueAtTime(this._fromUnits(e),i),this\n},t.Param.prototype.setRampPoint=function(e){e=t.defaultArg(e,this.now()),this.cancelAndHoldAtTime(this.context.currentTime);var i=this._param.value;return 0===i&&(i=this._minOutput),this._param.setValueAtTime(i,e),this},t.Param.prototype.linearRampToValueAtTime=function(e,i){return e=this._fromUnits(e),i=this.toSeconds(i),t.isPast(i),this._param.linearRampToValueAtTime(e,i),this},t.Param.prototype.exponentialRampToValueAtTime=function(e,i){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),i=this.toSeconds(i),t.isPast(i),this._param.exponentialRampToValueAtTime(e,i),this},t.Param.prototype.exponentialRampTo=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(e)),this},t.Param.prototype.linearRampTo=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(e)),this},t.Param.prototype.getTimeConstant=function(t){return Math.log(this.toSeconds(t)+1)/Math.log(200)},t.Param.prototype.targetRampTo=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.setTargetAtTime(t,i,this.getTimeConstant(e)),this},t.Param.prototype.setTargetAtTime=function(t,e,i){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),i=Math.max(this._minOutput,i),this._param.setTargetAtTime(t,this.toSeconds(e),i),this},t.Param.prototype.setValueCurveAtTime=function(t,e,i){var n,s;for(i=this.toSeconds(i),e=this.toSeconds(e),this.setValueAtTime(t[0],e),n=i/(t.length-1),s=1;s<t.length;s++)this._param.linearRampToValueAtTime(this._fromUnits(t[s]),e+s*n);return this},t.Param.prototype.cancelScheduledValues=function(t){return this._param.cancelScheduledValues(this.toSeconds(t)),this},t.Param.prototype.cancelAndHoldAtTime=function(t){var e,i;return t=this.toSeconds(t),this._param.cancelAndHoldAtTime?this._param.cancelAndHoldAtTime(t):(e=this.context.currentTime,this._param.cancelScheduledValues(e),i=this._param.value,0===i&&(i=this._minOutput),this._param.setValueAtTime(i,e+this.sampleTime)),this},t.Param.prototype.rampTo=function(e,i,n){return i=t.defaultArg(i,.1),this.units===t.Type.Frequency||this.units===t.Type.BPM||this.units===t.Type.Decibels?this.exponentialRampTo(e,i,n):this.linearRampTo(e,i,n),this},Object.defineProperty(t.Param.prototype,\"lfo\",{get:function(){return this._lfo}}),t.Param.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._param=null,this._lfo&&(this._lfo.dispose(),this._lfo=null),this},t.Param}),t(function(t){return window.GainNode&&!AudioContext.prototype.createGain&&(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),t.Gain=function(){var e=t.defaults(arguments,[\"gain\",\"units\"],t.Gain);t.AudioNode.call(this),this.input=this.output=this._gainNode=this.context.createGain(),this.gain=new t.Param({param:this._gainNode.gain,units:e.units,value:e.gain,convert:e.convert}),this._readOnly(\"gain\")},t.extend(t.Gain,t.AudioNode),t.Gain.defaults={gain:1,convert:!0},t.Gain.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._gainNode.disconnect(),this._gainNode=null,this._writable(\"gain\"),this.gain.dispose(),this.gain=null},t.Gain}),t(function(t){return t.Signal=function(){var e=t.defaults(arguments,[\"value\",\"units\"],t.Signal),i=t.context.createGain();e.param=i.gain,t.Param.call(this,e),this.output=i,this.input=this._param=this.output.gain,this.context.getConstant(1).connect(this.output)},t.extend(t.Signal,t.Param),t.Signal.defaults={value:0,units:t.Type.Default,convert:!0},t.Signal.prototype.connect=t.SignalBase.prototype.connect,t.Signal.prototype.dispose=function(){return t.Param.prototype.dispose.call(this),this},t.Signal}),t(function(t){return t.TimelineSignal=function(){var e=t.defaults(arguments,[\"value\",\"units\"],t.Signal);t.Signal.call(this,e),this._events=new t.Timeline(100),this._initial=this._fromUnits(this._param.value),this.value=e.value,delete this.input},t.extend(t.TimelineSignal,t.Signal),t.TimelineSignal.Type={Linear:\"linear\",Exponential:\"exponential\",Target:\"target\",Set:\"set\"},Object.defineProperty(t.TimelineSignal.prototype,\"value\",{get:function(){var t=this.now(),e=this.getValueAtTime(t);return this._toUnits(e)},set:function(t){if(this._events){var e=this._fromUnits(t);this._initial=e,this.cancelScheduledValues(),this._param.value=e}}}),t.TimelineSignal.prototype.setValueAtTime=function(e,i){return e=this._fromUnits(e),i=this.toSeconds(i),this._events.add({type:t.TimelineSignal.Type.Set,value:e,time:i}),this._param.setValueAtTime(e,i),this},t.TimelineSignal.prototype.linearRampToValueAtTime=function(e,i){return e=this._fromUnits(e),i=this.toSeconds(i),this._events.add({type:t.TimelineSignal.Type.Linear,value:e,time:i}),this._param.linearRampToValueAtTime(e,i),this},t.TimelineSignal.prototype.exponentialRampToValueAtTime=function(e,i){var n,s;return i=this.toSeconds(i),n=this._searchBefore(i),n&&0===n.value&&this.setValueAtTime(this._minOutput,n.time),e=this._fromUnits(e),s=Math.max(e,this._minOutput),this._events.add({type:t.TimelineSignal.Type.Exponential,value:s,time:i}),e<this._minOutput?(this._param.exponentialRampToValueAtTime(this._minOutput,i-this.sampleTime),this.setValueAtTime(0,i)):this._param.exponentialRampToValueAtTime(e,i),this},t.TimelineSignal.prototype.setTargetAtTime=function(e,i,n){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),n=Math.max(this._minOutput,n),i=this.toSeconds(i),this._events.add({type:t.TimelineSignal.Type.Target,value:e,time:i,constant:n}),this._param.setTargetAtTime(e,i,n),this},t.TimelineSignal.prototype.setValueCurveAtTime=function(e,i,n,s){var o,r;for(s=t.defaultArg(s,1),n=this.toSeconds(n),i=this.toSeconds(i),o=n/(e.length-1),this.setValueAtTime(e[0]*s,i),r=1;r<e.length;r++)this.linearRampToValueAtTime(e[r]*s,i+r*o);return this},t.TimelineSignal.prototype.cancelScheduledValues=function(t){return t=this.toSeconds(t),this._events.cancel(t),this._param.cancelScheduledValues(t),this},t.TimelineSignal.prototype.cancelAndHoldAtTime=function(t){return this.setRampPoint(this.toSeconds(t)),this},t.TimelineSignal.prototype.setRampPoint=function(e){var i,n,s;return e=this.toSeconds(e),i=this._toUnits(this.getValueAtTime(e)),n=this._searchBefore(e),n&&n.time===e?this.cancelScheduledValues(e+this.sampleTime):(s=this._searchAfter(e))&&(this.cancelScheduledValues(e),s.type===t.TimelineSignal.Type.Linear?this.linearRampToValueAtTime(i,e):s.type===t.TimelineSignal.Type.Exponential&&this.exponentialRampToValueAtTime(i,e)),this.setValueAtTime(i,e),this},t.TimelineSignal.prototype.linearRampToValueBetween=function(t,e,i){return this.setRampPoint(e),this.linearRampToValueAtTime(t,i),this},t.TimelineSignal.prototype.exponentialRampToValueBetween=function(t,e,i){return this.setRampPoint(e),this.exponentialRampToValueAtTime(t,i),this},t.TimelineSignal.prototype._searchBefore=function(t){return this._events.get(t)},t.TimelineSignal.prototype._searchAfter=function(t){return this._events.getAfter(t)},t.TimelineSignal.prototype.getValueAtTime=function(e){var i,n,s,o,r;return e=this.toSeconds(e),i=this._searchAfter(e),n=this._searchBefore(e),s=this._initial,null===n?s=this._initial:n.type===t.TimelineSignal.Type.Target?(o=this._events.getBefore(n.time),r=null===o?this._initial:o.value,s=this._exponentialApproach(n.time,r,n.value,n.constant,e)):s=null===i?n.value:i.type===t.TimelineSignal.Type.Linear?this._linearInterpolate(n.time,n.value,i.time,i.value,e):i.type===t.TimelineSignal.Type.Exponential?this._exponentialInterpolate(n.time,n.value,i.time,i.value,e):n.value,s},t.TimelineSignal.prototype.connect=t.SignalBase.prototype.connect,t.TimelineSignal.prototype._exponentialApproach=function(t,e,i,n,s){return i+(e-i)*Math.exp(-(s-t)/n)},t.TimelineSignal.prototype._linearInterpolate=function(t,e,i,n,s){return e+(s-t)/(i-t)*(n-e)},t.TimelineSignal.prototype._exponentialInterpolate=function(t,e,i,n,s){return(e=Math.max(this._minOutput,e))*Math.pow(n/e,(s-t)/(i-t))},t.TimelineSignal.prototype.dispose=function(){t.Signal.prototype.dispose.call(this),this._events.dispose(),this._events=null},t.TimelineSignal}),t(function(t){return t.Pow=function(e){t.SignalBase.call(this),this._exp=t.defaultArg(e,1),this._expScaler=this.input=this.output=new t.WaveShaper(this._expFunc(this._exp),8192)},t.extend(t.Pow,t.SignalBase),Object.defineProperty(t.Pow.prototype,\"value\",{get:function(){return this._exp},set:function(t){this._exp=t,this._expScaler.setMap(this._expFunc(this._exp))}}),t.Pow.prototype._expFunc=function(t){return function(e){return Math.pow(Math.abs(e),t)}},t.Pow.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._expScaler.dispose(),this._expScaler=null,this},t.Pow}),t(function(t){return t.Envelope=function(){var e=t.defaults(arguments,[\"attack\",\"decay\",\"sustain\",\"release\"],t.Envelope);t.AudioNode.call(this),this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this._attackCurve=\"linear\",this._releaseCurve=\"exponential\",this._sig=this.output=new t.TimelineSignal,this._sig.setValueAtTime(0,0),this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve},t.extend(t.Envelope,t.AudioNode),t.Envelope.defaults={attack:.01,decay:.1,sustain:.5,release:1,attackCurve:\"linear\",releaseCurve:\"exponential\"},Object.defineProperty(t.Envelope.prototype,\"value\",{get:function(){return this.getValueAtTime(this.now())}}),Object.defineProperty(t.Envelope.prototype,\"attackCurve\",{get:function(){if(t.isString(this._attackCurve))return this._attackCurve;if(t.isArray(this._attackCurve)){for(var e in t.Envelope.Type)if(t.Envelope.Type[e].In===this._attackCurve)return e;return this._attackCurve}},set:function(e){if(t.Envelope.Type.hasOwnProperty(e)){var i=t.Envelope.Type[e];t.isObject(i)?this._attackCurve=i.In:this._attackCurve=i}else{if(!t.isArray(e))throw new Error(\"Tone.Envelope: invalid curve: \"+e);this._attackCurve=e}}}),Object.defineProperty(t.Envelope.prototype,\"releaseCurve\",{get:function(){if(t.isString(this._releaseCurve))return this._releaseCurve;if(t.isArray(this._releaseCurve)){for(var e in t.Envelope.Type)if(t.Envelope.Type[e].Out===this._releaseCurve)return e;return this._releaseCurve}},set:function(e){if(t.Envelope.Type.hasOwnProperty(e)){var i=t.Envelope.Type[e];t.isObject(i)?this._releaseCurve=i.Out:this._releaseCurve=i}else{if(!t.isArray(e))throw new Error(\"Tone.Envelope: invalid curve: \"+e);this._releaseCurve=e}}}),t.Envelope.prototype.triggerAttack=function(e,i){var n,s,o,r,a,l,h,u,c;return e=this.toSeconds(e),n=this.toSeconds(this.attack),s=n,o=this.toSeconds(this.decay),i=t.defaultArg(i,1),r=this.getValueAtTime(e),r>0&&(a=1/s,l=1-r,s=l/a),\"linear\"===this._attackCurve?this._sig.linearRampTo(i,s,e):\"exponential\"===this._attackCurve?this._sig.targetRampTo(i,s,e):s>0&&(this._sig.setRampPoint(e),h=this._attackCurve,s<n&&(u=1-s/n,c=Math.floor(u*this._attackCurve.length),h=this._attackCurve.slice(c),h[0]=r),this._sig.setValueCurveAtTime(h,e,s,i)),this._sig.targetRampTo(i*this.sustain,o,s+e),this},t.Envelope.prototype.triggerRelease=function(e){var i,n,s;return e=this.toSeconds(e),i=this.getValueAtTime(e),i>0&&(n=this.toSeconds(this.release),\"linear\"===this._releaseCurve?this._sig.linearRampTo(0,n,e):\"exponential\"===this._releaseCurve?this._sig.targetRampTo(0,n,e):(s=this._releaseCurve,t.isArray(s)&&(this._sig.setRampPoint(e),this._sig.setValueCurveAtTime(s,e,n,i)))),this},t.Envelope.prototype.getValueAtTime=function(t){return this._sig.getValueAtTime(t)},t.Envelope.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),this.triggerAttack(e,i),this.triggerRelease(e+this.toSeconds(t)),this},t.Envelope.prototype.cancel=function(t){return this._sig.cancelScheduledValues(t),this},t.Envelope.prototype.connect=t.Signal.prototype.connect,function(){function e(t){var e,i=new Array(t.length);for(e=0;e<t.length;e++)i[e]=1-t[e];return i}var i,n,s,o,r,a,l,h,u,c,p,f=128,d=[];for(i=0;i<f;i++)d[i]=Math.sin(i/(f-1)*(Math.PI/2));for(s=[],o=6.4,i=0;i<f-1;i++)n=i/(f-1),r=Math.sin(n*(2*Math.PI)*o-Math.PI/2)+1,s[i]=r/10+.83*n;for(s[f-1]=1,a=[],l=5,i=0;i<f;i++)a[i]=Math.ceil(i/(f-1)*l)/l;for(h=[],i=0;i<f;i++)n=i/(f-1),h[i]=.5*(1-Math.cos(Math.PI*n));for(u=[],i=0;i<f;i++)n=i/(f-1),c=4*Math.pow(n,3)+.2,p=Math.cos(c*Math.PI*2*n),u[i]=Math.abs(p*(1-n));t.Envelope.Type={linear:\"linear\",exponential:\"exponential\",bounce:{In:e(u),Out:u},cosine:{In:d,Out:function(t){return t.slice(0).reverse()}(d)},step:{In:a,Out:e(a)},ripple:{In:s,Out:e(s)},sine:{In:h,Out:e(h)}}}(),t.Envelope.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._sig.dispose(),this._sig=null,this._attackCurve=null,this._releaseCurve=null,this},t.Envelope}),t(function(t){return t.AmplitudeEnvelope=function(){t.Envelope.apply(this,arguments),this.input=this.output=new t.Gain,this._sig.connect(this.output.gain)},t.extend(t.AmplitudeEnvelope,t.Envelope),t.AmplitudeEnvelope.prototype.dispose=function(){return t.Envelope.prototype.dispose.call(this),this},t.AmplitudeEnvelope}),t(function(t){return window.AnalyserNode&&!AnalyserNode.prototype.getFloatTimeDomainData&&(AnalyserNode.prototype.getFloatTimeDomainData=function(t){var e,i=new Uint8Array(t.length);for(this.getByteTimeDomainData(i),e=0;e<i.length;e++)t[e]=(i[e]-128)/128}),t.Analyser=function(){var e=t.defaults(arguments,[\"type\",\"size\"],t.Analyser);t.AudioNode.call(this),this._analyser=this.input=this.output=this.context.createAnalyser(),this._type=e.type,this._buffer=null,this.size=e.size,this.type=e.type},t.extend(t.Analyser,t.AudioNode),t.Analyser.defaults={size:1024,type:\"fft\",smoothing:.8},t.Analyser.Type={Waveform:\"waveform\",FFT:\"fft\"},t.Analyser.prototype.getValue=function(){return this._type===t.Analyser.Type.FFT?this._analyser.getFloatFrequencyData(this._buffer):this._type===t.Analyser.Type.Waveform&&this._analyser.getFloatTimeDomainData(this._buffer),this._buffer},Object.defineProperty(t.Analyser.prototype,\"size\",{get:function(){return this._analyser.frequencyBinCount},set:function(t){this._analyser.fftSize=2*t,this._buffer=new Float32Array(t)}}),Object.defineProperty(t.Analyser.prototype,\"type\",{get:function(){return this._type},set:function(e){if(e!==t.Analyser.Type.Waveform&&e!==t.Analyser.Type.FFT)throw new TypeError(\"Tone.Analyser: invalid type: \"+e);this._type=e}}),Object.defineProperty(t.Analyser.prototype,\"smoothing\",{get:function(){return this._analyser.smoothingTimeConstant},set:function(t){this._analyser.smoothingTimeConstant=t}}),t.Analyser.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._analyser.disconnect(),this._analyser=null,this._buffer=null},t.Analyser}),t(function(t){return t.Compressor=function(){var e=t.defaults(arguments,[\"threshold\",\"ratio\"],t.Compressor);t.AudioNode.call(this),this._compressor=this.input=this.output=this.context.createDynamicsCompressor(),this.threshold=new t.Param({param:this._compressor.threshold,units:t.Type.Decibels,convert:!1}),this.attack=new t.Param(this._compressor.attack,t.Type.Time),this.release=new t.Param(this._compressor.release,t.Type.Time),this.knee=new t.Param({param:this._compressor.knee,units:t.Type.Decibels,convert:!1}),this.ratio=new t.Param({param:this._compressor.ratio,convert:!1}),this._readOnly([\"knee\",\"release\",\"attack\",\"ratio\",\"threshold\"]),this.set(e)},t.extend(t.Compressor,t.AudioNode),t.Compressor.defaults={ratio:12,threshold:-24,release:.25,attack:.003,knee:30},t.Compressor.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable([\"knee\",\"release\",\"attack\",\"ratio\",\"threshold\"]),this._compressor.disconnect(),this._compressor=null,this.attack.dispose(),this.attack=null,this.release.dispose(),this.release=null,this.threshold.dispose(),this.threshold=null,this.ratio.dispose(),this.ratio=null,this.knee.dispose(),this.knee=null,this},t.Compressor}),t(function(t){return t.Add=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._sum=this.input[0]=this.input[1]=this.output=new t.Gain,this._param=this.input[1]=new t.Signal(e),this._param.connect(this._sum)},t.extend(t.Add,t.Signal),t.Add.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._sum.dispose(),this._sum=null,this},t.Add}),t(function(t){return t.Multiply=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._mult=this.input[0]=this.output=new t.Gain,this._param=this.input[1]=this.output.gain,this._param.value=t.defaultArg(e,0)},t.extend(t.Multiply,t.Signal),t.Multiply.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._mult.dispose(),this._mult=null,this._param=null,this},t.Multiply}),t(function(t){return t.Negate=function(){t.SignalBase.call(this),this._multiply=this.input=this.output=new t.Multiply(-1)},t.extend(t.Negate,t.SignalBase),t.Negate.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._multiply.dispose(),this._multiply=null,this},t.Negate}),t(function(t){return t.Subtract=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._sum=this.input[0]=this.output=new t.Gain,this._neg=new t.Negate,this._param=this.input[1]=new t.Signal(e),this._param.chain(this._neg,this._sum)},t.extend(t.Subtract,t.Signal),t.Subtract.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._neg.dispose(),this._neg=null,this._sum.disconnect(),this._sum=null,this},t.Subtract}),t(function(t){return t.GreaterThanZero=function(){t.SignalBase.call(this),this._thresh=this.output=new t.WaveShaper(function(t){return t<=0?0:1},127),this._scale=this.input=new t.Multiply(1e4),this._scale.connect(this._thresh)},t.extend(t.GreaterThanZero,t.SignalBase),t.GreaterThanZero.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._thresh.dispose(),this._thresh=null,this},t.GreaterThanZero}),t(function(t){return t.GreaterThan=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._param=this.input[0]=new t.Subtract(e),this.input[1]=this._param.input[1],this._gtz=this.output=new t.GreaterThanZero,this._param.connect(this._gtz)},t.extend(t.GreaterThan,t.Signal),t.GreaterThan.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._gtz.dispose(),this._gtz=null,this},t.GreaterThan}),t(function(t){return t.Abs=function(){t.SignalBase.call(this),this._abs=this.input=this.output=new t.WaveShaper(function(t){return 0===t?0:Math.abs(t)},127)},t.extend(t.Abs,t.SignalBase),t.Abs.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._abs.dispose(),this._abs=null,this},t.Abs}),t(function(t){return t.Modulo=function(e){t.SignalBase.call(this),this.createInsOuts(1,0),this._shaper=new t.WaveShaper(Math.pow(2,16)),this._multiply=new t.Multiply,this._subtract=this.output=new t.Subtract,this._modSignal=new t.Signal(e),this.input.fan(this._shaper,this._subtract),this._modSignal.connect(this._multiply,0,0),this._shaper.connect(this._multiply,0,1),this._multiply.connect(this._subtract,0,1),this._setWaveShaper(e)},t.extend(t.Modulo,t.SignalBase),t.Modulo.prototype._setWaveShaper=function(t){this._shaper.setMap(function(e){return Math.floor((e+1e-4)/t)})},Object.defineProperty(t.Modulo.prototype,\"value\",{get:function(){return this._modSignal.value},set:function(t){this._modSignal.value=t,this._setWaveShaper(t)}}),t.Modulo.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this._multiply.dispose(),this._multiply=null,this._subtract.dispose(),this._subtract=null,this._modSignal.dispose(),this._modSignal=null,this},t.Modulo}),t(function(t){return t.AudioToGain=function(){t.SignalBase.call(this),this._norm=this.input=this.output=new t.WaveShaper(function(t){return(t+1)/2})},t.extend(t.AudioToGain,t.SignalBase),t.AudioToGain.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.AudioToGain}),t(function(t){function e(t,e,i){var n=new t;return i._eval(e[0]).connect(n,0,0),i._eval(e[1]).connect(n,0,1),n}function i(t,e,i){var n=new t;return i._eval(e[0]).connect(n,0,0),n}function n(t){return t?parseFloat(t):void 0}function s(t){return t&&t.args?parseFloat(t.args):void 0}return t.Expr=function(){var e,i,n,s,o;for(t.SignalBase.call(this),e=this._replacements(Array.prototype.slice.call(arguments)),i=this._parseInputs(e),this._nodes=[],this.input=new Array(i),n=0;n<i;n++)this.input[n]=this.context.createGain();s=this._parseTree(e);try{o=this._eval(s)}catch(t){throw this._disposeNodes(),new Error(\"Tone.Expr: Could evaluate expression: \"+e)}this.output=o},t.extend(t.Expr,t.SignalBase),t.Expr._Expressions={value:{signal:{regexp:/^\\d+\\.\\d+|^\\d+/,method:function(e){return new t.Signal(n(e))}},input:{regexp:/^\\$\\d/,method:function(t,e){return e.input[n(t.substr(1))]}}},glue:{\"(\":{regexp:/^\\(/},\")\":{regexp:/^\\)/},\",\":{regexp:/^,/}},func:{abs:{regexp:/^abs/,method:i.bind(this,t.Abs)},mod:{regexp:/^mod/,method:function(e,i){var n=s(e[1]),o=new t.Modulo(n);return i._eval(e[0]).connect(o),o}},pow:{regexp:/^pow/,method:function(e,i){var n=s(e[1]),o=new t.Pow(n);return i._eval(e[0]).connect(o),o}},a2g:{regexp:/^a2g/,method:function(e,i){var n=new t.AudioToGain;return i._eval(e[0]).connect(n),n}}},binary:{\"+\":{regexp:/^\\+/,precedence:1,method:e.bind(this,t.Add)},\"-\":{regexp:/^\\-/,precedence:1,method:function(n,s){return 1===n.length?i(t.Negate,n,s):e(t.Subtract,n,s)}},\"*\":{regexp:/^\\*/,precedence:0,method:e.bind(this,t.Multiply)}},unary:{\"-\":{regexp:/^\\-/,method:i.bind(this,t.Negate)},\"!\":{regexp:/^\\!/,method:i.bind(this,t.NOT)}}},t.Expr.prototype._parseInputs=function(t){var e,i,n=t.match(/\\$\\d/g),s=0;if(null!==n)for(e=0;e<n.length;e++)i=parseInt(n[e].substr(1))+1,s=Math.max(s,i);return s},t.Expr.prototype._replacements=function(t){var e,i=t.shift();for(e=0;e<t.length;e++)i=i.replace(/\\%/i,t[e]);return i},t.Expr.prototype._tokenize=function(e){for(var i,n=-1,s=[];e.length>0;)e=e.trim(),i=function(e){var i,n,s,o,r,a;for(i in t.Expr._Expressions){n=t.Expr._Expressions[i];for(s in n)if(o=n[s],r=o.regexp,null!==(a=e.match(r)))return{type:i,value:a[0],method:o.method}}throw new SyntaxError(\"Tone.Expr: Unexpected token \"+e)}(e),s.push(i),e=e.substr(i.value.length);return{next:function(){return s[++n]},peek:function(){return s[n+1]}}},t.Expr.prototype._parseTree=function(e){function i(t,e){return!u(t)&&\"glue\"===t.type&&t.value===e}function n(e,i,n){var s,o,r=!1,a=t.Expr._Expressions[i];if(!u(e))for(s in a)if(o=a[s],o.regexp.test(e.value)){if(u(n))return!0;if(o.precedence===n)return!0}return r}function s(t){var e,i;for(u(t)&&(t=5),e=t<0?o():s(t-1),i=h.peek();n(i,\"binary\",t);)i=h.next(),e={operator:i.value,method:i.method,args:[e,s(t-1)]},i=h.peek();return e}function o(){var t,e;return t=h.peek(),n(t,\"unary\")?(t=h.next(),e=o(),{operator:t.value,method:t.method,args:[e]}):r()}function r(){var t,e;if(t=h.peek(),u(t))throw new SyntaxError(\"Tone.Expr: Unexpected termination of expression\");if(\"func\"===t.type)return t=h.next(),a(t);if(\"value\"===t.type)return t=h.next(),{method:t.method,args:t.value};if(i(t,\"(\")){if(h.next(),e=s(),t=h.next(),!i(t,\")\"))throw new SyntaxError(\"Expected )\");return e}throw new SyntaxError(\"Tone.Expr: Parse error, cannot process token \"+t.value)}function a(t){var e,n=[];if(e=h.next(),!i(e,\"(\"))throw new SyntaxError('Tone.Expr: Expected ( in a function call \"'+t.value+'\"');if(e=h.peek(),i(e,\")\")||(n=l()),e=h.next(),!i(e,\")\"))throw new SyntaxError('Tone.Expr: Expected ) in a function call \"'+t.value+'\"');return{method:t.method,args:n,name:name}}function l(){for(var t,e,n=[];;){if(e=s(),u(e))break;if(n.push(e),t=h.peek(),!i(t,\",\"))break;h.next()}return n}var h=this._tokenize(e),u=t.isUndef.bind(this);return s()},t.Expr.prototype._eval=function(e){if(!t.isUndef(e)){var i=e.method(e.args,this);return this._nodes.push(i),i}},t.Expr.prototype._disposeNodes=function(){var e,i;for(e=0;e<this._nodes.length;e++)i=this._nodes[e],t.isFunction(i.dispose)?i.dispose():t.isFunction(i.disconnect)&&i.disconnect(),i=null,this._nodes[e]=null;this._nodes=null},t.Expr.prototype.dispose=function(){t.SignalBase.prototype.dispose.call(this),this._disposeNodes()},t.Expr}),t(function(t){return t.EqualPowerGain=function(){t.SignalBase.call(this),this._eqPower=this.input=this.output=new t.WaveShaper(function(e){return Math.abs(e)<.001?0:t.equalPowerScale(e)}.bind(this),4096)},t.extend(t.EqualPowerGain,t.SignalBase),t.EqualPowerGain.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._eqPower.dispose(),this._eqPower=null,this},t.EqualPowerGain}),t(function(t){return t.CrossFade=function(e){t.AudioNode.call(this),this.createInsOuts(2,1),this.a=this.input[0]=new t.Gain,this.b=this.input[1]=new t.Gain,this.fade=new t.Signal(t.defaultArg(e,.5),t.Type.NormalRange),this._equalPowerA=new t.EqualPowerGain,this._equalPowerB=new t.EqualPowerGain,this._invert=new t.Expr(\"1 - $0\"),this.a.connect(this.output),this.b.connect(this.output),this.fade.chain(this._equalPowerB,this.b.gain),this.fade.chain(this._invert,this._equalPowerA,this.a.gain),this._readOnly(\"fade\")},t.extend(t.CrossFade,t.AudioNode),t.CrossFade.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(\"fade\"),this._equalPowerA.dispose(),this._equalPowerA=null,this._equalPowerB.dispose(),this._equalPowerB=null,this.fade.dispose(),this.fade=null,this._invert.dispose(),this._invert=null,this.a.dispose(),this.a=null,this.b.dispose(),this.b=null,this},t.CrossFade}),t(function(t){return t.Filter=function(){var e=t.defaults(arguments,[\"frequency\",\"type\",\"rolloff\"],t.Filter);t.AudioNode.call(this),this.createInsOuts(1,1),this._filters=[],this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(0,t.Type.Cents),this.gain=new t.Signal({value:e.gain,convert:!1}),this.Q=new t.Signal(e.Q),this._type=e.type,this._rolloff=e.rolloff,this.rolloff=e.rolloff,this._readOnly([\"detune\",\"frequency\",\"gain\",\"Q\"])},t.extend(t.Filter,t.AudioNode),t.Filter.defaults={type:\"lowpass\",frequency:350,rolloff:-12,Q:1,gain:0},Object.defineProperty(t.Filter.prototype,\"type\",{get:function(){return this._type},set:function(t){var e;if(-1===[\"lowpass\",\"highpass\",\"bandpass\",\"lowshelf\",\"highshelf\",\"notch\",\"allpass\",\"peaking\"].indexOf(t))throw new TypeError(\"Tone.Filter: invalid type \"+t);for(this._type=t,e=0;e<this._filters.length;e++)this._filters[e].type=t}}),Object.defineProperty(t.Filter.prototype,\"rolloff\",{get:function(){return this._rolloff},set:function(e){var i,n,s,o,r,a;if(e=parseInt(e,10),i=[-12,-24,-48,-96],-1===(n=i.indexOf(e)))throw new RangeError(\"Tone.Filter: rolloff can only be -12, -24, -48 or -96\");for(n+=1,this._rolloff=e,this.input.disconnect(),s=0;s<this._filters.length;s++)this._filters[s].disconnect(),this._filters[s]=null;for(this._filters=new Array(n),o=0;o<n;o++)r=this.context.createBiquadFilter(),r.type=this._type,this.frequency.connect(r.frequency),this.detune.connect(r.detune),this.Q.connect(r.Q),this.gain.connect(r.gain),this._filters[o]=r;a=[this.input].concat(this._filters).concat([this.output]),t.connectSeries.apply(t,a)}}),t.Filter.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this);for(var e=0;e<this._filters.length;e++)this._filters[e].disconnect(),this._filters[e]=null;return this._filters=null,this._writable([\"detune\",\"frequency\",\"gain\",\"Q\"]),this.frequency.dispose(),this.Q.dispose(),this.frequency=null,this.Q=null,this.detune.dispose(),this.detune=null,this.gain.dispose(),this.gain=null,this},t.Filter}),t(function(t){return t.MultibandSplit=function(){var e=t.defaults(arguments,[\"lowFrequency\",\"highFrequency\"],t.MultibandSplit);t.AudioNode.call(this),this.input=new t.Gain,this.output=new Array(3),this.low=this.output[0]=new t.Filter(0,\"lowpass\"),this._lowMidFilter=new t.Filter(0,\"highpass\"),this.mid=this.output[1]=new t.Filter(0,\"lowpass\"),this.high=this.output[2]=new t.Filter(0,\"highpass\"),this.lowFrequency=new t.Signal(e.lowFrequency,t.Type.Frequency),this.highFrequency=new t.Signal(e.highFrequency,t.Type.Frequency),this.Q=new t.Signal(e.Q),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.connect(this.low.frequency),this.lowFrequency.connect(this._lowMidFilter.frequency),this.highFrequency.connect(this.mid.frequency),this.highFrequency.connect(this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),this._readOnly([\"high\",\"mid\",\"low\",\"highFrequency\",\"lowFrequency\"])},t.extend(t.MultibandSplit,t.AudioNode),t.MultibandSplit.defaults={lowFrequency:400,highFrequency:2500,Q:1},t.MultibandSplit.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable([\"high\",\"mid\",\"low\",\"highFrequency\",\"lowFrequency\"]),this.low.dispose(),this.low=null,this._lowMidFilter.dispose(),this._lowMidFilter=null,this.mid.dispose(),this.mid=null,this.high.dispose(),this.high=null,this.lowFrequency.dispose(),this.lowFrequency=null,this.highFrequency.dispose(),this.highFrequency=null,this.Q.dispose(),this.Q=null,this},t.MultibandSplit}),t(function(t){return t.EQ3=function(){var e=t.defaults(arguments,[\"low\",\"mid\",\"high\"],t.EQ3);t.AudioNode.call(this),this.output=new t.Gain,this._multibandSplit=this.input=new t.MultibandSplit({lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this._lowGain=new t.Gain(e.low,t.Type.Decibels),this._midGain=new t.Gain(e.mid,t.Type.Decibels),this._highGain=new t.Gain(e.high,t.Type.Decibels),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),this._readOnly([\"low\",\"mid\",\"high\",\"lowFrequency\",\"highFrequency\"])},t.extend(t.EQ3,t.AudioNode),t.EQ3.defaults={low:0,mid:0,high:0,lowFrequency:400,highFrequency:2500},t.EQ3.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable([\"low\",\"mid\",\"high\",\"lowFrequency\",\"highFrequency\"]),this._multibandSplit.dispose(),this._multibandSplit=null,this.lowFrequency=null,this.highFrequency=null,this._lowGain.dispose(),this._lowGain=null,this._midGain.dispose(),this._midGain=null,this._highGain.dispose(),this._highGain=null,this.low=null,this.mid=null,this.high=null,this.Q=null,this},t.EQ3}),t(function(t){return t.Scale=function(e,i){t.SignalBase.call(this),this._outputMin=t.defaultArg(e,0),this._outputMax=t.defaultArg(i,1),this._scale=this.input=new t.Multiply(1),this._add=this.output=new t.Add(0),this._scale.connect(this._add),this._setRange()},t.extend(t.Scale,t.SignalBase),Object.defineProperty(t.Scale.prototype,\"min\",{get:function(){return this._outputMin},set:function(t){this._outputMin=t,this._setRange()}}),Object.defineProperty(t.Scale.prototype,\"max\",{get:function(){return this._outputMax},set:function(t){this._outputMax=t,this._setRange()}}),t.Scale.prototype._setRange=function(){this._add.value=this._outputMin,this._scale.value=this._outputMax-this._outputMin},t.Scale.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._add.dispose(),this._add=null,this._scale.dispose(),this._scale=null,this},t.Scale}),t(function(t){return t.ScaleExp=function(e,i,n){t.SignalBase.call(this),this._scale=this.output=new t.Scale(e,i),this._exp=this.input=new t.Pow(t.defaultArg(n,2)),this._exp.connect(this._scale)},t.extend(t.ScaleExp,t.SignalBase),Object.defineProperty(t.ScaleExp.prototype,\"exponent\",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),Object.defineProperty(t.ScaleExp.prototype,\"min\",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(t.ScaleExp.prototype,\"max\",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),\nt.ScaleExp.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},t.ScaleExp}),t(function(t){return window.DelayNode&&!AudioContext.prototype.createDelay&&(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),t.Delay=function(){var e=t.defaults(arguments,[\"delayTime\",\"maxDelay\"],t.Delay);t.AudioNode.call(this),this._delayNode=this.input=this.output=this.context.createDelay(this.toSeconds(e.maxDelay)),this.delayTime=new t.Param({param:this._delayNode.delayTime,units:t.Type.Time,value:e.delayTime}),this._readOnly(\"delayTime\")},t.extend(t.Delay,t.AudioNode),t.Delay.defaults={maxDelay:1,delayTime:0},t.Delay.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._delayNode.disconnect(),this._delayNode=null,this._writable(\"delayTime\"),this.delayTime=null,this},t.Delay}),t(function(t){return t.FeedbackCombFilter=function(){var e=t.defaults(arguments,[\"delayTime\",\"resonance\"],t.FeedbackCombFilter);t.AudioNode.call(this),this._delay=this.input=this.output=new t.Delay(e.delayTime),this.delayTime=this._delay.delayTime,this._feedback=new t.Gain(e.resonance,t.Type.NormalRange),this.resonance=this._feedback.gain,this._delay.chain(this._feedback,this._delay),this._readOnly([\"resonance\",\"delayTime\"])},t.extend(t.FeedbackCombFilter,t.AudioNode),t.FeedbackCombFilter.defaults={delayTime:.1,resonance:.5},t.FeedbackCombFilter.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable([\"resonance\",\"delayTime\"]),this._delay.dispose(),this._delay=null,this.delayTime=null,this._feedback.dispose(),this._feedback=null,this.resonance=null,this},t.FeedbackCombFilter}),t(function(t){return t.FFT=function(){var e=t.defaults(arguments,[\"size\"],t.FFT);e.type=t.Analyser.Type.FFT,t.AudioNode.call(this),this._analyser=this.input=this.output=new t.Analyser(e)},t.extend(t.FFT,t.AudioNode),t.FFT.defaults={size:1024},t.FFT.prototype.getValue=function(){return this._analyser.getValue()},Object.defineProperty(t.FFT.prototype,\"size\",{get:function(){return this._analyser.size},set:function(t){this._analyser.size=t}}),t.FFT.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._analyser.dispose(),this._analyser=null},t.FFT}),t(function(t){return t.Follower=function(){var e=t.defaults(arguments,[\"attack\",\"release\"],t.Follower);t.AudioNode.call(this),this.createInsOuts(1,1),this._abs=new t.Abs,this._filter=this.context.createBiquadFilter(),this._filter.type=\"lowpass\",this._filter.frequency.value=0,this._filter.Q.value=-100,this._frequencyValues=new t.WaveShaper,this._sub=new t.Subtract,this._delay=new t.Delay(this.blockTime),this._mult=new t.Multiply(1e4),this._attack=e.attack,this._release=e.release,this.input.chain(this._abs,this._filter,this.output),this._abs.connect(this._sub,0,1),this._filter.chain(this._delay,this._sub),this._sub.chain(this._mult,this._frequencyValues,this._filter.frequency),this._setAttackRelease(this._attack,this._release)},t.extend(t.Follower,t.AudioNode),t.Follower.defaults={attack:.05,release:.5},t.Follower.prototype._setAttackRelease=function(e,i){var n=this.blockTime;e=t.Time(e).toFrequency(),i=t.Time(i).toFrequency(),e=Math.max(e,n),i=Math.max(i,n),this._frequencyValues.setMap(function(t){return t<=0?e:i})},Object.defineProperty(t.Follower.prototype,\"attack\",{get:function(){return this._attack},set:function(t){this._attack=t,this._setAttackRelease(this._attack,this._release)}}),Object.defineProperty(t.Follower.prototype,\"release\",{get:function(){return this._release},set:function(t){this._release=t,this._setAttackRelease(this._attack,this._release)}}),t.Follower.prototype.connect=t.Signal.prototype.connect,t.Follower.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._filter.disconnect(),this._filter=null,this._frequencyValues.disconnect(),this._frequencyValues=null,this._delay.dispose(),this._delay=null,this._sub.disconnect(),this._sub=null,this._abs.dispose(),this._abs=null,this._mult.dispose(),this._mult=null,this._curve=null,this},t.Follower}),t(function(t){return t.ScaledEnvelope=function(){var e=t.defaults(arguments,[\"attack\",\"decay\",\"sustain\",\"release\"],t.Envelope);t.Envelope.call(this,e),e=t.defaultArg(e,t.ScaledEnvelope.defaults),this._exp=this.output=new t.Pow(e.exponent),this._scale=this.output=new t.Scale(e.min,e.max),this._sig.chain(this._exp,this._scale)},t.extend(t.ScaledEnvelope,t.Envelope),t.ScaledEnvelope.defaults={min:0,max:1,exponent:1},Object.defineProperty(t.ScaledEnvelope.prototype,\"min\",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(t.ScaledEnvelope.prototype,\"max\",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),Object.defineProperty(t.ScaledEnvelope.prototype,\"exponent\",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),t.ScaledEnvelope.prototype.dispose=function(){return t.Envelope.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},t.ScaledEnvelope}),t(function(t){return t.FrequencyEnvelope=function(){var e=t.defaults(arguments,[\"attack\",\"decay\",\"sustain\",\"release\"],t.Envelope);t.ScaledEnvelope.call(this,e),e=t.defaultArg(e,t.FrequencyEnvelope.defaults),this._octaves=e.octaves,this.baseFrequency=e.baseFrequency,this.octaves=e.octaves},t.extend(t.FrequencyEnvelope,t.Envelope),t.FrequencyEnvelope.defaults={baseFrequency:200,octaves:4,exponent:2},Object.defineProperty(t.FrequencyEnvelope.prototype,\"baseFrequency\",{get:function(){return this._scale.min},set:function(t){this._scale.min=this.toFrequency(t),this.octaves=this._octaves}}),Object.defineProperty(t.FrequencyEnvelope.prototype,\"octaves\",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._scale.max=this.baseFrequency*Math.pow(2,t)}}),Object.defineProperty(t.FrequencyEnvelope.prototype,\"exponent\",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),t.FrequencyEnvelope.prototype.dispose=function(){return t.ScaledEnvelope.prototype.dispose.call(this),this},t.FrequencyEnvelope}),t(function(t){return t.Gate=function(){var e=t.defaults(arguments,[\"threshold\",\"attack\",\"release\"],t.Gate);t.AudioNode.call(this),this.createInsOuts(1,1),this._follower=new t.Follower(e.attack,e.release),this._gt=new t.GreaterThan(t.dbToGain(e.threshold)),this.input.connect(this.output),this.input.chain(this._gt,this._follower,this.output.gain)},t.extend(t.Gate,t.AudioNode),t.Gate.defaults={attack:.1,release:.1,threshold:-40},Object.defineProperty(t.Gate.prototype,\"threshold\",{get:function(){return t.gainToDb(this._gt.value)},set:function(e){this._gt.value=t.dbToGain(e)}}),Object.defineProperty(t.Gate.prototype,\"attack\",{get:function(){return this._follower.attack},set:function(t){this._follower.attack=t}}),Object.defineProperty(t.Gate.prototype,\"release\",{get:function(){return this._follower.release},set:function(t){this._follower.release=t}}),t.Gate.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._follower.dispose(),this._gt.dispose(),this._follower=null,this._gt=null,this},t.Gate}),t(function(t){function e(t){return function(e,i){var n,s,o;return i=this.toSeconds(i),t.apply(this,arguments),n=this._events.get(i),s=this._events.previousEvent(n),o=this._getTickUntilEvent(s,i-this.sampleTime),n.ticks=Math.max(o,0),this}}return t.TickSignal=function(e){e=t.defaultArg(e,1),t.TimelineSignal.call(this,{units:t.Type.Ticks,value:e}),this._events.memory=1/0},t.extend(t.TickSignal,t.TimelineSignal),t.TickSignal.prototype.setValueAtTime=e(t.TimelineSignal.prototype.setValueAtTime),t.TickSignal.prototype.linearRampToValueAtTime=e(t.TimelineSignal.prototype.linearRampToValueAtTime),t.TickSignal.prototype.setTargetAtTime=function(t,e,i){var n,s,o,r,a;for(e=this.toSeconds(e),this.setRampPoint(e),t=this._fromUnits(t),n=this._events.get(e),s=5,o=0;o<=s;o++)r=i*o+e,a=this._exponentialApproach(n.time,n.value,t,i,r),this.linearRampToValueAtTime(this._toUnits(a),r);return this},t.TickSignal.prototype.exponentialRampToValueAtTime=function(t,e){var i,n,s,o,r,a;for(e=this.toSeconds(e),t=this._fromUnits(t),i=this._events.get(e),null===i&&(i={value:this._initial,time:0}),n=5,s=(e-i.time)/n,o=0;o<=n;o++)r=s*o+i.time,a=this._exponentialInterpolate(i.time,i.value,e,t,r),this.linearRampToValueAtTime(this._toUnits(a),r);return this},t.TickSignal.prototype._getTickUntilEvent=function(t,e){var i,n;return null===t&&(t={ticks:0,time:0}),i=this.getValueAtTime(t.time),n=this.getValueAtTime(e),.5*(e-t.time)*(i+n)+t.ticks},t.TickSignal.prototype.getTickAtTime=function(t){t=this.toSeconds(t);var e=this._events.get(t);return this._getTickUntilEvent(e,t)},t.TickSignal.prototype.getDurationOfTicks=function(t,e){e=this.toSeconds(e);var i=this.getTickAtTime(e);return this.getTimeOfTick(i+t)-e},t.TickSignal.prototype.getTimeOfTick=function(e){var i,n,s,o,r,a,l=this._events.get(e,\"ticks\"),h=this._events.getAfter(e,\"ticks\");return l&&l.ticks===e?l.time:l&&h&&h.type===t.TimelineSignal.Type.Linear&&l.value!==h.value?(i=this.getValueAtTime(l.time),n=this.getValueAtTime(h.time),s=(n-i)/(h.time-l.time),o=Math.sqrt(Math.pow(i,2)-2*s*(l.ticks-e)),r=(-i+o)/s,a=(-i-o)/s,(r>0?r:a)+l.time):l?0===l.value?1/0:l.time+(e-l.ticks)/l.value:e/this._initial},t.TickSignal}),t(function(t){return t.TimelineState=function(e){t.Timeline.call(this),this._initial=e},t.extend(t.TimelineState,t.Timeline),t.TimelineState.prototype.getValueAtTime=function(t){var e=this.get(t);return null!==e?e.state:this._initial},t.TimelineState.prototype.setStateAtTime=function(t,e){return this.add({state:t,time:e}),this},t.TimelineState}),t(function(t){return t.Clock=function(){var e=t.defaults(arguments,[\"callback\",\"frequency\"],t.Clock);t.Emitter.call(this),this.callback=e.callback,this._nextTick=0,this._lastState=t.State.Stopped,this.frequency=new t.TickSignal(e.frequency,t.Type.Frequency),this._readOnly(\"frequency\"),this.ticks=0,this._state=new t.TimelineState(t.State.Stopped),this._boundLoop=this._loop.bind(this),this.context.on(\"tick\",this._boundLoop)},t.extend(t.Clock,t.Emitter),t.Clock.defaults={callback:t.noOp,frequency:1},Object.defineProperty(t.Clock.prototype,\"state\",{get:function(){return this._state.getValueAtTime(this.now())}}),t.Clock.prototype.start=function(e,i){return e=this.toSeconds(e),this._state.getValueAtTime(e)!==t.State.Started&&(this._state.setStateAtTime(t.State.Started,e),this._state.get(e).offset=i),this},t.Clock.prototype.stop=function(e){return e=this.toSeconds(e),this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this},t.Clock.prototype.pause=function(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)===t.State.Started&&this._state.setStateAtTime(t.State.Paused,e),this},t.Clock.prototype._loop=function(){var e,i=this.now()+this.context.updateInterval,n=this._state.get(i);if(n){if(n.state!==this._lastState)switch(this._lastState=n.state,n.state){case t.State.Started:t.isUndef(n.offset)||(this.ticks=n.offset),this._nextTick=n.time,this.emit(\"start\",n.time,this.ticks);break;case t.State.Stopped:this.ticks=0,this.emit(\"stop\",n.time);break;case t.State.Paused:this.emit(\"pause\",n.time)}for(;i>this._nextTick&&this._state;)if(e=this._nextTick,this.frequency&&(this._nextTick+=this.frequency.getDurationOfTicks(1,this._nextTick),n.state===t.State.Started))try{this.callback(e),this.ticks++}catch(t){throw this.ticks++,t}}},t.Clock.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},t.Clock.prototype.dispose=function(){t.Emitter.prototype.dispose.call(this),this.context.off(\"tick\",this._boundLoop),this._writable(\"frequency\"),this.frequency.dispose(),this.frequency=null,this._boundLoop=null,this._nextTick=1/0,this.callback=null,this._state.dispose(),this._state=null},t.Clock}),t(function(t){t.IntervalTimeline=function(){t.call(this),this._root=null,this._length=0},t.extend(t.IntervalTimeline),t.IntervalTimeline.prototype.add=function(i){if(t.isUndef(i.time)||t.isUndef(i.duration))throw new Error(\"Tone.IntervalTimeline: events must have time and duration parameters\");var n=new e(i.time,i.time+i.duration,i);for(null===this._root?this._root=n:this._root.insert(n),this._length++;null!==n;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this},t.IntervalTimeline.prototype.remove=function(t){var e,i,n;if(null!==this._root)for(e=[],this._root.search(t.time,e),i=0;i<e.length;i++)if(n=e[i],n.event===t){this._removeNode(n),this._length--;break}return this},Object.defineProperty(t.IntervalTimeline.prototype,\"length\",{get:function(){return this._length}}),t.IntervalTimeline.prototype.cancel=function(t){return this.forEachAfter(t,function(t){this.remove(t)}.bind(this)),this},t.IntervalTimeline.prototype._setRoot=function(t){this._root=t,null!==this._root&&(this._root.parent=null)},t.IntervalTimeline.prototype._replaceNodeInParent=function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)},t.IntervalTimeline.prototype._removeNode=function(t){var e,i;if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{if(t.getBalance()>0)if(null===t.left.right)e=t.left,e.right=t.right,i=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent.right=e.left,i=e.parent,e.left=t.left,e.right=t.right}else if(null===t.right.left)e=t.right,e.left=t.left,i=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent=e.parent,e.parent.left=e.right,i=e.parent,e.left=t.left,e.right=t.right}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),this._rebalance(i)}t.dispose()},t.IntervalTimeline.prototype._rotateLeft=function(t){var e=t.parent,i=t.isLeftChild(),n=t.right;t.right=n.left,n.left=t,null!==e?i?e.left=n:e.right=n:this._setRoot(n)},t.IntervalTimeline.prototype._rotateRight=function(t){var e=t.parent,i=t.isLeftChild(),n=t.left;t.left=n.right,n.right=t,null!==e?i?e.left=n:e.right=n:this._setRoot(n)},t.IntervalTimeline.prototype._rebalance=function(t){var e=t.getBalance();e>1?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))},t.IntervalTimeline.prototype.get=function(t){var e,i,n;if(null!==this._root&&(e=[],this._root.search(t,e),e.length>0)){for(i=e[0],n=1;n<e.length;n++)e[n].low>i.low&&(i=e[n]);return i.event}return null},t.IntervalTimeline.prototype.forEach=function(t){var e,i,n;if(null!==this._root)for(e=[],this._root.traverse(function(t){e.push(t)}),i=0;i<e.length;i++)(n=e[i].event)&&t(n);return this},t.IntervalTimeline.prototype.forEachAtTime=function(t,e){var i,n,s;if(null!==this._root)for(i=[],this._root.search(t,i),n=i.length-1;n>=0;n--)(s=i[n].event)&&e(s);return this},t.IntervalTimeline.prototype.forEachAfter=function(t,e){var i,n,s;if(null!==this._root)for(i=[],this._root.searchAfter(t,i),n=i.length-1;n>=0;n--)s=i[n].event,e(s);return this},t.IntervalTimeline.prototype.dispose=function(){var t,e=[];for(null!==this._root&&this._root.traverse(function(t){e.push(t)}),t=0;t<e.length;t++)e[t].dispose();return e=null,this._root=null,this};var e=function(t,e,i){this.event=i,this.low=t,this.high=e,this.max=this.high,this._left=null,this._right=null,this.parent=null,this.height=0};return e.prototype.insert=function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)},e.prototype.search=function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))},e.prototype.searchAfter=function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)},e.prototype.traverse=function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)},e.prototype.updateHeight=function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0},e.prototype.updateMax=function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))},e.prototype.getBalance=function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t},e.prototype.isLeftChild=function(){return null!==this.parent&&this.parent.left===this},Object.defineProperty(e.prototype,\"left\",{get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),Object.defineProperty(e.prototype,\"right\",{get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),e.prototype.dispose=function(){this.parent=null,this._left=null,this._right=null,this.event=null},t.IntervalTimeline}),t(function(t){return t.TransportEvent=function(e,i){i=t.defaultArg(i,t.TransportEvent.defaults),t.call(this),this.Transport=e,this.id=t.TransportEvent._eventId++,this.time=i.time,this.callback=i.callback,this._once=i.once},t.extend(t.TransportEvent),t.TransportEvent.defaults={once:!1,callback:t.noOp},t.TransportEvent._eventId=0,t.TransportEvent.prototype.invoke=function(t){this.callback&&(this.callback(t),this._once&&this.Transport&&this.Transport.clear(this.id))},t.TransportEvent.prototype.dispose=function(){return t.prototype.dispose.call(this),this.Transport=null,this.callback=null,this},t.TransportEvent}),t(function(t){return t.TransportRepeatEvent=function(e,i){t.TransportEvent.call(this,e,i),i=t.defaultArg(i,t.TransportRepeatEvent.defaults),this.duration=i.duration,this._interval=i.interval,this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this),this.Transport.on(\"start loopStart\",this._boundRestart),this._restart()},t.extend(t.TransportRepeatEvent,t.TransportEvent),t.TransportRepeatEvent.defaults={duration:1/0,interval:1},t.TransportRepeatEvent.prototype.invoke=function(e){this._createEvents(),t.TransportEvent.prototype.invoke.call(this,e)},t.TransportRepeatEvent.prototype._createEvents=function(){var e=this.Transport.ticks;e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.Transport.scheduleOnce(this.invoke.bind(this),t.TransportTime(this._nextTick,\"i\")))},t.TransportRepeatEvent.prototype._restart=function(){this.Transport.clear(this._currentId),this.Transport.clear(this._nextId);var e=this.Transport.ticks;this._nextTick=this.time,e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.Transport.scheduleOnce(this.invoke.bind(this),t.TransportTime(this._nextTick,\"i\")),this._nextTick+=this._interval,this._nextId=this.Transport.scheduleOnce(this.invoke.bind(this),t.TransportTime(this._nextTick,\"i\"))},t.TransportRepeatEvent.prototype.dispose=function(){return this.Transport.clear(this._currentId),this.Transport.clear(this._nextId),this.Transport.off(\"start loopStart\",this._boundRestart),this._boundCreateEvents=null,t.TransportEvent.prototype.dispose.call(this),this},t.TransportRepeatEvent}),t(function(t){t.Transport=function(){t.Emitter.call(this),t.getContext(function(){this.loop=!1,this._loopStart=0,this._loopEnd=0,this._ppq=e.defaults.PPQ,this._clock=new t.Clock({callback:this._processTick.bind(this),frequency:0}),this._bindClockEvents(),this.bpm=this._clock.frequency,this.bpm._toUnits=this._toUnits.bind(this),this.bpm._fromUnits=this._fromUnits.bind(this),this.bpm.units=t.Type.BPM,this.bpm.value=e.defaults.bpm,this._readOnly(\"bpm\"),this._timeSignature=e.defaults.timeSignature,this._scheduledEvents={},this._timeline=new t.Timeline,this._repeatedEvents=new t.IntervalTimeline,this._syncedSignals=[],this._swingTicks=e.defaults.PPQ/2,this._swingAmount=0}.bind(this))},t.extend(t.Transport,t.Emitter),t.Transport.defaults={bpm:120,swing:0,swingSubdivision:\"8n\",timeSignature:4,loopStart:0,loopEnd:\"4m\",PPQ:192},t.Transport.prototype._processTick=function(e){var i,n,s=this._clock.ticks;this._swingAmount>0&&s%this._ppq!=0&&s%(2*this._swingTicks)!=0&&(i=s%(2*this._swingTicks)/(2*this._swingTicks),n=Math.sin(i*Math.PI)*this._swingAmount,e+=t.Time(2*this._swingTicks/3,\"i\")*n),this.loop&&s>=this._loopEnd&&(this.emit(\"loopEnd\",e),this._clock.ticks=this._loopStart,s=this._loopStart,this.emit(\"loopStart\",e,this.seconds),this.emit(\"loop\",e)),this._timeline.forEachAtTime(s,function(t){t.invoke(e)})},t.Transport.prototype.schedule=function(e,i){var n=new t.TransportEvent(this,{time:this.toTicks(i),callback:e});return this._addEvent(n,this._timeline)},t.Transport.prototype.scheduleRepeat=function(e,i,n,s){var o=new t.TransportRepeatEvent(this,{callback:e,interval:this.toTicks(i),time:this.toTicks(n),duration:this.toTicks(t.defaultArg(s,1/0))});return this._addEvent(o,this._repeatedEvents)},t.Transport.prototype.scheduleOnce=function(e,i){var n=new t.TransportEvent(this,{time:this.toTicks(i),callback:e,once:!0});return this._addEvent(n,this._timeline)},t.Transport.prototype.clear=function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this},t.Transport.prototype._addEvent=function(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id},t.Transport.prototype.cancel=function(e){return e=t.defaultArg(e,0),e=this.toTicks(e),this._timeline.cancel(e),this._repeatedEvents.cancel(e),this},t.Transport.prototype._bindClockEvents=function(){this._clock.on(\"start\",function(e,i){i=t.Time(this._clock.ticks,\"i\").toSeconds(),this.emit(\"start\",e,i)}.bind(this)),this._clock.on(\"stop\",function(t){this.emit(\"stop\",t)}.bind(this)),this._clock.on(\"pause\",function(t){this.emit(\"pause\",t)}.bind(this))},Object.defineProperty(t.Transport.prototype,\"state\",{get:function(){return this._clock.getStateAtTime(this.now())}}),t.Transport.prototype.start=function(e,i){return t.isUndef(i)||(i=this.toTicks(i)),this._clock.start(e,i),this},t.Transport.prototype.stop=function(t){return this._clock.stop(t),this},t.Transport.prototype.pause=function(t){return this._clock.pause(t),this},t.Transport.prototype.toggle=function(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!==t.State.Started?this.start(e):this.stop(e),this},Object.defineProperty(t.Transport.prototype,\"timeSignature\",{get:function(){return this._timeSignature},set:function(e){t.isArray(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}}),Object.defineProperty(t.Transport.prototype,\"loopStart\",{get:function(){return t.TransportTime(this._loopStart,\"i\").toSeconds()},set:function(t){this._loopStart=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,\"loopEnd\",{get:function(){return t.TransportTime(this._loopEnd,\"i\").toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)}}),t.Transport.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Transport.prototype,\"swing\",{get:function(){return this._swingAmount},set:function(t){this._swingAmount=t}}),Object.defineProperty(t.Transport.prototype,\"swingSubdivision\",{get:function(){return t.Time(this._swingTicks,\"i\").toNotation()},set:function(t){this._swingTicks=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,\"position\",{get:function(){return t.TransportTime(this.ticks,\"i\").toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(t.Transport.prototype,\"seconds\",{get:function(){return t.TransportTime(this.ticks,\"i\").toSeconds()},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(t.Transport.prototype,\"progress\",{get:function(){return this.loop?(this.ticks-this._loopStart)/(this._loopEnd-this._loopStart):0}}),Object.defineProperty(t.Transport.prototype,\"ticks\",{get:function(){return this._clock.ticks},set:function(e){if(this._clock.ticks!==e){var i=this.now();this.state===t.State.Started?(this.emit(\"stop\",i),this._clock.ticks=e,this.emit(\"start\",i,this.seconds)):this._clock.ticks=e}}}),Object.defineProperty(t.Transport.prototype,\"PPQ\",{get:function(){return this._ppq},set:function(t){var e=this.bpm.value;this._ppq=t,this.bpm.value=e}}),t.Transport.prototype._fromUnits=function(t){return 1/(60/t/this.PPQ)},t.Transport.prototype._toUnits=function(t){return t/this.PPQ*60},t.Transport.prototype.nextSubdivision=function(e){var i,n,s;return e=this.toSeconds(e),this.state!==t.State.Started?0:(i=this._clock._nextTick,n=t.Time(this.ticks,\"i\"),s=e-n%e,0===s&&(s=e),i+s)},t.Transport.prototype.syncSignal=function(e,i){i||(i=0!==e._param.value?e._param.value/this.bpm._param.value:0);var n=new t.Gain(i);return this.bpm.chain(n,e._param),this._syncedSignals.push({ratio:n,signal:e,initial:e._param.value}),e._param.value=0,this},t.Transport.prototype.unsyncSignal=function(t){var e,i;for(e=this._syncedSignals.length-1;e>=0;e--)i=this._syncedSignals[e],i.signal===t&&(i.ratio.dispose(),i.signal._param.value=i.initial,this._syncedSignals.splice(e,1));return this},t.Transport.prototype.dispose=function(){return t.Emitter.prototype.dispose.call(this),this._clock.dispose(),this._clock=null,this._writable(\"bpm\"),this.bpm=null,this._timeline.dispose(),this._timeline=null,this._repeatedEvents.dispose(),this._repeatedEvents=null,this};var e=t.Transport;return t.Transport=new e,t.Context.on(\"init\",function(i){i.Transport instanceof e?t.Transport=i.Transport:t.Transport=new e,i.Transport=t.Transport}),t.Context.on(\"close\",function(t){t.Transport instanceof e&&t.Transport.dispose()}),t.Transport}),t(function(t){return t.Volume=function(){var e=t.defaults(arguments,[\"volume\"],t.Volume);t.AudioNode.call(this),this.output=this.input=new t.Gain(e.volume,t.Type.Decibels),this._unmutedVolume=e.volume,this.volume=this.output.gain,this._readOnly(\"volume\"),this.mute=e.mute},t.extend(t.Volume,t.AudioNode),t.Volume.defaults={volume:0,mute:!1},Object.defineProperty(t.Volume.prototype,\"mute\",{get:function(){return this.volume.value===-1/0},set:function(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}}),t.Volume.prototype.dispose=function(){return this.input.dispose(),t.AudioNode.prototype.dispose.call(this),this._writable(\"volume\"),this.volume.dispose(),this.volume=null,this},t.Volume}),t(function(t){t.Master=function(){t.AudioNode.call(this),t.getContext(function(){this.createInsOuts(1,0),this._volume=this.output=new t.Volume,this.volume=this._volume.volume,this._readOnly(\"volume\"),this.input.chain(this.output,this.context.destination)}.bind(this))},t.extend(t.Master,t.AudioNode),t.Master.defaults={volume:0,mute:!1},Object.defineProperty(t.Master.prototype,\"mute\",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.Master.prototype.chain=function(){this.input.disconnect(),this.input.chain.apply(this.input,arguments),arguments[arguments.length-1].connect(this.output)},t.Master.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._writable(\"volume\"),this._volume.dispose(),this._volume=null,this.volume=null},t.AudioNode.prototype.toMaster=function(){return this.connect(t.Master),this},window.AudioNode&&(AudioNode.prototype.toMaster=function(){return this.connect(t.Master),this});var e=t.Master;return t.Master=new e,t.Context.on(\"init\",function(i){i.Master instanceof e?t.Master=i.Master:t.Master=new e,i.Master=t.Master}),t.Context.on(\"close\",function(t){t.Master instanceof e&&t.Master.dispose()}),t.Master}),t(function(t){return t.Source=function(e){e=t.defaultArg(e,t.Source.defaults),t.AudioNode.call(this),this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly(\"volume\"),this._state=new t.TimelineState(t.State.Stopped),this._state.memory=10,this._synced=!1,this._scheduled=[],this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode=\"explicit\",this.mute=e.mute},t.extend(t.Source,t.AudioNode),t.Source.defaults={volume:0,mute:!1},Object.defineProperty(t.Source.prototype,\"state\",{get:function(){return this._synced?t.Transport.state===t.State.Started?this._state.getValueAtTime(t.Transport.seconds):t.State.Stopped:this._state.getValueAtTime(this.now())}}),Object.defineProperty(t.Source.prototype,\"mute\",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.Source.prototype._start=t.noOp,t.Source.prototype._stop=t.noOp,t.Source.prototype.start=function(e,i,n){var s,o;return e=t.isUndef(e)&&this._synced?t.Transport.seconds:this.toSeconds(e),this.retrigger||this._state.getValueAtTime(e)!==t.State.Started||this.stop(e),this._state.setStateAtTime(t.State.Started,e),this._synced?(s=this._state.get(e),s.offset=t.defaultArg(i,0),s.duration=n,o=t.Transport.schedule(function(t){this._start(t,i,n)}.bind(this),e),this._scheduled.push(o)):this._start.apply(this,arguments),this},t.Source.prototype.stop=function(e){if(e=t.isUndef(e)&&this._synced?t.Transport.seconds:this.toSeconds(e),this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this._synced){var i=t.Transport.schedule(this._stop.bind(this),e);this._scheduled.push(i)}else this._stop.apply(this,arguments);return this},t.Source.prototype.sync=function(){return this._synced=!0,this._syncedStart=function(e,i){var n,s,o;i>0&&(n=this._state.get(i))&&n.state===t.State.Started&&n.time!==i&&(s=i-this.toSeconds(n.time),n.duration&&(o=this.toSeconds(n.duration)-s),this._start(e,this.toSeconds(n.offset)+s,o))}.bind(this),this._syncedStop=function(e){this._state.getValueAtTime(t.Transport.seconds)===t.State.Started&&this._stop(e)}.bind(this),t.Transport.on(\"start loopStart\",this._syncedStart),t.Transport.on(\"stop pause loopEnd\",this._syncedStop),this},t.Source.prototype.unsync=function(){var e,i;for(this._synced&&(t.Transport.off(\"stop pause loopEnd\",this._syncedStop),t.Transport.off(\"start loopStart\",this._syncedStart)),this._synced=!1,e=0;e<this._scheduled.length;e++)i=this._scheduled[e],t.Transport.clear(i);return this._scheduled=[],this._state.cancel(0),this},t.Source.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this.unsync(),this._scheduled=null,this._writable(\"volume\"),this._volume.dispose(),this._volume=null,this.volume=null,this._state.dispose(),this._state=null},t.Source}),t(function(t){return window.OscillatorNode&&!OscillatorNode.prototype.start&&(OscillatorNode.prototype.start=OscillatorNode.prototype.noteOn,OscillatorNode.prototype.stop=OscillatorNode.prototype.noteOff,OscillatorNode.prototype.setPeriodicWave||(OscillatorNode.prototype.setPeriodicWave=OscillatorNode.prototype.setWaveTable),AudioContext.prototype.createPeriodicWave||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable)),t.Oscillator=function(){var e=t.defaults(arguments,[\"frequency\",\"type\"],t.Oscillator);t.Source.call(this,e),this._oscillator=null,this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._wave=null,this._partials=t.defaultArg(e.partials,[1]),this._phase=e.phase,this._type=null,this.type=e.type,this.phase=this._phase,this._readOnly([\"frequency\",\"detune\"])},t.extend(t.Oscillator,t.Source),t.Oscillator.defaults={type:\"sine\",frequency:440,detune:0,phase:0,partials:[]},t.Oscillator.Type={Sine:\"sine\",Triangle:\"triangle\",Sawtooth:\"sawtooth\",Square:\"square\",Custom:\"custom\"},t.Oscillator.prototype._start=function(e){\nthis._oscillator=this.context.createOscillator(),this._oscillator.setPeriodicWave(this._wave),this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),e=this.toSeconds(e),t.isPast(e),this._oscillator.start(e)},t.Oscillator.prototype._stop=function(e){return this._oscillator&&(e=this.toSeconds(e),t.isPast(e),this._oscillator.stop(e),this._oscillator=null),this},t.Oscillator.prototype.syncFrequency=function(){return t.Transport.syncSignal(this.frequency),this},t.Oscillator.prototype.unsyncFrequency=function(){return t.Transport.unsyncSignal(this.frequency),this},Object.defineProperty(t.Oscillator.prototype,\"type\",{get:function(){return this._type},set:function(t){var e=this._getRealImaginary(t,this._phase),i=this.context.createPeriodicWave(e[0],e[1]);this._wave=i,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),this._type=t}}),t.Oscillator.prototype._getRealImaginary=function(e,i){var n,s,o,r,a=4096,l=a/2,h=new Float32Array(l),u=new Float32Array(l),c=1;for(e===t.Oscillator.Type.Custom?(c=this._partials.length+1,l=c):(n=/^(sine|triangle|square|sawtooth)(\\d+)$/.exec(e))&&(c=parseInt(n[2])+1,e=n[1],c=Math.max(c,2),l=c),s=1;s<l;++s){switch(o=2/(s*Math.PI),e){case t.Oscillator.Type.Sine:r=s<=c?1:0;break;case t.Oscillator.Type.Square:r=1&s?2*o:0;break;case t.Oscillator.Type.Sawtooth:r=o*(1&s?1:-1);break;case t.Oscillator.Type.Triangle:r=1&s?o*o*2*(s-1>>1&1?-1:1):0;break;case t.Oscillator.Type.Custom:r=this._partials[s-1];break;default:throw new TypeError(\"Tone.Oscillator: invalid type: \"+e)}0!==r?(h[s]=-r*Math.sin(i*s),u[s]=r*Math.cos(i*s)):(h[s]=0,u[s]=0)}return[h,u]},t.Oscillator.prototype._inverseFFT=function(t,e,i){var n,s=0,o=t.length;for(n=0;n<o;n++)s+=t[n]*Math.cos(n*i)+e[n]*Math.sin(n*i);return s},t.Oscillator.prototype._getInitialValue=function(){var t,e=this._getRealImaginary(this._type,0),i=e[0],n=e[1],s=0,o=2*Math.PI;for(t=0;t<8;t++)s=Math.max(this._inverseFFT(i,n,t/8*o),s);return-this._inverseFFT(i,n,this._phase)/s},Object.defineProperty(t.Oscillator.prototype,\"partials\",{get:function(){return this._type!==t.Oscillator.Type.Custom?[]:this._partials},set:function(e){this._partials=e,this.type=t.Oscillator.Type.Custom}}),Object.defineProperty(t.Oscillator.prototype,\"phase\",{get:function(){return this._phase*(180/Math.PI)},set:function(t){this._phase=t*Math.PI/180,this.type=this._type}}),t.Oscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._oscillator&&(this._oscillator.disconnect(),this._oscillator=null),this._wave=null,this._writable([\"frequency\",\"detune\"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this._partials=null,this},t.Oscillator}),t(function(t){return t.Zero=function(){t.SignalBase.call(this),this._gain=this.input=this.output=new t.Gain,this.context.getConstant(0).connect(this._gain)},t.extend(t.Zero,t.SignalBase),t.Zero.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._gain.dispose(),this._gain=null,this},t.Zero}),t(function(t){return t.LFO=function(){var e=t.defaults(arguments,[\"frequency\",\"min\",\"max\"],t.LFO);t.AudioNode.call(this),this._oscillator=new t.Oscillator({frequency:e.frequency,type:e.type}),this.frequency=this._oscillator.frequency,this.amplitude=this._oscillator.volume,this.amplitude.units=t.Type.NormalRange,this.amplitude.value=e.amplitude,this._stoppedSignal=new t.Signal(0,t.Type.AudioRange),this._zeros=new t.Zero,this._stoppedValue=0,this._a2g=new t.AudioToGain,this._scaler=this.output=new t.Scale(e.min,e.max),this._units=t.Type.Default,this.units=e.units,this._oscillator.chain(this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),this._readOnly([\"amplitude\",\"frequency\"]),this.phase=e.phase},t.extend(t.LFO,t.AudioNode),t.LFO.defaults={type:\"sine\",min:0,max:1,phase:0,frequency:\"4n\",amplitude:1,units:t.Type.Default},t.LFO.prototype.start=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this},t.LFO.prototype.stop=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this},t.LFO.prototype.sync=function(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this},t.LFO.prototype.unsync=function(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this},Object.defineProperty(t.LFO.prototype,\"min\",{get:function(){return this._toUnits(this._scaler.min)},set:function(t){t=this._fromUnits(t),this._scaler.min=t}}),Object.defineProperty(t.LFO.prototype,\"max\",{get:function(){return this._toUnits(this._scaler.max)},set:function(t){t=this._fromUnits(t),this._scaler.max=t}}),Object.defineProperty(t.LFO.prototype,\"type\",{get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t,this._stoppedValue=this._oscillator._getInitialValue(),this._stoppedSignal.value=this._stoppedValue}}),Object.defineProperty(t.LFO.prototype,\"phase\",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t,this._stoppedValue=this._oscillator._getInitialValue(),this._stoppedSignal.value=this._stoppedValue}}),Object.defineProperty(t.LFO.prototype,\"units\",{get:function(){return this._units},set:function(t){var e=this.min,i=this.max;this._units=t,this.min=e,this.max=i}}),Object.defineProperty(t.LFO.prototype,\"mute\",{get:function(){return this._oscillator.mute},set:function(t){this._oscillator.mute=t}}),Object.defineProperty(t.LFO.prototype,\"state\",{get:function(){return this._oscillator.state}}),t.LFO.prototype.connect=function(e){return e.constructor!==t.Signal&&e.constructor!==t.Param&&e.constructor!==t.TimelineSignal||(this.convert=e.convert,this.units=e.units),t.Signal.prototype.connect.apply(this,arguments),this},t.LFO.prototype._fromUnits=t.Param.prototype._fromUnits,t.LFO.prototype._toUnits=t.Param.prototype._toUnits,t.LFO.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable([\"amplitude\",\"frequency\"]),this._oscillator.dispose(),this._oscillator=null,this._stoppedSignal.dispose(),this._stoppedSignal=null,this._zeros.dispose(),this._zeros=null,this._scaler.dispose(),this._scaler=null,this._a2g.dispose(),this._a2g=null,this.frequency=null,this.amplitude=null,this},t.LFO}),t(function(t){return t.Limiter=function(){var e=t.defaults(arguments,[\"threshold\"],t.Limiter);t.AudioNode.call(this),this._compressor=this.input=this.output=new t.Compressor({attack:.001,decay:.001,threshold:e.threshold}),this.threshold=this._compressor.threshold,this._readOnly(\"threshold\")},t.extend(t.Limiter,t.AudioNode),t.Limiter.defaults={threshold:-12},t.Limiter.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._compressor.dispose(),this._compressor=null,this._writable(\"threshold\"),this.threshold=null,this},t.Limiter}),t(function(t){return t.LowpassCombFilter=function(){var e=t.defaults(arguments,[\"delayTime\",\"resonance\",\"dampening\"],t.LowpassCombFilter);t.AudioNode.call(this),this.createInsOuts(1,1),this._delay=this.input=new t.Delay(e.delayTime),this.delayTime=this._delay.delayTime,this._lowpass=this.output=this.context.createBiquadFilter(),this._lowpass.Q.value=-3.0102999566398125,this._lowpass.type=\"lowpass\",this.dampening=new t.Param({param:this._lowpass.frequency,units:t.Type.Frequency,value:e.dampening}),this._feedback=new t.Gain(e.resonance,t.Type.NormalRange),this.resonance=this._feedback.gain,this._delay.chain(this._lowpass,this._feedback,this._delay),this._readOnly([\"dampening\",\"resonance\",\"delayTime\"])},t.extend(t.LowpassCombFilter,t.AudioNode),t.LowpassCombFilter.defaults={delayTime:.1,resonance:.5,dampening:3e3},t.LowpassCombFilter.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable([\"dampening\",\"resonance\",\"delayTime\"]),this.dampening.dispose(),this.dampening=null,this.resonance.dispose(),this.resonance=null,this._delay.dispose(),this._delay=null,this.delayTime=null,this._lowpass.disconnect(),this._lowpass=null,this._feedback.disconnect(),this._feedback=null,this},t.LowpassCombFilter}),t(function(t){return t.Merge=function(){t.AudioNode.call(this),this.createInsOuts(2,0),this.left=this.input[0]=new t.Gain,this.right=this.input[1]=new t.Gain,this._merger=this.output=this.context.createChannelMerger(2),this.left.connect(this._merger,0,0),this.right.connect(this._merger,0,1),this.left.channelCount=1,this.right.channelCount=1,this.left.channelCountMode=\"explicit\",this.right.channelCountMode=\"explicit\"},t.extend(t.Merge,t.AudioNode),t.Merge.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.left.dispose(),this.left=null,this.right.dispose(),this.right=null,this._merger.disconnect(),this._merger=null,this},t.Merge}),t(function(t){return t.Meter=function(){var e=t.defaults(arguments,[\"smoothing\"],t.Meter);t.AudioNode.call(this),this.input=this.output=this._analyser=new t.Analyser(\"waveform\",1024),this.smoothing=e.smoothing},t.extend(t.Meter,t.AudioNode),t.Meter.defaults={smoothing:.8},t.Meter.prototype.getLevel=function(){var t,e;return this._analyser.type=\"fft\",t=this._analyser.getValue(),e=28,Math.max.apply(this,t)+e},t.Meter.prototype.getValue=function(){return this._analyser.type=\"waveform\",this._analyser.getValue()[0]},Object.defineProperty(t.Meter.prototype,\"smoothing\",{get:function(){return this._analyser.smoothing},set:function(t){this._analyser.smoothing=t}}),t.Meter.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._analyser.dispose(),this._analyser=null,this},t.Meter}),t(function(t){return t.Split=function(){t.AudioNode.call(this),this.createInsOuts(0,2),this._splitter=this.input=this.context.createChannelSplitter(2),this._splitter.channelCount=2,this._splitter.channelCountMode=\"explicit\",this.left=this.output[0]=new t.Gain,this.right=this.output[1]=new t.Gain,this._splitter.connect(this.left,0,0),this._splitter.connect(this.right,1,0)},t.extend(t.Split,t.AudioNode),t.Split.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._splitter.disconnect(),this.left.dispose(),this.left=null,this.right.dispose(),this.right=null,this._splitter=null,this},t.Split}),t(function(t){return t.MidSideSplit=function(){t.AudioNode.call(this),this.createInsOuts(0,2),this._split=this.input=new t.Split,this.mid=this.output[0]=new t.Expr(\"($0 + $1) * $2\"),this.side=this.output[1]=new t.Expr(\"($0 - $1) * $2\"),this._split.connect(this.mid,0,0),this._split.connect(this.mid,1,1),this._split.connect(this.side,0,0),this._split.connect(this.side,1,1),this.context.getConstant(Math.SQRT1_2).connect(this.mid,0,2),this.context.getConstant(Math.SQRT1_2).connect(this.side,0,2)},t.extend(t.MidSideSplit,t.AudioNode),t.MidSideSplit.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._split.dispose(),this._split=null,this},t.MidSideSplit}),t(function(t){return t.MidSideMerge=function(){t.AudioNode.call(this),this.createInsOuts(2,0),this.mid=this.input[0]=new t.Gain,this._left=new t.Expr(\"($0 + $1) * $2\"),this.side=this.input[1]=new t.Gain,this._right=new t.Expr(\"($0 - $1) * $2\"),this._merge=this.output=new t.Merge,this.mid.connect(this._left,0,0),this.side.connect(this._left,0,1),this.mid.connect(this._right,0,0),this.side.connect(this._right,0,1),this._left.connect(this._merge,0,0),this._right.connect(this._merge,0,1),this.context.getConstant(Math.SQRT1_2).connect(this._left,0,2),this.context.getConstant(Math.SQRT1_2).connect(this._right,0,2)},t.extend(t.MidSideMerge,t.AudioNode),t.MidSideMerge.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._left.dispose(),this._left=null,this._right.dispose(),this._right=null,this._merge.dispose(),this._merge=null,this},t.MidSideMerge}),t(function(t){return t.MidSideCompressor=function(e){t.AudioNode.call(this),e=t.defaultArg(e,t.MidSideCompressor.defaults),this._midSideSplit=this.input=new t.MidSideSplit,this._midSideMerge=this.output=new t.MidSideMerge,this.mid=new t.Compressor(e.mid),this.side=new t.Compressor(e.side),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),this._readOnly([\"mid\",\"side\"])},t.extend(t.MidSideCompressor,t.AudioNode),t.MidSideCompressor.defaults={mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}},t.MidSideCompressor.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable([\"mid\",\"side\"]),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this},t.MidSideCompressor}),t(function(t){return t.Mono=function(){t.AudioNode.call(this),this.createInsOuts(1,0),this._merge=this.output=new t.Merge,this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1),this.input.gain.value=t.dbToGain(-10)},t.extend(t.Mono),t.Mono.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._merge.dispose(),this._merge=null,this},t.Mono}),t(function(t){return t.MultibandCompressor=function(e){t.AudioNode.call(this),e=t.defaultArg(arguments,t.MultibandCompressor.defaults),this._splitter=this.input=new t.MultibandSplit({lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new t.Gain,this.low=new t.Compressor(e.low),this.mid=new t.Compressor(e.mid),this.high=new t.Compressor(e.high),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),this._readOnly([\"high\",\"mid\",\"low\",\"highFrequency\",\"lowFrequency\"])},t.extend(t.MultibandCompressor,t.AudioNode),t.MultibandCompressor.defaults={low:t.Compressor.defaults,mid:t.Compressor.defaults,high:t.Compressor.defaults,lowFrequency:250,highFrequency:2e3},t.MultibandCompressor.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._splitter.dispose(),this._writable([\"high\",\"mid\",\"low\",\"highFrequency\",\"lowFrequency\"]),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this._splitter=null,this.low=null,this.mid=null,this.high=null,this.lowFrequency=null,this.highFrequency=null,this},t.MultibandCompressor}),t(function(t){return t.Panner=function(e){t.AudioNode.call(this),t.Panner.hasStereoPanner?(this._panner=this.input=this.output=this.context.createStereoPanner(),this.pan=this._panner.pan):(this._crossFade=new t.CrossFade,this._merger=this.output=new t.Merge,this._splitter=this.input=new t.Split,this.pan=new t.Signal(0,t.Type.AudioRange),this._zero=new t.Zero,this._a2g=new t.AudioToGain,this._zero.connect(this._a2g),this.pan.chain(this._a2g,this._crossFade.fade),this._splitter.connect(this._crossFade,0,0),this._splitter.connect(this._crossFade,1,1),this._crossFade.a.connect(this._merger,0,0),this._crossFade.b.connect(this._merger,0,1)),this.pan.value=t.defaultArg(e,0),this._readOnly(\"pan\")},t.extend(t.Panner,t.AudioNode),t.Panner.hasStereoPanner=t.context&&t.isFunction(t.context.createStereoPanner),t.Panner.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(\"pan\"),t.Panner.hasStereoPanner?(this._panner.disconnect(),this._panner=null,this.pan=null):(this._zero.dispose(),this._zero=null,this._crossFade.dispose(),this._crossFade=null,this._splitter.dispose(),this._splitter=null,this._merger.dispose(),this._merger=null,this.pan.dispose(),this.pan=null,this._a2g.dispose(),this._a2g=null),this},t.Panner}),t(function(t){return t.Panner3D=function(){var e=t.defaults(arguments,[\"positionX\",\"positionY\",\"positionZ\"],t.Panner3D);t.AudioNode.call(this),this._panner=this.input=this.output=this.context.createPanner(),this._panner.panningModel=e.panningModel,this._panner.maxDistance=e.maxDistance,this._panner.distanceModel=e.distanceModel,this._panner.coneOuterGain=e.coneOuterGain,this._panner.coneOuterAngle=e.coneOuterAngle,this._panner.coneInnerAngle=e.coneInnerAngle,this._panner.refDistance=e.refDistance,this._panner.rolloffFactor=e.rolloffFactor,this._orientation=[e.orientationX,e.orientationY,e.orientationZ],this._position=[e.positionX,e.positionY,e.positionZ],this.orientationX=e.orientationX,this.orientationY=e.orientationY,this.orientationZ=e.orientationZ,this.positionX=e.positionX,this.positionY=e.positionY,this.positionZ=e.positionZ},t.extend(t.Panner3D,t.AudioNode),t.Panner3D.defaults={positionX:0,positionY:0,positionZ:0,orientationX:0,orientationY:0,orientationZ:0,panningModel:\"equalpower\",maxDistance:1e4,distanceModel:\"inverse\",coneOuterGain:0,coneOuterAngle:360,coneInnerAngle:360,refDistance:1,rolloffFactor:1},t.Panner3D.prototype._rampTimeConstant=.01,t.Panner3D.prototype.setPosition=function(t,e,i){if(this._panner.positionX){var n=this.now();this._panner.positionX.setTargetAtTime(t,n,this._rampTimeConstant),this._panner.positionY.setTargetAtTime(e,n,this._rampTimeConstant),this._panner.positionZ.setTargetAtTime(i,n,this._rampTimeConstant)}else this._panner.setPosition(t,e,i);return this._position=Array.prototype.slice.call(arguments),this},t.Panner3D.prototype.setOrientation=function(t,e,i){if(this._panner.orientationX){var n=this.now();this._panner.orientationX.setTargetAtTime(t,n,this._rampTimeConstant),this._panner.orientationY.setTargetAtTime(e,n,this._rampTimeConstant),this._panner.orientationZ.setTargetAtTime(i,n,this._rampTimeConstant)}else this._panner.setOrientation(t,e,i);return this._orientation=Array.prototype.slice.call(arguments),this},Object.defineProperty(t.Panner3D.prototype,\"positionX\",{set:function(t){this._position[0]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[0]}}),Object.defineProperty(t.Panner3D.prototype,\"positionY\",{set:function(t){this._position[1]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[1]}}),Object.defineProperty(t.Panner3D.prototype,\"positionZ\",{set:function(t){this._position[2]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[2]}}),Object.defineProperty(t.Panner3D.prototype,\"orientationX\",{set:function(t){this._orientation[0]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[0]}}),Object.defineProperty(t.Panner3D.prototype,\"orientationY\",{set:function(t){this._orientation[1]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[1]}}),Object.defineProperty(t.Panner3D.prototype,\"orientationZ\",{set:function(t){this._orientation[2]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[2]}}),t.Panner3D._aliasProperty=function(e){Object.defineProperty(t.Panner3D.prototype,e,{set:function(t){this._panner[e]=t},get:function(){return this._panner[e]}})},t.Panner3D._aliasProperty(\"panningModel\"),t.Panner3D._aliasProperty(\"refDistance\"),t.Panner3D._aliasProperty(\"rolloffFactor\"),t.Panner3D._aliasProperty(\"distanceModel\"),t.Panner3D._aliasProperty(\"coneInnerAngle\"),t.Panner3D._aliasProperty(\"coneOuterAngle\"),t.Panner3D._aliasProperty(\"coneOuterGain\"),t.Panner3D._aliasProperty(\"maxDistance\"),t.Panner3D.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._panner.disconnect(),this._panner=null,this._orientation=null,this._position=null,this},t.Panner3D}),t(function(t){return t.PanVol=function(){var e=t.defaults(arguments,[\"pan\",\"volume\"],t.PanVol);t.AudioNode.call(this),this._panner=this.input=new t.Panner(e.pan),this.pan=this._panner.pan,this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,this._readOnly([\"pan\",\"volume\"])},t.extend(t.PanVol,t.AudioNode),t.PanVol.defaults={pan:0,volume:0,mute:!1},Object.defineProperty(t.PanVol.prototype,\"mute\",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.PanVol.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable([\"pan\",\"volume\"]),this._panner.dispose(),this._panner=null,this.pan=null,this._volume.dispose(),this._volume=null,this.volume=null,this},t.PanVol}),t(function(t){return t.Solo=function(){var e=t.defaults(arguments,[\"solo\"],t.Solo);t.AudioNode.call(this),this.input=this.output=new t.Gain,this._soloBind=this._soloed.bind(this),this.context.on(\"solo\",this._soloBind),this.solo=e.solo},t.extend(t.Solo,t.AudioNode),t.Solo.defaults={solo:!1},Object.defineProperty(t.Solo.prototype,\"solo\",{get:function(){return this._isSoloed()},set:function(t){t?this._addSolo():this._removeSolo(),this.context.emit(\"solo\",this)}}),Object.defineProperty(t.Solo.prototype,\"muted\",{get:function(){return 0===this.input.gain.value}}),t.Solo.prototype._addSolo=function(){t.isArray(this.context._currentSolo)||(this.context._currentSolo=[]),this._isSoloed()||this.context._currentSolo.push(this)},t.Solo.prototype._removeSolo=function(){if(this._isSoloed()){var t=this.context._currentSolo.indexOf(this);this.context._currentSolo.splice(t,1)}},t.Solo.prototype._isSoloed=function(){return!!t.isArray(this.context._currentSolo)&&(0!==this.context._currentSolo.length&&-1!==this.context._currentSolo.indexOf(this))},t.Solo.prototype._noSolos=function(){return!t.isArray(this.context._currentSolo)||0===this.context._currentSolo.length},t.Solo.prototype._soloed=function(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0},t.Solo.prototype.dispose=function(){return this.context.off(\"solo\",this._soloBind),this._removeSolo(),this._soloBind=null,t.AudioNode.prototype.dispose.call(this),this},t.Solo}),t(function(t){return t.Waveform=function(){var e=t.defaults(arguments,[\"size\"],t.Waveform);e.type=t.Analyser.Type.Waveform,t.AudioNode.call(this),this._analyser=this.input=this.output=new t.Analyser(e)},t.extend(t.Waveform,t.AudioNode),t.Waveform.defaults={size:1024},t.Waveform.prototype.getValue=function(){return this._analyser.getValue()},Object.defineProperty(t.Waveform.prototype,\"size\",{get:function(){return this._analyser.size},set:function(t){this._analyser.size=t}}),t.Waveform.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._analyser.dispose(),this._analyser=null},t.Waveform}),t(function(t){return t.CtrlInterpolate=function(){var e=t.defaults(arguments,[\"values\",\"index\"],t.CtrlInterpolate);t.call(this),this.values=e.values,this.index=e.index},t.extend(t.CtrlInterpolate),t.CtrlInterpolate.defaults={index:0,values:[]},Object.defineProperty(t.CtrlInterpolate.prototype,\"value\",{get:function(){var t,e,i,n=this.index;return n=Math.min(n,this.values.length-1),t=Math.floor(n),e=this.values[t],i=this.values[Math.ceil(n)],this._interpolate(n-t,e,i)}}),t.CtrlInterpolate.prototype._interpolate=function(e,i,n){var s,o,r,a;if(t.isArray(i)){for(s=[],o=0;o<i.length;o++)s[o]=this._interpolate(e,i[o],n[o]);return s}if(t.isObject(i)){r={};for(a in i)r[a]=this._interpolate(e,i[a],n[a]);return r}return i=this._toNumber(i),n=this._toNumber(n),(1-e)*i+e*n},t.CtrlInterpolate.prototype._toNumber=function(e){return t.isNumber(e)?e:this.toSeconds(e)},t.CtrlInterpolate.prototype.dispose=function(){this.values=null},t.CtrlInterpolate}),t(function(t){return t.CtrlMarkov=function(e,i){t.call(this),this.values=t.defaultArg(e,{}),this.value=t.defaultArg(i,Object.keys(this.values)[0])},t.extend(t.CtrlMarkov),t.CtrlMarkov.prototype.next=function(){var e,i,n,s,o,r,a;if(this.values.hasOwnProperty(this.value))if(e=this.values[this.value],t.isArray(e))for(i=this._getProbDistribution(e),n=Math.random(),s=0,o=0;o<i.length;o++)r=i[o],n>s&&n<s+r&&(a=e[o],t.isObject(a)?this.value=a.value:this.value=a),s+=r;else this.value=e;return this.value},t.CtrlMarkov.prototype._getProbDistribution=function(e){var i,n,s,o=[],r=0,a=!1;for(i=0;i<e.length;i++)n=e[i],t.isObject(n)?(a=!0,o[i]=n.probability):o[i]=1/e.length,r+=o[i];if(a)for(s=0;s<o.length;s++)o[s]=o[s]/r;return o},t.CtrlMarkov.prototype.dispose=function(){this.values=null},t.CtrlMarkov}),t(function(t){return t.CtrlPattern=function(){var e=t.defaults(arguments,[\"values\",\"type\"],t.CtrlPattern);t.call(this),this.values=e.values,this.index=0,this._type=null,this._shuffled=null,this._direction=null,this.type=e.type},t.extend(t.CtrlPattern),t.CtrlPattern.Type={Up:\"up\",Down:\"down\",UpDown:\"upDown\",DownUp:\"downUp\",AlternateUp:\"alternateUp\",AlternateDown:\"alternateDown\",Random:\"random\",RandomWalk:\"randomWalk\",RandomOnce:\"randomOnce\"},t.CtrlPattern.defaults={type:t.CtrlPattern.Type.Up,values:[]},Object.defineProperty(t.CtrlPattern.prototype,\"value\",{get:function(){if(0!==this.values.length){if(1===this.values.length)return this.values[0];this.index=Math.min(this.index,this.values.length-1);var e=this.values[this.index];return this.type===t.CtrlPattern.Type.RandomOnce&&(this.values.length!==this._shuffled.length&&this._shuffleValues(),e=this.values[this._shuffled[this.index]]),e}}}),Object.defineProperty(t.CtrlPattern.prototype,\"type\",{get:function(){return this._type},set:function(e){this._type=e,this._shuffled=null,this._type===t.CtrlPattern.Type.Up||this._type===t.CtrlPattern.Type.UpDown||this._type===t.CtrlPattern.Type.RandomOnce||this._type===t.CtrlPattern.Type.AlternateUp?this.index=0:this._type!==t.CtrlPattern.Type.Down&&this._type!==t.CtrlPattern.Type.DownUp&&this._type!==t.CtrlPattern.Type.AlternateDown||(this.index=this.values.length-1),this._type===t.CtrlPattern.Type.UpDown||this._type===t.CtrlPattern.Type.AlternateUp?this._direction=t.CtrlPattern.Type.Up:this._type!==t.CtrlPattern.Type.DownUp&&this._type!==t.CtrlPattern.Type.AlternateDown||(this._direction=t.CtrlPattern.Type.Down),this._type===t.CtrlPattern.Type.RandomOnce?this._shuffleValues():this._type===t.CtrlPattern.Random&&(this.index=Math.floor(Math.random()*this.values.length))}}),t.CtrlPattern.prototype.next=function(){var e=this.type;return e===t.CtrlPattern.Type.Up?++this.index>=this.values.length&&(this.index=0):e===t.CtrlPattern.Type.Down?--this.index<0&&(this.index=this.values.length-1):e===t.CtrlPattern.Type.UpDown||e===t.CtrlPattern.Type.DownUp?(this._direction===t.CtrlPattern.Type.Up?this.index++:this.index--,this.index<0?(this.index=1,this._direction=t.CtrlPattern.Type.Up):this.index>=this.values.length&&(this.index=this.values.length-2,this._direction=t.CtrlPattern.Type.Down)):e===t.CtrlPattern.Type.Random?this.index=Math.floor(Math.random()*this.values.length):e===t.CtrlPattern.Type.RandomWalk?Math.random()<.5?(this.index--,this.index=Math.max(this.index,0)):(this.index++,this.index=Math.min(this.index,this.values.length-1)):e===t.CtrlPattern.Type.RandomOnce?++this.index>=this.values.length&&(this.index=0,this._shuffleValues()):e===t.CtrlPattern.Type.AlternateUp?(this._direction===t.CtrlPattern.Type.Up?(this.index+=2,this._direction=t.CtrlPattern.Type.Down):(this.index-=1,this._direction=t.CtrlPattern.Type.Up),this.index>=this.values.length&&(this.index=0,this._direction=t.CtrlPattern.Type.Up)):e===t.CtrlPattern.Type.AlternateDown&&(this._direction===t.CtrlPattern.Type.Up?(this.index+=1,this._direction=t.CtrlPattern.Type.Down):(this.index-=2,this._direction=t.CtrlPattern.Type.Up),this.index<0&&(this.index=this.values.length-1,this._direction=t.CtrlPattern.Type.Down)),this.value},t.CtrlPattern.prototype._shuffleValues=function(){var t,e,i=[];for(this._shuffled=[],t=0;t<this.values.length;t++)i[t]=t;for(;i.length>0;)e=i.splice(Math.floor(i.length*Math.random()),1),this._shuffled.push(e[0])},t.CtrlPattern.prototype.dispose=function(){this._shuffled=null,this.values=null},t.CtrlPattern}),t(function(t){return t.CtrlRandom=function(){var e=t.defaults(arguments,[\"min\",\"max\"],t.CtrlRandom);t.call(this),this.min=e.min,this.max=e.max,this.integer=e.integer},t.extend(t.CtrlRandom),t.CtrlRandom.defaults={min:0,max:1,integer:!1},Object.defineProperty(t.CtrlRandom.prototype,\"value\",{get:function(){var t=this.toSeconds(this.min),e=this.toSeconds(this.max),i=Math.random(),n=i*t+(1-i)*e;return this.integer&&(n=Math.floor(n)),n}}),t.CtrlRandom}),t(function(t){return window.AudioBuffer&&!AudioBuffer.prototype.copyToChannel&&(AudioBuffer.prototype.copyToChannel=function(t,e,i){var n,s=this.getChannelData(e);for(i=i||0,n=0;n<s.length;n++)s[n+i]=t[n]},AudioBuffer.prototype.copyFromChannel=function(t,e,i){var n,s=this.getChannelData(e);for(i=i||0,n=0;n<t.length;n++)t[n]=s[n+i]}),t.Buffer=function(){var e=t.defaults(arguments,[\"url\",\"onload\",\"onerror\"],t.Buffer);t.call(this),this._buffer=null,this._reversed=e.reverse,this._xhr=null,e.url instanceof AudioBuffer||e.url instanceof t.Buffer?(this.set(e.url),e.onload&&e.onload(this)):t.isString(e.url)&&this.load(e.url,e.onload,e.onerror)},t.extend(t.Buffer),t.Buffer.defaults={url:void 0,reverse:!1},t.Buffer.prototype.set=function(e){return e instanceof t.Buffer?this._buffer=e.get():this._buffer=e,this},t.Buffer.prototype.get=function(){return this._buffer},t.Buffer.prototype.load=function(e,i,n){return new Promise(function(s,o){this._xhr=t.Buffer.load(e,function(t){this._xhr=null,this.set(t),s(this),i&&i(this)}.bind(this),function(t){this._xhr=null,o(t),n&&n(t)}.bind(this))}.bind(this))},t.Buffer.prototype.dispose=function(){return t.prototype.dispose.call(this),this._buffer=null,this._xhr&&(t.Buffer._removeFromDownloadQueue(this._xhr),this._xhr.abort(),this._xhr=null),this},Object.defineProperty(t.Buffer.prototype,\"loaded\",{get:function(){return this.length>0}}),Object.defineProperty(t.Buffer.prototype,\"duration\",{get:function(){return this._buffer?this._buffer.duration:0}}),Object.defineProperty(t.Buffer.prototype,\"length\",{get:function(){return this._buffer?this._buffer.length:0}}),Object.defineProperty(t.Buffer.prototype,\"numberOfChannels\",{get:function(){return this._buffer?this._buffer.numberOfChannels:0}}),t.Buffer.prototype.fromArray=function(t){var e,i=t[0].length>0,n=i?t.length:1,s=i?t[0].length:t.length,o=this.context.createBuffer(n,s,this.context.sampleRate);for(i||1!==n||(t=[t]),e=0;e<n;e++)o.copyToChannel(t[e],e);return this._buffer=o,this},t.Buffer.prototype.toMono=function(e){var i,n,s,o,r;if(t.isNumber(e))this.fromArray(this.toArray(e));else{for(i=new Float32Array(this.length),n=this.numberOfChannels,s=0;s<n;s++)for(o=this.toArray(s),r=0;r<o.length;r++)i[r]+=o[r];i=i.map(function(t){return t/n}),this.fromArray(i)}return this},t.Buffer.prototype.toArray=function(e){var i,n;if(t.isNumber(e))return this.getChannelData(e);if(1===this.numberOfChannels)return this.toArray(0);for(i=[],n=0;n<this.numberOfChannels;n++)i[n]=this.getChannelData(n);return i},t.Buffer.prototype.getChannelData=function(t){return this._buffer.getChannelData(t)},t.Buffer.prototype.slice=function(e,i){var n,s,o,r;for(i=t.defaultArg(i,this.duration),n=Math.floor(this.context.sampleRate*this.toSeconds(e)),s=Math.floor(this.context.sampleRate*this.toSeconds(i)),o=[],r=0;r<this.numberOfChannels;r++)o[r]=this.toArray(r).slice(n,s);return(new t.Buffer).fromArray(o)},t.Buffer.prototype._reverse=function(){if(this.loaded)for(var t=0;t<this.numberOfChannels;t++)Array.prototype.reverse.call(this.getChannelData(t));return this},Object.defineProperty(t.Buffer.prototype,\"reverse\",{get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())}}),t.Emitter.mixin(t.Buffer),t.Buffer._downloadQueue=[],t.Buffer.baseUrl=\"\",t.Buffer.fromArray=function(e){return(new t.Buffer).fromArray(e)},t.Buffer._removeFromDownloadQueue=function(e){var i=t.Buffer._downloadQueue.indexOf(e);-1!==i&&t.Buffer._downloadQueue.splice(i,1)},t.Buffer.load=function(e,i,n){function s(e){if(t.Buffer._removeFromDownloadQueue(u),t.Buffer.emit(\"error\",e),!n)throw e;n(e)}function o(){var e,i=0\n;for(e=0;e<t.Buffer._downloadQueue.length;e++)i+=t.Buffer._downloadQueue[e].progress;t.Buffer.emit(\"progress\",i/t.Buffer._downloadQueue.length)}var r,a,l,h,u;if(i=t.defaultArg(i,t.noOp),r=e.match(/\\[(.+\\|?)+\\]$/)){for(a=r[1].split(\"|\"),l=a[0],h=0;h<a.length;h++)if(t.Buffer.supportsType(a[h])){l=a[h];break}e=e.replace(r[0],l)}return u=new XMLHttpRequest,u.open(\"GET\",t.Buffer.baseUrl+e,!0),u.responseType=\"arraybuffer\",u.progress=0,t.Buffer._downloadQueue.push(u),u.addEventListener(\"load\",function(){200===u.status?t.context.decodeAudioData(u.response,function(e){u.progress=1,o(),i(e),t.Buffer._removeFromDownloadQueue(u),0===t.Buffer._downloadQueue.length&&t.Buffer.emit(\"load\")},function(){t.Buffer._removeFromDownloadQueue(u),s(\"Tone.Buffer: could not decode audio data: \"+e)}):s(\"Tone.Buffer: could not locate file: \"+e)}),u.addEventListener(\"error\",s),u.addEventListener(\"progress\",function(t){t.lengthComputable&&(u.progress=t.loaded/t.total*.95,o())}),u.send(),u},t.Buffer.cancelDownloads=function(){return t.Buffer._downloadQueue.slice().forEach(function(e){t.Buffer._removeFromDownloadQueue(e),e.abort()}),t.Buffer},t.Buffer.supportsType=function(t){var e=t.split(\".\");return e=e[e.length-1],\"\"!==document.createElement(\"audio\").canPlayType(\"audio/\"+e)},t.loaded=function(){function e(){t.Buffer.off(\"load\",i),t.Buffer.off(\"error\",n)}var i,n;return new Promise(function(e,s){i=function(){e()},n=function(){s()},t.Buffer.on(\"load\",i),t.Buffer.on(\"error\",n)}).then(e).catch(function(t){throw e(),new Error(t)})},t.Buffer}),t(function(t){return t.Buffers=function(e){var i,n,s=Array.prototype.slice.call(arguments);s.shift(),i=t.defaults(s,[\"onload\",\"baseUrl\"],t.Buffers),t.call(this),this._buffers={},this.baseUrl=i.baseUrl,this._loadingCount=0;for(n in e)this._loadingCount++,this.add(n,e[n],this._bufferLoaded.bind(this,i.onload))},t.extend(t.Buffers),t.Buffers.defaults={onload:t.noOp,baseUrl:\"\"},t.Buffers.prototype.has=function(t){return this._buffers.hasOwnProperty(t)},t.Buffers.prototype.get=function(t){if(this.has(t))return this._buffers[t];throw new Error(\"Tone.Buffers: no buffer named \"+t)},t.Buffers.prototype._bufferLoaded=function(t){0===--this._loadingCount&&t&&t(this)},Object.defineProperty(t.Buffers.prototype,\"loaded\",{get:function(){var t,e,i=!0;for(t in this._buffers)e=this.get(t),i=i&&e.loaded;return i}}),t.Buffers.prototype.add=function(e,i,n){return n=t.defaultArg(n,t.noOp),i instanceof t.Buffer?(this._buffers[e]=i,n(this)):i instanceof AudioBuffer?(this._buffers[e]=new t.Buffer(i),n(this)):t.isString(i)&&(this._buffers[e]=new t.Buffer(this.baseUrl+i,n)),this},t.Buffers.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e in this._buffers)this._buffers[e].dispose();return this._buffers=null,this},t.Buffers}),t(function(t){var e={};return t.prototype.send=function(i,n){e.hasOwnProperty(i)||(e[i]=this.context.createGain()),n=t.defaultArg(n,0);var s=new t.Gain(n,t.Type.Decibels);return this.output.chain(s,e[i]),s},t.prototype.receive=function(t,i){return e.hasOwnProperty(t)||(e[t]=this.context.createGain()),e[t].connect(this,0,i),this},t.Context.on(\"init\",function(t){t.Buses?e=t.Buses:(e={},t.Buses=e)}),t}),t(function(t){return t.Draw=function(){t.call(this),this._events=new t.Timeline,this.expiration=.25,this.anticipation=.008,this._boundDrawLoop=this._drawLoop.bind(this)},t.extend(t.Draw),t.Draw.prototype.schedule=function(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&requestAnimationFrame(this._boundDrawLoop),this},t.Draw.prototype.cancel=function(t){return this._events.cancel(this.toSeconds(t)),this},t.Draw.prototype._drawLoop=function(){for(var e,i=t.now();this._events.length&&this._events.peek().time-this.anticipation<=i;)e=this._events.shift(),i-e.time<=this.expiration&&e.callback();this._events.length>0&&requestAnimationFrame(this._boundDrawLoop)},t.Draw=new t.Draw,t.Draw}),t(function(t){t.Listener=function(){t.call(this),this._orientation=[0,0,0,0,0,0],this._position=[0,0,0],t.getContext(function(){this.set(e.defaults)}.bind(this))},t.extend(t.Listener),t.Listener.defaults={positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:1,upX:0,upY:1,upZ:0},t.Listener.prototype._rampTimeConstant=.01,t.Listener.prototype.setPosition=function(t,e,i){if(this.context.listener.positionX){var n=this.now();this.context.listener.positionX.setTargetAtTime(t,n,this._rampTimeConstant),this.context.listener.positionY.setTargetAtTime(e,n,this._rampTimeConstant),this.context.listener.positionZ.setTargetAtTime(i,n,this._rampTimeConstant)}else this.context.listener.setPosition(t,e,i);return this._position=Array.prototype.slice.call(arguments),this},t.Listener.prototype.setOrientation=function(t,e,i,n,s,o){if(this.context.listener.forwardX){var r=this.now();this.context.listener.forwardX.setTargetAtTime(t,r,this._rampTimeConstant),this.context.listener.forwardY.setTargetAtTime(e,r,this._rampTimeConstant),this.context.listener.forwardZ.setTargetAtTime(i,r,this._rampTimeConstant),this.context.listener.upX.setTargetAtTime(n,r,this._rampTimeConstant),this.context.listener.upY.setTargetAtTime(s,r,this._rampTimeConstant),this.context.listener.upZ.setTargetAtTime(o,r,this._rampTimeConstant)}else this.context.listener.setOrientation(t,e,i,n,s,o);return this._orientation=Array.prototype.slice.call(arguments),this},Object.defineProperty(t.Listener.prototype,\"positionX\",{set:function(t){this._position[0]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[0]}}),Object.defineProperty(t.Listener.prototype,\"positionY\",{set:function(t){this._position[1]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[1]}}),Object.defineProperty(t.Listener.prototype,\"positionZ\",{set:function(t){this._position[2]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[2]}}),Object.defineProperty(t.Listener.prototype,\"forwardX\",{set:function(t){this._orientation[0]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[0]}}),Object.defineProperty(t.Listener.prototype,\"forwardY\",{set:function(t){this._orientation[1]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[1]}}),Object.defineProperty(t.Listener.prototype,\"forwardZ\",{set:function(t){this._orientation[2]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[2]}}),Object.defineProperty(t.Listener.prototype,\"upX\",{set:function(t){this._orientation[3]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[3]}}),Object.defineProperty(t.Listener.prototype,\"upY\",{set:function(t){this._orientation[4]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[4]}}),Object.defineProperty(t.Listener.prototype,\"upZ\",{set:function(t){this._orientation[5]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[5]}}),t.Listener.prototype.dispose=function(){return this._orientation=null,this._position=null,this};var e=t.Listener;return t.Listener=new e,t.Context.on(\"init\",function(i){i.Listener instanceof e?t.Listener=i.Listener:t.Listener=new e,i.Listener=t.Listener}),t.Listener}),t(function(t){return!window.hasOwnProperty(\"OfflineAudioContext\")&&window.hasOwnProperty(\"webkitOfflineAudioContext\")&&(window.OfflineAudioContext=window.webkitOfflineAudioContext),t.OfflineContext=function(e,i,n){var s=new OfflineAudioContext(e,i*n,n);t.Context.call(this,{context:s,clockSource:\"offline\",lookAhead:0,updateInterval:128/n}),this._duration=i,this._currentTime=0},t.extend(t.OfflineContext,t.Context),t.OfflineContext.prototype.now=function(){return this._currentTime},t.OfflineContext.prototype.render=function(){for(;this._duration-this._currentTime>=0;)this.emit(\"tick\"),this._currentTime+=this.blockTime;return new Promise(function(t){this._context.oncomplete=function(e){t(e.renderedBuffer)},this._context.startRendering()}.bind(this))},t.OfflineContext.prototype.close=function(){this._context=null},t.OfflineContext}),t(function(t){return t.Offline=function(e,i){var n,s=t.context.sampleRate,o=t.context,r=new t.OfflineContext(2,i,s);return t.context=r,e(t.Transport),n=r.render(),t.context=o,n.then(function(e){return new t.Buffer(e)})},t.Offline}),t(function(t){return t.Effect=function(){var e=t.defaults(arguments,[\"wet\"],t.Effect);t.AudioNode.call(this),this.createInsOuts(1,1),this._dryWet=new t.CrossFade(e.wet),this.wet=this._dryWet.fade,this.effectSend=new t.Gain,this.effectReturn=new t.Gain,this.input.connect(this._dryWet.a),this.input.connect(this.effectSend),this.effectReturn.connect(this._dryWet.b),this._dryWet.connect(this.output),this._readOnly([\"wet\"])},t.extend(t.Effect,t.AudioNode),t.Effect.defaults={wet:1},t.Effect.prototype.connectEffect=function(t){return this.effectSend.chain(t,this.effectReturn),this},t.Effect.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this.effectSend.dispose(),this.effectSend=null,this.effectReturn.dispose(),this.effectReturn=null,this._writable([\"wet\"]),this.wet=null,this},t.Effect}),t(function(t){return t.AutoFilter=function(){var e=t.defaults(arguments,[\"frequency\",\"baseFrequency\",\"octaves\"],t.AutoFilter);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.filter=new t.Filter(e.filter),this._octaves=0,this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.type=e.type,this._readOnly([\"frequency\",\"depth\"]),this.octaves=e.octaves,this.baseFrequency=e.baseFrequency},t.extend(t.AutoFilter,t.Effect),t.AutoFilter.defaults={frequency:1,type:\"sine\",depth:1,baseFrequency:200,octaves:2.6,filter:{type:\"lowpass\",rolloff:-12,Q:1}},t.AutoFilter.prototype.start=function(t){return this._lfo.start(t),this},t.AutoFilter.prototype.stop=function(t){return this._lfo.stop(t),this},t.AutoFilter.prototype.sync=function(t){return this._lfo.sync(t),this},t.AutoFilter.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.AutoFilter.prototype,\"type\",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),Object.defineProperty(t.AutoFilter.prototype,\"baseFrequency\",{get:function(){return this._lfo.min},set:function(t){this._lfo.min=this.toFrequency(t),this.octaves=this._octaves}}),Object.defineProperty(t.AutoFilter.prototype,\"octaves\",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._lfo.max=this.baseFrequency*Math.pow(2,t)}}),t.AutoFilter.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this.filter.dispose(),this.filter=null,this._writable([\"frequency\",\"depth\"]),this.frequency=null,this.depth=null,this},t.AutoFilter}),t(function(t){return t.AutoPanner=function(){var e=t.defaults(arguments,[\"frequency\"],t.AutoPanner);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth,min:-1,max:1}),this.depth=this._lfo.amplitude,this._panner=new t.Panner,this.frequency=this._lfo.frequency,this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this.type=e.type,this._readOnly([\"depth\",\"frequency\"])},t.extend(t.AutoPanner,t.Effect),t.AutoPanner.defaults={frequency:1,type:\"sine\",depth:1},t.AutoPanner.prototype.start=function(t){return this._lfo.start(t),this},t.AutoPanner.prototype.stop=function(t){return this._lfo.stop(t),this},t.AutoPanner.prototype.sync=function(t){return this._lfo.sync(t),this},t.AutoPanner.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.AutoPanner.prototype,\"type\",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),t.AutoPanner.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this._panner.dispose(),this._panner=null,this._writable([\"depth\",\"frequency\"]),this.frequency=null,this.depth=null,this},t.AutoPanner}),t(function(t){return t.AutoWah=function(){var e=t.defaults(arguments,[\"baseFrequency\",\"octaves\",\"sensitivity\"],t.AutoWah);t.Effect.call(this,e),this.follower=new t.Follower(e.follower),this._sweepRange=new t.ScaleExp(0,1,.5),this._baseFrequency=e.baseFrequency,this._octaves=e.octaves,this._inputBoost=new t.Gain,this._bandpass=new t.Filter({rolloff:-48,frequency:0,Q:e.Q}),this._peaking=new t.Filter(0,\"peaking\"),this._peaking.gain.value=e.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this.follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=e.sensitivity,this._readOnly([\"gain\",\"Q\"])},t.extend(t.AutoWah,t.Effect),t.AutoWah.defaults={baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:{attack:.3,release:.5}},Object.defineProperty(t.AutoWah.prototype,\"octaves\",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._setSweepRange()}}),Object.defineProperty(t.AutoWah.prototype,\"baseFrequency\",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._setSweepRange()}}),Object.defineProperty(t.AutoWah.prototype,\"sensitivity\",{get:function(){return t.gainToDb(1/this._inputBoost.gain.value)},set:function(e){this._inputBoost.gain.value=1/t.dbToGain(e)}}),t.AutoWah.prototype._setSweepRange=function(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)},t.AutoWah.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this.follower.dispose(),this.follower=null,this._sweepRange.dispose(),this._sweepRange=null,this._bandpass.dispose(),this._bandpass=null,this._peaking.dispose(),this._peaking=null,this._inputBoost.dispose(),this._inputBoost=null,this._writable([\"gain\",\"Q\"]),this.gain=null,this.Q=null,this},t.AutoWah}),t(function(t){return t.BitCrusher=function(){var e,i=t.defaults(arguments,[\"bits\"],t.BitCrusher);t.Effect.call(this,i),e=1/Math.pow(2,i.bits-1),this._subtract=new t.Subtract,this._modulo=new t.Modulo(e),this._bits=i.bits,this.effectSend.fan(this._subtract,this._modulo),this._modulo.connect(this._subtract,0,1),this._subtract.connect(this.effectReturn)},t.extend(t.BitCrusher,t.Effect),t.BitCrusher.defaults={bits:4},Object.defineProperty(t.BitCrusher.prototype,\"bits\",{get:function(){return this._bits},set:function(t){this._bits=t;var e=1/Math.pow(2,t-1);this._modulo.value=e}}),t.BitCrusher.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._subtract.dispose(),this._subtract=null,this._modulo.dispose(),this._modulo=null,this},t.BitCrusher}),t(function(t){return t.Chebyshev=function(){var e=t.defaults(arguments,[\"order\"],t.Chebyshev);t.Effect.call(this,e),this._shaper=new t.WaveShaper(4096),this._order=e.order,this.connectEffect(this._shaper),this.order=e.order,this.oversample=e.oversample},t.extend(t.Chebyshev,t.Effect),t.Chebyshev.defaults={order:1,oversample:\"none\"},t.Chebyshev.prototype._getCoefficient=function(t,e,i){return i.hasOwnProperty(e)?i[e]:(i[e]=0===e?0:1===e?t:2*t*this._getCoefficient(t,e-1,i)-this._getCoefficient(t,e-2,i),i[e])},Object.defineProperty(t.Chebyshev.prototype,\"order\",{get:function(){return this._order},set:function(t){var e,i,n,s;for(this._order=t,e=new Array(4096),i=e.length,n=0;n<i;++n)s=2*n/i-1,e[n]=0===s?0:this._getCoefficient(s,t,{});this._shaper.curve=e}}),Object.defineProperty(t.Chebyshev.prototype,\"oversample\",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.Chebyshev.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},t.Chebyshev}),t(function(t){return t.StereoEffect=function(){t.AudioNode.call(this);var e=t.defaults(arguments,[\"wet\"],t.Effect);this.createInsOuts(1,1),this._dryWet=new t.CrossFade(e.wet),this.wet=this._dryWet.fade,this._split=new t.Split,this.effectSendL=this._split.left,this.effectSendR=this._split.right,this._merge=new t.Merge,this.effectReturnL=this._merge.left,this.effectReturnR=this._merge.right,this.input.connect(this._split),this.input.connect(this._dryWet,0,0),this._merge.connect(this._dryWet,0,1),this._dryWet.connect(this.output),this._readOnly([\"wet\"])},t.extend(t.StereoEffect,t.Effect),t.StereoEffect.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this._split.dispose(),this._split=null,this._merge.dispose(),this._merge=null,this.effectSendL=null,this.effectSendR=null,this.effectReturnL=null,this.effectReturnR=null,this._writable([\"wet\"]),this.wet=null,this},t.StereoEffect}),t(function(t){return t.FeedbackEffect=function(){var e=t.defaults(arguments,[\"feedback\"],t.FeedbackEffect);t.Effect.call(this,e),this._feedbackGain=new t.Gain(e.feedback,t.Type.NormalRange),this.feedback=this._feedbackGain.gain,this.effectReturn.chain(this._feedbackGain,this.effectSend),this._readOnly([\"feedback\"])},t.extend(t.FeedbackEffect,t.Effect),t.FeedbackEffect.defaults={feedback:.125},t.FeedbackEffect.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._writable([\"feedback\"]),this._feedbackGain.dispose(),this._feedbackGain=null,this.feedback=null,this},t.FeedbackEffect}),t(function(t){return t.StereoXFeedbackEffect=function(){var e=t.defaults(arguments,[\"feedback\"],t.FeedbackEffect);t.StereoEffect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackLR=new t.Gain,this._feedbackRL=new t.Gain,this.effectReturnL.chain(this._feedbackLR,this.effectSendR),this.effectReturnR.chain(this._feedbackRL,this.effectSendL),this.feedback.fan(this._feedbackLR.gain,this._feedbackRL.gain),this._readOnly([\"feedback\"])},t.extend(t.StereoXFeedbackEffect,t.StereoEffect),t.StereoXFeedbackEffect.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable([\"feedback\"]),this.feedback.dispose(),this.feedback=null,this._feedbackLR.dispose(),this._feedbackLR=null,this._feedbackRL.dispose(),this._feedbackRL=null,this},t.StereoXFeedbackEffect}),t(function(t){return t.Chorus=function(){var e=t.defaults(arguments,[\"frequency\",\"delayTime\",\"depth\"],t.Chorus);t.StereoXFeedbackEffect.call(this,e),this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new t.LFO({frequency:e.frequency,min:0,max:1}),this._lfoR=new t.LFO({frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new t.Delay,this._delayNodeR=new t.Delay,this.frequency=this._lfoL.frequency,this.effectSendL.chain(this._delayNodeL,this.effectReturnL),this.effectSendR.chain(this._delayNodeR,this.effectReturnR),this.effectSendL.connect(this.effectReturnL),this.effectSendR.connect(this.effectReturnR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this._lfoL.start(),this._lfoR.start(),this._lfoL.frequency.connect(this._lfoR.frequency),this.depth=this._depth,this.frequency.value=e.frequency,this.type=e.type,this._readOnly([\"frequency\"]),this.spread=e.spread},t.extend(t.Chorus,t.StereoXFeedbackEffect),t.Chorus.defaults={frequency:1.5,delayTime:3.5,depth:.7,feedback:.1,type:\"sine\",spread:180},Object.defineProperty(t.Chorus.prototype,\"depth\",{get:function(){return this._depth},set:function(t){this._depth=t;var e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}}),Object.defineProperty(t.Chorus.prototype,\"delayTime\",{get:function(){return 1e3*this._delayTime},set:function(t){this._delayTime=t/1e3,this.depth=this._depth}}),Object.defineProperty(t.Chorus.prototype,\"type\",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),Object.defineProperty(t.Chorus.prototype,\"spread\",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}}),t.Chorus.prototype.dispose=function(){return t.StereoXFeedbackEffect.prototype.dispose.call(this),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._delayNodeL.dispose(),this._delayNodeL=null,this._delayNodeR.dispose(),this._delayNodeR=null,this._writable(\"frequency\"),this.frequency=null,this},t.Chorus}),t(function(t){return t.Convolver=function(){var e=t.defaults(arguments,[\"url\",\"onload\"],t.Convolver);t.Effect.call(this,e),this._convolver=this.context.createConvolver(),this._buffer=new t.Buffer,t.isString(e.url)?this._buffer.load(e.url,function(t){this.buffer=t,e.onload()}.bind(this)):e.url&&(this.buffer=e.url,e.onload()),this.connectEffect(this._convolver)},t.extend(t.Convolver,t.Effect),t.Convolver.defaults={onload:t.noOp},Object.defineProperty(t.Convolver.prototype,\"buffer\",{get:function(){return this._buffer.get()},set:function(t){this._buffer.set(t),this._convolver.buffer=this._buffer.get()}}),t.Convolver.prototype.load=function(t,e){return this._buffer.load(t,function(t){this.buffer=t,e&&e()}.bind(this))},t.Convolver.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._convolver.disconnect(),this._convolver=null,this._buffer.dispose(),this._buffer=null,this},t.Convolver}),t(function(t){return t.Distortion=function(){var e=t.defaults(arguments,[\"distortion\"],t.Distortion);t.Effect.call(this,e),this._shaper=new t.WaveShaper(4096),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample},t.extend(t.Distortion,t.Effect),t.Distortion.defaults={distortion:.4,oversample:\"none\"},Object.defineProperty(t.Distortion.prototype,\"distortion\",{get:function(){return this._distortion},set:function(t){var e,i;this._distortion=t,e=100*t,i=Math.PI/180,this._shaper.setMap(function(t){return Math.abs(t)<.001?0:(3+e)*t*20*i/(Math.PI+e*Math.abs(t))})}}),Object.defineProperty(t.Distortion.prototype,\"oversample\",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.Distortion.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},t.Distortion}),t(function(t){return t.FeedbackDelay=function(){var e=t.defaults(arguments,[\"delayTime\",\"feedback\"],t.FeedbackDelay);t.FeedbackEffect.call(this,e),this._delayNode=new t.Delay(e.delayTime),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),this._readOnly([\"delayTime\"])},t.extend(t.FeedbackDelay,t.FeedbackEffect),t.FeedbackDelay.defaults={delayTime:.25},t.FeedbackDelay.prototype.dispose=function(){return t.FeedbackEffect.prototype.dispose.call(this),this._delayNode.dispose(),this._delayNode=null,this._writable([\"delayTime\"]),this.delayTime=null,this},t.FeedbackDelay}),t(function(t){var e=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],i=[225,556,441,341];return t.Freeverb=function(){var n,s,o,r,a,l,h=t.defaults(arguments,[\"roomSize\",\"dampening\"],t.Freeverb);for(t.StereoEffect.call(this,h),this.roomSize=new t.Signal(h.roomSize,t.Type.NormalRange),this.dampening=new t.Signal(h.dampening,t.Type.Frequency),this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[],n=0;n<i.length;n++)s=this.context.createBiquadFilter(),s.type=\"allpass\",s.frequency.value=i[n],this._allpassFiltersL.push(s);for(o=0;o<i.length;o++)r=this.context.createBiquadFilter(),r.type=\"allpass\",r.frequency.value=i[o],this._allpassFiltersR.push(r);for(a=0;a<e.length;a++)l=new t.LowpassCombFilter(e[a]),a<e.length/2?this.effectSendL.chain(l,this._allpassFiltersL[0]):this.effectSendR.chain(l,this._allpassFiltersR[0]),this.roomSize.connect(l.resonance),this.dampening.connect(l.dampening),this._combFilters.push(l);t.connectSeries.apply(t,this._allpassFiltersL),t.connectSeries.apply(t,this._allpassFiltersR),this._allpassFiltersL[this._allpassFiltersL.length-1].connect(this.effectReturnL),this._allpassFiltersR[this._allpassFiltersR.length-1].connect(this.effectReturnR),this._readOnly([\"roomSize\",\"dampening\"])},t.extend(t.Freeverb,t.StereoEffect),t.Freeverb.defaults={roomSize:.7,dampening:3e3},t.Freeverb.prototype.dispose=function(){var e,i,n;for(t.StereoEffect.prototype.dispose.call(this),e=0;e<this._allpassFiltersL.length;e++)this._allpassFiltersL[e].disconnect(),this._allpassFiltersL[e]=null;for(this._allpassFiltersL=null,i=0;i<this._allpassFiltersR.length;i++)this._allpassFiltersR[i].disconnect(),this._allpassFiltersR[i]=null;for(this._allpassFiltersR=null,n=0;n<this._combFilters.length;n++)this._combFilters[n].dispose(),this._combFilters[n]=null;return this._combFilters=null,this._writable([\"roomSize\",\"dampening\"]),this.roomSize.dispose(),this.roomSize=null,this.dampening.dispose(),this.dampening=null,this},t.Freeverb}),t(function(t){var e=[.06748,.06404,.08212,.09004],i=[.773,.802,.753,.733],n=[347,113,37];return t.JCReverb=function(){var s,o,r,a,l=t.defaults(arguments,[\"roomSize\"],t.JCReverb);for(t.StereoEffect.call(this,l),this.roomSize=new t.Signal(l.roomSize,t.Type.NormalRange),this._scaleRoomSize=new t.Scale(-.733,.197),this._allpassFilters=[],this._feedbackCombFilters=[],s=0;s<n.length;s++)o=this.context.createBiquadFilter(),o.type=\"allpass\",o.frequency.value=n[s],this._allpassFilters.push(o);for(r=0;r<e.length;r++)a=new t.FeedbackCombFilter(e[r],.1),this._scaleRoomSize.connect(a.resonance),a.resonance.value=i[r],this._allpassFilters[this._allpassFilters.length-1].connect(a),r<e.length/2?a.connect(this.effectReturnL):a.connect(this.effectReturnR),this._feedbackCombFilters.push(a);this.roomSize.connect(this._scaleRoomSize),t.connectSeries.apply(t,this._allpassFilters),this.effectSendL.connect(this._allpassFilters[0]),this.effectSendR.connect(this._allpassFilters[0]),this._readOnly([\"roomSize\"])},t.extend(t.JCReverb,t.StereoEffect),t.JCReverb.defaults={roomSize:.5},t.JCReverb.prototype.dispose=function(){var e,i;for(t.StereoEffect.prototype.dispose.call(this),e=0;e<this._allpassFilters.length;e++)this._allpassFilters[e].disconnect(),this._allpassFilters[e]=null;for(this._allpassFilters=null,i=0;i<this._feedbackCombFilters.length;i++)this._feedbackCombFilters[i].dispose(),this._feedbackCombFilters[i]=null;return this._feedbackCombFilters=null,this._writable([\"roomSize\"]),this.roomSize.dispose(),this.roomSize=null,this._scaleRoomSize.dispose(),this._scaleRoomSize=null,this},t.JCReverb}),t(function(t){return t.MidSideEffect=function(){t.Effect.apply(this,arguments),this._midSideSplit=new t.MidSideSplit,this._midSideMerge=new t.MidSideMerge,this.midSend=this._midSideSplit.mid,this.sideSend=this._midSideSplit.side,this.midReturn=this._midSideMerge.mid,this.sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)},t.extend(t.MidSideEffect,t.Effect),t.MidSideEffect.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this.midSend=null,this.sideSend=null,this.midReturn=null,this.sideReturn=null,this},t.MidSideEffect}),t(function(t){return t.Phaser=function(){var e=t.defaults(arguments,[\"frequency\",\"octaves\",\"baseFrequency\"],t.Phaser);t.StereoEffect.call(this,e),this._lfoL=new t.LFO(e.frequency,0,1),this._lfoR=new t.LFO(e.frequency,0,1),this._lfoR.phase=180,this._baseFrequency=e.baseFrequency,this._octaves=e.octaves,this.Q=new t.Signal(e.Q,t.Type.Positive),this._filtersL=this._makeFilters(e.stages,this._lfoL,this.Q),this._filtersR=this._makeFilters(e.stages,this._lfoR,this.Q),this.frequency=this._lfoL.frequency,this.frequency.value=e.frequency,this.effectSendL.connect(this._filtersL[0]),this.effectSendR.connect(this._filtersR[0]),this._filtersL[e.stages-1].connect(this.effectReturnL),this._filtersR[e.stages-1].connect(this.effectReturnR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=e.baseFrequency,this.octaves=e.octaves,this._lfoL.start(),this._lfoR.start(),this._readOnly([\"frequency\",\"Q\"])},t.extend(t.Phaser,t.StereoEffect),t.Phaser.defaults={frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350},t.Phaser.prototype._makeFilters=function(e,i,n){var s,o,r=new Array(e);for(s=0;s<e;s++)o=this.context.createBiquadFilter(),o.type=\"allpass\",n.connect(o.Q),i.connect(o.frequency),r[s]=o;return t.connectSeries.apply(t,r),r},Object.defineProperty(t.Phaser.prototype,\"octaves\",{get:function(){return this._octaves},set:function(t){this._octaves=t;var e=this._baseFrequency*Math.pow(2,t);this._lfoL.max=e,this._lfoR.max=e}}),Object.defineProperty(t.Phaser.prototype,\"baseFrequency\",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._lfoL.min=t,this._lfoR.min=t,this.octaves=this._octaves}}),t.Phaser.prototype.dispose=function(){var e,i;for(t.StereoEffect.prototype.dispose.call(this),this._writable([\"frequency\",\"Q\"]),this.Q.dispose(),this.Q=null,this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,e=0;e<this._filtersL.length;e++)this._filtersL[e].disconnect(),this._filtersL[e]=null;for(this._filtersL=null,i=0;i<this._filtersR.length;i++)this._filtersR[i].disconnect(),this._filtersR[i]=null;return this._filtersR=null,this.frequency=null,this},t.Phaser}),t(function(t){return t.PingPongDelay=function(){var e=t.defaults(arguments,[\"delayTime\",\"feedback\"],t.PingPongDelay);t.StereoXFeedbackEffect.call(this,e),this._leftDelay=new t.Delay(0,e.maxDelayTime),this._rightDelay=new t.Delay(0,e.maxDelayTime),this._rightPreDelay=new t.Delay(0,e.maxDelayTime),this.delayTime=new t.Signal(e.delayTime,t.Type.Time),this.effectSendL.chain(this._leftDelay,this.effectReturnL),this.effectSendR.chain(this._rightPreDelay,this._rightDelay,this.effectReturnR),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackLR.disconnect(),this._feedbackLR.connect(this._rightDelay),this._readOnly([\"delayTime\"])},t.extend(t.PingPongDelay,t.StereoXFeedbackEffect),t.PingPongDelay.defaults={delayTime:.25,maxDelayTime:1},t.PingPongDelay.prototype.dispose=function(){return t.StereoXFeedbackEffect.prototype.dispose.call(this),this._leftDelay.dispose(),this._leftDelay=null,this._rightDelay.dispose(),this._rightDelay=null,this._rightPreDelay.dispose(),this._rightPreDelay=null,this._writable([\"delayTime\"]),this.delayTime.dispose(),this.delayTime=null,this},t.PingPongDelay}),t(function(t){return t.PitchShift=function(){var e,i=t.defaults(arguments,[\"pitch\"],t.PitchShift);t.FeedbackEffect.call(this,i),this._frequency=new t.Signal(0),this._delayA=new t.Delay(0,1),this._lfoA=new t.LFO({min:0,max:.1,type:\"sawtooth\"}).connect(this._delayA.delayTime),this._delayB=new t.Delay(0,1),this._lfoB=new t.LFO({min:0,max:.1,type:\"sawtooth\",phase:180}).connect(this._delayB.delayTime),this._crossFade=new t.CrossFade,this._crossFadeLFO=new t.LFO({min:0,max:1,type:\"triangle\",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new t.Delay(i.delayTime),this.delayTime=this._feedbackDelay.delayTime,this._readOnly(\"delayTime\"),this._pitch=i.pitch,this._windowSize=i.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn),e=this.now(),this._lfoA.start(e),this._lfoB.start(e),this._crossFadeLFO.start(e),this.windowSize=this._windowSize},t.extend(t.PitchShift,t.FeedbackEffect),t.PitchShift.defaults={pitch:0,windowSize:.1,delayTime:0,feedback:0},Object.defineProperty(t.PitchShift.prototype,\"pitch\",{get:function(){return this._pitch},set:function(e){this._pitch=e;var i=0;e<0?(this._lfoA.min=0,\nthis._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,i=t.intervalToFrequencyRatio(e-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,i=t.intervalToFrequencyRatio(e)-1),this._frequency.value=i*(1.2/this._windowSize)}}),Object.defineProperty(t.PitchShift.prototype,\"windowSize\",{get:function(){return this._windowSize},set:function(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch}}),t.PitchShift.prototype.dispose=function(){return t.FeedbackEffect.prototype.dispose.call(this),this._frequency.dispose(),this._frequency=null,this._delayA.disconnect(),this._delayA=null,this._delayB.disconnect(),this._delayB=null,this._lfoA.dispose(),this._lfoA=null,this._lfoB.dispose(),this._lfoB=null,this._crossFade.dispose(),this._crossFade=null,this._crossFadeLFO.dispose(),this._crossFadeLFO=null,this._writable(\"delayTime\"),this._feedbackDelay.dispose(),this._feedbackDelay=null,this.delayTime=null,this},t.PitchShift}),t(function(t){return t.StereoFeedbackEffect=function(){var e=t.defaults(arguments,[\"feedback\"],t.FeedbackEffect);t.StereoEffect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackL=new t.Gain,this._feedbackR=new t.Gain,this.effectReturnL.chain(this._feedbackL,this.effectSendL),this.effectReturnR.chain(this._feedbackR,this.effectSendR),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),this._readOnly([\"feedback\"])},t.extend(t.StereoFeedbackEffect,t.StereoEffect),t.StereoFeedbackEffect.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable([\"feedback\"]),this.feedback.dispose(),this.feedback=null,this._feedbackL.dispose(),this._feedbackL=null,this._feedbackR.dispose(),this._feedbackR=null,this},t.StereoFeedbackEffect}),t(function(t){return t.StereoWidener=function(){var e=t.defaults(arguments,[\"width\"],t.StereoWidener);t.MidSideEffect.call(this,e),this.width=new t.Signal(e.width,t.Type.NormalRange),this._midMult=new t.Expr(\"$0 * ($1 * (1 - $2))\"),this._sideMult=new t.Expr(\"$0 * ($1 * $2)\"),this._two=new t.Signal(2),this._two.connect(this._midMult,0,1),this.width.connect(this._midMult,0,2),this._two.connect(this._sideMult,0,1),this.width.connect(this._sideMult,0,2),this.midSend.chain(this._midMult,this.midReturn),this.sideSend.chain(this._sideMult,this.sideReturn),this._readOnly([\"width\"])},t.extend(t.StereoWidener,t.MidSideEffect),t.StereoWidener.defaults={width:.5},t.StereoWidener.prototype.dispose=function(){return t.MidSideEffect.prototype.dispose.call(this),this._writable([\"width\"]),this.width.dispose(),this.width=null,this._midMult.dispose(),this._midMult=null,this._sideMult.dispose(),this._sideMult=null,this._two.dispose(),this._two=null,this},t.StereoWidener}),t(function(t){return t.Tremolo=function(){var e=t.defaults(arguments,[\"frequency\",\"depth\"],t.Tremolo);t.StereoEffect.call(this,e),this._lfoL=new t.LFO({phase:e.spread,min:1,max:0}),this._lfoR=new t.LFO({phase:e.spread,min:1,max:0}),this._amplitudeL=new t.Gain,this._amplitudeR=new t.Gain,this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.depth=new t.Signal(e.depth,t.Type.NormalRange),this._readOnly([\"frequency\",\"depth\"]),this.effectSendL.chain(this._amplitudeL,this.effectReturnL),this.effectSendR.chain(this._amplitudeR,this.effectReturnR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.type=e.type,this.spread=e.spread},t.extend(t.Tremolo,t.StereoEffect),t.Tremolo.defaults={frequency:10,type:\"sine\",depth:.5,spread:180},t.Tremolo.prototype.start=function(t){return this._lfoL.start(t),this._lfoR.start(t),this},t.Tremolo.prototype.stop=function(t){return this._lfoL.stop(t),this._lfoR.stop(t),this},t.Tremolo.prototype.sync=function(t){return this._lfoL.sync(t),this._lfoR.sync(t),this},t.Tremolo.prototype.unsync=function(){return this._lfoL.unsync(),this._lfoR.unsync(),this},Object.defineProperty(t.Tremolo.prototype,\"type\",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),Object.defineProperty(t.Tremolo.prototype,\"spread\",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}}),t.Tremolo.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable([\"frequency\",\"depth\"]),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._amplitudeL.dispose(),this._amplitudeL=null,this._amplitudeR.dispose(),this._amplitudeR=null,this.frequency=null,this.depth=null,this},t.Tremolo}),t(function(t){return t.Vibrato=function(){var e=t.defaults(arguments,[\"frequency\",\"depth\"],t.Vibrato);t.Effect.call(this,e),this._delayNode=new t.Delay(0,e.maxDelay),this._lfo=new t.LFO({type:e.type,min:0,max:e.maxDelay,frequency:e.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=e.depth,this._readOnly([\"frequency\",\"depth\"]),this.effectSend.chain(this._delayNode,this.effectReturn)},t.extend(t.Vibrato,t.Effect),t.Vibrato.defaults={maxDelay:.005,frequency:5,depth:.1,type:\"sine\"},Object.defineProperty(t.Vibrato.prototype,\"type\",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),t.Vibrato.prototype.dispose=function(){t.Effect.prototype.dispose.call(this),this._delayNode.dispose(),this._delayNode=null,this._lfo.dispose(),this._lfo=null,this._writable([\"frequency\",\"depth\"]),this.frequency=null,this.depth=null},t.Vibrato}),t(function(t){return t.Event=function(){var e=t.defaults(arguments,[\"callback\",\"value\"],t.Event);t.call(this),this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._state=new t.TimelineState(t.State.Stopped),this._playbackRate=1,this._startOffset=0,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this.playbackRate=e.playbackRate},t.extend(t.Event),t.Event.defaults={callback:t.noOp,loop:!1,loopEnd:\"1m\",loopStart:0,playbackRate:1,value:null,probability:1,mute:!1,humanize:!1},t.Event.prototype._rescheduleEvents=function(e){return e=t.defaultArg(e,-1),this._state.forEachFrom(e,function(e){var i,n,s,o;e.state===t.State.Started&&(t.isUndef(e.id)||t.Transport.clear(e.id),n=e.time+Math.round(this.startOffset/this._playbackRate),this._loop?(i=1/0,t.isNumber(this._loop)&&(i=this._loop*this._getLoopDuration()),s=this._state.getAfter(n),null!==s&&(i=Math.min(i,s.time-n)),i!==1/0&&(this._state.setStateAtTime(t.State.Stopped,n+i+1),i=t.Time(i,\"i\")),o=t.Time(this._getLoopDuration(),\"i\"),e.id=t.Transport.scheduleRepeat(this._tick.bind(this),o,t.TransportTime(n,\"i\"),i)):e.id=t.Transport.schedule(this._tick.bind(this),n+\"i\"))}.bind(this)),this},Object.defineProperty(t.Event.prototype,\"state\",{get:function(){return this._state.getValueAtTime(t.Transport.ticks)}}),Object.defineProperty(t.Event.prototype,\"startOffset\",{get:function(){return this._startOffset},set:function(t){this._startOffset=t}}),Object.defineProperty(t.Event.prototype,\"probability\",{get:function(){return this._probability},set:function(t){this._probability=t}}),Object.defineProperty(t.Event.prototype,\"humanize\",{get:function(){return this._humanize},set:function(t){this._humanize=t}}),t.Event.prototype.start=function(e){return e=this.toTicks(e),this._state.getValueAtTime(e)===t.State.Stopped&&(this._state.add({state:t.State.Started,time:e,id:void 0}),this._rescheduleEvents(e)),this},t.Event.prototype.stop=function(e){var i,n;return this.cancel(e),e=this.toTicks(e),this._state.getValueAtTime(e)===t.State.Started&&(this._state.setStateAtTime(t.State.Stopped,e),i=this._state.getBefore(e),n=e,null!==i&&(n=i.time),this._rescheduleEvents(n)),this},t.Event.prototype.cancel=function(e){return e=t.defaultArg(e,-1/0),e=this.toTicks(e),this._state.forEachFrom(e,function(e){t.Transport.clear(e.id)}),this._state.cancel(e),this},t.Event.prototype._tick=function(e){if(!this.mute&&this._state.getValueAtTime(t.Transport.ticks)===t.State.Started){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){var i=.02;t.isBoolean(this.humanize)||(i=this.toSeconds(this.humanize)),e+=(2*Math.random()-1)*i}this.callback(e,this.value)}},t.Event.prototype._getLoopDuration=function(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)},Object.defineProperty(t.Event.prototype,\"loop\",{get:function(){return this._loop},set:function(t){this._loop=t,this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,\"playbackRate\",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,\"loopEnd\",{get:function(){return t.TransportTime(this._loopEnd,\"i\").toNotation()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,\"loopStart\",{get:function(){return t.TransportTime(this._loopStart,\"i\").toNotation()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,\"progress\",{get:function(){var e,i,n;return this._loop?(e=t.Transport.ticks,i=this._state.get(e),null!==i&&i.state===t.State.Started?(n=this._getLoopDuration(),(e-i.time)%n/n):0):0}}),t.Event.prototype.dispose=function(){this.cancel(),this._state.dispose(),this._state=null,this.callback=null,this.value=null},t.Event}),t(function(t){return t.Loop=function(){var e=t.defaults(arguments,[\"callback\",\"interval\"],t.Loop);t.call(this),this._event=new t.Event({callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability}),this.callback=e.callback,this.iterations=e.iterations},t.extend(t.Loop),t.Loop.defaults={interval:\"4n\",callback:t.noOp,playbackRate:1,iterations:1/0,probability:!0,mute:!1},t.Loop.prototype.start=function(t){return this._event.start(t),this},t.Loop.prototype.stop=function(t){return this._event.stop(t),this},t.Loop.prototype.cancel=function(t){return this._event.cancel(t),this},t.Loop.prototype._tick=function(t){this.callback(t)},Object.defineProperty(t.Loop.prototype,\"state\",{get:function(){return this._event.state}}),Object.defineProperty(t.Loop.prototype,\"progress\",{get:function(){return this._event.progress}}),Object.defineProperty(t.Loop.prototype,\"interval\",{get:function(){return this._event.loopEnd},set:function(t){this._event.loopEnd=t}}),Object.defineProperty(t.Loop.prototype,\"playbackRate\",{get:function(){return this._event.playbackRate},set:function(t){this._event.playbackRate=t}}),Object.defineProperty(t.Loop.prototype,\"humanize\",{get:function(){return this._event.humanize},set:function(t){this._event.humanize=t}}),Object.defineProperty(t.Loop.prototype,\"probability\",{get:function(){return this._event.probability},set:function(t){this._event.probability=t}}),Object.defineProperty(t.Loop.prototype,\"mute\",{get:function(){return this._event.mute},set:function(t){this._event.mute=t}}),Object.defineProperty(t.Loop.prototype,\"iterations\",{get:function(){return!0===this._event.loop?1/0:this._event.loop},set:function(t){this._event.loop=t===1/0||t}}),t.Loop.prototype.dispose=function(){this._event.dispose(),this._event=null,this.callback=null},t.Loop}),t(function(t){return t.Part=function(){var e,i=t.defaults(arguments,[\"callback\",\"events\"],t.Part);for(t.Event.call(this,i),this._events=[],e=0;e<i.events.length;e++)Array.isArray(i.events[e])?this.add(i.events[e][0],i.events[e][1]):this.add(i.events[e])},t.extend(t.Part,t.Event),t.Part.defaults={callback:t.noOp,loop:!1,loopEnd:\"1m\",loopStart:0,playbackRate:1,probability:1,humanize:!1,mute:!1,events:[]},t.Part.prototype.start=function(e,i){var n=this.toTicks(e);return this._state.getValueAtTime(n)!==t.State.Started&&(i=this._loop?t.defaultArg(i,this._loopStart):t.defaultArg(i,0),i=this.toTicks(i),this._state.add({state:t.State.Started,time:n,offset:i}),this._forEach(function(t){this._startNote(t,n,i)})),this},t.Part.prototype._startNote=function(e,i,n){i-=n,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<n&&(i+=this._getLoopDuration()),e.start(t.TransportTime(i,\"i\"))):e.startOffset<this._loopStart&&e.startOffset>=n&&(e.loop=!1,e.start(t.TransportTime(i,\"i\"))):e.startOffset>=n&&e.start(t.TransportTime(i,\"i\"))},Object.defineProperty(t.Part.prototype,\"startOffset\",{get:function(){return this._startOffset},set:function(t){this._startOffset=t,this._forEach(function(t){t.startOffset+=this._startOffset})}}),t.Part.prototype.stop=function(e){var i=this.toTicks(e);return this._state.cancel(i),this._state.setStateAtTime(t.State.Stopped,i),this._forEach(function(t){t.stop(e)}),this},t.Part.prototype.at=function(e,i){var n,s,o;for(e=t.TransportTime(e),n=t.Time(1,\"i\").toSeconds(),s=0;s<this._events.length;s++)if(o=this._events[s],Math.abs(e.toTicks()-o.startOffset)<n)return t.isUndef(i)||(o.value=i),o;return t.isUndef(i)?null:(this.add(e,i),this._events[this._events.length-1])},t.Part.prototype.add=function(e,i){e.hasOwnProperty(\"time\")&&(i=e,e=i.time),e=this.toTicks(e);var n;return i instanceof t.Event?(n=i,n.callback=this._tick.bind(this)):n=new t.Event({callback:this._tick.bind(this),value:i}),n.startOffset=e,n.set({loopEnd:this.loopEnd,loopStart:this.loopStart,loop:this.loop,humanize:this.humanize,playbackRate:this.playbackRate,probability:this.probability}),this._events.push(n),this._restartEvent(n),this},t.Part.prototype._restartEvent=function(e){this._state.forEach(function(i){i.state===t.State.Started?this._startNote(e,i.time,i.offset):e.stop(t.TransportTime(i.time,\"i\"))}.bind(this))},t.Part.prototype.remove=function(e,i){var n,s;for(e.hasOwnProperty(\"time\")&&(i=e,e=i.time),e=this.toTicks(e),n=this._events.length-1;n>=0;n--)s=this._events[n],s instanceof t.Part?s.remove(e,i):s.startOffset===e&&(t.isUndef(i)||!t.isUndef(i)&&s.value===i)&&(this._events.splice(n,1),s.dispose());return this},t.Part.prototype.removeAll=function(){return this._forEach(function(t){t.dispose()}),this._events=[],this},t.Part.prototype.cancel=function(t){return this._forEach(function(e){e.cancel(t)}),this._state.cancel(this.toTicks(t)),this},t.Part.prototype._forEach=function(e,i){var n,s;if(this._events)for(i=t.defaultArg(i,this),n=this._events.length-1;n>=0;n--)s=this._events[n],s instanceof t.Part?s._forEach(e,i):e.call(i,s);return this},t.Part.prototype._setAll=function(t,e){this._forEach(function(i){i[t]=e})},t.Part.prototype._tick=function(t,e){this.mute||this.callback(t,e)},t.Part.prototype._testLoopBoundries=function(e){e.startOffset<this._loopStart||e.startOffset>=this._loopEnd?e.cancel(0):e.state===t.State.Stopped&&this._restartEvent(e)},Object.defineProperty(t.Part.prototype,\"probability\",{get:function(){return this._probability},set:function(t){this._probability=t,this._setAll(\"probability\",t)}}),Object.defineProperty(t.Part.prototype,\"humanize\",{get:function(){return this._humanize},set:function(t){this._humanize=t,this._setAll(\"humanize\",t)}}),Object.defineProperty(t.Part.prototype,\"loop\",{get:function(){return this._loop},set:function(t){this._loop=t,this._forEach(function(e){e._loopStart=this._loopStart,e._loopEnd=this._loopEnd,e.loop=t,this._testLoopBoundries(e)})}}),Object.defineProperty(t.Part.prototype,\"loopEnd\",{get:function(){return t.TransportTime(this._loopEnd,\"i\").toNotation()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(function(e){e.loopEnd=t,this._testLoopBoundries(e)})}}),Object.defineProperty(t.Part.prototype,\"loopStart\",{get:function(){return t.TransportTime(this._loopStart,\"i\").toNotation()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(function(t){t.loopStart=this.loopStart,this._testLoopBoundries(t)})}}),Object.defineProperty(t.Part.prototype,\"playbackRate\",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._setAll(\"playbackRate\",t)}}),Object.defineProperty(t.Part.prototype,\"length\",{get:function(){return this._events.length}}),t.Part.prototype.dispose=function(){return this.removeAll(),this._state.dispose(),this._state=null,this.callback=null,this._events=null,this},t.Part}),t(function(t){return t.Pattern=function(){var e=t.defaults(arguments,[\"callback\",\"values\",\"pattern\"],t.Pattern);t.Loop.call(this,e),this._pattern=new t.CtrlPattern({values:e.values,type:e.pattern,index:e.index})},t.extend(t.Pattern,t.Loop),t.Pattern.defaults={pattern:t.CtrlPattern.Type.Up,callback:t.noOp,values:[]},t.Pattern.prototype._tick=function(t){this.callback(t,this._pattern.value),this._pattern.next()},Object.defineProperty(t.Pattern.prototype,\"index\",{get:function(){return this._pattern.index},set:function(t){this._pattern.index=t}}),Object.defineProperty(t.Pattern.prototype,\"values\",{get:function(){return this._pattern.values},set:function(t){this._pattern.values=t}}),Object.defineProperty(t.Pattern.prototype,\"value\",{get:function(){return this._pattern.value}}),Object.defineProperty(t.Pattern.prototype,\"pattern\",{get:function(){return this._pattern.type},set:function(t){this._pattern.type=t}}),t.Pattern.prototype.dispose=function(){t.Loop.prototype.dispose.call(this),this._pattern.dispose(),this._pattern=null},t.Pattern}),t(function(t){return t.Sequence=function(){var e,i=t.defaults(arguments,[\"callback\",\"events\",\"subdivision\"],t.Sequence),n=i.events;if(delete i.events,t.Part.call(this,i),this._subdivision=this.toTicks(i.subdivision),t.isUndef(i.loopEnd)&&!t.isUndef(n)&&(this._loopEnd=n.length*this._subdivision),this._loop=!0,!t.isUndef(n))for(e=0;e<n.length;e++)this.add(e,n[e])},t.extend(t.Sequence,t.Part),t.Sequence.defaults={subdivision:\"4n\"},Object.defineProperty(t.Sequence.prototype,\"subdivision\",{get:function(){return t.Time(this._subdivision,\"i\").toNotation()}}),t.Sequence.prototype.at=function(e,i){return t.isArray(i)&&this.remove(e),t.Part.prototype.at.call(this,this._indexTime(e),i)},t.Sequence.prototype.add=function(e,i){if(null===i)return this;if(t.isArray(i)){var n=Math.round(this._subdivision/i.length);i=new t.Sequence(this._tick.bind(this),i,t.Time(n,\"i\"))}return t.Part.prototype.add.call(this,this._indexTime(e),i),this},t.Sequence.prototype.remove=function(e,i){return t.Part.prototype.remove.call(this,this._indexTime(e),i),this},t.Sequence.prototype._indexTime=function(e){return e instanceof t.TransportTime?e:t.TransportTime(e*this._subdivision+this.startOffset,\"i\")},t.Sequence.prototype.dispose=function(){return t.Part.prototype.dispose.call(this),this},t.Sequence}),t(function(t){return t.PulseOscillator=function(){var e=t.defaults(arguments,[\"frequency\",\"width\"],t.Oscillator);t.Source.call(this,e),this.width=new t.Signal(e.width,t.Type.NormalRange),this._widthGate=new t.Gain,this._sawtooth=new t.Oscillator({frequency:e.frequency,detune:e.detune,type:\"sawtooth\",phase:e.phase}),this.frequency=this._sawtooth.frequency,this.detune=this._sawtooth.detune,this._thresh=new t.WaveShaper(function(t){return t<0?-1:1}),this._sawtooth.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),this._readOnly([\"width\",\"frequency\",\"detune\"])},t.extend(t.PulseOscillator,t.Source),t.PulseOscillator.defaults={frequency:440,detune:0,phase:0,width:.2},t.PulseOscillator.prototype._start=function(t){t=this.toSeconds(t),this._sawtooth.start(t),this._widthGate.gain.setValueAtTime(1,t)},t.PulseOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._sawtooth.stop(t),this._widthGate.gain.setValueAtTime(0,t)},Object.defineProperty(t.PulseOscillator.prototype,\"phase\",{get:function(){return this._sawtooth.phase},set:function(t){this._sawtooth.phase=t}}),Object.defineProperty(t.PulseOscillator.prototype,\"type\",{get:function(){return\"pulse\"}}),Object.defineProperty(t.PulseOscillator.prototype,\"partials\",{get:function(){return[]}}),t.PulseOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._sawtooth.dispose(),this._sawtooth=null,this._writable([\"width\",\"frequency\",\"detune\"]),this.width.dispose(),this.width=null,this._widthGate.dispose(),this._widthGate=null,this._thresh.dispose(),this._thresh=null,this.frequency=null,this.detune=null,this},t.PulseOscillator}),t(function(t){return t.PWMOscillator=function(){var e=t.defaults(arguments,[\"frequency\",\"modulationFrequency\"],t.PWMOscillator);t.Source.call(this,e),this._pulse=new t.PulseOscillator(e.modulationFrequency),this._pulse._sawtooth.type=\"sine\",this._modulator=new t.Oscillator({frequency:e.frequency,detune:e.detune,phase:e.phase}),this._scale=new t.Multiply(2),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this.modulationFrequency=this._pulse.frequency,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),this._readOnly([\"modulationFrequency\",\"frequency\",\"detune\"])},t.extend(t.PWMOscillator,t.Source),t.PWMOscillator.defaults={frequency:440,detune:0,phase:0,modulationFrequency:.4},t.PWMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)},t.PWMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)},Object.defineProperty(t.PWMOscillator.prototype,\"type\",{get:function(){return\"pwm\"}}),Object.defineProperty(t.PWMOscillator.prototype,\"partials\",{get:function(){return[]}}),Object.defineProperty(t.PWMOscillator.prototype,\"phase\",{get:function(){return this._modulator.phase},set:function(t){this._modulator.phase=t}}),t.PWMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._pulse.dispose(),this._pulse=null,this._scale.dispose(),this._scale=null,this._modulator.dispose(),this._modulator=null,this._writable([\"modulationFrequency\",\"frequency\",\"detune\"]),this.frequency=null,this.detune=null,this.modulationFrequency=null,this},t.PWMOscillator}),t(function(t){return t.FMOscillator=function(){var e=t.defaults(arguments,[\"frequency\",\"type\",\"modulationType\"],t.FMOscillator);t.Source.call(this,e),this._carrier=new t.Oscillator(e.frequency,e.type),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=this._carrier.detune,this.detune.value=e.detune,this.modulationIndex=new t.Multiply(e.modulationIndex),this.modulationIndex.units=t.Type.Positive,this._modulator=new t.Oscillator(e.frequency,e.modulationType),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),this.phase=e.phase,this._readOnly([\"modulationIndex\",\"frequency\",\"detune\",\"harmonicity\"])},t.extend(t.FMOscillator,t.Source),t.FMOscillator.defaults={frequency:440,detune:0,phase:0,modulationIndex:2,modulationType:\"square\",harmonicity:1},t.FMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._carrier.start(t)},t.FMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._carrier.stop(t)},Object.defineProperty(t.FMOscillator.prototype,\"type\",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}}),Object.defineProperty(t.FMOscillator.prototype,\"modulationType\",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}}),Object.defineProperty(t.FMOscillator.prototype,\"phase\",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}}),Object.defineProperty(t.FMOscillator.prototype,\"partials\",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}}),t.FMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable([\"modulationIndex\",\"frequency\",\"detune\",\"harmonicity\"]),this.frequency.dispose(),this.frequency=null,this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this._modulationNode.dispose(),this._modulationNode=null,this.modulationIndex.dispose(),this.modulationIndex=null,this},t.FMOscillator}),t(function(t){return t.AMOscillator=function(){var e=t.defaults(arguments,[\"frequency\",\"type\",\"modulationType\"],t.AMOscillator);t.Source.call(this,e),this._carrier=new t.Oscillator(e.frequency,e.type),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this.detune.value=e.detune,this._modulator=new t.Oscillator(e.frequency,e.modulationType),this._modulationScale=new t.AudioToGain,this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.connect(this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),this.phase=e.phase,this._readOnly([\"frequency\",\"detune\",\"harmonicity\"])},t.extend(t.AMOscillator,t.Oscillator),t.AMOscillator.defaults={frequency:440,detune:0,phase:0,modulationType:\"square\",harmonicity:1},t.AMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._carrier.start(t)},t.AMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._carrier.stop(t)},Object.defineProperty(t.AMOscillator.prototype,\"type\",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}}),Object.defineProperty(t.AMOscillator.prototype,\"modulationType\",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}}),Object.defineProperty(t.AMOscillator.prototype,\"phase\",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}}),Object.defineProperty(t.AMOscillator.prototype,\"partials\",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}}),t.AMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable([\"frequency\",\"detune\",\"harmonicity\"]),this.frequency=null,this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this._modulationNode.dispose(),this._modulationNode=null,this._modulationScale.dispose(),this._modulationScale=null,this},t.AMOscillator}),t(function(t){return t.FatOscillator=function(){var e=t.defaults(arguments,[\"frequency\",\"type\",\"spread\"],t.FatOscillator);t.Source.call(this,e),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._oscillators=[],this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=t.defaultArg(e.partials,[]),this.count=e.count,this._readOnly([\"frequency\",\"detune\"])},t.extend(t.FatOscillator,t.Source),t.FatOscillator.defaults={frequency:440,detune:0,phase:0,spread:20,count:3,type:\"sawtooth\"},t.FatOscillator.prototype._start=function(t){t=this.toSeconds(t),this._forEach(function(e){e.start(t)})},t.FatOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._forEach(function(e){e.stop(t)})},t.FatOscillator.prototype._forEach=function(t){for(var e=0;e<this._oscillators.length;e++)t.call(this,this._oscillators[e],e)},Object.defineProperty(t.FatOscillator.prototype,\"type\",{get:function(){return this._type},set:function(t){this._type=t,this._forEach(function(e){e.type=t})}}),Object.defineProperty(t.FatOscillator.prototype,\"spread\",{get:function(){return this._spread},set:function(t){var e,i;this._spread=t,this._oscillators.length>1&&(e=-t/2,i=t/(this._oscillators.length-1),this._forEach(function(t,n){t.detune.value=e+i*n}))}}),Object.defineProperty(t.FatOscillator.prototype,\"count\",{get:function(){return this._oscillators.length},set:function(e){var i,n;if(e=Math.max(e,1),this._oscillators.length!==e){for(this._forEach(function(t){t.dispose()}),this._oscillators=[],i=0;i<e;i++)n=new t.Oscillator,this.type===t.Oscillator.Type.Custom?n.partials=this._partials:n.type=this._type,n.phase=this._phase,n.volume.value=-6-e,this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.connect(this.output),this._oscillators[i]=n;this.spread=this._spread,this.state===t.State.Started&&this._forEach(function(t){t.start()})}}}),Object.defineProperty(t.FatOscillator.prototype,\"phase\",{get:function(){return this._phase},set:function(t){this._phase=t,this._forEach(function(e){e.phase=t})}}),Object.defineProperty(t.FatOscillator.prototype,\"partials\",{get:function(){return this._partials},set:function(e){this._partials=e,this._type=t.Oscillator.Type.Custom,this._forEach(function(t){t.partials=e})}}),t.FatOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable([\"frequency\",\"detune\"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this._forEach(function(t){t.dispose()}),this._oscillators=null,this._partials=null,this},t.FatOscillator}),t(function(t){t.OmniOscillator=function(){var e=t.defaults(arguments,[\"frequency\",\"type\"],t.OmniOscillator);t.Source.call(this,e),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._sourceType=void 0,this._oscillator=null,this.type=e.type,this._readOnly([\"frequency\",\"detune\"]),this.set(e)},t.extend(t.OmniOscillator,t.Source),t.OmniOscillator.defaults={frequency:440,detune:0,type:\"sine\",phase:0};var e={Pulse:\"PulseOscillator\",PWM:\"PWMOscillator\",Osc:\"Oscillator\",FM:\"FMOscillator\",AM:\"AMOscillator\",Fat:\"FatOscillator\"};return t.OmniOscillator.prototype._start=function(t){this._oscillator.start(t)},t.OmniOscillator.prototype._stop=function(t){this._oscillator.stop(t)},Object.defineProperty(t.OmniOscillator.prototype,\"type\",{get:function(){var t=\"\";return this._sourceType===e.FM?t=\"fm\":this._sourceType===e.AM?t=\"am\":this._sourceType===e.Fat&&(t=\"fat\"),t+this._oscillator.type},set:function(t){\"fm\"===t.substr(0,2)?(this._createNewOscillator(e.FM),this._oscillator.type=t.substr(2)):\"am\"===t.substr(0,2)?(this._createNewOscillator(e.AM),this._oscillator.type=t.substr(2)):\"fat\"===t.substr(0,3)?(this._createNewOscillator(e.Fat),this._oscillator.type=t.substr(3)):\"pwm\"===t?this._createNewOscillator(e.PWM):\"pulse\"===t?this._createNewOscillator(e.Pulse):(this._createNewOscillator(e.Osc),this._oscillator.type=t)}}),Object.defineProperty(t.OmniOscillator.prototype,\"partials\",{get:function(){return this._oscillator.partials},set:function(t){this._oscillator.partials=t}}),t.OmniOscillator.prototype.set=function(e,i){return\"type\"===e?this.type=i:t.isObject(e)&&e.hasOwnProperty(\"type\")&&(this.type=e.type),t.prototype.set.apply(this,arguments),this},t.OmniOscillator.prototype._createNewOscillator=function(e){var i,n,s;e!==this._sourceType&&(this._sourceType=e,i=t[e],n=this.now(),null!==this._oscillator&&(s=this._oscillator,s.stop(n),this.context.setTimeout(function(){s.dispose(),s=null},this.blockTime)),this._oscillator=new i,this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this.state===t.State.Started&&this._oscillator.start(n))},Object.defineProperty(t.OmniOscillator.prototype,\"phase\",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t}}),Object.defineProperty(t.OmniOscillator.prototype,\"width\",{get:function(){if(this._sourceType===e.Pulse)return this._oscillator.width}}),Object.defineProperty(t.OmniOscillator.prototype,\"count\",{get:function(){if(this._sourceType===e.Fat)return this._oscillator.count},set:function(t){\nthis._sourceType===e.Fat&&(this._oscillator.count=t)}}),Object.defineProperty(t.OmniOscillator.prototype,\"spread\",{get:function(){if(this._sourceType===e.Fat)return this._oscillator.spread},set:function(t){this._sourceType===e.Fat&&(this._oscillator.spread=t)}}),Object.defineProperty(t.OmniOscillator.prototype,\"modulationType\",{get:function(){if(this._sourceType===e.FM||this._sourceType===e.AM)return this._oscillator.modulationType},set:function(t){this._sourceType!==e.FM&&this._sourceType!==e.AM||(this._oscillator.modulationType=t)}}),Object.defineProperty(t.OmniOscillator.prototype,\"modulationIndex\",{get:function(){if(this._sourceType===e.FM)return this._oscillator.modulationIndex}}),Object.defineProperty(t.OmniOscillator.prototype,\"harmonicity\",{get:function(){if(this._sourceType===e.FM||this._sourceType===e.AM)return this._oscillator.harmonicity}}),Object.defineProperty(t.OmniOscillator.prototype,\"modulationFrequency\",{get:function(){if(this._sourceType===e.PWM)return this._oscillator.modulationFrequency}}),t.OmniOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable([\"frequency\",\"detune\"]),this.detune.dispose(),this.detune=null,this.frequency.dispose(),this.frequency=null,this._oscillator.dispose(),this._oscillator=null,this._sourceType=null,this},t.OmniOscillator}),t(function(t){return t.Instrument=function(e){e=t.defaultArg(e,t.Instrument.defaults),t.AudioNode.call(this),this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly(\"volume\")},t.extend(t.Instrument,t.AudioNode),t.Instrument.defaults={volume:0},t.Instrument.prototype.triggerAttack=t.noOp,t.Instrument.prototype.triggerRelease=t.noOp,t.Instrument.prototype.triggerAttackRelease=function(t,e,i,n){return i=this.toSeconds(i),e=this.toSeconds(e),this.triggerAttack(t,i,n),this.triggerRelease(i+e),this},t.Instrument.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable([\"volume\"]),this.volume=null,this},t.Instrument}),t(function(t){return t.Monophonic=function(e){e=t.defaultArg(e,t.Monophonic.defaults),t.Instrument.call(this,e),this.portamento=e.portamento},t.extend(t.Monophonic,t.Instrument),t.Monophonic.defaults={portamento:0},t.Monophonic.prototype.triggerAttack=function(t,e,i){return e=this.toSeconds(e),this._triggerEnvelopeAttack(e,i),this.setNote(t,e),this},t.Monophonic.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this._triggerEnvelopeRelease(t),this},t.Monophonic.prototype._triggerEnvelopeAttack=function(){},t.Monophonic.prototype._triggerEnvelopeRelease=function(){},t.Monophonic.prototype.setNote=function(t,e){var i,n;return e=this.toSeconds(e),this.portamento>0?(i=this.frequency.value,this.frequency.setValueAtTime(i,e),n=this.toSeconds(this.portamento),this.frequency.exponentialRampToValueAtTime(t,e+n)):this.frequency.setValueAtTime(t,e),this},t.Monophonic}),t(function(t){return t.Synth=function(e){e=t.defaultArg(e,t.Synth.defaults),t.Monophonic.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new t.AmplitudeEnvelope(e.envelope),this.oscillator.chain(this.envelope,this.output),this.oscillator.start(),this._readOnly([\"oscillator\",\"frequency\",\"detune\",\"envelope\"])},t.extend(t.Synth,t.Monophonic),t.Synth.defaults={oscillator:{type:\"triangle\"},envelope:{attack:.005,decay:.1,sustain:.3,release:1}},t.Synth.prototype._triggerEnvelopeAttack=function(t,e){return this.envelope.triggerAttack(t,e),this},t.Synth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this},t.Synth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable([\"oscillator\",\"frequency\",\"detune\",\"envelope\"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.frequency=null,this.detune=null,this},t.Synth}),t(function(t){return t.AMSynth=function(e){e=t.defaultArg(e,t.AMSynth.defaults),t.Monophonic.call(this,e),this._carrier=new t.Synth,this._carrier.volume.value=-10,this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope.set(e.envelope),this._modulator=new t.Synth,this._modulator.volume.value=-10,this.modulation=this._modulator.oscillator.set(e.modulation),this.modulationEnvelope=this._modulator.envelope.set(e.modulationEnvelope),this.frequency=new t.Signal(440,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationScale=new t.AudioToGain,this._modulationNode=new t.Gain,this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),this._readOnly([\"frequency\",\"harmonicity\",\"oscillator\",\"envelope\",\"modulation\",\"modulationEnvelope\",\"detune\"])},t.extend(t.AMSynth,t.Monophonic),t.AMSynth.defaults={harmonicity:3,detune:0,oscillator:{type:\"sine\"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:\"square\"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}},t.AMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.modulationEnvelope.triggerAttack(t,e),this},t.AMSynth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this.modulationEnvelope.triggerRelease(t),this},t.AMSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable([\"frequency\",\"harmonicity\",\"oscillator\",\"envelope\",\"modulation\",\"modulationEnvelope\",\"detune\"]),this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationScale.dispose(),this._modulationScale=null,this._modulationNode.dispose(),this._modulationNode=null,this.oscillator=null,this.envelope=null,this.modulationEnvelope=null,this.modulation=null,this},t.AMSynth}),t(function(t){return t.MonoSynth=function(e){e=t.defaultArg(e,t.MonoSynth.defaults),t.Monophonic.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new t.Filter(e.filter),this.filterEnvelope=new t.FrequencyEnvelope(e.filterEnvelope),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.oscillator.chain(this.filter,this.envelope,this.output),this.oscillator.start(),this.filterEnvelope.connect(this.filter.frequency),this._readOnly([\"oscillator\",\"frequency\",\"detune\",\"filter\",\"filterEnvelope\",\"envelope\"])},t.extend(t.MonoSynth,t.Monophonic),t.MonoSynth.defaults={frequency:\"C4\",detune:0,oscillator:{type:\"square\"},filter:{Q:6,type:\"lowpass\",rolloff:-24},envelope:{attack:.005,decay:.1,sustain:.9,release:1},filterEnvelope:{attack:.06,decay:.2,sustain:.5,release:2,baseFrequency:200,octaves:7,exponent:2}},t.MonoSynth.prototype._triggerEnvelopeAttack=function(t,e){return this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this},t.MonoSynth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this},t.MonoSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable([\"oscillator\",\"frequency\",\"detune\",\"filter\",\"filterEnvelope\",\"envelope\"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.filterEnvelope.dispose(),this.filterEnvelope=null,this.filter.dispose(),this.filter=null,this.frequency=null,this.detune=null,this},t.MonoSynth}),t(function(t){return t.DuoSynth=function(e){e=t.defaultArg(e,t.DuoSynth.defaults),t.Monophonic.call(this,e),this.voice0=new t.MonoSynth(e.voice0),this.voice0.volume.value=-10,this.voice1=new t.MonoSynth(e.voice1),this.voice1.volume.value=-10,this._vibrato=new t.LFO(e.vibratoRate,-50,50),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new t.Gain(e.vibratoAmount,t.Type.Positive),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),this._readOnly([\"voice0\",\"voice1\",\"frequency\",\"vibratoAmount\",\"vibratoRate\"])},t.extend(t.DuoSynth,t.Monophonic),t.DuoSynth.defaults={vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:{volume:-10,portamento:0,oscillator:{type:\"sine\"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}},voice1:{volume:-10,portamento:0,oscillator:{type:\"sine\"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}},t.DuoSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.voice0.envelope.triggerAttack(t,e),this.voice1.envelope.triggerAttack(t,e),this.voice0.filterEnvelope.triggerAttack(t),this.voice1.filterEnvelope.triggerAttack(t),this},t.DuoSynth.prototype._triggerEnvelopeRelease=function(t){return this.voice0.triggerRelease(t),this.voice1.triggerRelease(t),this},t.DuoSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable([\"voice0\",\"voice1\",\"frequency\",\"vibratoAmount\",\"vibratoRate\"]),this.voice0.dispose(),this.voice0=null,this.voice1.dispose(),this.voice1=null,this.frequency.dispose(),this.frequency=null,this._vibratoGain.dispose(),this._vibratoGain=null,this._vibrato=null,this.harmonicity.dispose(),this.harmonicity=null,this.vibratoAmount.dispose(),this.vibratoAmount=null,this.vibratoRate=null,this},t.DuoSynth}),t(function(t){return t.FMSynth=function(e){e=t.defaultArg(e,t.FMSynth.defaults),t.Monophonic.call(this,e),this._carrier=new t.Synth(e.carrier),this._carrier.volume.value=-10,this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope.set(e.envelope),this._modulator=new t.Synth(e.modulator),this._modulator.volume.value=-10,this.modulation=this._modulator.oscillator.set(e.modulation),this.modulationEnvelope=this._modulator.envelope.set(e.modulationEnvelope),this.frequency=new t.Signal(440,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.modulationIndex=new t.Multiply(e.modulationIndex),this.modulationIndex.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this._readOnly([\"frequency\",\"harmonicity\",\"modulationIndex\",\"oscillator\",\"envelope\",\"modulation\",\"modulationEnvelope\",\"detune\"])},t.extend(t.FMSynth,t.Monophonic),t.FMSynth.defaults={harmonicity:3,modulationIndex:10,detune:0,oscillator:{type:\"sine\"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:\"square\"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}},t.FMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.modulationEnvelope.triggerAttack(t),this},t.FMSynth.prototype._triggerEnvelopeRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.modulationEnvelope.triggerRelease(t),this},t.FMSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable([\"frequency\",\"harmonicity\",\"modulationIndex\",\"oscillator\",\"envelope\",\"modulation\",\"modulationEnvelope\",\"detune\"]),this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this.modulationIndex.dispose(),this.modulationIndex=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationNode.dispose(),this._modulationNode=null,this.oscillator=null,this.envelope=null,this.modulationEnvelope=null,this.modulation=null,this},t.FMSynth}),t(function(t){return t.MembraneSynth=function(e){e=t.defaultArg(e,t.MembraneSynth.defaults),t.Instrument.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator).start(),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.octaves=e.octaves,this.pitchDecay=e.pitchDecay,this.oscillator.chain(this.envelope,this.output),this._readOnly([\"oscillator\",\"envelope\"])},t.extend(t.MembraneSynth,t.Instrument),t.MembraneSynth.defaults={pitchDecay:.05,octaves:10,oscillator:{type:\"sine\"},envelope:{attack:.001,decay:.4,sustain:.01,release:1.4,attackCurve:\"exponential\"}},t.MembraneSynth.prototype.triggerAttack=function(t,e,i){e=this.toSeconds(e),t=this.toFrequency(t);var n=t*this.octaves;return this.oscillator.frequency.setValueAtTime(n,e),this.oscillator.frequency.exponentialRampToValueAtTime(t,e+this.toSeconds(this.pitchDecay)),this.envelope.triggerAttack(e,i),this},t.MembraneSynth.prototype.triggerRelease=function(t){return this.envelope.triggerRelease(t),this},t.MembraneSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable([\"oscillator\",\"envelope\"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this},t.MembraneSynth}),t(function(t){var e=[1,1.483,1.932,2.546,2.63,3.897];return t.MetalSynth=function(i){var n,s,o;for(i=t.defaultArg(i,t.MetalSynth.defaults),t.Instrument.call(this,i),this.frequency=new t.Signal(i.frequency,t.Type.Frequency),this._oscillators=[],this._freqMultipliers=[],this._amplitue=new t.Gain(0).connect(this.output),this._highpass=new t.Filter({type:\"highpass\",Q:-3.0102999566398125}).connect(this._amplitue),this._octaves=i.octaves,this._filterFreqScaler=new t.Scale(i.resonance,7e3),this.envelope=new t.Envelope({attack:i.envelope.attack,attackCurve:\"linear\",decay:i.envelope.decay,sustain:0,release:i.envelope.release}).chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitue.gain),n=0;n<e.length;n++)s=new t.FMOscillator({type:\"square\",modulationType:\"square\",harmonicity:i.harmonicity,modulationIndex:i.modulationIndex}),s.connect(this._highpass).start(),this._oscillators[n]=s,o=new t.Multiply(e[n]),this._freqMultipliers[n]=o,this.frequency.chain(o,s.frequency);this.octaves=i.octaves},t.extend(t.MetalSynth,t.Instrument),t.MetalSynth.defaults={frequency:200,envelope:{attack:.001,decay:1.4,release:.2},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5},t.MetalSynth.prototype.triggerAttack=function(e,i){return e=this.toSeconds(e),i=t.defaultArg(i,1),this.envelope.triggerAttack(e,i),this},t.MetalSynth.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this},t.MetalSynth.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,i),this.triggerRelease(e+t),this},Object.defineProperty(t.MetalSynth.prototype,\"modulationIndex\",{get:function(){return this._oscillators[0].modulationIndex.value},set:function(t){for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].modulationIndex.value=t}}),Object.defineProperty(t.MetalSynth.prototype,\"harmonicity\",{get:function(){return this._oscillators[0].harmonicity.value},set:function(t){for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].harmonicity.value=t}}),Object.defineProperty(t.MetalSynth.prototype,\"resonance\",{get:function(){return this._filterFreqScaler.min},set:function(t){this._filterFreqScaler.min=t,this.octaves=this._octaves}}),Object.defineProperty(t.MetalSynth.prototype,\"octaves\",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)}}),t.MetalSynth.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this);for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].dispose(),this._freqMultipliers[e].dispose();this._oscillators=null,this._freqMultipliers=null,this.frequency.dispose(),this.frequency=null,this._filterFreqScaler.dispose(),this._filterFreqScaler=null,this._amplitue.dispose(),this._amplitue=null,this.envelope.dispose(),this.envelope=null,this._highpass.dispose(),this._highpass=null},t.MetalSynth}),t(function(t){return window.AudioBufferSourceNode&&!AudioBufferSourceNode.prototype.start&&(AudioBufferSourceNode.prototype.start=AudioBufferSourceNode.prototype.noteGrainOn,AudioBufferSourceNode.prototype.stop=AudioBufferSourceNode.prototype.noteOff),t.BufferSource=function(){var e=t.defaults(arguments,[\"buffer\",\"onload\"],t.BufferSource);t.AudioNode.call(this),this.onended=e.onended,this._startTime=-1,this._stopTime=-1,this._gainNode=this.output=new t.Gain,this._source=this.context.createBufferSource(),this._source.connect(this._gainNode),this._buffer=new t.Buffer(e.buffer,e.onload),this.playbackRate=new t.Param(this._source.playbackRate,t.Type.Positive),this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut,this.curve=e.curve,this._gain=1,this._onendedTimeout=-1,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.playbackRate.value=e.playbackRate},t.extend(t.BufferSource,t.AudioNode),t.BufferSource.defaults={onended:t.noOp,onload:t.noOp,loop:!1,loopStart:0,loopEnd:0,fadeIn:0,fadeOut:0,curve:\"linear\",playbackRate:1},Object.defineProperty(t.BufferSource.prototype,\"state\",{get:function(){var e=this.now();return-1!==this._startTime&&e>=this._startTime&&e<this._stopTime?t.State.Started:t.State.Stopped}}),t.BufferSource.prototype.start=function(e,i,n,s,o){var r,a,l,h;if(-1!==this._startTime)throw new Error(\"Tone.BufferSource can only be started once.\");if(!this.buffer.loaded)throw new Error(\"Tone.BufferSource: buffer is either not set or not loaded.\");return e=this.toSeconds(e),i=this.loop?t.defaultArg(i,this.loopStart):t.defaultArg(i,0),i=this.toSeconds(i),s=t.defaultArg(s,1),this._gain=s,o=this.toSeconds(t.defaultArg(o,this.fadeIn)),this.fadeIn=o,o>0?(this._gainNode.gain.setValueAtTime(0,e),\"linear\"===this.curve?this._gainNode.gain.linearRampToValueAtTime(this._gain,e+o):this._gainNode.gain.setTargetAtTime(this._gain,e,this._gainNode.gain.getTimeConstant(o))):this._gainNode.gain.setValueAtTime(s,e),this._startTime=e,r=this.toSeconds(t.defaultArg(n,this.buffer.duration-i)),r=Math.max(r,0),(!this.loop||this.loop&&!t.isUndef(n))&&(this.loop||(r=Math.min(r,this.buffer.duration-i)),this.stop(e+r,this.fadeOut)),this.loop&&(a=this.loopEnd||this.buffer.duration,l=this.loopStart,h=a-l,i>a&&(i=(i-l)%h+l)),this._source.buffer=this.buffer.get(),this._source.loopEnd=this.loopEnd||this.buffer.duration,t.isPast(e),this._source.start(e,i),this},t.BufferSource.prototype.stop=function(e,i){var n,s;if(!this.buffer.loaded)throw new Error(\"Tone.BufferSource: buffer is either not set or not loaded.\");if(e=this.toSeconds(e),-1===this._stopTime||this._stopTime>e){if(e<=this._startTime)return this._gainNode.gain.cancelScheduledValues(e),this._gainNode.gain.value=0,this;e=Math.max(this._startTime+this.fadeIn+this.sampleTime,e),this._gainNode.gain.cancelScheduledValues(e),this._stopTime=e,i=this.toSeconds(t.defaultArg(i,this.fadeOut)),n=Math.min(e-this._startTime-this.fadeIn-this.sampleTime,this.buffer.duration),i=Math.min(n,i),s=e-i,i>this.sampleTime?(this._gainNode.gain.setValueAtTime(this._gain,s),\"linear\"===this.curve?this._gainNode.gain.linearRampToValueAtTime(0,e):this._gainNode.gain.setTargetAtTime(0,s,this._gainNode.gain.getTimeConstant(i))):this._gainNode.gain.setValueAtTime(0,e),t.context.clearTimeout(this._onendedTimeout),this._onendedTimeout=t.context.setTimeout(this._onended.bind(this),this._stopTime-this.now())}return this},t.BufferSource.prototype._onended=function(){this.onended(this)},Object.defineProperty(t.BufferSource.prototype,\"loopStart\",{get:function(){return this._source.loopStart},set:function(t){this._source.loopStart=this.toSeconds(t)}}),Object.defineProperty(t.BufferSource.prototype,\"loopEnd\",{get:function(){return this._source.loopEnd},set:function(t){this._source.loopEnd=this.toSeconds(t)}}),Object.defineProperty(t.BufferSource.prototype,\"buffer\",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(t.BufferSource.prototype,\"loop\",{get:function(){return this._source.loop},set:function(t){this._source.loop=t}}),t.BufferSource.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.onended=null,this._source.disconnect(),this._source=null,this._gainNode.dispose(),this._gainNode=null,this._buffer.dispose(),this._buffer=null,this._startTime=-1,this.playbackRate=null,t.context.clearTimeout(this._onendedTimeout),this},t.BufferSource}),t(function(t){function e(){for(var e in s)o[e]=(new t.Buffer).fromArray(s[e])}var i,n,s,o;return t.Noise=function(){var e=t.defaults(arguments,[\"type\"],t.Noise);t.Source.call(this,e),this._source=null,this._type=e.type,this._playbackRate=e.playbackRate},t.extend(t.Noise,t.Source),t.Noise.defaults={type:\"white\",playbackRate:1},Object.defineProperty(t.Noise.prototype,\"type\",{get:function(){return this._type},set:function(e){if(this._type!==e){if(!(e in o))throw new TypeError(\"Tone.Noise: invalid type: \"+e);if(this._type=e,this.state===t.State.Started){var i=this.now();this._stop(i),this._start(i)}}}}),Object.defineProperty(t.Noise.prototype,\"playbackRate\",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}}),t.Noise.prototype._start=function(e){var i=o[this._type];this._source=new t.BufferSource(i).connect(this.output),this._source.loop=!0,this._source.playbackRate.value=this._playbackRate,this._source.start(this.toSeconds(e),Math.random()*(i.duration-.001))},t.Noise.prototype._stop=function(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)},t.Noise.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer=null,this},i=220500,n=2,s={pink:function(){var t,e,s,o,r,a,l,h,u,c,p,f=[];for(t=0;t<n;t++)for(e=new Float32Array(i),f[t]=e,s=o=r=a=l=h=u=0,c=0;c<i;c++)p=2*Math.random()-1,s=.99886*s+.0555179*p,o=.99332*o+.0750759*p,r=.969*r+.153852*p,a=.8665*a+.3104856*p,l=.55*l+.5329522*p,h=-.7616*h-.016898*p,e[c]=s+o+r+a+l+h+u+.5362*p,e[c]*=.11,u=.115926*p;return f}(),brown:function(){var t,e,s,o,r,a=[];for(t=0;t<n;t++)for(e=new Float32Array(i),a[t]=e,s=0,o=0;o<i;o++)r=2*Math.random()-1,e[o]=(s+.02*r)/1.02,s=e[o],e[o]*=3.5;return a}(),white:function(){var t,e,s,o=[];for(t=0;t<n;t++)for(e=new Float32Array(i),o[t]=e,s=0;s<i;s++)e[s]=2*Math.random()-1;return o}()},o={},t.getContext(e),t.Context.on(\"init\",e),t.Noise}),t(function(t){return t.NoiseSynth=function(e){e=t.defaultArg(e,t.NoiseSynth.defaults),t.Instrument.call(this,e),this.noise=new t.Noise,this.envelope=new t.AmplitudeEnvelope(e.envelope),this.noise.chain(this.envelope,this.output),this.noise.start(),this._readOnly([\"noise\",\"envelope\"])},t.extend(t.NoiseSynth,t.Instrument),t.NoiseSynth.defaults={noise:{type:\"white\"},envelope:{attack:.005,decay:.1,sustain:0}},t.NoiseSynth.prototype.triggerAttack=function(t,e){return this.envelope.triggerAttack(t,e),this},t.NoiseSynth.prototype.triggerRelease=function(t){return this.envelope.triggerRelease(t),this},t.NoiseSynth.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,i),this.triggerRelease(e+t),this},t.NoiseSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable([\"noise\",\"envelope\"]),this.noise.dispose(),this.noise=null,this.envelope.dispose(),this.envelope=null,this},t.NoiseSynth}),t(function(t){return t.PluckSynth=function(e){e=t.defaultArg(e,t.PluckSynth.defaults),t.Instrument.call(this,e),this._noise=new t.Noise(\"pink\"),this.attackNoise=e.attackNoise,this._lfcf=new t.LowpassCombFilter({resonance:e.resonance,dampening:e.dampening}),this.resonance=this._lfcf.resonance,this.dampening=this._lfcf.dampening,this._noise.connect(this._lfcf),this._lfcf.connect(this.output),this._readOnly([\"resonance\",\"dampening\"])},t.extend(t.PluckSynth,t.Instrument),t.PluckSynth.defaults={attackNoise:1,dampening:4e3,resonance:.9},t.PluckSynth.prototype.triggerAttack=function(t,e){t=this.toFrequency(t),e=this.toSeconds(e);var i=1/t;return this._lfcf.delayTime.setValueAtTime(i,e),this._noise.start(e),this._noise.stop(e+i*this.attackNoise),this},t.PluckSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._noise.dispose(),this._lfcf.dispose(),this._noise=null,this._lfcf=null,this._writable([\"resonance\",\"dampening\"]),this.dampening=null,this.resonance=null,this},t.PluckSynth}),t(function(t){return t.PolySynth=function(){var e,i,n=t.defaults(arguments,[\"polyphony\",\"voice\"],t.PolySynth);for(t.Instrument.call(this,n),n=t.defaultArg(n,t.Instrument.defaults),n.polyphony=Math.min(t.PolySynth.MAX_POLYPHONY,n.polyphony),this.voices=new Array(n.polyphony),this._triggers=new Array(n.polyphony),this.detune=new t.Signal(n.detune,t.Type.Cents),this._readOnly(\"detune\"),e=0;e<n.polyphony;e++)i=new n.voice(arguments[2],arguments[3]),this.voices[e]=i,i.connect(this.output),i.hasOwnProperty(\"detune\")&&this.detune.connect(i.detune),this._triggers[e]={release:-1,note:null,voice:i}},t.extend(t.PolySynth,t.Instrument),t.PolySynth.defaults={polyphony:4,volume:0,detune:0,voice:t.Synth},t.PolySynth.prototype.triggerAttack=function(t,e,i){var n,s,o,r;for(Array.isArray(t)||(t=[t]),e=this.toSeconds(e),n=0;n<t.length;n++){for(s=t[n],o=this._triggers[0],0,r=1;r<this._triggers.length;r++)this._triggers[r].release<o.release&&(o=this._triggers[r],r);o.release=1/0,o.note=JSON.stringify(s),o.voice.triggerAttack(s,e,i)}return this},t.PolySynth.prototype.triggerAttackRelease=function(e,i,n,s){var o,r;if(n=this.toSeconds(n),this.triggerAttack(e,n,s),t.isArray(i)&&t.isArray(e))for(o=0;o<e.length;o++)r=i[Math.min(o,i.length-1)],this.triggerRelease(e[o],n+this.toSeconds(r));else this.triggerRelease(e,n+this.toSeconds(i));return this},t.PolySynth.prototype.triggerRelease=function(t,e){var i,n,s,o;for(Array.isArray(t)||(t=[t]),e=this.toSeconds(e),i=0;i<t.length;i++)for(n=JSON.stringify(t[i]),s=0;s<this._triggers.length;s++)o=this._triggers[s],o.note===n&&o.release>e&&(o.voice.triggerRelease(e),o.release=e);return this},t.PolySynth.prototype.set=function(t,e,i){for(var n=0;n<this.voices.length;n++)this.voices[n].set(t,e,i);return this},t.PolySynth.prototype.get=function(t){return this.voices[0].get(t)},t.PolySynth.prototype.releaseAll=function(t){var e,i;for(t=this.toSeconds(t),e=0;e<this._triggers.length;e++)i=this._triggers[e],i.release>t&&(i.release=t,i.voice.triggerRelease(t));return this},t.PolySynth.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this);for(var e=0;e<this.voices.length;e++)this.voices[e].dispose(),this.voices[e]=null;return this._writable(\"detune\"),this.detune.dispose(),this.detune=null,this.voices=null,this._triggers=null,this},t.PolySynth.MAX_POLYPHONY=20,t.PolySynth}),t(function(t){return t.Sampler=function(e){var i,n,s,o,r=Array.prototype.slice.call(arguments);r.shift(),i=t.defaults(r,[\"onload\",\"baseUrl\"],t.Sampler),t.Instrument.call(this,i),n={};for(s in e)if(t.isNote(s))o=t.Frequency(s).toMidi(),n[o]=e[s];else{if(isNaN(parseFloat(s)))throw new Error(\"Tone.Sampler: url keys must be the note's pitch\");n[s]=e[s]}this._buffers=new t.Buffers(n,i.onload,i.baseUrl),this._activeSources={},this.attack=i.attack,this.release=i.release},t.extend(t.Sampler,t.Instrument),t.Sampler.defaults={attack:0,release:.1,onload:t.noOp,baseUrl:\"\"},t.Sampler.prototype._findClosest=function(t){for(var e=24,i=0;i<e;){if(this._buffers.has(t+i))return-i;if(this._buffers.has(t-i))return i;i++}return null},t.Sampler.prototype.triggerAttack=function(e,i,n){var s,o,r,a=t.Frequency(e).toMidi(),l=this._findClosest(a);return null!==l&&(s=a-l,o=this._buffers.get(s),r=new t.BufferSource({buffer:o,playbackRate:t.intervalToFrequencyRatio(l),fadeIn:this.attack,fadeOut:this.release,curve:\"exponential\"}).connect(this.output),r.start(i,0,o.duration,n),t.isArray(this._activeSources[a])||(this._activeSources[a]=[]),this._activeSources[a].push({note:a,source:r})),this},t.Sampler.prototype.triggerRelease=function(e,i){var n,s=t.Frequency(e).toMidi();this._activeSources[s]&&this._activeSources[s].length&&(n=this._activeSources[s].shift().source,i=this.toSeconds(i),n.stop(i+this.release,this.release))},t.Sampler.prototype.triggerAttackRelease=function(t,e,i,n){return i=this.toSeconds(i),e=this.toSeconds(e),this.triggerAttack(t,i,n),this.triggerRelease(t,i+e),this},t.Sampler.prototype.add=function(e,i,n){if(t.isNote(e)){var s=t.Frequency(e).toMidi();this._buffers.add(s,i,n)}else{if(isNaN(parseFloat(e)))throw new Error(\"Tone.Sampler: note must be the note's pitch. Instead got \"+e);this._buffers.add(e,i,n)}},Object.defineProperty(t.Sampler.prototype,\"loaded\",{get:function(){return this._buffers.loaded}}),t.Sampler.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this),this._buffers.dispose(),this._buffers=null;for(var e in this._activeSources)this._activeSources[e].forEach(function(t){t.source.dispose()});return this._activeSources=null,this},t.Sampler}),t(function(t){return t.GainToAudio=function(){t.SignalBase.call(this),this._norm=this.input=this.output=new t.WaveShaper(function(t){return 2*Math.abs(t)-1})},t.extend(t.GainToAudio,t.SignalBase),t.GainToAudio.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.GainToAudio}),t(function(t){return t.Normalize=function(e,i){t.SignalBase.call(this),this._inputMin=t.defaultArg(e,0),this._inputMax=t.defaultArg(i,1),this._sub=this.input=new t.Add(0),this._div=this.output=new t.Multiply(1),this._sub.connect(this._div),this._setRange()},t.extend(t.Normalize,t.SignalBase),Object.defineProperty(t.Normalize.prototype,\"min\",{get:function(){return this._inputMin},set:function(t){this._inputMin=t,this._setRange()}}),Object.defineProperty(t.Normalize.prototype,\"max\",{get:function(){return this._inputMax},set:function(t){this._inputMax=t,this._setRange()}}),t.Normalize.prototype._setRange=function(){this._sub.value=-this._inputMin,this._div.value=1/(this._inputMax-this._inputMin)},t.Normalize.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._sub.dispose(),this._sub=null,this._div.dispose(),this._div=null,this},t.Normalize}),t(function(t){return t.TransportTimelineSignal=function(){t.TimelineSignal.apply(this,arguments),this.output=this._outputSig=new t.Signal(this._initial),this._lastVal=this.value,this._synced=t.Transport.scheduleRepeat(this._onTick.bind(this),\"1i\"),this._bindAnchorValue=this._anchorValue.bind(this),t.Transport.on(\"start stop pause\",this._bindAnchorValue),this._events.memory=1/0},t.extend(t.TransportTimelineSignal,t.TimelineSignal),t.TransportTimelineSignal.prototype._onTick=function(e){var i=this.getValueAtTime(t.Transport.seconds);this._lastVal!==i&&(this._lastVal=i,this._outputSig.linearRampToValueAtTime(i,e))},t.TransportTimelineSignal.prototype._anchorValue=function(e){var i=this.getValueAtTime(t.Transport.ticks);return this._lastVal=i,this._outputSig.cancelScheduledValues(e),this._outputSig.setValueAtTime(i,e),this},\nt.TransportTimelineSignal.prototype.getValueAtTime=function(e){return e=this.toTicks(e),t.TimelineSignal.prototype.getValueAtTime.call(this,e)},t.TransportTimelineSignal.prototype.setValueAtTime=function(e,i){return i=this.toTicks(i),t.TimelineSignal.prototype.setValueAtTime.call(this,e,i),this},t.TransportTimelineSignal.prototype.linearRampToValueAtTime=function(e,i){return i=this.toTicks(i),t.TimelineSignal.prototype.linearRampToValueAtTime.call(this,e,i),this},t.TransportTimelineSignal.prototype.exponentialRampToValueAtTime=function(e,i){return i=this.toTicks(i),t.TimelineSignal.prototype.exponentialRampToValueAtTime.call(this,e,i),this},t.TransportTimelineSignal.prototype.setTargetAtTime=function(e,i,n){return i=this.toTicks(i),t.TimelineSignal.prototype.setTargetAtTime.call(this,e,i,n),this},t.TransportTimelineSignal.prototype.cancelScheduledValues=function(e){return e=this.toTicks(e),t.TimelineSignal.prototype.cancelScheduledValues.call(this,e),this},t.TransportTimelineSignal.prototype.setValueCurveAtTime=function(e,i,n,s){return i=this.toTicks(i),n=this.toTicks(n),t.TimelineSignal.prototype.setValueCurveAtTime.call(this,e,i,n,s),this},t.TransportTimelineSignal.prototype.dispose=function(){t.Transport.clear(this._synced),t.Transport.off(\"start stop pause\",this._syncedCallback),this._events.cancel(0),t.TimelineSignal.prototype.dispose.call(this),this._outputSig.dispose(),this._outputSig=null},t.TransportTimelineSignal}),t(function(t){return t.MultiPlayer=function(e){console.warn(\"Tone.MultiPlayer is deprecated. Use Tone.Players instead.\"),1!==arguments.length||t.isUndef(arguments[0])||arguments[0].hasOwnProperty(\"urls\")||(e={urls:e});var i=t.defaults(arguments,[\"urls\",\"onload\"],t.MultiPlayer);t.Source.call(this,i),i.urls instanceof t.Buffers?this.buffers=i.urls:this.buffers=new t.Buffers(i.urls,i.onload),this._activeSources={},this.fadeIn=i.fadeIn,this.fadeOut=i.fadeOut},t.extend(t.MultiPlayer,t.Source),t.MultiPlayer.defaults={onload:t.noOp,fadeIn:0,fadeOut:0},t.MultiPlayer.prototype._makeSource=function(e){var i,n;return t.isString(e)||t.isNumber(e)?i=this.buffers.get(e).get():e instanceof t.Buffer?i=e.get():e instanceof AudioBuffer&&(i=e),n=new t.BufferSource(i).connect(this.output),this._activeSources.hasOwnProperty(e)||(this._activeSources[e]=[]),this._activeSources[e].push(n),n},t.MultiPlayer.prototype.start=function(e,i,n,s,o,r){i=this.toSeconds(i);var a=this._makeSource(e);return a.start(i,n,s,t.defaultArg(r,1),this.fadeIn),s&&a.stop(i+this.toSeconds(s),this.fadeOut),o=t.defaultArg(o,0),a.playbackRate.value=t.intervalToFrequencyRatio(o),this},t.MultiPlayer.prototype.startLoop=function(e,i,n,s,o,r,a){i=this.toSeconds(i);var l=this._makeSource(e);return l.loop=!0,l.loopStart=this.toSeconds(t.defaultArg(s,0)),l.loopEnd=this.toSeconds(t.defaultArg(o,0)),l.start(i,n,void 0,t.defaultArg(a,1),this.fadeIn),r=t.defaultArg(r,0),l.playbackRate.value=t.intervalToFrequencyRatio(r),this},t.MultiPlayer.prototype.stop=function(t,e){if(!this._activeSources[t]||!this._activeSources[t].length)throw new Error(\"Tone.MultiPlayer: cannot stop a buffer that hasn't been started or is already stopped\");return e=this.toSeconds(e),this._activeSources[t].shift().stop(e,this.fadeOut),this},t.MultiPlayer.prototype.stopAll=function(t){var e,i,n;t=this.toSeconds(t);for(e in this._activeSources)for(i=this._activeSources[e],n=0;n<i.length;n++)i[n].stop(t);return this},t.MultiPlayer.prototype.add=function(t,e,i){return this.buffers.add(t,e,i),this},Object.defineProperty(t.MultiPlayer.prototype,\"state\",{get:function(){return this._activeSources.length>0?t.State.Started:t.State.Stopped}}),Object.defineProperty(t.MultiPlayer.prototype,\"mute\",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.MultiPlayer.prototype.dispose=function(){t.Source.prototype.dispose.call(this);for(var e in this._activeSources)this._activeSources[e].forEach(function(t){t.dispose()});return this.buffers.dispose(),this.buffers=null,this._activeSources=null,this},t.MultiPlayer}),t(function(t){return t.GrainPlayer=function(){var e=t.defaults(arguments,[\"url\",\"onload\"],t.GrainPlayer);t.Source.call(this,e),this.buffer=new t.Buffer(e.url,e.onload),this._clock=new t.Clock(this._tick.bind(this),e.grainSize),this._loopStart=0,this._loopEnd=0,this._activeSources=[],this._playbackRate=e.playbackRate,this._grainSize=e.grainSize,this._overlap=e.overlap,this.detune=e.detune,this.overlap=e.overlap,this.loop=e.loop,this.playbackRate=e.playbackRate,this.grainSize=e.grainSize,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.reverse=e.reverse,this._clock.on(\"stop\",this._onstop.bind(this))},t.extend(t.GrainPlayer,t.Source),t.GrainPlayer.defaults={onload:t.noOp,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1},t.GrainPlayer.prototype._start=function(e,i,n){i=t.defaultArg(i,0),i=this.toSeconds(i),e=this.toSeconds(e),this._offset=i,this._clock.start(e),n&&this.stop(e+this.toSeconds(n))},t.GrainPlayer.prototype._stop=function(t){this._clock.stop(t)},t.GrainPlayer.prototype._onstop=function(t){this._activeSources.forEach(function(e){e.stop(t,0)})},t.GrainPlayer.prototype._tick=function(e){var i=this._offset<this._overlap?0:this._overlap,n=new t.BufferSource({buffer:this.buffer,fadeIn:i,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:t.intervalToFrequencyRatio(this.detune/100)}).connect(this.output);n.start(e,this._offset),this._offset+=this.grainSize,n.stop(e+this.grainSize),this._activeSources.push(n),n.onended=function(){var t=this._activeSources.indexOf(n);-1!==t&&this._activeSources.splice(t,1)}.bind(this)},t.GrainPlayer.prototype.seek=function(t,e){return this._offset=this.toSeconds(t),this._tick(this.toSeconds(e)),this},Object.defineProperty(t.GrainPlayer.prototype,\"playbackRate\",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this.grainSize=this._grainSize}}),Object.defineProperty(t.GrainPlayer.prototype,\"loopStart\",{get:function(){return this._loopStart},set:function(t){this._loopStart=this.toSeconds(t)}}),Object.defineProperty(t.GrainPlayer.prototype,\"loopEnd\",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=this.toSeconds(t)}}),Object.defineProperty(t.GrainPlayer.prototype,\"reverse\",{get:function(){return this.buffer.reverse},set:function(t){this.buffer.reverse=t}}),Object.defineProperty(t.GrainPlayer.prototype,\"grainSize\",{get:function(){return this._grainSize},set:function(t){this._grainSize=this.toSeconds(t),this._clock.frequency.value=this._playbackRate/this._grainSize}}),Object.defineProperty(t.GrainPlayer.prototype,\"overlap\",{get:function(){return this._overlap},set:function(t){this._overlap=this.toSeconds(t)}}),t.GrainPlayer.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this.buffer.dispose(),this.buffer=null,this._clock.dispose(),this._clock=null,this._activeSources.forEach(function(t){t.dispose()}),this._activeSources=null,this},t.GrainPlayer}),t(function(t){return t.Player=function(e){var i;e instanceof t.Buffer?(e=e.get(),i=t.Player.defaults):i=t.defaults(arguments,[\"url\",\"onload\"],t.Player),t.Source.call(this,i),this._source=null,this.autostart=i.autostart,this._buffer=new t.Buffer({url:i.url,onload:this._onload.bind(this,i.onload),reverse:i.reverse}),e instanceof AudioBuffer&&this._buffer.set(e),this._loop=i.loop,this._loopStart=i.loopStart,this._loopEnd=i.loopEnd,this._playbackRate=i.playbackRate,this.retrigger=i.retrigger,this.fadeIn=i.fadeIn,this.fadeOut=i.fadeOut},t.extend(t.Player,t.Source),t.Player.defaults={onload:t.noOp,playbackRate:1,loop:!1,autostart:!1,loopStart:0,loopEnd:0,retrigger:!1,reverse:!1,fadeIn:0,fadeOut:0},t.Player.prototype.load=function(t,e){return this._buffer.load(t,this._onload.bind(this,e))},t.Player.prototype._onload=function(e){e=t.defaultArg(e,t.noOp),e(this),this.autostart&&this.start()},t.Player.prototype._start=function(e,i,n){return i=this._loop?t.defaultArg(i,this._loopStart):t.defaultArg(i,0),i=this.toSeconds(i),n=t.defaultArg(n,Math.max(this._buffer.duration-i,0)),n=this.toSeconds(n),e=this.toSeconds(e),this._source=new t.BufferSource({buffer:this._buffer,loop:this._loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:this._playbackRate,fadeIn:this.fadeIn,fadeOut:this.fadeOut}).connect(this.output),this._loop||this._synced||this._state.setStateAtTime(t.State.Stopped,e+n),this._loop?this._source.start(e,i):this._source.start(e,i,n),this},t.Player.prototype._stop=function(t){return this._source&&this._source.stop(this.toSeconds(t)),this},t.Player.prototype.seek=function(e,i){return i=this.toSeconds(i),this._state.getValueAtTime(i)===t.State.Started&&(e=this.toSeconds(e),this._stop(i),this._start(i,e)),this},t.Player.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Player.prototype,\"loopStart\",{get:function(){return this._loopStart},set:function(t){this._loopStart=t,this._source&&(this._source.loopStart=this.toSeconds(t))}}),Object.defineProperty(t.Player.prototype,\"loopEnd\",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this._source&&(this._source.loopEnd=this.toSeconds(t))}}),Object.defineProperty(t.Player.prototype,\"buffer\",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(t.Player.prototype,\"loop\",{get:function(){return this._loop},set:function(t){this._loop=t,this._source&&(this._source.loop=t)}}),Object.defineProperty(t.Player.prototype,\"playbackRate\",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}}),Object.defineProperty(t.Player.prototype,\"reverse\",{get:function(){return this._buffer.reverse},set:function(t){this._buffer.reverse=t}}),Object.defineProperty(t.Player.prototype,\"loaded\",{get:function(){return this._buffer.loaded}}),t.Player.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer.dispose(),this._buffer=null,this},t.Player}),t(function(t){return t.Players=function(e){var i,n,s=Array.prototype.slice.call(arguments);s.shift(),i=t.defaults(s,[\"onload\"],t.Players),t.call(this),this._volume=this.output=new t.Volume(i.volume),this.volume=this._volume.volume,this._readOnly(\"volume\"),this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode=\"explicit\",this.mute=i.mute,this._players={},this._loadingCount=0,this._fadeIn=i.fadeIn,this._fadeOut=i.fadeOut;for(n in e)this._loadingCount++,this.add(n,e[n],this._bufferLoaded.bind(this,i.onload))},t.extend(t.Players,t.AudioNode),t.Players.defaults={volume:0,mute:!1,onload:t.noOp,fadeIn:0,fadeOut:0},t.Players.prototype._bufferLoaded=function(t){0===--this._loadingCount&&t&&t(this)},Object.defineProperty(t.Players.prototype,\"mute\",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),Object.defineProperty(t.Players.prototype,\"fadeIn\",{get:function(){return this._fadeIn},set:function(t){this._fadeIn=t,this._forEach(function(e){e.fadeIn=t})}}),Object.defineProperty(t.Players.prototype,\"fadeOut\",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=t,this._forEach(function(e){e.fadeOut=t})}}),Object.defineProperty(t.Players.prototype,\"state\",{get:function(){var e=!1;return this._forEach(function(i){e=e||i.state===t.State.Started}),e?t.State.Started:t.State.Stopped}}),t.Players.prototype.has=function(t){return this._players.hasOwnProperty(t)},t.Players.prototype.get=function(t){if(this.has(t))return this._players[t];throw new Error(\"Tone.Players: no player named \"+t)},t.Players.prototype._forEach=function(t){for(var e in this._players)t(this._players[e],e);return this},Object.defineProperty(t.Players.prototype,\"loaded\",{get:function(){var t=!0;return this._forEach(function(e){t=t&&e.loaded}),t}}),t.Players.prototype.add=function(e,i,n){return this._players[e]=new t.Player(i,n).connect(this.output),this._players[e].fadeIn=this._fadeIn,this._players[e].fadeOut=this._fadeOut,this},t.Players.prototype.stopAll=function(t){this._forEach(function(e){e.stop(t)})},t.Players.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable(\"volume\"),this.volume=null,this.output=null,this._forEach(function(t){t.dispose()}),this._players=null,this},t.Players}),t(function(t){return t.UserMedia=function(){var e=t.defaults(arguments,[\"volume\"],t.UserMedia);t.AudioNode.call(this),this._mediaStream=null,this._stream=null,this._device=null,this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly(\"volume\"),this.mute=e.mute},t.extend(t.UserMedia,t.AudioNode),t.UserMedia.defaults={volume:0,mute:!1},t.UserMedia.prototype.open=function(e){return e=t.defaultArg(e,\"default\"),t.UserMedia.enumerateDevices().then(function(i){var n,s;if(t.isNumber(e))n=i[e];else if(!(n=i.find(function(t){return t.label===e||t.deviceId===e})))throw new Error(\"Tone.UserMedia: no matching device: \"+e);return this._device=n,s={audio:{deviceId:n.deviceId,echoCancellation:!1,sampleRate:this.context.sampleRate}},navigator.mediaDevices.getUserMedia(s).then(function(t){return this._stream||(this._stream=t,this._mediaStream=this.context.createMediaStreamSource(t),this._mediaStream.connect(this.output)),this}.bind(this))}.bind(this))},t.UserMedia.prototype.close=function(){return this._stream&&(this._stream.getAudioTracks().forEach(function(t){t.stop()}),this._stream=null,this._mediaStream.disconnect(),this._mediaStream=null),this._device=null,this},t.UserMedia.enumerateDevices=function(){return navigator.mediaDevices.enumerateDevices().then(function(t){return t.filter(function(t){return\"audioinput\"===t.kind})})},Object.defineProperty(t.UserMedia.prototype,\"state\",{get:function(){return this._stream&&this._stream.active?t.State.Started:t.State.Stopped}}),Object.defineProperty(t.UserMedia.prototype,\"deviceId\",{get:function(){if(this._device)return this._device.deviceId}}),Object.defineProperty(t.UserMedia.prototype,\"groupId\",{get:function(){if(this._device)return this._device.groupId}}),Object.defineProperty(t.UserMedia.prototype,\"label\",{get:function(){if(this._device)return this._device.label}}),Object.defineProperty(t.UserMedia.prototype,\"mute\",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.UserMedia.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.close(),this._writable(\"volume\"),this._volume.dispose(),this._volume=null,this.volume=null,this},Object.defineProperty(t.UserMedia,\"supported\",{get:function(){return!t.isUndef(navigator.mediaDevices)&&t.isFunction(navigator.mediaDevices.getUserMedia)}}),t.UserMedia}),e});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvVG9uZS9idWlsZC9Ub25lLm1pbi5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1JTLy4vbm9kZV9tb2R1bGVzL1RvbmUvYnVpbGQvVG9uZS5taW4uanM/MDIyNSJdLCJzb3VyY2VzQ29udGVudCI6WyIhZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGZ1bmN0aW9uKCl7cmV0dXJuIGUoKX0pOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9ZSgpOnQuVG9uZT1lKCl9KHRoaXMsZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KHQpe3QoZSl9dmFyIGU7LyoqXG5cdCAqICBUb25lLmpzXG5cdCAqICBAYXV0aG9yIFlvdGFtIE1hbm5cblx0ICogIEBsaWNlbnNlIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQgTUlUIExpY2Vuc2Vcblx0ICogIEBjb3B5cmlnaHQgMjAxNC0yMDE3IFlvdGFtIE1hbm5cblx0ICovXG5yZXR1cm4gZnVuY3Rpb24odCl7ZT10KCl9KGZ1bmN0aW9uKCl7dmFyIHQsZT1mdW5jdGlvbigpe307cmV0dXJuIGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIHQsaSxuO2Zvcih0IGluIGUpaWYoaT10WzBdLm1hdGNoKC9eW0EtWl0kLyksbj1lW3RdPT09dGhpcy5jb25zdHJ1Y3RvcixlLmlzRnVuY3Rpb24oZVt0XSkmJmkmJm4pcmV0dXJuIHQ7cmV0dXJuXCJUb25lXCJ9LGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsaSxuKXt2YXIgcyxvLHIsYSxsLGgsdTtlLmlzT2JqZWN0KHQpP249aTplLmlzU3RyaW5nKHQpJiYocz17fSxzW3RdPWksdD1zKTt0OmZvcihvIGluIHQpe2lmKGk9dFtvXSxyPXRoaXMsLTEhPT1vLmluZGV4T2YoXCIuXCIpKXtmb3IoYT1vLnNwbGl0KFwiLlwiKSxsPTA7bDxhLmxlbmd0aC0xO2wrKylpZigocj1yW2FbbF1dKWluc3RhbmNlb2YgZSl7YS5zcGxpY2UoMCxsKzEpLGg9YS5qb2luKFwiLlwiKSxyLnNldChoLGkpO2NvbnRpbnVlIHR9bz1hW2EubGVuZ3RoLTFdfXU9cltvXSxlLmlzVW5kZWYodSl8fChlLlNpZ25hbCYmdSBpbnN0YW5jZW9mIGUuU2lnbmFsfHxlLlBhcmFtJiZ1IGluc3RhbmNlb2YgZS5QYXJhbT91LnZhbHVlIT09aSYmKGUuaXNVbmRlZihuKT91LnZhbHVlPWk6dS5yYW1wVG8oaSxuKSk6dSBpbnN0YW5jZW9mIEF1ZGlvUGFyYW0/dS52YWx1ZSE9PWkmJih1LnZhbHVlPWkpOnUgaW5zdGFuY2VvZiBlP3Uuc2V0KGkpOnUhPT1pJiYocltvXT1pKSl9cmV0dXJuIHRoaXN9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXt2YXIgaSxuLHMsbyxyLGEsbCxoLHU7Zm9yKGUuaXNVbmRlZih0KT90PXRoaXMuX2NvbGxlY3REZWZhdWx0cyh0aGlzLmNvbnN0cnVjdG9yKTplLmlzU3RyaW5nKHQpJiYodD1bdF0pLGk9e30sbj0wO248dC5sZW5ndGg7bisrKXtpZihzPXRbbl0sbz10aGlzLHI9aSwtMSE9PXMuaW5kZXhPZihcIi5cIikpe2ZvcihhPXMuc3BsaXQoXCIuXCIpLGw9MDtsPGEubGVuZ3RoLTE7bCsrKWg9YVtsXSxyW2hdPXJbaF18fHt9LHI9cltoXSxvPW9baF07cz1hW2EubGVuZ3RoLTFdfXU9b1tzXSxlLmlzT2JqZWN0KHRbc10pP3Jbc109dS5nZXQoKTplLlNpZ25hbCYmdSBpbnN0YW5jZW9mIGUuU2lnbmFsP3Jbc109dS52YWx1ZTplLlBhcmFtJiZ1IGluc3RhbmNlb2YgZS5QYXJhbT9yW3NdPXUudmFsdWU6dSBpbnN0YW5jZW9mIEF1ZGlvUGFyYW0/cltzXT11LnZhbHVlOnUgaW5zdGFuY2VvZiBlP3Jbc109dS5nZXQoKTplLmlzRnVuY3Rpb24odSl8fGUuaXNVbmRlZih1KXx8KHJbc109dSl9cmV0dXJuIGl9LGUucHJvdG90eXBlLl9jb2xsZWN0RGVmYXVsdHM9ZnVuY3Rpb24odCl7dmFyIGksbixzPVtdO2lmKGUuaXNVbmRlZih0LmRlZmF1bHRzKXx8KHM9T2JqZWN0LmtleXModC5kZWZhdWx0cykpLCFlLmlzVW5kZWYodC5fc3VwZXIpKWZvcihpPXRoaXMuX2NvbGxlY3REZWZhdWx0cyh0Ll9zdXBlciksbj0wO248aS5sZW5ndGg7bisrKS0xPT09cy5pbmRleE9mKGlbbl0pJiZzLnB1c2goaVtuXSk7cmV0dXJuIHN9LGUuZGVmYXVsdHM9ZnVuY3Rpb24odCxpLG4pe3ZhciBzLG89e307aWYoMT09PXQubGVuZ3RoJiZlLmlzT2JqZWN0KHRbMF0pKW89dFswXTtlbHNlIGZvcihzPTA7czxpLmxlbmd0aDtzKyspb1tpW3NdXT10W3NdO3JldHVybiBlLmlzVW5kZWYobi5kZWZhdWx0cyk/ZS5pc09iamVjdChuKT9lLmRlZmF1bHRBcmcobyxuKTpvOmUuZGVmYXVsdEFyZyhvLG4uZGVmYXVsdHMpfSxlLmRlZmF1bHRBcmc9ZnVuY3Rpb24odCxpKXt2YXIgbixzLG87aWYoZS5pc09iamVjdCh0KSYmZS5pc09iamVjdChpKSl7bj17fTtmb3IocyBpbiB0KW5bc109ZS5kZWZhdWx0QXJnKGlbc10sdFtzXSk7Zm9yKG8gaW4gaSluW29dPWUuZGVmYXVsdEFyZyh0W29dLGlbb10pO3JldHVybiBufXJldHVybiBlLmlzVW5kZWYodCk/aTp0fSxlLmNvbm5lY3RTZXJpZXM9ZnVuY3Rpb24oKXt2YXIgdCxpLG49YXJndW1lbnRzWzBdO2Zvcih0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKylpPWFyZ3VtZW50c1t0XSxuLmNvbm5lY3QoaSksbj1pO3JldHVybiBlfSxlLmlzVW5kZWY9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXR9LGUuaXNGdW5jdGlvbj1mdW5jdGlvbih0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0fSxlLmlzTnVtYmVyPWZ1bmN0aW9uKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0fSxlLmlzT2JqZWN0PWZ1bmN0aW9uKHQpe3JldHVyblwiW29iamVjdCBPYmplY3RdXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkmJnQuY29uc3RydWN0b3I9PT1PYmplY3R9LGUuaXNCb29sZWFuPWZ1bmN0aW9uKHQpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgdH0sZS5pc0FycmF5PWZ1bmN0aW9uKHQpe3JldHVybiBBcnJheS5pc0FycmF5KHQpfSxlLmlzU3RyaW5nPWZ1bmN0aW9uKHQpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0fSxlLmlzTm90ZT1mdW5jdGlvbih0KXtyZXR1cm4gZS5pc1N0cmluZyh0KSYmL14oW2EtZ117MX0oPzpifCN8eHxiYik/KSgtP1swLTldKykvaS50ZXN0KHQpfSxlLm5vT3A9ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLl9yZWFkT25seT1mdW5jdGlvbih0KXtpZihBcnJheS5pc0FycmF5KHQpKWZvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKXRoaXMuX3JlYWRPbmx5KHRbZV0pO2Vsc2UgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsdCx7d3JpdGFibGU6ITEsZW51bWVyYWJsZTohMH0pfSxlLnByb3RvdHlwZS5fd3JpdGFibGU9ZnVuY3Rpb24odCl7aWYoQXJyYXkuaXNBcnJheSh0KSlmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKyl0aGlzLl93cml0YWJsZSh0W2VdKTtlbHNlIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLHQse3dyaXRhYmxlOiEwfSl9LGUuU3RhdGU9e1N0YXJ0ZWQ6XCJzdGFydGVkXCIsU3RvcHBlZDpcInN0b3BwZWRcIixQYXVzZWQ6XCJwYXVzZWRcIn0sZS5lcXVhbFBvd2VyU2NhbGU9ZnVuY3Rpb24odCl7dmFyIGU9LjUqTWF0aC5QSTtyZXR1cm4gTWF0aC5zaW4odCplKX0sZS5kYlRvR2Fpbj1mdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5wb3coMix0LzYpfSxlLmdhaW5Ub0RiPWZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLmxvZyh0KS9NYXRoLkxOMTAqMjB9LGUuaW50ZXJ2YWxUb0ZyZXF1ZW5jeVJhdGlvPWZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnBvdygyLHQvMTIpfSxlLnByb3RvdHlwZS5ub3c9ZnVuY3Rpb24oKXtyZXR1cm4gZS5jb250ZXh0Lm5vdygpfSxlLm5vdz1mdW5jdGlvbigpe3JldHVybiBlLmNvbnRleHQubm93KCl9LGUuaXNQYXN0PWZ1bmN0aW9uKHQpe3Q8ZS5jb250ZXh0LmN1cnJlbnRUaW1lJiZjb25zb2xlLndhcm4oXCJUaW1lICdcIit0K1wiJyBpcyBpbiB0aGUgcGFzdC4gU2NoZWR1bGVkIHRpbWUgbXVzdCBiZSDiiaUgQXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lXCIpfSxlLmV4dGVuZD1mdW5jdGlvbih0LGkpe2Z1bmN0aW9uIG4oKXt9ZS5pc1VuZGVmKGkpJiYoaT1lKSxuLnByb3RvdHlwZT1pLnByb3RvdHlwZSx0LnByb3RvdHlwZT1uZXcgbix0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj10LHQuX3N1cGVyPWl9LHQ9bnVsbCxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcImNvbnRleHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHR9LHNldDpmdW5jdGlvbihpKXt0PWUuQ29udGV4dCYmaSBpbnN0YW5jZW9mIGUuQ29udGV4dD9pOm5ldyBlLkNvbnRleHQoaSksZS5Db250ZXh0LmVtaXQoXCJpbml0XCIsdCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY29udGV4dFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5jb250ZXh0fX0pLGUuc2V0Q29udGV4dD1mdW5jdGlvbih0KXtlLmNvbnRleHQ9dH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYmxvY2tUaW1lXCIse2dldDpmdW5jdGlvbigpe3JldHVybiAxMjgvdGhpcy5jb250ZXh0LnNhbXBsZVJhdGV9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic2FtcGxlVGltZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMS90aGlzLmNvbnRleHQuc2FtcGxlUmF0ZX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcInN1cHBvcnRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgdD13aW5kb3cuaGFzT3duUHJvcGVydHkoXCJBdWRpb0NvbnRleHRcIil8fHdpbmRvdy5oYXNPd25Qcm9wZXJ0eShcIndlYmtpdEF1ZGlvQ29udGV4dFwiKSxlPXdpbmRvdy5oYXNPd25Qcm9wZXJ0eShcIlByb21pc2VcIiksaT13aW5kb3cuaGFzT3duUHJvcGVydHkoXCJXb3JrZXJcIik7cmV0dXJuIHQmJmUmJml9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJpbml0aWFsaXplZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXR9fSksZS5nZXRDb250ZXh0PWZ1bmN0aW9uKHQpe2lmKGUuaW5pdGlhbGl6ZWQpdChlLmNvbnRleHQpO2Vsc2V7dmFyIGk9ZnVuY3Rpb24oKXt0KGUuY29udGV4dCksZS5Db250ZXh0Lm9mZihcImluaXRcIixpKX07ZS5Db250ZXh0Lm9uKFwiaW5pdFwiLGkpfXJldHVybiBlfSxlLnZlcnNpb249XCJyMTFcIix3aW5kb3cuVE9ORV9TSUxFTkNFX1ZFUlNJT05fTE9HR0lOR3x8Y29uc29sZS5sb2coXCIlYyAqIFRvbmUuanMgXCIrZS52ZXJzaW9uK1wiICogXCIsXCJiYWNrZ3JvdW5kOiAjMDAwOyBjb2xvcjogI2ZmZlwiKSxlfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5FbWl0dGVyPWZ1bmN0aW9uKCl7dC5jYWxsKHRoaXMpLHRoaXMuX2V2ZW50cz17fX0sdC5leHRlbmQodC5FbWl0dGVyKSx0LkVtaXR0ZXIucHJvdG90eXBlLm9uPWZ1bmN0aW9uKHQsZSl7dmFyIGksbixzPXQuc3BsaXQoL1xcVysvKTtmb3IoaT0wO2k8cy5sZW5ndGg7aSsrKW49c1tpXSx0aGlzLl9ldmVudHMuaGFzT3duUHJvcGVydHkobil8fCh0aGlzLl9ldmVudHNbbl09W10pLHRoaXMuX2V2ZW50c1tuXS5wdXNoKGUpO3JldHVybiB0aGlzfSx0LkVtaXR0ZXIucHJvdG90eXBlLm9mZj1mdW5jdGlvbihlLGkpe3ZhciBuLHMsbyxyPWUuc3BsaXQoL1xcVysvKTtmb3Iobj0wO248ci5sZW5ndGg7bisrKWlmKGU9cltuXSx0aGlzLl9ldmVudHMuaGFzT3duUHJvcGVydHkoZSkpaWYodC5pc1VuZGVmKGkpKXRoaXMuX2V2ZW50c1tlXT1bXTtlbHNlIGZvcihzPXRoaXMuX2V2ZW50c1tlXSxvPTA7bzxzLmxlbmd0aDtvKyspc1tvXT09PWkmJnMuc3BsaWNlKG8sMSk7cmV0dXJuIHRoaXN9LHQuRW1pdHRlci5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbih0KXt2YXIgZSxpLG4scztpZih0aGlzLl9ldmVudHMmJihlPUFycmF5LmFwcGx5KG51bGwsYXJndW1lbnRzKS5zbGljZSgxKSx0aGlzLl9ldmVudHMuaGFzT3duUHJvcGVydHkodCkpKWZvcihpPXRoaXMuX2V2ZW50c1t0XSxuPTAscz1pLmxlbmd0aDtuPHM7bisrKWlbbl0uYXBwbHkodGhpcyxlKTtyZXR1cm4gdGhpc30sdC5FbWl0dGVyLm1peGluPWZ1bmN0aW9uKGUpe3ZhciBpLG4scyxvPVtcIm9uXCIsXCJvZmZcIixcImVtaXRcIl07Zm9yKGUuX2V2ZW50cz17fSxpPTA7aTxvLmxlbmd0aDtpKyspbj1vW2ldLHM9dC5FbWl0dGVyLnByb3RvdHlwZVtuXSxlW25dPXM7cmV0dXJuIHQuRW1pdHRlcn0sdC5FbWl0dGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9ldmVudHM9bnVsbCx0aGlzfSx0LkVtaXR0ZXJ9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlRpbWVsaW5lPWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1wibWVtb3J5XCJdLHQuVGltZWxpbmUpO3QuY2FsbCh0aGlzKSx0aGlzLl90aW1lbGluZT1bXSx0aGlzLl90b1JlbW92ZT1bXSx0aGlzLl90b0FkZD1bXSx0aGlzLl9pdGVyYXRpbmc9ITEsdGhpcy5tZW1vcnk9ZS5tZW1vcnl9LHQuZXh0ZW5kKHQuVGltZWxpbmUpLHQuVGltZWxpbmUuZGVmYXVsdHM9e21lbW9yeToxLzB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlRpbWVsaW5lLnByb3RvdHlwZSxcImxlbmd0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGltZWxpbmUubGVuZ3RofX0pLHQuVGltZWxpbmUucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXt2YXIgaSxuO2lmKHQuaXNVbmRlZihlLnRpbWUpKXRocm93IG5ldyBFcnJvcihcIlRvbmUuVGltZWxpbmU6IGV2ZW50cyBtdXN0IGhhdmUgYSB0aW1lIGF0dHJpYnV0ZVwiKTtyZXR1cm4gdGhpcy5faXRlcmF0aW5nP3RoaXMuX3RvQWRkLnB1c2goZSk6KGk9dGhpcy5fc2VhcmNoKGUudGltZSksdGhpcy5fdGltZWxpbmUuc3BsaWNlKGkrMSwwLGUpLHRoaXMubGVuZ3RoPnRoaXMubWVtb3J5JiYobj10aGlzLmxlbmd0aC10aGlzLm1lbW9yeSx0aGlzLl90aW1lbGluZS5zcGxpY2UoMCxuKSkpLHRoaXN9LHQuVGltZWxpbmUucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXtpZih0aGlzLl9pdGVyYXRpbmcpdGhpcy5fdG9SZW1vdmUucHVzaCh0KTtlbHNle3ZhciBlPXRoaXMuX3RpbWVsaW5lLmluZGV4T2YodCk7LTEhPT1lJiZ0aGlzLl90aW1lbGluZS5zcGxpY2UoZSwxKX1yZXR1cm4gdGhpc30sdC5UaW1lbGluZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUsaSl7aT10LmRlZmF1bHRBcmcoaSxcInRpbWVcIik7dmFyIG49dGhpcy5fc2VhcmNoKGUsaSk7cmV0dXJuLTEhPT1uP3RoaXMuX3RpbWVsaW5lW25dOm51bGx9LHQuVGltZWxpbmUucHJvdG90eXBlLnBlZWs9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGltZWxpbmVbMF19LHQuVGltZWxpbmUucHJvdG90eXBlLnNoaWZ0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RpbWVsaW5lLnNoaWZ0KCl9LHQuVGltZWxpbmUucHJvdG90eXBlLmdldEFmdGVyPWZ1bmN0aW9uKGUsaSl7aT10LmRlZmF1bHRBcmcoaSxcInRpbWVcIik7dmFyIG49dGhpcy5fc2VhcmNoKGUsaSk7cmV0dXJuIG4rMTx0aGlzLl90aW1lbGluZS5sZW5ndGg/dGhpcy5fdGltZWxpbmVbbisxXTpudWxsfSx0LlRpbWVsaW5lLnByb3RvdHlwZS5nZXRCZWZvcmU9ZnVuY3Rpb24oZSxpKXt2YXIgbixzO3JldHVybiBpPXQuZGVmYXVsdEFyZyhpLFwidGltZVwiKSwobj10aGlzLl90aW1lbGluZS5sZW5ndGgpPjAmJnRoaXMuX3RpbWVsaW5lW24tMV1baV08ZT90aGlzLl90aW1lbGluZVtuLTFdOihzPXRoaXMuX3NlYXJjaChlLGkpLHMtMT49MD90aGlzLl90aW1lbGluZVtzLTFdOm51bGwpfSx0LlRpbWVsaW5lLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24odCl7dmFyIGUsaTtpZih0aGlzLl90aW1lbGluZS5sZW5ndGg+MSlpZigoZT10aGlzLl9zZWFyY2godCkpPj0wKWlmKHRoaXMuX3RpbWVsaW5lW2VdLnRpbWU9PT10KXtmb3IoaT1lO2k+PTAmJnRoaXMuX3RpbWVsaW5lW2ldLnRpbWU9PT10O2ktLSllPWk7dGhpcy5fdGltZWxpbmU9dGhpcy5fdGltZWxpbmUuc2xpY2UoMCxlKX1lbHNlIHRoaXMuX3RpbWVsaW5lPXRoaXMuX3RpbWVsaW5lLnNsaWNlKDAsZSsxKTtlbHNlIHRoaXMuX3RpbWVsaW5lPVtdO2Vsc2UgMT09PXRoaXMuX3RpbWVsaW5lLmxlbmd0aCYmdGhpcy5fdGltZWxpbmVbMF0udGltZT49dCYmKHRoaXMuX3RpbWVsaW5lPVtdKTtyZXR1cm4gdGhpc30sdC5UaW1lbGluZS5wcm90b3R5cGUuY2FuY2VsQmVmb3JlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3NlYXJjaCh0KTtyZXR1cm4gZT49MCYmKHRoaXMuX3RpbWVsaW5lPXRoaXMuX3RpbWVsaW5lLnNsaWNlKGUrMSkpLHRoaXN9LHQuVGltZWxpbmUucHJvdG90eXBlLnByZXZpb3VzRXZlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fdGltZWxpbmUuaW5kZXhPZih0KTtyZXR1cm4gZT4wP3RoaXMuX3RpbWVsaW5lW2UtMV06bnVsbH0sdC5UaW1lbGluZS5wcm90b3R5cGUuX3NlYXJjaD1mdW5jdGlvbihlLGkpe3ZhciBuLHMsbyxyLGEsbCxoLHU7aWYoMD09PXRoaXMuX3RpbWVsaW5lLmxlbmd0aClyZXR1cm4tMTtpZihpPXQuZGVmYXVsdEFyZyhpLFwidGltZVwiKSxuPTAscz10aGlzLl90aW1lbGluZS5sZW5ndGgsbz1zLHM+MCYmdGhpcy5fdGltZWxpbmVbcy0xXVtpXTw9ZSlyZXR1cm4gcy0xO2Zvcig7bjxvOyl7aWYocj1NYXRoLmZsb29yKG4rKG8tbikvMiksYT10aGlzLl90aW1lbGluZVtyXSxsPXRoaXMuX3RpbWVsaW5lW3IrMV0sYVtpXT09PWUpe2ZvcihoPXI7aDx0aGlzLl90aW1lbGluZS5sZW5ndGg7aCsrKXU9dGhpcy5fdGltZWxpbmVbaF0sdVtpXT09PWUmJihyPWgpO3JldHVybiByfWlmKGFbaV08ZSYmbFtpXT5lKXJldHVybiByO2FbaV0+ZT9vPXI6bj1yKzF9cmV0dXJuLTF9LHQuVGltZWxpbmUucHJvdG90eXBlLl9pdGVyYXRlPWZ1bmN0aW9uKGUsaSxuKXt0aGlzLl9pdGVyYXRpbmc9ITAsaT10LmRlZmF1bHRBcmcoaSwwKSxuPXQuZGVmYXVsdEFyZyhuLHRoaXMuX3RpbWVsaW5lLmxlbmd0aC0xKTtmb3IodmFyIHM9aTtzPD1uO3MrKyllLmNhbGwodGhpcyx0aGlzLl90aW1lbGluZVtzXSk7dGhpcy5faXRlcmF0aW5nPSExLHRoaXMuX3RvUmVtb3ZlLmZvckVhY2goZnVuY3Rpb24odCl7dGhpcy5yZW1vdmUodCl9LmJpbmQodGhpcykpLHRoaXMuX3RvUmVtb3ZlPVtdLHRoaXMuX3RvQWRkLmZvckVhY2goZnVuY3Rpb24odCl7dGhpcy5hZGQodCl9LmJpbmQodGhpcykpLHRoaXMuX3RvQWRkPVtdfSx0LlRpbWVsaW5lLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9pdGVyYXRlKHQpLHRoaXN9LHQuVGltZWxpbmUucHJvdG90eXBlLmZvckVhY2hCZWZvcmU9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9zZWFyY2godCk7cmV0dXJuLTEhPT1pJiZ0aGlzLl9pdGVyYXRlKGUsMCxpKSx0aGlzfSx0LlRpbWVsaW5lLnByb3RvdHlwZS5mb3JFYWNoQWZ0ZXI9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9zZWFyY2godCk7cmV0dXJuIHRoaXMuX2l0ZXJhdGUoZSxpKzEpLHRoaXN9LHQuVGltZWxpbmUucHJvdG90eXBlLmZvckVhY2hGcm9tPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPXRoaXMuX3NlYXJjaCh0KTtpPj0wJiZ0aGlzLl90aW1lbGluZVtpXS50aW1lPj10OylpLS07cmV0dXJuIHRoaXMuX2l0ZXJhdGUoZSxpKzEpLHRoaXN9LHQuVGltZWxpbmUucHJvdG90eXBlLmZvckVhY2hBdFRpbWU9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9zZWFyY2godCk7cmV0dXJuLTEhPT1pJiZ0aGlzLl9pdGVyYXRlKGZ1bmN0aW9uKGkpe2kudGltZT09PXQmJmUuY2FsbCh0aGlzLGkpfSwwLGkpLHRoaXN9LHQuVGltZWxpbmUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3RpbWVsaW5lPW51bGwsdGhpcy5fdG9SZW1vdmU9bnVsbCx0aGlzLl90b0FkZD1udWxsLHRoaXN9LHQuVGltZWxpbmV9KSx0KGZ1bmN0aW9uKHQpeyF3aW5kb3cuaGFzT3duUHJvcGVydHkoXCJBdWRpb0NvbnRleHRcIikmJndpbmRvdy5oYXNPd25Qcm9wZXJ0eShcIndlYmtpdEF1ZGlvQ29udGV4dFwiKSYmKHdpbmRvdy5BdWRpb0NvbnRleHQ9d2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCksdC5Db250ZXh0PWZ1bmN0aW9uKCl7dmFyIGksbjt0LkVtaXR0ZXIuY2FsbCh0aGlzKSxpPXQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImNvbnRleHRcIl0sdC5Db250ZXh0KSxpLmNvbnRleHR8fChpLmNvbnRleHQ9bmV3IHdpbmRvdy5BdWRpb0NvbnRleHQpLHRoaXMuX2NvbnRleHQ9aS5jb250ZXh0O2ZvcihuIGluIHRoaXMuX2NvbnRleHQpdGhpcy5fZGVmaW5lUHJvcGVydHkodGhpcy5fY29udGV4dCxuKTt0aGlzLl9sYXRlbmN5SGludD1pLmxhdGVuY3lIaW50LHRoaXMuX2NvbnN0YW50cz17fSx0aGlzLmxvb2tBaGVhZD1pLmxvb2tBaGVhZCx0aGlzLl9jb21wdXRlZFVwZGF0ZUludGVydmFsPTAsdGhpcy5fdGlja2VyPW5ldyBlKHRoaXMuZW1pdC5iaW5kKHRoaXMsXCJ0aWNrXCIpLGkuY2xvY2tTb3VyY2UsaS51cGRhdGVJbnRlcnZhbCksdGhpcy5fdGltZW91dHM9bmV3IHQuVGltZWxpbmUsdGhpcy5fdGltZW91dElkcz0wLHRoaXMub24oXCJ0aWNrXCIsdGhpcy5fdGltZW91dExvb3AuYmluZCh0aGlzKSl9LHQuZXh0ZW5kKHQuQ29udGV4dCx0LkVtaXR0ZXIpLHQuRW1pdHRlci5taXhpbih0LkNvbnRleHQpLHQuQ29udGV4dC5kZWZhdWx0cz17Y2xvY2tTb3VyY2U6XCJ3b3JrZXJcIixsYXRlbmN5SGludDpcImludGVyYWN0aXZlXCIsbG9va0FoZWFkOi4xLHVwZGF0ZUludGVydmFsOi4wM30sdC5Db250ZXh0LnByb3RvdHlwZS5fZGVmaW5lUHJvcGVydHk9ZnVuY3Rpb24oZSxpKXt0LmlzVW5kZWYodGhpc1tpXSkmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLGkse2dldDpmdW5jdGlvbigpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGVbaV0/ZVtpXS5iaW5kKGUpOmVbaV19LHNldDpmdW5jdGlvbih0KXtlW2ldPXR9fSl9LHQuQ29udGV4dC5wcm90b3R5cGUubm93PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRleHQuY3VycmVudFRpbWUrdGhpcy5sb29rQWhlYWR9LHQuQ29udGV4dC5wcm90b3R5cGUuZ2V0Q29uc3RhbnQ9ZnVuY3Rpb24odCl7dmFyIGUsaSxuLHM7aWYodGhpcy5fY29uc3RhbnRzW3RdKXJldHVybiB0aGlzLl9jb25zdGFudHNbdF07Zm9yKGU9dGhpcy5fY29udGV4dC5jcmVhdGVCdWZmZXIoMSwxMjgsdGhpcy5fY29udGV4dC5zYW1wbGVSYXRlKSxpPWUuZ2V0Q2hhbm5lbERhdGEoMCksbj0wO248aS5sZW5ndGg7bisrKWlbbl09dDtyZXR1cm4gcz10aGlzLl9jb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpLHMuY2hhbm5lbENvdW50PTEscy5jaGFubmVsQ291bnRNb2RlPVwiZXhwbGljaXRcIixzLmJ1ZmZlcj1lLHMubG9vcD0hMCxzLnN0YXJ0KDApLHRoaXMuX2NvbnN0YW50c1t0XT1zLHN9LHQuQ29udGV4dC5wcm90b3R5cGUuX3RpbWVvdXRMb29wPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMubm93KCk7dGhpcy5fdGltZW91dHMmJnRoaXMuX3RpbWVvdXRzLmxlbmd0aCYmdGhpcy5fdGltZW91dHMucGVlaygpLnRpbWU8PXQ7KXRoaXMuX3RpbWVvdXRzLnNoaWZ0KCkuY2FsbGJhY2soKX0sdC5Db250ZXh0LnByb3RvdHlwZS5zZXRUaW1lb3V0PWZ1bmN0aW9uKHQsZSl7dGhpcy5fdGltZW91dElkcysrO3ZhciBpPXRoaXMubm93KCk7cmV0dXJuIHRoaXMuX3RpbWVvdXRzLmFkZCh7Y2FsbGJhY2s6dCx0aW1lOmkrZSxpZDp0aGlzLl90aW1lb3V0SWRzfSksdGhpcy5fdGltZW91dElkc30sdC5Db250ZXh0LnByb3RvdHlwZS5jbGVhclRpbWVvdXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3RpbWVvdXRzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5pZD09PXQmJnRoaXMucmVtb3ZlKGUpfSksdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQ29udGV4dC5wcm90b3R5cGUsXCJ1cGRhdGVJbnRlcnZhbFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGlja2VyLnVwZGF0ZUludGVydmFsfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdGlja2VyLnVwZGF0ZUludGVydmFsPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQ29udGV4dC5wcm90b3R5cGUsXCJjbG9ja1NvdXJjZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGlja2VyLnR5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl90aWNrZXIudHlwZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkNvbnRleHQucHJvdG90eXBlLFwibGF0ZW5jeUhpbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xhdGVuY3lIaW50fSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIGk9ZTtpZih0aGlzLl9sYXRlbmN5SGludD1lLHQuaXNTdHJpbmcoZSkpc3dpdGNoKGUpe2Nhc2VcImludGVyYWN0aXZlXCI6aT0uMSx0aGlzLl9jb250ZXh0LmxhdGVuY3lIaW50PWU7YnJlYWs7Y2FzZVwicGxheWJhY2tcIjppPS44LHRoaXMuX2NvbnRleHQubGF0ZW5jeUhpbnQ9ZTticmVhaztjYXNlXCJiYWxhbmNlZFwiOmk9LjI1LHRoaXMuX2NvbnRleHQubGF0ZW5jeUhpbnQ9ZTticmVhaztjYXNlXCJmYXN0ZXN0XCI6dGhpcy5fY29udGV4dC5sYXRlbmN5SGludD1cImludGVyYWN0aXZlXCIsaT0uMDF9dGhpcy5sb29rQWhlYWQ9aSx0aGlzLnVwZGF0ZUludGVydmFsPWkvM319KSx0LkNvbnRleHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0LkNvbnRleHQuZW1pdChcImNsb3NlXCIsdGhpcyksdC5FbWl0dGVyLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fdGlja2VyLmRpc3Bvc2UoKSx0aGlzLl90aWNrZXI9bnVsbCx0aGlzLl90aW1lb3V0cy5kaXNwb3NlKCksdGhpcy5fdGltZW91dHM9bnVsbDtmb3IodmFyIGUgaW4gdGhpcy5fY29uc3RhbnRzKXRoaXMuX2NvbnN0YW50c1tlXS5kaXNjb25uZWN0KCk7cmV0dXJuIHRoaXMuX2NvbnN0YW50cz1udWxsLHRoaXMuY2xvc2UoKSx0aGlzfTt2YXIgZT1mdW5jdGlvbihlLGksbil7dGhpcy5fdHlwZT1pLHRoaXMuX3VwZGF0ZUludGVydmFsPW4sdGhpcy5fY2FsbGJhY2s9dC5kZWZhdWx0QXJnKGUsdC5ub09wKSx0aGlzLl9jcmVhdGVDbG9jaygpfTtyZXR1cm4gZS5UeXBlPXtXb3JrZXI6XCJ3b3JrZXJcIixUaW1lb3V0OlwidGltZW91dFwiLE9mZmxpbmU6XCJvZmZsaW5lXCJ9LGUucHJvdG90eXBlLl9jcmVhdGVXb3JrZXI9ZnVuY3Rpb24oKXt2YXIgdCxlLGk7d2luZG93LlVSTD13aW5kb3cuVVJMfHx3aW5kb3cud2Via2l0VVJMLHQ9bmV3IEJsb2IoW1widmFyIHRpbWVvdXRUaW1lID0gXCIrKDFlMyp0aGlzLl91cGRhdGVJbnRlcnZhbCkudG9GaXhlZCgxKStcIjtzZWxmLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKG1zZyl7XFx0dGltZW91dFRpbWUgPSBwYXJzZUludChtc2cuZGF0YSk7fTtmdW5jdGlvbiB0aWNrKCl7XFx0c2V0VGltZW91dCh0aWNrLCB0aW1lb3V0VGltZSk7XFx0c2VsZi5wb3N0TWVzc2FnZSgndGljaycpO310aWNrKCk7XCJdKSxlPVVSTC5jcmVhdGVPYmplY3RVUkwodCksaT1uZXcgV29ya2VyKGUpLGkub25tZXNzYWdlPXRoaXMuX2NhbGxiYWNrLmJpbmQodGhpcyksdGhpcy5fd29ya2VyPWl9LGUucHJvdG90eXBlLl9jcmVhdGVUaW1lb3V0PWZ1bmN0aW9uKCl7dGhpcy5fdGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhpcy5fY3JlYXRlVGltZW91dCgpLHRoaXMuX2NhbGxiYWNrKCl9LmJpbmQodGhpcyksMWUzKnRoaXMuX3VwZGF0ZUludGVydmFsKX0sZS5wcm90b3R5cGUuX2NyZWF0ZUNsb2NrPWZ1bmN0aW9uKCl7aWYodGhpcy5fdHlwZT09PWUuVHlwZS5Xb3JrZXIpdHJ5e3RoaXMuX2NyZWF0ZVdvcmtlcigpfWNhdGNoKHQpe3RoaXMuX3R5cGU9ZS5UeXBlLlRpbWVvdXQsdGhpcy5fY3JlYXRlQ2xvY2soKX1lbHNlIHRoaXMuX3R5cGU9PT1lLlR5cGUuVGltZW91dCYmdGhpcy5fY3JlYXRlVGltZW91dCgpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ1cGRhdGVJbnRlcnZhbFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXBkYXRlSW50ZXJ2YWx9LHNldDpmdW5jdGlvbih0KXt0aGlzLl91cGRhdGVJbnRlcnZhbD1NYXRoLm1heCh0LDEyOC80NDEwMCksdGhpcy5fdHlwZT09PWUuVHlwZS5Xb3JrZXImJnRoaXMuX3dvcmtlci5wb3N0TWVzc2FnZShNYXRoLm1heCgxZTMqdCwxKSl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHlwZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2Rpc3Bvc2VDbG9jaygpLHRoaXMuX3R5cGU9dCx0aGlzLl9jcmVhdGVDbG9jaygpfX0pLGUucHJvdG90eXBlLl9kaXNwb3NlQ2xvY2s9ZnVuY3Rpb24oKXt0aGlzLl90aW1lb3V0JiYoY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXQpLHRoaXMuX3RpbWVvdXQ9bnVsbCksdGhpcy5fd29ya2VyJiYodGhpcy5fd29ya2VyLnRlcm1pbmF0ZSgpLHRoaXMuX3dvcmtlci5vbm1lc3NhZ2U9bnVsbCx0aGlzLl93b3JrZXI9bnVsbCl9LGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9kaXNwb3NlQ2xvY2soKSx0aGlzLl9jYWxsYmFjaz1udWxsfSx0LmdldENvbnRleHQoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsaSxzKXtpZihlLmlucHV0KXM9dC5kZWZhdWx0QXJnKHMsMCksdC5pc0FycmF5KGUuaW5wdXQpP3RoaXMuY29ubmVjdChlLmlucHV0W3NdKTp0aGlzLmNvbm5lY3QoZS5pbnB1dCxpLHMpO2Vsc2UgdHJ5e2UgaW5zdGFuY2VvZiBBdWRpb05vZGU/bi5jYWxsKHRoaXMsZSxpLHMpOm4uY2FsbCh0aGlzLGUsaSl9Y2F0Y2godCl7dGhyb3cgbmV3IEVycm9yKFwiZXJyb3IgY29ubmVjdGluZyB0byBub2RlOiBcIitlK1wiXFxuXCIrdCl9fWZ1bmN0aW9uIGkoZSxpLG4pe2lmKGUmJmUuaW5wdXQmJnQuaXNBcnJheShlLmlucHV0KSluPXQuZGVmYXVsdEFyZyhuLDApLHRoaXMuZGlzY29ubmVjdChlLmlucHV0W25dLGksMCk7ZWxzZSBpZihlJiZlLmlucHV0KXRoaXMuZGlzY29ubmVjdChlLmlucHV0LGksbik7ZWxzZSB0cnl7cy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9Y2F0Y2godCl7dGhyb3cgbmV3IEVycm9yKFwiZXJyb3IgZGlzY29ubmVjdGluZyBub2RlOiBcIitlK1wiXFxuXCIrdCl9fXZhciBuPUF1ZGlvTm9kZS5wcm90b3R5cGUuY29ubmVjdCxzPUF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzY29ubmVjdDtBdWRpb05vZGUucHJvdG90eXBlLmNvbm5lY3QhPT1lJiYoQXVkaW9Ob2RlLnByb3RvdHlwZS5jb25uZWN0PWUsQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNjb25uZWN0PWkpfSksdC5zdXBwb3J0ZWQ/dC5jb250ZXh0PW5ldyB0LkNvbnRleHQ6Y29uc29sZS53YXJuKFwiVGhpcyBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgVG9uZS5qc1wiKSx0LkNvbnRleHR9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkF1ZGlvTm9kZT1mdW5jdGlvbigpe3QuY2FsbCh0aGlzKTt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJjb250ZXh0XCJdLHtjb250ZXh0OnQuY29udGV4dH0pO3RoaXMuX2NvbnRleHQ9ZS5jb250ZXh0fSx0LmV4dGVuZCh0LkF1ZGlvTm9kZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQXVkaW9Ob2RlLnByb3RvdHlwZSxcImNvbnRleHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRleHR9fSksdC5BdWRpb05vZGUucHJvdG90eXBlLmNyZWF0ZUluc091dHM9ZnVuY3Rpb24odCxlKXsxPT09dD90aGlzLmlucHV0PXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCk6dD4xJiYodGhpcy5pbnB1dD1uZXcgQXJyYXkodCkpLDE9PT1lP3RoaXMub3V0cHV0PXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCk6ZT4xJiYodGhpcy5vdXRwdXQ9bmV3IEFycmF5KGUpKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQXVkaW9Ob2RlLnByb3RvdHlwZSxcIm51bWJlck9mSW5wdXRzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlucHV0P3QuaXNBcnJheSh0aGlzLmlucHV0KT90aGlzLmlucHV0Lmxlbmd0aDoxOjB9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQXVkaW9Ob2RlLnByb3RvdHlwZSxcIm51bWJlck9mT3V0cHV0c1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vdXRwdXQ/dC5pc0FycmF5KHRoaXMub3V0cHV0KT90aGlzLm91dHB1dC5sZW5ndGg6MTowfX0pLHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKGUsaSxuKXtyZXR1cm4gdC5pc0FycmF5KHRoaXMub3V0cHV0KT8oaT10LmRlZmF1bHRBcmcoaSwwKSx0aGlzLm91dHB1dFtpXS5jb25uZWN0KGUsMCxuKSk6dGhpcy5vdXRwdXQuY29ubmVjdChlLGksbiksdGhpc30sdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc2Nvbm5lY3Q9ZnVuY3Rpb24oZSxpLG4pe3QuaXNBcnJheSh0aGlzLm91dHB1dCk/dC5pc051bWJlcihlKT90aGlzLm91dHB1dFtlXS5kaXNjb25uZWN0KCk6KGk9dC5kZWZhdWx0QXJnKGksMCksdGhpcy5vdXRwdXRbaV0uZGlzY29ubmVjdChlLDAsbikpOnRoaXMub3V0cHV0LmRpc2Nvbm5lY3QuYXBwbHkodGhpcy5vdXRwdXQsYXJndW1lbnRzKX0sdC5BdWRpb05vZGUucHJvdG90eXBlLmNoYWluPWZ1bmN0aW9uKCl7dmFyIHQsZSxpPXRoaXM7Zm9yKHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKWU9YXJndW1lbnRzW3RdLGkuY29ubmVjdChlKSxpPWU7cmV0dXJuIHRoaXN9LHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5mYW49ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXRoaXMuY29ubmVjdChhcmd1bWVudHNbdF0pO3JldHVybiB0aGlzfSx3aW5kb3cuQXVkaW9Ob2RlJiYoQXVkaW9Ob2RlLnByb3RvdHlwZS5jaGFpbj10LkF1ZGlvTm9kZS5wcm90b3R5cGUuY2hhaW4sQXVkaW9Ob2RlLnByb3RvdHlwZS5mYW49dC5BdWRpb05vZGUucHJvdG90eXBlLmZhbiksdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5pc1VuZGVmKHRoaXMuaW5wdXQpfHwodGhpcy5pbnB1dCBpbnN0YW5jZW9mIEF1ZGlvTm9kZSYmdGhpcy5pbnB1dC5kaXNjb25uZWN0KCksdGhpcy5pbnB1dD1udWxsKSx0LmlzVW5kZWYodGhpcy5vdXRwdXQpfHwodGhpcy5vdXRwdXQgaW5zdGFuY2VvZiBBdWRpb05vZGUmJnRoaXMub3V0cHV0LmRpc2Nvbm5lY3QoKSx0aGlzLm91dHB1dD1udWxsKSx0aGlzLl9jb250ZXh0PW51bGwsdGhpc30sdC5BdWRpb05vZGV9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlNpZ25hbEJhc2U9ZnVuY3Rpb24oKXt0LkF1ZGlvTm9kZS5jYWxsKHRoaXMpfSx0LmV4dGVuZCh0LlNpZ25hbEJhc2UsdC5BdWRpb05vZGUpLHQuU2lnbmFsQmFzZS5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbihlLGksbil7cmV0dXJuIHQuU2lnbmFsJiZ0LlNpZ25hbD09PWUuY29uc3RydWN0b3J8fHQuUGFyYW0mJnQuUGFyYW09PT1lLmNvbnN0cnVjdG9yfHx0LlRpbWVsaW5lU2lnbmFsJiZ0LlRpbWVsaW5lU2lnbmFsPT09ZS5jb25zdHJ1Y3Rvcj8oZS5fcGFyYW0uY2FuY2VsU2NoZWR1bGVkVmFsdWVzKDApLGUuX3BhcmFtLnZhbHVlPTAsZS5vdmVycmlkZGVuPSEwKTplIGluc3RhbmNlb2YgQXVkaW9QYXJhbSYmKGUuY2FuY2VsU2NoZWR1bGVkVmFsdWVzKDApLGUudmFsdWU9MCksdC5BdWRpb05vZGUucHJvdG90eXBlLmNvbm5lY3QuY2FsbCh0aGlzLGUsaSxuKSx0aGlzfSx0LlNpZ25hbEJhc2V9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LldhdmVTaGFwZXI9ZnVuY3Rpb24oZSxpKXt0LlNpZ25hbEJhc2UuY2FsbCh0aGlzKSx0aGlzLl9zaGFwZXI9dGhpcy5pbnB1dD10aGlzLm91dHB1dD10aGlzLmNvbnRleHQuY3JlYXRlV2F2ZVNoYXBlcigpLHRoaXMuX2N1cnZlPW51bGwsQXJyYXkuaXNBcnJheShlKT90aGlzLmN1cnZlPWU6aXNGaW5pdGUoZSl8fHQuaXNVbmRlZihlKT90aGlzLl9jdXJ2ZT1uZXcgRmxvYXQzMkFycmF5KHQuZGVmYXVsdEFyZyhlLDEwMjQpKTp0LmlzRnVuY3Rpb24oZSkmJih0aGlzLl9jdXJ2ZT1uZXcgRmxvYXQzMkFycmF5KHQuZGVmYXVsdEFyZyhpLDEwMjQpKSx0aGlzLnNldE1hcChlKSl9LHQuZXh0ZW5kKHQuV2F2ZVNoYXBlcix0LlNpZ25hbEJhc2UpLHQuV2F2ZVNoYXBlci5wcm90b3R5cGUuc2V0TWFwPWZ1bmN0aW9uKHQpe3ZhciBlLGksbjtmb3IoZT0wLGk9dGhpcy5fY3VydmUubGVuZ3RoO2U8aTtlKyspbj1lLyhpLTEpKjItMSx0aGlzLl9jdXJ2ZVtlXT10KG4sZSk7cmV0dXJuIHRoaXMuX3NoYXBlci5jdXJ2ZT10aGlzLl9jdXJ2ZSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5XYXZlU2hhcGVyLnByb3RvdHlwZSxcImN1cnZlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaGFwZXIuY3VydmV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jdXJ2ZT1uZXcgRmxvYXQzMkFycmF5KHQpLHRoaXMuX3NoYXBlci5jdXJ2ZT10aGlzLl9jdXJ2ZX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5XYXZlU2hhcGVyLnByb3RvdHlwZSxcIm92ZXJzYW1wbGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NoYXBlci5vdmVyc2FtcGxlfSxzZXQ6ZnVuY3Rpb24odCl7aWYoLTE9PT1bXCJub25lXCIsXCIyeFwiLFwiNHhcIl0uaW5kZXhPZih0KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlRvbmUuV2F2ZVNoYXBlcjogb3ZlcnNhbXBsaW5nIG11c3QgYmUgZWl0aGVyICdub25lJywgJzJ4Jywgb3IgJzR4J1wiKTt0aGlzLl9zaGFwZXIub3ZlcnNhbXBsZT10fX0pLHQuV2F2ZVNoYXBlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LlNpZ25hbEJhc2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9zaGFwZXIuZGlzY29ubmVjdCgpLHRoaXMuX3NoYXBlcj1udWxsLHRoaXMuX2N1cnZlPW51bGwsdGhpc30sdC5XYXZlU2hhcGVyfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5UaW1lQmFzZT1mdW5jdGlvbihlLGkpe2lmKCEodGhpcyBpbnN0YW5jZW9mIHQuVGltZUJhc2UpKXJldHVybiBuZXcgdC5UaW1lQmFzZShlLGkpO2lmKHRoaXMuX2V4cHI9dGhpcy5fbm9PcCxlIGluc3RhbmNlb2YgdC5UaW1lQmFzZSl0aGlzLmNvcHkoZSk7ZWxzZSBpZighdC5pc1VuZGVmKGkpfHx0LmlzTnVtYmVyKGUpKXtpPXQuZGVmYXVsdEFyZyhpLHRoaXMuX2RlZmF1bHRVbml0cyk7dmFyIG49dGhpcy5fcHJpbWFyeUV4cHJlc3Npb25zW2ldLm1ldGhvZDt0aGlzLl9leHByPW4uYmluZCh0aGlzLGUpfWVsc2UgdC5pc1N0cmluZyhlKT90aGlzLnNldChlKTp0LmlzVW5kZWYoZSkmJih0aGlzLl9leHByPXRoaXMuX2RlZmF1bHRFeHByKCkpfSx0LmV4dGVuZCh0LlRpbWVCYXNlKSx0LlRpbWVCYXNlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2V4cHI9dGhpcy5fcGFyc2VFeHByU3RyaW5nKHQpLHRoaXN9LHQuVGltZUJhc2UucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IHRoaXMuY29uc3RydWN0b3I7cmV0dXJuIHQuY29weSh0aGlzKSx0fSx0LlRpbWVCYXNlLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3ZhciBlPXQuX2V4cHIoKTtyZXR1cm4gdGhpcy5zZXQoZSl9LHQuVGltZUJhc2UucHJvdG90eXBlLl9wcmltYXJ5RXhwcmVzc2lvbnM9e246e3JlZ2V4cDovXihcXGQrKW4vaSxtZXRob2Q6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9cGFyc2VJbnQodCksMT09PXQ/dGhpcy5fYmVhdHNUb1VuaXRzKHRoaXMuX3RpbWVTaWduYXR1cmUoKSk6dGhpcy5fYmVhdHNUb1VuaXRzKDQvdCl9fSx0OntyZWdleHA6L14oXFxkKyl0L2ksbWV0aG9kOmZ1bmN0aW9uKHQpe3JldHVybiB0PXBhcnNlSW50KHQpLHRoaXMuX2JlYXRzVG9Vbml0cyg4LygzKnBhcnNlSW50KHQpKSl9fSxtOntyZWdleHA6L14oXFxkKyltL2ksbWV0aG9kOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9iZWF0c1RvVW5pdHMocGFyc2VJbnQodCkqdGhpcy5fdGltZVNpZ25hdHVyZSgpKX19LGk6e3JlZ2V4cDovXihcXGQrKWkvaSxtZXRob2Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3RpY2tzVG9Vbml0cyhwYXJzZUludCh0KSl9fSxoejp7cmVnZXhwOi9eKFxcZCsoPzpcXC5cXGQrKT8paHovaSxtZXRob2Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2ZyZXF1ZW5jeVRvVW5pdHMocGFyc2VGbG9hdCh0KSl9fSx0cjp7cmVnZXhwOi9eKFxcZCsoPzpcXC5cXGQrKT8pOihcXGQrKD86XFwuXFxkKyk/KTo/KFxcZCsoPzpcXC5cXGQrKT8pPy8sbWV0aG9kOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj0wO3JldHVybiB0JiZcIjBcIiE9PXQmJihuKz10aGlzLl9iZWF0c1RvVW5pdHModGhpcy5fdGltZVNpZ25hdHVyZSgpKnBhcnNlRmxvYXQodCkpKSxlJiZcIjBcIiE9PWUmJihuKz10aGlzLl9iZWF0c1RvVW5pdHMocGFyc2VGbG9hdChlKSkpLGkmJlwiMFwiIT09aSYmKG4rPXRoaXMuX2JlYXRzVG9Vbml0cyhwYXJzZUZsb2F0KGkpLzQpKSxufX0sczp7cmVnZXhwOi9eKFxcZCsoPzpcXC5cXGQrKT9zKS8sbWV0aG9kOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9zZWNvbmRzVG9Vbml0cyhwYXJzZUZsb2F0KHQpKX19LHNhbXBsZXM6e3JlZ2V4cDovXihcXGQrKXNhbXBsZXMvLG1ldGhvZDpmdW5jdGlvbih0KXtyZXR1cm4gcGFyc2VJbnQodCkvdGhpcy5jb250ZXh0LnNhbXBsZVJhdGV9fSxkZWZhdWx0OntyZWdleHA6L14oXFxkKyg/OlxcLlxcZCspPykvLG1ldGhvZDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fcHJpbWFyeUV4cHJlc3Npb25zW3RoaXMuX2RlZmF1bHRVbml0c10ubWV0aG9kLmNhbGwodGhpcyx0KX19fSx0LlRpbWVCYXNlLnByb3RvdHlwZS5fYmluYXJ5RXhwcmVzc2lvbnM9e1wiK1wiOntyZWdleHA6L15cXCsvLHByZWNlZGVuY2U6MixtZXRob2Q6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdCgpK2UoKX19LFwiLVwiOntyZWdleHA6L15cXC0vLHByZWNlZGVuY2U6MixtZXRob2Q6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdCgpLWUoKX19LFwiKlwiOntyZWdleHA6L15cXCovLHByZWNlZGVuY2U6MSxtZXRob2Q6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdCgpKmUoKX19LFwiL1wiOntyZWdleHA6L15cXC8vLHByZWNlZGVuY2U6MSxtZXRob2Q6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdCgpL2UoKX19fSx0LlRpbWVCYXNlLnByb3RvdHlwZS5fdW5hcnlFeHByZXNzaW9ucz17bmVnOntyZWdleHA6L15cXC0vLG1ldGhvZDpmdW5jdGlvbih0KXtyZXR1cm4tdCgpfX19LHQuVGltZUJhc2UucHJvdG90eXBlLl9zeW50YXhHbHVlPXtcIihcIjp7cmVnZXhwOi9eXFwoL30sXCIpXCI6e3JlZ2V4cDovXlxcKS99fSx0LlRpbWVCYXNlLnByb3RvdHlwZS5fdG9rZW5pemU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLGk9LTEsbj1bXTt0Lmxlbmd0aD4wOyl0PXQudHJpbSgpLGU9ZnVuY3Rpb24odCxlKXt2YXIgaSxuLHMsbyxyLGEsbD1bXCJfYmluYXJ5RXhwcmVzc2lvbnNcIixcIl91bmFyeUV4cHJlc3Npb25zXCIsXCJfcHJpbWFyeUV4cHJlc3Npb25zXCIsXCJfc3ludGF4R2x1ZVwiXTtmb3IoaT0wO2k8bC5sZW5ndGg7aSsrKXtuPWVbbFtpXV07Zm9yKHMgaW4gbilpZihvPW5bc10scj1vLnJlZ2V4cCxudWxsIT09KGE9dC5tYXRjaChyKSkpcmV0dXJue21ldGhvZDpvLm1ldGhvZCxwcmVjZWRlbmNlOm8ucHJlY2VkZW5jZSxyZWdleHA6by5yZWdleHAsdmFsdWU6YVswXX19dGhyb3cgbmV3IFN5bnRheEVycm9yKFwiVG9uZS5UaW1lQmFzZTogVW5leHBlY3RlZCB0b2tlbiBcIit0KX0odCx0aGlzKSxuLnB1c2goZSksdD10LnN1YnN0cihlLnZhbHVlLmxlbmd0aCk7cmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gblsrK2ldfSxwZWVrOmZ1bmN0aW9uKCl7cmV0dXJuIG5baSsxXX19fSx0LlRpbWVCYXNlLnByb3RvdHlwZS5fbWF0Y2hHcm91cD1mdW5jdGlvbihlLGksbil7dmFyIHMsbyxyPSExO2lmKCF0LmlzVW5kZWYoZSkpZm9yKHMgaW4gaSlpZihvPWlbc10sby5yZWdleHAudGVzdChlLnZhbHVlKSl7aWYodC5pc1VuZGVmKG4pKXJldHVybiBvO2lmKG8ucHJlY2VkZW5jZT09PW4pcmV0dXJuIG99cmV0dXJuIHJ9LHQuVGltZUJhc2UucHJvdG90eXBlLl9wYXJzZUJpbmFyeT1mdW5jdGlvbihlLGkpe3ZhciBuLHM7Zm9yKHQuaXNVbmRlZihpKSYmKGk9Miksbj1pPDA/dGhpcy5fcGFyc2VVbmFyeShlKTp0aGlzLl9wYXJzZUJpbmFyeShlLGktMSkscz1lLnBlZWsoKTtzJiZ0aGlzLl9tYXRjaEdyb3VwKHMsdGhpcy5fYmluYXJ5RXhwcmVzc2lvbnMsaSk7KXM9ZS5uZXh0KCksbj1zLm1ldGhvZC5iaW5kKHRoaXMsbix0aGlzLl9wYXJzZUJpbmFyeShlLGktMSkpLHM9ZS5wZWVrKCk7cmV0dXJuIG59LHQuVGltZUJhc2UucHJvdG90eXBlLl9wYXJzZVVuYXJ5PWZ1bmN0aW9uKHQpe3ZhciBlLGk9dC5wZWVrKCksbj10aGlzLl9tYXRjaEdyb3VwKGksdGhpcy5fdW5hcnlFeHByZXNzaW9ucyk7cmV0dXJuIG4/KGk9dC5uZXh0KCksZT10aGlzLl9wYXJzZVVuYXJ5KHQpLG4ubWV0aG9kLmJpbmQodGhpcyxlKSk6dGhpcy5fcGFyc2VQcmltYXJ5KHQpfSx0LlRpbWVCYXNlLnByb3RvdHlwZS5fcGFyc2VQcmltYXJ5PWZ1bmN0aW9uKGUpe3ZhciBpLG4scz1lLnBlZWsoKTtpZih0LmlzVW5kZWYocykpdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiVG9uZS5UaW1lQmFzZTogVW5leHBlY3RlZCBlbmQgb2YgZXhwcmVzc2lvblwiKTtpZih0aGlzLl9tYXRjaEdyb3VwKHMsdGhpcy5fcHJpbWFyeUV4cHJlc3Npb25zKSlyZXR1cm4gcz1lLm5leHQoKSxuPXMudmFsdWUubWF0Y2gocy5yZWdleHApLHMubWV0aG9kLmJpbmQodGhpcyxuWzFdLG5bMl0sblszXSk7aWYocyYmXCIoXCI9PT1zLnZhbHVlKXtpZihlLm5leHQoKSxpPXRoaXMuX3BhcnNlQmluYXJ5KGUpLCEocz1lLm5leHQoKSl8fFwiKVwiIT09cy52YWx1ZSl0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJFeHBlY3RlZCApXCIpO3JldHVybiBpfXRocm93IG5ldyBTeW50YXhFcnJvcihcIlRvbmUuVGltZUJhc2U6IENhbm5vdCBwcm9jZXNzIHRva2VuIFwiK3MudmFsdWUpfSx0LlRpbWVCYXNlLnByb3RvdHlwZS5fcGFyc2VFeHByU3RyaW5nPWZ1bmN0aW9uKGUpe3ZhciBpO3JldHVybiB0LmlzU3RyaW5nKGUpfHwoZT1lLnRvU3RyaW5nKCkpLGk9dGhpcy5fdG9rZW5pemUoZSksdGhpcy5fcGFyc2VCaW5hcnkoaSl9LHQuVGltZUJhc2UucHJvdG90eXBlLl9ub09wPWZ1bmN0aW9uKCl7cmV0dXJuIDB9LHQuVGltZUJhc2UucHJvdG90eXBlLl9kZWZhdWx0RXhwcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub09wfSx0LlRpbWVCYXNlLnByb3RvdHlwZS5fZGVmYXVsdFVuaXRzPVwic1wiLHQuVGltZUJhc2UucHJvdG90eXBlLl9mcmVxdWVuY3lUb1VuaXRzPWZ1bmN0aW9uKHQpe3JldHVybiAxL3R9LHQuVGltZUJhc2UucHJvdG90eXBlLl9iZWF0c1RvVW5pdHM9ZnVuY3Rpb24oZSl7cmV0dXJuIDYwL3QuVHJhbnNwb3J0LmJwbS52YWx1ZSplfSx0LlRpbWVCYXNlLnByb3RvdHlwZS5fc2Vjb25kc1RvVW5pdHM9ZnVuY3Rpb24odCl7cmV0dXJuIHR9LHQuVGltZUJhc2UucHJvdG90eXBlLl90aWNrc1RvVW5pdHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUqKHRoaXMuX2JlYXRzVG9Vbml0cygxKS90LlRyYW5zcG9ydC5QUFEpfSx0LlRpbWVCYXNlLnByb3RvdHlwZS5fdGltZVNpZ25hdHVyZT1mdW5jdGlvbigpe3JldHVybiB0LlRyYW5zcG9ydC50aW1lU2lnbmF0dXJlfSx0LlRpbWVCYXNlLnByb3RvdHlwZS5fcHVzaEV4cHI9ZnVuY3Rpb24oZSxpLG4pe3JldHVybiBlIGluc3RhbmNlb2YgdC5UaW1lQmFzZXx8KGU9bmV3IHRoaXMuY29uc3RydWN0b3IoZSxuKSksdGhpcy5fZXhwcj10aGlzLl9iaW5hcnlFeHByZXNzaW9uc1tpXS5tZXRob2QuYmluZCh0aGlzLHRoaXMuX2V4cHIsZS5fZXhwciksdGhpc30sdC5UaW1lQmFzZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX3B1c2hFeHByKHQsXCIrXCIsZSl9LHQuVGltZUJhc2UucHJvdG90eXBlLnN1Yj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9wdXNoRXhwcih0LFwiLVwiLGUpfSx0LlRpbWVCYXNlLnByb3RvdHlwZS5tdWx0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX3B1c2hFeHByKHQsXCIqXCIsZSl9LHQuVGltZUJhc2UucHJvdG90eXBlLmRpdj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9wdXNoRXhwcih0LFwiL1wiLGUpfSx0LlRpbWVCYXNlLnByb3RvdHlwZS52YWx1ZU9mPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V4cHIoKX0sdC5UaW1lQmFzZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuX2V4cHI9bnVsbH0sdC5UaW1lQmFzZX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuVGltZT1mdW5jdGlvbihlLGkpe2lmKCEodGhpcyBpbnN0YW5jZW9mIHQuVGltZSkpcmV0dXJuIG5ldyB0LlRpbWUoZSxpKTt0aGlzLl9wbHVzTm93PSExLHQuVGltZUJhc2UuY2FsbCh0aGlzLGUsaSl9LHQuZXh0ZW5kKHQuVGltZSx0LlRpbWVCYXNlKSx0LlRpbWUucHJvdG90eXBlLl91bmFyeUV4cHJlc3Npb25zPU9iamVjdC5jcmVhdGUodC5UaW1lQmFzZS5wcm90b3R5cGUuX3VuYXJ5RXhwcmVzc2lvbnMpLHQuVGltZS5wcm90b3R5cGUuX3VuYXJ5RXhwcmVzc2lvbnMucXVhbnRpemU9e3JlZ2V4cDovXkAvLG1ldGhvZDpmdW5jdGlvbihlKXtyZXR1cm4gdC5UcmFuc3BvcnQubmV4dFN1YmRpdmlzaW9uKGUoKSl9fSx0LlRpbWUucHJvdG90eXBlLl91bmFyeUV4cHJlc3Npb25zLm5vdz17cmVnZXhwOi9eXFwrLyxtZXRob2Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3BsdXNOb3c9ITAsdCgpfX0sdC5UaW1lLnByb3RvdHlwZS5xdWFudGl6ZT1mdW5jdGlvbihlLGkpe3JldHVybiBpPXQuZGVmYXVsdEFyZyhpLDEpLHRoaXMuX2V4cHI9ZnVuY3Rpb24odCxlLGkpe3ZhciBuLHMsbztyZXR1cm4gdD10KCksZT1lLnRvU2Vjb25kcygpLG49TWF0aC5yb3VuZCh0L2UpLHM9biplLG89cy10LHQrbyppfS5iaW5kKHRoaXMsdGhpcy5fZXhwcixuZXcgdGhpcy5jb25zdHJ1Y3RvcihlKSxpKSx0aGlzfSx0LlRpbWUucHJvdG90eXBlLmFkZE5vdz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wbHVzTm93PSEwLHRoaXN9LHQuVGltZS5wcm90b3R5cGUuX2RlZmF1bHRFeHByPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BsdXNOb3c9ITAsdGhpcy5fbm9PcH0sdC5UaW1lLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGUpe3JldHVybiB0LlRpbWVCYXNlLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxlKSx0aGlzLl9wbHVzTm93PWUuX3BsdXNOb3csdGhpc30sdC5UaW1lLnByb3RvdHlwZS50b05vdGF0aW9uPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy50b1NlY29uZHMoKSxlPVtcIjFtXCIsXCIyblwiLFwiNG5cIixcIjhuXCIsXCIxNm5cIixcIjMyblwiLFwiNjRuXCIsXCIxMjhuXCJdLGk9dGhpcy5fdG9Ob3RhdGlvbkhlbHBlcih0LGUpLG49W1wiMW1cIixcIjJuXCIsXCIydFwiLFwiNG5cIixcIjR0XCIsXCI4blwiLFwiOHRcIixcIjE2blwiLFwiMTZ0XCIsXCIzMm5cIixcIjMydFwiLFwiNjRuXCIsXCI2NHRcIixcIjEyOG5cIl0scz10aGlzLl90b05vdGF0aW9uSGVscGVyKHQsbik7cmV0dXJuIHMuc3BsaXQoXCIrXCIpLmxlbmd0aDxpLnNwbGl0KFwiK1wiKS5sZW5ndGg/czppfSx0LlRpbWUucHJvdG90eXBlLl90b05vdGF0aW9uSGVscGVyPWZ1bmN0aW9uKHQsZSl7dmFyIGksbixzLG8scj10aGlzLl9ub3RhdGlvblRvVW5pdHMoZVtlLmxlbmd0aC0xXSksYT1cIlwiO2ZvcihpPTA7aTxlLmxlbmd0aDtpKyspaWYobj10aGlzLl9ub3RhdGlvblRvVW5pdHMoZVtpXSkscz10L24sbz0xZS02LDEtcyUxPG8mJihzKz1vKSwocz1NYXRoLmZsb29yKHMpKT4wKXtpZihhKz0xPT09cz9lW2ldOnMudG9TdHJpbmcoKStcIipcIitlW2ldLCh0LT1zKm4pPHIpYnJlYWs7YSs9XCIgKyBcIn1yZXR1cm5cIlwiPT09YSYmKGE9XCIwXCIpLGF9LHQuVGltZS5wcm90b3R5cGUuX25vdGF0aW9uVG9Vbml0cz1mdW5jdGlvbih0KXt2YXIgZSxpLG4scz10aGlzLl9wcmltYXJ5RXhwcmVzc2lvbnMsbz1bcy5uLHMudCxzLm1dO2ZvcihlPTA7ZTxvLmxlbmd0aDtlKyspaWYoaT1vW2VdLG49dC5tYXRjaChpLnJlZ2V4cCkpcmV0dXJuIGkubWV0aG9kLmNhbGwodGhpcyxuWzFdKX0sdC5UaW1lLnByb3RvdHlwZS50b0JhcnNCZWF0c1NpeHRlZW50aHM9ZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMuX2JlYXRzVG9Vbml0cygxKSxpPXRoaXMudG9TZWNvbmRzKCkvZSxuPU1hdGguZmxvb3IoaS90aGlzLl90aW1lU2lnbmF0dXJlKCkpLHM9aSUxKjQ7cmV0dXJuIGk9TWF0aC5mbG9vcihpKSV0aGlzLl90aW1lU2lnbmF0dXJlKCkscz1zLnRvU3RyaW5nKCkscy5sZW5ndGg+MyYmKHM9cGFyc2VGbG9hdChwYXJzZUZsb2F0KHMpLnRvRml4ZWQoMykpKSx0PVtuLGksc10sdC5qb2luKFwiOlwiKX0sdC5UaW1lLnByb3RvdHlwZS50b1RpY2tzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fYmVhdHNUb1VuaXRzKDEpLGk9dGhpcy52YWx1ZU9mKCkvZTtyZXR1cm4gTWF0aC5mbG9vcihpKnQuVHJhbnNwb3J0LlBQUSl9LHQuVGltZS5wcm90b3R5cGUudG9TYW1wbGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9TZWNvbmRzKCkqdGhpcy5jb250ZXh0LnNhbXBsZVJhdGV9LHQuVGltZS5wcm90b3R5cGUudG9GcmVxdWVuY3k9ZnVuY3Rpb24oKXtyZXR1cm4gMS90aGlzLnRvU2Vjb25kcygpfSx0LlRpbWUucHJvdG90eXBlLnRvU2Vjb25kcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlT2YoKX0sdC5UaW1lLnByb3RvdHlwZS50b01pbGxpc2Vjb25kcz1mdW5jdGlvbigpe3JldHVybiAxZTMqdGhpcy50b1NlY29uZHMoKX0sdC5UaW1lLnByb3RvdHlwZS52YWx1ZU9mPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V4cHIoKSsodGhpcy5fcGx1c05vdz90aGlzLm5vdygpOjApfSx0LlRpbWV9KSx0KGZ1bmN0aW9uKHQpe3ZhciBlLGk7cmV0dXJuIHQuRnJlcXVlbmN5PWZ1bmN0aW9uKGUsaSl7aWYoISh0aGlzIGluc3RhbmNlb2YgdC5GcmVxdWVuY3kpKXJldHVybiBuZXcgdC5GcmVxdWVuY3koZSxpKTt0LlRpbWVCYXNlLmNhbGwodGhpcyxlLGkpfSx0LmV4dGVuZCh0LkZyZXF1ZW5jeSx0LlRpbWVCYXNlKSx0LkZyZXF1ZW5jeS5wcm90b3R5cGUuX3ByaW1hcnlFeHByZXNzaW9ucz1PYmplY3QuY3JlYXRlKHQuVGltZUJhc2UucHJvdG90eXBlLl9wcmltYXJ5RXhwcmVzc2lvbnMpLHQuRnJlcXVlbmN5LnByb3RvdHlwZS5fcHJpbWFyeUV4cHJlc3Npb25zLm1pZGk9e3JlZ2V4cDovXihcXGQrKD86XFwuXFxkKyk/bWlkaSkvLG1ldGhvZDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5taWRpVG9GcmVxdWVuY3kodCl9fSx0LkZyZXF1ZW5jeS5wcm90b3R5cGUuX3ByaW1hcnlFeHByZXNzaW9ucy5ub3RlPXtyZWdleHA6L14oW2EtZ117MX0oPzpifCN8eHxiYik/KSgtP1swLTldKykvaSxtZXRob2Q6ZnVuY3Rpb24odCxpKXt2YXIgbj1lW3QudG9Mb3dlckNhc2UoKV0scz1uKzEyKihwYXJzZUludChpKSsxKTtyZXR1cm4gdGhpcy5taWRpVG9GcmVxdWVuY3kocyl9fSx0LkZyZXF1ZW5jeS5wcm90b3R5cGUuX3ByaW1hcnlFeHByZXNzaW9ucy50cj17cmVnZXhwOi9eKFxcZCsoPzpcXC5cXGQrKT8pOihcXGQrKD86XFwuXFxkKyk/KTo/KFxcZCsoPzpcXC5cXGQrKT8pPy8sbWV0aG9kOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj0xO3JldHVybiB0JiZcIjBcIiE9PXQmJihuKj10aGlzLl9iZWF0c1RvVW5pdHModGhpcy5fdGltZVNpZ25hdHVyZSgpKnBhcnNlRmxvYXQodCkpKSxlJiZcIjBcIiE9PWUmJihuKj10aGlzLl9iZWF0c1RvVW5pdHMocGFyc2VGbG9hdChlKSkpLGkmJlwiMFwiIT09aSYmKG4qPXRoaXMuX2JlYXRzVG9Vbml0cyhwYXJzZUZsb2F0KGkpLzQpKSxufX0sdC5GcmVxdWVuY3kucHJvdG90eXBlLnRyYW5zcG9zZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZXhwcj1mdW5jdGlvbihlLGkpe3JldHVybiBlKCkqdC5pbnRlcnZhbFRvRnJlcXVlbmN5UmF0aW8oaSl9LmJpbmQodGhpcyx0aGlzLl9leHByLGUpLHRoaXN9LHQuRnJlcXVlbmN5LnByb3RvdHlwZS5oYXJtb25pemU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2V4cHI9ZnVuY3Rpb24oZSxpKXt2YXIgbixzPWUoKSxvPVtdO2ZvcihuPTA7bjxpLmxlbmd0aDtuKyspb1tuXT1zKnQuaW50ZXJ2YWxUb0ZyZXF1ZW5jeVJhdGlvKGlbbl0pO3JldHVybiBvfS5iaW5kKHRoaXMsdGhpcy5fZXhwcixlKSx0aGlzfSx0LkZyZXF1ZW5jeS5wcm90b3R5cGUudG9NaWRpPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZnJlcXVlbmN5VG9NaWRpKHRoaXMudmFsdWVPZigpKX0sdC5GcmVxdWVuY3kucHJvdG90eXBlLnRvTm90ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMudmFsdWVPZigpLG49TWF0aC5sb2coZS90LkZyZXF1ZW5jeS5BNCkvTWF0aC5MTjIscz1NYXRoLnJvdW5kKDEyKm4pKzU3LG89TWF0aC5mbG9vcihzLzEyKTtyZXR1cm4gbzwwJiYocys9LTEyKm8pLGlbcyUxMl0rby50b1N0cmluZygpfSx0LkZyZXF1ZW5jeS5wcm90b3R5cGUudG9TZWNvbmRzPWZ1bmN0aW9uKCl7cmV0dXJuIDEvdGhpcy52YWx1ZU9mKCl9LHQuRnJlcXVlbmN5LnByb3RvdHlwZS50b0ZyZXF1ZW5jeT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlT2YoKX0sdC5GcmVxdWVuY3kucHJvdG90eXBlLnRvVGlja3M9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9iZWF0c1RvVW5pdHMoMSksaT10aGlzLnZhbHVlT2YoKS9lO3JldHVybiBNYXRoLmZsb29yKGkqdC5UcmFuc3BvcnQuUFBRKX0sdC5GcmVxdWVuY3kucHJvdG90eXBlLl9mcmVxdWVuY3lUb1VuaXRzPWZ1bmN0aW9uKHQpe3JldHVybiB0fSx0LkZyZXF1ZW5jeS5wcm90b3R5cGUuX3RpY2tzVG9Vbml0cz1mdW5jdGlvbihlKXtyZXR1cm4gMS8oNjAqZS8odC5UcmFuc3BvcnQuYnBtLnZhbHVlKnQuVHJhbnNwb3J0LlBQUSkpfSx0LkZyZXF1ZW5jeS5wcm90b3R5cGUuX2JlYXRzVG9Vbml0cz1mdW5jdGlvbihlKXtyZXR1cm4gMS90LlRpbWVCYXNlLnByb3RvdHlwZS5fYmVhdHNUb1VuaXRzLmNhbGwodGhpcyxlKX0sdC5GcmVxdWVuY3kucHJvdG90eXBlLl9zZWNvbmRzVG9Vbml0cz1mdW5jdGlvbih0KXtyZXR1cm4gMS90fSx0LkZyZXF1ZW5jeS5wcm90b3R5cGUuX2RlZmF1bHRVbml0cz1cImh6XCIsZT17Y2JiOi0yLGNiOi0xLGM6MCxcImMjXCI6MSxjeDoyLGRiYjowLGRiOjEsZDoyLFwiZCNcIjozLGR4OjQsZWJiOjIsZWI6MyxlOjQsXCJlI1wiOjUsZXg6NixmYmI6MyxmYjo0LGY6NSxcImYjXCI6NixmeDo3LGdiYjo1LGdiOjYsZzo3LFwiZyNcIjo4LGd4OjksYWJiOjcsYWI6OCxhOjksXCJhI1wiOjEwLGF4OjExLGJiYjo5LGJiOjEwLGI6MTEsXCJiI1wiOjEyLGJ4OjEzfSxpPVtcIkNcIixcIkMjXCIsXCJEXCIsXCJEI1wiLFwiRVwiLFwiRlwiLFwiRiNcIixcIkdcIixcIkcjXCIsXCJBXCIsXCJBI1wiLFwiQlwiXSx0LkZyZXF1ZW5jeS5BND00NDAsdC5GcmVxdWVuY3kucHJvdG90eXBlLm1pZGlUb0ZyZXF1ZW5jeT1mdW5jdGlvbihlKXtyZXR1cm4gdC5GcmVxdWVuY3kuQTQqTWF0aC5wb3coMiwoZS02OSkvMTIpfSx0LkZyZXF1ZW5jeS5wcm90b3R5cGUuZnJlcXVlbmN5VG9NaWRpPWZ1bmN0aW9uKGUpe3JldHVybiA2OStNYXRoLnJvdW5kKDEyKk1hdGgubG9nKGUvdC5GcmVxdWVuY3kuQTQpL01hdGguTE4yKX0sdC5GcmVxdWVuY3l9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlRyYW5zcG9ydFRpbWU9ZnVuY3Rpb24oZSxpKXtpZighKHRoaXMgaW5zdGFuY2VvZiB0LlRyYW5zcG9ydFRpbWUpKXJldHVybiBuZXcgdC5UcmFuc3BvcnRUaW1lKGUsaSk7dC5UaW1lLmNhbGwodGhpcyxlLGkpfSx0LmV4dGVuZCh0LlRyYW5zcG9ydFRpbWUsdC5UaW1lKSx0LlRyYW5zcG9ydFRpbWUucHJvdG90eXBlLl91bmFyeUV4cHJlc3Npb25zPU9iamVjdC5jcmVhdGUodC5UaW1lLnByb3RvdHlwZS5fdW5hcnlFeHByZXNzaW9ucyksdC5UcmFuc3BvcnRUaW1lLnByb3RvdHlwZS5fdW5hcnlFeHByZXNzaW9ucy5xdWFudGl6ZT17cmVnZXhwOi9eQC8sbWV0aG9kOmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMuX3NlY29uZHNUb1RpY2tzKGUoKSksbj1NYXRoLmNlaWwodC5UcmFuc3BvcnQudGlja3MvaSk7cmV0dXJuIHRoaXMuX3RpY2tzVG9Vbml0cyhuKmkpfX0sdC5UcmFuc3BvcnRUaW1lLnByb3RvdHlwZS5fc2Vjb25kc1RvVGlja3M9ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy5fYmVhdHNUb1VuaXRzKDEpLG49ZS9pO3JldHVybiBNYXRoLnJvdW5kKG4qdC5UcmFuc3BvcnQuUFBRKX0sdC5UcmFuc3BvcnRUaW1lLnByb3RvdHlwZS52YWx1ZU9mPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NlY29uZHNUb1RpY2tzKHRoaXMuX2V4cHIoKSkrKHRoaXMuX3BsdXNOb3c/dC5UcmFuc3BvcnQudGlja3M6MCl9LHQuVHJhbnNwb3J0VGltZS5wcm90b3R5cGUudG9UaWNrcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlT2YoKX0sdC5UcmFuc3BvcnRUaW1lLnByb3RvdHlwZS50b1NlY29uZHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXhwcigpKyh0aGlzLl9wbHVzTm93P3QuVHJhbnNwb3J0LnNlY29uZHM6MCl9LHQuVHJhbnNwb3J0VGltZS5wcm90b3R5cGUudG9GcmVxdWVuY3k9ZnVuY3Rpb24oKXtyZXR1cm4gMS90aGlzLnRvU2Vjb25kcygpfSx0LlRyYW5zcG9ydFRpbWV9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlR5cGU9e0RlZmF1bHQ6XCJudW1iZXJcIixUaW1lOlwidGltZVwiLEZyZXF1ZW5jeTpcImZyZXF1ZW5jeVwiLFRyYW5zcG9ydFRpbWU6XCJ0cmFuc3BvcnRUaW1lXCIsVGlja3M6XCJ0aWNrc1wiLE5vcm1hbFJhbmdlOlwibm9ybWFsUmFuZ2VcIixBdWRpb1JhbmdlOlwiYXVkaW9SYW5nZVwiLERlY2liZWxzOlwiZGJcIixJbnRlcnZhbDpcImludGVydmFsXCIsQlBNOlwiYnBtXCIsUG9zaXRpdmU6XCJwb3NpdGl2ZVwiLEdhaW46XCJnYWluXCIsQ2VudHM6XCJjZW50c1wiLERlZ3JlZXM6XCJkZWdyZWVzXCIsTUlESTpcIm1pZGlcIixCYXJzQmVhdHNTaXh0ZWVudGhzOlwiYmFyc0JlYXRzU2l4dGVlbnRoc1wiLFNhbXBsZXM6XCJzYW1wbGVzXCIsSGVydHo6XCJoZXJ0elwiLE5vdGU6XCJub3RlXCIsTWlsbGlzZWNvbmRzOlwibWlsbGlzZWNvbmRzXCIsU2Vjb25kczpcInNlY29uZHNcIixOb3RhdGlvbjpcIm5vdGF0aW9uXCJ9LHQucHJvdG90eXBlLnRvU2Vjb25kcz1mdW5jdGlvbihlKXtyZXR1cm4gdC5pc051bWJlcihlKT9lOnQuaXNVbmRlZihlKT90aGlzLm5vdygpOnQuaXNTdHJpbmcoZSk/bmV3IHQuVGltZShlKS50b1NlY29uZHMoKTplIGluc3RhbmNlb2YgdC5UaW1lQmFzZT9lLnRvU2Vjb25kcygpOnZvaWQgMH0sdC5wcm90b3R5cGUudG9GcmVxdWVuY3k9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuaXNOdW1iZXIoZSk/ZTp0LmlzU3RyaW5nKGUpfHx0LmlzVW5kZWYoZSk/bmV3IHQuRnJlcXVlbmN5KGUpLnZhbHVlT2YoKTplIGluc3RhbmNlb2YgdC5UaW1lQmFzZT9lLnRvRnJlcXVlbmN5KCk6dm9pZCAwfSx0LnByb3RvdHlwZS50b1RpY2tzPWZ1bmN0aW9uKGUpe3JldHVybiB0LmlzTnVtYmVyKGUpfHx0LmlzU3RyaW5nKGUpP25ldyB0LlRyYW5zcG9ydFRpbWUoZSkudG9UaWNrcygpOnQuaXNVbmRlZihlKT90LlRyYW5zcG9ydC50aWNrczplIGluc3RhbmNlb2YgdC5UaW1lQmFzZT9lLnRvVGlja3MoKTp2b2lkIDB9LHR9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlBhcmFtPWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1wicGFyYW1cIixcInVuaXRzXCIsXCJjb252ZXJ0XCJdLHQuUGFyYW0pO3QuQXVkaW9Ob2RlLmNhbGwodGhpcyksdGhpcy5fcGFyYW09dGhpcy5pbnB1dD1lLnBhcmFtLHRoaXMudW5pdHM9ZS51bml0cyx0aGlzLmNvbnZlcnQ9ZS5jb252ZXJ0LHRoaXMub3ZlcnJpZGRlbj0hMSx0aGlzLl9sZm89bnVsbCx0LmlzT2JqZWN0KGUubGZvKT90aGlzLnZhbHVlPWUubGZvOnQuaXNVbmRlZihlLnZhbHVlKXx8KHRoaXMudmFsdWU9ZS52YWx1ZSl9LHQuZXh0ZW5kKHQuUGFyYW0sdC5BdWRpb05vZGUpLHQuUGFyYW0uZGVmYXVsdHM9e3VuaXRzOnQuVHlwZS5EZWZhdWx0LGNvbnZlcnQ6ITAscGFyYW06dm9pZCAwfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QYXJhbS5wcm90b3R5cGUsXCJ2YWx1ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG9Vbml0cyh0aGlzLl9wYXJhbS52YWx1ZSl9LHNldDpmdW5jdGlvbihlKXtpZih0LmlzT2JqZWN0KGUpKXtpZih0LmlzVW5kZWYodC5MRk8pKXRocm93IG5ldyBFcnJvcihcIkluY2x1ZGUgJ1RvbmUuTEZPJyB0byB1c2UgYW4gTEZPIGFzIGEgUGFyYW0gdmFsdWUuXCIpO3RoaXMuX2xmbyYmdGhpcy5fbGZvLmRpc3Bvc2UoKSx0aGlzLl9sZm89bmV3IHQuTEZPKGUpLnN0YXJ0KCksdGhpcy5fbGZvLmNvbm5lY3QodGhpcy5pbnB1dCl9ZWxzZXt2YXIgaT10aGlzLl9mcm9tVW5pdHMoZSk7dGhpcy5fcGFyYW0uY2FuY2VsU2NoZWR1bGVkVmFsdWVzKDApLHRoaXMuX3BhcmFtLnZhbHVlPWl9fX0pLHQuUGFyYW0ucHJvdG90eXBlLl9mcm9tVW5pdHM9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuY29udmVydCYmIXQuaXNVbmRlZih0aGlzLmNvbnZlcnQpKXJldHVybiBlO3N3aXRjaCh0aGlzLnVuaXRzKXtjYXNlIHQuVHlwZS5UaW1lOnJldHVybiB0aGlzLnRvU2Vjb25kcyhlKTtjYXNlIHQuVHlwZS5GcmVxdWVuY3k6cmV0dXJuIHRoaXMudG9GcmVxdWVuY3koZSk7Y2FzZSB0LlR5cGUuRGVjaWJlbHM6cmV0dXJuIHQuZGJUb0dhaW4oZSk7Y2FzZSB0LlR5cGUuTm9ybWFsUmFuZ2U6cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KGUsMCksMSk7Y2FzZSB0LlR5cGUuQXVkaW9SYW5nZTpyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgoZSwtMSksMSk7Y2FzZSB0LlR5cGUuUG9zaXRpdmU6cmV0dXJuIE1hdGgubWF4KGUsMCk7ZGVmYXVsdDpyZXR1cm4gZX19LHQuUGFyYW0ucHJvdG90eXBlLl90b1VuaXRzPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmNvbnZlcnQmJiF0LmlzVW5kZWYodGhpcy5jb252ZXJ0KSlyZXR1cm4gZTtzd2l0Y2godGhpcy51bml0cyl7Y2FzZSB0LlR5cGUuRGVjaWJlbHM6cmV0dXJuIHQuZ2FpblRvRGIoZSk7ZGVmYXVsdDpyZXR1cm4gZX19LHQuUGFyYW0ucHJvdG90eXBlLl9taW5PdXRwdXQ9MWUtNSx0LlBhcmFtLnByb3RvdHlwZS5zZXRWYWx1ZUF0VGltZT1mdW5jdGlvbihlLGkpe3JldHVybiBpPXRoaXMudG9TZWNvbmRzKGkpLHQuaXNQYXN0KGkpLHRoaXMuX3BhcmFtLnNldFZhbHVlQXRUaW1lKHRoaXMuX2Zyb21Vbml0cyhlKSxpKSx0aGlzXG59LHQuUGFyYW0ucHJvdG90eXBlLnNldFJhbXBQb2ludD1mdW5jdGlvbihlKXtlPXQuZGVmYXVsdEFyZyhlLHRoaXMubm93KCkpLHRoaXMuY2FuY2VsQW5kSG9sZEF0VGltZSh0aGlzLmNvbnRleHQuY3VycmVudFRpbWUpO3ZhciBpPXRoaXMuX3BhcmFtLnZhbHVlO3JldHVybiAwPT09aSYmKGk9dGhpcy5fbWluT3V0cHV0KSx0aGlzLl9wYXJhbS5zZXRWYWx1ZUF0VGltZShpLGUpLHRoaXN9LHQuUGFyYW0ucHJvdG90eXBlLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lPWZ1bmN0aW9uKGUsaSl7cmV0dXJuIGU9dGhpcy5fZnJvbVVuaXRzKGUpLGk9dGhpcy50b1NlY29uZHMoaSksdC5pc1Bhc3QoaSksdGhpcy5fcGFyYW0ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoZSxpKSx0aGlzfSx0LlBhcmFtLnByb3RvdHlwZS5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lPWZ1bmN0aW9uKGUsaSl7cmV0dXJuIGU9dGhpcy5fZnJvbVVuaXRzKGUpLGU9TWF0aC5tYXgodGhpcy5fbWluT3V0cHV0LGUpLGk9dGhpcy50b1NlY29uZHMoaSksdC5pc1Bhc3QoaSksdGhpcy5fcGFyYW0uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZShlLGkpLHRoaXN9LHQuUGFyYW0ucHJvdG90eXBlLmV4cG9uZW50aWFsUmFtcFRvPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gaT10aGlzLnRvU2Vjb25kcyhpKSx0aGlzLnNldFJhbXBQb2ludChpKSx0aGlzLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUodCxpK3RoaXMudG9TZWNvbmRzKGUpKSx0aGlzfSx0LlBhcmFtLnByb3RvdHlwZS5saW5lYXJSYW1wVG89ZnVuY3Rpb24odCxlLGkpe3JldHVybiBpPXRoaXMudG9TZWNvbmRzKGkpLHRoaXMuc2V0UmFtcFBvaW50KGkpLHRoaXMubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodCxpK3RoaXMudG9TZWNvbmRzKGUpKSx0aGlzfSx0LlBhcmFtLnByb3RvdHlwZS5nZXRUaW1lQ29uc3RhbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgubG9nKHRoaXMudG9TZWNvbmRzKHQpKzEpL01hdGgubG9nKDIwMCl9LHQuUGFyYW0ucHJvdG90eXBlLnRhcmdldFJhbXBUbz1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIGk9dGhpcy50b1NlY29uZHMoaSksdGhpcy5zZXRSYW1wUG9pbnQoaSksdGhpcy5zZXRUYXJnZXRBdFRpbWUodCxpLHRoaXMuZ2V0VGltZUNvbnN0YW50KGUpKSx0aGlzfSx0LlBhcmFtLnByb3RvdHlwZS5zZXRUYXJnZXRBdFRpbWU9ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0PXRoaXMuX2Zyb21Vbml0cyh0KSx0PU1hdGgubWF4KHRoaXMuX21pbk91dHB1dCx0KSxpPU1hdGgubWF4KHRoaXMuX21pbk91dHB1dCxpKSx0aGlzLl9wYXJhbS5zZXRUYXJnZXRBdFRpbWUodCx0aGlzLnRvU2Vjb25kcyhlKSxpKSx0aGlzfSx0LlBhcmFtLnByb3RvdHlwZS5zZXRWYWx1ZUN1cnZlQXRUaW1lPWZ1bmN0aW9uKHQsZSxpKXt2YXIgbixzO2ZvcihpPXRoaXMudG9TZWNvbmRzKGkpLGU9dGhpcy50b1NlY29uZHMoZSksdGhpcy5zZXRWYWx1ZUF0VGltZSh0WzBdLGUpLG49aS8odC5sZW5ndGgtMSkscz0xO3M8dC5sZW5ndGg7cysrKXRoaXMuX3BhcmFtLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKHRoaXMuX2Zyb21Vbml0cyh0W3NdKSxlK3Mqbik7cmV0dXJuIHRoaXN9LHQuUGFyYW0ucHJvdG90eXBlLmNhbmNlbFNjaGVkdWxlZFZhbHVlcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fcGFyYW0uY2FuY2VsU2NoZWR1bGVkVmFsdWVzKHRoaXMudG9TZWNvbmRzKHQpKSx0aGlzfSx0LlBhcmFtLnByb3RvdHlwZS5jYW5jZWxBbmRIb2xkQXRUaW1lPWZ1bmN0aW9uKHQpe3ZhciBlLGk7cmV0dXJuIHQ9dGhpcy50b1NlY29uZHModCksdGhpcy5fcGFyYW0uY2FuY2VsQW5kSG9sZEF0VGltZT90aGlzLl9wYXJhbS5jYW5jZWxBbmRIb2xkQXRUaW1lKHQpOihlPXRoaXMuY29udGV4dC5jdXJyZW50VGltZSx0aGlzLl9wYXJhbS5jYW5jZWxTY2hlZHVsZWRWYWx1ZXMoZSksaT10aGlzLl9wYXJhbS52YWx1ZSwwPT09aSYmKGk9dGhpcy5fbWluT3V0cHV0KSx0aGlzLl9wYXJhbS5zZXRWYWx1ZUF0VGltZShpLGUrdGhpcy5zYW1wbGVUaW1lKSksdGhpc30sdC5QYXJhbS5wcm90b3R5cGUucmFtcFRvPWZ1bmN0aW9uKGUsaSxuKXtyZXR1cm4gaT10LmRlZmF1bHRBcmcoaSwuMSksdGhpcy51bml0cz09PXQuVHlwZS5GcmVxdWVuY3l8fHRoaXMudW5pdHM9PT10LlR5cGUuQlBNfHx0aGlzLnVuaXRzPT09dC5UeXBlLkRlY2liZWxzP3RoaXMuZXhwb25lbnRpYWxSYW1wVG8oZSxpLG4pOnRoaXMubGluZWFyUmFtcFRvKGUsaSxuKSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QYXJhbS5wcm90b3R5cGUsXCJsZm9cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xmb319KSx0LlBhcmFtLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fcGFyYW09bnVsbCx0aGlzLl9sZm8mJih0aGlzLl9sZm8uZGlzcG9zZSgpLHRoaXMuX2xmbz1udWxsKSx0aGlzfSx0LlBhcmFtfSksdChmdW5jdGlvbih0KXtyZXR1cm4gd2luZG93LkdhaW5Ob2RlJiYhQXVkaW9Db250ZXh0LnByb3RvdHlwZS5jcmVhdGVHYWluJiYoQXVkaW9Db250ZXh0LnByb3RvdHlwZS5jcmVhdGVHYWluPUF1ZGlvQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlR2Fpbk5vZGUpLHQuR2Fpbj1mdW5jdGlvbigpe3ZhciBlPXQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImdhaW5cIixcInVuaXRzXCJdLHQuR2Fpbik7dC5BdWRpb05vZGUuY2FsbCh0aGlzKSx0aGlzLmlucHV0PXRoaXMub3V0cHV0PXRoaXMuX2dhaW5Ob2RlPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCksdGhpcy5nYWluPW5ldyB0LlBhcmFtKHtwYXJhbTp0aGlzLl9nYWluTm9kZS5nYWluLHVuaXRzOmUudW5pdHMsdmFsdWU6ZS5nYWluLGNvbnZlcnQ6ZS5jb252ZXJ0fSksdGhpcy5fcmVhZE9ubHkoXCJnYWluXCIpfSx0LmV4dGVuZCh0LkdhaW4sdC5BdWRpb05vZGUpLHQuR2Fpbi5kZWZhdWx0cz17Z2FpbjoxLGNvbnZlcnQ6ITB9LHQuR2Fpbi5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3QuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZ2Fpbk5vZGUuZGlzY29ubmVjdCgpLHRoaXMuX2dhaW5Ob2RlPW51bGwsdGhpcy5fd3JpdGFibGUoXCJnYWluXCIpLHRoaXMuZ2Fpbi5kaXNwb3NlKCksdGhpcy5nYWluPW51bGx9LHQuR2Fpbn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuU2lnbmFsPWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1widmFsdWVcIixcInVuaXRzXCJdLHQuU2lnbmFsKSxpPXQuY29udGV4dC5jcmVhdGVHYWluKCk7ZS5wYXJhbT1pLmdhaW4sdC5QYXJhbS5jYWxsKHRoaXMsZSksdGhpcy5vdXRwdXQ9aSx0aGlzLmlucHV0PXRoaXMuX3BhcmFtPXRoaXMub3V0cHV0LmdhaW4sdGhpcy5jb250ZXh0LmdldENvbnN0YW50KDEpLmNvbm5lY3QodGhpcy5vdXRwdXQpfSx0LmV4dGVuZCh0LlNpZ25hbCx0LlBhcmFtKSx0LlNpZ25hbC5kZWZhdWx0cz17dmFsdWU6MCx1bml0czp0LlR5cGUuRGVmYXVsdCxjb252ZXJ0OiEwfSx0LlNpZ25hbC5wcm90b3R5cGUuY29ubmVjdD10LlNpZ25hbEJhc2UucHJvdG90eXBlLmNvbm5lY3QsdC5TaWduYWwucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5QYXJhbS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXN9LHQuU2lnbmFsfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5UaW1lbGluZVNpZ25hbD1mdW5jdGlvbigpe3ZhciBlPXQuZGVmYXVsdHMoYXJndW1lbnRzLFtcInZhbHVlXCIsXCJ1bml0c1wiXSx0LlNpZ25hbCk7dC5TaWduYWwuY2FsbCh0aGlzLGUpLHRoaXMuX2V2ZW50cz1uZXcgdC5UaW1lbGluZSgxMDApLHRoaXMuX2luaXRpYWw9dGhpcy5fZnJvbVVuaXRzKHRoaXMuX3BhcmFtLnZhbHVlKSx0aGlzLnZhbHVlPWUudmFsdWUsZGVsZXRlIHRoaXMuaW5wdXR9LHQuZXh0ZW5kKHQuVGltZWxpbmVTaWduYWwsdC5TaWduYWwpLHQuVGltZWxpbmVTaWduYWwuVHlwZT17TGluZWFyOlwibGluZWFyXCIsRXhwb25lbnRpYWw6XCJleHBvbmVudGlhbFwiLFRhcmdldDpcInRhcmdldFwiLFNldDpcInNldFwifSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUsXCJ2YWx1ZVwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm5vdygpLGU9dGhpcy5nZXRWYWx1ZUF0VGltZSh0KTtyZXR1cm4gdGhpcy5fdG9Vbml0cyhlKX0sc2V0OmZ1bmN0aW9uKHQpe2lmKHRoaXMuX2V2ZW50cyl7dmFyIGU9dGhpcy5fZnJvbVVuaXRzKHQpO3RoaXMuX2luaXRpYWw9ZSx0aGlzLmNhbmNlbFNjaGVkdWxlZFZhbHVlcygpLHRoaXMuX3BhcmFtLnZhbHVlPWV9fX0pLHQuVGltZWxpbmVTaWduYWwucHJvdG90eXBlLnNldFZhbHVlQXRUaW1lPWZ1bmN0aW9uKGUsaSl7cmV0dXJuIGU9dGhpcy5fZnJvbVVuaXRzKGUpLGk9dGhpcy50b1NlY29uZHMoaSksdGhpcy5fZXZlbnRzLmFkZCh7dHlwZTp0LlRpbWVsaW5lU2lnbmFsLlR5cGUuU2V0LHZhbHVlOmUsdGltZTppfSksdGhpcy5fcGFyYW0uc2V0VmFsdWVBdFRpbWUoZSxpKSx0aGlzfSx0LlRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZT1mdW5jdGlvbihlLGkpe3JldHVybiBlPXRoaXMuX2Zyb21Vbml0cyhlKSxpPXRoaXMudG9TZWNvbmRzKGkpLHRoaXMuX2V2ZW50cy5hZGQoe3R5cGU6dC5UaW1lbGluZVNpZ25hbC5UeXBlLkxpbmVhcix2YWx1ZTplLHRpbWU6aX0pLHRoaXMuX3BhcmFtLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKGUsaSksdGhpc30sdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZT1mdW5jdGlvbihlLGkpe3ZhciBuLHM7cmV0dXJuIGk9dGhpcy50b1NlY29uZHMoaSksbj10aGlzLl9zZWFyY2hCZWZvcmUoaSksbiYmMD09PW4udmFsdWUmJnRoaXMuc2V0VmFsdWVBdFRpbWUodGhpcy5fbWluT3V0cHV0LG4udGltZSksZT10aGlzLl9mcm9tVW5pdHMoZSkscz1NYXRoLm1heChlLHRoaXMuX21pbk91dHB1dCksdGhpcy5fZXZlbnRzLmFkZCh7dHlwZTp0LlRpbWVsaW5lU2lnbmFsLlR5cGUuRXhwb25lbnRpYWwsdmFsdWU6cyx0aW1lOml9KSxlPHRoaXMuX21pbk91dHB1dD8odGhpcy5fcGFyYW0uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSh0aGlzLl9taW5PdXRwdXQsaS10aGlzLnNhbXBsZVRpbWUpLHRoaXMuc2V0VmFsdWVBdFRpbWUoMCxpKSk6dGhpcy5fcGFyYW0uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZShlLGkpLHRoaXN9LHQuVGltZWxpbmVTaWduYWwucHJvdG90eXBlLnNldFRhcmdldEF0VGltZT1mdW5jdGlvbihlLGksbil7cmV0dXJuIGU9dGhpcy5fZnJvbVVuaXRzKGUpLGU9TWF0aC5tYXgodGhpcy5fbWluT3V0cHV0LGUpLG49TWF0aC5tYXgodGhpcy5fbWluT3V0cHV0LG4pLGk9dGhpcy50b1NlY29uZHMoaSksdGhpcy5fZXZlbnRzLmFkZCh7dHlwZTp0LlRpbWVsaW5lU2lnbmFsLlR5cGUuVGFyZ2V0LHZhbHVlOmUsdGltZTppLGNvbnN0YW50Om59KSx0aGlzLl9wYXJhbS5zZXRUYXJnZXRBdFRpbWUoZSxpLG4pLHRoaXN9LHQuVGltZWxpbmVTaWduYWwucHJvdG90eXBlLnNldFZhbHVlQ3VydmVBdFRpbWU9ZnVuY3Rpb24oZSxpLG4scyl7dmFyIG8scjtmb3Iocz10LmRlZmF1bHRBcmcocywxKSxuPXRoaXMudG9TZWNvbmRzKG4pLGk9dGhpcy50b1NlY29uZHMoaSksbz1uLyhlLmxlbmd0aC0xKSx0aGlzLnNldFZhbHVlQXRUaW1lKGVbMF0qcyxpKSxyPTE7cjxlLmxlbmd0aDtyKyspdGhpcy5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShlW3JdKnMsaStyKm8pO3JldHVybiB0aGlzfSx0LlRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5jYW5jZWxTY2hlZHVsZWRWYWx1ZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy50b1NlY29uZHModCksdGhpcy5fZXZlbnRzLmNhbmNlbCh0KSx0aGlzLl9wYXJhbS5jYW5jZWxTY2hlZHVsZWRWYWx1ZXModCksdGhpc30sdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuY2FuY2VsQW5kSG9sZEF0VGltZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZXRSYW1wUG9pbnQodGhpcy50b1NlY29uZHModCkpLHRoaXN9LHQuVGltZWxpbmVTaWduYWwucHJvdG90eXBlLnNldFJhbXBQb2ludD1mdW5jdGlvbihlKXt2YXIgaSxuLHM7cmV0dXJuIGU9dGhpcy50b1NlY29uZHMoZSksaT10aGlzLl90b1VuaXRzKHRoaXMuZ2V0VmFsdWVBdFRpbWUoZSkpLG49dGhpcy5fc2VhcmNoQmVmb3JlKGUpLG4mJm4udGltZT09PWU/dGhpcy5jYW5jZWxTY2hlZHVsZWRWYWx1ZXMoZSt0aGlzLnNhbXBsZVRpbWUpOihzPXRoaXMuX3NlYXJjaEFmdGVyKGUpKSYmKHRoaXMuY2FuY2VsU2NoZWR1bGVkVmFsdWVzKGUpLHMudHlwZT09PXQuVGltZWxpbmVTaWduYWwuVHlwZS5MaW5lYXI/dGhpcy5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShpLGUpOnMudHlwZT09PXQuVGltZWxpbmVTaWduYWwuVHlwZS5FeHBvbmVudGlhbCYmdGhpcy5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKGksZSkpLHRoaXMuc2V0VmFsdWVBdFRpbWUoaSxlKSx0aGlzfSx0LlRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5saW5lYXJSYW1wVG9WYWx1ZUJldHdlZW49ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0aGlzLnNldFJhbXBQb2ludChlKSx0aGlzLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKHQsaSksdGhpc30sdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUJldHdlZW49ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0aGlzLnNldFJhbXBQb2ludChlKSx0aGlzLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUodCxpKSx0aGlzfSx0LlRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5fc2VhcmNoQmVmb3JlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9ldmVudHMuZ2V0KHQpfSx0LlRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5fc2VhcmNoQWZ0ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2V2ZW50cy5nZXRBZnRlcih0KX0sdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuZ2V0VmFsdWVBdFRpbWU9ZnVuY3Rpb24oZSl7dmFyIGksbixzLG8scjtyZXR1cm4gZT10aGlzLnRvU2Vjb25kcyhlKSxpPXRoaXMuX3NlYXJjaEFmdGVyKGUpLG49dGhpcy5fc2VhcmNoQmVmb3JlKGUpLHM9dGhpcy5faW5pdGlhbCxudWxsPT09bj9zPXRoaXMuX2luaXRpYWw6bi50eXBlPT09dC5UaW1lbGluZVNpZ25hbC5UeXBlLlRhcmdldD8obz10aGlzLl9ldmVudHMuZ2V0QmVmb3JlKG4udGltZSkscj1udWxsPT09bz90aGlzLl9pbml0aWFsOm8udmFsdWUscz10aGlzLl9leHBvbmVudGlhbEFwcHJvYWNoKG4udGltZSxyLG4udmFsdWUsbi5jb25zdGFudCxlKSk6cz1udWxsPT09aT9uLnZhbHVlOmkudHlwZT09PXQuVGltZWxpbmVTaWduYWwuVHlwZS5MaW5lYXI/dGhpcy5fbGluZWFySW50ZXJwb2xhdGUobi50aW1lLG4udmFsdWUsaS50aW1lLGkudmFsdWUsZSk6aS50eXBlPT09dC5UaW1lbGluZVNpZ25hbC5UeXBlLkV4cG9uZW50aWFsP3RoaXMuX2V4cG9uZW50aWFsSW50ZXJwb2xhdGUobi50aW1lLG4udmFsdWUsaS50aW1lLGkudmFsdWUsZSk6bi52YWx1ZSxzfSx0LlRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5jb25uZWN0PXQuU2lnbmFsQmFzZS5wcm90b3R5cGUuY29ubmVjdCx0LlRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5fZXhwb25lbnRpYWxBcHByb2FjaD1mdW5jdGlvbih0LGUsaSxuLHMpe3JldHVybiBpKyhlLWkpKk1hdGguZXhwKC0ocy10KS9uKX0sdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuX2xpbmVhckludGVycG9sYXRlPWZ1bmN0aW9uKHQsZSxpLG4scyl7cmV0dXJuIGUrKHMtdCkvKGktdCkqKG4tZSl9LHQuVGltZWxpbmVTaWduYWwucHJvdG90eXBlLl9leHBvbmVudGlhbEludGVycG9sYXRlPWZ1bmN0aW9uKHQsZSxpLG4scyl7cmV0dXJuKGU9TWF0aC5tYXgodGhpcy5fbWluT3V0cHV0LGUpKSpNYXRoLnBvdyhuL2UsKHMtdCkvKGktdCkpfSx0LlRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5TaWduYWwucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9ldmVudHMuZGlzcG9zZSgpLHRoaXMuX2V2ZW50cz1udWxsfSx0LlRpbWVsaW5lU2lnbmFsfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5Qb3c9ZnVuY3Rpb24oZSl7dC5TaWduYWxCYXNlLmNhbGwodGhpcyksdGhpcy5fZXhwPXQuZGVmYXVsdEFyZyhlLDEpLHRoaXMuX2V4cFNjYWxlcj10aGlzLmlucHV0PXRoaXMub3V0cHV0PW5ldyB0LldhdmVTaGFwZXIodGhpcy5fZXhwRnVuYyh0aGlzLl9leHApLDgxOTIpfSx0LmV4dGVuZCh0LlBvdyx0LlNpZ25hbEJhc2UpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBvdy5wcm90b3R5cGUsXCJ2YWx1ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXhwfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZXhwPXQsdGhpcy5fZXhwU2NhbGVyLnNldE1hcCh0aGlzLl9leHBGdW5jKHRoaXMuX2V4cCkpfX0pLHQuUG93LnByb3RvdHlwZS5fZXhwRnVuYz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIE1hdGgucG93KE1hdGguYWJzKGUpLHQpfX0sdC5Qb3cucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5TaWduYWxCYXNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZXhwU2NhbGVyLmRpc3Bvc2UoKSx0aGlzLl9leHBTY2FsZXI9bnVsbCx0aGlzfSx0LlBvd30pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuRW52ZWxvcGU9ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJhdHRhY2tcIixcImRlY2F5XCIsXCJzdXN0YWluXCIsXCJyZWxlYXNlXCJdLHQuRW52ZWxvcGUpO3QuQXVkaW9Ob2RlLmNhbGwodGhpcyksdGhpcy5hdHRhY2s9ZS5hdHRhY2ssdGhpcy5kZWNheT1lLmRlY2F5LHRoaXMuc3VzdGFpbj1lLnN1c3RhaW4sdGhpcy5yZWxlYXNlPWUucmVsZWFzZSx0aGlzLl9hdHRhY2tDdXJ2ZT1cImxpbmVhclwiLHRoaXMuX3JlbGVhc2VDdXJ2ZT1cImV4cG9uZW50aWFsXCIsdGhpcy5fc2lnPXRoaXMub3V0cHV0PW5ldyB0LlRpbWVsaW5lU2lnbmFsLHRoaXMuX3NpZy5zZXRWYWx1ZUF0VGltZSgwLDApLHRoaXMuYXR0YWNrQ3VydmU9ZS5hdHRhY2tDdXJ2ZSx0aGlzLnJlbGVhc2VDdXJ2ZT1lLnJlbGVhc2VDdXJ2ZX0sdC5leHRlbmQodC5FbnZlbG9wZSx0LkF1ZGlvTm9kZSksdC5FbnZlbG9wZS5kZWZhdWx0cz17YXR0YWNrOi4wMSxkZWNheTouMSxzdXN0YWluOi41LHJlbGVhc2U6MSxhdHRhY2tDdXJ2ZTpcImxpbmVhclwiLHJlbGVhc2VDdXJ2ZTpcImV4cG9uZW50aWFsXCJ9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkVudmVsb3BlLnByb3RvdHlwZSxcInZhbHVlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFZhbHVlQXRUaW1lKHRoaXMubm93KCkpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkVudmVsb3BlLnByb3RvdHlwZSxcImF0dGFja0N1cnZlXCIse2dldDpmdW5jdGlvbigpe2lmKHQuaXNTdHJpbmcodGhpcy5fYXR0YWNrQ3VydmUpKXJldHVybiB0aGlzLl9hdHRhY2tDdXJ2ZTtpZih0LmlzQXJyYXkodGhpcy5fYXR0YWNrQ3VydmUpKXtmb3IodmFyIGUgaW4gdC5FbnZlbG9wZS5UeXBlKWlmKHQuRW52ZWxvcGUuVHlwZVtlXS5Jbj09PXRoaXMuX2F0dGFja0N1cnZlKXJldHVybiBlO3JldHVybiB0aGlzLl9hdHRhY2tDdXJ2ZX19LHNldDpmdW5jdGlvbihlKXtpZih0LkVudmVsb3BlLlR5cGUuaGFzT3duUHJvcGVydHkoZSkpe3ZhciBpPXQuRW52ZWxvcGUuVHlwZVtlXTt0LmlzT2JqZWN0KGkpP3RoaXMuX2F0dGFja0N1cnZlPWkuSW46dGhpcy5fYXR0YWNrQ3VydmU9aX1lbHNle2lmKCF0LmlzQXJyYXkoZSkpdGhyb3cgbmV3IEVycm9yKFwiVG9uZS5FbnZlbG9wZTogaW52YWxpZCBjdXJ2ZTogXCIrZSk7dGhpcy5fYXR0YWNrQ3VydmU9ZX19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRW52ZWxvcGUucHJvdG90eXBlLFwicmVsZWFzZUN1cnZlXCIse2dldDpmdW5jdGlvbigpe2lmKHQuaXNTdHJpbmcodGhpcy5fcmVsZWFzZUN1cnZlKSlyZXR1cm4gdGhpcy5fcmVsZWFzZUN1cnZlO2lmKHQuaXNBcnJheSh0aGlzLl9yZWxlYXNlQ3VydmUpKXtmb3IodmFyIGUgaW4gdC5FbnZlbG9wZS5UeXBlKWlmKHQuRW52ZWxvcGUuVHlwZVtlXS5PdXQ9PT10aGlzLl9yZWxlYXNlQ3VydmUpcmV0dXJuIGU7cmV0dXJuIHRoaXMuX3JlbGVhc2VDdXJ2ZX19LHNldDpmdW5jdGlvbihlKXtpZih0LkVudmVsb3BlLlR5cGUuaGFzT3duUHJvcGVydHkoZSkpe3ZhciBpPXQuRW52ZWxvcGUuVHlwZVtlXTt0LmlzT2JqZWN0KGkpP3RoaXMuX3JlbGVhc2VDdXJ2ZT1pLk91dDp0aGlzLl9yZWxlYXNlQ3VydmU9aX1lbHNle2lmKCF0LmlzQXJyYXkoZSkpdGhyb3cgbmV3IEVycm9yKFwiVG9uZS5FbnZlbG9wZTogaW52YWxpZCBjdXJ2ZTogXCIrZSk7dGhpcy5fcmVsZWFzZUN1cnZlPWV9fX0pLHQuRW52ZWxvcGUucHJvdG90eXBlLnRyaWdnZXJBdHRhY2s9ZnVuY3Rpb24oZSxpKXt2YXIgbixzLG8scixhLGwsaCx1LGM7cmV0dXJuIGU9dGhpcy50b1NlY29uZHMoZSksbj10aGlzLnRvU2Vjb25kcyh0aGlzLmF0dGFjaykscz1uLG89dGhpcy50b1NlY29uZHModGhpcy5kZWNheSksaT10LmRlZmF1bHRBcmcoaSwxKSxyPXRoaXMuZ2V0VmFsdWVBdFRpbWUoZSkscj4wJiYoYT0xL3MsbD0xLXIscz1sL2EpLFwibGluZWFyXCI9PT10aGlzLl9hdHRhY2tDdXJ2ZT90aGlzLl9zaWcubGluZWFyUmFtcFRvKGkscyxlKTpcImV4cG9uZW50aWFsXCI9PT10aGlzLl9hdHRhY2tDdXJ2ZT90aGlzLl9zaWcudGFyZ2V0UmFtcFRvKGkscyxlKTpzPjAmJih0aGlzLl9zaWcuc2V0UmFtcFBvaW50KGUpLGg9dGhpcy5fYXR0YWNrQ3VydmUsczxuJiYodT0xLXMvbixjPU1hdGguZmxvb3IodSp0aGlzLl9hdHRhY2tDdXJ2ZS5sZW5ndGgpLGg9dGhpcy5fYXR0YWNrQ3VydmUuc2xpY2UoYyksaFswXT1yKSx0aGlzLl9zaWcuc2V0VmFsdWVDdXJ2ZUF0VGltZShoLGUscyxpKSksdGhpcy5fc2lnLnRhcmdldFJhbXBUbyhpKnRoaXMuc3VzdGFpbixvLHMrZSksdGhpc30sdC5FbnZlbG9wZS5wcm90b3R5cGUudHJpZ2dlclJlbGVhc2U9ZnVuY3Rpb24oZSl7dmFyIGksbixzO3JldHVybiBlPXRoaXMudG9TZWNvbmRzKGUpLGk9dGhpcy5nZXRWYWx1ZUF0VGltZShlKSxpPjAmJihuPXRoaXMudG9TZWNvbmRzKHRoaXMucmVsZWFzZSksXCJsaW5lYXJcIj09PXRoaXMuX3JlbGVhc2VDdXJ2ZT90aGlzLl9zaWcubGluZWFyUmFtcFRvKDAsbixlKTpcImV4cG9uZW50aWFsXCI9PT10aGlzLl9yZWxlYXNlQ3VydmU/dGhpcy5fc2lnLnRhcmdldFJhbXBUbygwLG4sZSk6KHM9dGhpcy5fcmVsZWFzZUN1cnZlLHQuaXNBcnJheShzKSYmKHRoaXMuX3NpZy5zZXRSYW1wUG9pbnQoZSksdGhpcy5fc2lnLnNldFZhbHVlQ3VydmVBdFRpbWUocyxlLG4saSkpKSksdGhpc30sdC5FbnZlbG9wZS5wcm90b3R5cGUuZ2V0VmFsdWVBdFRpbWU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3NpZy5nZXRWYWx1ZUF0VGltZSh0KX0sdC5FbnZlbG9wZS5wcm90b3R5cGUudHJpZ2dlckF0dGFja1JlbGVhc2U9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBlPXRoaXMudG9TZWNvbmRzKGUpLHRoaXMudHJpZ2dlckF0dGFjayhlLGkpLHRoaXMudHJpZ2dlclJlbGVhc2UoZSt0aGlzLnRvU2Vjb25kcyh0KSksdGhpc30sdC5FbnZlbG9wZS5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9zaWcuY2FuY2VsU2NoZWR1bGVkVmFsdWVzKHQpLHRoaXN9LHQuRW52ZWxvcGUucHJvdG90eXBlLmNvbm5lY3Q9dC5TaWduYWwucHJvdG90eXBlLmNvbm5lY3QsZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3ZhciBlLGk9bmV3IEFycmF5KHQubGVuZ3RoKTtmb3IoZT0wO2U8dC5sZW5ndGg7ZSsrKWlbZV09MS10W2VdO3JldHVybiBpfXZhciBpLG4scyxvLHIsYSxsLGgsdSxjLHAsZj0xMjgsZD1bXTtmb3IoaT0wO2k8ZjtpKyspZFtpXT1NYXRoLnNpbihpLyhmLTEpKihNYXRoLlBJLzIpKTtmb3Iocz1bXSxvPTYuNCxpPTA7aTxmLTE7aSsrKW49aS8oZi0xKSxyPU1hdGguc2luKG4qKDIqTWF0aC5QSSkqby1NYXRoLlBJLzIpKzEsc1tpXT1yLzEwKy44MypuO2ZvcihzW2YtMV09MSxhPVtdLGw9NSxpPTA7aTxmO2krKylhW2ldPU1hdGguY2VpbChpLyhmLTEpKmwpL2w7Zm9yKGg9W10saT0wO2k8ZjtpKyspbj1pLyhmLTEpLGhbaV09LjUqKDEtTWF0aC5jb3MoTWF0aC5QSSpuKSk7Zm9yKHU9W10saT0wO2k8ZjtpKyspbj1pLyhmLTEpLGM9NCpNYXRoLnBvdyhuLDMpKy4yLHA9TWF0aC5jb3MoYypNYXRoLlBJKjIqbiksdVtpXT1NYXRoLmFicyhwKigxLW4pKTt0LkVudmVsb3BlLlR5cGU9e2xpbmVhcjpcImxpbmVhclwiLGV4cG9uZW50aWFsOlwiZXhwb25lbnRpYWxcIixib3VuY2U6e0luOmUodSksT3V0OnV9LGNvc2luZTp7SW46ZCxPdXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQuc2xpY2UoMCkucmV2ZXJzZSgpfShkKX0sc3RlcDp7SW46YSxPdXQ6ZShhKX0scmlwcGxlOntJbjpzLE91dDplKHMpfSxzaW5lOntJbjpoLE91dDplKGgpfX19KCksdC5FbnZlbG9wZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3NpZy5kaXNwb3NlKCksdGhpcy5fc2lnPW51bGwsdGhpcy5fYXR0YWNrQ3VydmU9bnVsbCx0aGlzLl9yZWxlYXNlQ3VydmU9bnVsbCx0aGlzfSx0LkVudmVsb3BlfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5BbXBsaXR1ZGVFbnZlbG9wZT1mdW5jdGlvbigpe3QuRW52ZWxvcGUuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuaW5wdXQ9dGhpcy5vdXRwdXQ9bmV3IHQuR2Fpbix0aGlzLl9zaWcuY29ubmVjdCh0aGlzLm91dHB1dC5nYWluKX0sdC5leHRlbmQodC5BbXBsaXR1ZGVFbnZlbG9wZSx0LkVudmVsb3BlKSx0LkFtcGxpdHVkZUVudmVsb3BlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuRW52ZWxvcGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzfSx0LkFtcGxpdHVkZUVudmVsb3BlfSksdChmdW5jdGlvbih0KXtyZXR1cm4gd2luZG93LkFuYWx5c2VyTm9kZSYmIUFuYWx5c2VyTm9kZS5wcm90b3R5cGUuZ2V0RmxvYXRUaW1lRG9tYWluRGF0YSYmKEFuYWx5c2VyTm9kZS5wcm90b3R5cGUuZ2V0RmxvYXRUaW1lRG9tYWluRGF0YT1mdW5jdGlvbih0KXt2YXIgZSxpPW5ldyBVaW50OEFycmF5KHQubGVuZ3RoKTtmb3IodGhpcy5nZXRCeXRlVGltZURvbWFpbkRhdGEoaSksZT0wO2U8aS5sZW5ndGg7ZSsrKXRbZV09KGlbZV0tMTI4KS8xMjh9KSx0LkFuYWx5c2VyPWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1widHlwZVwiLFwic2l6ZVwiXSx0LkFuYWx5c2VyKTt0LkF1ZGlvTm9kZS5jYWxsKHRoaXMpLHRoaXMuX2FuYWx5c2VyPXRoaXMuaW5wdXQ9dGhpcy5vdXRwdXQ9dGhpcy5jb250ZXh0LmNyZWF0ZUFuYWx5c2VyKCksdGhpcy5fdHlwZT1lLnR5cGUsdGhpcy5fYnVmZmVyPW51bGwsdGhpcy5zaXplPWUuc2l6ZSx0aGlzLnR5cGU9ZS50eXBlfSx0LmV4dGVuZCh0LkFuYWx5c2VyLHQuQXVkaW9Ob2RlKSx0LkFuYWx5c2VyLmRlZmF1bHRzPXtzaXplOjEwMjQsdHlwZTpcImZmdFwiLHNtb290aGluZzouOH0sdC5BbmFseXNlci5UeXBlPXtXYXZlZm9ybTpcIndhdmVmb3JtXCIsRkZUOlwiZmZ0XCJ9LHQuQW5hbHlzZXIucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3R5cGU9PT10LkFuYWx5c2VyLlR5cGUuRkZUP3RoaXMuX2FuYWx5c2VyLmdldEZsb2F0RnJlcXVlbmN5RGF0YSh0aGlzLl9idWZmZXIpOnRoaXMuX3R5cGU9PT10LkFuYWx5c2VyLlR5cGUuV2F2ZWZvcm0mJnRoaXMuX2FuYWx5c2VyLmdldEZsb2F0VGltZURvbWFpbkRhdGEodGhpcy5fYnVmZmVyKSx0aGlzLl9idWZmZXJ9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkFuYWx5c2VyLnByb3RvdHlwZSxcInNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FuYWx5c2VyLmZyZXF1ZW5jeUJpbkNvdW50fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYW5hbHlzZXIuZmZ0U2l6ZT0yKnQsdGhpcy5fYnVmZmVyPW5ldyBGbG9hdDMyQXJyYXkodCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQW5hbHlzZXIucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHlwZX0sc2V0OmZ1bmN0aW9uKGUpe2lmKGUhPT10LkFuYWx5c2VyLlR5cGUuV2F2ZWZvcm0mJmUhPT10LkFuYWx5c2VyLlR5cGUuRkZUKXRocm93IG5ldyBUeXBlRXJyb3IoXCJUb25lLkFuYWx5c2VyOiBpbnZhbGlkIHR5cGU6IFwiK2UpO3RoaXMuX3R5cGU9ZX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5BbmFseXNlci5wcm90b3R5cGUsXCJzbW9vdGhpbmdcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FuYWx5c2VyLnNtb290aGluZ1RpbWVDb25zdGFudH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2FuYWx5c2VyLnNtb290aGluZ1RpbWVDb25zdGFudD10fX0pLHQuQW5hbHlzZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2FuYWx5c2VyLmRpc2Nvbm5lY3QoKSx0aGlzLl9hbmFseXNlcj1udWxsLHRoaXMuX2J1ZmZlcj1udWxsfSx0LkFuYWx5c2VyfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5Db21wcmVzc29yPWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1widGhyZXNob2xkXCIsXCJyYXRpb1wiXSx0LkNvbXByZXNzb3IpO3QuQXVkaW9Ob2RlLmNhbGwodGhpcyksdGhpcy5fY29tcHJlc3Nvcj10aGlzLmlucHV0PXRoaXMub3V0cHV0PXRoaXMuY29udGV4dC5jcmVhdGVEeW5hbWljc0NvbXByZXNzb3IoKSx0aGlzLnRocmVzaG9sZD1uZXcgdC5QYXJhbSh7cGFyYW06dGhpcy5fY29tcHJlc3Nvci50aHJlc2hvbGQsdW5pdHM6dC5UeXBlLkRlY2liZWxzLGNvbnZlcnQ6ITF9KSx0aGlzLmF0dGFjaz1uZXcgdC5QYXJhbSh0aGlzLl9jb21wcmVzc29yLmF0dGFjayx0LlR5cGUuVGltZSksdGhpcy5yZWxlYXNlPW5ldyB0LlBhcmFtKHRoaXMuX2NvbXByZXNzb3IucmVsZWFzZSx0LlR5cGUuVGltZSksdGhpcy5rbmVlPW5ldyB0LlBhcmFtKHtwYXJhbTp0aGlzLl9jb21wcmVzc29yLmtuZWUsdW5pdHM6dC5UeXBlLkRlY2liZWxzLGNvbnZlcnQ6ITF9KSx0aGlzLnJhdGlvPW5ldyB0LlBhcmFtKHtwYXJhbTp0aGlzLl9jb21wcmVzc29yLnJhdGlvLGNvbnZlcnQ6ITF9KSx0aGlzLl9yZWFkT25seShbXCJrbmVlXCIsXCJyZWxlYXNlXCIsXCJhdHRhY2tcIixcInJhdGlvXCIsXCJ0aHJlc2hvbGRcIl0pLHRoaXMuc2V0KGUpfSx0LmV4dGVuZCh0LkNvbXByZXNzb3IsdC5BdWRpb05vZGUpLHQuQ29tcHJlc3Nvci5kZWZhdWx0cz17cmF0aW86MTIsdGhyZXNob2xkOi0yNCxyZWxlYXNlOi4yNSxhdHRhY2s6LjAwMyxrbmVlOjMwfSx0LkNvbXByZXNzb3IucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJrbmVlXCIsXCJyZWxlYXNlXCIsXCJhdHRhY2tcIixcInJhdGlvXCIsXCJ0aHJlc2hvbGRcIl0pLHRoaXMuX2NvbXByZXNzb3IuZGlzY29ubmVjdCgpLHRoaXMuX2NvbXByZXNzb3I9bnVsbCx0aGlzLmF0dGFjay5kaXNwb3NlKCksdGhpcy5hdHRhY2s9bnVsbCx0aGlzLnJlbGVhc2UuZGlzcG9zZSgpLHRoaXMucmVsZWFzZT1udWxsLHRoaXMudGhyZXNob2xkLmRpc3Bvc2UoKSx0aGlzLnRocmVzaG9sZD1udWxsLHRoaXMucmF0aW8uZGlzcG9zZSgpLHRoaXMucmF0aW89bnVsbCx0aGlzLmtuZWUuZGlzcG9zZSgpLHRoaXMua25lZT1udWxsLHRoaXN9LHQuQ29tcHJlc3Nvcn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuQWRkPWZ1bmN0aW9uKGUpe3QuU2lnbmFsLmNhbGwodGhpcyksdGhpcy5jcmVhdGVJbnNPdXRzKDIsMCksdGhpcy5fc3VtPXRoaXMuaW5wdXRbMF09dGhpcy5pbnB1dFsxXT10aGlzLm91dHB1dD1uZXcgdC5HYWluLHRoaXMuX3BhcmFtPXRoaXMuaW5wdXRbMV09bmV3IHQuU2lnbmFsKGUpLHRoaXMuX3BhcmFtLmNvbm5lY3QodGhpcy5fc3VtKX0sdC5leHRlbmQodC5BZGQsdC5TaWduYWwpLHQuQWRkLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuU2lnbmFsLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fc3VtLmRpc3Bvc2UoKSx0aGlzLl9zdW09bnVsbCx0aGlzfSx0LkFkZH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuTXVsdGlwbHk9ZnVuY3Rpb24oZSl7dC5TaWduYWwuY2FsbCh0aGlzKSx0aGlzLmNyZWF0ZUluc091dHMoMiwwKSx0aGlzLl9tdWx0PXRoaXMuaW5wdXRbMF09dGhpcy5vdXRwdXQ9bmV3IHQuR2Fpbix0aGlzLl9wYXJhbT10aGlzLmlucHV0WzFdPXRoaXMub3V0cHV0LmdhaW4sdGhpcy5fcGFyYW0udmFsdWU9dC5kZWZhdWx0QXJnKGUsMCl9LHQuZXh0ZW5kKHQuTXVsdGlwbHksdC5TaWduYWwpLHQuTXVsdGlwbHkucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5TaWduYWwucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9tdWx0LmRpc3Bvc2UoKSx0aGlzLl9tdWx0PW51bGwsdGhpcy5fcGFyYW09bnVsbCx0aGlzfSx0Lk11bHRpcGx5fSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5OZWdhdGU9ZnVuY3Rpb24oKXt0LlNpZ25hbEJhc2UuY2FsbCh0aGlzKSx0aGlzLl9tdWx0aXBseT10aGlzLmlucHV0PXRoaXMub3V0cHV0PW5ldyB0Lk11bHRpcGx5KC0xKX0sdC5leHRlbmQodC5OZWdhdGUsdC5TaWduYWxCYXNlKSx0Lk5lZ2F0ZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LlNpZ25hbEJhc2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9tdWx0aXBseS5kaXNwb3NlKCksdGhpcy5fbXVsdGlwbHk9bnVsbCx0aGlzfSx0Lk5lZ2F0ZX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuU3VidHJhY3Q9ZnVuY3Rpb24oZSl7dC5TaWduYWwuY2FsbCh0aGlzKSx0aGlzLmNyZWF0ZUluc091dHMoMiwwKSx0aGlzLl9zdW09dGhpcy5pbnB1dFswXT10aGlzLm91dHB1dD1uZXcgdC5HYWluLHRoaXMuX25lZz1uZXcgdC5OZWdhdGUsdGhpcy5fcGFyYW09dGhpcy5pbnB1dFsxXT1uZXcgdC5TaWduYWwoZSksdGhpcy5fcGFyYW0uY2hhaW4odGhpcy5fbmVnLHRoaXMuX3N1bSl9LHQuZXh0ZW5kKHQuU3VidHJhY3QsdC5TaWduYWwpLHQuU3VidHJhY3QucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5TaWduYWwucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9uZWcuZGlzcG9zZSgpLHRoaXMuX25lZz1udWxsLHRoaXMuX3N1bS5kaXNjb25uZWN0KCksdGhpcy5fc3VtPW51bGwsdGhpc30sdC5TdWJ0cmFjdH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuR3JlYXRlclRoYW5aZXJvPWZ1bmN0aW9uKCl7dC5TaWduYWxCYXNlLmNhbGwodGhpcyksdGhpcy5fdGhyZXNoPXRoaXMub3V0cHV0PW5ldyB0LldhdmVTaGFwZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQ8PTA/MDoxfSwxMjcpLHRoaXMuX3NjYWxlPXRoaXMuaW5wdXQ9bmV3IHQuTXVsdGlwbHkoMWU0KSx0aGlzLl9zY2FsZS5jb25uZWN0KHRoaXMuX3RocmVzaCl9LHQuZXh0ZW5kKHQuR3JlYXRlclRoYW5aZXJvLHQuU2lnbmFsQmFzZSksdC5HcmVhdGVyVGhhblplcm8ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5TaWduYWxCYXNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fc2NhbGUuZGlzcG9zZSgpLHRoaXMuX3NjYWxlPW51bGwsdGhpcy5fdGhyZXNoLmRpc3Bvc2UoKSx0aGlzLl90aHJlc2g9bnVsbCx0aGlzfSx0LkdyZWF0ZXJUaGFuWmVyb30pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuR3JlYXRlclRoYW49ZnVuY3Rpb24oZSl7dC5TaWduYWwuY2FsbCh0aGlzKSx0aGlzLmNyZWF0ZUluc091dHMoMiwwKSx0aGlzLl9wYXJhbT10aGlzLmlucHV0WzBdPW5ldyB0LlN1YnRyYWN0KGUpLHRoaXMuaW5wdXRbMV09dGhpcy5fcGFyYW0uaW5wdXRbMV0sdGhpcy5fZ3R6PXRoaXMub3V0cHV0PW5ldyB0LkdyZWF0ZXJUaGFuWmVybyx0aGlzLl9wYXJhbS5jb25uZWN0KHRoaXMuX2d0eil9LHQuZXh0ZW5kKHQuR3JlYXRlclRoYW4sdC5TaWduYWwpLHQuR3JlYXRlclRoYW4ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5TaWduYWwucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9ndHouZGlzcG9zZSgpLHRoaXMuX2d0ej1udWxsLHRoaXN9LHQuR3JlYXRlclRoYW59KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkFicz1mdW5jdGlvbigpe3QuU2lnbmFsQmFzZS5jYWxsKHRoaXMpLHRoaXMuX2Ficz10aGlzLmlucHV0PXRoaXMub3V0cHV0PW5ldyB0LldhdmVTaGFwZXIoZnVuY3Rpb24odCl7cmV0dXJuIDA9PT10PzA6TWF0aC5hYnModCl9LDEyNyl9LHQuZXh0ZW5kKHQuQWJzLHQuU2lnbmFsQmFzZSksdC5BYnMucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5TaWduYWxCYXNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fYWJzLmRpc3Bvc2UoKSx0aGlzLl9hYnM9bnVsbCx0aGlzfSx0LkFic30pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuTW9kdWxvPWZ1bmN0aW9uKGUpe3QuU2lnbmFsQmFzZS5jYWxsKHRoaXMpLHRoaXMuY3JlYXRlSW5zT3V0cygxLDApLHRoaXMuX3NoYXBlcj1uZXcgdC5XYXZlU2hhcGVyKE1hdGgucG93KDIsMTYpKSx0aGlzLl9tdWx0aXBseT1uZXcgdC5NdWx0aXBseSx0aGlzLl9zdWJ0cmFjdD10aGlzLm91dHB1dD1uZXcgdC5TdWJ0cmFjdCx0aGlzLl9tb2RTaWduYWw9bmV3IHQuU2lnbmFsKGUpLHRoaXMuaW5wdXQuZmFuKHRoaXMuX3NoYXBlcix0aGlzLl9zdWJ0cmFjdCksdGhpcy5fbW9kU2lnbmFsLmNvbm5lY3QodGhpcy5fbXVsdGlwbHksMCwwKSx0aGlzLl9zaGFwZXIuY29ubmVjdCh0aGlzLl9tdWx0aXBseSwwLDEpLHRoaXMuX211bHRpcGx5LmNvbm5lY3QodGhpcy5fc3VidHJhY3QsMCwxKSx0aGlzLl9zZXRXYXZlU2hhcGVyKGUpfSx0LmV4dGVuZCh0Lk1vZHVsbyx0LlNpZ25hbEJhc2UpLHQuTW9kdWxvLnByb3RvdHlwZS5fc2V0V2F2ZVNoYXBlcj1mdW5jdGlvbih0KXt0aGlzLl9zaGFwZXIuc2V0TWFwKGZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLmZsb29yKChlKzFlLTQpL3QpfSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lk1vZHVsby5wcm90b3R5cGUsXCJ2YWx1ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kU2lnbmFsLnZhbHVlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbW9kU2lnbmFsLnZhbHVlPXQsdGhpcy5fc2V0V2F2ZVNoYXBlcih0KX19KSx0Lk1vZHVsby5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LlNpZ25hbEJhc2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9zaGFwZXIuZGlzcG9zZSgpLHRoaXMuX3NoYXBlcj1udWxsLHRoaXMuX211bHRpcGx5LmRpc3Bvc2UoKSx0aGlzLl9tdWx0aXBseT1udWxsLHRoaXMuX3N1YnRyYWN0LmRpc3Bvc2UoKSx0aGlzLl9zdWJ0cmFjdD1udWxsLHRoaXMuX21vZFNpZ25hbC5kaXNwb3NlKCksdGhpcy5fbW9kU2lnbmFsPW51bGwsdGhpc30sdC5Nb2R1bG99KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkF1ZGlvVG9HYWluPWZ1bmN0aW9uKCl7dC5TaWduYWxCYXNlLmNhbGwodGhpcyksdGhpcy5fbm9ybT10aGlzLmlucHV0PXRoaXMub3V0cHV0PW5ldyB0LldhdmVTaGFwZXIoZnVuY3Rpb24odCl7cmV0dXJuKHQrMSkvMn0pfSx0LmV4dGVuZCh0LkF1ZGlvVG9HYWluLHQuU2lnbmFsQmFzZSksdC5BdWRpb1RvR2Fpbi5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LlNpZ25hbEJhc2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9ub3JtLmRpc3Bvc2UoKSx0aGlzLl9ub3JtPW51bGwsdGhpc30sdC5BdWRpb1RvR2Fpbn0pLHQoZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LGUsaSl7dmFyIG49bmV3IHQ7cmV0dXJuIGkuX2V2YWwoZVswXSkuY29ubmVjdChuLDAsMCksaS5fZXZhbChlWzFdKS5jb25uZWN0KG4sMCwxKSxufWZ1bmN0aW9uIGkodCxlLGkpe3ZhciBuPW5ldyB0O3JldHVybiBpLl9ldmFsKGVbMF0pLmNvbm5lY3QobiwwLDApLG59ZnVuY3Rpb24gbih0KXtyZXR1cm4gdD9wYXJzZUZsb2F0KHQpOnZvaWQgMH1mdW5jdGlvbiBzKHQpe3JldHVybiB0JiZ0LmFyZ3M/cGFyc2VGbG9hdCh0LmFyZ3MpOnZvaWQgMH1yZXR1cm4gdC5FeHByPWZ1bmN0aW9uKCl7dmFyIGUsaSxuLHMsbztmb3IodC5TaWduYWxCYXNlLmNhbGwodGhpcyksZT10aGlzLl9yZXBsYWNlbWVudHMoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSksaT10aGlzLl9wYXJzZUlucHV0cyhlKSx0aGlzLl9ub2Rlcz1bXSx0aGlzLmlucHV0PW5ldyBBcnJheShpKSxuPTA7bjxpO24rKyl0aGlzLmlucHV0W25dPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCk7cz10aGlzLl9wYXJzZVRyZWUoZSk7dHJ5e289dGhpcy5fZXZhbChzKX1jYXRjaCh0KXt0aHJvdyB0aGlzLl9kaXNwb3NlTm9kZXMoKSxuZXcgRXJyb3IoXCJUb25lLkV4cHI6IENvdWxkIGV2YWx1YXRlIGV4cHJlc3Npb246IFwiK2UpfXRoaXMub3V0cHV0PW99LHQuZXh0ZW5kKHQuRXhwcix0LlNpZ25hbEJhc2UpLHQuRXhwci5fRXhwcmVzc2lvbnM9e3ZhbHVlOntzaWduYWw6e3JlZ2V4cDovXlxcZCtcXC5cXGQrfF5cXGQrLyxtZXRob2Q6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0LlNpZ25hbChuKGUpKX19LGlucHV0OntyZWdleHA6L15cXCRcXGQvLG1ldGhvZDpmdW5jdGlvbih0LGUpe3JldHVybiBlLmlucHV0W24odC5zdWJzdHIoMSkpXX19fSxnbHVlOntcIihcIjp7cmVnZXhwOi9eXFwoL30sXCIpXCI6e3JlZ2V4cDovXlxcKS99LFwiLFwiOntyZWdleHA6L14sL319LGZ1bmM6e2Ficzp7cmVnZXhwOi9eYWJzLyxtZXRob2Q6aS5iaW5kKHRoaXMsdC5BYnMpfSxtb2Q6e3JlZ2V4cDovXm1vZC8sbWV0aG9kOmZ1bmN0aW9uKGUsaSl7dmFyIG49cyhlWzFdKSxvPW5ldyB0Lk1vZHVsbyhuKTtyZXR1cm4gaS5fZXZhbChlWzBdKS5jb25uZWN0KG8pLG99fSxwb3c6e3JlZ2V4cDovXnBvdy8sbWV0aG9kOmZ1bmN0aW9uKGUsaSl7dmFyIG49cyhlWzFdKSxvPW5ldyB0LlBvdyhuKTtyZXR1cm4gaS5fZXZhbChlWzBdKS5jb25uZWN0KG8pLG99fSxhMmc6e3JlZ2V4cDovXmEyZy8sbWV0aG9kOmZ1bmN0aW9uKGUsaSl7dmFyIG49bmV3IHQuQXVkaW9Ub0dhaW47cmV0dXJuIGkuX2V2YWwoZVswXSkuY29ubmVjdChuKSxufX19LGJpbmFyeTp7XCIrXCI6e3JlZ2V4cDovXlxcKy8scHJlY2VkZW5jZToxLG1ldGhvZDplLmJpbmQodGhpcyx0LkFkZCl9LFwiLVwiOntyZWdleHA6L15cXC0vLHByZWNlZGVuY2U6MSxtZXRob2Q6ZnVuY3Rpb24obixzKXtyZXR1cm4gMT09PW4ubGVuZ3RoP2kodC5OZWdhdGUsbixzKTplKHQuU3VidHJhY3QsbixzKX19LFwiKlwiOntyZWdleHA6L15cXCovLHByZWNlZGVuY2U6MCxtZXRob2Q6ZS5iaW5kKHRoaXMsdC5NdWx0aXBseSl9fSx1bmFyeTp7XCItXCI6e3JlZ2V4cDovXlxcLS8sbWV0aG9kOmkuYmluZCh0aGlzLHQuTmVnYXRlKX0sXCIhXCI6e3JlZ2V4cDovXlxcIS8sbWV0aG9kOmkuYmluZCh0aGlzLHQuTk9UKX19fSx0LkV4cHIucHJvdG90eXBlLl9wYXJzZUlucHV0cz1mdW5jdGlvbih0KXt2YXIgZSxpLG49dC5tYXRjaCgvXFwkXFxkL2cpLHM9MDtpZihudWxsIT09bilmb3IoZT0wO2U8bi5sZW5ndGg7ZSsrKWk9cGFyc2VJbnQobltlXS5zdWJzdHIoMSkpKzEscz1NYXRoLm1heChzLGkpO3JldHVybiBzfSx0LkV4cHIucHJvdG90eXBlLl9yZXBsYWNlbWVudHM9ZnVuY3Rpb24odCl7dmFyIGUsaT10LnNoaWZ0KCk7Zm9yKGU9MDtlPHQubGVuZ3RoO2UrKylpPWkucmVwbGFjZSgvXFwlL2ksdFtlXSk7cmV0dXJuIGl9LHQuRXhwci5wcm90b3R5cGUuX3Rva2VuaXplPWZ1bmN0aW9uKGUpe2Zvcih2YXIgaSxuPS0xLHM9W107ZS5sZW5ndGg+MDspZT1lLnRyaW0oKSxpPWZ1bmN0aW9uKGUpe3ZhciBpLG4scyxvLHIsYTtmb3IoaSBpbiB0LkV4cHIuX0V4cHJlc3Npb25zKXtuPXQuRXhwci5fRXhwcmVzc2lvbnNbaV07Zm9yKHMgaW4gbilpZihvPW5bc10scj1vLnJlZ2V4cCxudWxsIT09KGE9ZS5tYXRjaChyKSkpcmV0dXJue3R5cGU6aSx2YWx1ZTphWzBdLG1ldGhvZDpvLm1ldGhvZH19dGhyb3cgbmV3IFN5bnRheEVycm9yKFwiVG9uZS5FeHByOiBVbmV4cGVjdGVkIHRva2VuIFwiK2UpfShlKSxzLnB1c2goaSksZT1lLnN1YnN0cihpLnZhbHVlLmxlbmd0aCk7cmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gc1srK25dfSxwZWVrOmZ1bmN0aW9uKCl7cmV0dXJuIHNbbisxXX19fSx0LkV4cHIucHJvdG90eXBlLl9wYXJzZVRyZWU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaSh0LGUpe3JldHVybiF1KHQpJiZcImdsdWVcIj09PXQudHlwZSYmdC52YWx1ZT09PWV9ZnVuY3Rpb24gbihlLGksbil7dmFyIHMsbyxyPSExLGE9dC5FeHByLl9FeHByZXNzaW9uc1tpXTtpZighdShlKSlmb3IocyBpbiBhKWlmKG89YVtzXSxvLnJlZ2V4cC50ZXN0KGUudmFsdWUpKXtpZih1KG4pKXJldHVybiEwO2lmKG8ucHJlY2VkZW5jZT09PW4pcmV0dXJuITB9cmV0dXJuIHJ9ZnVuY3Rpb24gcyh0KXt2YXIgZSxpO2Zvcih1KHQpJiYodD01KSxlPXQ8MD9vKCk6cyh0LTEpLGk9aC5wZWVrKCk7bihpLFwiYmluYXJ5XCIsdCk7KWk9aC5uZXh0KCksZT17b3BlcmF0b3I6aS52YWx1ZSxtZXRob2Q6aS5tZXRob2QsYXJnczpbZSxzKHQtMSldfSxpPWgucGVlaygpO3JldHVybiBlfWZ1bmN0aW9uIG8oKXt2YXIgdCxlO3JldHVybiB0PWgucGVlaygpLG4odCxcInVuYXJ5XCIpPyh0PWgubmV4dCgpLGU9bygpLHtvcGVyYXRvcjp0LnZhbHVlLG1ldGhvZDp0Lm1ldGhvZCxhcmdzOltlXX0pOnIoKX1mdW5jdGlvbiByKCl7dmFyIHQsZTtpZih0PWgucGVlaygpLHUodCkpdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiVG9uZS5FeHByOiBVbmV4cGVjdGVkIHRlcm1pbmF0aW9uIG9mIGV4cHJlc3Npb25cIik7aWYoXCJmdW5jXCI9PT10LnR5cGUpcmV0dXJuIHQ9aC5uZXh0KCksYSh0KTtpZihcInZhbHVlXCI9PT10LnR5cGUpcmV0dXJuIHQ9aC5uZXh0KCkse21ldGhvZDp0Lm1ldGhvZCxhcmdzOnQudmFsdWV9O2lmKGkodCxcIihcIikpe2lmKGgubmV4dCgpLGU9cygpLHQ9aC5uZXh0KCksIWkodCxcIilcIikpdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiRXhwZWN0ZWQgKVwiKTtyZXR1cm4gZX10aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJUb25lLkV4cHI6IFBhcnNlIGVycm9yLCBjYW5ub3QgcHJvY2VzcyB0b2tlbiBcIit0LnZhbHVlKX1mdW5jdGlvbiBhKHQpe3ZhciBlLG49W107aWYoZT1oLm5leHQoKSwhaShlLFwiKFwiKSl0aHJvdyBuZXcgU3ludGF4RXJyb3IoJ1RvbmUuRXhwcjogRXhwZWN0ZWQgKCBpbiBhIGZ1bmN0aW9uIGNhbGwgXCInK3QudmFsdWUrJ1wiJyk7aWYoZT1oLnBlZWsoKSxpKGUsXCIpXCIpfHwobj1sKCkpLGU9aC5uZXh0KCksIWkoZSxcIilcIikpdGhyb3cgbmV3IFN5bnRheEVycm9yKCdUb25lLkV4cHI6IEV4cGVjdGVkICkgaW4gYSBmdW5jdGlvbiBjYWxsIFwiJyt0LnZhbHVlKydcIicpO3JldHVybnttZXRob2Q6dC5tZXRob2QsYXJnczpuLG5hbWU6bmFtZX19ZnVuY3Rpb24gbCgpe2Zvcih2YXIgdCxlLG49W107Oyl7aWYoZT1zKCksdShlKSlicmVhaztpZihuLnB1c2goZSksdD1oLnBlZWsoKSwhaSh0LFwiLFwiKSlicmVhaztoLm5leHQoKX1yZXR1cm4gbn12YXIgaD10aGlzLl90b2tlbml6ZShlKSx1PXQuaXNVbmRlZi5iaW5kKHRoaXMpO3JldHVybiBzKCl9LHQuRXhwci5wcm90b3R5cGUuX2V2YWw9ZnVuY3Rpb24oZSl7aWYoIXQuaXNVbmRlZihlKSl7dmFyIGk9ZS5tZXRob2QoZS5hcmdzLHRoaXMpO3JldHVybiB0aGlzLl9ub2Rlcy5wdXNoKGkpLGl9fSx0LkV4cHIucHJvdG90eXBlLl9kaXNwb3NlTm9kZXM9ZnVuY3Rpb24oKXt2YXIgZSxpO2ZvcihlPTA7ZTx0aGlzLl9ub2Rlcy5sZW5ndGg7ZSsrKWk9dGhpcy5fbm9kZXNbZV0sdC5pc0Z1bmN0aW9uKGkuZGlzcG9zZSk/aS5kaXNwb3NlKCk6dC5pc0Z1bmN0aW9uKGkuZGlzY29ubmVjdCkmJmkuZGlzY29ubmVjdCgpLGk9bnVsbCx0aGlzLl9ub2Rlc1tlXT1udWxsO3RoaXMuX25vZGVzPW51bGx9LHQuRXhwci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3QuU2lnbmFsQmFzZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2Rpc3Bvc2VOb2RlcygpfSx0LkV4cHJ9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkVxdWFsUG93ZXJHYWluPWZ1bmN0aW9uKCl7dC5TaWduYWxCYXNlLmNhbGwodGhpcyksdGhpcy5fZXFQb3dlcj10aGlzLmlucHV0PXRoaXMub3V0cHV0PW5ldyB0LldhdmVTaGFwZXIoZnVuY3Rpb24oZSl7cmV0dXJuIE1hdGguYWJzKGUpPC4wMDE/MDp0LmVxdWFsUG93ZXJTY2FsZShlKX0uYmluZCh0aGlzKSw0MDk2KX0sdC5leHRlbmQodC5FcXVhbFBvd2VyR2Fpbix0LlNpZ25hbEJhc2UpLHQuRXF1YWxQb3dlckdhaW4ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5TaWduYWxCYXNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZXFQb3dlci5kaXNwb3NlKCksdGhpcy5fZXFQb3dlcj1udWxsLHRoaXN9LHQuRXF1YWxQb3dlckdhaW59KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkNyb3NzRmFkZT1mdW5jdGlvbihlKXt0LkF1ZGlvTm9kZS5jYWxsKHRoaXMpLHRoaXMuY3JlYXRlSW5zT3V0cygyLDEpLHRoaXMuYT10aGlzLmlucHV0WzBdPW5ldyB0LkdhaW4sdGhpcy5iPXRoaXMuaW5wdXRbMV09bmV3IHQuR2Fpbix0aGlzLmZhZGU9bmV3IHQuU2lnbmFsKHQuZGVmYXVsdEFyZyhlLC41KSx0LlR5cGUuTm9ybWFsUmFuZ2UpLHRoaXMuX2VxdWFsUG93ZXJBPW5ldyB0LkVxdWFsUG93ZXJHYWluLHRoaXMuX2VxdWFsUG93ZXJCPW5ldyB0LkVxdWFsUG93ZXJHYWluLHRoaXMuX2ludmVydD1uZXcgdC5FeHByKFwiMSAtICQwXCIpLHRoaXMuYS5jb25uZWN0KHRoaXMub3V0cHV0KSx0aGlzLmIuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5mYWRlLmNoYWluKHRoaXMuX2VxdWFsUG93ZXJCLHRoaXMuYi5nYWluKSx0aGlzLmZhZGUuY2hhaW4odGhpcy5faW52ZXJ0LHRoaXMuX2VxdWFsUG93ZXJBLHRoaXMuYS5nYWluKSx0aGlzLl9yZWFkT25seShcImZhZGVcIil9LHQuZXh0ZW5kKHQuQ3Jvc3NGYWRlLHQuQXVkaW9Ob2RlKSx0LkNyb3NzRmFkZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFwiZmFkZVwiKSx0aGlzLl9lcXVhbFBvd2VyQS5kaXNwb3NlKCksdGhpcy5fZXF1YWxQb3dlckE9bnVsbCx0aGlzLl9lcXVhbFBvd2VyQi5kaXNwb3NlKCksdGhpcy5fZXF1YWxQb3dlckI9bnVsbCx0aGlzLmZhZGUuZGlzcG9zZSgpLHRoaXMuZmFkZT1udWxsLHRoaXMuX2ludmVydC5kaXNwb3NlKCksdGhpcy5faW52ZXJ0PW51bGwsdGhpcy5hLmRpc3Bvc2UoKSx0aGlzLmE9bnVsbCx0aGlzLmIuZGlzcG9zZSgpLHRoaXMuYj1udWxsLHRoaXN9LHQuQ3Jvc3NGYWRlfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5GaWx0ZXI9ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcInR5cGVcIixcInJvbGxvZmZcIl0sdC5GaWx0ZXIpO3QuQXVkaW9Ob2RlLmNhbGwodGhpcyksdGhpcy5jcmVhdGVJbnNPdXRzKDEsMSksdGhpcy5fZmlsdGVycz1bXSx0aGlzLmZyZXF1ZW5jeT1uZXcgdC5TaWduYWwoZS5mcmVxdWVuY3ksdC5UeXBlLkZyZXF1ZW5jeSksdGhpcy5kZXR1bmU9bmV3IHQuU2lnbmFsKDAsdC5UeXBlLkNlbnRzKSx0aGlzLmdhaW49bmV3IHQuU2lnbmFsKHt2YWx1ZTplLmdhaW4sY29udmVydDohMX0pLHRoaXMuUT1uZXcgdC5TaWduYWwoZS5RKSx0aGlzLl90eXBlPWUudHlwZSx0aGlzLl9yb2xsb2ZmPWUucm9sbG9mZix0aGlzLnJvbGxvZmY9ZS5yb2xsb2ZmLHRoaXMuX3JlYWRPbmx5KFtcImRldHVuZVwiLFwiZnJlcXVlbmN5XCIsXCJnYWluXCIsXCJRXCJdKX0sdC5leHRlbmQodC5GaWx0ZXIsdC5BdWRpb05vZGUpLHQuRmlsdGVyLmRlZmF1bHRzPXt0eXBlOlwibG93cGFzc1wiLGZyZXF1ZW5jeTozNTAscm9sbG9mZjotMTIsUToxLGdhaW46MH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRmlsdGVyLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3R5cGV9LHNldDpmdW5jdGlvbih0KXt2YXIgZTtpZigtMT09PVtcImxvd3Bhc3NcIixcImhpZ2hwYXNzXCIsXCJiYW5kcGFzc1wiLFwibG93c2hlbGZcIixcImhpZ2hzaGVsZlwiLFwibm90Y2hcIixcImFsbHBhc3NcIixcInBlYWtpbmdcIl0uaW5kZXhPZih0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVG9uZS5GaWx0ZXI6IGludmFsaWQgdHlwZSBcIit0KTtmb3IodGhpcy5fdHlwZT10LGU9MDtlPHRoaXMuX2ZpbHRlcnMubGVuZ3RoO2UrKyl0aGlzLl9maWx0ZXJzW2VdLnR5cGU9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5GaWx0ZXIucHJvdG90eXBlLFwicm9sbG9mZlwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcm9sbG9mZn0sc2V0OmZ1bmN0aW9uKGUpe3ZhciBpLG4scyxvLHIsYTtpZihlPXBhcnNlSW50KGUsMTApLGk9Wy0xMiwtMjQsLTQ4LC05Nl0sLTE9PT0obj1pLmluZGV4T2YoZSkpKXRocm93IG5ldyBSYW5nZUVycm9yKFwiVG9uZS5GaWx0ZXI6IHJvbGxvZmYgY2FuIG9ubHkgYmUgLTEyLCAtMjQsIC00OCBvciAtOTZcIik7Zm9yKG4rPTEsdGhpcy5fcm9sbG9mZj1lLHRoaXMuaW5wdXQuZGlzY29ubmVjdCgpLHM9MDtzPHRoaXMuX2ZpbHRlcnMubGVuZ3RoO3MrKyl0aGlzLl9maWx0ZXJzW3NdLmRpc2Nvbm5lY3QoKSx0aGlzLl9maWx0ZXJzW3NdPW51bGw7Zm9yKHRoaXMuX2ZpbHRlcnM9bmV3IEFycmF5KG4pLG89MDtvPG47bysrKXI9dGhpcy5jb250ZXh0LmNyZWF0ZUJpcXVhZEZpbHRlcigpLHIudHlwZT10aGlzLl90eXBlLHRoaXMuZnJlcXVlbmN5LmNvbm5lY3Qoci5mcmVxdWVuY3kpLHRoaXMuZGV0dW5lLmNvbm5lY3Qoci5kZXR1bmUpLHRoaXMuUS5jb25uZWN0KHIuUSksdGhpcy5nYWluLmNvbm5lY3Qoci5nYWluKSx0aGlzLl9maWx0ZXJzW29dPXI7YT1bdGhpcy5pbnB1dF0uY29uY2F0KHRoaXMuX2ZpbHRlcnMpLmNvbmNhdChbdGhpcy5vdXRwdXRdKSx0LmNvbm5lY3RTZXJpZXMuYXBwbHkodCxhKX19KSx0LkZpbHRlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3QuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7Zm9yKHZhciBlPTA7ZTx0aGlzLl9maWx0ZXJzLmxlbmd0aDtlKyspdGhpcy5fZmlsdGVyc1tlXS5kaXNjb25uZWN0KCksdGhpcy5fZmlsdGVyc1tlXT1udWxsO3JldHVybiB0aGlzLl9maWx0ZXJzPW51bGwsdGhpcy5fd3JpdGFibGUoW1wiZGV0dW5lXCIsXCJmcmVxdWVuY3lcIixcImdhaW5cIixcIlFcIl0pLHRoaXMuZnJlcXVlbmN5LmRpc3Bvc2UoKSx0aGlzLlEuZGlzcG9zZSgpLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5RPW51bGwsdGhpcy5kZXR1bmUuZGlzcG9zZSgpLHRoaXMuZGV0dW5lPW51bGwsdGhpcy5nYWluLmRpc3Bvc2UoKSx0aGlzLmdhaW49bnVsbCx0aGlzfSx0LkZpbHRlcn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuTXVsdGliYW5kU3BsaXQ9ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJsb3dGcmVxdWVuY3lcIixcImhpZ2hGcmVxdWVuY3lcIl0sdC5NdWx0aWJhbmRTcGxpdCk7dC5BdWRpb05vZGUuY2FsbCh0aGlzKSx0aGlzLmlucHV0PW5ldyB0LkdhaW4sdGhpcy5vdXRwdXQ9bmV3IEFycmF5KDMpLHRoaXMubG93PXRoaXMub3V0cHV0WzBdPW5ldyB0LkZpbHRlcigwLFwibG93cGFzc1wiKSx0aGlzLl9sb3dNaWRGaWx0ZXI9bmV3IHQuRmlsdGVyKDAsXCJoaWdocGFzc1wiKSx0aGlzLm1pZD10aGlzLm91dHB1dFsxXT1uZXcgdC5GaWx0ZXIoMCxcImxvd3Bhc3NcIiksdGhpcy5oaWdoPXRoaXMub3V0cHV0WzJdPW5ldyB0LkZpbHRlcigwLFwiaGlnaHBhc3NcIiksdGhpcy5sb3dGcmVxdWVuY3k9bmV3IHQuU2lnbmFsKGUubG93RnJlcXVlbmN5LHQuVHlwZS5GcmVxdWVuY3kpLHRoaXMuaGlnaEZyZXF1ZW5jeT1uZXcgdC5TaWduYWwoZS5oaWdoRnJlcXVlbmN5LHQuVHlwZS5GcmVxdWVuY3kpLHRoaXMuUT1uZXcgdC5TaWduYWwoZS5RKSx0aGlzLmlucHV0LmZhbih0aGlzLmxvdyx0aGlzLmhpZ2gpLHRoaXMuaW5wdXQuY2hhaW4odGhpcy5fbG93TWlkRmlsdGVyLHRoaXMubWlkKSx0aGlzLmxvd0ZyZXF1ZW5jeS5jb25uZWN0KHRoaXMubG93LmZyZXF1ZW5jeSksdGhpcy5sb3dGcmVxdWVuY3kuY29ubmVjdCh0aGlzLl9sb3dNaWRGaWx0ZXIuZnJlcXVlbmN5KSx0aGlzLmhpZ2hGcmVxdWVuY3kuY29ubmVjdCh0aGlzLm1pZC5mcmVxdWVuY3kpLHRoaXMuaGlnaEZyZXF1ZW5jeS5jb25uZWN0KHRoaXMuaGlnaC5mcmVxdWVuY3kpLHRoaXMuUS5jb25uZWN0KHRoaXMubG93LlEpLHRoaXMuUS5jb25uZWN0KHRoaXMuX2xvd01pZEZpbHRlci5RKSx0aGlzLlEuY29ubmVjdCh0aGlzLm1pZC5RKSx0aGlzLlEuY29ubmVjdCh0aGlzLmhpZ2guUSksdGhpcy5fcmVhZE9ubHkoW1wiaGlnaFwiLFwibWlkXCIsXCJsb3dcIixcImhpZ2hGcmVxdWVuY3lcIixcImxvd0ZyZXF1ZW5jeVwiXSl9LHQuZXh0ZW5kKHQuTXVsdGliYW5kU3BsaXQsdC5BdWRpb05vZGUpLHQuTXVsdGliYW5kU3BsaXQuZGVmYXVsdHM9e2xvd0ZyZXF1ZW5jeTo0MDAsaGlnaEZyZXF1ZW5jeToyNTAwLFE6MX0sdC5NdWx0aWJhbmRTcGxpdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcImhpZ2hcIixcIm1pZFwiLFwibG93XCIsXCJoaWdoRnJlcXVlbmN5XCIsXCJsb3dGcmVxdWVuY3lcIl0pLHRoaXMubG93LmRpc3Bvc2UoKSx0aGlzLmxvdz1udWxsLHRoaXMuX2xvd01pZEZpbHRlci5kaXNwb3NlKCksdGhpcy5fbG93TWlkRmlsdGVyPW51bGwsdGhpcy5taWQuZGlzcG9zZSgpLHRoaXMubWlkPW51bGwsdGhpcy5oaWdoLmRpc3Bvc2UoKSx0aGlzLmhpZ2g9bnVsbCx0aGlzLmxvd0ZyZXF1ZW5jeS5kaXNwb3NlKCksdGhpcy5sb3dGcmVxdWVuY3k9bnVsbCx0aGlzLmhpZ2hGcmVxdWVuY3kuZGlzcG9zZSgpLHRoaXMuaGlnaEZyZXF1ZW5jeT1udWxsLHRoaXMuUS5kaXNwb3NlKCksdGhpcy5RPW51bGwsdGhpc30sdC5NdWx0aWJhbmRTcGxpdH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuRVEzPWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1wibG93XCIsXCJtaWRcIixcImhpZ2hcIl0sdC5FUTMpO3QuQXVkaW9Ob2RlLmNhbGwodGhpcyksdGhpcy5vdXRwdXQ9bmV3IHQuR2Fpbix0aGlzLl9tdWx0aWJhbmRTcGxpdD10aGlzLmlucHV0PW5ldyB0Lk11bHRpYmFuZFNwbGl0KHtsb3dGcmVxdWVuY3k6ZS5sb3dGcmVxdWVuY3ksaGlnaEZyZXF1ZW5jeTplLmhpZ2hGcmVxdWVuY3l9KSx0aGlzLl9sb3dHYWluPW5ldyB0LkdhaW4oZS5sb3csdC5UeXBlLkRlY2liZWxzKSx0aGlzLl9taWRHYWluPW5ldyB0LkdhaW4oZS5taWQsdC5UeXBlLkRlY2liZWxzKSx0aGlzLl9oaWdoR2Fpbj1uZXcgdC5HYWluKGUuaGlnaCx0LlR5cGUuRGVjaWJlbHMpLHRoaXMubG93PXRoaXMuX2xvd0dhaW4uZ2Fpbix0aGlzLm1pZD10aGlzLl9taWRHYWluLmdhaW4sdGhpcy5oaWdoPXRoaXMuX2hpZ2hHYWluLmdhaW4sdGhpcy5RPXRoaXMuX211bHRpYmFuZFNwbGl0LlEsdGhpcy5sb3dGcmVxdWVuY3k9dGhpcy5fbXVsdGliYW5kU3BsaXQubG93RnJlcXVlbmN5LHRoaXMuaGlnaEZyZXF1ZW5jeT10aGlzLl9tdWx0aWJhbmRTcGxpdC5oaWdoRnJlcXVlbmN5LHRoaXMuX211bHRpYmFuZFNwbGl0Lmxvdy5jaGFpbih0aGlzLl9sb3dHYWluLHRoaXMub3V0cHV0KSx0aGlzLl9tdWx0aWJhbmRTcGxpdC5taWQuY2hhaW4odGhpcy5fbWlkR2Fpbix0aGlzLm91dHB1dCksdGhpcy5fbXVsdGliYW5kU3BsaXQuaGlnaC5jaGFpbih0aGlzLl9oaWdoR2Fpbix0aGlzLm91dHB1dCksdGhpcy5fcmVhZE9ubHkoW1wibG93XCIsXCJtaWRcIixcImhpZ2hcIixcImxvd0ZyZXF1ZW5jeVwiLFwiaGlnaEZyZXF1ZW5jeVwiXSl9LHQuZXh0ZW5kKHQuRVEzLHQuQXVkaW9Ob2RlKSx0LkVRMy5kZWZhdWx0cz17bG93OjAsbWlkOjAsaGlnaDowLGxvd0ZyZXF1ZW5jeTo0MDAsaGlnaEZyZXF1ZW5jeToyNTAwfSx0LkVRMy5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcImxvd1wiLFwibWlkXCIsXCJoaWdoXCIsXCJsb3dGcmVxdWVuY3lcIixcImhpZ2hGcmVxdWVuY3lcIl0pLHRoaXMuX211bHRpYmFuZFNwbGl0LmRpc3Bvc2UoKSx0aGlzLl9tdWx0aWJhbmRTcGxpdD1udWxsLHRoaXMubG93RnJlcXVlbmN5PW51bGwsdGhpcy5oaWdoRnJlcXVlbmN5PW51bGwsdGhpcy5fbG93R2Fpbi5kaXNwb3NlKCksdGhpcy5fbG93R2Fpbj1udWxsLHRoaXMuX21pZEdhaW4uZGlzcG9zZSgpLHRoaXMuX21pZEdhaW49bnVsbCx0aGlzLl9oaWdoR2Fpbi5kaXNwb3NlKCksdGhpcy5faGlnaEdhaW49bnVsbCx0aGlzLmxvdz1udWxsLHRoaXMubWlkPW51bGwsdGhpcy5oaWdoPW51bGwsdGhpcy5RPW51bGwsdGhpc30sdC5FUTN9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlNjYWxlPWZ1bmN0aW9uKGUsaSl7dC5TaWduYWxCYXNlLmNhbGwodGhpcyksdGhpcy5fb3V0cHV0TWluPXQuZGVmYXVsdEFyZyhlLDApLHRoaXMuX291dHB1dE1heD10LmRlZmF1bHRBcmcoaSwxKSx0aGlzLl9zY2FsZT10aGlzLmlucHV0PW5ldyB0Lk11bHRpcGx5KDEpLHRoaXMuX2FkZD10aGlzLm91dHB1dD1uZXcgdC5BZGQoMCksdGhpcy5fc2NhbGUuY29ubmVjdCh0aGlzLl9hZGQpLHRoaXMuX3NldFJhbmdlKCl9LHQuZXh0ZW5kKHQuU2NhbGUsdC5TaWduYWxCYXNlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5TY2FsZS5wcm90b3R5cGUsXCJtaW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX291dHB1dE1pbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX291dHB1dE1pbj10LHRoaXMuX3NldFJhbmdlKCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuU2NhbGUucHJvdG90eXBlLFwibWF4XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vdXRwdXRNYXh9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vdXRwdXRNYXg9dCx0aGlzLl9zZXRSYW5nZSgpfX0pLHQuU2NhbGUucHJvdG90eXBlLl9zZXRSYW5nZT1mdW5jdGlvbigpe3RoaXMuX2FkZC52YWx1ZT10aGlzLl9vdXRwdXRNaW4sdGhpcy5fc2NhbGUudmFsdWU9dGhpcy5fb3V0cHV0TWF4LXRoaXMuX291dHB1dE1pbn0sdC5TY2FsZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LlNpZ25hbEJhc2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9hZGQuZGlzcG9zZSgpLHRoaXMuX2FkZD1udWxsLHRoaXMuX3NjYWxlLmRpc3Bvc2UoKSx0aGlzLl9zY2FsZT1udWxsLHRoaXN9LHQuU2NhbGV9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlNjYWxlRXhwPWZ1bmN0aW9uKGUsaSxuKXt0LlNpZ25hbEJhc2UuY2FsbCh0aGlzKSx0aGlzLl9zY2FsZT10aGlzLm91dHB1dD1uZXcgdC5TY2FsZShlLGkpLHRoaXMuX2V4cD10aGlzLmlucHV0PW5ldyB0LlBvdyh0LmRlZmF1bHRBcmcobiwyKSksdGhpcy5fZXhwLmNvbm5lY3QodGhpcy5fc2NhbGUpfSx0LmV4dGVuZCh0LlNjYWxlRXhwLHQuU2lnbmFsQmFzZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuU2NhbGVFeHAucHJvdG90eXBlLFwiZXhwb25lbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V4cC52YWx1ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2V4cC52YWx1ZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlNjYWxlRXhwLnByb3RvdHlwZSxcIm1pblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2NhbGUubWlufSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc2NhbGUubWluPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuU2NhbGVFeHAucHJvdG90eXBlLFwibWF4XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY2FsZS5tYXh9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zY2FsZS5tYXg9dH19KSxcbnQuU2NhbGVFeHAucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5TaWduYWxCYXNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fc2NhbGUuZGlzcG9zZSgpLHRoaXMuX3NjYWxlPW51bGwsdGhpcy5fZXhwLmRpc3Bvc2UoKSx0aGlzLl9leHA9bnVsbCx0aGlzfSx0LlNjYWxlRXhwfSksdChmdW5jdGlvbih0KXtyZXR1cm4gd2luZG93LkRlbGF5Tm9kZSYmIUF1ZGlvQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlRGVsYXkmJihBdWRpb0NvbnRleHQucHJvdG90eXBlLmNyZWF0ZURlbGF5PUF1ZGlvQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlRGVsYXlOb2RlKSx0LkRlbGF5PWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiZGVsYXlUaW1lXCIsXCJtYXhEZWxheVwiXSx0LkRlbGF5KTt0LkF1ZGlvTm9kZS5jYWxsKHRoaXMpLHRoaXMuX2RlbGF5Tm9kZT10aGlzLmlucHV0PXRoaXMub3V0cHV0PXRoaXMuY29udGV4dC5jcmVhdGVEZWxheSh0aGlzLnRvU2Vjb25kcyhlLm1heERlbGF5KSksdGhpcy5kZWxheVRpbWU9bmV3IHQuUGFyYW0oe3BhcmFtOnRoaXMuX2RlbGF5Tm9kZS5kZWxheVRpbWUsdW5pdHM6dC5UeXBlLlRpbWUsdmFsdWU6ZS5kZWxheVRpbWV9KSx0aGlzLl9yZWFkT25seShcImRlbGF5VGltZVwiKX0sdC5leHRlbmQodC5EZWxheSx0LkF1ZGlvTm9kZSksdC5EZWxheS5kZWZhdWx0cz17bWF4RGVsYXk6MSxkZWxheVRpbWU6MH0sdC5EZWxheS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2RlbGF5Tm9kZS5kaXNjb25uZWN0KCksdGhpcy5fZGVsYXlOb2RlPW51bGwsdGhpcy5fd3JpdGFibGUoXCJkZWxheVRpbWVcIiksdGhpcy5kZWxheVRpbWU9bnVsbCx0aGlzfSx0LkRlbGF5fSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5GZWVkYmFja0NvbWJGaWx0ZXI9ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJkZWxheVRpbWVcIixcInJlc29uYW5jZVwiXSx0LkZlZWRiYWNrQ29tYkZpbHRlcik7dC5BdWRpb05vZGUuY2FsbCh0aGlzKSx0aGlzLl9kZWxheT10aGlzLmlucHV0PXRoaXMub3V0cHV0PW5ldyB0LkRlbGF5KGUuZGVsYXlUaW1lKSx0aGlzLmRlbGF5VGltZT10aGlzLl9kZWxheS5kZWxheVRpbWUsdGhpcy5fZmVlZGJhY2s9bmV3IHQuR2FpbihlLnJlc29uYW5jZSx0LlR5cGUuTm9ybWFsUmFuZ2UpLHRoaXMucmVzb25hbmNlPXRoaXMuX2ZlZWRiYWNrLmdhaW4sdGhpcy5fZGVsYXkuY2hhaW4odGhpcy5fZmVlZGJhY2ssdGhpcy5fZGVsYXkpLHRoaXMuX3JlYWRPbmx5KFtcInJlc29uYW5jZVwiLFwiZGVsYXlUaW1lXCJdKX0sdC5leHRlbmQodC5GZWVkYmFja0NvbWJGaWx0ZXIsdC5BdWRpb05vZGUpLHQuRmVlZGJhY2tDb21iRmlsdGVyLmRlZmF1bHRzPXtkZWxheVRpbWU6LjEscmVzb25hbmNlOi41fSx0LkZlZWRiYWNrQ29tYkZpbHRlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcInJlc29uYW5jZVwiLFwiZGVsYXlUaW1lXCJdKSx0aGlzLl9kZWxheS5kaXNwb3NlKCksdGhpcy5fZGVsYXk9bnVsbCx0aGlzLmRlbGF5VGltZT1udWxsLHRoaXMuX2ZlZWRiYWNrLmRpc3Bvc2UoKSx0aGlzLl9mZWVkYmFjaz1udWxsLHRoaXMucmVzb25hbmNlPW51bGwsdGhpc30sdC5GZWVkYmFja0NvbWJGaWx0ZXJ9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkZGVD1mdW5jdGlvbigpe3ZhciBlPXQuZGVmYXVsdHMoYXJndW1lbnRzLFtcInNpemVcIl0sdC5GRlQpO2UudHlwZT10LkFuYWx5c2VyLlR5cGUuRkZULHQuQXVkaW9Ob2RlLmNhbGwodGhpcyksdGhpcy5fYW5hbHlzZXI9dGhpcy5pbnB1dD10aGlzLm91dHB1dD1uZXcgdC5BbmFseXNlcihlKX0sdC5leHRlbmQodC5GRlQsdC5BdWRpb05vZGUpLHQuRkZULmRlZmF1bHRzPXtzaXplOjEwMjR9LHQuRkZULnByb3RvdHlwZS5nZXRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbmFseXNlci5nZXRWYWx1ZSgpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5GRlQucHJvdG90eXBlLFwic2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYW5hbHlzZXIuc2l6ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2FuYWx5c2VyLnNpemU9dH19KSx0LkZGVC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3QuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fYW5hbHlzZXIuZGlzcG9zZSgpLHRoaXMuX2FuYWx5c2VyPW51bGx9LHQuRkZUfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5Gb2xsb3dlcj1mdW5jdGlvbigpe3ZhciBlPXQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImF0dGFja1wiLFwicmVsZWFzZVwiXSx0LkZvbGxvd2VyKTt0LkF1ZGlvTm9kZS5jYWxsKHRoaXMpLHRoaXMuY3JlYXRlSW5zT3V0cygxLDEpLHRoaXMuX2Ficz1uZXcgdC5BYnMsdGhpcy5fZmlsdGVyPXRoaXMuY29udGV4dC5jcmVhdGVCaXF1YWRGaWx0ZXIoKSx0aGlzLl9maWx0ZXIudHlwZT1cImxvd3Bhc3NcIix0aGlzLl9maWx0ZXIuZnJlcXVlbmN5LnZhbHVlPTAsdGhpcy5fZmlsdGVyLlEudmFsdWU9LTEwMCx0aGlzLl9mcmVxdWVuY3lWYWx1ZXM9bmV3IHQuV2F2ZVNoYXBlcix0aGlzLl9zdWI9bmV3IHQuU3VidHJhY3QsdGhpcy5fZGVsYXk9bmV3IHQuRGVsYXkodGhpcy5ibG9ja1RpbWUpLHRoaXMuX211bHQ9bmV3IHQuTXVsdGlwbHkoMWU0KSx0aGlzLl9hdHRhY2s9ZS5hdHRhY2ssdGhpcy5fcmVsZWFzZT1lLnJlbGVhc2UsdGhpcy5pbnB1dC5jaGFpbih0aGlzLl9hYnMsdGhpcy5fZmlsdGVyLHRoaXMub3V0cHV0KSx0aGlzLl9hYnMuY29ubmVjdCh0aGlzLl9zdWIsMCwxKSx0aGlzLl9maWx0ZXIuY2hhaW4odGhpcy5fZGVsYXksdGhpcy5fc3ViKSx0aGlzLl9zdWIuY2hhaW4odGhpcy5fbXVsdCx0aGlzLl9mcmVxdWVuY3lWYWx1ZXMsdGhpcy5fZmlsdGVyLmZyZXF1ZW5jeSksdGhpcy5fc2V0QXR0YWNrUmVsZWFzZSh0aGlzLl9hdHRhY2ssdGhpcy5fcmVsZWFzZSl9LHQuZXh0ZW5kKHQuRm9sbG93ZXIsdC5BdWRpb05vZGUpLHQuRm9sbG93ZXIuZGVmYXVsdHM9e2F0dGFjazouMDUscmVsZWFzZTouNX0sdC5Gb2xsb3dlci5wcm90b3R5cGUuX3NldEF0dGFja1JlbGVhc2U9ZnVuY3Rpb24oZSxpKXt2YXIgbj10aGlzLmJsb2NrVGltZTtlPXQuVGltZShlKS50b0ZyZXF1ZW5jeSgpLGk9dC5UaW1lKGkpLnRvRnJlcXVlbmN5KCksZT1NYXRoLm1heChlLG4pLGk9TWF0aC5tYXgoaSxuKSx0aGlzLl9mcmVxdWVuY3lWYWx1ZXMuc2V0TWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0PD0wP2U6aX0pfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Gb2xsb3dlci5wcm90b3R5cGUsXCJhdHRhY2tcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2F0dGFja30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2F0dGFjaz10LHRoaXMuX3NldEF0dGFja1JlbGVhc2UodGhpcy5fYXR0YWNrLHRoaXMuX3JlbGVhc2UpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkZvbGxvd2VyLnByb3RvdHlwZSxcInJlbGVhc2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbGVhc2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9yZWxlYXNlPXQsdGhpcy5fc2V0QXR0YWNrUmVsZWFzZSh0aGlzLl9hdHRhY2ssdGhpcy5fcmVsZWFzZSl9fSksdC5Gb2xsb3dlci5wcm90b3R5cGUuY29ubmVjdD10LlNpZ25hbC5wcm90b3R5cGUuY29ubmVjdCx0LkZvbGxvd2VyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZmlsdGVyLmRpc2Nvbm5lY3QoKSx0aGlzLl9maWx0ZXI9bnVsbCx0aGlzLl9mcmVxdWVuY3lWYWx1ZXMuZGlzY29ubmVjdCgpLHRoaXMuX2ZyZXF1ZW5jeVZhbHVlcz1udWxsLHRoaXMuX2RlbGF5LmRpc3Bvc2UoKSx0aGlzLl9kZWxheT1udWxsLHRoaXMuX3N1Yi5kaXNjb25uZWN0KCksdGhpcy5fc3ViPW51bGwsdGhpcy5fYWJzLmRpc3Bvc2UoKSx0aGlzLl9hYnM9bnVsbCx0aGlzLl9tdWx0LmRpc3Bvc2UoKSx0aGlzLl9tdWx0PW51bGwsdGhpcy5fY3VydmU9bnVsbCx0aGlzfSx0LkZvbGxvd2VyfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5TY2FsZWRFbnZlbG9wZT1mdW5jdGlvbigpe3ZhciBlPXQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImF0dGFja1wiLFwiZGVjYXlcIixcInN1c3RhaW5cIixcInJlbGVhc2VcIl0sdC5FbnZlbG9wZSk7dC5FbnZlbG9wZS5jYWxsKHRoaXMsZSksZT10LmRlZmF1bHRBcmcoZSx0LlNjYWxlZEVudmVsb3BlLmRlZmF1bHRzKSx0aGlzLl9leHA9dGhpcy5vdXRwdXQ9bmV3IHQuUG93KGUuZXhwb25lbnQpLHRoaXMuX3NjYWxlPXRoaXMub3V0cHV0PW5ldyB0LlNjYWxlKGUubWluLGUubWF4KSx0aGlzLl9zaWcuY2hhaW4odGhpcy5fZXhwLHRoaXMuX3NjYWxlKX0sdC5leHRlbmQodC5TY2FsZWRFbnZlbG9wZSx0LkVudmVsb3BlKSx0LlNjYWxlZEVudmVsb3BlLmRlZmF1bHRzPXttaW46MCxtYXg6MSxleHBvbmVudDoxfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5TY2FsZWRFbnZlbG9wZS5wcm90b3R5cGUsXCJtaW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjYWxlLm1pbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NjYWxlLm1pbj10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlNjYWxlZEVudmVsb3BlLnByb3RvdHlwZSxcIm1heFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2NhbGUubWF4fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc2NhbGUubWF4PXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuU2NhbGVkRW52ZWxvcGUucHJvdG90eXBlLFwiZXhwb25lbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V4cC52YWx1ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2V4cC52YWx1ZT10fX0pLHQuU2NhbGVkRW52ZWxvcGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5FbnZlbG9wZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3NjYWxlLmRpc3Bvc2UoKSx0aGlzLl9zY2FsZT1udWxsLHRoaXMuX2V4cC5kaXNwb3NlKCksdGhpcy5fZXhwPW51bGwsdGhpc30sdC5TY2FsZWRFbnZlbG9wZX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuRnJlcXVlbmN5RW52ZWxvcGU9ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJhdHRhY2tcIixcImRlY2F5XCIsXCJzdXN0YWluXCIsXCJyZWxlYXNlXCJdLHQuRW52ZWxvcGUpO3QuU2NhbGVkRW52ZWxvcGUuY2FsbCh0aGlzLGUpLGU9dC5kZWZhdWx0QXJnKGUsdC5GcmVxdWVuY3lFbnZlbG9wZS5kZWZhdWx0cyksdGhpcy5fb2N0YXZlcz1lLm9jdGF2ZXMsdGhpcy5iYXNlRnJlcXVlbmN5PWUuYmFzZUZyZXF1ZW5jeSx0aGlzLm9jdGF2ZXM9ZS5vY3RhdmVzfSx0LmV4dGVuZCh0LkZyZXF1ZW5jeUVudmVsb3BlLHQuRW52ZWxvcGUpLHQuRnJlcXVlbmN5RW52ZWxvcGUuZGVmYXVsdHM9e2Jhc2VGcmVxdWVuY3k6MjAwLG9jdGF2ZXM6NCxleHBvbmVudDoyfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5GcmVxdWVuY3lFbnZlbG9wZS5wcm90b3R5cGUsXCJiYXNlRnJlcXVlbmN5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY2FsZS5taW59LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zY2FsZS5taW49dGhpcy50b0ZyZXF1ZW5jeSh0KSx0aGlzLm9jdGF2ZXM9dGhpcy5fb2N0YXZlc319KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5GcmVxdWVuY3lFbnZlbG9wZS5wcm90b3R5cGUsXCJvY3RhdmVzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vY3RhdmVzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb2N0YXZlcz10LHRoaXMuX3NjYWxlLm1heD10aGlzLmJhc2VGcmVxdWVuY3kqTWF0aC5wb3coMix0KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5GcmVxdWVuY3lFbnZlbG9wZS5wcm90b3R5cGUsXCJleHBvbmVudFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXhwLnZhbHVlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZXhwLnZhbHVlPXR9fSksdC5GcmVxdWVuY3lFbnZlbG9wZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LlNjYWxlZEVudmVsb3BlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpc30sdC5GcmVxdWVuY3lFbnZlbG9wZX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuR2F0ZT1mdW5jdGlvbigpe3ZhciBlPXQuZGVmYXVsdHMoYXJndW1lbnRzLFtcInRocmVzaG9sZFwiLFwiYXR0YWNrXCIsXCJyZWxlYXNlXCJdLHQuR2F0ZSk7dC5BdWRpb05vZGUuY2FsbCh0aGlzKSx0aGlzLmNyZWF0ZUluc091dHMoMSwxKSx0aGlzLl9mb2xsb3dlcj1uZXcgdC5Gb2xsb3dlcihlLmF0dGFjayxlLnJlbGVhc2UpLHRoaXMuX2d0PW5ldyB0LkdyZWF0ZXJUaGFuKHQuZGJUb0dhaW4oZS50aHJlc2hvbGQpKSx0aGlzLmlucHV0LmNvbm5lY3QodGhpcy5vdXRwdXQpLHRoaXMuaW5wdXQuY2hhaW4odGhpcy5fZ3QsdGhpcy5fZm9sbG93ZXIsdGhpcy5vdXRwdXQuZ2Fpbil9LHQuZXh0ZW5kKHQuR2F0ZSx0LkF1ZGlvTm9kZSksdC5HYXRlLmRlZmF1bHRzPXthdHRhY2s6LjEscmVsZWFzZTouMSx0aHJlc2hvbGQ6LTQwfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5HYXRlLnByb3RvdHlwZSxcInRocmVzaG9sZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5nYWluVG9EYih0aGlzLl9ndC52YWx1ZSl9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9ndC52YWx1ZT10LmRiVG9HYWluKGUpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkdhdGUucHJvdG90eXBlLFwiYXR0YWNrXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb2xsb3dlci5hdHRhY2t9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9mb2xsb3dlci5hdHRhY2s9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5HYXRlLnByb3RvdHlwZSxcInJlbGVhc2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZvbGxvd2VyLnJlbGVhc2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9mb2xsb3dlci5yZWxlYXNlPXR9fSksdC5HYXRlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZm9sbG93ZXIuZGlzcG9zZSgpLHRoaXMuX2d0LmRpc3Bvc2UoKSx0aGlzLl9mb2xsb3dlcj1udWxsLHRoaXMuX2d0PW51bGwsdGhpc30sdC5HYXRlfSksdChmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3JldHVybiBmdW5jdGlvbihlLGkpe3ZhciBuLHMsbztyZXR1cm4gaT10aGlzLnRvU2Vjb25kcyhpKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSxuPXRoaXMuX2V2ZW50cy5nZXQoaSkscz10aGlzLl9ldmVudHMucHJldmlvdXNFdmVudChuKSxvPXRoaXMuX2dldFRpY2tVbnRpbEV2ZW50KHMsaS10aGlzLnNhbXBsZVRpbWUpLG4udGlja3M9TWF0aC5tYXgobywwKSx0aGlzfX1yZXR1cm4gdC5UaWNrU2lnbmFsPWZ1bmN0aW9uKGUpe2U9dC5kZWZhdWx0QXJnKGUsMSksdC5UaW1lbGluZVNpZ25hbC5jYWxsKHRoaXMse3VuaXRzOnQuVHlwZS5UaWNrcyx2YWx1ZTplfSksdGhpcy5fZXZlbnRzLm1lbW9yeT0xLzB9LHQuZXh0ZW5kKHQuVGlja1NpZ25hbCx0LlRpbWVsaW5lU2lnbmFsKSx0LlRpY2tTaWduYWwucHJvdG90eXBlLnNldFZhbHVlQXRUaW1lPWUodC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuc2V0VmFsdWVBdFRpbWUpLHQuVGlja1NpZ25hbC5wcm90b3R5cGUubGluZWFyUmFtcFRvVmFsdWVBdFRpbWU9ZSh0LlRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSksdC5UaWNrU2lnbmFsLnByb3RvdHlwZS5zZXRUYXJnZXRBdFRpbWU9ZnVuY3Rpb24odCxlLGkpe3ZhciBuLHMsbyxyLGE7Zm9yKGU9dGhpcy50b1NlY29uZHMoZSksdGhpcy5zZXRSYW1wUG9pbnQoZSksdD10aGlzLl9mcm9tVW5pdHModCksbj10aGlzLl9ldmVudHMuZ2V0KGUpLHM9NSxvPTA7bzw9cztvKyspcj1pKm8rZSxhPXRoaXMuX2V4cG9uZW50aWFsQXBwcm9hY2gobi50aW1lLG4udmFsdWUsdCxpLHIpLHRoaXMubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodGhpcy5fdG9Vbml0cyhhKSxyKTtyZXR1cm4gdGhpc30sdC5UaWNrU2lnbmFsLnByb3RvdHlwZS5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lPWZ1bmN0aW9uKHQsZSl7dmFyIGksbixzLG8scixhO2ZvcihlPXRoaXMudG9TZWNvbmRzKGUpLHQ9dGhpcy5fZnJvbVVuaXRzKHQpLGk9dGhpcy5fZXZlbnRzLmdldChlKSxudWxsPT09aSYmKGk9e3ZhbHVlOnRoaXMuX2luaXRpYWwsdGltZTowfSksbj01LHM9KGUtaS50aW1lKS9uLG89MDtvPD1uO28rKylyPXMqbytpLnRpbWUsYT10aGlzLl9leHBvbmVudGlhbEludGVycG9sYXRlKGkudGltZSxpLnZhbHVlLGUsdCxyKSx0aGlzLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKHRoaXMuX3RvVW5pdHMoYSkscik7cmV0dXJuIHRoaXN9LHQuVGlja1NpZ25hbC5wcm90b3R5cGUuX2dldFRpY2tVbnRpbEV2ZW50PWZ1bmN0aW9uKHQsZSl7dmFyIGksbjtyZXR1cm4gbnVsbD09PXQmJih0PXt0aWNrczowLHRpbWU6MH0pLGk9dGhpcy5nZXRWYWx1ZUF0VGltZSh0LnRpbWUpLG49dGhpcy5nZXRWYWx1ZUF0VGltZShlKSwuNSooZS10LnRpbWUpKihpK24pK3QudGlja3N9LHQuVGlja1NpZ25hbC5wcm90b3R5cGUuZ2V0VGlja0F0VGltZT1mdW5jdGlvbih0KXt0PXRoaXMudG9TZWNvbmRzKHQpO3ZhciBlPXRoaXMuX2V2ZW50cy5nZXQodCk7cmV0dXJuIHRoaXMuX2dldFRpY2tVbnRpbEV2ZW50KGUsdCl9LHQuVGlja1NpZ25hbC5wcm90b3R5cGUuZ2V0RHVyYXRpb25PZlRpY2tzPWZ1bmN0aW9uKHQsZSl7ZT10aGlzLnRvU2Vjb25kcyhlKTt2YXIgaT10aGlzLmdldFRpY2tBdFRpbWUoZSk7cmV0dXJuIHRoaXMuZ2V0VGltZU9mVGljayhpK3QpLWV9LHQuVGlja1NpZ25hbC5wcm90b3R5cGUuZ2V0VGltZU9mVGljaz1mdW5jdGlvbihlKXt2YXIgaSxuLHMsbyxyLGEsbD10aGlzLl9ldmVudHMuZ2V0KGUsXCJ0aWNrc1wiKSxoPXRoaXMuX2V2ZW50cy5nZXRBZnRlcihlLFwidGlja3NcIik7cmV0dXJuIGwmJmwudGlja3M9PT1lP2wudGltZTpsJiZoJiZoLnR5cGU9PT10LlRpbWVsaW5lU2lnbmFsLlR5cGUuTGluZWFyJiZsLnZhbHVlIT09aC52YWx1ZT8oaT10aGlzLmdldFZhbHVlQXRUaW1lKGwudGltZSksbj10aGlzLmdldFZhbHVlQXRUaW1lKGgudGltZSkscz0obi1pKS8oaC50aW1lLWwudGltZSksbz1NYXRoLnNxcnQoTWF0aC5wb3coaSwyKS0yKnMqKGwudGlja3MtZSkpLHI9KC1pK28pL3MsYT0oLWktbykvcywocj4wP3I6YSkrbC50aW1lKTpsPzA9PT1sLnZhbHVlPzEvMDpsLnRpbWUrKGUtbC50aWNrcykvbC52YWx1ZTplL3RoaXMuX2luaXRpYWx9LHQuVGlja1NpZ25hbH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuVGltZWxpbmVTdGF0ZT1mdW5jdGlvbihlKXt0LlRpbWVsaW5lLmNhbGwodGhpcyksdGhpcy5faW5pdGlhbD1lfSx0LmV4dGVuZCh0LlRpbWVsaW5lU3RhdGUsdC5UaW1lbGluZSksdC5UaW1lbGluZVN0YXRlLnByb3RvdHlwZS5nZXRWYWx1ZUF0VGltZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldCh0KTtyZXR1cm4gbnVsbCE9PWU/ZS5zdGF0ZTp0aGlzLl9pbml0aWFsfSx0LlRpbWVsaW5lU3RhdGUucHJvdG90eXBlLnNldFN0YXRlQXRUaW1lPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYWRkKHtzdGF0ZTp0LHRpbWU6ZX0pLHRoaXN9LHQuVGltZWxpbmVTdGF0ZX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuQ2xvY2s9ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJjYWxsYmFja1wiLFwiZnJlcXVlbmN5XCJdLHQuQ2xvY2spO3QuRW1pdHRlci5jYWxsKHRoaXMpLHRoaXMuY2FsbGJhY2s9ZS5jYWxsYmFjayx0aGlzLl9uZXh0VGljaz0wLHRoaXMuX2xhc3RTdGF0ZT10LlN0YXRlLlN0b3BwZWQsdGhpcy5mcmVxdWVuY3k9bmV3IHQuVGlja1NpZ25hbChlLmZyZXF1ZW5jeSx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLl9yZWFkT25seShcImZyZXF1ZW5jeVwiKSx0aGlzLnRpY2tzPTAsdGhpcy5fc3RhdGU9bmV3IHQuVGltZWxpbmVTdGF0ZSh0LlN0YXRlLlN0b3BwZWQpLHRoaXMuX2JvdW5kTG9vcD10aGlzLl9sb29wLmJpbmQodGhpcyksdGhpcy5jb250ZXh0Lm9uKFwidGlja1wiLHRoaXMuX2JvdW5kTG9vcCl9LHQuZXh0ZW5kKHQuQ2xvY2ssdC5FbWl0dGVyKSx0LkNsb2NrLmRlZmF1bHRzPXtjYWxsYmFjazp0Lm5vT3AsZnJlcXVlbmN5OjF9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkNsb2NrLnByb3RvdHlwZSxcInN0YXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0ZS5nZXRWYWx1ZUF0VGltZSh0aGlzLm5vdygpKX19KSx0LkNsb2NrLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbihlLGkpe3JldHVybiBlPXRoaXMudG9TZWNvbmRzKGUpLHRoaXMuX3N0YXRlLmdldFZhbHVlQXRUaW1lKGUpIT09dC5TdGF0ZS5TdGFydGVkJiYodGhpcy5fc3RhdGUuc2V0U3RhdGVBdFRpbWUodC5TdGF0ZS5TdGFydGVkLGUpLHRoaXMuX3N0YXRlLmdldChlKS5vZmZzZXQ9aSksdGhpc30sdC5DbG9jay5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbihlKXtyZXR1cm4gZT10aGlzLnRvU2Vjb25kcyhlKSx0aGlzLl9zdGF0ZS5jYW5jZWwoZSksdGhpcy5fc3RhdGUuc2V0U3RhdGVBdFRpbWUodC5TdGF0ZS5TdG9wcGVkLGUpLHRoaXN9LHQuQ2xvY2sucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKGUpe3JldHVybiBlPXRoaXMudG9TZWNvbmRzKGUpLHRoaXMuX3N0YXRlLmdldFZhbHVlQXRUaW1lKGUpPT09dC5TdGF0ZS5TdGFydGVkJiZ0aGlzLl9zdGF0ZS5zZXRTdGF0ZUF0VGltZSh0LlN0YXRlLlBhdXNlZCxlKSx0aGlzfSx0LkNsb2NrLnByb3RvdHlwZS5fbG9vcD1mdW5jdGlvbigpe3ZhciBlLGk9dGhpcy5ub3coKSt0aGlzLmNvbnRleHQudXBkYXRlSW50ZXJ2YWwsbj10aGlzLl9zdGF0ZS5nZXQoaSk7aWYobil7aWYobi5zdGF0ZSE9PXRoaXMuX2xhc3RTdGF0ZSlzd2l0Y2godGhpcy5fbGFzdFN0YXRlPW4uc3RhdGUsbi5zdGF0ZSl7Y2FzZSB0LlN0YXRlLlN0YXJ0ZWQ6dC5pc1VuZGVmKG4ub2Zmc2V0KXx8KHRoaXMudGlja3M9bi5vZmZzZXQpLHRoaXMuX25leHRUaWNrPW4udGltZSx0aGlzLmVtaXQoXCJzdGFydFwiLG4udGltZSx0aGlzLnRpY2tzKTticmVhaztjYXNlIHQuU3RhdGUuU3RvcHBlZDp0aGlzLnRpY2tzPTAsdGhpcy5lbWl0KFwic3RvcFwiLG4udGltZSk7YnJlYWs7Y2FzZSB0LlN0YXRlLlBhdXNlZDp0aGlzLmVtaXQoXCJwYXVzZVwiLG4udGltZSl9Zm9yKDtpPnRoaXMuX25leHRUaWNrJiZ0aGlzLl9zdGF0ZTspaWYoZT10aGlzLl9uZXh0VGljayx0aGlzLmZyZXF1ZW5jeSYmKHRoaXMuX25leHRUaWNrKz10aGlzLmZyZXF1ZW5jeS5nZXREdXJhdGlvbk9mVGlja3MoMSx0aGlzLl9uZXh0VGljayksbi5zdGF0ZT09PXQuU3RhdGUuU3RhcnRlZCkpdHJ5e3RoaXMuY2FsbGJhY2soZSksdGhpcy50aWNrcysrfWNhdGNoKHQpe3Rocm93IHRoaXMudGlja3MrKyx0fX19LHQuQ2xvY2sucHJvdG90eXBlLmdldFN0YXRlQXRUaW1lPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX3N0YXRlLmdldFZhbHVlQXRUaW1lKHQpfSx0LkNsb2NrLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5FbWl0dGVyLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5jb250ZXh0Lm9mZihcInRpY2tcIix0aGlzLl9ib3VuZExvb3ApLHRoaXMuX3dyaXRhYmxlKFwiZnJlcXVlbmN5XCIpLHRoaXMuZnJlcXVlbmN5LmRpc3Bvc2UoKSx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuX2JvdW5kTG9vcD1udWxsLHRoaXMuX25leHRUaWNrPTEvMCx0aGlzLmNhbGxiYWNrPW51bGwsdGhpcy5fc3RhdGUuZGlzcG9zZSgpLHRoaXMuX3N0YXRlPW51bGx9LHQuQ2xvY2t9KSx0KGZ1bmN0aW9uKHQpe3QuSW50ZXJ2YWxUaW1lbGluZT1mdW5jdGlvbigpe3QuY2FsbCh0aGlzKSx0aGlzLl9yb290PW51bGwsdGhpcy5fbGVuZ3RoPTB9LHQuZXh0ZW5kKHQuSW50ZXJ2YWxUaW1lbGluZSksdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oaSl7aWYodC5pc1VuZGVmKGkudGltZSl8fHQuaXNVbmRlZihpLmR1cmF0aW9uKSl0aHJvdyBuZXcgRXJyb3IoXCJUb25lLkludGVydmFsVGltZWxpbmU6IGV2ZW50cyBtdXN0IGhhdmUgdGltZSBhbmQgZHVyYXRpb24gcGFyYW1ldGVyc1wiKTt2YXIgbj1uZXcgZShpLnRpbWUsaS50aW1lK2kuZHVyYXRpb24saSk7Zm9yKG51bGw9PT10aGlzLl9yb290P3RoaXMuX3Jvb3Q9bjp0aGlzLl9yb290Lmluc2VydChuKSx0aGlzLl9sZW5ndGgrKztudWxsIT09bjspbi51cGRhdGVIZWlnaHQoKSxuLnVwZGF0ZU1heCgpLHRoaXMuX3JlYmFsYW5jZShuKSxuPW4ucGFyZW50O3JldHVybiB0aGlzfSx0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXt2YXIgZSxpLG47aWYobnVsbCE9PXRoaXMuX3Jvb3QpZm9yKGU9W10sdGhpcy5fcm9vdC5zZWFyY2godC50aW1lLGUpLGk9MDtpPGUubGVuZ3RoO2krKylpZihuPWVbaV0sbi5ldmVudD09PXQpe3RoaXMuX3JlbW92ZU5vZGUobiksdGhpcy5fbGVuZ3RoLS07YnJlYWt9cmV0dXJuIHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLFwibGVuZ3RoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZW5ndGh9fSksdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZm9yRWFjaEFmdGVyKHQsZnVuY3Rpb24odCl7dGhpcy5yZW1vdmUodCl9LmJpbmQodGhpcykpLHRoaXN9LHQuSW50ZXJ2YWxUaW1lbGluZS5wcm90b3R5cGUuX3NldFJvb3Q9ZnVuY3Rpb24odCl7dGhpcy5fcm9vdD10LG51bGwhPT10aGlzLl9yb290JiYodGhpcy5fcm9vdC5wYXJlbnQ9bnVsbCl9LHQuSW50ZXJ2YWxUaW1lbGluZS5wcm90b3R5cGUuX3JlcGxhY2VOb2RlSW5QYXJlbnQ9ZnVuY3Rpb24odCxlKXtudWxsIT09dC5wYXJlbnQ/KHQuaXNMZWZ0Q2hpbGQoKT90LnBhcmVudC5sZWZ0PWU6dC5wYXJlbnQucmlnaHQ9ZSx0aGlzLl9yZWJhbGFuY2UodC5wYXJlbnQpKTp0aGlzLl9zZXRSb290KGUpfSx0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLl9yZW1vdmVOb2RlPWZ1bmN0aW9uKHQpe3ZhciBlLGk7aWYobnVsbD09PXQubGVmdCYmbnVsbD09PXQucmlnaHQpdGhpcy5fcmVwbGFjZU5vZGVJblBhcmVudCh0LG51bGwpO2Vsc2UgaWYobnVsbD09PXQucmlnaHQpdGhpcy5fcmVwbGFjZU5vZGVJblBhcmVudCh0LHQubGVmdCk7ZWxzZSBpZihudWxsPT09dC5sZWZ0KXRoaXMuX3JlcGxhY2VOb2RlSW5QYXJlbnQodCx0LnJpZ2h0KTtlbHNle2lmKHQuZ2V0QmFsYW5jZSgpPjApaWYobnVsbD09PXQubGVmdC5yaWdodCllPXQubGVmdCxlLnJpZ2h0PXQucmlnaHQsaT1lO2Vsc2V7Zm9yKGU9dC5sZWZ0LnJpZ2h0O251bGwhPT1lLnJpZ2h0OyllPWUucmlnaHQ7ZS5wYXJlbnQucmlnaHQ9ZS5sZWZ0LGk9ZS5wYXJlbnQsZS5sZWZ0PXQubGVmdCxlLnJpZ2h0PXQucmlnaHR9ZWxzZSBpZihudWxsPT09dC5yaWdodC5sZWZ0KWU9dC5yaWdodCxlLmxlZnQ9dC5sZWZ0LGk9ZTtlbHNle2ZvcihlPXQucmlnaHQubGVmdDtudWxsIT09ZS5sZWZ0OyllPWUubGVmdDtlLnBhcmVudD1lLnBhcmVudCxlLnBhcmVudC5sZWZ0PWUucmlnaHQsaT1lLnBhcmVudCxlLmxlZnQ9dC5sZWZ0LGUucmlnaHQ9dC5yaWdodH1udWxsIT09dC5wYXJlbnQ/dC5pc0xlZnRDaGlsZCgpP3QucGFyZW50LmxlZnQ9ZTp0LnBhcmVudC5yaWdodD1lOnRoaXMuX3NldFJvb3QoZSksdGhpcy5fcmViYWxhbmNlKGkpfXQuZGlzcG9zZSgpfSx0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLl9yb3RhdGVMZWZ0PWZ1bmN0aW9uKHQpe3ZhciBlPXQucGFyZW50LGk9dC5pc0xlZnRDaGlsZCgpLG49dC5yaWdodDt0LnJpZ2h0PW4ubGVmdCxuLmxlZnQ9dCxudWxsIT09ZT9pP2UubGVmdD1uOmUucmlnaHQ9bjp0aGlzLl9zZXRSb290KG4pfSx0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLl9yb3RhdGVSaWdodD1mdW5jdGlvbih0KXt2YXIgZT10LnBhcmVudCxpPXQuaXNMZWZ0Q2hpbGQoKSxuPXQubGVmdDt0LmxlZnQ9bi5yaWdodCxuLnJpZ2h0PXQsbnVsbCE9PWU/aT9lLmxlZnQ9bjplLnJpZ2h0PW46dGhpcy5fc2V0Um9vdChuKX0sdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5fcmViYWxhbmNlPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0QmFsYW5jZSgpO2U+MT90LmxlZnQuZ2V0QmFsYW5jZSgpPDA/dGhpcy5fcm90YXRlTGVmdCh0LmxlZnQpOnRoaXMuX3JvdGF0ZVJpZ2h0KHQpOmU8LTEmJih0LnJpZ2h0LmdldEJhbGFuY2UoKT4wP3RoaXMuX3JvdGF0ZVJpZ2h0KHQucmlnaHQpOnRoaXMuX3JvdGF0ZUxlZnQodCkpfSx0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXt2YXIgZSxpLG47aWYobnVsbCE9PXRoaXMuX3Jvb3QmJihlPVtdLHRoaXMuX3Jvb3Quc2VhcmNoKHQsZSksZS5sZW5ndGg+MCkpe2ZvcihpPWVbMF0sbj0xO248ZS5sZW5ndGg7bisrKWVbbl0ubG93PmkubG93JiYoaT1lW25dKTtyZXR1cm4gaS5ldmVudH1yZXR1cm4gbnVsbH0sdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe3ZhciBlLGksbjtpZihudWxsIT09dGhpcy5fcm9vdClmb3IoZT1bXSx0aGlzLl9yb290LnRyYXZlcnNlKGZ1bmN0aW9uKHQpe2UucHVzaCh0KX0pLGk9MDtpPGUubGVuZ3RoO2krKykobj1lW2ldLmV2ZW50KSYmdChuKTtyZXR1cm4gdGhpc30sdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5mb3JFYWNoQXRUaW1lPWZ1bmN0aW9uKHQsZSl7dmFyIGksbixzO2lmKG51bGwhPT10aGlzLl9yb290KWZvcihpPVtdLHRoaXMuX3Jvb3Quc2VhcmNoKHQsaSksbj1pLmxlbmd0aC0xO24+PTA7bi0tKShzPWlbbl0uZXZlbnQpJiZlKHMpO3JldHVybiB0aGlzfSx0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLmZvckVhY2hBZnRlcj1mdW5jdGlvbih0LGUpe3ZhciBpLG4scztpZihudWxsIT09dGhpcy5fcm9vdClmb3IoaT1bXSx0aGlzLl9yb290LnNlYXJjaEFmdGVyKHQsaSksbj1pLmxlbmd0aC0xO24+PTA7bi0tKXM9aVtuXS5ldmVudCxlKHMpO3JldHVybiB0aGlzfSx0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgdCxlPVtdO2ZvcihudWxsIT09dGhpcy5fcm9vdCYmdGhpcy5fcm9vdC50cmF2ZXJzZShmdW5jdGlvbih0KXtlLnB1c2godCl9KSx0PTA7dDxlLmxlbmd0aDt0KyspZVt0XS5kaXNwb3NlKCk7cmV0dXJuIGU9bnVsbCx0aGlzLl9yb290PW51bGwsdGhpc307dmFyIGU9ZnVuY3Rpb24odCxlLGkpe3RoaXMuZXZlbnQ9aSx0aGlzLmxvdz10LHRoaXMuaGlnaD1lLHRoaXMubWF4PXRoaXMuaGlnaCx0aGlzLl9sZWZ0PW51bGwsdGhpcy5fcmlnaHQ9bnVsbCx0aGlzLnBhcmVudD1udWxsLHRoaXMuaGVpZ2h0PTB9O3JldHVybiBlLnByb3RvdHlwZS5pbnNlcnQ9ZnVuY3Rpb24odCl7dC5sb3c8PXRoaXMubG93P251bGw9PT10aGlzLmxlZnQ/dGhpcy5sZWZ0PXQ6dGhpcy5sZWZ0Lmluc2VydCh0KTpudWxsPT09dGhpcy5yaWdodD90aGlzLnJpZ2h0PXQ6dGhpcy5yaWdodC5pbnNlcnQodCl9LGUucHJvdG90eXBlLnNlYXJjaD1mdW5jdGlvbih0LGUpe3Q+dGhpcy5tYXh8fChudWxsIT09dGhpcy5sZWZ0JiZ0aGlzLmxlZnQuc2VhcmNoKHQsZSksdGhpcy5sb3c8PXQmJnRoaXMuaGlnaD50JiZlLnB1c2godGhpcyksdGhpcy5sb3c+dHx8bnVsbCE9PXRoaXMucmlnaHQmJnRoaXMucmlnaHQuc2VhcmNoKHQsZSkpfSxlLnByb3RvdHlwZS5zZWFyY2hBZnRlcj1mdW5jdGlvbih0LGUpe3RoaXMubG93Pj10JiYoZS5wdXNoKHRoaXMpLG51bGwhPT10aGlzLmxlZnQmJnRoaXMubGVmdC5zZWFyY2hBZnRlcih0LGUpKSxudWxsIT09dGhpcy5yaWdodCYmdGhpcy5yaWdodC5zZWFyY2hBZnRlcih0LGUpfSxlLnByb3RvdHlwZS50cmF2ZXJzZT1mdW5jdGlvbih0KXt0KHRoaXMpLG51bGwhPT10aGlzLmxlZnQmJnRoaXMubGVmdC50cmF2ZXJzZSh0KSxudWxsIT09dGhpcy5yaWdodCYmdGhpcy5yaWdodC50cmF2ZXJzZSh0KX0sZS5wcm90b3R5cGUudXBkYXRlSGVpZ2h0PWZ1bmN0aW9uKCl7bnVsbCE9PXRoaXMubGVmdCYmbnVsbCE9PXRoaXMucmlnaHQ/dGhpcy5oZWlnaHQ9TWF0aC5tYXgodGhpcy5sZWZ0LmhlaWdodCx0aGlzLnJpZ2h0LmhlaWdodCkrMTpudWxsIT09dGhpcy5yaWdodD90aGlzLmhlaWdodD10aGlzLnJpZ2h0LmhlaWdodCsxOm51bGwhPT10aGlzLmxlZnQ/dGhpcy5oZWlnaHQ9dGhpcy5sZWZ0LmhlaWdodCsxOnRoaXMuaGVpZ2h0PTB9LGUucHJvdG90eXBlLnVwZGF0ZU1heD1mdW5jdGlvbigpe3RoaXMubWF4PXRoaXMuaGlnaCxudWxsIT09dGhpcy5sZWZ0JiYodGhpcy5tYXg9TWF0aC5tYXgodGhpcy5tYXgsdGhpcy5sZWZ0Lm1heCkpLG51bGwhPT10aGlzLnJpZ2h0JiYodGhpcy5tYXg9TWF0aC5tYXgodGhpcy5tYXgsdGhpcy5yaWdodC5tYXgpKX0sZS5wcm90b3R5cGUuZ2V0QmFsYW5jZT1mdW5jdGlvbigpe3ZhciB0PTA7cmV0dXJuIG51bGwhPT10aGlzLmxlZnQmJm51bGwhPT10aGlzLnJpZ2h0P3Q9dGhpcy5sZWZ0LmhlaWdodC10aGlzLnJpZ2h0LmhlaWdodDpudWxsIT09dGhpcy5sZWZ0P3Q9dGhpcy5sZWZ0LmhlaWdodCsxOm51bGwhPT10aGlzLnJpZ2h0JiYodD0tKHRoaXMucmlnaHQuaGVpZ2h0KzEpKSx0fSxlLnByb3RvdHlwZS5pc0xlZnRDaGlsZD1mdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5wYXJlbnQmJnRoaXMucGFyZW50LmxlZnQ9PT10aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJsZWZ0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZWZ0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGVmdD10LG51bGwhPT10JiYodC5wYXJlbnQ9dGhpcyksdGhpcy51cGRhdGVIZWlnaHQoKSx0aGlzLnVwZGF0ZU1heCgpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInJpZ2h0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yaWdodH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3JpZ2h0PXQsbnVsbCE9PXQmJih0LnBhcmVudD10aGlzKSx0aGlzLnVwZGF0ZUhlaWdodCgpLHRoaXMudXBkYXRlTWF4KCl9fSksZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMucGFyZW50PW51bGwsdGhpcy5fbGVmdD1udWxsLHRoaXMuX3JpZ2h0PW51bGwsdGhpcy5ldmVudD1udWxsfSx0LkludGVydmFsVGltZWxpbmV9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlRyYW5zcG9ydEV2ZW50PWZ1bmN0aW9uKGUsaSl7aT10LmRlZmF1bHRBcmcoaSx0LlRyYW5zcG9ydEV2ZW50LmRlZmF1bHRzKSx0LmNhbGwodGhpcyksdGhpcy5UcmFuc3BvcnQ9ZSx0aGlzLmlkPXQuVHJhbnNwb3J0RXZlbnQuX2V2ZW50SWQrKyx0aGlzLnRpbWU9aS50aW1lLHRoaXMuY2FsbGJhY2s9aS5jYWxsYmFjayx0aGlzLl9vbmNlPWkub25jZX0sdC5leHRlbmQodC5UcmFuc3BvcnRFdmVudCksdC5UcmFuc3BvcnRFdmVudC5kZWZhdWx0cz17b25jZTohMSxjYWxsYmFjazp0Lm5vT3B9LHQuVHJhbnNwb3J0RXZlbnQuX2V2ZW50SWQ9MCx0LlRyYW5zcG9ydEV2ZW50LnByb3RvdHlwZS5pbnZva2U9ZnVuY3Rpb24odCl7dGhpcy5jYWxsYmFjayYmKHRoaXMuY2FsbGJhY2sodCksdGhpcy5fb25jZSYmdGhpcy5UcmFuc3BvcnQmJnRoaXMuVHJhbnNwb3J0LmNsZWFyKHRoaXMuaWQpKX0sdC5UcmFuc3BvcnRFdmVudC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5UcmFuc3BvcnQ9bnVsbCx0aGlzLmNhbGxiYWNrPW51bGwsdGhpc30sdC5UcmFuc3BvcnRFdmVudH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuVHJhbnNwb3J0UmVwZWF0RXZlbnQ9ZnVuY3Rpb24oZSxpKXt0LlRyYW5zcG9ydEV2ZW50LmNhbGwodGhpcyxlLGkpLGk9dC5kZWZhdWx0QXJnKGksdC5UcmFuc3BvcnRSZXBlYXRFdmVudC5kZWZhdWx0cyksdGhpcy5kdXJhdGlvbj1pLmR1cmF0aW9uLHRoaXMuX2ludGVydmFsPWkuaW50ZXJ2YWwsdGhpcy5fY3VycmVudElkPS0xLHRoaXMuX25leHRJZD0tMSx0aGlzLl9uZXh0VGljaz10aGlzLnRpbWUsdGhpcy5fYm91bmRSZXN0YXJ0PXRoaXMuX3Jlc3RhcnQuYmluZCh0aGlzKSx0aGlzLlRyYW5zcG9ydC5vbihcInN0YXJ0IGxvb3BTdGFydFwiLHRoaXMuX2JvdW5kUmVzdGFydCksdGhpcy5fcmVzdGFydCgpfSx0LmV4dGVuZCh0LlRyYW5zcG9ydFJlcGVhdEV2ZW50LHQuVHJhbnNwb3J0RXZlbnQpLHQuVHJhbnNwb3J0UmVwZWF0RXZlbnQuZGVmYXVsdHM9e2R1cmF0aW9uOjEvMCxpbnRlcnZhbDoxfSx0LlRyYW5zcG9ydFJlcGVhdEV2ZW50LnByb3RvdHlwZS5pbnZva2U9ZnVuY3Rpb24oZSl7dGhpcy5fY3JlYXRlRXZlbnRzKCksdC5UcmFuc3BvcnRFdmVudC5wcm90b3R5cGUuaW52b2tlLmNhbGwodGhpcyxlKX0sdC5UcmFuc3BvcnRSZXBlYXRFdmVudC5wcm90b3R5cGUuX2NyZWF0ZUV2ZW50cz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuVHJhbnNwb3J0LnRpY2tzO2U+PXRoaXMudGltZSYmZT49dGhpcy5fbmV4dFRpY2smJnRoaXMuX25leHRUaWNrK3RoaXMuX2ludGVydmFsPHRoaXMudGltZSt0aGlzLmR1cmF0aW9uJiYodGhpcy5fbmV4dFRpY2srPXRoaXMuX2ludGVydmFsLHRoaXMuX2N1cnJlbnRJZD10aGlzLl9uZXh0SWQsdGhpcy5fbmV4dElkPXRoaXMuVHJhbnNwb3J0LnNjaGVkdWxlT25jZSh0aGlzLmludm9rZS5iaW5kKHRoaXMpLHQuVHJhbnNwb3J0VGltZSh0aGlzLl9uZXh0VGljayxcImlcIikpKX0sdC5UcmFuc3BvcnRSZXBlYXRFdmVudC5wcm90b3R5cGUuX3Jlc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLlRyYW5zcG9ydC5jbGVhcih0aGlzLl9jdXJyZW50SWQpLHRoaXMuVHJhbnNwb3J0LmNsZWFyKHRoaXMuX25leHRJZCk7dmFyIGU9dGhpcy5UcmFuc3BvcnQudGlja3M7dGhpcy5fbmV4dFRpY2s9dGhpcy50aW1lLGU+dGhpcy50aW1lJiYodGhpcy5fbmV4dFRpY2s9dGhpcy50aW1lK01hdGguY2VpbCgoZS10aGlzLnRpbWUpL3RoaXMuX2ludGVydmFsKSp0aGlzLl9pbnRlcnZhbCksdGhpcy5fY3VycmVudElkPXRoaXMuVHJhbnNwb3J0LnNjaGVkdWxlT25jZSh0aGlzLmludm9rZS5iaW5kKHRoaXMpLHQuVHJhbnNwb3J0VGltZSh0aGlzLl9uZXh0VGljayxcImlcIikpLHRoaXMuX25leHRUaWNrKz10aGlzLl9pbnRlcnZhbCx0aGlzLl9uZXh0SWQ9dGhpcy5UcmFuc3BvcnQuc2NoZWR1bGVPbmNlKHRoaXMuaW52b2tlLmJpbmQodGhpcyksdC5UcmFuc3BvcnRUaW1lKHRoaXMuX25leHRUaWNrLFwiaVwiKSl9LHQuVHJhbnNwb3J0UmVwZWF0RXZlbnQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5UcmFuc3BvcnQuY2xlYXIodGhpcy5fY3VycmVudElkKSx0aGlzLlRyYW5zcG9ydC5jbGVhcih0aGlzLl9uZXh0SWQpLHRoaXMuVHJhbnNwb3J0Lm9mZihcInN0YXJ0IGxvb3BTdGFydFwiLHRoaXMuX2JvdW5kUmVzdGFydCksdGhpcy5fYm91bmRDcmVhdGVFdmVudHM9bnVsbCx0LlRyYW5zcG9ydEV2ZW50LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpc30sdC5UcmFuc3BvcnRSZXBlYXRFdmVudH0pLHQoZnVuY3Rpb24odCl7dC5UcmFuc3BvcnQ9ZnVuY3Rpb24oKXt0LkVtaXR0ZXIuY2FsbCh0aGlzKSx0LmdldENvbnRleHQoZnVuY3Rpb24oKXt0aGlzLmxvb3A9ITEsdGhpcy5fbG9vcFN0YXJ0PTAsdGhpcy5fbG9vcEVuZD0wLHRoaXMuX3BwcT1lLmRlZmF1bHRzLlBQUSx0aGlzLl9jbG9jaz1uZXcgdC5DbG9jayh7Y2FsbGJhY2s6dGhpcy5fcHJvY2Vzc1RpY2suYmluZCh0aGlzKSxmcmVxdWVuY3k6MH0pLHRoaXMuX2JpbmRDbG9ja0V2ZW50cygpLHRoaXMuYnBtPXRoaXMuX2Nsb2NrLmZyZXF1ZW5jeSx0aGlzLmJwbS5fdG9Vbml0cz10aGlzLl90b1VuaXRzLmJpbmQodGhpcyksdGhpcy5icG0uX2Zyb21Vbml0cz10aGlzLl9mcm9tVW5pdHMuYmluZCh0aGlzKSx0aGlzLmJwbS51bml0cz10LlR5cGUuQlBNLHRoaXMuYnBtLnZhbHVlPWUuZGVmYXVsdHMuYnBtLHRoaXMuX3JlYWRPbmx5KFwiYnBtXCIpLHRoaXMuX3RpbWVTaWduYXR1cmU9ZS5kZWZhdWx0cy50aW1lU2lnbmF0dXJlLHRoaXMuX3NjaGVkdWxlZEV2ZW50cz17fSx0aGlzLl90aW1lbGluZT1uZXcgdC5UaW1lbGluZSx0aGlzLl9yZXBlYXRlZEV2ZW50cz1uZXcgdC5JbnRlcnZhbFRpbWVsaW5lLHRoaXMuX3N5bmNlZFNpZ25hbHM9W10sdGhpcy5fc3dpbmdUaWNrcz1lLmRlZmF1bHRzLlBQUS8yLHRoaXMuX3N3aW5nQW1vdW50PTB9LmJpbmQodGhpcykpfSx0LmV4dGVuZCh0LlRyYW5zcG9ydCx0LkVtaXR0ZXIpLHQuVHJhbnNwb3J0LmRlZmF1bHRzPXticG06MTIwLHN3aW5nOjAsc3dpbmdTdWJkaXZpc2lvbjpcIjhuXCIsdGltZVNpZ25hdHVyZTo0LGxvb3BTdGFydDowLGxvb3BFbmQ6XCI0bVwiLFBQUToxOTJ9LHQuVHJhbnNwb3J0LnByb3RvdHlwZS5fcHJvY2Vzc1RpY2s9ZnVuY3Rpb24oZSl7dmFyIGksbixzPXRoaXMuX2Nsb2NrLnRpY2tzO3RoaXMuX3N3aW5nQW1vdW50PjAmJnMldGhpcy5fcHBxIT0wJiZzJSgyKnRoaXMuX3N3aW5nVGlja3MpIT0wJiYoaT1zJSgyKnRoaXMuX3N3aW5nVGlja3MpLygyKnRoaXMuX3N3aW5nVGlja3MpLG49TWF0aC5zaW4oaSpNYXRoLlBJKSp0aGlzLl9zd2luZ0Ftb3VudCxlKz10LlRpbWUoMip0aGlzLl9zd2luZ1RpY2tzLzMsXCJpXCIpKm4pLHRoaXMubG9vcCYmcz49dGhpcy5fbG9vcEVuZCYmKHRoaXMuZW1pdChcImxvb3BFbmRcIixlKSx0aGlzLl9jbG9jay50aWNrcz10aGlzLl9sb29wU3RhcnQscz10aGlzLl9sb29wU3RhcnQsdGhpcy5lbWl0KFwibG9vcFN0YXJ0XCIsZSx0aGlzLnNlY29uZHMpLHRoaXMuZW1pdChcImxvb3BcIixlKSksdGhpcy5fdGltZWxpbmUuZm9yRWFjaEF0VGltZShzLGZ1bmN0aW9uKHQpe3QuaW52b2tlKGUpfSl9LHQuVHJhbnNwb3J0LnByb3RvdHlwZS5zY2hlZHVsZT1mdW5jdGlvbihlLGkpe3ZhciBuPW5ldyB0LlRyYW5zcG9ydEV2ZW50KHRoaXMse3RpbWU6dGhpcy50b1RpY2tzKGkpLGNhbGxiYWNrOmV9KTtyZXR1cm4gdGhpcy5fYWRkRXZlbnQobix0aGlzLl90aW1lbGluZSl9LHQuVHJhbnNwb3J0LnByb3RvdHlwZS5zY2hlZHVsZVJlcGVhdD1mdW5jdGlvbihlLGksbixzKXt2YXIgbz1uZXcgdC5UcmFuc3BvcnRSZXBlYXRFdmVudCh0aGlzLHtjYWxsYmFjazplLGludGVydmFsOnRoaXMudG9UaWNrcyhpKSx0aW1lOnRoaXMudG9UaWNrcyhuKSxkdXJhdGlvbjp0aGlzLnRvVGlja3ModC5kZWZhdWx0QXJnKHMsMS8wKSl9KTtyZXR1cm4gdGhpcy5fYWRkRXZlbnQobyx0aGlzLl9yZXBlYXRlZEV2ZW50cyl9LHQuVHJhbnNwb3J0LnByb3RvdHlwZS5zY2hlZHVsZU9uY2U9ZnVuY3Rpb24oZSxpKXt2YXIgbj1uZXcgdC5UcmFuc3BvcnRFdmVudCh0aGlzLHt0aW1lOnRoaXMudG9UaWNrcyhpKSxjYWxsYmFjazplLG9uY2U6ITB9KTtyZXR1cm4gdGhpcy5fYWRkRXZlbnQobix0aGlzLl90aW1lbGluZSl9LHQuVHJhbnNwb3J0LnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbih0KXtpZih0aGlzLl9zY2hlZHVsZWRFdmVudHMuaGFzT3duUHJvcGVydHkodCkpe3ZhciBlPXRoaXMuX3NjaGVkdWxlZEV2ZW50c1t0LnRvU3RyaW5nKCldO2UudGltZWxpbmUucmVtb3ZlKGUuZXZlbnQpLGUuZXZlbnQuZGlzcG9zZSgpLGRlbGV0ZSB0aGlzLl9zY2hlZHVsZWRFdmVudHNbdC50b1N0cmluZygpXX1yZXR1cm4gdGhpc30sdC5UcmFuc3BvcnQucHJvdG90eXBlLl9hZGRFdmVudD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9zY2hlZHVsZWRFdmVudHNbdC5pZC50b1N0cmluZygpXT17ZXZlbnQ6dCx0aW1lbGluZTplfSxlLmFkZCh0KSx0LmlkfSx0LlRyYW5zcG9ydC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKGUpe3JldHVybiBlPXQuZGVmYXVsdEFyZyhlLDApLGU9dGhpcy50b1RpY2tzKGUpLHRoaXMuX3RpbWVsaW5lLmNhbmNlbChlKSx0aGlzLl9yZXBlYXRlZEV2ZW50cy5jYW5jZWwoZSksdGhpc30sdC5UcmFuc3BvcnQucHJvdG90eXBlLl9iaW5kQ2xvY2tFdmVudHM9ZnVuY3Rpb24oKXt0aGlzLl9jbG9jay5vbihcInN0YXJ0XCIsZnVuY3Rpb24oZSxpKXtpPXQuVGltZSh0aGlzLl9jbG9jay50aWNrcyxcImlcIikudG9TZWNvbmRzKCksdGhpcy5lbWl0KFwic3RhcnRcIixlLGkpfS5iaW5kKHRoaXMpKSx0aGlzLl9jbG9jay5vbihcInN0b3BcIixmdW5jdGlvbih0KXt0aGlzLmVtaXQoXCJzdG9wXCIsdCl9LmJpbmQodGhpcykpLHRoaXMuX2Nsb2NrLm9uKFwicGF1c2VcIixmdW5jdGlvbih0KXt0aGlzLmVtaXQoXCJwYXVzZVwiLHQpfS5iaW5kKHRoaXMpKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuVHJhbnNwb3J0LnByb3RvdHlwZSxcInN0YXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jbG9jay5nZXRTdGF0ZUF0VGltZSh0aGlzLm5vdygpKX19KSx0LlRyYW5zcG9ydC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oZSxpKXtyZXR1cm4gdC5pc1VuZGVmKGkpfHwoaT10aGlzLnRvVGlja3MoaSkpLHRoaXMuX2Nsb2NrLnN0YXJ0KGUsaSksdGhpc30sdC5UcmFuc3BvcnQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2Nsb2NrLnN0b3AodCksdGhpc30sdC5UcmFuc3BvcnQucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9jbG9jay5wYXVzZSh0KSx0aGlzfSx0LlRyYW5zcG9ydC5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKGUpe3JldHVybiBlPXRoaXMudG9TZWNvbmRzKGUpLHRoaXMuX2Nsb2NrLmdldFN0YXRlQXRUaW1lKGUpIT09dC5TdGF0ZS5TdGFydGVkP3RoaXMuc3RhcnQoZSk6dGhpcy5zdG9wKGUpLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlRyYW5zcG9ydC5wcm90b3R5cGUsXCJ0aW1lU2lnbmF0dXJlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aW1lU2lnbmF0dXJlfSxzZXQ6ZnVuY3Rpb24oZSl7dC5pc0FycmF5KGUpJiYoZT1lWzBdL2VbMV0qNCksdGhpcy5fdGltZVNpZ25hdHVyZT1lfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlRyYW5zcG9ydC5wcm90b3R5cGUsXCJsb29wU3RhcnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuVHJhbnNwb3J0VGltZSh0aGlzLl9sb29wU3RhcnQsXCJpXCIpLnRvU2Vjb25kcygpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbG9vcFN0YXJ0PXRoaXMudG9UaWNrcyh0KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5UcmFuc3BvcnQucHJvdG90eXBlLFwibG9vcEVuZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5UcmFuc3BvcnRUaW1lKHRoaXMuX2xvb3BFbmQsXCJpXCIpLnRvU2Vjb25kcygpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbG9vcEVuZD10aGlzLnRvVGlja3ModCl9fSksdC5UcmFuc3BvcnQucHJvdG90eXBlLnNldExvb3BQb2ludHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5sb29wU3RhcnQ9dCx0aGlzLmxvb3BFbmQ9ZSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5UcmFuc3BvcnQucHJvdG90eXBlLFwic3dpbmdcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N3aW5nQW1vdW50fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc3dpbmdBbW91bnQ9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5UcmFuc3BvcnQucHJvdG90eXBlLFwic3dpbmdTdWJkaXZpc2lvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5UaW1lKHRoaXMuX3N3aW5nVGlja3MsXCJpXCIpLnRvTm90YXRpb24oKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3N3aW5nVGlja3M9dGhpcy50b1RpY2tzKHQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlRyYW5zcG9ydC5wcm90b3R5cGUsXCJwb3NpdGlvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5UcmFuc3BvcnRUaW1lKHRoaXMudGlja3MsXCJpXCIpLnRvQmFyc0JlYXRzU2l4dGVlbnRocygpfSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy50b1RpY2tzKHQpO3RoaXMudGlja3M9ZX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5UcmFuc3BvcnQucHJvdG90eXBlLFwic2Vjb25kc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5UcmFuc3BvcnRUaW1lKHRoaXMudGlja3MsXCJpXCIpLnRvU2Vjb25kcygpfSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy50b1RpY2tzKHQpO3RoaXMudGlja3M9ZX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5UcmFuc3BvcnQucHJvdG90eXBlLFwicHJvZ3Jlc3NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9vcD8odGhpcy50aWNrcy10aGlzLl9sb29wU3RhcnQpLyh0aGlzLl9sb29wRW5kLXRoaXMuX2xvb3BTdGFydCk6MH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5UcmFuc3BvcnQucHJvdG90eXBlLFwidGlja3NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Nsb2NrLnRpY2tzfSxzZXQ6ZnVuY3Rpb24oZSl7aWYodGhpcy5fY2xvY2sudGlja3MhPT1lKXt2YXIgaT10aGlzLm5vdygpO3RoaXMuc3RhdGU9PT10LlN0YXRlLlN0YXJ0ZWQ/KHRoaXMuZW1pdChcInN0b3BcIixpKSx0aGlzLl9jbG9jay50aWNrcz1lLHRoaXMuZW1pdChcInN0YXJ0XCIsaSx0aGlzLnNlY29uZHMpKTp0aGlzLl9jbG9jay50aWNrcz1lfX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5UcmFuc3BvcnQucHJvdG90eXBlLFwiUFBRXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcHF9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmJwbS52YWx1ZTt0aGlzLl9wcHE9dCx0aGlzLmJwbS52YWx1ZT1lfX0pLHQuVHJhbnNwb3J0LnByb3RvdHlwZS5fZnJvbVVuaXRzPWZ1bmN0aW9uKHQpe3JldHVybiAxLyg2MC90L3RoaXMuUFBRKX0sdC5UcmFuc3BvcnQucHJvdG90eXBlLl90b1VuaXRzPWZ1bmN0aW9uKHQpe3JldHVybiB0L3RoaXMuUFBRKjYwfSx0LlRyYW5zcG9ydC5wcm90b3R5cGUubmV4dFN1YmRpdmlzaW9uPWZ1bmN0aW9uKGUpe3ZhciBpLG4scztyZXR1cm4gZT10aGlzLnRvU2Vjb25kcyhlKSx0aGlzLnN0YXRlIT09dC5TdGF0ZS5TdGFydGVkPzA6KGk9dGhpcy5fY2xvY2suX25leHRUaWNrLG49dC5UaW1lKHRoaXMudGlja3MsXCJpXCIpLHM9ZS1uJWUsMD09PXMmJihzPWUpLGkrcyl9LHQuVHJhbnNwb3J0LnByb3RvdHlwZS5zeW5jU2lnbmFsPWZ1bmN0aW9uKGUsaSl7aXx8KGk9MCE9PWUuX3BhcmFtLnZhbHVlP2UuX3BhcmFtLnZhbHVlL3RoaXMuYnBtLl9wYXJhbS52YWx1ZTowKTt2YXIgbj1uZXcgdC5HYWluKGkpO3JldHVybiB0aGlzLmJwbS5jaGFpbihuLGUuX3BhcmFtKSx0aGlzLl9zeW5jZWRTaWduYWxzLnB1c2goe3JhdGlvOm4sc2lnbmFsOmUsaW5pdGlhbDplLl9wYXJhbS52YWx1ZX0pLGUuX3BhcmFtLnZhbHVlPTAsdGhpc30sdC5UcmFuc3BvcnQucHJvdG90eXBlLnVuc3luY1NpZ25hbD1mdW5jdGlvbih0KXt2YXIgZSxpO2ZvcihlPXRoaXMuX3N5bmNlZFNpZ25hbHMubGVuZ3RoLTE7ZT49MDtlLS0paT10aGlzLl9zeW5jZWRTaWduYWxzW2VdLGkuc2lnbmFsPT09dCYmKGkucmF0aW8uZGlzcG9zZSgpLGkuc2lnbmFsLl9wYXJhbS52YWx1ZT1pLmluaXRpYWwsdGhpcy5fc3luY2VkU2lnbmFscy5zcGxpY2UoZSwxKSk7cmV0dXJuIHRoaXN9LHQuVHJhbnNwb3J0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuRW1pdHRlci5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2Nsb2NrLmRpc3Bvc2UoKSx0aGlzLl9jbG9jaz1udWxsLHRoaXMuX3dyaXRhYmxlKFwiYnBtXCIpLHRoaXMuYnBtPW51bGwsdGhpcy5fdGltZWxpbmUuZGlzcG9zZSgpLHRoaXMuX3RpbWVsaW5lPW51bGwsdGhpcy5fcmVwZWF0ZWRFdmVudHMuZGlzcG9zZSgpLHRoaXMuX3JlcGVhdGVkRXZlbnRzPW51bGwsdGhpc307dmFyIGU9dC5UcmFuc3BvcnQ7cmV0dXJuIHQuVHJhbnNwb3J0PW5ldyBlLHQuQ29udGV4dC5vbihcImluaXRcIixmdW5jdGlvbihpKXtpLlRyYW5zcG9ydCBpbnN0YW5jZW9mIGU/dC5UcmFuc3BvcnQ9aS5UcmFuc3BvcnQ6dC5UcmFuc3BvcnQ9bmV3IGUsaS5UcmFuc3BvcnQ9dC5UcmFuc3BvcnR9KSx0LkNvbnRleHQub24oXCJjbG9zZVwiLGZ1bmN0aW9uKHQpe3QuVHJhbnNwb3J0IGluc3RhbmNlb2YgZSYmdC5UcmFuc3BvcnQuZGlzcG9zZSgpfSksdC5UcmFuc3BvcnR9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlZvbHVtZT1mdW5jdGlvbigpe3ZhciBlPXQuZGVmYXVsdHMoYXJndW1lbnRzLFtcInZvbHVtZVwiXSx0LlZvbHVtZSk7dC5BdWRpb05vZGUuY2FsbCh0aGlzKSx0aGlzLm91dHB1dD10aGlzLmlucHV0PW5ldyB0LkdhaW4oZS52b2x1bWUsdC5UeXBlLkRlY2liZWxzKSx0aGlzLl91bm11dGVkVm9sdW1lPWUudm9sdW1lLHRoaXMudm9sdW1lPXRoaXMub3V0cHV0LmdhaW4sdGhpcy5fcmVhZE9ubHkoXCJ2b2x1bWVcIiksdGhpcy5tdXRlPWUubXV0ZX0sdC5leHRlbmQodC5Wb2x1bWUsdC5BdWRpb05vZGUpLHQuVm9sdW1lLmRlZmF1bHRzPXt2b2x1bWU6MCxtdXRlOiExfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Wb2x1bWUucHJvdG90eXBlLFwibXV0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52b2x1bWUudmFsdWU9PT0tMS8wfSxzZXQ6ZnVuY3Rpb24odCl7IXRoaXMubXV0ZSYmdD8odGhpcy5fdW5tdXRlZFZvbHVtZT10aGlzLnZvbHVtZS52YWx1ZSx0aGlzLnZvbHVtZS52YWx1ZT0tMS8wKTp0aGlzLm11dGUmJiF0JiYodGhpcy52b2x1bWUudmFsdWU9dGhpcy5fdW5tdXRlZFZvbHVtZSl9fSksdC5Wb2x1bWUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnB1dC5kaXNwb3NlKCksdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShcInZvbHVtZVwiKSx0aGlzLnZvbHVtZS5kaXNwb3NlKCksdGhpcy52b2x1bWU9bnVsbCx0aGlzfSx0LlZvbHVtZX0pLHQoZnVuY3Rpb24odCl7dC5NYXN0ZXI9ZnVuY3Rpb24oKXt0LkF1ZGlvTm9kZS5jYWxsKHRoaXMpLHQuZ2V0Q29udGV4dChmdW5jdGlvbigpe3RoaXMuY3JlYXRlSW5zT3V0cygxLDApLHRoaXMuX3ZvbHVtZT10aGlzLm91dHB1dD1uZXcgdC5Wb2x1bWUsdGhpcy52b2x1bWU9dGhpcy5fdm9sdW1lLnZvbHVtZSx0aGlzLl9yZWFkT25seShcInZvbHVtZVwiKSx0aGlzLmlucHV0LmNoYWluKHRoaXMub3V0cHV0LHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbil9LmJpbmQodGhpcykpfSx0LmV4dGVuZCh0Lk1hc3Rlcix0LkF1ZGlvTm9kZSksdC5NYXN0ZXIuZGVmYXVsdHM9e3ZvbHVtZTowLG11dGU6ITF9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lk1hc3Rlci5wcm90b3R5cGUsXCJtdXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92b2x1bWUubXV0ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3ZvbHVtZS5tdXRlPXR9fSksdC5NYXN0ZXIucHJvdG90eXBlLmNoYWluPWZ1bmN0aW9uKCl7dGhpcy5pbnB1dC5kaXNjb25uZWN0KCksdGhpcy5pbnB1dC5jaGFpbi5hcHBseSh0aGlzLmlucHV0LGFyZ3VtZW50cyksYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGgtMV0uY29ubmVjdCh0aGlzLm91dHB1dCl9LHQuTWFzdGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShcInZvbHVtZVwiKSx0aGlzLl92b2x1bWUuZGlzcG9zZSgpLHRoaXMuX3ZvbHVtZT1udWxsLHRoaXMudm9sdW1lPW51bGx9LHQuQXVkaW9Ob2RlLnByb3RvdHlwZS50b01hc3Rlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbm5lY3QodC5NYXN0ZXIpLHRoaXN9LHdpbmRvdy5BdWRpb05vZGUmJihBdWRpb05vZGUucHJvdG90eXBlLnRvTWFzdGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29ubmVjdCh0Lk1hc3RlciksdGhpc30pO3ZhciBlPXQuTWFzdGVyO3JldHVybiB0Lk1hc3Rlcj1uZXcgZSx0LkNvbnRleHQub24oXCJpbml0XCIsZnVuY3Rpb24oaSl7aS5NYXN0ZXIgaW5zdGFuY2VvZiBlP3QuTWFzdGVyPWkuTWFzdGVyOnQuTWFzdGVyPW5ldyBlLGkuTWFzdGVyPXQuTWFzdGVyfSksdC5Db250ZXh0Lm9uKFwiY2xvc2VcIixmdW5jdGlvbih0KXt0Lk1hc3RlciBpbnN0YW5jZW9mIGUmJnQuTWFzdGVyLmRpc3Bvc2UoKX0pLHQuTWFzdGVyfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5Tb3VyY2U9ZnVuY3Rpb24oZSl7ZT10LmRlZmF1bHRBcmcoZSx0LlNvdXJjZS5kZWZhdWx0cyksdC5BdWRpb05vZGUuY2FsbCh0aGlzKSx0aGlzLl92b2x1bWU9dGhpcy5vdXRwdXQ9bmV3IHQuVm9sdW1lKGUudm9sdW1lKSx0aGlzLnZvbHVtZT10aGlzLl92b2x1bWUudm9sdW1lLHRoaXMuX3JlYWRPbmx5KFwidm9sdW1lXCIpLHRoaXMuX3N0YXRlPW5ldyB0LlRpbWVsaW5lU3RhdGUodC5TdGF0ZS5TdG9wcGVkKSx0aGlzLl9zdGF0ZS5tZW1vcnk9MTAsdGhpcy5fc3luY2VkPSExLHRoaXMuX3NjaGVkdWxlZD1bXSx0aGlzLl92b2x1bWUub3V0cHV0Lm91dHB1dC5jaGFubmVsQ291bnQ9Mix0aGlzLl92b2x1bWUub3V0cHV0Lm91dHB1dC5jaGFubmVsQ291bnRNb2RlPVwiZXhwbGljaXRcIix0aGlzLm11dGU9ZS5tdXRlfSx0LmV4dGVuZCh0LlNvdXJjZSx0LkF1ZGlvTm9kZSksdC5Tb3VyY2UuZGVmYXVsdHM9e3ZvbHVtZTowLG11dGU6ITF9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlNvdXJjZS5wcm90b3R5cGUsXCJzdGF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY2VkP3QuVHJhbnNwb3J0LnN0YXRlPT09dC5TdGF0ZS5TdGFydGVkP3RoaXMuX3N0YXRlLmdldFZhbHVlQXRUaW1lKHQuVHJhbnNwb3J0LnNlY29uZHMpOnQuU3RhdGUuU3RvcHBlZDp0aGlzLl9zdGF0ZS5nZXRWYWx1ZUF0VGltZSh0aGlzLm5vdygpKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Tb3VyY2UucHJvdG90eXBlLFwibXV0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdm9sdW1lLm11dGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl92b2x1bWUubXV0ZT10fX0pLHQuU291cmNlLnByb3RvdHlwZS5fc3RhcnQ9dC5ub09wLHQuU291cmNlLnByb3RvdHlwZS5fc3RvcD10Lm5vT3AsdC5Tb3VyY2UucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKGUsaSxuKXt2YXIgcyxvO3JldHVybiBlPXQuaXNVbmRlZihlKSYmdGhpcy5fc3luY2VkP3QuVHJhbnNwb3J0LnNlY29uZHM6dGhpcy50b1NlY29uZHMoZSksdGhpcy5yZXRyaWdnZXJ8fHRoaXMuX3N0YXRlLmdldFZhbHVlQXRUaW1lKGUpIT09dC5TdGF0ZS5TdGFydGVkfHx0aGlzLnN0b3AoZSksdGhpcy5fc3RhdGUuc2V0U3RhdGVBdFRpbWUodC5TdGF0ZS5TdGFydGVkLGUpLHRoaXMuX3N5bmNlZD8ocz10aGlzLl9zdGF0ZS5nZXQoZSkscy5vZmZzZXQ9dC5kZWZhdWx0QXJnKGksMCkscy5kdXJhdGlvbj1uLG89dC5UcmFuc3BvcnQuc2NoZWR1bGUoZnVuY3Rpb24odCl7dGhpcy5fc3RhcnQodCxpLG4pfS5iaW5kKHRoaXMpLGUpLHRoaXMuX3NjaGVkdWxlZC5wdXNoKG8pKTp0aGlzLl9zdGFydC5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpc30sdC5Tb3VyY2UucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oZSl7aWYoZT10LmlzVW5kZWYoZSkmJnRoaXMuX3N5bmNlZD90LlRyYW5zcG9ydC5zZWNvbmRzOnRoaXMudG9TZWNvbmRzKGUpLHRoaXMuX3N0YXRlLmNhbmNlbChlKSx0aGlzLl9zdGF0ZS5zZXRTdGF0ZUF0VGltZSh0LlN0YXRlLlN0b3BwZWQsZSksdGhpcy5fc3luY2VkKXt2YXIgaT10LlRyYW5zcG9ydC5zY2hlZHVsZSh0aGlzLl9zdG9wLmJpbmQodGhpcyksZSk7dGhpcy5fc2NoZWR1bGVkLnB1c2goaSl9ZWxzZSB0aGlzLl9zdG9wLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdGhpc30sdC5Tb3VyY2UucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY2VkPSEwLHRoaXMuX3N5bmNlZFN0YXJ0PWZ1bmN0aW9uKGUsaSl7dmFyIG4scyxvO2k+MCYmKG49dGhpcy5fc3RhdGUuZ2V0KGkpKSYmbi5zdGF0ZT09PXQuU3RhdGUuU3RhcnRlZCYmbi50aW1lIT09aSYmKHM9aS10aGlzLnRvU2Vjb25kcyhuLnRpbWUpLG4uZHVyYXRpb24mJihvPXRoaXMudG9TZWNvbmRzKG4uZHVyYXRpb24pLXMpLHRoaXMuX3N0YXJ0KGUsdGhpcy50b1NlY29uZHMobi5vZmZzZXQpK3MsbykpfS5iaW5kKHRoaXMpLHRoaXMuX3N5bmNlZFN0b3A9ZnVuY3Rpb24oZSl7dGhpcy5fc3RhdGUuZ2V0VmFsdWVBdFRpbWUodC5UcmFuc3BvcnQuc2Vjb25kcyk9PT10LlN0YXRlLlN0YXJ0ZWQmJnRoaXMuX3N0b3AoZSl9LmJpbmQodGhpcyksdC5UcmFuc3BvcnQub24oXCJzdGFydCBsb29wU3RhcnRcIix0aGlzLl9zeW5jZWRTdGFydCksdC5UcmFuc3BvcnQub24oXCJzdG9wIHBhdXNlIGxvb3BFbmRcIix0aGlzLl9zeW5jZWRTdG9wKSx0aGlzfSx0LlNvdXJjZS5wcm90b3R5cGUudW5zeW5jPWZ1bmN0aW9uKCl7dmFyIGUsaTtmb3IodGhpcy5fc3luY2VkJiYodC5UcmFuc3BvcnQub2ZmKFwic3RvcCBwYXVzZSBsb29wRW5kXCIsdGhpcy5fc3luY2VkU3RvcCksdC5UcmFuc3BvcnQub2ZmKFwic3RhcnQgbG9vcFN0YXJ0XCIsdGhpcy5fc3luY2VkU3RhcnQpKSx0aGlzLl9zeW5jZWQ9ITEsZT0wO2U8dGhpcy5fc2NoZWR1bGVkLmxlbmd0aDtlKyspaT10aGlzLl9zY2hlZHVsZWRbZV0sdC5UcmFuc3BvcnQuY2xlYXIoaSk7cmV0dXJuIHRoaXMuX3NjaGVkdWxlZD1bXSx0aGlzLl9zdGF0ZS5jYW5jZWwoMCksdGhpc30sdC5Tb3VyY2UucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMudW5zeW5jKCksdGhpcy5fc2NoZWR1bGVkPW51bGwsdGhpcy5fd3JpdGFibGUoXCJ2b2x1bWVcIiksdGhpcy5fdm9sdW1lLmRpc3Bvc2UoKSx0aGlzLl92b2x1bWU9bnVsbCx0aGlzLnZvbHVtZT1udWxsLHRoaXMuX3N0YXRlLmRpc3Bvc2UoKSx0aGlzLl9zdGF0ZT1udWxsfSx0LlNvdXJjZX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHdpbmRvdy5Pc2NpbGxhdG9yTm9kZSYmIU9zY2lsbGF0b3JOb2RlLnByb3RvdHlwZS5zdGFydCYmKE9zY2lsbGF0b3JOb2RlLnByb3RvdHlwZS5zdGFydD1Pc2NpbGxhdG9yTm9kZS5wcm90b3R5cGUubm90ZU9uLE9zY2lsbGF0b3JOb2RlLnByb3RvdHlwZS5zdG9wPU9zY2lsbGF0b3JOb2RlLnByb3RvdHlwZS5ub3RlT2ZmLE9zY2lsbGF0b3JOb2RlLnByb3RvdHlwZS5zZXRQZXJpb2RpY1dhdmV8fChPc2NpbGxhdG9yTm9kZS5wcm90b3R5cGUuc2V0UGVyaW9kaWNXYXZlPU9zY2lsbGF0b3JOb2RlLnByb3RvdHlwZS5zZXRXYXZlVGFibGUpLEF1ZGlvQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlUGVyaW9kaWNXYXZlfHwoQXVkaW9Db250ZXh0LnByb3RvdHlwZS5jcmVhdGVQZXJpb2RpY1dhdmU9QXVkaW9Db250ZXh0LnByb3RvdHlwZS5jcmVhdGVXYXZlVGFibGUpKSx0Lk9zY2lsbGF0b3I9ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcInR5cGVcIl0sdC5Pc2NpbGxhdG9yKTt0LlNvdXJjZS5jYWxsKHRoaXMsZSksdGhpcy5fb3NjaWxsYXRvcj1udWxsLHRoaXMuZnJlcXVlbmN5PW5ldyB0LlNpZ25hbChlLmZyZXF1ZW5jeSx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLmRldHVuZT1uZXcgdC5TaWduYWwoZS5kZXR1bmUsdC5UeXBlLkNlbnRzKSx0aGlzLl93YXZlPW51bGwsdGhpcy5fcGFydGlhbHM9dC5kZWZhdWx0QXJnKGUucGFydGlhbHMsWzFdKSx0aGlzLl9waGFzZT1lLnBoYXNlLHRoaXMuX3R5cGU9bnVsbCx0aGlzLnR5cGU9ZS50eXBlLHRoaXMucGhhc2U9dGhpcy5fcGhhc2UsdGhpcy5fcmVhZE9ubHkoW1wiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIl0pfSx0LmV4dGVuZCh0Lk9zY2lsbGF0b3IsdC5Tb3VyY2UpLHQuT3NjaWxsYXRvci5kZWZhdWx0cz17dHlwZTpcInNpbmVcIixmcmVxdWVuY3k6NDQwLGRldHVuZTowLHBoYXNlOjAscGFydGlhbHM6W119LHQuT3NjaWxsYXRvci5UeXBlPXtTaW5lOlwic2luZVwiLFRyaWFuZ2xlOlwidHJpYW5nbGVcIixTYXd0b290aDpcInNhd3Rvb3RoXCIsU3F1YXJlOlwic3F1YXJlXCIsQ3VzdG9tOlwiY3VzdG9tXCJ9LHQuT3NjaWxsYXRvci5wcm90b3R5cGUuX3N0YXJ0PWZ1bmN0aW9uKGUpe1xudGhpcy5fb3NjaWxsYXRvcj10aGlzLmNvbnRleHQuY3JlYXRlT3NjaWxsYXRvcigpLHRoaXMuX29zY2lsbGF0b3Iuc2V0UGVyaW9kaWNXYXZlKHRoaXMuX3dhdmUpLHRoaXMuX29zY2lsbGF0b3IuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5mcmVxdWVuY3kuY29ubmVjdCh0aGlzLl9vc2NpbGxhdG9yLmZyZXF1ZW5jeSksdGhpcy5kZXR1bmUuY29ubmVjdCh0aGlzLl9vc2NpbGxhdG9yLmRldHVuZSksZT10aGlzLnRvU2Vjb25kcyhlKSx0LmlzUGFzdChlKSx0aGlzLl9vc2NpbGxhdG9yLnN0YXJ0KGUpfSx0Lk9zY2lsbGF0b3IucHJvdG90eXBlLl9zdG9wPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vc2NpbGxhdG9yJiYoZT10aGlzLnRvU2Vjb25kcyhlKSx0LmlzUGFzdChlKSx0aGlzLl9vc2NpbGxhdG9yLnN0b3AoZSksdGhpcy5fb3NjaWxsYXRvcj1udWxsKSx0aGlzfSx0Lk9zY2lsbGF0b3IucHJvdG90eXBlLnN5bmNGcmVxdWVuY3k9ZnVuY3Rpb24oKXtyZXR1cm4gdC5UcmFuc3BvcnQuc3luY1NpZ25hbCh0aGlzLmZyZXF1ZW5jeSksdGhpc30sdC5Pc2NpbGxhdG9yLnByb3RvdHlwZS51bnN5bmNGcmVxdWVuY3k9ZnVuY3Rpb24oKXtyZXR1cm4gdC5UcmFuc3BvcnQudW5zeW5jU2lnbmFsKHRoaXMuZnJlcXVlbmN5KSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Pc2NpbGxhdG9yLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3R5cGV9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9nZXRSZWFsSW1hZ2luYXJ5KHQsdGhpcy5fcGhhc2UpLGk9dGhpcy5jb250ZXh0LmNyZWF0ZVBlcmlvZGljV2F2ZShlWzBdLGVbMV0pO3RoaXMuX3dhdmU9aSxudWxsIT09dGhpcy5fb3NjaWxsYXRvciYmdGhpcy5fb3NjaWxsYXRvci5zZXRQZXJpb2RpY1dhdmUodGhpcy5fd2F2ZSksdGhpcy5fdHlwZT10fX0pLHQuT3NjaWxsYXRvci5wcm90b3R5cGUuX2dldFJlYWxJbWFnaW5hcnk9ZnVuY3Rpb24oZSxpKXt2YXIgbixzLG8scixhPTQwOTYsbD1hLzIsaD1uZXcgRmxvYXQzMkFycmF5KGwpLHU9bmV3IEZsb2F0MzJBcnJheShsKSxjPTE7Zm9yKGU9PT10Lk9zY2lsbGF0b3IuVHlwZS5DdXN0b20/KGM9dGhpcy5fcGFydGlhbHMubGVuZ3RoKzEsbD1jKToobj0vXihzaW5lfHRyaWFuZ2xlfHNxdWFyZXxzYXd0b290aCkoXFxkKykkLy5leGVjKGUpKSYmKGM9cGFyc2VJbnQoblsyXSkrMSxlPW5bMV0sYz1NYXRoLm1heChjLDIpLGw9Yykscz0xO3M8bDsrK3Mpe3N3aXRjaChvPTIvKHMqTWF0aC5QSSksZSl7Y2FzZSB0Lk9zY2lsbGF0b3IuVHlwZS5TaW5lOnI9czw9Yz8xOjA7YnJlYWs7Y2FzZSB0Lk9zY2lsbGF0b3IuVHlwZS5TcXVhcmU6cj0xJnM/MipvOjA7YnJlYWs7Y2FzZSB0Lk9zY2lsbGF0b3IuVHlwZS5TYXd0b290aDpyPW8qKDEmcz8xOi0xKTticmVhaztjYXNlIHQuT3NjaWxsYXRvci5UeXBlLlRyaWFuZ2xlOnI9MSZzP28qbyoyKihzLTE+PjEmMT8tMToxKTowO2JyZWFrO2Nhc2UgdC5Pc2NpbGxhdG9yLlR5cGUuQ3VzdG9tOnI9dGhpcy5fcGFydGlhbHNbcy0xXTticmVhaztkZWZhdWx0OnRocm93IG5ldyBUeXBlRXJyb3IoXCJUb25lLk9zY2lsbGF0b3I6IGludmFsaWQgdHlwZTogXCIrZSl9MCE9PXI/KGhbc109LXIqTWF0aC5zaW4oaSpzKSx1W3NdPXIqTWF0aC5jb3MoaSpzKSk6KGhbc109MCx1W3NdPTApfXJldHVybltoLHVdfSx0Lk9zY2lsbGF0b3IucHJvdG90eXBlLl9pbnZlcnNlRkZUPWZ1bmN0aW9uKHQsZSxpKXt2YXIgbixzPTAsbz10Lmxlbmd0aDtmb3Iobj0wO248bztuKyspcys9dFtuXSpNYXRoLmNvcyhuKmkpK2Vbbl0qTWF0aC5zaW4obippKTtyZXR1cm4gc30sdC5Pc2NpbGxhdG9yLnByb3RvdHlwZS5fZ2V0SW5pdGlhbFZhbHVlPWZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLl9nZXRSZWFsSW1hZ2luYXJ5KHRoaXMuX3R5cGUsMCksaT1lWzBdLG49ZVsxXSxzPTAsbz0yKk1hdGguUEk7Zm9yKHQ9MDt0PDg7dCsrKXM9TWF0aC5tYXgodGhpcy5faW52ZXJzZUZGVChpLG4sdC84Km8pLHMpO3JldHVybi10aGlzLl9pbnZlcnNlRkZUKGksbix0aGlzLl9waGFzZSkvc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuT3NjaWxsYXRvci5wcm90b3R5cGUsXCJwYXJ0aWFsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHlwZSE9PXQuT3NjaWxsYXRvci5UeXBlLkN1c3RvbT9bXTp0aGlzLl9wYXJ0aWFsc30sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX3BhcnRpYWxzPWUsdGhpcy50eXBlPXQuT3NjaWxsYXRvci5UeXBlLkN1c3RvbX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Pc2NpbGxhdG9yLnByb3RvdHlwZSxcInBoYXNlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9waGFzZSooMTgwL01hdGguUEkpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGhhc2U9dCpNYXRoLlBJLzE4MCx0aGlzLnR5cGU9dGhpcy5fdHlwZX19KSx0Lk9zY2lsbGF0b3IucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5Tb3VyY2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSxudWxsIT09dGhpcy5fb3NjaWxsYXRvciYmKHRoaXMuX29zY2lsbGF0b3IuZGlzY29ubmVjdCgpLHRoaXMuX29zY2lsbGF0b3I9bnVsbCksdGhpcy5fd2F2ZT1udWxsLHRoaXMuX3dyaXRhYmxlKFtcImZyZXF1ZW5jeVwiLFwiZGV0dW5lXCJdKSx0aGlzLmZyZXF1ZW5jeS5kaXNwb3NlKCksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLmRldHVuZS5kaXNwb3NlKCksdGhpcy5kZXR1bmU9bnVsbCx0aGlzLl9wYXJ0aWFscz1udWxsLHRoaXN9LHQuT3NjaWxsYXRvcn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuWmVybz1mdW5jdGlvbigpe3QuU2lnbmFsQmFzZS5jYWxsKHRoaXMpLHRoaXMuX2dhaW49dGhpcy5pbnB1dD10aGlzLm91dHB1dD1uZXcgdC5HYWluLHRoaXMuY29udGV4dC5nZXRDb25zdGFudCgwKS5jb25uZWN0KHRoaXMuX2dhaW4pfSx0LmV4dGVuZCh0Llplcm8sdC5TaWduYWxCYXNlKSx0Llplcm8ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5TaWduYWxCYXNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZ2Fpbi5kaXNwb3NlKCksdGhpcy5fZ2Fpbj1udWxsLHRoaXN9LHQuWmVyb30pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuTEZPPWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiZnJlcXVlbmN5XCIsXCJtaW5cIixcIm1heFwiXSx0LkxGTyk7dC5BdWRpb05vZGUuY2FsbCh0aGlzKSx0aGlzLl9vc2NpbGxhdG9yPW5ldyB0Lk9zY2lsbGF0b3Ioe2ZyZXF1ZW5jeTplLmZyZXF1ZW5jeSx0eXBlOmUudHlwZX0pLHRoaXMuZnJlcXVlbmN5PXRoaXMuX29zY2lsbGF0b3IuZnJlcXVlbmN5LHRoaXMuYW1wbGl0dWRlPXRoaXMuX29zY2lsbGF0b3Iudm9sdW1lLHRoaXMuYW1wbGl0dWRlLnVuaXRzPXQuVHlwZS5Ob3JtYWxSYW5nZSx0aGlzLmFtcGxpdHVkZS52YWx1ZT1lLmFtcGxpdHVkZSx0aGlzLl9zdG9wcGVkU2lnbmFsPW5ldyB0LlNpZ25hbCgwLHQuVHlwZS5BdWRpb1JhbmdlKSx0aGlzLl96ZXJvcz1uZXcgdC5aZXJvLHRoaXMuX3N0b3BwZWRWYWx1ZT0wLHRoaXMuX2EyZz1uZXcgdC5BdWRpb1RvR2Fpbix0aGlzLl9zY2FsZXI9dGhpcy5vdXRwdXQ9bmV3IHQuU2NhbGUoZS5taW4sZS5tYXgpLHRoaXMuX3VuaXRzPXQuVHlwZS5EZWZhdWx0LHRoaXMudW5pdHM9ZS51bml0cyx0aGlzLl9vc2NpbGxhdG9yLmNoYWluKHRoaXMuX2EyZyx0aGlzLl9zY2FsZXIpLHRoaXMuX3plcm9zLmNvbm5lY3QodGhpcy5fYTJnKSx0aGlzLl9zdG9wcGVkU2lnbmFsLmNvbm5lY3QodGhpcy5fYTJnKSx0aGlzLl9yZWFkT25seShbXCJhbXBsaXR1ZGVcIixcImZyZXF1ZW5jeVwiXSksdGhpcy5waGFzZT1lLnBoYXNlfSx0LmV4dGVuZCh0LkxGTyx0LkF1ZGlvTm9kZSksdC5MRk8uZGVmYXVsdHM9e3R5cGU6XCJzaW5lXCIsbWluOjAsbWF4OjEscGhhc2U6MCxmcmVxdWVuY3k6XCI0blwiLGFtcGxpdHVkZToxLHVuaXRzOnQuVHlwZS5EZWZhdWx0fSx0LkxGTy5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy50b1NlY29uZHModCksdGhpcy5fc3RvcHBlZFNpZ25hbC5zZXRWYWx1ZUF0VGltZSgwLHQpLHRoaXMuX29zY2lsbGF0b3Iuc3RhcnQodCksdGhpc30sdC5MRk8ucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy50b1NlY29uZHModCksdGhpcy5fc3RvcHBlZFNpZ25hbC5zZXRWYWx1ZUF0VGltZSh0aGlzLl9zdG9wcGVkVmFsdWUsdCksdGhpcy5fb3NjaWxsYXRvci5zdG9wKHQpLHRoaXN9LHQuTEZPLnByb3RvdHlwZS5zeW5jPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29zY2lsbGF0b3Iuc3luYygpLHRoaXMuX29zY2lsbGF0b3Iuc3luY0ZyZXF1ZW5jeSgpLHRoaXN9LHQuTEZPLnByb3RvdHlwZS51bnN5bmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3NjaWxsYXRvci51bnN5bmMoKSx0aGlzLl9vc2NpbGxhdG9yLnVuc3luY0ZyZXF1ZW5jeSgpLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkxGTy5wcm90b3R5cGUsXCJtaW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RvVW5pdHModGhpcy5fc2NhbGVyLm1pbil9LHNldDpmdW5jdGlvbih0KXt0PXRoaXMuX2Zyb21Vbml0cyh0KSx0aGlzLl9zY2FsZXIubWluPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTEZPLnByb3RvdHlwZSxcIm1heFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG9Vbml0cyh0aGlzLl9zY2FsZXIubWF4KX0sc2V0OmZ1bmN0aW9uKHQpe3Q9dGhpcy5fZnJvbVVuaXRzKHQpLHRoaXMuX3NjYWxlci5tYXg9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5MRk8ucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3NjaWxsYXRvci50eXBlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3NjaWxsYXRvci50eXBlPXQsdGhpcy5fc3RvcHBlZFZhbHVlPXRoaXMuX29zY2lsbGF0b3IuX2dldEluaXRpYWxWYWx1ZSgpLHRoaXMuX3N0b3BwZWRTaWduYWwudmFsdWU9dGhpcy5fc3RvcHBlZFZhbHVlfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkxGTy5wcm90b3R5cGUsXCJwaGFzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3NjaWxsYXRvci5waGFzZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29zY2lsbGF0b3IucGhhc2U9dCx0aGlzLl9zdG9wcGVkVmFsdWU9dGhpcy5fb3NjaWxsYXRvci5fZ2V0SW5pdGlhbFZhbHVlKCksdGhpcy5fc3RvcHBlZFNpZ25hbC52YWx1ZT10aGlzLl9zdG9wcGVkVmFsdWV9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTEZPLnByb3RvdHlwZSxcInVuaXRzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91bml0c30sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubWluLGk9dGhpcy5tYXg7dGhpcy5fdW5pdHM9dCx0aGlzLm1pbj1lLHRoaXMubWF4PWl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTEZPLnByb3RvdHlwZSxcIm11dGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29zY2lsbGF0b3IubXV0ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29zY2lsbGF0b3IubXV0ZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkxGTy5wcm90b3R5cGUsXCJzdGF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3NjaWxsYXRvci5zdGF0ZX19KSx0LkxGTy5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbihlKXtyZXR1cm4gZS5jb25zdHJ1Y3RvciE9PXQuU2lnbmFsJiZlLmNvbnN0cnVjdG9yIT09dC5QYXJhbSYmZS5jb25zdHJ1Y3RvciE9PXQuVGltZWxpbmVTaWduYWx8fCh0aGlzLmNvbnZlcnQ9ZS5jb252ZXJ0LHRoaXMudW5pdHM9ZS51bml0cyksdC5TaWduYWwucHJvdG90eXBlLmNvbm5lY3QuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXN9LHQuTEZPLnByb3RvdHlwZS5fZnJvbVVuaXRzPXQuUGFyYW0ucHJvdG90eXBlLl9mcm9tVW5pdHMsdC5MRk8ucHJvdG90eXBlLl90b1VuaXRzPXQuUGFyYW0ucHJvdG90eXBlLl90b1VuaXRzLHQuTEZPLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wiYW1wbGl0dWRlXCIsXCJmcmVxdWVuY3lcIl0pLHRoaXMuX29zY2lsbGF0b3IuZGlzcG9zZSgpLHRoaXMuX29zY2lsbGF0b3I9bnVsbCx0aGlzLl9zdG9wcGVkU2lnbmFsLmRpc3Bvc2UoKSx0aGlzLl9zdG9wcGVkU2lnbmFsPW51bGwsdGhpcy5femVyb3MuZGlzcG9zZSgpLHRoaXMuX3plcm9zPW51bGwsdGhpcy5fc2NhbGVyLmRpc3Bvc2UoKSx0aGlzLl9zY2FsZXI9bnVsbCx0aGlzLl9hMmcuZGlzcG9zZSgpLHRoaXMuX2EyZz1udWxsLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5hbXBsaXR1ZGU9bnVsbCx0aGlzfSx0LkxGT30pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuTGltaXRlcj1mdW5jdGlvbigpe3ZhciBlPXQuZGVmYXVsdHMoYXJndW1lbnRzLFtcInRocmVzaG9sZFwiXSx0LkxpbWl0ZXIpO3QuQXVkaW9Ob2RlLmNhbGwodGhpcyksdGhpcy5fY29tcHJlc3Nvcj10aGlzLmlucHV0PXRoaXMub3V0cHV0PW5ldyB0LkNvbXByZXNzb3Ioe2F0dGFjazouMDAxLGRlY2F5Oi4wMDEsdGhyZXNob2xkOmUudGhyZXNob2xkfSksdGhpcy50aHJlc2hvbGQ9dGhpcy5fY29tcHJlc3Nvci50aHJlc2hvbGQsdGhpcy5fcmVhZE9ubHkoXCJ0aHJlc2hvbGRcIil9LHQuZXh0ZW5kKHQuTGltaXRlcix0LkF1ZGlvTm9kZSksdC5MaW1pdGVyLmRlZmF1bHRzPXt0aHJlc2hvbGQ6LTEyfSx0LkxpbWl0ZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9jb21wcmVzc29yLmRpc3Bvc2UoKSx0aGlzLl9jb21wcmVzc29yPW51bGwsdGhpcy5fd3JpdGFibGUoXCJ0aHJlc2hvbGRcIiksdGhpcy50aHJlc2hvbGQ9bnVsbCx0aGlzfSx0LkxpbWl0ZXJ9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0Lkxvd3Bhc3NDb21iRmlsdGVyPWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiZGVsYXlUaW1lXCIsXCJyZXNvbmFuY2VcIixcImRhbXBlbmluZ1wiXSx0Lkxvd3Bhc3NDb21iRmlsdGVyKTt0LkF1ZGlvTm9kZS5jYWxsKHRoaXMpLHRoaXMuY3JlYXRlSW5zT3V0cygxLDEpLHRoaXMuX2RlbGF5PXRoaXMuaW5wdXQ9bmV3IHQuRGVsYXkoZS5kZWxheVRpbWUpLHRoaXMuZGVsYXlUaW1lPXRoaXMuX2RlbGF5LmRlbGF5VGltZSx0aGlzLl9sb3dwYXNzPXRoaXMub3V0cHV0PXRoaXMuY29udGV4dC5jcmVhdGVCaXF1YWRGaWx0ZXIoKSx0aGlzLl9sb3dwYXNzLlEudmFsdWU9LTMuMDEwMjk5OTU2NjM5ODEyNSx0aGlzLl9sb3dwYXNzLnR5cGU9XCJsb3dwYXNzXCIsdGhpcy5kYW1wZW5pbmc9bmV3IHQuUGFyYW0oe3BhcmFtOnRoaXMuX2xvd3Bhc3MuZnJlcXVlbmN5LHVuaXRzOnQuVHlwZS5GcmVxdWVuY3ksdmFsdWU6ZS5kYW1wZW5pbmd9KSx0aGlzLl9mZWVkYmFjaz1uZXcgdC5HYWluKGUucmVzb25hbmNlLHQuVHlwZS5Ob3JtYWxSYW5nZSksdGhpcy5yZXNvbmFuY2U9dGhpcy5fZmVlZGJhY2suZ2Fpbix0aGlzLl9kZWxheS5jaGFpbih0aGlzLl9sb3dwYXNzLHRoaXMuX2ZlZWRiYWNrLHRoaXMuX2RlbGF5KSx0aGlzLl9yZWFkT25seShbXCJkYW1wZW5pbmdcIixcInJlc29uYW5jZVwiLFwiZGVsYXlUaW1lXCJdKX0sdC5leHRlbmQodC5Mb3dwYXNzQ29tYkZpbHRlcix0LkF1ZGlvTm9kZSksdC5Mb3dwYXNzQ29tYkZpbHRlci5kZWZhdWx0cz17ZGVsYXlUaW1lOi4xLHJlc29uYW5jZTouNSxkYW1wZW5pbmc6M2UzfSx0Lkxvd3Bhc3NDb21iRmlsdGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wiZGFtcGVuaW5nXCIsXCJyZXNvbmFuY2VcIixcImRlbGF5VGltZVwiXSksdGhpcy5kYW1wZW5pbmcuZGlzcG9zZSgpLHRoaXMuZGFtcGVuaW5nPW51bGwsdGhpcy5yZXNvbmFuY2UuZGlzcG9zZSgpLHRoaXMucmVzb25hbmNlPW51bGwsdGhpcy5fZGVsYXkuZGlzcG9zZSgpLHRoaXMuX2RlbGF5PW51bGwsdGhpcy5kZWxheVRpbWU9bnVsbCx0aGlzLl9sb3dwYXNzLmRpc2Nvbm5lY3QoKSx0aGlzLl9sb3dwYXNzPW51bGwsdGhpcy5fZmVlZGJhY2suZGlzY29ubmVjdCgpLHRoaXMuX2ZlZWRiYWNrPW51bGwsdGhpc30sdC5Mb3dwYXNzQ29tYkZpbHRlcn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuTWVyZ2U9ZnVuY3Rpb24oKXt0LkF1ZGlvTm9kZS5jYWxsKHRoaXMpLHRoaXMuY3JlYXRlSW5zT3V0cygyLDApLHRoaXMubGVmdD10aGlzLmlucHV0WzBdPW5ldyB0LkdhaW4sdGhpcy5yaWdodD10aGlzLmlucHV0WzFdPW5ldyB0LkdhaW4sdGhpcy5fbWVyZ2VyPXRoaXMub3V0cHV0PXRoaXMuY29udGV4dC5jcmVhdGVDaGFubmVsTWVyZ2VyKDIpLHRoaXMubGVmdC5jb25uZWN0KHRoaXMuX21lcmdlciwwLDApLHRoaXMucmlnaHQuY29ubmVjdCh0aGlzLl9tZXJnZXIsMCwxKSx0aGlzLmxlZnQuY2hhbm5lbENvdW50PTEsdGhpcy5yaWdodC5jaGFubmVsQ291bnQ9MSx0aGlzLmxlZnQuY2hhbm5lbENvdW50TW9kZT1cImV4cGxpY2l0XCIsdGhpcy5yaWdodC5jaGFubmVsQ291bnRNb2RlPVwiZXhwbGljaXRcIn0sdC5leHRlbmQodC5NZXJnZSx0LkF1ZGlvTm9kZSksdC5NZXJnZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMubGVmdC5kaXNwb3NlKCksdGhpcy5sZWZ0PW51bGwsdGhpcy5yaWdodC5kaXNwb3NlKCksdGhpcy5yaWdodD1udWxsLHRoaXMuX21lcmdlci5kaXNjb25uZWN0KCksdGhpcy5fbWVyZ2VyPW51bGwsdGhpc30sdC5NZXJnZX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuTWV0ZXI9ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJzbW9vdGhpbmdcIl0sdC5NZXRlcik7dC5BdWRpb05vZGUuY2FsbCh0aGlzKSx0aGlzLmlucHV0PXRoaXMub3V0cHV0PXRoaXMuX2FuYWx5c2VyPW5ldyB0LkFuYWx5c2VyKFwid2F2ZWZvcm1cIiwxMDI0KSx0aGlzLnNtb290aGluZz1lLnNtb290aGluZ30sdC5leHRlbmQodC5NZXRlcix0LkF1ZGlvTm9kZSksdC5NZXRlci5kZWZhdWx0cz17c21vb3RoaW5nOi44fSx0Lk1ldGVyLnByb3RvdHlwZS5nZXRMZXZlbD1mdW5jdGlvbigpe3ZhciB0LGU7cmV0dXJuIHRoaXMuX2FuYWx5c2VyLnR5cGU9XCJmZnRcIix0PXRoaXMuX2FuYWx5c2VyLmdldFZhbHVlKCksZT0yOCxNYXRoLm1heC5hcHBseSh0aGlzLHQpK2V9LHQuTWV0ZXIucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FuYWx5c2VyLnR5cGU9XCJ3YXZlZm9ybVwiLHRoaXMuX2FuYWx5c2VyLmdldFZhbHVlKClbMF19LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lk1ldGVyLnByb3RvdHlwZSxcInNtb290aGluZ1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYW5hbHlzZXIuc21vb3RoaW5nfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYW5hbHlzZXIuc21vb3RoaW5nPXR9fSksdC5NZXRlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2FuYWx5c2VyLmRpc3Bvc2UoKSx0aGlzLl9hbmFseXNlcj1udWxsLHRoaXN9LHQuTWV0ZXJ9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlNwbGl0PWZ1bmN0aW9uKCl7dC5BdWRpb05vZGUuY2FsbCh0aGlzKSx0aGlzLmNyZWF0ZUluc091dHMoMCwyKSx0aGlzLl9zcGxpdHRlcj10aGlzLmlucHV0PXRoaXMuY29udGV4dC5jcmVhdGVDaGFubmVsU3BsaXR0ZXIoMiksdGhpcy5fc3BsaXR0ZXIuY2hhbm5lbENvdW50PTIsdGhpcy5fc3BsaXR0ZXIuY2hhbm5lbENvdW50TW9kZT1cImV4cGxpY2l0XCIsdGhpcy5sZWZ0PXRoaXMub3V0cHV0WzBdPW5ldyB0LkdhaW4sdGhpcy5yaWdodD10aGlzLm91dHB1dFsxXT1uZXcgdC5HYWluLHRoaXMuX3NwbGl0dGVyLmNvbm5lY3QodGhpcy5sZWZ0LDAsMCksdGhpcy5fc3BsaXR0ZXIuY29ubmVjdCh0aGlzLnJpZ2h0LDEsMCl9LHQuZXh0ZW5kKHQuU3BsaXQsdC5BdWRpb05vZGUpLHQuU3BsaXQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9zcGxpdHRlci5kaXNjb25uZWN0KCksdGhpcy5sZWZ0LmRpc3Bvc2UoKSx0aGlzLmxlZnQ9bnVsbCx0aGlzLnJpZ2h0LmRpc3Bvc2UoKSx0aGlzLnJpZ2h0PW51bGwsdGhpcy5fc3BsaXR0ZXI9bnVsbCx0aGlzfSx0LlNwbGl0fSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5NaWRTaWRlU3BsaXQ9ZnVuY3Rpb24oKXt0LkF1ZGlvTm9kZS5jYWxsKHRoaXMpLHRoaXMuY3JlYXRlSW5zT3V0cygwLDIpLHRoaXMuX3NwbGl0PXRoaXMuaW5wdXQ9bmV3IHQuU3BsaXQsdGhpcy5taWQ9dGhpcy5vdXRwdXRbMF09bmV3IHQuRXhwcihcIigkMCArICQxKSAqICQyXCIpLHRoaXMuc2lkZT10aGlzLm91dHB1dFsxXT1uZXcgdC5FeHByKFwiKCQwIC0gJDEpICogJDJcIiksdGhpcy5fc3BsaXQuY29ubmVjdCh0aGlzLm1pZCwwLDApLHRoaXMuX3NwbGl0LmNvbm5lY3QodGhpcy5taWQsMSwxKSx0aGlzLl9zcGxpdC5jb25uZWN0KHRoaXMuc2lkZSwwLDApLHRoaXMuX3NwbGl0LmNvbm5lY3QodGhpcy5zaWRlLDEsMSksdGhpcy5jb250ZXh0LmdldENvbnN0YW50KE1hdGguU1FSVDFfMikuY29ubmVjdCh0aGlzLm1pZCwwLDIpLHRoaXMuY29udGV4dC5nZXRDb25zdGFudChNYXRoLlNRUlQxXzIpLmNvbm5lY3QodGhpcy5zaWRlLDAsMil9LHQuZXh0ZW5kKHQuTWlkU2lkZVNwbGl0LHQuQXVkaW9Ob2RlKSx0Lk1pZFNpZGVTcGxpdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMubWlkLmRpc3Bvc2UoKSx0aGlzLm1pZD1udWxsLHRoaXMuc2lkZS5kaXNwb3NlKCksdGhpcy5zaWRlPW51bGwsdGhpcy5fc3BsaXQuZGlzcG9zZSgpLHRoaXMuX3NwbGl0PW51bGwsdGhpc30sdC5NaWRTaWRlU3BsaXR9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0Lk1pZFNpZGVNZXJnZT1mdW5jdGlvbigpe3QuQXVkaW9Ob2RlLmNhbGwodGhpcyksdGhpcy5jcmVhdGVJbnNPdXRzKDIsMCksdGhpcy5taWQ9dGhpcy5pbnB1dFswXT1uZXcgdC5HYWluLHRoaXMuX2xlZnQ9bmV3IHQuRXhwcihcIigkMCArICQxKSAqICQyXCIpLHRoaXMuc2lkZT10aGlzLmlucHV0WzFdPW5ldyB0LkdhaW4sdGhpcy5fcmlnaHQ9bmV3IHQuRXhwcihcIigkMCAtICQxKSAqICQyXCIpLHRoaXMuX21lcmdlPXRoaXMub3V0cHV0PW5ldyB0Lk1lcmdlLHRoaXMubWlkLmNvbm5lY3QodGhpcy5fbGVmdCwwLDApLHRoaXMuc2lkZS5jb25uZWN0KHRoaXMuX2xlZnQsMCwxKSx0aGlzLm1pZC5jb25uZWN0KHRoaXMuX3JpZ2h0LDAsMCksdGhpcy5zaWRlLmNvbm5lY3QodGhpcy5fcmlnaHQsMCwxKSx0aGlzLl9sZWZ0LmNvbm5lY3QodGhpcy5fbWVyZ2UsMCwwKSx0aGlzLl9yaWdodC5jb25uZWN0KHRoaXMuX21lcmdlLDAsMSksdGhpcy5jb250ZXh0LmdldENvbnN0YW50KE1hdGguU1FSVDFfMikuY29ubmVjdCh0aGlzLl9sZWZ0LDAsMiksdGhpcy5jb250ZXh0LmdldENvbnN0YW50KE1hdGguU1FSVDFfMikuY29ubmVjdCh0aGlzLl9yaWdodCwwLDIpfSx0LmV4dGVuZCh0Lk1pZFNpZGVNZXJnZSx0LkF1ZGlvTm9kZSksdC5NaWRTaWRlTWVyZ2UucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLm1pZC5kaXNwb3NlKCksdGhpcy5taWQ9bnVsbCx0aGlzLnNpZGUuZGlzcG9zZSgpLHRoaXMuc2lkZT1udWxsLHRoaXMuX2xlZnQuZGlzcG9zZSgpLHRoaXMuX2xlZnQ9bnVsbCx0aGlzLl9yaWdodC5kaXNwb3NlKCksdGhpcy5fcmlnaHQ9bnVsbCx0aGlzLl9tZXJnZS5kaXNwb3NlKCksdGhpcy5fbWVyZ2U9bnVsbCx0aGlzfSx0Lk1pZFNpZGVNZXJnZX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuTWlkU2lkZUNvbXByZXNzb3I9ZnVuY3Rpb24oZSl7dC5BdWRpb05vZGUuY2FsbCh0aGlzKSxlPXQuZGVmYXVsdEFyZyhlLHQuTWlkU2lkZUNvbXByZXNzb3IuZGVmYXVsdHMpLHRoaXMuX21pZFNpZGVTcGxpdD10aGlzLmlucHV0PW5ldyB0Lk1pZFNpZGVTcGxpdCx0aGlzLl9taWRTaWRlTWVyZ2U9dGhpcy5vdXRwdXQ9bmV3IHQuTWlkU2lkZU1lcmdlLHRoaXMubWlkPW5ldyB0LkNvbXByZXNzb3IoZS5taWQpLHRoaXMuc2lkZT1uZXcgdC5Db21wcmVzc29yKGUuc2lkZSksdGhpcy5fbWlkU2lkZVNwbGl0Lm1pZC5jaGFpbih0aGlzLm1pZCx0aGlzLl9taWRTaWRlTWVyZ2UubWlkKSx0aGlzLl9taWRTaWRlU3BsaXQuc2lkZS5jaGFpbih0aGlzLnNpZGUsdGhpcy5fbWlkU2lkZU1lcmdlLnNpZGUpLHRoaXMuX3JlYWRPbmx5KFtcIm1pZFwiLFwic2lkZVwiXSl9LHQuZXh0ZW5kKHQuTWlkU2lkZUNvbXByZXNzb3IsdC5BdWRpb05vZGUpLHQuTWlkU2lkZUNvbXByZXNzb3IuZGVmYXVsdHM9e21pZDp7cmF0aW86Myx0aHJlc2hvbGQ6LTI0LHJlbGVhc2U6LjAzLGF0dGFjazouMDIsa25lZToxNn0sc2lkZTp7cmF0aW86Nix0aHJlc2hvbGQ6LTMwLHJlbGVhc2U6LjI1LGF0dGFjazouMDMsa25lZToxMH19LHQuTWlkU2lkZUNvbXByZXNzb3IucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJtaWRcIixcInNpZGVcIl0pLHRoaXMubWlkLmRpc3Bvc2UoKSx0aGlzLm1pZD1udWxsLHRoaXMuc2lkZS5kaXNwb3NlKCksdGhpcy5zaWRlPW51bGwsdGhpcy5fbWlkU2lkZVNwbGl0LmRpc3Bvc2UoKSx0aGlzLl9taWRTaWRlU3BsaXQ9bnVsbCx0aGlzLl9taWRTaWRlTWVyZ2UuZGlzcG9zZSgpLHRoaXMuX21pZFNpZGVNZXJnZT1udWxsLHRoaXN9LHQuTWlkU2lkZUNvbXByZXNzb3J9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0Lk1vbm89ZnVuY3Rpb24oKXt0LkF1ZGlvTm9kZS5jYWxsKHRoaXMpLHRoaXMuY3JlYXRlSW5zT3V0cygxLDApLHRoaXMuX21lcmdlPXRoaXMub3V0cHV0PW5ldyB0Lk1lcmdlLHRoaXMuaW5wdXQuY29ubmVjdCh0aGlzLl9tZXJnZSwwLDApLHRoaXMuaW5wdXQuY29ubmVjdCh0aGlzLl9tZXJnZSwwLDEpLHRoaXMuaW5wdXQuZ2Fpbi52YWx1ZT10LmRiVG9HYWluKC0xMCl9LHQuZXh0ZW5kKHQuTW9ubyksdC5Nb25vLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fbWVyZ2UuZGlzcG9zZSgpLHRoaXMuX21lcmdlPW51bGwsdGhpc30sdC5Nb25vfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5NdWx0aWJhbmRDb21wcmVzc29yPWZ1bmN0aW9uKGUpe3QuQXVkaW9Ob2RlLmNhbGwodGhpcyksZT10LmRlZmF1bHRBcmcoYXJndW1lbnRzLHQuTXVsdGliYW5kQ29tcHJlc3Nvci5kZWZhdWx0cyksdGhpcy5fc3BsaXR0ZXI9dGhpcy5pbnB1dD1uZXcgdC5NdWx0aWJhbmRTcGxpdCh7bG93RnJlcXVlbmN5OmUubG93RnJlcXVlbmN5LGhpZ2hGcmVxdWVuY3k6ZS5oaWdoRnJlcXVlbmN5fSksdGhpcy5sb3dGcmVxdWVuY3k9dGhpcy5fc3BsaXR0ZXIubG93RnJlcXVlbmN5LHRoaXMuaGlnaEZyZXF1ZW5jeT10aGlzLl9zcGxpdHRlci5oaWdoRnJlcXVlbmN5LHRoaXMub3V0cHV0PW5ldyB0LkdhaW4sdGhpcy5sb3c9bmV3IHQuQ29tcHJlc3NvcihlLmxvdyksdGhpcy5taWQ9bmV3IHQuQ29tcHJlc3NvcihlLm1pZCksdGhpcy5oaWdoPW5ldyB0LkNvbXByZXNzb3IoZS5oaWdoKSx0aGlzLl9zcGxpdHRlci5sb3cuY2hhaW4odGhpcy5sb3csdGhpcy5vdXRwdXQpLHRoaXMuX3NwbGl0dGVyLm1pZC5jaGFpbih0aGlzLm1pZCx0aGlzLm91dHB1dCksdGhpcy5fc3BsaXR0ZXIuaGlnaC5jaGFpbih0aGlzLmhpZ2gsdGhpcy5vdXRwdXQpLHRoaXMuX3JlYWRPbmx5KFtcImhpZ2hcIixcIm1pZFwiLFwibG93XCIsXCJoaWdoRnJlcXVlbmN5XCIsXCJsb3dGcmVxdWVuY3lcIl0pfSx0LmV4dGVuZCh0Lk11bHRpYmFuZENvbXByZXNzb3IsdC5BdWRpb05vZGUpLHQuTXVsdGliYW5kQ29tcHJlc3Nvci5kZWZhdWx0cz17bG93OnQuQ29tcHJlc3Nvci5kZWZhdWx0cyxtaWQ6dC5Db21wcmVzc29yLmRlZmF1bHRzLGhpZ2g6dC5Db21wcmVzc29yLmRlZmF1bHRzLGxvd0ZyZXF1ZW5jeToyNTAsaGlnaEZyZXF1ZW5jeToyZTN9LHQuTXVsdGliYW5kQ29tcHJlc3Nvci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3NwbGl0dGVyLmRpc3Bvc2UoKSx0aGlzLl93cml0YWJsZShbXCJoaWdoXCIsXCJtaWRcIixcImxvd1wiLFwiaGlnaEZyZXF1ZW5jeVwiLFwibG93RnJlcXVlbmN5XCJdKSx0aGlzLmxvdy5kaXNwb3NlKCksdGhpcy5taWQuZGlzcG9zZSgpLHRoaXMuaGlnaC5kaXNwb3NlKCksdGhpcy5fc3BsaXR0ZXI9bnVsbCx0aGlzLmxvdz1udWxsLHRoaXMubWlkPW51bGwsdGhpcy5oaWdoPW51bGwsdGhpcy5sb3dGcmVxdWVuY3k9bnVsbCx0aGlzLmhpZ2hGcmVxdWVuY3k9bnVsbCx0aGlzfSx0Lk11bHRpYmFuZENvbXByZXNzb3J9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlBhbm5lcj1mdW5jdGlvbihlKXt0LkF1ZGlvTm9kZS5jYWxsKHRoaXMpLHQuUGFubmVyLmhhc1N0ZXJlb1Bhbm5lcj8odGhpcy5fcGFubmVyPXRoaXMuaW5wdXQ9dGhpcy5vdXRwdXQ9dGhpcy5jb250ZXh0LmNyZWF0ZVN0ZXJlb1Bhbm5lcigpLHRoaXMucGFuPXRoaXMuX3Bhbm5lci5wYW4pOih0aGlzLl9jcm9zc0ZhZGU9bmV3IHQuQ3Jvc3NGYWRlLHRoaXMuX21lcmdlcj10aGlzLm91dHB1dD1uZXcgdC5NZXJnZSx0aGlzLl9zcGxpdHRlcj10aGlzLmlucHV0PW5ldyB0LlNwbGl0LHRoaXMucGFuPW5ldyB0LlNpZ25hbCgwLHQuVHlwZS5BdWRpb1JhbmdlKSx0aGlzLl96ZXJvPW5ldyB0Llplcm8sdGhpcy5fYTJnPW5ldyB0LkF1ZGlvVG9HYWluLHRoaXMuX3plcm8uY29ubmVjdCh0aGlzLl9hMmcpLHRoaXMucGFuLmNoYWluKHRoaXMuX2EyZyx0aGlzLl9jcm9zc0ZhZGUuZmFkZSksdGhpcy5fc3BsaXR0ZXIuY29ubmVjdCh0aGlzLl9jcm9zc0ZhZGUsMCwwKSx0aGlzLl9zcGxpdHRlci5jb25uZWN0KHRoaXMuX2Nyb3NzRmFkZSwxLDEpLHRoaXMuX2Nyb3NzRmFkZS5hLmNvbm5lY3QodGhpcy5fbWVyZ2VyLDAsMCksdGhpcy5fY3Jvc3NGYWRlLmIuY29ubmVjdCh0aGlzLl9tZXJnZXIsMCwxKSksdGhpcy5wYW4udmFsdWU9dC5kZWZhdWx0QXJnKGUsMCksdGhpcy5fcmVhZE9ubHkoXCJwYW5cIil9LHQuZXh0ZW5kKHQuUGFubmVyLHQuQXVkaW9Ob2RlKSx0LlBhbm5lci5oYXNTdGVyZW9QYW5uZXI9dC5jb250ZXh0JiZ0LmlzRnVuY3Rpb24odC5jb250ZXh0LmNyZWF0ZVN0ZXJlb1Bhbm5lciksdC5QYW5uZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShcInBhblwiKSx0LlBhbm5lci5oYXNTdGVyZW9QYW5uZXI/KHRoaXMuX3Bhbm5lci5kaXNjb25uZWN0KCksdGhpcy5fcGFubmVyPW51bGwsdGhpcy5wYW49bnVsbCk6KHRoaXMuX3plcm8uZGlzcG9zZSgpLHRoaXMuX3plcm89bnVsbCx0aGlzLl9jcm9zc0ZhZGUuZGlzcG9zZSgpLHRoaXMuX2Nyb3NzRmFkZT1udWxsLHRoaXMuX3NwbGl0dGVyLmRpc3Bvc2UoKSx0aGlzLl9zcGxpdHRlcj1udWxsLHRoaXMuX21lcmdlci5kaXNwb3NlKCksdGhpcy5fbWVyZ2VyPW51bGwsdGhpcy5wYW4uZGlzcG9zZSgpLHRoaXMucGFuPW51bGwsdGhpcy5fYTJnLmRpc3Bvc2UoKSx0aGlzLl9hMmc9bnVsbCksdGhpc30sdC5QYW5uZXJ9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlBhbm5lcjNEPWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1wicG9zaXRpb25YXCIsXCJwb3NpdGlvbllcIixcInBvc2l0aW9uWlwiXSx0LlBhbm5lcjNEKTt0LkF1ZGlvTm9kZS5jYWxsKHRoaXMpLHRoaXMuX3Bhbm5lcj10aGlzLmlucHV0PXRoaXMub3V0cHV0PXRoaXMuY29udGV4dC5jcmVhdGVQYW5uZXIoKSx0aGlzLl9wYW5uZXIucGFubmluZ01vZGVsPWUucGFubmluZ01vZGVsLHRoaXMuX3Bhbm5lci5tYXhEaXN0YW5jZT1lLm1heERpc3RhbmNlLHRoaXMuX3Bhbm5lci5kaXN0YW5jZU1vZGVsPWUuZGlzdGFuY2VNb2RlbCx0aGlzLl9wYW5uZXIuY29uZU91dGVyR2Fpbj1lLmNvbmVPdXRlckdhaW4sdGhpcy5fcGFubmVyLmNvbmVPdXRlckFuZ2xlPWUuY29uZU91dGVyQW5nbGUsdGhpcy5fcGFubmVyLmNvbmVJbm5lckFuZ2xlPWUuY29uZUlubmVyQW5nbGUsdGhpcy5fcGFubmVyLnJlZkRpc3RhbmNlPWUucmVmRGlzdGFuY2UsdGhpcy5fcGFubmVyLnJvbGxvZmZGYWN0b3I9ZS5yb2xsb2ZmRmFjdG9yLHRoaXMuX29yaWVudGF0aW9uPVtlLm9yaWVudGF0aW9uWCxlLm9yaWVudGF0aW9uWSxlLm9yaWVudGF0aW9uWl0sdGhpcy5fcG9zaXRpb249W2UucG9zaXRpb25YLGUucG9zaXRpb25ZLGUucG9zaXRpb25aXSx0aGlzLm9yaWVudGF0aW9uWD1lLm9yaWVudGF0aW9uWCx0aGlzLm9yaWVudGF0aW9uWT1lLm9yaWVudGF0aW9uWSx0aGlzLm9yaWVudGF0aW9uWj1lLm9yaWVudGF0aW9uWix0aGlzLnBvc2l0aW9uWD1lLnBvc2l0aW9uWCx0aGlzLnBvc2l0aW9uWT1lLnBvc2l0aW9uWSx0aGlzLnBvc2l0aW9uWj1lLnBvc2l0aW9uWn0sdC5leHRlbmQodC5QYW5uZXIzRCx0LkF1ZGlvTm9kZSksdC5QYW5uZXIzRC5kZWZhdWx0cz17cG9zaXRpb25YOjAscG9zaXRpb25ZOjAscG9zaXRpb25aOjAsb3JpZW50YXRpb25YOjAsb3JpZW50YXRpb25ZOjAsb3JpZW50YXRpb25aOjAscGFubmluZ01vZGVsOlwiZXF1YWxwb3dlclwiLG1heERpc3RhbmNlOjFlNCxkaXN0YW5jZU1vZGVsOlwiaW52ZXJzZVwiLGNvbmVPdXRlckdhaW46MCxjb25lT3V0ZXJBbmdsZTozNjAsY29uZUlubmVyQW5nbGU6MzYwLHJlZkRpc3RhbmNlOjEscm9sbG9mZkZhY3RvcjoxfSx0LlBhbm5lcjNELnByb3RvdHlwZS5fcmFtcFRpbWVDb25zdGFudD0uMDEsdC5QYW5uZXIzRC5wcm90b3R5cGUuc2V0UG9zaXRpb249ZnVuY3Rpb24odCxlLGkpe2lmKHRoaXMuX3Bhbm5lci5wb3NpdGlvblgpe3ZhciBuPXRoaXMubm93KCk7dGhpcy5fcGFubmVyLnBvc2l0aW9uWC5zZXRUYXJnZXRBdFRpbWUodCxuLHRoaXMuX3JhbXBUaW1lQ29uc3RhbnQpLHRoaXMuX3Bhbm5lci5wb3NpdGlvblkuc2V0VGFyZ2V0QXRUaW1lKGUsbix0aGlzLl9yYW1wVGltZUNvbnN0YW50KSx0aGlzLl9wYW5uZXIucG9zaXRpb25aLnNldFRhcmdldEF0VGltZShpLG4sdGhpcy5fcmFtcFRpbWVDb25zdGFudCl9ZWxzZSB0aGlzLl9wYW5uZXIuc2V0UG9zaXRpb24odCxlLGkpO3JldHVybiB0aGlzLl9wb3NpdGlvbj1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLHRoaXN9LHQuUGFubmVyM0QucHJvdG90eXBlLnNldE9yaWVudGF0aW9uPWZ1bmN0aW9uKHQsZSxpKXtpZih0aGlzLl9wYW5uZXIub3JpZW50YXRpb25YKXt2YXIgbj10aGlzLm5vdygpO3RoaXMuX3Bhbm5lci5vcmllbnRhdGlvblguc2V0VGFyZ2V0QXRUaW1lKHQsbix0aGlzLl9yYW1wVGltZUNvbnN0YW50KSx0aGlzLl9wYW5uZXIub3JpZW50YXRpb25ZLnNldFRhcmdldEF0VGltZShlLG4sdGhpcy5fcmFtcFRpbWVDb25zdGFudCksdGhpcy5fcGFubmVyLm9yaWVudGF0aW9uWi5zZXRUYXJnZXRBdFRpbWUoaSxuLHRoaXMuX3JhbXBUaW1lQ29uc3RhbnQpfWVsc2UgdGhpcy5fcGFubmVyLnNldE9yaWVudGF0aW9uKHQsZSxpKTtyZXR1cm4gdGhpcy5fb3JpZW50YXRpb249QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QYW5uZXIzRC5wcm90b3R5cGUsXCJwb3NpdGlvblhcIix7c2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3Bvc2l0aW9uWzBdPXQsdGhpcy5zZXRQb3NpdGlvbi5hcHBseSh0aGlzLHRoaXMuX3Bvc2l0aW9uKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Bvc2l0aW9uWzBdfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBhbm5lcjNELnByb3RvdHlwZSxcInBvc2l0aW9uWVwiLHtzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcG9zaXRpb25bMV09dCx0aGlzLnNldFBvc2l0aW9uLmFwcGx5KHRoaXMsdGhpcy5fcG9zaXRpb24pfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9zaXRpb25bMV19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGFubmVyM0QucHJvdG90eXBlLFwicG9zaXRpb25aXCIse3NldDpmdW5jdGlvbih0KXt0aGlzLl9wb3NpdGlvblsyXT10LHRoaXMuc2V0UG9zaXRpb24uYXBwbHkodGhpcyx0aGlzLl9wb3NpdGlvbil9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb3NpdGlvblsyXX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QYW5uZXIzRC5wcm90b3R5cGUsXCJvcmllbnRhdGlvblhcIix7c2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29yaWVudGF0aW9uWzBdPXQsdGhpcy5zZXRPcmllbnRhdGlvbi5hcHBseSh0aGlzLHRoaXMuX29yaWVudGF0aW9uKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29yaWVudGF0aW9uWzBdfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBhbm5lcjNELnByb3RvdHlwZSxcIm9yaWVudGF0aW9uWVwiLHtzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3JpZW50YXRpb25bMV09dCx0aGlzLnNldE9yaWVudGF0aW9uLmFwcGx5KHRoaXMsdGhpcy5fb3JpZW50YXRpb24pfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3JpZW50YXRpb25bMV19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGFubmVyM0QucHJvdG90eXBlLFwib3JpZW50YXRpb25aXCIse3NldDpmdW5jdGlvbih0KXt0aGlzLl9vcmllbnRhdGlvblsyXT10LHRoaXMuc2V0T3JpZW50YXRpb24uYXBwbHkodGhpcyx0aGlzLl9vcmllbnRhdGlvbil9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmllbnRhdGlvblsyXX19KSx0LlBhbm5lcjNELl9hbGlhc1Byb3BlcnR5PWZ1bmN0aW9uKGUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBhbm5lcjNELnByb3RvdHlwZSxlLHtzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGFubmVyW2VdPXR9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYW5uZXJbZV19fSl9LHQuUGFubmVyM0QuX2FsaWFzUHJvcGVydHkoXCJwYW5uaW5nTW9kZWxcIiksdC5QYW5uZXIzRC5fYWxpYXNQcm9wZXJ0eShcInJlZkRpc3RhbmNlXCIpLHQuUGFubmVyM0QuX2FsaWFzUHJvcGVydHkoXCJyb2xsb2ZmRmFjdG9yXCIpLHQuUGFubmVyM0QuX2FsaWFzUHJvcGVydHkoXCJkaXN0YW5jZU1vZGVsXCIpLHQuUGFubmVyM0QuX2FsaWFzUHJvcGVydHkoXCJjb25lSW5uZXJBbmdsZVwiKSx0LlBhbm5lcjNELl9hbGlhc1Byb3BlcnR5KFwiY29uZU91dGVyQW5nbGVcIiksdC5QYW5uZXIzRC5fYWxpYXNQcm9wZXJ0eShcImNvbmVPdXRlckdhaW5cIiksdC5QYW5uZXIzRC5fYWxpYXNQcm9wZXJ0eShcIm1heERpc3RhbmNlXCIpLHQuUGFubmVyM0QucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9wYW5uZXIuZGlzY29ubmVjdCgpLHRoaXMuX3Bhbm5lcj1udWxsLHRoaXMuX29yaWVudGF0aW9uPW51bGwsdGhpcy5fcG9zaXRpb249bnVsbCx0aGlzfSx0LlBhbm5lcjNEfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5QYW5Wb2w9ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJwYW5cIixcInZvbHVtZVwiXSx0LlBhblZvbCk7dC5BdWRpb05vZGUuY2FsbCh0aGlzKSx0aGlzLl9wYW5uZXI9dGhpcy5pbnB1dD1uZXcgdC5QYW5uZXIoZS5wYW4pLHRoaXMucGFuPXRoaXMuX3Bhbm5lci5wYW4sdGhpcy5fdm9sdW1lPXRoaXMub3V0cHV0PW5ldyB0LlZvbHVtZShlLnZvbHVtZSksdGhpcy52b2x1bWU9dGhpcy5fdm9sdW1lLnZvbHVtZSx0aGlzLl9wYW5uZXIuY29ubmVjdCh0aGlzLl92b2x1bWUpLHRoaXMubXV0ZT1lLm11dGUsdGhpcy5fcmVhZE9ubHkoW1wicGFuXCIsXCJ2b2x1bWVcIl0pfSx0LmV4dGVuZCh0LlBhblZvbCx0LkF1ZGlvTm9kZSksdC5QYW5Wb2wuZGVmYXVsdHM9e3BhbjowLHZvbHVtZTowLG11dGU6ITF9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBhblZvbC5wcm90b3R5cGUsXCJtdXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92b2x1bWUubXV0ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3ZvbHVtZS5tdXRlPXR9fSksdC5QYW5Wb2wucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJwYW5cIixcInZvbHVtZVwiXSksdGhpcy5fcGFubmVyLmRpc3Bvc2UoKSx0aGlzLl9wYW5uZXI9bnVsbCx0aGlzLnBhbj1udWxsLHRoaXMuX3ZvbHVtZS5kaXNwb3NlKCksdGhpcy5fdm9sdW1lPW51bGwsdGhpcy52b2x1bWU9bnVsbCx0aGlzfSx0LlBhblZvbH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuU29sbz1mdW5jdGlvbigpe3ZhciBlPXQuZGVmYXVsdHMoYXJndW1lbnRzLFtcInNvbG9cIl0sdC5Tb2xvKTt0LkF1ZGlvTm9kZS5jYWxsKHRoaXMpLHRoaXMuaW5wdXQ9dGhpcy5vdXRwdXQ9bmV3IHQuR2Fpbix0aGlzLl9zb2xvQmluZD10aGlzLl9zb2xvZWQuYmluZCh0aGlzKSx0aGlzLmNvbnRleHQub24oXCJzb2xvXCIsdGhpcy5fc29sb0JpbmQpLHRoaXMuc29sbz1lLnNvbG99LHQuZXh0ZW5kKHQuU29sbyx0LkF1ZGlvTm9kZSksdC5Tb2xvLmRlZmF1bHRzPXtzb2xvOiExfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Tb2xvLnByb3RvdHlwZSxcInNvbG9cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzU29sb2VkKCl9LHNldDpmdW5jdGlvbih0KXt0P3RoaXMuX2FkZFNvbG8oKTp0aGlzLl9yZW1vdmVTb2xvKCksdGhpcy5jb250ZXh0LmVtaXQoXCJzb2xvXCIsdGhpcyl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuU29sby5wcm90b3R5cGUsXCJtdXRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuaW5wdXQuZ2Fpbi52YWx1ZX19KSx0LlNvbG8ucHJvdG90eXBlLl9hZGRTb2xvPWZ1bmN0aW9uKCl7dC5pc0FycmF5KHRoaXMuY29udGV4dC5fY3VycmVudFNvbG8pfHwodGhpcy5jb250ZXh0Ll9jdXJyZW50U29sbz1bXSksdGhpcy5faXNTb2xvZWQoKXx8dGhpcy5jb250ZXh0Ll9jdXJyZW50U29sby5wdXNoKHRoaXMpfSx0LlNvbG8ucHJvdG90eXBlLl9yZW1vdmVTb2xvPWZ1bmN0aW9uKCl7aWYodGhpcy5faXNTb2xvZWQoKSl7dmFyIHQ9dGhpcy5jb250ZXh0Ll9jdXJyZW50U29sby5pbmRleE9mKHRoaXMpO3RoaXMuY29udGV4dC5fY3VycmVudFNvbG8uc3BsaWNlKHQsMSl9fSx0LlNvbG8ucHJvdG90eXBlLl9pc1NvbG9lZD1mdW5jdGlvbigpe3JldHVybiEhdC5pc0FycmF5KHRoaXMuY29udGV4dC5fY3VycmVudFNvbG8pJiYoMCE9PXRoaXMuY29udGV4dC5fY3VycmVudFNvbG8ubGVuZ3RoJiYtMSE9PXRoaXMuY29udGV4dC5fY3VycmVudFNvbG8uaW5kZXhPZih0aGlzKSl9LHQuU29sby5wcm90b3R5cGUuX25vU29sb3M9ZnVuY3Rpb24oKXtyZXR1cm4hdC5pc0FycmF5KHRoaXMuY29udGV4dC5fY3VycmVudFNvbG8pfHwwPT09dGhpcy5jb250ZXh0Ll9jdXJyZW50U29sby5sZW5ndGh9LHQuU29sby5wcm90b3R5cGUuX3NvbG9lZD1mdW5jdGlvbigpe3RoaXMuX2lzU29sb2VkKCk/dGhpcy5pbnB1dC5nYWluLnZhbHVlPTE6dGhpcy5fbm9Tb2xvcygpP3RoaXMuaW5wdXQuZ2Fpbi52YWx1ZT0xOnRoaXMuaW5wdXQuZ2Fpbi52YWx1ZT0wfSx0LlNvbG8ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZXh0Lm9mZihcInNvbG9cIix0aGlzLl9zb2xvQmluZCksdGhpcy5fcmVtb3ZlU29sbygpLHRoaXMuX3NvbG9CaW5kPW51bGwsdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzfSx0LlNvbG99KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LldhdmVmb3JtPWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1wic2l6ZVwiXSx0LldhdmVmb3JtKTtlLnR5cGU9dC5BbmFseXNlci5UeXBlLldhdmVmb3JtLHQuQXVkaW9Ob2RlLmNhbGwodGhpcyksdGhpcy5fYW5hbHlzZXI9dGhpcy5pbnB1dD10aGlzLm91dHB1dD1uZXcgdC5BbmFseXNlcihlKX0sdC5leHRlbmQodC5XYXZlZm9ybSx0LkF1ZGlvTm9kZSksdC5XYXZlZm9ybS5kZWZhdWx0cz17c2l6ZToxMDI0fSx0LldhdmVmb3JtLnByb3RvdHlwZS5nZXRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbmFseXNlci5nZXRWYWx1ZSgpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5XYXZlZm9ybS5wcm90b3R5cGUsXCJzaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbmFseXNlci5zaXplfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYW5hbHlzZXIuc2l6ZT10fX0pLHQuV2F2ZWZvcm0ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2FuYWx5c2VyLmRpc3Bvc2UoKSx0aGlzLl9hbmFseXNlcj1udWxsfSx0LldhdmVmb3JtfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5DdHJsSW50ZXJwb2xhdGU9ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJ2YWx1ZXNcIixcImluZGV4XCJdLHQuQ3RybEludGVycG9sYXRlKTt0LmNhbGwodGhpcyksdGhpcy52YWx1ZXM9ZS52YWx1ZXMsdGhpcy5pbmRleD1lLmluZGV4fSx0LmV4dGVuZCh0LkN0cmxJbnRlcnBvbGF0ZSksdC5DdHJsSW50ZXJwb2xhdGUuZGVmYXVsdHM9e2luZGV4OjAsdmFsdWVzOltdfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5DdHJsSW50ZXJwb2xhdGUucHJvdG90eXBlLFwidmFsdWVcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIHQsZSxpLG49dGhpcy5pbmRleDtyZXR1cm4gbj1NYXRoLm1pbihuLHRoaXMudmFsdWVzLmxlbmd0aC0xKSx0PU1hdGguZmxvb3IobiksZT10aGlzLnZhbHVlc1t0XSxpPXRoaXMudmFsdWVzW01hdGguY2VpbChuKV0sdGhpcy5faW50ZXJwb2xhdGUobi10LGUsaSl9fSksdC5DdHJsSW50ZXJwb2xhdGUucHJvdG90eXBlLl9pbnRlcnBvbGF0ZT1mdW5jdGlvbihlLGksbil7dmFyIHMsbyxyLGE7aWYodC5pc0FycmF5KGkpKXtmb3Iocz1bXSxvPTA7bzxpLmxlbmd0aDtvKyspc1tvXT10aGlzLl9pbnRlcnBvbGF0ZShlLGlbb10sbltvXSk7cmV0dXJuIHN9aWYodC5pc09iamVjdChpKSl7cj17fTtmb3IoYSBpbiBpKXJbYV09dGhpcy5faW50ZXJwb2xhdGUoZSxpW2FdLG5bYV0pO3JldHVybiByfXJldHVybiBpPXRoaXMuX3RvTnVtYmVyKGkpLG49dGhpcy5fdG9OdW1iZXIobiksKDEtZSkqaStlKm59LHQuQ3RybEludGVycG9sYXRlLnByb3RvdHlwZS5fdG9OdW1iZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuaXNOdW1iZXIoZSk/ZTp0aGlzLnRvU2Vjb25kcyhlKX0sdC5DdHJsSW50ZXJwb2xhdGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLnZhbHVlcz1udWxsfSx0LkN0cmxJbnRlcnBvbGF0ZX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuQ3RybE1hcmtvdj1mdW5jdGlvbihlLGkpe3QuY2FsbCh0aGlzKSx0aGlzLnZhbHVlcz10LmRlZmF1bHRBcmcoZSx7fSksdGhpcy52YWx1ZT10LmRlZmF1bHRBcmcoaSxPYmplY3Qua2V5cyh0aGlzLnZhbHVlcylbMF0pfSx0LmV4dGVuZCh0LkN0cmxNYXJrb3YpLHQuQ3RybE1hcmtvdi5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3ZhciBlLGksbixzLG8scixhO2lmKHRoaXMudmFsdWVzLmhhc093blByb3BlcnR5KHRoaXMudmFsdWUpKWlmKGU9dGhpcy52YWx1ZXNbdGhpcy52YWx1ZV0sdC5pc0FycmF5KGUpKWZvcihpPXRoaXMuX2dldFByb2JEaXN0cmlidXRpb24oZSksbj1NYXRoLnJhbmRvbSgpLHM9MCxvPTA7bzxpLmxlbmd0aDtvKyspcj1pW29dLG4+cyYmbjxzK3ImJihhPWVbb10sdC5pc09iamVjdChhKT90aGlzLnZhbHVlPWEudmFsdWU6dGhpcy52YWx1ZT1hKSxzKz1yO2Vsc2UgdGhpcy52YWx1ZT1lO3JldHVybiB0aGlzLnZhbHVlfSx0LkN0cmxNYXJrb3YucHJvdG90eXBlLl9nZXRQcm9iRGlzdHJpYnV0aW9uPWZ1bmN0aW9uKGUpe3ZhciBpLG4scyxvPVtdLHI9MCxhPSExO2ZvcihpPTA7aTxlLmxlbmd0aDtpKyspbj1lW2ldLHQuaXNPYmplY3Qobik/KGE9ITAsb1tpXT1uLnByb2JhYmlsaXR5KTpvW2ldPTEvZS5sZW5ndGgscis9b1tpXTtpZihhKWZvcihzPTA7czxvLmxlbmd0aDtzKyspb1tzXT1vW3NdL3I7cmV0dXJuIG99LHQuQ3RybE1hcmtvdi5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMudmFsdWVzPW51bGx9LHQuQ3RybE1hcmtvdn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuQ3RybFBhdHRlcm49ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJ2YWx1ZXNcIixcInR5cGVcIl0sdC5DdHJsUGF0dGVybik7dC5jYWxsKHRoaXMpLHRoaXMudmFsdWVzPWUudmFsdWVzLHRoaXMuaW5kZXg9MCx0aGlzLl90eXBlPW51bGwsdGhpcy5fc2h1ZmZsZWQ9bnVsbCx0aGlzLl9kaXJlY3Rpb249bnVsbCx0aGlzLnR5cGU9ZS50eXBlfSx0LmV4dGVuZCh0LkN0cmxQYXR0ZXJuKSx0LkN0cmxQYXR0ZXJuLlR5cGU9e1VwOlwidXBcIixEb3duOlwiZG93blwiLFVwRG93bjpcInVwRG93blwiLERvd25VcDpcImRvd25VcFwiLEFsdGVybmF0ZVVwOlwiYWx0ZXJuYXRlVXBcIixBbHRlcm5hdGVEb3duOlwiYWx0ZXJuYXRlRG93blwiLFJhbmRvbTpcInJhbmRvbVwiLFJhbmRvbVdhbGs6XCJyYW5kb21XYWxrXCIsUmFuZG9tT25jZTpcInJhbmRvbU9uY2VcIn0sdC5DdHJsUGF0dGVybi5kZWZhdWx0cz17dHlwZTp0LkN0cmxQYXR0ZXJuLlR5cGUuVXAsdmFsdWVzOltdfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5DdHJsUGF0dGVybi5wcm90b3R5cGUsXCJ2YWx1ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtpZigwIT09dGhpcy52YWx1ZXMubGVuZ3RoKXtpZigxPT09dGhpcy52YWx1ZXMubGVuZ3RoKXJldHVybiB0aGlzLnZhbHVlc1swXTt0aGlzLmluZGV4PU1hdGgubWluKHRoaXMuaW5kZXgsdGhpcy52YWx1ZXMubGVuZ3RoLTEpO3ZhciBlPXRoaXMudmFsdWVzW3RoaXMuaW5kZXhdO3JldHVybiB0aGlzLnR5cGU9PT10LkN0cmxQYXR0ZXJuLlR5cGUuUmFuZG9tT25jZSYmKHRoaXMudmFsdWVzLmxlbmd0aCE9PXRoaXMuX3NodWZmbGVkLmxlbmd0aCYmdGhpcy5fc2h1ZmZsZVZhbHVlcygpLGU9dGhpcy52YWx1ZXNbdGhpcy5fc2h1ZmZsZWRbdGhpcy5pbmRleF1dKSxlfX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5DdHJsUGF0dGVybi5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90eXBlfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fdHlwZT1lLHRoaXMuX3NodWZmbGVkPW51bGwsdGhpcy5fdHlwZT09PXQuQ3RybFBhdHRlcm4uVHlwZS5VcHx8dGhpcy5fdHlwZT09PXQuQ3RybFBhdHRlcm4uVHlwZS5VcERvd258fHRoaXMuX3R5cGU9PT10LkN0cmxQYXR0ZXJuLlR5cGUuUmFuZG9tT25jZXx8dGhpcy5fdHlwZT09PXQuQ3RybFBhdHRlcm4uVHlwZS5BbHRlcm5hdGVVcD90aGlzLmluZGV4PTA6dGhpcy5fdHlwZSE9PXQuQ3RybFBhdHRlcm4uVHlwZS5Eb3duJiZ0aGlzLl90eXBlIT09dC5DdHJsUGF0dGVybi5UeXBlLkRvd25VcCYmdGhpcy5fdHlwZSE9PXQuQ3RybFBhdHRlcm4uVHlwZS5BbHRlcm5hdGVEb3dufHwodGhpcy5pbmRleD10aGlzLnZhbHVlcy5sZW5ndGgtMSksdGhpcy5fdHlwZT09PXQuQ3RybFBhdHRlcm4uVHlwZS5VcERvd258fHRoaXMuX3R5cGU9PT10LkN0cmxQYXR0ZXJuLlR5cGUuQWx0ZXJuYXRlVXA/dGhpcy5fZGlyZWN0aW9uPXQuQ3RybFBhdHRlcm4uVHlwZS5VcDp0aGlzLl90eXBlIT09dC5DdHJsUGF0dGVybi5UeXBlLkRvd25VcCYmdGhpcy5fdHlwZSE9PXQuQ3RybFBhdHRlcm4uVHlwZS5BbHRlcm5hdGVEb3dufHwodGhpcy5fZGlyZWN0aW9uPXQuQ3RybFBhdHRlcm4uVHlwZS5Eb3duKSx0aGlzLl90eXBlPT09dC5DdHJsUGF0dGVybi5UeXBlLlJhbmRvbU9uY2U/dGhpcy5fc2h1ZmZsZVZhbHVlcygpOnRoaXMuX3R5cGU9PT10LkN0cmxQYXR0ZXJuLlJhbmRvbSYmKHRoaXMuaW5kZXg9TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKnRoaXMudmFsdWVzLmxlbmd0aCkpfX0pLHQuQ3RybFBhdHRlcm4ucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnR5cGU7cmV0dXJuIGU9PT10LkN0cmxQYXR0ZXJuLlR5cGUuVXA/Kyt0aGlzLmluZGV4Pj10aGlzLnZhbHVlcy5sZW5ndGgmJih0aGlzLmluZGV4PTApOmU9PT10LkN0cmxQYXR0ZXJuLlR5cGUuRG93bj8tLXRoaXMuaW5kZXg8MCYmKHRoaXMuaW5kZXg9dGhpcy52YWx1ZXMubGVuZ3RoLTEpOmU9PT10LkN0cmxQYXR0ZXJuLlR5cGUuVXBEb3dufHxlPT09dC5DdHJsUGF0dGVybi5UeXBlLkRvd25VcD8odGhpcy5fZGlyZWN0aW9uPT09dC5DdHJsUGF0dGVybi5UeXBlLlVwP3RoaXMuaW5kZXgrKzp0aGlzLmluZGV4LS0sdGhpcy5pbmRleDwwPyh0aGlzLmluZGV4PTEsdGhpcy5fZGlyZWN0aW9uPXQuQ3RybFBhdHRlcm4uVHlwZS5VcCk6dGhpcy5pbmRleD49dGhpcy52YWx1ZXMubGVuZ3RoJiYodGhpcy5pbmRleD10aGlzLnZhbHVlcy5sZW5ndGgtMix0aGlzLl9kaXJlY3Rpb249dC5DdHJsUGF0dGVybi5UeXBlLkRvd24pKTplPT09dC5DdHJsUGF0dGVybi5UeXBlLlJhbmRvbT90aGlzLmluZGV4PU1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSp0aGlzLnZhbHVlcy5sZW5ndGgpOmU9PT10LkN0cmxQYXR0ZXJuLlR5cGUuUmFuZG9tV2Fsaz9NYXRoLnJhbmRvbSgpPC41Pyh0aGlzLmluZGV4LS0sdGhpcy5pbmRleD1NYXRoLm1heCh0aGlzLmluZGV4LDApKToodGhpcy5pbmRleCsrLHRoaXMuaW5kZXg9TWF0aC5taW4odGhpcy5pbmRleCx0aGlzLnZhbHVlcy5sZW5ndGgtMSkpOmU9PT10LkN0cmxQYXR0ZXJuLlR5cGUuUmFuZG9tT25jZT8rK3RoaXMuaW5kZXg+PXRoaXMudmFsdWVzLmxlbmd0aCYmKHRoaXMuaW5kZXg9MCx0aGlzLl9zaHVmZmxlVmFsdWVzKCkpOmU9PT10LkN0cmxQYXR0ZXJuLlR5cGUuQWx0ZXJuYXRlVXA/KHRoaXMuX2RpcmVjdGlvbj09PXQuQ3RybFBhdHRlcm4uVHlwZS5VcD8odGhpcy5pbmRleCs9Mix0aGlzLl9kaXJlY3Rpb249dC5DdHJsUGF0dGVybi5UeXBlLkRvd24pOih0aGlzLmluZGV4LT0xLHRoaXMuX2RpcmVjdGlvbj10LkN0cmxQYXR0ZXJuLlR5cGUuVXApLHRoaXMuaW5kZXg+PXRoaXMudmFsdWVzLmxlbmd0aCYmKHRoaXMuaW5kZXg9MCx0aGlzLl9kaXJlY3Rpb249dC5DdHJsUGF0dGVybi5UeXBlLlVwKSk6ZT09PXQuQ3RybFBhdHRlcm4uVHlwZS5BbHRlcm5hdGVEb3duJiYodGhpcy5fZGlyZWN0aW9uPT09dC5DdHJsUGF0dGVybi5UeXBlLlVwPyh0aGlzLmluZGV4Kz0xLHRoaXMuX2RpcmVjdGlvbj10LkN0cmxQYXR0ZXJuLlR5cGUuRG93bik6KHRoaXMuaW5kZXgtPTIsdGhpcy5fZGlyZWN0aW9uPXQuQ3RybFBhdHRlcm4uVHlwZS5VcCksdGhpcy5pbmRleDwwJiYodGhpcy5pbmRleD10aGlzLnZhbHVlcy5sZW5ndGgtMSx0aGlzLl9kaXJlY3Rpb249dC5DdHJsUGF0dGVybi5UeXBlLkRvd24pKSx0aGlzLnZhbHVlfSx0LkN0cmxQYXR0ZXJuLnByb3RvdHlwZS5fc2h1ZmZsZVZhbHVlcz1mdW5jdGlvbigpe3ZhciB0LGUsaT1bXTtmb3IodGhpcy5fc2h1ZmZsZWQ9W10sdD0wO3Q8dGhpcy52YWx1ZXMubGVuZ3RoO3QrKylpW3RdPXQ7Zm9yKDtpLmxlbmd0aD4wOyllPWkuc3BsaWNlKE1hdGguZmxvb3IoaS5sZW5ndGgqTWF0aC5yYW5kb20oKSksMSksdGhpcy5fc2h1ZmZsZWQucHVzaChlWzBdKX0sdC5DdHJsUGF0dGVybi5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuX3NodWZmbGVkPW51bGwsdGhpcy52YWx1ZXM9bnVsbH0sdC5DdHJsUGF0dGVybn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuQ3RybFJhbmRvbT1mdW5jdGlvbigpe3ZhciBlPXQuZGVmYXVsdHMoYXJndW1lbnRzLFtcIm1pblwiLFwibWF4XCJdLHQuQ3RybFJhbmRvbSk7dC5jYWxsKHRoaXMpLHRoaXMubWluPWUubWluLHRoaXMubWF4PWUubWF4LHRoaXMuaW50ZWdlcj1lLmludGVnZXJ9LHQuZXh0ZW5kKHQuQ3RybFJhbmRvbSksdC5DdHJsUmFuZG9tLmRlZmF1bHRzPXttaW46MCxtYXg6MSxpbnRlZ2VyOiExfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5DdHJsUmFuZG9tLnByb3RvdHlwZSxcInZhbHVlXCIse2dldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMudG9TZWNvbmRzKHRoaXMubWluKSxlPXRoaXMudG9TZWNvbmRzKHRoaXMubWF4KSxpPU1hdGgucmFuZG9tKCksbj1pKnQrKDEtaSkqZTtyZXR1cm4gdGhpcy5pbnRlZ2VyJiYobj1NYXRoLmZsb29yKG4pKSxufX0pLHQuQ3RybFJhbmRvbX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHdpbmRvdy5BdWRpb0J1ZmZlciYmIUF1ZGlvQnVmZmVyLnByb3RvdHlwZS5jb3B5VG9DaGFubmVsJiYoQXVkaW9CdWZmZXIucHJvdG90eXBlLmNvcHlUb0NoYW5uZWw9ZnVuY3Rpb24odCxlLGkpe3ZhciBuLHM9dGhpcy5nZXRDaGFubmVsRGF0YShlKTtmb3IoaT1pfHwwLG49MDtuPHMubGVuZ3RoO24rKylzW24raV09dFtuXX0sQXVkaW9CdWZmZXIucHJvdG90eXBlLmNvcHlGcm9tQ2hhbm5lbD1mdW5jdGlvbih0LGUsaSl7dmFyIG4scz10aGlzLmdldENoYW5uZWxEYXRhKGUpO2ZvcihpPWl8fDAsbj0wO248dC5sZW5ndGg7bisrKXRbbl09c1tuK2ldfSksdC5CdWZmZXI9ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJ1cmxcIixcIm9ubG9hZFwiLFwib25lcnJvclwiXSx0LkJ1ZmZlcik7dC5jYWxsKHRoaXMpLHRoaXMuX2J1ZmZlcj1udWxsLHRoaXMuX3JldmVyc2VkPWUucmV2ZXJzZSx0aGlzLl94aHI9bnVsbCxlLnVybCBpbnN0YW5jZW9mIEF1ZGlvQnVmZmVyfHxlLnVybCBpbnN0YW5jZW9mIHQuQnVmZmVyPyh0aGlzLnNldChlLnVybCksZS5vbmxvYWQmJmUub25sb2FkKHRoaXMpKTp0LmlzU3RyaW5nKGUudXJsKSYmdGhpcy5sb2FkKGUudXJsLGUub25sb2FkLGUub25lcnJvcil9LHQuZXh0ZW5kKHQuQnVmZmVyKSx0LkJ1ZmZlci5kZWZhdWx0cz17dXJsOnZvaWQgMCxyZXZlcnNlOiExfSx0LkJ1ZmZlci5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgdC5CdWZmZXI/dGhpcy5fYnVmZmVyPWUuZ2V0KCk6dGhpcy5fYnVmZmVyPWUsdGhpc30sdC5CdWZmZXIucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXJ9LHQuQnVmZmVyLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKGUsaSxuKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocyxvKXt0aGlzLl94aHI9dC5CdWZmZXIubG9hZChlLGZ1bmN0aW9uKHQpe3RoaXMuX3hocj1udWxsLHRoaXMuc2V0KHQpLHModGhpcyksaSYmaSh0aGlzKX0uYmluZCh0aGlzKSxmdW5jdGlvbih0KXt0aGlzLl94aHI9bnVsbCxvKHQpLG4mJm4odCl9LmJpbmQodGhpcykpfS5iaW5kKHRoaXMpKX0sdC5CdWZmZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2J1ZmZlcj1udWxsLHRoaXMuX3hociYmKHQuQnVmZmVyLl9yZW1vdmVGcm9tRG93bmxvYWRRdWV1ZSh0aGlzLl94aHIpLHRoaXMuX3hoci5hYm9ydCgpLHRoaXMuX3hocj1udWxsKSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5CdWZmZXIucHJvdG90eXBlLFwibG9hZGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aD4wfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkJ1ZmZlci5wcm90b3R5cGUsXCJkdXJhdGlvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyP3RoaXMuX2J1ZmZlci5kdXJhdGlvbjowfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkJ1ZmZlci5wcm90b3R5cGUsXCJsZW5ndGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlcj90aGlzLl9idWZmZXIubGVuZ3RoOjB9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQnVmZmVyLnByb3RvdHlwZSxcIm51bWJlck9mQ2hhbm5lbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlcj90aGlzLl9idWZmZXIubnVtYmVyT2ZDaGFubmVsczowfX0pLHQuQnVmZmVyLnByb3RvdHlwZS5mcm9tQXJyYXk9ZnVuY3Rpb24odCl7dmFyIGUsaT10WzBdLmxlbmd0aD4wLG49aT90Lmxlbmd0aDoxLHM9aT90WzBdLmxlbmd0aDp0Lmxlbmd0aCxvPXRoaXMuY29udGV4dC5jcmVhdGVCdWZmZXIobixzLHRoaXMuY29udGV4dC5zYW1wbGVSYXRlKTtmb3IoaXx8MSE9PW58fCh0PVt0XSksZT0wO2U8bjtlKyspby5jb3B5VG9DaGFubmVsKHRbZV0sZSk7cmV0dXJuIHRoaXMuX2J1ZmZlcj1vLHRoaXN9LHQuQnVmZmVyLnByb3RvdHlwZS50b01vbm89ZnVuY3Rpb24oZSl7dmFyIGksbixzLG8scjtpZih0LmlzTnVtYmVyKGUpKXRoaXMuZnJvbUFycmF5KHRoaXMudG9BcnJheShlKSk7ZWxzZXtmb3IoaT1uZXcgRmxvYXQzMkFycmF5KHRoaXMubGVuZ3RoKSxuPXRoaXMubnVtYmVyT2ZDaGFubmVscyxzPTA7czxuO3MrKylmb3Iobz10aGlzLnRvQXJyYXkocykscj0wO3I8by5sZW5ndGg7cisrKWlbcl0rPW9bcl07aT1pLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC9ufSksdGhpcy5mcm9tQXJyYXkoaSl9cmV0dXJuIHRoaXN9LHQuQnVmZmVyLnByb3RvdHlwZS50b0FycmF5PWZ1bmN0aW9uKGUpe3ZhciBpLG47aWYodC5pc051bWJlcihlKSlyZXR1cm4gdGhpcy5nZXRDaGFubmVsRGF0YShlKTtpZigxPT09dGhpcy5udW1iZXJPZkNoYW5uZWxzKXJldHVybiB0aGlzLnRvQXJyYXkoMCk7Zm9yKGk9W10sbj0wO248dGhpcy5udW1iZXJPZkNoYW5uZWxzO24rKylpW25dPXRoaXMuZ2V0Q2hhbm5lbERhdGEobik7cmV0dXJuIGl9LHQuQnVmZmVyLnByb3RvdHlwZS5nZXRDaGFubmVsRGF0YT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYnVmZmVyLmdldENoYW5uZWxEYXRhKHQpfSx0LkJ1ZmZlci5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24oZSxpKXt2YXIgbixzLG8scjtmb3IoaT10LmRlZmF1bHRBcmcoaSx0aGlzLmR1cmF0aW9uKSxuPU1hdGguZmxvb3IodGhpcy5jb250ZXh0LnNhbXBsZVJhdGUqdGhpcy50b1NlY29uZHMoZSkpLHM9TWF0aC5mbG9vcih0aGlzLmNvbnRleHQuc2FtcGxlUmF0ZSp0aGlzLnRvU2Vjb25kcyhpKSksbz1bXSxyPTA7cjx0aGlzLm51bWJlck9mQ2hhbm5lbHM7cisrKW9bcl09dGhpcy50b0FycmF5KHIpLnNsaWNlKG4scyk7cmV0dXJuKG5ldyB0LkJ1ZmZlcikuZnJvbUFycmF5KG8pfSx0LkJ1ZmZlci5wcm90b3R5cGUuX3JldmVyc2U9ZnVuY3Rpb24oKXtpZih0aGlzLmxvYWRlZClmb3IodmFyIHQ9MDt0PHRoaXMubnVtYmVyT2ZDaGFubmVsczt0KyspQXJyYXkucHJvdG90eXBlLnJldmVyc2UuY2FsbCh0aGlzLmdldENoYW5uZWxEYXRhKHQpKTtyZXR1cm4gdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQnVmZmVyLnByb3RvdHlwZSxcInJldmVyc2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JldmVyc2VkfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcmV2ZXJzZWQhPT10JiYodGhpcy5fcmV2ZXJzZWQ9dCx0aGlzLl9yZXZlcnNlKCkpfX0pLHQuRW1pdHRlci5taXhpbih0LkJ1ZmZlciksdC5CdWZmZXIuX2Rvd25sb2FkUXVldWU9W10sdC5CdWZmZXIuYmFzZVVybD1cIlwiLHQuQnVmZmVyLmZyb21BcnJheT1mdW5jdGlvbihlKXtyZXR1cm4obmV3IHQuQnVmZmVyKS5mcm9tQXJyYXkoZSl9LHQuQnVmZmVyLl9yZW1vdmVGcm9tRG93bmxvYWRRdWV1ZT1mdW5jdGlvbihlKXt2YXIgaT10LkJ1ZmZlci5fZG93bmxvYWRRdWV1ZS5pbmRleE9mKGUpOy0xIT09aSYmdC5CdWZmZXIuX2Rvd25sb2FkUXVldWUuc3BsaWNlKGksMSl9LHQuQnVmZmVyLmxvYWQ9ZnVuY3Rpb24oZSxpLG4pe2Z1bmN0aW9uIHMoZSl7aWYodC5CdWZmZXIuX3JlbW92ZUZyb21Eb3dubG9hZFF1ZXVlKHUpLHQuQnVmZmVyLmVtaXQoXCJlcnJvclwiLGUpLCFuKXRocm93IGU7bihlKX1mdW5jdGlvbiBvKCl7dmFyIGUsaT0wXG47Zm9yKGU9MDtlPHQuQnVmZmVyLl9kb3dubG9hZFF1ZXVlLmxlbmd0aDtlKyspaSs9dC5CdWZmZXIuX2Rvd25sb2FkUXVldWVbZV0ucHJvZ3Jlc3M7dC5CdWZmZXIuZW1pdChcInByb2dyZXNzXCIsaS90LkJ1ZmZlci5fZG93bmxvYWRRdWV1ZS5sZW5ndGgpfXZhciByLGEsbCxoLHU7aWYoaT10LmRlZmF1bHRBcmcoaSx0Lm5vT3ApLHI9ZS5tYXRjaCgvXFxbKC4rXFx8PykrXFxdJC8pKXtmb3IoYT1yWzFdLnNwbGl0KFwifFwiKSxsPWFbMF0saD0wO2g8YS5sZW5ndGg7aCsrKWlmKHQuQnVmZmVyLnN1cHBvcnRzVHlwZShhW2hdKSl7bD1hW2hdO2JyZWFrfWU9ZS5yZXBsYWNlKHJbMF0sbCl9cmV0dXJuIHU9bmV3IFhNTEh0dHBSZXF1ZXN0LHUub3BlbihcIkdFVFwiLHQuQnVmZmVyLmJhc2VVcmwrZSwhMCksdS5yZXNwb25zZVR5cGU9XCJhcnJheWJ1ZmZlclwiLHUucHJvZ3Jlc3M9MCx0LkJ1ZmZlci5fZG93bmxvYWRRdWV1ZS5wdXNoKHUpLHUuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixmdW5jdGlvbigpezIwMD09PXUuc3RhdHVzP3QuY29udGV4dC5kZWNvZGVBdWRpb0RhdGEodS5yZXNwb25zZSxmdW5jdGlvbihlKXt1LnByb2dyZXNzPTEsbygpLGkoZSksdC5CdWZmZXIuX3JlbW92ZUZyb21Eb3dubG9hZFF1ZXVlKHUpLDA9PT10LkJ1ZmZlci5fZG93bmxvYWRRdWV1ZS5sZW5ndGgmJnQuQnVmZmVyLmVtaXQoXCJsb2FkXCIpfSxmdW5jdGlvbigpe3QuQnVmZmVyLl9yZW1vdmVGcm9tRG93bmxvYWRRdWV1ZSh1KSxzKFwiVG9uZS5CdWZmZXI6IGNvdWxkIG5vdCBkZWNvZGUgYXVkaW8gZGF0YTogXCIrZSl9KTpzKFwiVG9uZS5CdWZmZXI6IGNvdWxkIG5vdCBsb2NhdGUgZmlsZTogXCIrZSl9KSx1LmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLHMpLHUuYWRkRXZlbnRMaXN0ZW5lcihcInByb2dyZXNzXCIsZnVuY3Rpb24odCl7dC5sZW5ndGhDb21wdXRhYmxlJiYodS5wcm9ncmVzcz10LmxvYWRlZC90LnRvdGFsKi45NSxvKCkpfSksdS5zZW5kKCksdX0sdC5CdWZmZXIuY2FuY2VsRG93bmxvYWRzPWZ1bmN0aW9uKCl7cmV0dXJuIHQuQnVmZmVyLl9kb3dubG9hZFF1ZXVlLnNsaWNlKCkuZm9yRWFjaChmdW5jdGlvbihlKXt0LkJ1ZmZlci5fcmVtb3ZlRnJvbURvd25sb2FkUXVldWUoZSksZS5hYm9ydCgpfSksdC5CdWZmZXJ9LHQuQnVmZmVyLnN1cHBvcnRzVHlwZT1mdW5jdGlvbih0KXt2YXIgZT10LnNwbGl0KFwiLlwiKTtyZXR1cm4gZT1lW2UubGVuZ3RoLTFdLFwiXCIhPT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIikuY2FuUGxheVR5cGUoXCJhdWRpby9cIitlKX0sdC5sb2FkZWQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dC5CdWZmZXIub2ZmKFwibG9hZFwiLGkpLHQuQnVmZmVyLm9mZihcImVycm9yXCIsbil9dmFyIGksbjtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZSxzKXtpPWZ1bmN0aW9uKCl7ZSgpfSxuPWZ1bmN0aW9uKCl7cygpfSx0LkJ1ZmZlci5vbihcImxvYWRcIixpKSx0LkJ1ZmZlci5vbihcImVycm9yXCIsbil9KS50aGVuKGUpLmNhdGNoKGZ1bmN0aW9uKHQpe3Rocm93IGUoKSxuZXcgRXJyb3IodCl9KX0sdC5CdWZmZXJ9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkJ1ZmZlcnM9ZnVuY3Rpb24oZSl7dmFyIGksbixzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7cy5zaGlmdCgpLGk9dC5kZWZhdWx0cyhzLFtcIm9ubG9hZFwiLFwiYmFzZVVybFwiXSx0LkJ1ZmZlcnMpLHQuY2FsbCh0aGlzKSx0aGlzLl9idWZmZXJzPXt9LHRoaXMuYmFzZVVybD1pLmJhc2VVcmwsdGhpcy5fbG9hZGluZ0NvdW50PTA7Zm9yKG4gaW4gZSl0aGlzLl9sb2FkaW5nQ291bnQrKyx0aGlzLmFkZChuLGVbbl0sdGhpcy5fYnVmZmVyTG9hZGVkLmJpbmQodGhpcyxpLm9ubG9hZCkpfSx0LmV4dGVuZCh0LkJ1ZmZlcnMpLHQuQnVmZmVycy5kZWZhdWx0cz17b25sb2FkOnQubm9PcCxiYXNlVXJsOlwiXCJ9LHQuQnVmZmVycy5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9idWZmZXJzLmhhc093blByb3BlcnR5KHQpfSx0LkJ1ZmZlcnMucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtpZih0aGlzLmhhcyh0KSlyZXR1cm4gdGhpcy5fYnVmZmVyc1t0XTt0aHJvdyBuZXcgRXJyb3IoXCJUb25lLkJ1ZmZlcnM6IG5vIGJ1ZmZlciBuYW1lZCBcIit0KX0sdC5CdWZmZXJzLnByb3RvdHlwZS5fYnVmZmVyTG9hZGVkPWZ1bmN0aW9uKHQpezA9PT0tLXRoaXMuX2xvYWRpbmdDb3VudCYmdCYmdCh0aGlzKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQnVmZmVycy5wcm90b3R5cGUsXCJsb2FkZWRcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIHQsZSxpPSEwO2Zvcih0IGluIHRoaXMuX2J1ZmZlcnMpZT10aGlzLmdldCh0KSxpPWkmJmUubG9hZGVkO3JldHVybiBpfX0pLHQuQnVmZmVycy5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGUsaSxuKXtyZXR1cm4gbj10LmRlZmF1bHRBcmcobix0Lm5vT3ApLGkgaW5zdGFuY2VvZiB0LkJ1ZmZlcj8odGhpcy5fYnVmZmVyc1tlXT1pLG4odGhpcykpOmkgaW5zdGFuY2VvZiBBdWRpb0J1ZmZlcj8odGhpcy5fYnVmZmVyc1tlXT1uZXcgdC5CdWZmZXIoaSksbih0aGlzKSk6dC5pc1N0cmluZyhpKSYmKHRoaXMuX2J1ZmZlcnNbZV09bmV3IHQuQnVmZmVyKHRoaXMuYmFzZVVybCtpLG4pKSx0aGlzfSx0LkJ1ZmZlcnMucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7Zm9yKHZhciBlIGluIHRoaXMuX2J1ZmZlcnMpdGhpcy5fYnVmZmVyc1tlXS5kaXNwb3NlKCk7cmV0dXJuIHRoaXMuX2J1ZmZlcnM9bnVsbCx0aGlzfSx0LkJ1ZmZlcnN9KSx0KGZ1bmN0aW9uKHQpe3ZhciBlPXt9O3JldHVybiB0LnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKGksbil7ZS5oYXNPd25Qcm9wZXJ0eShpKXx8KGVbaV09dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKSksbj10LmRlZmF1bHRBcmcobiwwKTt2YXIgcz1uZXcgdC5HYWluKG4sdC5UeXBlLkRlY2liZWxzKTtyZXR1cm4gdGhpcy5vdXRwdXQuY2hhaW4ocyxlW2ldKSxzfSx0LnByb3RvdHlwZS5yZWNlaXZlPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIGUuaGFzT3duUHJvcGVydHkodCl8fChlW3RdPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCkpLGVbdF0uY29ubmVjdCh0aGlzLDAsaSksdGhpc30sdC5Db250ZXh0Lm9uKFwiaW5pdFwiLGZ1bmN0aW9uKHQpe3QuQnVzZXM/ZT10LkJ1c2VzOihlPXt9LHQuQnVzZXM9ZSl9KSx0fSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5EcmF3PWZ1bmN0aW9uKCl7dC5jYWxsKHRoaXMpLHRoaXMuX2V2ZW50cz1uZXcgdC5UaW1lbGluZSx0aGlzLmV4cGlyYXRpb249LjI1LHRoaXMuYW50aWNpcGF0aW9uPS4wMDgsdGhpcy5fYm91bmREcmF3TG9vcD10aGlzLl9kcmF3TG9vcC5iaW5kKHRoaXMpfSx0LmV4dGVuZCh0LkRyYXcpLHQuRHJhdy5wcm90b3R5cGUuc2NoZWR1bGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fZXZlbnRzLmFkZCh7Y2FsbGJhY2s6dCx0aW1lOnRoaXMudG9TZWNvbmRzKGUpfSksMT09PXRoaXMuX2V2ZW50cy5sZW5ndGgmJnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLl9ib3VuZERyYXdMb29wKSx0aGlzfSx0LkRyYXcucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZXZlbnRzLmNhbmNlbCh0aGlzLnRvU2Vjb25kcyh0KSksdGhpc30sdC5EcmF3LnByb3RvdHlwZS5fZHJhd0xvb3A9ZnVuY3Rpb24oKXtmb3IodmFyIGUsaT10Lm5vdygpO3RoaXMuX2V2ZW50cy5sZW5ndGgmJnRoaXMuX2V2ZW50cy5wZWVrKCkudGltZS10aGlzLmFudGljaXBhdGlvbjw9aTspZT10aGlzLl9ldmVudHMuc2hpZnQoKSxpLWUudGltZTw9dGhpcy5leHBpcmF0aW9uJiZlLmNhbGxiYWNrKCk7dGhpcy5fZXZlbnRzLmxlbmd0aD4wJiZyZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5fYm91bmREcmF3TG9vcCl9LHQuRHJhdz1uZXcgdC5EcmF3LHQuRHJhd30pLHQoZnVuY3Rpb24odCl7dC5MaXN0ZW5lcj1mdW5jdGlvbigpe3QuY2FsbCh0aGlzKSx0aGlzLl9vcmllbnRhdGlvbj1bMCwwLDAsMCwwLDBdLHRoaXMuX3Bvc2l0aW9uPVswLDAsMF0sdC5nZXRDb250ZXh0KGZ1bmN0aW9uKCl7dGhpcy5zZXQoZS5kZWZhdWx0cyl9LmJpbmQodGhpcykpfSx0LmV4dGVuZCh0Lkxpc3RlbmVyKSx0Lkxpc3RlbmVyLmRlZmF1bHRzPXtwb3NpdGlvblg6MCxwb3NpdGlvblk6MCxwb3NpdGlvblo6MCxmb3J3YXJkWDowLGZvcndhcmRZOjAsZm9yd2FyZFo6MSx1cFg6MCx1cFk6MSx1cFo6MH0sdC5MaXN0ZW5lci5wcm90b3R5cGUuX3JhbXBUaW1lQ29uc3RhbnQ9LjAxLHQuTGlzdGVuZXIucHJvdG90eXBlLnNldFBvc2l0aW9uPWZ1bmN0aW9uKHQsZSxpKXtpZih0aGlzLmNvbnRleHQubGlzdGVuZXIucG9zaXRpb25YKXt2YXIgbj10aGlzLm5vdygpO3RoaXMuY29udGV4dC5saXN0ZW5lci5wb3NpdGlvblguc2V0VGFyZ2V0QXRUaW1lKHQsbix0aGlzLl9yYW1wVGltZUNvbnN0YW50KSx0aGlzLmNvbnRleHQubGlzdGVuZXIucG9zaXRpb25ZLnNldFRhcmdldEF0VGltZShlLG4sdGhpcy5fcmFtcFRpbWVDb25zdGFudCksdGhpcy5jb250ZXh0Lmxpc3RlbmVyLnBvc2l0aW9uWi5zZXRUYXJnZXRBdFRpbWUoaSxuLHRoaXMuX3JhbXBUaW1lQ29uc3RhbnQpfWVsc2UgdGhpcy5jb250ZXh0Lmxpc3RlbmVyLnNldFBvc2l0aW9uKHQsZSxpKTtyZXR1cm4gdGhpcy5fcG9zaXRpb249QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSx0aGlzfSx0Lkxpc3RlbmVyLnByb3RvdHlwZS5zZXRPcmllbnRhdGlvbj1mdW5jdGlvbih0LGUsaSxuLHMsbyl7aWYodGhpcy5jb250ZXh0Lmxpc3RlbmVyLmZvcndhcmRYKXt2YXIgcj10aGlzLm5vdygpO3RoaXMuY29udGV4dC5saXN0ZW5lci5mb3J3YXJkWC5zZXRUYXJnZXRBdFRpbWUodCxyLHRoaXMuX3JhbXBUaW1lQ29uc3RhbnQpLHRoaXMuY29udGV4dC5saXN0ZW5lci5mb3J3YXJkWS5zZXRUYXJnZXRBdFRpbWUoZSxyLHRoaXMuX3JhbXBUaW1lQ29uc3RhbnQpLHRoaXMuY29udGV4dC5saXN0ZW5lci5mb3J3YXJkWi5zZXRUYXJnZXRBdFRpbWUoaSxyLHRoaXMuX3JhbXBUaW1lQ29uc3RhbnQpLHRoaXMuY29udGV4dC5saXN0ZW5lci51cFguc2V0VGFyZ2V0QXRUaW1lKG4scix0aGlzLl9yYW1wVGltZUNvbnN0YW50KSx0aGlzLmNvbnRleHQubGlzdGVuZXIudXBZLnNldFRhcmdldEF0VGltZShzLHIsdGhpcy5fcmFtcFRpbWVDb25zdGFudCksdGhpcy5jb250ZXh0Lmxpc3RlbmVyLnVwWi5zZXRUYXJnZXRBdFRpbWUobyxyLHRoaXMuX3JhbXBUaW1lQ29uc3RhbnQpfWVsc2UgdGhpcy5jb250ZXh0Lmxpc3RlbmVyLnNldE9yaWVudGF0aW9uKHQsZSxpLG4scyxvKTtyZXR1cm4gdGhpcy5fb3JpZW50YXRpb249QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5MaXN0ZW5lci5wcm90b3R5cGUsXCJwb3NpdGlvblhcIix7c2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3Bvc2l0aW9uWzBdPXQsdGhpcy5zZXRQb3NpdGlvbi5hcHBseSh0aGlzLHRoaXMuX3Bvc2l0aW9uKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Bvc2l0aW9uWzBdfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lkxpc3RlbmVyLnByb3RvdHlwZSxcInBvc2l0aW9uWVwiLHtzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcG9zaXRpb25bMV09dCx0aGlzLnNldFBvc2l0aW9uLmFwcGx5KHRoaXMsdGhpcy5fcG9zaXRpb24pfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9zaXRpb25bMV19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTGlzdGVuZXIucHJvdG90eXBlLFwicG9zaXRpb25aXCIse3NldDpmdW5jdGlvbih0KXt0aGlzLl9wb3NpdGlvblsyXT10LHRoaXMuc2V0UG9zaXRpb24uYXBwbHkodGhpcyx0aGlzLl9wb3NpdGlvbil9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb3NpdGlvblsyXX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5MaXN0ZW5lci5wcm90b3R5cGUsXCJmb3J3YXJkWFwiLHtzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3JpZW50YXRpb25bMF09dCx0aGlzLnNldE9yaWVudGF0aW9uLmFwcGx5KHRoaXMsdGhpcy5fb3JpZW50YXRpb24pfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3JpZW50YXRpb25bMF19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTGlzdGVuZXIucHJvdG90eXBlLFwiZm9yd2FyZFlcIix7c2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29yaWVudGF0aW9uWzFdPXQsdGhpcy5zZXRPcmllbnRhdGlvbi5hcHBseSh0aGlzLHRoaXMuX29yaWVudGF0aW9uKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29yaWVudGF0aW9uWzFdfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lkxpc3RlbmVyLnByb3RvdHlwZSxcImZvcndhcmRaXCIse3NldDpmdW5jdGlvbih0KXt0aGlzLl9vcmllbnRhdGlvblsyXT10LHRoaXMuc2V0T3JpZW50YXRpb24uYXBwbHkodGhpcyx0aGlzLl9vcmllbnRhdGlvbil9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmllbnRhdGlvblsyXX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5MaXN0ZW5lci5wcm90b3R5cGUsXCJ1cFhcIix7c2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29yaWVudGF0aW9uWzNdPXQsdGhpcy5zZXRPcmllbnRhdGlvbi5hcHBseSh0aGlzLHRoaXMuX29yaWVudGF0aW9uKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29yaWVudGF0aW9uWzNdfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lkxpc3RlbmVyLnByb3RvdHlwZSxcInVwWVwiLHtzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3JpZW50YXRpb25bNF09dCx0aGlzLnNldE9yaWVudGF0aW9uLmFwcGx5KHRoaXMsdGhpcy5fb3JpZW50YXRpb24pfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3JpZW50YXRpb25bNF19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTGlzdGVuZXIucHJvdG90eXBlLFwidXBaXCIse3NldDpmdW5jdGlvbih0KXt0aGlzLl9vcmllbnRhdGlvbls1XT10LHRoaXMuc2V0T3JpZW50YXRpb24uYXBwbHkodGhpcyx0aGlzLl9vcmllbnRhdGlvbil9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmllbnRhdGlvbls1XX19KSx0Lkxpc3RlbmVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29yaWVudGF0aW9uPW51bGwsdGhpcy5fcG9zaXRpb249bnVsbCx0aGlzfTt2YXIgZT10Lkxpc3RlbmVyO3JldHVybiB0Lkxpc3RlbmVyPW5ldyBlLHQuQ29udGV4dC5vbihcImluaXRcIixmdW5jdGlvbihpKXtpLkxpc3RlbmVyIGluc3RhbmNlb2YgZT90Lkxpc3RlbmVyPWkuTGlzdGVuZXI6dC5MaXN0ZW5lcj1uZXcgZSxpLkxpc3RlbmVyPXQuTGlzdGVuZXJ9KSx0Lkxpc3RlbmVyfSksdChmdW5jdGlvbih0KXtyZXR1cm4hd2luZG93Lmhhc093blByb3BlcnR5KFwiT2ZmbGluZUF1ZGlvQ29udGV4dFwiKSYmd2luZG93Lmhhc093blByb3BlcnR5KFwid2Via2l0T2ZmbGluZUF1ZGlvQ29udGV4dFwiKSYmKHdpbmRvdy5PZmZsaW5lQXVkaW9Db250ZXh0PXdpbmRvdy53ZWJraXRPZmZsaW5lQXVkaW9Db250ZXh0KSx0Lk9mZmxpbmVDb250ZXh0PWZ1bmN0aW9uKGUsaSxuKXt2YXIgcz1uZXcgT2ZmbGluZUF1ZGlvQ29udGV4dChlLGkqbixuKTt0LkNvbnRleHQuY2FsbCh0aGlzLHtjb250ZXh0OnMsY2xvY2tTb3VyY2U6XCJvZmZsaW5lXCIsbG9va0FoZWFkOjAsdXBkYXRlSW50ZXJ2YWw6MTI4L259KSx0aGlzLl9kdXJhdGlvbj1pLHRoaXMuX2N1cnJlbnRUaW1lPTB9LHQuZXh0ZW5kKHQuT2ZmbGluZUNvbnRleHQsdC5Db250ZXh0KSx0Lk9mZmxpbmVDb250ZXh0LnByb3RvdHlwZS5ub3c9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudFRpbWV9LHQuT2ZmbGluZUNvbnRleHQucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe2Zvcig7dGhpcy5fZHVyYXRpb24tdGhpcy5fY3VycmVudFRpbWU+PTA7KXRoaXMuZW1pdChcInRpY2tcIiksdGhpcy5fY3VycmVudFRpbWUrPXRoaXMuYmxvY2tUaW1lO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0KXt0aGlzLl9jb250ZXh0Lm9uY29tcGxldGU9ZnVuY3Rpb24oZSl7dChlLnJlbmRlcmVkQnVmZmVyKX0sdGhpcy5fY29udGV4dC5zdGFydFJlbmRlcmluZygpfS5iaW5kKHRoaXMpKX0sdC5PZmZsaW5lQ29udGV4dC5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLl9jb250ZXh0PW51bGx9LHQuT2ZmbGluZUNvbnRleHR9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0Lk9mZmxpbmU9ZnVuY3Rpb24oZSxpKXt2YXIgbixzPXQuY29udGV4dC5zYW1wbGVSYXRlLG89dC5jb250ZXh0LHI9bmV3IHQuT2ZmbGluZUNvbnRleHQoMixpLHMpO3JldHVybiB0LmNvbnRleHQ9cixlKHQuVHJhbnNwb3J0KSxuPXIucmVuZGVyKCksdC5jb250ZXh0PW8sbi50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdC5CdWZmZXIoZSl9KX0sdC5PZmZsaW5lfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5FZmZlY3Q9ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJ3ZXRcIl0sdC5FZmZlY3QpO3QuQXVkaW9Ob2RlLmNhbGwodGhpcyksdGhpcy5jcmVhdGVJbnNPdXRzKDEsMSksdGhpcy5fZHJ5V2V0PW5ldyB0LkNyb3NzRmFkZShlLndldCksdGhpcy53ZXQ9dGhpcy5fZHJ5V2V0LmZhZGUsdGhpcy5lZmZlY3RTZW5kPW5ldyB0LkdhaW4sdGhpcy5lZmZlY3RSZXR1cm49bmV3IHQuR2Fpbix0aGlzLmlucHV0LmNvbm5lY3QodGhpcy5fZHJ5V2V0LmEpLHRoaXMuaW5wdXQuY29ubmVjdCh0aGlzLmVmZmVjdFNlbmQpLHRoaXMuZWZmZWN0UmV0dXJuLmNvbm5lY3QodGhpcy5fZHJ5V2V0LmIpLHRoaXMuX2RyeVdldC5jb25uZWN0KHRoaXMub3V0cHV0KSx0aGlzLl9yZWFkT25seShbXCJ3ZXRcIl0pfSx0LmV4dGVuZCh0LkVmZmVjdCx0LkF1ZGlvTm9kZSksdC5FZmZlY3QuZGVmYXVsdHM9e3dldDoxfSx0LkVmZmVjdC5wcm90b3R5cGUuY29ubmVjdEVmZmVjdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5lZmZlY3RTZW5kLmNoYWluKHQsdGhpcy5lZmZlY3RSZXR1cm4pLHRoaXN9LHQuRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZHJ5V2V0LmRpc3Bvc2UoKSx0aGlzLl9kcnlXZXQ9bnVsbCx0aGlzLmVmZmVjdFNlbmQuZGlzcG9zZSgpLHRoaXMuZWZmZWN0U2VuZD1udWxsLHRoaXMuZWZmZWN0UmV0dXJuLmRpc3Bvc2UoKSx0aGlzLmVmZmVjdFJldHVybj1udWxsLHRoaXMuX3dyaXRhYmxlKFtcIndldFwiXSksdGhpcy53ZXQ9bnVsbCx0aGlzfSx0LkVmZmVjdH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuQXV0b0ZpbHRlcj1mdW5jdGlvbigpe3ZhciBlPXQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImZyZXF1ZW5jeVwiLFwiYmFzZUZyZXF1ZW5jeVwiLFwib2N0YXZlc1wiXSx0LkF1dG9GaWx0ZXIpO3QuRWZmZWN0LmNhbGwodGhpcyxlKSx0aGlzLl9sZm89bmV3IHQuTEZPKHtmcmVxdWVuY3k6ZS5mcmVxdWVuY3ksYW1wbGl0dWRlOmUuZGVwdGh9KSx0aGlzLmRlcHRoPXRoaXMuX2xmby5hbXBsaXR1ZGUsdGhpcy5mcmVxdWVuY3k9dGhpcy5fbGZvLmZyZXF1ZW5jeSx0aGlzLmZpbHRlcj1uZXcgdC5GaWx0ZXIoZS5maWx0ZXIpLHRoaXMuX29jdGF2ZXM9MCx0aGlzLmNvbm5lY3RFZmZlY3QodGhpcy5maWx0ZXIpLHRoaXMuX2xmby5jb25uZWN0KHRoaXMuZmlsdGVyLmZyZXF1ZW5jeSksdGhpcy50eXBlPWUudHlwZSx0aGlzLl9yZWFkT25seShbXCJmcmVxdWVuY3lcIixcImRlcHRoXCJdKSx0aGlzLm9jdGF2ZXM9ZS5vY3RhdmVzLHRoaXMuYmFzZUZyZXF1ZW5jeT1lLmJhc2VGcmVxdWVuY3l9LHQuZXh0ZW5kKHQuQXV0b0ZpbHRlcix0LkVmZmVjdCksdC5BdXRvRmlsdGVyLmRlZmF1bHRzPXtmcmVxdWVuY3k6MSx0eXBlOlwic2luZVwiLGRlcHRoOjEsYmFzZUZyZXF1ZW5jeToyMDAsb2N0YXZlczoyLjYsZmlsdGVyOnt0eXBlOlwibG93cGFzc1wiLHJvbGxvZmY6LTEyLFE6MX19LHQuQXV0b0ZpbHRlci5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2xmby5zdGFydCh0KSx0aGlzfSx0LkF1dG9GaWx0ZXIucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2xmby5zdG9wKHQpLHRoaXN9LHQuQXV0b0ZpbHRlci5wcm90b3R5cGUuc3luYz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbGZvLnN5bmModCksdGhpc30sdC5BdXRvRmlsdGVyLnByb3RvdHlwZS51bnN5bmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGZvLnVuc3luYygpLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkF1dG9GaWx0ZXIucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGZvLnR5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sZm8udHlwZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkF1dG9GaWx0ZXIucHJvdG90eXBlLFwiYmFzZUZyZXF1ZW5jeVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGZvLm1pbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xmby5taW49dGhpcy50b0ZyZXF1ZW5jeSh0KSx0aGlzLm9jdGF2ZXM9dGhpcy5fb2N0YXZlc319KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5BdXRvRmlsdGVyLnByb3RvdHlwZSxcIm9jdGF2ZXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29jdGF2ZXN9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vY3RhdmVzPXQsdGhpcy5fbGZvLm1heD10aGlzLmJhc2VGcmVxdWVuY3kqTWF0aC5wb3coMix0KX19KSx0LkF1dG9GaWx0ZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9sZm8uZGlzcG9zZSgpLHRoaXMuX2xmbz1udWxsLHRoaXMuZmlsdGVyLmRpc3Bvc2UoKSx0aGlzLmZpbHRlcj1udWxsLHRoaXMuX3dyaXRhYmxlKFtcImZyZXF1ZW5jeVwiLFwiZGVwdGhcIl0pLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5kZXB0aD1udWxsLHRoaXN9LHQuQXV0b0ZpbHRlcn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuQXV0b1Bhbm5lcj1mdW5jdGlvbigpe3ZhciBlPXQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImZyZXF1ZW5jeVwiXSx0LkF1dG9QYW5uZXIpO3QuRWZmZWN0LmNhbGwodGhpcyxlKSx0aGlzLl9sZm89bmV3IHQuTEZPKHtmcmVxdWVuY3k6ZS5mcmVxdWVuY3ksYW1wbGl0dWRlOmUuZGVwdGgsbWluOi0xLG1heDoxfSksdGhpcy5kZXB0aD10aGlzLl9sZm8uYW1wbGl0dWRlLHRoaXMuX3Bhbm5lcj1uZXcgdC5QYW5uZXIsdGhpcy5mcmVxdWVuY3k9dGhpcy5fbGZvLmZyZXF1ZW5jeSx0aGlzLmNvbm5lY3RFZmZlY3QodGhpcy5fcGFubmVyKSx0aGlzLl9sZm8uY29ubmVjdCh0aGlzLl9wYW5uZXIucGFuKSx0aGlzLnR5cGU9ZS50eXBlLHRoaXMuX3JlYWRPbmx5KFtcImRlcHRoXCIsXCJmcmVxdWVuY3lcIl0pfSx0LmV4dGVuZCh0LkF1dG9QYW5uZXIsdC5FZmZlY3QpLHQuQXV0b1Bhbm5lci5kZWZhdWx0cz17ZnJlcXVlbmN5OjEsdHlwZTpcInNpbmVcIixkZXB0aDoxfSx0LkF1dG9QYW5uZXIucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9sZm8uc3RhcnQodCksdGhpc30sdC5BdXRvUGFubmVyLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9sZm8uc3RvcCh0KSx0aGlzfSx0LkF1dG9QYW5uZXIucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2xmby5zeW5jKHQpLHRoaXN9LHQuQXV0b1Bhbm5lci5wcm90b3R5cGUudW5zeW5jPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xmby51bnN5bmMoKSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5BdXRvUGFubmVyLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xmby50eXBlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGZvLnR5cGU9dH19KSx0LkF1dG9QYW5uZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9sZm8uZGlzcG9zZSgpLHRoaXMuX2xmbz1udWxsLHRoaXMuX3Bhbm5lci5kaXNwb3NlKCksdGhpcy5fcGFubmVyPW51bGwsdGhpcy5fd3JpdGFibGUoW1wiZGVwdGhcIixcImZyZXF1ZW5jeVwiXSksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLmRlcHRoPW51bGwsdGhpc30sdC5BdXRvUGFubmVyfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5BdXRvV2FoPWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiYmFzZUZyZXF1ZW5jeVwiLFwib2N0YXZlc1wiLFwic2Vuc2l0aXZpdHlcIl0sdC5BdXRvV2FoKTt0LkVmZmVjdC5jYWxsKHRoaXMsZSksdGhpcy5mb2xsb3dlcj1uZXcgdC5Gb2xsb3dlcihlLmZvbGxvd2VyKSx0aGlzLl9zd2VlcFJhbmdlPW5ldyB0LlNjYWxlRXhwKDAsMSwuNSksdGhpcy5fYmFzZUZyZXF1ZW5jeT1lLmJhc2VGcmVxdWVuY3ksdGhpcy5fb2N0YXZlcz1lLm9jdGF2ZXMsdGhpcy5faW5wdXRCb29zdD1uZXcgdC5HYWluLHRoaXMuX2JhbmRwYXNzPW5ldyB0LkZpbHRlcih7cm9sbG9mZjotNDgsZnJlcXVlbmN5OjAsUTplLlF9KSx0aGlzLl9wZWFraW5nPW5ldyB0LkZpbHRlcigwLFwicGVha2luZ1wiKSx0aGlzLl9wZWFraW5nLmdhaW4udmFsdWU9ZS5nYWluLHRoaXMuZ2Fpbj10aGlzLl9wZWFraW5nLmdhaW4sdGhpcy5RPXRoaXMuX2JhbmRwYXNzLlEsdGhpcy5lZmZlY3RTZW5kLmNoYWluKHRoaXMuX2lucHV0Qm9vc3QsdGhpcy5mb2xsb3dlcix0aGlzLl9zd2VlcFJhbmdlKSx0aGlzLl9zd2VlcFJhbmdlLmNvbm5lY3QodGhpcy5fYmFuZHBhc3MuZnJlcXVlbmN5KSx0aGlzLl9zd2VlcFJhbmdlLmNvbm5lY3QodGhpcy5fcGVha2luZy5mcmVxdWVuY3kpLHRoaXMuZWZmZWN0U2VuZC5jaGFpbih0aGlzLl9iYW5kcGFzcyx0aGlzLl9wZWFraW5nLHRoaXMuZWZmZWN0UmV0dXJuKSx0aGlzLl9zZXRTd2VlcFJhbmdlKCksdGhpcy5zZW5zaXRpdml0eT1lLnNlbnNpdGl2aXR5LHRoaXMuX3JlYWRPbmx5KFtcImdhaW5cIixcIlFcIl0pfSx0LmV4dGVuZCh0LkF1dG9XYWgsdC5FZmZlY3QpLHQuQXV0b1dhaC5kZWZhdWx0cz17YmFzZUZyZXF1ZW5jeToxMDAsb2N0YXZlczo2LHNlbnNpdGl2aXR5OjAsUToyLGdhaW46Mixmb2xsb3dlcjp7YXR0YWNrOi4zLHJlbGVhc2U6LjV9fSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5BdXRvV2FoLnByb3RvdHlwZSxcIm9jdGF2ZXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29jdGF2ZXN9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vY3RhdmVzPXQsdGhpcy5fc2V0U3dlZXBSYW5nZSgpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkF1dG9XYWgucHJvdG90eXBlLFwiYmFzZUZyZXF1ZW5jeVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmFzZUZyZXF1ZW5jeX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2Jhc2VGcmVxdWVuY3k9dCx0aGlzLl9zZXRTd2VlcFJhbmdlKCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQXV0b1dhaC5wcm90b3R5cGUsXCJzZW5zaXRpdml0eVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5nYWluVG9EYigxL3RoaXMuX2lucHV0Qm9vc3QuZ2Fpbi52YWx1ZSl9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9pbnB1dEJvb3N0LmdhaW4udmFsdWU9MS90LmRiVG9HYWluKGUpfX0pLHQuQXV0b1dhaC5wcm90b3R5cGUuX3NldFN3ZWVwUmFuZ2U9ZnVuY3Rpb24oKXt0aGlzLl9zd2VlcFJhbmdlLm1pbj10aGlzLl9iYXNlRnJlcXVlbmN5LHRoaXMuX3N3ZWVwUmFuZ2UubWF4PU1hdGgubWluKHRoaXMuX2Jhc2VGcmVxdWVuY3kqTWF0aC5wb3coMix0aGlzLl9vY3RhdmVzKSx0aGlzLmNvbnRleHQuc2FtcGxlUmF0ZS8yKX0sdC5BdXRvV2FoLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5mb2xsb3dlci5kaXNwb3NlKCksdGhpcy5mb2xsb3dlcj1udWxsLHRoaXMuX3N3ZWVwUmFuZ2UuZGlzcG9zZSgpLHRoaXMuX3N3ZWVwUmFuZ2U9bnVsbCx0aGlzLl9iYW5kcGFzcy5kaXNwb3NlKCksdGhpcy5fYmFuZHBhc3M9bnVsbCx0aGlzLl9wZWFraW5nLmRpc3Bvc2UoKSx0aGlzLl9wZWFraW5nPW51bGwsdGhpcy5faW5wdXRCb29zdC5kaXNwb3NlKCksdGhpcy5faW5wdXRCb29zdD1udWxsLHRoaXMuX3dyaXRhYmxlKFtcImdhaW5cIixcIlFcIl0pLHRoaXMuZ2Fpbj1udWxsLHRoaXMuUT1udWxsLHRoaXN9LHQuQXV0b1dhaH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuQml0Q3J1c2hlcj1mdW5jdGlvbigpe3ZhciBlLGk9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiYml0c1wiXSx0LkJpdENydXNoZXIpO3QuRWZmZWN0LmNhbGwodGhpcyxpKSxlPTEvTWF0aC5wb3coMixpLmJpdHMtMSksdGhpcy5fc3VidHJhY3Q9bmV3IHQuU3VidHJhY3QsdGhpcy5fbW9kdWxvPW5ldyB0Lk1vZHVsbyhlKSx0aGlzLl9iaXRzPWkuYml0cyx0aGlzLmVmZmVjdFNlbmQuZmFuKHRoaXMuX3N1YnRyYWN0LHRoaXMuX21vZHVsbyksdGhpcy5fbW9kdWxvLmNvbm5lY3QodGhpcy5fc3VidHJhY3QsMCwxKSx0aGlzLl9zdWJ0cmFjdC5jb25uZWN0KHRoaXMuZWZmZWN0UmV0dXJuKX0sdC5leHRlbmQodC5CaXRDcnVzaGVyLHQuRWZmZWN0KSx0LkJpdENydXNoZXIuZGVmYXVsdHM9e2JpdHM6NH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQml0Q3J1c2hlci5wcm90b3R5cGUsXCJiaXRzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iaXRzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYml0cz10O3ZhciBlPTEvTWF0aC5wb3coMix0LTEpO3RoaXMuX21vZHVsby52YWx1ZT1lfX0pLHQuQml0Q3J1c2hlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkVmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3N1YnRyYWN0LmRpc3Bvc2UoKSx0aGlzLl9zdWJ0cmFjdD1udWxsLHRoaXMuX21vZHVsby5kaXNwb3NlKCksdGhpcy5fbW9kdWxvPW51bGwsdGhpc30sdC5CaXRDcnVzaGVyfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5DaGVieXNoZXY9ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJvcmRlclwiXSx0LkNoZWJ5c2hldik7dC5FZmZlY3QuY2FsbCh0aGlzLGUpLHRoaXMuX3NoYXBlcj1uZXcgdC5XYXZlU2hhcGVyKDQwOTYpLHRoaXMuX29yZGVyPWUub3JkZXIsdGhpcy5jb25uZWN0RWZmZWN0KHRoaXMuX3NoYXBlciksdGhpcy5vcmRlcj1lLm9yZGVyLHRoaXMub3ZlcnNhbXBsZT1lLm92ZXJzYW1wbGV9LHQuZXh0ZW5kKHQuQ2hlYnlzaGV2LHQuRWZmZWN0KSx0LkNoZWJ5c2hldi5kZWZhdWx0cz17b3JkZXI6MSxvdmVyc2FtcGxlOlwibm9uZVwifSx0LkNoZWJ5c2hldi5wcm90b3R5cGUuX2dldENvZWZmaWNpZW50PWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gaS5oYXNPd25Qcm9wZXJ0eShlKT9pW2VdOihpW2VdPTA9PT1lPzA6MT09PWU/dDoyKnQqdGhpcy5fZ2V0Q29lZmZpY2llbnQodCxlLTEsaSktdGhpcy5fZ2V0Q29lZmZpY2llbnQodCxlLTIsaSksaVtlXSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkNoZWJ5c2hldi5wcm90b3R5cGUsXCJvcmRlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3JkZXJ9LHNldDpmdW5jdGlvbih0KXt2YXIgZSxpLG4scztmb3IodGhpcy5fb3JkZXI9dCxlPW5ldyBBcnJheSg0MDk2KSxpPWUubGVuZ3RoLG49MDtuPGk7KytuKXM9MipuL2ktMSxlW25dPTA9PT1zPzA6dGhpcy5fZ2V0Q29lZmZpY2llbnQocyx0LHt9KTt0aGlzLl9zaGFwZXIuY3VydmU9ZX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5DaGVieXNoZXYucHJvdG90eXBlLFwib3ZlcnNhbXBsZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2hhcGVyLm92ZXJzYW1wbGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zaGFwZXIub3ZlcnNhbXBsZT10fX0pLHQuQ2hlYnlzaGV2LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fc2hhcGVyLmRpc3Bvc2UoKSx0aGlzLl9zaGFwZXI9bnVsbCx0aGlzfSx0LkNoZWJ5c2hldn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuU3RlcmVvRWZmZWN0PWZ1bmN0aW9uKCl7dC5BdWRpb05vZGUuY2FsbCh0aGlzKTt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJ3ZXRcIl0sdC5FZmZlY3QpO3RoaXMuY3JlYXRlSW5zT3V0cygxLDEpLHRoaXMuX2RyeVdldD1uZXcgdC5Dcm9zc0ZhZGUoZS53ZXQpLHRoaXMud2V0PXRoaXMuX2RyeVdldC5mYWRlLHRoaXMuX3NwbGl0PW5ldyB0LlNwbGl0LHRoaXMuZWZmZWN0U2VuZEw9dGhpcy5fc3BsaXQubGVmdCx0aGlzLmVmZmVjdFNlbmRSPXRoaXMuX3NwbGl0LnJpZ2h0LHRoaXMuX21lcmdlPW5ldyB0Lk1lcmdlLHRoaXMuZWZmZWN0UmV0dXJuTD10aGlzLl9tZXJnZS5sZWZ0LHRoaXMuZWZmZWN0UmV0dXJuUj10aGlzLl9tZXJnZS5yaWdodCx0aGlzLmlucHV0LmNvbm5lY3QodGhpcy5fc3BsaXQpLHRoaXMuaW5wdXQuY29ubmVjdCh0aGlzLl9kcnlXZXQsMCwwKSx0aGlzLl9tZXJnZS5jb25uZWN0KHRoaXMuX2RyeVdldCwwLDEpLHRoaXMuX2RyeVdldC5jb25uZWN0KHRoaXMub3V0cHV0KSx0aGlzLl9yZWFkT25seShbXCJ3ZXRcIl0pfSx0LmV4dGVuZCh0LlN0ZXJlb0VmZmVjdCx0LkVmZmVjdCksdC5TdGVyZW9FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9kcnlXZXQuZGlzcG9zZSgpLHRoaXMuX2RyeVdldD1udWxsLHRoaXMuX3NwbGl0LmRpc3Bvc2UoKSx0aGlzLl9zcGxpdD1udWxsLHRoaXMuX21lcmdlLmRpc3Bvc2UoKSx0aGlzLl9tZXJnZT1udWxsLHRoaXMuZWZmZWN0U2VuZEw9bnVsbCx0aGlzLmVmZmVjdFNlbmRSPW51bGwsdGhpcy5lZmZlY3RSZXR1cm5MPW51bGwsdGhpcy5lZmZlY3RSZXR1cm5SPW51bGwsdGhpcy5fd3JpdGFibGUoW1wid2V0XCJdKSx0aGlzLndldD1udWxsLHRoaXN9LHQuU3RlcmVvRWZmZWN0fSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5GZWVkYmFja0VmZmVjdD1mdW5jdGlvbigpe3ZhciBlPXQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImZlZWRiYWNrXCJdLHQuRmVlZGJhY2tFZmZlY3QpO3QuRWZmZWN0LmNhbGwodGhpcyxlKSx0aGlzLl9mZWVkYmFja0dhaW49bmV3IHQuR2FpbihlLmZlZWRiYWNrLHQuVHlwZS5Ob3JtYWxSYW5nZSksdGhpcy5mZWVkYmFjaz10aGlzLl9mZWVkYmFja0dhaW4uZ2Fpbix0aGlzLmVmZmVjdFJldHVybi5jaGFpbih0aGlzLl9mZWVkYmFja0dhaW4sdGhpcy5lZmZlY3RTZW5kKSx0aGlzLl9yZWFkT25seShbXCJmZWVkYmFja1wiXSl9LHQuZXh0ZW5kKHQuRmVlZGJhY2tFZmZlY3QsdC5FZmZlY3QpLHQuRmVlZGJhY2tFZmZlY3QuZGVmYXVsdHM9e2ZlZWRiYWNrOi4xMjV9LHQuRmVlZGJhY2tFZmZlY3QucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJmZWVkYmFja1wiXSksdGhpcy5fZmVlZGJhY2tHYWluLmRpc3Bvc2UoKSx0aGlzLl9mZWVkYmFja0dhaW49bnVsbCx0aGlzLmZlZWRiYWNrPW51bGwsdGhpc30sdC5GZWVkYmFja0VmZmVjdH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuU3RlcmVvWEZlZWRiYWNrRWZmZWN0PWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiZmVlZGJhY2tcIl0sdC5GZWVkYmFja0VmZmVjdCk7dC5TdGVyZW9FZmZlY3QuY2FsbCh0aGlzLGUpLHRoaXMuZmVlZGJhY2s9bmV3IHQuU2lnbmFsKGUuZmVlZGJhY2ssdC5UeXBlLk5vcm1hbFJhbmdlKSx0aGlzLl9mZWVkYmFja0xSPW5ldyB0LkdhaW4sdGhpcy5fZmVlZGJhY2tSTD1uZXcgdC5HYWluLHRoaXMuZWZmZWN0UmV0dXJuTC5jaGFpbih0aGlzLl9mZWVkYmFja0xSLHRoaXMuZWZmZWN0U2VuZFIpLHRoaXMuZWZmZWN0UmV0dXJuUi5jaGFpbih0aGlzLl9mZWVkYmFja1JMLHRoaXMuZWZmZWN0U2VuZEwpLHRoaXMuZmVlZGJhY2suZmFuKHRoaXMuX2ZlZWRiYWNrTFIuZ2Fpbix0aGlzLl9mZWVkYmFja1JMLmdhaW4pLHRoaXMuX3JlYWRPbmx5KFtcImZlZWRiYWNrXCJdKX0sdC5leHRlbmQodC5TdGVyZW9YRmVlZGJhY2tFZmZlY3QsdC5TdGVyZW9FZmZlY3QpLHQuU3RlcmVvWEZlZWRiYWNrRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuU3RlcmVvRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wiZmVlZGJhY2tcIl0pLHRoaXMuZmVlZGJhY2suZGlzcG9zZSgpLHRoaXMuZmVlZGJhY2s9bnVsbCx0aGlzLl9mZWVkYmFja0xSLmRpc3Bvc2UoKSx0aGlzLl9mZWVkYmFja0xSPW51bGwsdGhpcy5fZmVlZGJhY2tSTC5kaXNwb3NlKCksdGhpcy5fZmVlZGJhY2tSTD1udWxsLHRoaXN9LHQuU3RlcmVvWEZlZWRiYWNrRWZmZWN0fSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5DaG9ydXM9ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcImRlbGF5VGltZVwiLFwiZGVwdGhcIl0sdC5DaG9ydXMpO3QuU3RlcmVvWEZlZWRiYWNrRWZmZWN0LmNhbGwodGhpcyxlKSx0aGlzLl9kZXB0aD1lLmRlcHRoLHRoaXMuX2RlbGF5VGltZT1lLmRlbGF5VGltZS8xZTMsdGhpcy5fbGZvTD1uZXcgdC5MRk8oe2ZyZXF1ZW5jeTplLmZyZXF1ZW5jeSxtaW46MCxtYXg6MX0pLHRoaXMuX2xmb1I9bmV3IHQuTEZPKHtmcmVxdWVuY3k6ZS5mcmVxdWVuY3ksbWluOjAsbWF4OjEscGhhc2U6MTgwfSksdGhpcy5fZGVsYXlOb2RlTD1uZXcgdC5EZWxheSx0aGlzLl9kZWxheU5vZGVSPW5ldyB0LkRlbGF5LHRoaXMuZnJlcXVlbmN5PXRoaXMuX2xmb0wuZnJlcXVlbmN5LHRoaXMuZWZmZWN0U2VuZEwuY2hhaW4odGhpcy5fZGVsYXlOb2RlTCx0aGlzLmVmZmVjdFJldHVybkwpLHRoaXMuZWZmZWN0U2VuZFIuY2hhaW4odGhpcy5fZGVsYXlOb2RlUix0aGlzLmVmZmVjdFJldHVyblIpLHRoaXMuZWZmZWN0U2VuZEwuY29ubmVjdCh0aGlzLmVmZmVjdFJldHVybkwpLHRoaXMuZWZmZWN0U2VuZFIuY29ubmVjdCh0aGlzLmVmZmVjdFJldHVyblIpLHRoaXMuX2xmb0wuY29ubmVjdCh0aGlzLl9kZWxheU5vZGVMLmRlbGF5VGltZSksdGhpcy5fbGZvUi5jb25uZWN0KHRoaXMuX2RlbGF5Tm9kZVIuZGVsYXlUaW1lKSx0aGlzLl9sZm9MLnN0YXJ0KCksdGhpcy5fbGZvUi5zdGFydCgpLHRoaXMuX2xmb0wuZnJlcXVlbmN5LmNvbm5lY3QodGhpcy5fbGZvUi5mcmVxdWVuY3kpLHRoaXMuZGVwdGg9dGhpcy5fZGVwdGgsdGhpcy5mcmVxdWVuY3kudmFsdWU9ZS5mcmVxdWVuY3ksdGhpcy50eXBlPWUudHlwZSx0aGlzLl9yZWFkT25seShbXCJmcmVxdWVuY3lcIl0pLHRoaXMuc3ByZWFkPWUuc3ByZWFkfSx0LmV4dGVuZCh0LkNob3J1cyx0LlN0ZXJlb1hGZWVkYmFja0VmZmVjdCksdC5DaG9ydXMuZGVmYXVsdHM9e2ZyZXF1ZW5jeToxLjUsZGVsYXlUaW1lOjMuNSxkZXB0aDouNyxmZWVkYmFjazouMSx0eXBlOlwic2luZVwiLHNwcmVhZDoxODB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkNob3J1cy5wcm90b3R5cGUsXCJkZXB0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVwdGh9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kZXB0aD10O3ZhciBlPXRoaXMuX2RlbGF5VGltZSp0O3RoaXMuX2xmb0wubWluPU1hdGgubWF4KHRoaXMuX2RlbGF5VGltZS1lLDApLHRoaXMuX2xmb0wubWF4PXRoaXMuX2RlbGF5VGltZStlLHRoaXMuX2xmb1IubWluPU1hdGgubWF4KHRoaXMuX2RlbGF5VGltZS1lLDApLHRoaXMuX2xmb1IubWF4PXRoaXMuX2RlbGF5VGltZStlfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkNob3J1cy5wcm90b3R5cGUsXCJkZWxheVRpbWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDFlMyp0aGlzLl9kZWxheVRpbWV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kZWxheVRpbWU9dC8xZTMsdGhpcy5kZXB0aD10aGlzLl9kZXB0aH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5DaG9ydXMucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGZvTC50eXBlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGZvTC50eXBlPXQsdGhpcy5fbGZvUi50eXBlPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQ2hvcnVzLnByb3RvdHlwZSxcInNwcmVhZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGZvUi5waGFzZS10aGlzLl9sZm9MLnBoYXNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGZvTC5waGFzZT05MC10LzIsdGhpcy5fbGZvUi5waGFzZT10LzIrOTB9fSksdC5DaG9ydXMucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5TdGVyZW9YRmVlZGJhY2tFZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9sZm9MLmRpc3Bvc2UoKSx0aGlzLl9sZm9MPW51bGwsdGhpcy5fbGZvUi5kaXNwb3NlKCksdGhpcy5fbGZvUj1udWxsLHRoaXMuX2RlbGF5Tm9kZUwuZGlzcG9zZSgpLHRoaXMuX2RlbGF5Tm9kZUw9bnVsbCx0aGlzLl9kZWxheU5vZGVSLmRpc3Bvc2UoKSx0aGlzLl9kZWxheU5vZGVSPW51bGwsdGhpcy5fd3JpdGFibGUoXCJmcmVxdWVuY3lcIiksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzfSx0LkNob3J1c30pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuQ29udm9sdmVyPWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1widXJsXCIsXCJvbmxvYWRcIl0sdC5Db252b2x2ZXIpO3QuRWZmZWN0LmNhbGwodGhpcyxlKSx0aGlzLl9jb252b2x2ZXI9dGhpcy5jb250ZXh0LmNyZWF0ZUNvbnZvbHZlcigpLHRoaXMuX2J1ZmZlcj1uZXcgdC5CdWZmZXIsdC5pc1N0cmluZyhlLnVybCk/dGhpcy5fYnVmZmVyLmxvYWQoZS51cmwsZnVuY3Rpb24odCl7dGhpcy5idWZmZXI9dCxlLm9ubG9hZCgpfS5iaW5kKHRoaXMpKTplLnVybCYmKHRoaXMuYnVmZmVyPWUudXJsLGUub25sb2FkKCkpLHRoaXMuY29ubmVjdEVmZmVjdCh0aGlzLl9jb252b2x2ZXIpfSx0LmV4dGVuZCh0LkNvbnZvbHZlcix0LkVmZmVjdCksdC5Db252b2x2ZXIuZGVmYXVsdHM9e29ubG9hZDp0Lm5vT3B9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkNvbnZvbHZlci5wcm90b3R5cGUsXCJidWZmZXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlci5nZXQoKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2J1ZmZlci5zZXQodCksdGhpcy5fY29udm9sdmVyLmJ1ZmZlcj10aGlzLl9idWZmZXIuZ2V0KCl9fSksdC5Db252b2x2ZXIucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fYnVmZmVyLmxvYWQodCxmdW5jdGlvbih0KXt0aGlzLmJ1ZmZlcj10LGUmJmUoKX0uYmluZCh0aGlzKSl9LHQuQ29udm9sdmVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fY29udm9sdmVyLmRpc2Nvbm5lY3QoKSx0aGlzLl9jb252b2x2ZXI9bnVsbCx0aGlzLl9idWZmZXIuZGlzcG9zZSgpLHRoaXMuX2J1ZmZlcj1udWxsLHRoaXN9LHQuQ29udm9sdmVyfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5EaXN0b3J0aW9uPWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiZGlzdG9ydGlvblwiXSx0LkRpc3RvcnRpb24pO3QuRWZmZWN0LmNhbGwodGhpcyxlKSx0aGlzLl9zaGFwZXI9bmV3IHQuV2F2ZVNoYXBlcig0MDk2KSx0aGlzLl9kaXN0b3J0aW9uPWUuZGlzdG9ydGlvbix0aGlzLmNvbm5lY3RFZmZlY3QodGhpcy5fc2hhcGVyKSx0aGlzLmRpc3RvcnRpb249ZS5kaXN0b3J0aW9uLHRoaXMub3ZlcnNhbXBsZT1lLm92ZXJzYW1wbGV9LHQuZXh0ZW5kKHQuRGlzdG9ydGlvbix0LkVmZmVjdCksdC5EaXN0b3J0aW9uLmRlZmF1bHRzPXtkaXN0b3J0aW9uOi40LG92ZXJzYW1wbGU6XCJub25lXCJ9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkRpc3RvcnRpb24ucHJvdG90eXBlLFwiZGlzdG9ydGlvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGlzdG9ydGlvbn0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlLGk7dGhpcy5fZGlzdG9ydGlvbj10LGU9MTAwKnQsaT1NYXRoLlBJLzE4MCx0aGlzLl9zaGFwZXIuc2V0TWFwKGZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLmFicyh0KTwuMDAxPzA6KDMrZSkqdCoyMCppLyhNYXRoLlBJK2UqTWF0aC5hYnModCkpfSl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRGlzdG9ydGlvbi5wcm90b3R5cGUsXCJvdmVyc2FtcGxlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaGFwZXIub3ZlcnNhbXBsZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NoYXBlci5vdmVyc2FtcGxlPXR9fSksdC5EaXN0b3J0aW9uLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fc2hhcGVyLmRpc3Bvc2UoKSx0aGlzLl9zaGFwZXI9bnVsbCx0aGlzfSx0LkRpc3RvcnRpb259KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkZlZWRiYWNrRGVsYXk9ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJkZWxheVRpbWVcIixcImZlZWRiYWNrXCJdLHQuRmVlZGJhY2tEZWxheSk7dC5GZWVkYmFja0VmZmVjdC5jYWxsKHRoaXMsZSksdGhpcy5fZGVsYXlOb2RlPW5ldyB0LkRlbGF5KGUuZGVsYXlUaW1lKSx0aGlzLmRlbGF5VGltZT10aGlzLl9kZWxheU5vZGUuZGVsYXlUaW1lLHRoaXMuY29ubmVjdEVmZmVjdCh0aGlzLl9kZWxheU5vZGUpLHRoaXMuX3JlYWRPbmx5KFtcImRlbGF5VGltZVwiXSl9LHQuZXh0ZW5kKHQuRmVlZGJhY2tEZWxheSx0LkZlZWRiYWNrRWZmZWN0KSx0LkZlZWRiYWNrRGVsYXkuZGVmYXVsdHM9e2RlbGF5VGltZTouMjV9LHQuRmVlZGJhY2tEZWxheS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkZlZWRiYWNrRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZGVsYXlOb2RlLmRpc3Bvc2UoKSx0aGlzLl9kZWxheU5vZGU9bnVsbCx0aGlzLl93cml0YWJsZShbXCJkZWxheVRpbWVcIl0pLHRoaXMuZGVsYXlUaW1lPW51bGwsdGhpc30sdC5GZWVkYmFja0RlbGF5fSksdChmdW5jdGlvbih0KXt2YXIgZT1bMTU1Ny80NDEwMCwxNjE3LzQ0MTAwLDE0OTEvNDQxMDAsMTQyMi80NDEwMCwxMjc3LzQ0MTAwLDEzNTYvNDQxMDAsMTE4OC80NDEwMCwxMTE2LzQ0MTAwXSxpPVsyMjUsNTU2LDQ0MSwzNDFdO3JldHVybiB0LkZyZWV2ZXJiPWZ1bmN0aW9uKCl7dmFyIG4scyxvLHIsYSxsLGg9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1wicm9vbVNpemVcIixcImRhbXBlbmluZ1wiXSx0LkZyZWV2ZXJiKTtmb3IodC5TdGVyZW9FZmZlY3QuY2FsbCh0aGlzLGgpLHRoaXMucm9vbVNpemU9bmV3IHQuU2lnbmFsKGgucm9vbVNpemUsdC5UeXBlLk5vcm1hbFJhbmdlKSx0aGlzLmRhbXBlbmluZz1uZXcgdC5TaWduYWwoaC5kYW1wZW5pbmcsdC5UeXBlLkZyZXF1ZW5jeSksdGhpcy5fY29tYkZpbHRlcnM9W10sdGhpcy5fYWxscGFzc0ZpbHRlcnNMPVtdLHRoaXMuX2FsbHBhc3NGaWx0ZXJzUj1bXSxuPTA7bjxpLmxlbmd0aDtuKyspcz10aGlzLmNvbnRleHQuY3JlYXRlQmlxdWFkRmlsdGVyKCkscy50eXBlPVwiYWxscGFzc1wiLHMuZnJlcXVlbmN5LnZhbHVlPWlbbl0sdGhpcy5fYWxscGFzc0ZpbHRlcnNMLnB1c2gocyk7Zm9yKG89MDtvPGkubGVuZ3RoO28rKylyPXRoaXMuY29udGV4dC5jcmVhdGVCaXF1YWRGaWx0ZXIoKSxyLnR5cGU9XCJhbGxwYXNzXCIsci5mcmVxdWVuY3kudmFsdWU9aVtvXSx0aGlzLl9hbGxwYXNzRmlsdGVyc1IucHVzaChyKTtmb3IoYT0wO2E8ZS5sZW5ndGg7YSsrKWw9bmV3IHQuTG93cGFzc0NvbWJGaWx0ZXIoZVthXSksYTxlLmxlbmd0aC8yP3RoaXMuZWZmZWN0U2VuZEwuY2hhaW4obCx0aGlzLl9hbGxwYXNzRmlsdGVyc0xbMF0pOnRoaXMuZWZmZWN0U2VuZFIuY2hhaW4obCx0aGlzLl9hbGxwYXNzRmlsdGVyc1JbMF0pLHRoaXMucm9vbVNpemUuY29ubmVjdChsLnJlc29uYW5jZSksdGhpcy5kYW1wZW5pbmcuY29ubmVjdChsLmRhbXBlbmluZyksdGhpcy5fY29tYkZpbHRlcnMucHVzaChsKTt0LmNvbm5lY3RTZXJpZXMuYXBwbHkodCx0aGlzLl9hbGxwYXNzRmlsdGVyc0wpLHQuY29ubmVjdFNlcmllcy5hcHBseSh0LHRoaXMuX2FsbHBhc3NGaWx0ZXJzUiksdGhpcy5fYWxscGFzc0ZpbHRlcnNMW3RoaXMuX2FsbHBhc3NGaWx0ZXJzTC5sZW5ndGgtMV0uY29ubmVjdCh0aGlzLmVmZmVjdFJldHVybkwpLHRoaXMuX2FsbHBhc3NGaWx0ZXJzUlt0aGlzLl9hbGxwYXNzRmlsdGVyc1IubGVuZ3RoLTFdLmNvbm5lY3QodGhpcy5lZmZlY3RSZXR1cm5SKSx0aGlzLl9yZWFkT25seShbXCJyb29tU2l6ZVwiLFwiZGFtcGVuaW5nXCJdKX0sdC5leHRlbmQodC5GcmVldmVyYix0LlN0ZXJlb0VmZmVjdCksdC5GcmVldmVyYi5kZWZhdWx0cz17cm9vbVNpemU6LjcsZGFtcGVuaW5nOjNlM30sdC5GcmVldmVyYi5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3ZhciBlLGksbjtmb3IodC5TdGVyZW9FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSxlPTA7ZTx0aGlzLl9hbGxwYXNzRmlsdGVyc0wubGVuZ3RoO2UrKyl0aGlzLl9hbGxwYXNzRmlsdGVyc0xbZV0uZGlzY29ubmVjdCgpLHRoaXMuX2FsbHBhc3NGaWx0ZXJzTFtlXT1udWxsO2Zvcih0aGlzLl9hbGxwYXNzRmlsdGVyc0w9bnVsbCxpPTA7aTx0aGlzLl9hbGxwYXNzRmlsdGVyc1IubGVuZ3RoO2krKyl0aGlzLl9hbGxwYXNzRmlsdGVyc1JbaV0uZGlzY29ubmVjdCgpLHRoaXMuX2FsbHBhc3NGaWx0ZXJzUltpXT1udWxsO2Zvcih0aGlzLl9hbGxwYXNzRmlsdGVyc1I9bnVsbCxuPTA7bjx0aGlzLl9jb21iRmlsdGVycy5sZW5ndGg7bisrKXRoaXMuX2NvbWJGaWx0ZXJzW25dLmRpc3Bvc2UoKSx0aGlzLl9jb21iRmlsdGVyc1tuXT1udWxsO3JldHVybiB0aGlzLl9jb21iRmlsdGVycz1udWxsLHRoaXMuX3dyaXRhYmxlKFtcInJvb21TaXplXCIsXCJkYW1wZW5pbmdcIl0pLHRoaXMucm9vbVNpemUuZGlzcG9zZSgpLHRoaXMucm9vbVNpemU9bnVsbCx0aGlzLmRhbXBlbmluZy5kaXNwb3NlKCksdGhpcy5kYW1wZW5pbmc9bnVsbCx0aGlzfSx0LkZyZWV2ZXJifSksdChmdW5jdGlvbih0KXt2YXIgZT1bLjA2NzQ4LC4wNjQwNCwuMDgyMTIsLjA5MDA0XSxpPVsuNzczLC44MDIsLjc1MywuNzMzXSxuPVszNDcsMTEzLDM3XTtyZXR1cm4gdC5KQ1JldmVyYj1mdW5jdGlvbigpe3ZhciBzLG8scixhLGw9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1wicm9vbVNpemVcIl0sdC5KQ1JldmVyYik7Zm9yKHQuU3RlcmVvRWZmZWN0LmNhbGwodGhpcyxsKSx0aGlzLnJvb21TaXplPW5ldyB0LlNpZ25hbChsLnJvb21TaXplLHQuVHlwZS5Ob3JtYWxSYW5nZSksdGhpcy5fc2NhbGVSb29tU2l6ZT1uZXcgdC5TY2FsZSgtLjczMywuMTk3KSx0aGlzLl9hbGxwYXNzRmlsdGVycz1bXSx0aGlzLl9mZWVkYmFja0NvbWJGaWx0ZXJzPVtdLHM9MDtzPG4ubGVuZ3RoO3MrKylvPXRoaXMuY29udGV4dC5jcmVhdGVCaXF1YWRGaWx0ZXIoKSxvLnR5cGU9XCJhbGxwYXNzXCIsby5mcmVxdWVuY3kudmFsdWU9bltzXSx0aGlzLl9hbGxwYXNzRmlsdGVycy5wdXNoKG8pO2ZvcihyPTA7cjxlLmxlbmd0aDtyKyspYT1uZXcgdC5GZWVkYmFja0NvbWJGaWx0ZXIoZVtyXSwuMSksdGhpcy5fc2NhbGVSb29tU2l6ZS5jb25uZWN0KGEucmVzb25hbmNlKSxhLnJlc29uYW5jZS52YWx1ZT1pW3JdLHRoaXMuX2FsbHBhc3NGaWx0ZXJzW3RoaXMuX2FsbHBhc3NGaWx0ZXJzLmxlbmd0aC0xXS5jb25uZWN0KGEpLHI8ZS5sZW5ndGgvMj9hLmNvbm5lY3QodGhpcy5lZmZlY3RSZXR1cm5MKTphLmNvbm5lY3QodGhpcy5lZmZlY3RSZXR1cm5SKSx0aGlzLl9mZWVkYmFja0NvbWJGaWx0ZXJzLnB1c2goYSk7dGhpcy5yb29tU2l6ZS5jb25uZWN0KHRoaXMuX3NjYWxlUm9vbVNpemUpLHQuY29ubmVjdFNlcmllcy5hcHBseSh0LHRoaXMuX2FsbHBhc3NGaWx0ZXJzKSx0aGlzLmVmZmVjdFNlbmRMLmNvbm5lY3QodGhpcy5fYWxscGFzc0ZpbHRlcnNbMF0pLHRoaXMuZWZmZWN0U2VuZFIuY29ubmVjdCh0aGlzLl9hbGxwYXNzRmlsdGVyc1swXSksdGhpcy5fcmVhZE9ubHkoW1wicm9vbVNpemVcIl0pfSx0LmV4dGVuZCh0LkpDUmV2ZXJiLHQuU3RlcmVvRWZmZWN0KSx0LkpDUmV2ZXJiLmRlZmF1bHRzPXtyb29tU2l6ZTouNX0sdC5KQ1JldmVyYi5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3ZhciBlLGk7Zm9yKHQuU3RlcmVvRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksZT0wO2U8dGhpcy5fYWxscGFzc0ZpbHRlcnMubGVuZ3RoO2UrKyl0aGlzLl9hbGxwYXNzRmlsdGVyc1tlXS5kaXNjb25uZWN0KCksdGhpcy5fYWxscGFzc0ZpbHRlcnNbZV09bnVsbDtmb3IodGhpcy5fYWxscGFzc0ZpbHRlcnM9bnVsbCxpPTA7aTx0aGlzLl9mZWVkYmFja0NvbWJGaWx0ZXJzLmxlbmd0aDtpKyspdGhpcy5fZmVlZGJhY2tDb21iRmlsdGVyc1tpXS5kaXNwb3NlKCksdGhpcy5fZmVlZGJhY2tDb21iRmlsdGVyc1tpXT1udWxsO3JldHVybiB0aGlzLl9mZWVkYmFja0NvbWJGaWx0ZXJzPW51bGwsdGhpcy5fd3JpdGFibGUoW1wicm9vbVNpemVcIl0pLHRoaXMucm9vbVNpemUuZGlzcG9zZSgpLHRoaXMucm9vbVNpemU9bnVsbCx0aGlzLl9zY2FsZVJvb21TaXplLmRpc3Bvc2UoKSx0aGlzLl9zY2FsZVJvb21TaXplPW51bGwsdGhpc30sdC5KQ1JldmVyYn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuTWlkU2lkZUVmZmVjdD1mdW5jdGlvbigpe3QuRWZmZWN0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLl9taWRTaWRlU3BsaXQ9bmV3IHQuTWlkU2lkZVNwbGl0LHRoaXMuX21pZFNpZGVNZXJnZT1uZXcgdC5NaWRTaWRlTWVyZ2UsdGhpcy5taWRTZW5kPXRoaXMuX21pZFNpZGVTcGxpdC5taWQsdGhpcy5zaWRlU2VuZD10aGlzLl9taWRTaWRlU3BsaXQuc2lkZSx0aGlzLm1pZFJldHVybj10aGlzLl9taWRTaWRlTWVyZ2UubWlkLHRoaXMuc2lkZVJldHVybj10aGlzLl9taWRTaWRlTWVyZ2Uuc2lkZSx0aGlzLmVmZmVjdFNlbmQuY29ubmVjdCh0aGlzLl9taWRTaWRlU3BsaXQpLHRoaXMuX21pZFNpZGVNZXJnZS5jb25uZWN0KHRoaXMuZWZmZWN0UmV0dXJuKX0sdC5leHRlbmQodC5NaWRTaWRlRWZmZWN0LHQuRWZmZWN0KSx0Lk1pZFNpZGVFZmZlY3QucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9taWRTaWRlU3BsaXQuZGlzcG9zZSgpLHRoaXMuX21pZFNpZGVTcGxpdD1udWxsLHRoaXMuX21pZFNpZGVNZXJnZS5kaXNwb3NlKCksdGhpcy5fbWlkU2lkZU1lcmdlPW51bGwsdGhpcy5taWRTZW5kPW51bGwsdGhpcy5zaWRlU2VuZD1udWxsLHRoaXMubWlkUmV0dXJuPW51bGwsdGhpcy5zaWRlUmV0dXJuPW51bGwsdGhpc30sdC5NaWRTaWRlRWZmZWN0fSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5QaGFzZXI9ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcIm9jdGF2ZXNcIixcImJhc2VGcmVxdWVuY3lcIl0sdC5QaGFzZXIpO3QuU3RlcmVvRWZmZWN0LmNhbGwodGhpcyxlKSx0aGlzLl9sZm9MPW5ldyB0LkxGTyhlLmZyZXF1ZW5jeSwwLDEpLHRoaXMuX2xmb1I9bmV3IHQuTEZPKGUuZnJlcXVlbmN5LDAsMSksdGhpcy5fbGZvUi5waGFzZT0xODAsdGhpcy5fYmFzZUZyZXF1ZW5jeT1lLmJhc2VGcmVxdWVuY3ksdGhpcy5fb2N0YXZlcz1lLm9jdGF2ZXMsdGhpcy5RPW5ldyB0LlNpZ25hbChlLlEsdC5UeXBlLlBvc2l0aXZlKSx0aGlzLl9maWx0ZXJzTD10aGlzLl9tYWtlRmlsdGVycyhlLnN0YWdlcyx0aGlzLl9sZm9MLHRoaXMuUSksdGhpcy5fZmlsdGVyc1I9dGhpcy5fbWFrZUZpbHRlcnMoZS5zdGFnZXMsdGhpcy5fbGZvUix0aGlzLlEpLHRoaXMuZnJlcXVlbmN5PXRoaXMuX2xmb0wuZnJlcXVlbmN5LHRoaXMuZnJlcXVlbmN5LnZhbHVlPWUuZnJlcXVlbmN5LHRoaXMuZWZmZWN0U2VuZEwuY29ubmVjdCh0aGlzLl9maWx0ZXJzTFswXSksdGhpcy5lZmZlY3RTZW5kUi5jb25uZWN0KHRoaXMuX2ZpbHRlcnNSWzBdKSx0aGlzLl9maWx0ZXJzTFtlLnN0YWdlcy0xXS5jb25uZWN0KHRoaXMuZWZmZWN0UmV0dXJuTCksdGhpcy5fZmlsdGVyc1JbZS5zdGFnZXMtMV0uY29ubmVjdCh0aGlzLmVmZmVjdFJldHVyblIpLHRoaXMuX2xmb0wuZnJlcXVlbmN5LmNvbm5lY3QodGhpcy5fbGZvUi5mcmVxdWVuY3kpLHRoaXMuYmFzZUZyZXF1ZW5jeT1lLmJhc2VGcmVxdWVuY3ksdGhpcy5vY3RhdmVzPWUub2N0YXZlcyx0aGlzLl9sZm9MLnN0YXJ0KCksdGhpcy5fbGZvUi5zdGFydCgpLHRoaXMuX3JlYWRPbmx5KFtcImZyZXF1ZW5jeVwiLFwiUVwiXSl9LHQuZXh0ZW5kKHQuUGhhc2VyLHQuU3RlcmVvRWZmZWN0KSx0LlBoYXNlci5kZWZhdWx0cz17ZnJlcXVlbmN5Oi41LG9jdGF2ZXM6MyxzdGFnZXM6MTAsUToxMCxiYXNlRnJlcXVlbmN5OjM1MH0sdC5QaGFzZXIucHJvdG90eXBlLl9tYWtlRmlsdGVycz1mdW5jdGlvbihlLGksbil7dmFyIHMsbyxyPW5ldyBBcnJheShlKTtmb3Iocz0wO3M8ZTtzKyspbz10aGlzLmNvbnRleHQuY3JlYXRlQmlxdWFkRmlsdGVyKCksby50eXBlPVwiYWxscGFzc1wiLG4uY29ubmVjdChvLlEpLGkuY29ubmVjdChvLmZyZXF1ZW5jeSkscltzXT1vO3JldHVybiB0LmNvbm5lY3RTZXJpZXMuYXBwbHkodCxyKSxyfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QaGFzZXIucHJvdG90eXBlLFwib2N0YXZlc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2N0YXZlc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29jdGF2ZXM9dDt2YXIgZT10aGlzLl9iYXNlRnJlcXVlbmN5Kk1hdGgucG93KDIsdCk7dGhpcy5fbGZvTC5tYXg9ZSx0aGlzLl9sZm9SLm1heD1lfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBoYXNlci5wcm90b3R5cGUsXCJiYXNlRnJlcXVlbmN5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYXNlRnJlcXVlbmN5fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFzZUZyZXF1ZW5jeT10LHRoaXMuX2xmb0wubWluPXQsdGhpcy5fbGZvUi5taW49dCx0aGlzLm9jdGF2ZXM9dGhpcy5fb2N0YXZlc319KSx0LlBoYXNlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3ZhciBlLGk7Zm9yKHQuU3RlcmVvRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wiZnJlcXVlbmN5XCIsXCJRXCJdKSx0aGlzLlEuZGlzcG9zZSgpLHRoaXMuUT1udWxsLHRoaXMuX2xmb0wuZGlzcG9zZSgpLHRoaXMuX2xmb0w9bnVsbCx0aGlzLl9sZm9SLmRpc3Bvc2UoKSx0aGlzLl9sZm9SPW51bGwsZT0wO2U8dGhpcy5fZmlsdGVyc0wubGVuZ3RoO2UrKyl0aGlzLl9maWx0ZXJzTFtlXS5kaXNjb25uZWN0KCksdGhpcy5fZmlsdGVyc0xbZV09bnVsbDtmb3IodGhpcy5fZmlsdGVyc0w9bnVsbCxpPTA7aTx0aGlzLl9maWx0ZXJzUi5sZW5ndGg7aSsrKXRoaXMuX2ZpbHRlcnNSW2ldLmRpc2Nvbm5lY3QoKSx0aGlzLl9maWx0ZXJzUltpXT1udWxsO3JldHVybiB0aGlzLl9maWx0ZXJzUj1udWxsLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpc30sdC5QaGFzZXJ9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlBpbmdQb25nRGVsYXk9ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJkZWxheVRpbWVcIixcImZlZWRiYWNrXCJdLHQuUGluZ1BvbmdEZWxheSk7dC5TdGVyZW9YRmVlZGJhY2tFZmZlY3QuY2FsbCh0aGlzLGUpLHRoaXMuX2xlZnREZWxheT1uZXcgdC5EZWxheSgwLGUubWF4RGVsYXlUaW1lKSx0aGlzLl9yaWdodERlbGF5PW5ldyB0LkRlbGF5KDAsZS5tYXhEZWxheVRpbWUpLHRoaXMuX3JpZ2h0UHJlRGVsYXk9bmV3IHQuRGVsYXkoMCxlLm1heERlbGF5VGltZSksdGhpcy5kZWxheVRpbWU9bmV3IHQuU2lnbmFsKGUuZGVsYXlUaW1lLHQuVHlwZS5UaW1lKSx0aGlzLmVmZmVjdFNlbmRMLmNoYWluKHRoaXMuX2xlZnREZWxheSx0aGlzLmVmZmVjdFJldHVybkwpLHRoaXMuZWZmZWN0U2VuZFIuY2hhaW4odGhpcy5fcmlnaHRQcmVEZWxheSx0aGlzLl9yaWdodERlbGF5LHRoaXMuZWZmZWN0UmV0dXJuUiksdGhpcy5kZWxheVRpbWUuZmFuKHRoaXMuX2xlZnREZWxheS5kZWxheVRpbWUsdGhpcy5fcmlnaHREZWxheS5kZWxheVRpbWUsdGhpcy5fcmlnaHRQcmVEZWxheS5kZWxheVRpbWUpLHRoaXMuX2ZlZWRiYWNrTFIuZGlzY29ubmVjdCgpLHRoaXMuX2ZlZWRiYWNrTFIuY29ubmVjdCh0aGlzLl9yaWdodERlbGF5KSx0aGlzLl9yZWFkT25seShbXCJkZWxheVRpbWVcIl0pfSx0LmV4dGVuZCh0LlBpbmdQb25nRGVsYXksdC5TdGVyZW9YRmVlZGJhY2tFZmZlY3QpLHQuUGluZ1BvbmdEZWxheS5kZWZhdWx0cz17ZGVsYXlUaW1lOi4yNSxtYXhEZWxheVRpbWU6MX0sdC5QaW5nUG9uZ0RlbGF5LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuU3RlcmVvWEZlZWRiYWNrRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fbGVmdERlbGF5LmRpc3Bvc2UoKSx0aGlzLl9sZWZ0RGVsYXk9bnVsbCx0aGlzLl9yaWdodERlbGF5LmRpc3Bvc2UoKSx0aGlzLl9yaWdodERlbGF5PW51bGwsdGhpcy5fcmlnaHRQcmVEZWxheS5kaXNwb3NlKCksdGhpcy5fcmlnaHRQcmVEZWxheT1udWxsLHRoaXMuX3dyaXRhYmxlKFtcImRlbGF5VGltZVwiXSksdGhpcy5kZWxheVRpbWUuZGlzcG9zZSgpLHRoaXMuZGVsYXlUaW1lPW51bGwsdGhpc30sdC5QaW5nUG9uZ0RlbGF5fSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5QaXRjaFNoaWZ0PWZ1bmN0aW9uKCl7dmFyIGUsaT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJwaXRjaFwiXSx0LlBpdGNoU2hpZnQpO3QuRmVlZGJhY2tFZmZlY3QuY2FsbCh0aGlzLGkpLHRoaXMuX2ZyZXF1ZW5jeT1uZXcgdC5TaWduYWwoMCksdGhpcy5fZGVsYXlBPW5ldyB0LkRlbGF5KDAsMSksdGhpcy5fbGZvQT1uZXcgdC5MRk8oe21pbjowLG1heDouMSx0eXBlOlwic2F3dG9vdGhcIn0pLmNvbm5lY3QodGhpcy5fZGVsYXlBLmRlbGF5VGltZSksdGhpcy5fZGVsYXlCPW5ldyB0LkRlbGF5KDAsMSksdGhpcy5fbGZvQj1uZXcgdC5MRk8oe21pbjowLG1heDouMSx0eXBlOlwic2F3dG9vdGhcIixwaGFzZToxODB9KS5jb25uZWN0KHRoaXMuX2RlbGF5Qi5kZWxheVRpbWUpLHRoaXMuX2Nyb3NzRmFkZT1uZXcgdC5Dcm9zc0ZhZGUsdGhpcy5fY3Jvc3NGYWRlTEZPPW5ldyB0LkxGTyh7bWluOjAsbWF4OjEsdHlwZTpcInRyaWFuZ2xlXCIscGhhc2U6OTB9KS5jb25uZWN0KHRoaXMuX2Nyb3NzRmFkZS5mYWRlKSx0aGlzLl9mZWVkYmFja0RlbGF5PW5ldyB0LkRlbGF5KGkuZGVsYXlUaW1lKSx0aGlzLmRlbGF5VGltZT10aGlzLl9mZWVkYmFja0RlbGF5LmRlbGF5VGltZSx0aGlzLl9yZWFkT25seShcImRlbGF5VGltZVwiKSx0aGlzLl9waXRjaD1pLnBpdGNoLHRoaXMuX3dpbmRvd1NpemU9aS53aW5kb3dTaXplLHRoaXMuX2RlbGF5QS5jb25uZWN0KHRoaXMuX2Nyb3NzRmFkZS5hKSx0aGlzLl9kZWxheUIuY29ubmVjdCh0aGlzLl9jcm9zc0ZhZGUuYiksdGhpcy5fZnJlcXVlbmN5LmZhbih0aGlzLl9sZm9BLmZyZXF1ZW5jeSx0aGlzLl9sZm9CLmZyZXF1ZW5jeSx0aGlzLl9jcm9zc0ZhZGVMRk8uZnJlcXVlbmN5KSx0aGlzLmVmZmVjdFNlbmQuZmFuKHRoaXMuX2RlbGF5QSx0aGlzLl9kZWxheUIpLHRoaXMuX2Nyb3NzRmFkZS5jaGFpbih0aGlzLl9mZWVkYmFja0RlbGF5LHRoaXMuZWZmZWN0UmV0dXJuKSxlPXRoaXMubm93KCksdGhpcy5fbGZvQS5zdGFydChlKSx0aGlzLl9sZm9CLnN0YXJ0KGUpLHRoaXMuX2Nyb3NzRmFkZUxGTy5zdGFydChlKSx0aGlzLndpbmRvd1NpemU9dGhpcy5fd2luZG93U2l6ZX0sdC5leHRlbmQodC5QaXRjaFNoaWZ0LHQuRmVlZGJhY2tFZmZlY3QpLHQuUGl0Y2hTaGlmdC5kZWZhdWx0cz17cGl0Y2g6MCx3aW5kb3dTaXplOi4xLGRlbGF5VGltZTowLGZlZWRiYWNrOjB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBpdGNoU2hpZnQucHJvdG90eXBlLFwicGl0Y2hcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BpdGNofSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fcGl0Y2g9ZTt2YXIgaT0wO2U8MD8odGhpcy5fbGZvQS5taW49MCxcbnRoaXMuX2xmb0EubWF4PXRoaXMuX3dpbmRvd1NpemUsdGhpcy5fbGZvQi5taW49MCx0aGlzLl9sZm9CLm1heD10aGlzLl93aW5kb3dTaXplLGk9dC5pbnRlcnZhbFRvRnJlcXVlbmN5UmF0aW8oZS0xKSsxKToodGhpcy5fbGZvQS5taW49dGhpcy5fd2luZG93U2l6ZSx0aGlzLl9sZm9BLm1heD0wLHRoaXMuX2xmb0IubWluPXRoaXMuX3dpbmRvd1NpemUsdGhpcy5fbGZvQi5tYXg9MCxpPXQuaW50ZXJ2YWxUb0ZyZXF1ZW5jeVJhdGlvKGUpLTEpLHRoaXMuX2ZyZXF1ZW5jeS52YWx1ZT1pKigxLjIvdGhpcy5fd2luZG93U2l6ZSl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGl0Y2hTaGlmdC5wcm90b3R5cGUsXCJ3aW5kb3dTaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93aW5kb3dTaXplfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fd2luZG93U2l6ZT10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLnBpdGNoPXRoaXMuX3BpdGNofX0pLHQuUGl0Y2hTaGlmdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkZlZWRiYWNrRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZnJlcXVlbmN5LmRpc3Bvc2UoKSx0aGlzLl9mcmVxdWVuY3k9bnVsbCx0aGlzLl9kZWxheUEuZGlzY29ubmVjdCgpLHRoaXMuX2RlbGF5QT1udWxsLHRoaXMuX2RlbGF5Qi5kaXNjb25uZWN0KCksdGhpcy5fZGVsYXlCPW51bGwsdGhpcy5fbGZvQS5kaXNwb3NlKCksdGhpcy5fbGZvQT1udWxsLHRoaXMuX2xmb0IuZGlzcG9zZSgpLHRoaXMuX2xmb0I9bnVsbCx0aGlzLl9jcm9zc0ZhZGUuZGlzcG9zZSgpLHRoaXMuX2Nyb3NzRmFkZT1udWxsLHRoaXMuX2Nyb3NzRmFkZUxGTy5kaXNwb3NlKCksdGhpcy5fY3Jvc3NGYWRlTEZPPW51bGwsdGhpcy5fd3JpdGFibGUoXCJkZWxheVRpbWVcIiksdGhpcy5fZmVlZGJhY2tEZWxheS5kaXNwb3NlKCksdGhpcy5fZmVlZGJhY2tEZWxheT1udWxsLHRoaXMuZGVsYXlUaW1lPW51bGwsdGhpc30sdC5QaXRjaFNoaWZ0fSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5TdGVyZW9GZWVkYmFja0VmZmVjdD1mdW5jdGlvbigpe3ZhciBlPXQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImZlZWRiYWNrXCJdLHQuRmVlZGJhY2tFZmZlY3QpO3QuU3RlcmVvRWZmZWN0LmNhbGwodGhpcyxlKSx0aGlzLmZlZWRiYWNrPW5ldyB0LlNpZ25hbChlLmZlZWRiYWNrLHQuVHlwZS5Ob3JtYWxSYW5nZSksdGhpcy5fZmVlZGJhY2tMPW5ldyB0LkdhaW4sdGhpcy5fZmVlZGJhY2tSPW5ldyB0LkdhaW4sdGhpcy5lZmZlY3RSZXR1cm5MLmNoYWluKHRoaXMuX2ZlZWRiYWNrTCx0aGlzLmVmZmVjdFNlbmRMKSx0aGlzLmVmZmVjdFJldHVyblIuY2hhaW4odGhpcy5fZmVlZGJhY2tSLHRoaXMuZWZmZWN0U2VuZFIpLHRoaXMuZmVlZGJhY2suZmFuKHRoaXMuX2ZlZWRiYWNrTC5nYWluLHRoaXMuX2ZlZWRiYWNrUi5nYWluKSx0aGlzLl9yZWFkT25seShbXCJmZWVkYmFja1wiXSl9LHQuZXh0ZW5kKHQuU3RlcmVvRmVlZGJhY2tFZmZlY3QsdC5TdGVyZW9FZmZlY3QpLHQuU3RlcmVvRmVlZGJhY2tFZmZlY3QucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5TdGVyZW9FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJmZWVkYmFja1wiXSksdGhpcy5mZWVkYmFjay5kaXNwb3NlKCksdGhpcy5mZWVkYmFjaz1udWxsLHRoaXMuX2ZlZWRiYWNrTC5kaXNwb3NlKCksdGhpcy5fZmVlZGJhY2tMPW51bGwsdGhpcy5fZmVlZGJhY2tSLmRpc3Bvc2UoKSx0aGlzLl9mZWVkYmFja1I9bnVsbCx0aGlzfSx0LlN0ZXJlb0ZlZWRiYWNrRWZmZWN0fSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5TdGVyZW9XaWRlbmVyPWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1wid2lkdGhcIl0sdC5TdGVyZW9XaWRlbmVyKTt0Lk1pZFNpZGVFZmZlY3QuY2FsbCh0aGlzLGUpLHRoaXMud2lkdGg9bmV3IHQuU2lnbmFsKGUud2lkdGgsdC5UeXBlLk5vcm1hbFJhbmdlKSx0aGlzLl9taWRNdWx0PW5ldyB0LkV4cHIoXCIkMCAqICgkMSAqICgxIC0gJDIpKVwiKSx0aGlzLl9zaWRlTXVsdD1uZXcgdC5FeHByKFwiJDAgKiAoJDEgKiAkMilcIiksdGhpcy5fdHdvPW5ldyB0LlNpZ25hbCgyKSx0aGlzLl90d28uY29ubmVjdCh0aGlzLl9taWRNdWx0LDAsMSksdGhpcy53aWR0aC5jb25uZWN0KHRoaXMuX21pZE11bHQsMCwyKSx0aGlzLl90d28uY29ubmVjdCh0aGlzLl9zaWRlTXVsdCwwLDEpLHRoaXMud2lkdGguY29ubmVjdCh0aGlzLl9zaWRlTXVsdCwwLDIpLHRoaXMubWlkU2VuZC5jaGFpbih0aGlzLl9taWRNdWx0LHRoaXMubWlkUmV0dXJuKSx0aGlzLnNpZGVTZW5kLmNoYWluKHRoaXMuX3NpZGVNdWx0LHRoaXMuc2lkZVJldHVybiksdGhpcy5fcmVhZE9ubHkoW1wid2lkdGhcIl0pfSx0LmV4dGVuZCh0LlN0ZXJlb1dpZGVuZXIsdC5NaWRTaWRlRWZmZWN0KSx0LlN0ZXJlb1dpZGVuZXIuZGVmYXVsdHM9e3dpZHRoOi41fSx0LlN0ZXJlb1dpZGVuZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5NaWRTaWRlRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wid2lkdGhcIl0pLHRoaXMud2lkdGguZGlzcG9zZSgpLHRoaXMud2lkdGg9bnVsbCx0aGlzLl9taWRNdWx0LmRpc3Bvc2UoKSx0aGlzLl9taWRNdWx0PW51bGwsdGhpcy5fc2lkZU11bHQuZGlzcG9zZSgpLHRoaXMuX3NpZGVNdWx0PW51bGwsdGhpcy5fdHdvLmRpc3Bvc2UoKSx0aGlzLl90d289bnVsbCx0aGlzfSx0LlN0ZXJlb1dpZGVuZXJ9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlRyZW1vbG89ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcImRlcHRoXCJdLHQuVHJlbW9sbyk7dC5TdGVyZW9FZmZlY3QuY2FsbCh0aGlzLGUpLHRoaXMuX2xmb0w9bmV3IHQuTEZPKHtwaGFzZTplLnNwcmVhZCxtaW46MSxtYXg6MH0pLHRoaXMuX2xmb1I9bmV3IHQuTEZPKHtwaGFzZTplLnNwcmVhZCxtaW46MSxtYXg6MH0pLHRoaXMuX2FtcGxpdHVkZUw9bmV3IHQuR2Fpbix0aGlzLl9hbXBsaXR1ZGVSPW5ldyB0LkdhaW4sdGhpcy5mcmVxdWVuY3k9bmV3IHQuU2lnbmFsKGUuZnJlcXVlbmN5LHQuVHlwZS5GcmVxdWVuY3kpLHRoaXMuZGVwdGg9bmV3IHQuU2lnbmFsKGUuZGVwdGgsdC5UeXBlLk5vcm1hbFJhbmdlKSx0aGlzLl9yZWFkT25seShbXCJmcmVxdWVuY3lcIixcImRlcHRoXCJdKSx0aGlzLmVmZmVjdFNlbmRMLmNoYWluKHRoaXMuX2FtcGxpdHVkZUwsdGhpcy5lZmZlY3RSZXR1cm5MKSx0aGlzLmVmZmVjdFNlbmRSLmNoYWluKHRoaXMuX2FtcGxpdHVkZVIsdGhpcy5lZmZlY3RSZXR1cm5SKSx0aGlzLl9sZm9MLmNvbm5lY3QodGhpcy5fYW1wbGl0dWRlTC5nYWluKSx0aGlzLl9sZm9SLmNvbm5lY3QodGhpcy5fYW1wbGl0dWRlUi5nYWluKSx0aGlzLmZyZXF1ZW5jeS5mYW4odGhpcy5fbGZvTC5mcmVxdWVuY3ksdGhpcy5fbGZvUi5mcmVxdWVuY3kpLHRoaXMuZGVwdGguZmFuKHRoaXMuX2xmb1IuYW1wbGl0dWRlLHRoaXMuX2xmb0wuYW1wbGl0dWRlKSx0aGlzLnR5cGU9ZS50eXBlLHRoaXMuc3ByZWFkPWUuc3ByZWFkfSx0LmV4dGVuZCh0LlRyZW1vbG8sdC5TdGVyZW9FZmZlY3QpLHQuVHJlbW9sby5kZWZhdWx0cz17ZnJlcXVlbmN5OjEwLHR5cGU6XCJzaW5lXCIsZGVwdGg6LjUsc3ByZWFkOjE4MH0sdC5UcmVtb2xvLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbGZvTC5zdGFydCh0KSx0aGlzLl9sZm9SLnN0YXJ0KHQpLHRoaXN9LHQuVHJlbW9sby5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbGZvTC5zdG9wKHQpLHRoaXMuX2xmb1Iuc3RvcCh0KSx0aGlzfSx0LlRyZW1vbG8ucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2xmb0wuc3luYyh0KSx0aGlzLl9sZm9SLnN5bmModCksdGhpc30sdC5UcmVtb2xvLnByb3RvdHlwZS51bnN5bmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGZvTC51bnN5bmMoKSx0aGlzLl9sZm9SLnVuc3luYygpLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlRyZW1vbG8ucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGZvTC50eXBlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGZvTC50eXBlPXQsdGhpcy5fbGZvUi50eXBlPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuVHJlbW9sby5wcm90b3R5cGUsXCJzcHJlYWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xmb1IucGhhc2UtdGhpcy5fbGZvTC5waGFzZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xmb0wucGhhc2U9OTAtdC8yLHRoaXMuX2xmb1IucGhhc2U9dC8yKzkwfX0pLHQuVHJlbW9sby5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LlN0ZXJlb0VmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcImZyZXF1ZW5jeVwiLFwiZGVwdGhcIl0pLHRoaXMuX2xmb0wuZGlzcG9zZSgpLHRoaXMuX2xmb0w9bnVsbCx0aGlzLl9sZm9SLmRpc3Bvc2UoKSx0aGlzLl9sZm9SPW51bGwsdGhpcy5fYW1wbGl0dWRlTC5kaXNwb3NlKCksdGhpcy5fYW1wbGl0dWRlTD1udWxsLHRoaXMuX2FtcGxpdHVkZVIuZGlzcG9zZSgpLHRoaXMuX2FtcGxpdHVkZVI9bnVsbCx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuZGVwdGg9bnVsbCx0aGlzfSx0LlRyZW1vbG99KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlZpYnJhdG89ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcImRlcHRoXCJdLHQuVmlicmF0byk7dC5FZmZlY3QuY2FsbCh0aGlzLGUpLHRoaXMuX2RlbGF5Tm9kZT1uZXcgdC5EZWxheSgwLGUubWF4RGVsYXkpLHRoaXMuX2xmbz1uZXcgdC5MRk8oe3R5cGU6ZS50eXBlLG1pbjowLG1heDplLm1heERlbGF5LGZyZXF1ZW5jeTplLmZyZXF1ZW5jeSxwaGFzZTotOTB9KS5zdGFydCgpLmNvbm5lY3QodGhpcy5fZGVsYXlOb2RlLmRlbGF5VGltZSksdGhpcy5mcmVxdWVuY3k9dGhpcy5fbGZvLmZyZXF1ZW5jeSx0aGlzLmRlcHRoPXRoaXMuX2xmby5hbXBsaXR1ZGUsdGhpcy5kZXB0aC52YWx1ZT1lLmRlcHRoLHRoaXMuX3JlYWRPbmx5KFtcImZyZXF1ZW5jeVwiLFwiZGVwdGhcIl0pLHRoaXMuZWZmZWN0U2VuZC5jaGFpbih0aGlzLl9kZWxheU5vZGUsdGhpcy5lZmZlY3RSZXR1cm4pfSx0LmV4dGVuZCh0LlZpYnJhdG8sdC5FZmZlY3QpLHQuVmlicmF0by5kZWZhdWx0cz17bWF4RGVsYXk6LjAwNSxmcmVxdWVuY3k6NSxkZXB0aDouMSx0eXBlOlwic2luZVwifSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5WaWJyYXRvLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xmby50eXBlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGZvLnR5cGU9dH19KSx0LlZpYnJhdG8ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0LkVmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2RlbGF5Tm9kZS5kaXNwb3NlKCksdGhpcy5fZGVsYXlOb2RlPW51bGwsdGhpcy5fbGZvLmRpc3Bvc2UoKSx0aGlzLl9sZm89bnVsbCx0aGlzLl93cml0YWJsZShbXCJmcmVxdWVuY3lcIixcImRlcHRoXCJdKSx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuZGVwdGg9bnVsbH0sdC5WaWJyYXRvfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5FdmVudD1mdW5jdGlvbigpe3ZhciBlPXQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImNhbGxiYWNrXCIsXCJ2YWx1ZVwiXSx0LkV2ZW50KTt0LmNhbGwodGhpcyksdGhpcy5fbG9vcD1lLmxvb3AsdGhpcy5jYWxsYmFjaz1lLmNhbGxiYWNrLHRoaXMudmFsdWU9ZS52YWx1ZSx0aGlzLl9sb29wU3RhcnQ9dGhpcy50b1RpY2tzKGUubG9vcFN0YXJ0KSx0aGlzLl9sb29wRW5kPXRoaXMudG9UaWNrcyhlLmxvb3BFbmQpLHRoaXMuX3N0YXRlPW5ldyB0LlRpbWVsaW5lU3RhdGUodC5TdGF0ZS5TdG9wcGVkKSx0aGlzLl9wbGF5YmFja1JhdGU9MSx0aGlzLl9zdGFydE9mZnNldD0wLHRoaXMuX3Byb2JhYmlsaXR5PWUucHJvYmFiaWxpdHksdGhpcy5faHVtYW5pemU9ZS5odW1hbml6ZSx0aGlzLm11dGU9ZS5tdXRlLHRoaXMucGxheWJhY2tSYXRlPWUucGxheWJhY2tSYXRlfSx0LmV4dGVuZCh0LkV2ZW50KSx0LkV2ZW50LmRlZmF1bHRzPXtjYWxsYmFjazp0Lm5vT3AsbG9vcDohMSxsb29wRW5kOlwiMW1cIixsb29wU3RhcnQ6MCxwbGF5YmFja1JhdGU6MSx2YWx1ZTpudWxsLHByb2JhYmlsaXR5OjEsbXV0ZTohMSxodW1hbml6ZTohMX0sdC5FdmVudC5wcm90b3R5cGUuX3Jlc2NoZWR1bGVFdmVudHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9dC5kZWZhdWx0QXJnKGUsLTEpLHRoaXMuX3N0YXRlLmZvckVhY2hGcm9tKGUsZnVuY3Rpb24oZSl7dmFyIGksbixzLG87ZS5zdGF0ZT09PXQuU3RhdGUuU3RhcnRlZCYmKHQuaXNVbmRlZihlLmlkKXx8dC5UcmFuc3BvcnQuY2xlYXIoZS5pZCksbj1lLnRpbWUrTWF0aC5yb3VuZCh0aGlzLnN0YXJ0T2Zmc2V0L3RoaXMuX3BsYXliYWNrUmF0ZSksdGhpcy5fbG9vcD8oaT0xLzAsdC5pc051bWJlcih0aGlzLl9sb29wKSYmKGk9dGhpcy5fbG9vcCp0aGlzLl9nZXRMb29wRHVyYXRpb24oKSkscz10aGlzLl9zdGF0ZS5nZXRBZnRlcihuKSxudWxsIT09cyYmKGk9TWF0aC5taW4oaSxzLnRpbWUtbikpLGkhPT0xLzAmJih0aGlzLl9zdGF0ZS5zZXRTdGF0ZUF0VGltZSh0LlN0YXRlLlN0b3BwZWQsbitpKzEpLGk9dC5UaW1lKGksXCJpXCIpKSxvPXQuVGltZSh0aGlzLl9nZXRMb29wRHVyYXRpb24oKSxcImlcIiksZS5pZD10LlRyYW5zcG9ydC5zY2hlZHVsZVJlcGVhdCh0aGlzLl90aWNrLmJpbmQodGhpcyksbyx0LlRyYW5zcG9ydFRpbWUobixcImlcIiksaSkpOmUuaWQ9dC5UcmFuc3BvcnQuc2NoZWR1bGUodGhpcy5fdGljay5iaW5kKHRoaXMpLG4rXCJpXCIpKX0uYmluZCh0aGlzKSksdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRXZlbnQucHJvdG90eXBlLFwic3RhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlLmdldFZhbHVlQXRUaW1lKHQuVHJhbnNwb3J0LnRpY2tzKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5FdmVudC5wcm90b3R5cGUsXCJzdGFydE9mZnNldFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhcnRPZmZzZXR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zdGFydE9mZnNldD10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkV2ZW50LnByb3RvdHlwZSxcInByb2JhYmlsaXR5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9iYWJpbGl0eX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3Byb2JhYmlsaXR5PXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRXZlbnQucHJvdG90eXBlLFwiaHVtYW5pemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2h1bWFuaXplfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faHVtYW5pemU9dH19KSx0LkV2ZW50LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbihlKXtyZXR1cm4gZT10aGlzLnRvVGlja3MoZSksdGhpcy5fc3RhdGUuZ2V0VmFsdWVBdFRpbWUoZSk9PT10LlN0YXRlLlN0b3BwZWQmJih0aGlzLl9zdGF0ZS5hZGQoe3N0YXRlOnQuU3RhdGUuU3RhcnRlZCx0aW1lOmUsaWQ6dm9pZCAwfSksdGhpcy5fcmVzY2hlZHVsZUV2ZW50cyhlKSksdGhpc30sdC5FdmVudC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbihlKXt2YXIgaSxuO3JldHVybiB0aGlzLmNhbmNlbChlKSxlPXRoaXMudG9UaWNrcyhlKSx0aGlzLl9zdGF0ZS5nZXRWYWx1ZUF0VGltZShlKT09PXQuU3RhdGUuU3RhcnRlZCYmKHRoaXMuX3N0YXRlLnNldFN0YXRlQXRUaW1lKHQuU3RhdGUuU3RvcHBlZCxlKSxpPXRoaXMuX3N0YXRlLmdldEJlZm9yZShlKSxuPWUsbnVsbCE9PWkmJihuPWkudGltZSksdGhpcy5fcmVzY2hlZHVsZUV2ZW50cyhuKSksdGhpc30sdC5FdmVudC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKGUpe3JldHVybiBlPXQuZGVmYXVsdEFyZyhlLC0xLzApLGU9dGhpcy50b1RpY2tzKGUpLHRoaXMuX3N0YXRlLmZvckVhY2hGcm9tKGUsZnVuY3Rpb24oZSl7dC5UcmFuc3BvcnQuY2xlYXIoZS5pZCl9KSx0aGlzLl9zdGF0ZS5jYW5jZWwoZSksdGhpc30sdC5FdmVudC5wcm90b3R5cGUuX3RpY2s9ZnVuY3Rpb24oZSl7aWYoIXRoaXMubXV0ZSYmdGhpcy5fc3RhdGUuZ2V0VmFsdWVBdFRpbWUodC5UcmFuc3BvcnQudGlja3MpPT09dC5TdGF0ZS5TdGFydGVkKXtpZih0aGlzLnByb2JhYmlsaXR5PDEmJk1hdGgucmFuZG9tKCk+dGhpcy5wcm9iYWJpbGl0eSlyZXR1cm47aWYodGhpcy5odW1hbml6ZSl7dmFyIGk9LjAyO3QuaXNCb29sZWFuKHRoaXMuaHVtYW5pemUpfHwoaT10aGlzLnRvU2Vjb25kcyh0aGlzLmh1bWFuaXplKSksZSs9KDIqTWF0aC5yYW5kb20oKS0xKSppfXRoaXMuY2FsbGJhY2soZSx0aGlzLnZhbHVlKX19LHQuRXZlbnQucHJvdG90eXBlLl9nZXRMb29wRHVyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5yb3VuZCgodGhpcy5fbG9vcEVuZC10aGlzLl9sb29wU3RhcnQpL3RoaXMuX3BsYXliYWNrUmF0ZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkV2ZW50LnByb3RvdHlwZSxcImxvb3BcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvb3B9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sb29wPXQsdGhpcy5fcmVzY2hlZHVsZUV2ZW50cygpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkV2ZW50LnByb3RvdHlwZSxcInBsYXliYWNrUmF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGxheWJhY2tSYXRlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGxheWJhY2tSYXRlPXQsdGhpcy5fcmVzY2hlZHVsZUV2ZW50cygpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkV2ZW50LnByb3RvdHlwZSxcImxvb3BFbmRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuVHJhbnNwb3J0VGltZSh0aGlzLl9sb29wRW5kLFwiaVwiKS50b05vdGF0aW9uKCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sb29wRW5kPXRoaXMudG9UaWNrcyh0KSx0aGlzLl9sb29wJiZ0aGlzLl9yZXNjaGVkdWxlRXZlbnRzKCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRXZlbnQucHJvdG90eXBlLFwibG9vcFN0YXJ0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0LlRyYW5zcG9ydFRpbWUodGhpcy5fbG9vcFN0YXJ0LFwiaVwiKS50b05vdGF0aW9uKCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sb29wU3RhcnQ9dGhpcy50b1RpY2tzKHQpLHRoaXMuX2xvb3AmJnRoaXMuX3Jlc2NoZWR1bGVFdmVudHMoKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5FdmVudC5wcm90b3R5cGUsXCJwcm9ncmVzc1wiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZSxpLG47cmV0dXJuIHRoaXMuX2xvb3A/KGU9dC5UcmFuc3BvcnQudGlja3MsaT10aGlzLl9zdGF0ZS5nZXQoZSksbnVsbCE9PWkmJmkuc3RhdGU9PT10LlN0YXRlLlN0YXJ0ZWQ/KG49dGhpcy5fZ2V0TG9vcER1cmF0aW9uKCksKGUtaS50aW1lKSVuL24pOjApOjB9fSksdC5FdmVudC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuY2FuY2VsKCksdGhpcy5fc3RhdGUuZGlzcG9zZSgpLHRoaXMuX3N0YXRlPW51bGwsdGhpcy5jYWxsYmFjaz1udWxsLHRoaXMudmFsdWU9bnVsbH0sdC5FdmVudH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuTG9vcD1mdW5jdGlvbigpe3ZhciBlPXQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImNhbGxiYWNrXCIsXCJpbnRlcnZhbFwiXSx0Lkxvb3ApO3QuY2FsbCh0aGlzKSx0aGlzLl9ldmVudD1uZXcgdC5FdmVudCh7Y2FsbGJhY2s6dGhpcy5fdGljay5iaW5kKHRoaXMpLGxvb3A6ITAsbG9vcEVuZDplLmludGVydmFsLHBsYXliYWNrUmF0ZTplLnBsYXliYWNrUmF0ZSxwcm9iYWJpbGl0eTplLnByb2JhYmlsaXR5fSksdGhpcy5jYWxsYmFjaz1lLmNhbGxiYWNrLHRoaXMuaXRlcmF0aW9ucz1lLml0ZXJhdGlvbnN9LHQuZXh0ZW5kKHQuTG9vcCksdC5Mb29wLmRlZmF1bHRzPXtpbnRlcnZhbDpcIjRuXCIsY2FsbGJhY2s6dC5ub09wLHBsYXliYWNrUmF0ZToxLGl0ZXJhdGlvbnM6MS8wLHByb2JhYmlsaXR5OiEwLG11dGU6ITF9LHQuTG9vcC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2V2ZW50LnN0YXJ0KHQpLHRoaXN9LHQuTG9vcC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZXZlbnQuc3RvcCh0KSx0aGlzfSx0Lkxvb3AucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZXZlbnQuY2FuY2VsKHQpLHRoaXN9LHQuTG9vcC5wcm90b3R5cGUuX3RpY2s9ZnVuY3Rpb24odCl7dGhpcy5jYWxsYmFjayh0KX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTG9vcC5wcm90b3R5cGUsXCJzdGF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXZlbnQuc3RhdGV9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTG9vcC5wcm90b3R5cGUsXCJwcm9ncmVzc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXZlbnQucHJvZ3Jlc3N9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTG9vcC5wcm90b3R5cGUsXCJpbnRlcnZhbFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXZlbnQubG9vcEVuZH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2V2ZW50Lmxvb3BFbmQ9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Mb29wLnByb3RvdHlwZSxcInBsYXliYWNrUmF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXZlbnQucGxheWJhY2tSYXRlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZXZlbnQucGxheWJhY2tSYXRlPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTG9vcC5wcm90b3R5cGUsXCJodW1hbml6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXZlbnQuaHVtYW5pemV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9ldmVudC5odW1hbml6ZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lkxvb3AucHJvdG90eXBlLFwicHJvYmFiaWxpdHlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50LnByb2JhYmlsaXR5fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZXZlbnQucHJvYmFiaWxpdHk9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Mb29wLnByb3RvdHlwZSxcIm11dGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50Lm11dGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9ldmVudC5tdXRlPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTG9vcC5wcm90b3R5cGUsXCJpdGVyYXRpb25zXCIse2dldDpmdW5jdGlvbigpe3JldHVybiEwPT09dGhpcy5fZXZlbnQubG9vcD8xLzA6dGhpcy5fZXZlbnQubG9vcH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2V2ZW50Lmxvb3A9dD09PTEvMHx8dH19KSx0Lkxvb3AucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9ldmVudC5kaXNwb3NlKCksdGhpcy5fZXZlbnQ9bnVsbCx0aGlzLmNhbGxiYWNrPW51bGx9LHQuTG9vcH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuUGFydD1mdW5jdGlvbigpe3ZhciBlLGk9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiY2FsbGJhY2tcIixcImV2ZW50c1wiXSx0LlBhcnQpO2Zvcih0LkV2ZW50LmNhbGwodGhpcyxpKSx0aGlzLl9ldmVudHM9W10sZT0wO2U8aS5ldmVudHMubGVuZ3RoO2UrKylBcnJheS5pc0FycmF5KGkuZXZlbnRzW2VdKT90aGlzLmFkZChpLmV2ZW50c1tlXVswXSxpLmV2ZW50c1tlXVsxXSk6dGhpcy5hZGQoaS5ldmVudHNbZV0pfSx0LmV4dGVuZCh0LlBhcnQsdC5FdmVudCksdC5QYXJ0LmRlZmF1bHRzPXtjYWxsYmFjazp0Lm5vT3AsbG9vcDohMSxsb29wRW5kOlwiMW1cIixsb29wU3RhcnQ6MCxwbGF5YmFja1JhdGU6MSxwcm9iYWJpbGl0eToxLGh1bWFuaXplOiExLG11dGU6ITEsZXZlbnRzOltdfSx0LlBhcnQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKGUsaSl7dmFyIG49dGhpcy50b1RpY2tzKGUpO3JldHVybiB0aGlzLl9zdGF0ZS5nZXRWYWx1ZUF0VGltZShuKSE9PXQuU3RhdGUuU3RhcnRlZCYmKGk9dGhpcy5fbG9vcD90LmRlZmF1bHRBcmcoaSx0aGlzLl9sb29wU3RhcnQpOnQuZGVmYXVsdEFyZyhpLDApLGk9dGhpcy50b1RpY2tzKGkpLHRoaXMuX3N0YXRlLmFkZCh7c3RhdGU6dC5TdGF0ZS5TdGFydGVkLHRpbWU6bixvZmZzZXQ6aX0pLHRoaXMuX2ZvckVhY2goZnVuY3Rpb24odCl7dGhpcy5fc3RhcnROb3RlKHQsbixpKX0pKSx0aGlzfSx0LlBhcnQucHJvdG90eXBlLl9zdGFydE5vdGU9ZnVuY3Rpb24oZSxpLG4pe2ktPW4sdGhpcy5fbG9vcD9lLnN0YXJ0T2Zmc2V0Pj10aGlzLl9sb29wU3RhcnQmJmUuc3RhcnRPZmZzZXQ8dGhpcy5fbG9vcEVuZD8oZS5zdGFydE9mZnNldDxuJiYoaSs9dGhpcy5fZ2V0TG9vcER1cmF0aW9uKCkpLGUuc3RhcnQodC5UcmFuc3BvcnRUaW1lKGksXCJpXCIpKSk6ZS5zdGFydE9mZnNldDx0aGlzLl9sb29wU3RhcnQmJmUuc3RhcnRPZmZzZXQ+PW4mJihlLmxvb3A9ITEsZS5zdGFydCh0LlRyYW5zcG9ydFRpbWUoaSxcImlcIikpKTplLnN0YXJ0T2Zmc2V0Pj1uJiZlLnN0YXJ0KHQuVHJhbnNwb3J0VGltZShpLFwiaVwiKSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBhcnQucHJvdG90eXBlLFwic3RhcnRPZmZzZXRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXJ0T2Zmc2V0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc3RhcnRPZmZzZXQ9dCx0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKHQpe3Quc3RhcnRPZmZzZXQrPXRoaXMuX3N0YXJ0T2Zmc2V0fSl9fSksdC5QYXJ0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMudG9UaWNrcyhlKTtyZXR1cm4gdGhpcy5fc3RhdGUuY2FuY2VsKGkpLHRoaXMuX3N0YXRlLnNldFN0YXRlQXRUaW1lKHQuU3RhdGUuU3RvcHBlZCxpKSx0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKHQpe3Quc3RvcChlKX0pLHRoaXN9LHQuUGFydC5wcm90b3R5cGUuYXQ9ZnVuY3Rpb24oZSxpKXt2YXIgbixzLG87Zm9yKGU9dC5UcmFuc3BvcnRUaW1lKGUpLG49dC5UaW1lKDEsXCJpXCIpLnRvU2Vjb25kcygpLHM9MDtzPHRoaXMuX2V2ZW50cy5sZW5ndGg7cysrKWlmKG89dGhpcy5fZXZlbnRzW3NdLE1hdGguYWJzKGUudG9UaWNrcygpLW8uc3RhcnRPZmZzZXQpPG4pcmV0dXJuIHQuaXNVbmRlZihpKXx8KG8udmFsdWU9aSksbztyZXR1cm4gdC5pc1VuZGVmKGkpP251bGw6KHRoaXMuYWRkKGUsaSksdGhpcy5fZXZlbnRzW3RoaXMuX2V2ZW50cy5sZW5ndGgtMV0pfSx0LlBhcnQucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlLGkpe2UuaGFzT3duUHJvcGVydHkoXCJ0aW1lXCIpJiYoaT1lLGU9aS50aW1lKSxlPXRoaXMudG9UaWNrcyhlKTt2YXIgbjtyZXR1cm4gaSBpbnN0YW5jZW9mIHQuRXZlbnQ/KG49aSxuLmNhbGxiYWNrPXRoaXMuX3RpY2suYmluZCh0aGlzKSk6bj1uZXcgdC5FdmVudCh7Y2FsbGJhY2s6dGhpcy5fdGljay5iaW5kKHRoaXMpLHZhbHVlOml9KSxuLnN0YXJ0T2Zmc2V0PWUsbi5zZXQoe2xvb3BFbmQ6dGhpcy5sb29wRW5kLGxvb3BTdGFydDp0aGlzLmxvb3BTdGFydCxsb29wOnRoaXMubG9vcCxodW1hbml6ZTp0aGlzLmh1bWFuaXplLHBsYXliYWNrUmF0ZTp0aGlzLnBsYXliYWNrUmF0ZSxwcm9iYWJpbGl0eTp0aGlzLnByb2JhYmlsaXR5fSksdGhpcy5fZXZlbnRzLnB1c2gobiksdGhpcy5fcmVzdGFydEV2ZW50KG4pLHRoaXN9LHQuUGFydC5wcm90b3R5cGUuX3Jlc3RhcnRFdmVudD1mdW5jdGlvbihlKXt0aGlzLl9zdGF0ZS5mb3JFYWNoKGZ1bmN0aW9uKGkpe2kuc3RhdGU9PT10LlN0YXRlLlN0YXJ0ZWQ/dGhpcy5fc3RhcnROb3RlKGUsaS50aW1lLGkub2Zmc2V0KTplLnN0b3AodC5UcmFuc3BvcnRUaW1lKGkudGltZSxcImlcIikpfS5iaW5kKHRoaXMpKX0sdC5QYXJ0LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oZSxpKXt2YXIgbixzO2ZvcihlLmhhc093blByb3BlcnR5KFwidGltZVwiKSYmKGk9ZSxlPWkudGltZSksZT10aGlzLnRvVGlja3MoZSksbj10aGlzLl9ldmVudHMubGVuZ3RoLTE7bj49MDtuLS0pcz10aGlzLl9ldmVudHNbbl0scyBpbnN0YW5jZW9mIHQuUGFydD9zLnJlbW92ZShlLGkpOnMuc3RhcnRPZmZzZXQ9PT1lJiYodC5pc1VuZGVmKGkpfHwhdC5pc1VuZGVmKGkpJiZzLnZhbHVlPT09aSkmJih0aGlzLl9ldmVudHMuc3BsaWNlKG4sMSkscy5kaXNwb3NlKCkpO3JldHVybiB0aGlzfSx0LlBhcnQucHJvdG90eXBlLnJlbW92ZUFsbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuZGlzcG9zZSgpfSksdGhpcy5fZXZlbnRzPVtdLHRoaXN9LHQuUGFydC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuY2FuY2VsKHQpfSksdGhpcy5fc3RhdGUuY2FuY2VsKHRoaXMudG9UaWNrcyh0KSksdGhpc30sdC5QYXJ0LnByb3RvdHlwZS5fZm9yRWFjaD1mdW5jdGlvbihlLGkpe3ZhciBuLHM7aWYodGhpcy5fZXZlbnRzKWZvcihpPXQuZGVmYXVsdEFyZyhpLHRoaXMpLG49dGhpcy5fZXZlbnRzLmxlbmd0aC0xO24+PTA7bi0tKXM9dGhpcy5fZXZlbnRzW25dLHMgaW5zdGFuY2VvZiB0LlBhcnQ/cy5fZm9yRWFjaChlLGkpOmUuY2FsbChpLHMpO3JldHVybiB0aGlzfSx0LlBhcnQucHJvdG90eXBlLl9zZXRBbGw9ZnVuY3Rpb24odCxlKXt0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKGkpe2lbdF09ZX0pfSx0LlBhcnQucHJvdG90eXBlLl90aWNrPWZ1bmN0aW9uKHQsZSl7dGhpcy5tdXRlfHx0aGlzLmNhbGxiYWNrKHQsZSl9LHQuUGFydC5wcm90b3R5cGUuX3Rlc3RMb29wQm91bmRyaWVzPWZ1bmN0aW9uKGUpe2Uuc3RhcnRPZmZzZXQ8dGhpcy5fbG9vcFN0YXJ0fHxlLnN0YXJ0T2Zmc2V0Pj10aGlzLl9sb29wRW5kP2UuY2FuY2VsKDApOmUuc3RhdGU9PT10LlN0YXRlLlN0b3BwZWQmJnRoaXMuX3Jlc3RhcnRFdmVudChlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGFydC5wcm90b3R5cGUsXCJwcm9iYWJpbGl0eVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvYmFiaWxpdHl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wcm9iYWJpbGl0eT10LHRoaXMuX3NldEFsbChcInByb2JhYmlsaXR5XCIsdCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGFydC5wcm90b3R5cGUsXCJodW1hbml6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faHVtYW5pemV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9odW1hbml6ZT10LHRoaXMuX3NldEFsbChcImh1bWFuaXplXCIsdCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGFydC5wcm90b3R5cGUsXCJsb29wXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb29wfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbG9vcD10LHRoaXMuX2ZvckVhY2goZnVuY3Rpb24oZSl7ZS5fbG9vcFN0YXJ0PXRoaXMuX2xvb3BTdGFydCxlLl9sb29wRW5kPXRoaXMuX2xvb3BFbmQsZS5sb29wPXQsdGhpcy5fdGVzdExvb3BCb3VuZHJpZXMoZSl9KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QYXJ0LnByb3RvdHlwZSxcImxvb3BFbmRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuVHJhbnNwb3J0VGltZSh0aGlzLl9sb29wRW5kLFwiaVwiKS50b05vdGF0aW9uKCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sb29wRW5kPXRoaXMudG9UaWNrcyh0KSx0aGlzLl9sb29wJiZ0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKGUpe2UubG9vcEVuZD10LHRoaXMuX3Rlc3RMb29wQm91bmRyaWVzKGUpfSl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGFydC5wcm90b3R5cGUsXCJsb29wU3RhcnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuVHJhbnNwb3J0VGltZSh0aGlzLl9sb29wU3RhcnQsXCJpXCIpLnRvTm90YXRpb24oKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xvb3BTdGFydD10aGlzLnRvVGlja3ModCksdGhpcy5fbG9vcCYmdGhpcy5fZm9yRWFjaChmdW5jdGlvbih0KXt0Lmxvb3BTdGFydD10aGlzLmxvb3BTdGFydCx0aGlzLl90ZXN0TG9vcEJvdW5kcmllcyh0KX0pfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBhcnQucHJvdG90eXBlLFwicGxheWJhY2tSYXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wbGF5YmFja1JhdGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wbGF5YmFja1JhdGU9dCx0aGlzLl9zZXRBbGwoXCJwbGF5YmFja1JhdGVcIix0KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QYXJ0LnByb3RvdHlwZSxcImxlbmd0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXZlbnRzLmxlbmd0aH19KSx0LlBhcnQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW1vdmVBbGwoKSx0aGlzLl9zdGF0ZS5kaXNwb3NlKCksdGhpcy5fc3RhdGU9bnVsbCx0aGlzLmNhbGxiYWNrPW51bGwsdGhpcy5fZXZlbnRzPW51bGwsdGhpc30sdC5QYXJ0fSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5QYXR0ZXJuPWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiY2FsbGJhY2tcIixcInZhbHVlc1wiLFwicGF0dGVyblwiXSx0LlBhdHRlcm4pO3QuTG9vcC5jYWxsKHRoaXMsZSksdGhpcy5fcGF0dGVybj1uZXcgdC5DdHJsUGF0dGVybih7dmFsdWVzOmUudmFsdWVzLHR5cGU6ZS5wYXR0ZXJuLGluZGV4OmUuaW5kZXh9KX0sdC5leHRlbmQodC5QYXR0ZXJuLHQuTG9vcCksdC5QYXR0ZXJuLmRlZmF1bHRzPXtwYXR0ZXJuOnQuQ3RybFBhdHRlcm4uVHlwZS5VcCxjYWxsYmFjazp0Lm5vT3AsdmFsdWVzOltdfSx0LlBhdHRlcm4ucHJvdG90eXBlLl90aWNrPWZ1bmN0aW9uKHQpe3RoaXMuY2FsbGJhY2sodCx0aGlzLl9wYXR0ZXJuLnZhbHVlKSx0aGlzLl9wYXR0ZXJuLm5leHQoKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGF0dGVybi5wcm90b3R5cGUsXCJpbmRleFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGF0dGVybi5pbmRleH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BhdHRlcm4uaW5kZXg9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QYXR0ZXJuLnByb3RvdHlwZSxcInZhbHVlc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGF0dGVybi52YWx1ZXN9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wYXR0ZXJuLnZhbHVlcz10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBhdHRlcm4ucHJvdG90eXBlLFwidmFsdWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhdHRlcm4udmFsdWV9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGF0dGVybi5wcm90b3R5cGUsXCJwYXR0ZXJuXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXR0ZXJuLnR5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wYXR0ZXJuLnR5cGU9dH19KSx0LlBhdHRlcm4ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0Lkxvb3AucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9wYXR0ZXJuLmRpc3Bvc2UoKSx0aGlzLl9wYXR0ZXJuPW51bGx9LHQuUGF0dGVybn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuU2VxdWVuY2U9ZnVuY3Rpb24oKXt2YXIgZSxpPXQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImNhbGxiYWNrXCIsXCJldmVudHNcIixcInN1YmRpdmlzaW9uXCJdLHQuU2VxdWVuY2UpLG49aS5ldmVudHM7aWYoZGVsZXRlIGkuZXZlbnRzLHQuUGFydC5jYWxsKHRoaXMsaSksdGhpcy5fc3ViZGl2aXNpb249dGhpcy50b1RpY2tzKGkuc3ViZGl2aXNpb24pLHQuaXNVbmRlZihpLmxvb3BFbmQpJiYhdC5pc1VuZGVmKG4pJiYodGhpcy5fbG9vcEVuZD1uLmxlbmd0aCp0aGlzLl9zdWJkaXZpc2lvbiksdGhpcy5fbG9vcD0hMCwhdC5pc1VuZGVmKG4pKWZvcihlPTA7ZTxuLmxlbmd0aDtlKyspdGhpcy5hZGQoZSxuW2VdKX0sdC5leHRlbmQodC5TZXF1ZW5jZSx0LlBhcnQpLHQuU2VxdWVuY2UuZGVmYXVsdHM9e3N1YmRpdmlzaW9uOlwiNG5cIn0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuU2VxdWVuY2UucHJvdG90eXBlLFwic3ViZGl2aXNpb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuVGltZSh0aGlzLl9zdWJkaXZpc2lvbixcImlcIikudG9Ob3RhdGlvbigpfX0pLHQuU2VxdWVuY2UucHJvdG90eXBlLmF0PWZ1bmN0aW9uKGUsaSl7cmV0dXJuIHQuaXNBcnJheShpKSYmdGhpcy5yZW1vdmUoZSksdC5QYXJ0LnByb3RvdHlwZS5hdC5jYWxsKHRoaXMsdGhpcy5faW5kZXhUaW1lKGUpLGkpfSx0LlNlcXVlbmNlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZSxpKXtpZihudWxsPT09aSlyZXR1cm4gdGhpcztpZih0LmlzQXJyYXkoaSkpe3ZhciBuPU1hdGgucm91bmQodGhpcy5fc3ViZGl2aXNpb24vaS5sZW5ndGgpO2k9bmV3IHQuU2VxdWVuY2UodGhpcy5fdGljay5iaW5kKHRoaXMpLGksdC5UaW1lKG4sXCJpXCIpKX1yZXR1cm4gdC5QYXJ0LnByb3RvdHlwZS5hZGQuY2FsbCh0aGlzLHRoaXMuX2luZGV4VGltZShlKSxpKSx0aGlzfSx0LlNlcXVlbmNlLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oZSxpKXtyZXR1cm4gdC5QYXJ0LnByb3RvdHlwZS5yZW1vdmUuY2FsbCh0aGlzLHRoaXMuX2luZGV4VGltZShlKSxpKSx0aGlzfSx0LlNlcXVlbmNlLnByb3RvdHlwZS5faW5kZXhUaW1lPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgdC5UcmFuc3BvcnRUaW1lP2U6dC5UcmFuc3BvcnRUaW1lKGUqdGhpcy5fc3ViZGl2aXNpb24rdGhpcy5zdGFydE9mZnNldCxcImlcIil9LHQuU2VxdWVuY2UucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5QYXJ0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpc30sdC5TZXF1ZW5jZX0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuUHVsc2VPc2NpbGxhdG9yPWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiZnJlcXVlbmN5XCIsXCJ3aWR0aFwiXSx0Lk9zY2lsbGF0b3IpO3QuU291cmNlLmNhbGwodGhpcyxlKSx0aGlzLndpZHRoPW5ldyB0LlNpZ25hbChlLndpZHRoLHQuVHlwZS5Ob3JtYWxSYW5nZSksdGhpcy5fd2lkdGhHYXRlPW5ldyB0LkdhaW4sdGhpcy5fc2F3dG9vdGg9bmV3IHQuT3NjaWxsYXRvcih7ZnJlcXVlbmN5OmUuZnJlcXVlbmN5LGRldHVuZTplLmRldHVuZSx0eXBlOlwic2F3dG9vdGhcIixwaGFzZTplLnBoYXNlfSksdGhpcy5mcmVxdWVuY3k9dGhpcy5fc2F3dG9vdGguZnJlcXVlbmN5LHRoaXMuZGV0dW5lPXRoaXMuX3Nhd3Rvb3RoLmRldHVuZSx0aGlzLl90aHJlc2g9bmV3IHQuV2F2ZVNoYXBlcihmdW5jdGlvbih0KXtyZXR1cm4gdDwwPy0xOjF9KSx0aGlzLl9zYXd0b290aC5jaGFpbih0aGlzLl90aHJlc2gsdGhpcy5vdXRwdXQpLHRoaXMud2lkdGguY2hhaW4odGhpcy5fd2lkdGhHYXRlLHRoaXMuX3RocmVzaCksdGhpcy5fcmVhZE9ubHkoW1wid2lkdGhcIixcImZyZXF1ZW5jeVwiLFwiZGV0dW5lXCJdKX0sdC5leHRlbmQodC5QdWxzZU9zY2lsbGF0b3IsdC5Tb3VyY2UpLHQuUHVsc2VPc2NpbGxhdG9yLmRlZmF1bHRzPXtmcmVxdWVuY3k6NDQwLGRldHVuZTowLHBoYXNlOjAsd2lkdGg6LjJ9LHQuUHVsc2VPc2NpbGxhdG9yLnByb3RvdHlwZS5fc3RhcnQ9ZnVuY3Rpb24odCl7dD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9zYXd0b290aC5zdGFydCh0KSx0aGlzLl93aWR0aEdhdGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSgxLHQpfSx0LlB1bHNlT3NjaWxsYXRvci5wcm90b3R5cGUuX3N0b3A9ZnVuY3Rpb24odCl7dD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9zYXd0b290aC5zdG9wKHQpLHRoaXMuX3dpZHRoR2F0ZS5nYWluLnNldFZhbHVlQXRUaW1lKDAsdCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlB1bHNlT3NjaWxsYXRvci5wcm90b3R5cGUsXCJwaGFzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2F3dG9vdGgucGhhc2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zYXd0b290aC5waGFzZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlB1bHNlT3NjaWxsYXRvci5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVyblwicHVsc2VcIn19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QdWxzZU9zY2lsbGF0b3IucHJvdG90eXBlLFwicGFydGlhbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuW119fSksdC5QdWxzZU9zY2lsbGF0b3IucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5Tb3VyY2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9zYXd0b290aC5kaXNwb3NlKCksdGhpcy5fc2F3dG9vdGg9bnVsbCx0aGlzLl93cml0YWJsZShbXCJ3aWR0aFwiLFwiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIl0pLHRoaXMud2lkdGguZGlzcG9zZSgpLHRoaXMud2lkdGg9bnVsbCx0aGlzLl93aWR0aEdhdGUuZGlzcG9zZSgpLHRoaXMuX3dpZHRoR2F0ZT1udWxsLHRoaXMuX3RocmVzaC5kaXNwb3NlKCksdGhpcy5fdGhyZXNoPW51bGwsdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLmRldHVuZT1udWxsLHRoaXN9LHQuUHVsc2VPc2NpbGxhdG9yfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5QV01Pc2NpbGxhdG9yPWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiZnJlcXVlbmN5XCIsXCJtb2R1bGF0aW9uRnJlcXVlbmN5XCJdLHQuUFdNT3NjaWxsYXRvcik7dC5Tb3VyY2UuY2FsbCh0aGlzLGUpLHRoaXMuX3B1bHNlPW5ldyB0LlB1bHNlT3NjaWxsYXRvcihlLm1vZHVsYXRpb25GcmVxdWVuY3kpLHRoaXMuX3B1bHNlLl9zYXd0b290aC50eXBlPVwic2luZVwiLHRoaXMuX21vZHVsYXRvcj1uZXcgdC5Pc2NpbGxhdG9yKHtmcmVxdWVuY3k6ZS5mcmVxdWVuY3ksZGV0dW5lOmUuZGV0dW5lLHBoYXNlOmUucGhhc2V9KSx0aGlzLl9zY2FsZT1uZXcgdC5NdWx0aXBseSgyKSx0aGlzLmZyZXF1ZW5jeT10aGlzLl9tb2R1bGF0b3IuZnJlcXVlbmN5LHRoaXMuZGV0dW5lPXRoaXMuX21vZHVsYXRvci5kZXR1bmUsdGhpcy5tb2R1bGF0aW9uRnJlcXVlbmN5PXRoaXMuX3B1bHNlLmZyZXF1ZW5jeSx0aGlzLl9tb2R1bGF0b3IuY2hhaW4odGhpcy5fc2NhbGUsdGhpcy5fcHVsc2Uud2lkdGgpLHRoaXMuX3B1bHNlLmNvbm5lY3QodGhpcy5vdXRwdXQpLHRoaXMuX3JlYWRPbmx5KFtcIm1vZHVsYXRpb25GcmVxdWVuY3lcIixcImZyZXF1ZW5jeVwiLFwiZGV0dW5lXCJdKX0sdC5leHRlbmQodC5QV01Pc2NpbGxhdG9yLHQuU291cmNlKSx0LlBXTU9zY2lsbGF0b3IuZGVmYXVsdHM9e2ZyZXF1ZW5jeTo0NDAsZGV0dW5lOjAscGhhc2U6MCxtb2R1bGF0aW9uRnJlcXVlbmN5Oi40fSx0LlBXTU9zY2lsbGF0b3IucHJvdG90eXBlLl9zdGFydD1mdW5jdGlvbih0KXt0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX21vZHVsYXRvci5zdGFydCh0KSx0aGlzLl9wdWxzZS5zdGFydCh0KX0sdC5QV01Pc2NpbGxhdG9yLnByb3RvdHlwZS5fc3RvcD1mdW5jdGlvbih0KXt0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX21vZHVsYXRvci5zdG9wKHQpLHRoaXMuX3B1bHNlLnN0b3AodCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBXTU9zY2lsbGF0b3IucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cInB3bVwifX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBXTU9zY2lsbGF0b3IucHJvdG90eXBlLFwicGFydGlhbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuW119fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUFdNT3NjaWxsYXRvci5wcm90b3R5cGUsXCJwaGFzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxhdG9yLnBoYXNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbW9kdWxhdG9yLnBoYXNlPXR9fSksdC5QV01Pc2NpbGxhdG9yLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuU291cmNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fcHVsc2UuZGlzcG9zZSgpLHRoaXMuX3B1bHNlPW51bGwsdGhpcy5fc2NhbGUuZGlzcG9zZSgpLHRoaXMuX3NjYWxlPW51bGwsdGhpcy5fbW9kdWxhdG9yLmRpc3Bvc2UoKSx0aGlzLl9tb2R1bGF0b3I9bnVsbCx0aGlzLl93cml0YWJsZShbXCJtb2R1bGF0aW9uRnJlcXVlbmN5XCIsXCJmcmVxdWVuY3lcIixcImRldHVuZVwiXSksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLmRldHVuZT1udWxsLHRoaXMubW9kdWxhdGlvbkZyZXF1ZW5jeT1udWxsLHRoaXN9LHQuUFdNT3NjaWxsYXRvcn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuRk1Pc2NpbGxhdG9yPWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiZnJlcXVlbmN5XCIsXCJ0eXBlXCIsXCJtb2R1bGF0aW9uVHlwZVwiXSx0LkZNT3NjaWxsYXRvcik7dC5Tb3VyY2UuY2FsbCh0aGlzLGUpLHRoaXMuX2NhcnJpZXI9bmV3IHQuT3NjaWxsYXRvcihlLmZyZXF1ZW5jeSxlLnR5cGUpLHRoaXMuZnJlcXVlbmN5PW5ldyB0LlNpZ25hbChlLmZyZXF1ZW5jeSx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLmRldHVuZT10aGlzLl9jYXJyaWVyLmRldHVuZSx0aGlzLmRldHVuZS52YWx1ZT1lLmRldHVuZSx0aGlzLm1vZHVsYXRpb25JbmRleD1uZXcgdC5NdWx0aXBseShlLm1vZHVsYXRpb25JbmRleCksdGhpcy5tb2R1bGF0aW9uSW5kZXgudW5pdHM9dC5UeXBlLlBvc2l0aXZlLHRoaXMuX21vZHVsYXRvcj1uZXcgdC5Pc2NpbGxhdG9yKGUuZnJlcXVlbmN5LGUubW9kdWxhdGlvblR5cGUpLHRoaXMuaGFybW9uaWNpdHk9bmV3IHQuTXVsdGlwbHkoZS5oYXJtb25pY2l0eSksdGhpcy5oYXJtb25pY2l0eS51bml0cz10LlR5cGUuUG9zaXRpdmUsdGhpcy5fbW9kdWxhdGlvbk5vZGU9bmV3IHQuR2FpbigwKSx0aGlzLmZyZXF1ZW5jeS5jb25uZWN0KHRoaXMuX2NhcnJpZXIuZnJlcXVlbmN5KSx0aGlzLmZyZXF1ZW5jeS5jaGFpbih0aGlzLmhhcm1vbmljaXR5LHRoaXMuX21vZHVsYXRvci5mcmVxdWVuY3kpLHRoaXMuZnJlcXVlbmN5LmNoYWluKHRoaXMubW9kdWxhdGlvbkluZGV4LHRoaXMuX21vZHVsYXRpb25Ob2RlKSx0aGlzLl9tb2R1bGF0b3IuY29ubmVjdCh0aGlzLl9tb2R1bGF0aW9uTm9kZS5nYWluKSx0aGlzLl9tb2R1bGF0aW9uTm9kZS5jb25uZWN0KHRoaXMuX2NhcnJpZXIuZnJlcXVlbmN5KSx0aGlzLl9jYXJyaWVyLmNvbm5lY3QodGhpcy5vdXRwdXQpLHRoaXMuZGV0dW5lLmNvbm5lY3QodGhpcy5fbW9kdWxhdG9yLmRldHVuZSksdGhpcy5waGFzZT1lLnBoYXNlLHRoaXMuX3JlYWRPbmx5KFtcIm1vZHVsYXRpb25JbmRleFwiLFwiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIixcImhhcm1vbmljaXR5XCJdKX0sdC5leHRlbmQodC5GTU9zY2lsbGF0b3IsdC5Tb3VyY2UpLHQuRk1Pc2NpbGxhdG9yLmRlZmF1bHRzPXtmcmVxdWVuY3k6NDQwLGRldHVuZTowLHBoYXNlOjAsbW9kdWxhdGlvbkluZGV4OjIsbW9kdWxhdGlvblR5cGU6XCJzcXVhcmVcIixoYXJtb25pY2l0eToxfSx0LkZNT3NjaWxsYXRvci5wcm90b3R5cGUuX3N0YXJ0PWZ1bmN0aW9uKHQpe3Q9dGhpcy50b1NlY29uZHModCksdGhpcy5fbW9kdWxhdG9yLnN0YXJ0KHQpLHRoaXMuX2NhcnJpZXIuc3RhcnQodCl9LHQuRk1Pc2NpbGxhdG9yLnByb3RvdHlwZS5fc3RvcD1mdW5jdGlvbih0KXt0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX21vZHVsYXRvci5zdG9wKHQpLHRoaXMuX2NhcnJpZXIuc3RvcCh0KX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRk1Pc2NpbGxhdG9yLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NhcnJpZXIudHlwZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NhcnJpZXIudHlwZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkZNT3NjaWxsYXRvci5wcm90b3R5cGUsXCJtb2R1bGF0aW9uVHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxhdG9yLnR5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9tb2R1bGF0b3IudHlwZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkZNT3NjaWxsYXRvci5wcm90b3R5cGUsXCJwaGFzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2Fycmllci5waGFzZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NhcnJpZXIucGhhc2U9dCx0aGlzLl9tb2R1bGF0b3IucGhhc2U9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5GTU9zY2lsbGF0b3IucHJvdG90eXBlLFwicGFydGlhbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NhcnJpZXIucGFydGlhbHN9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jYXJyaWVyLnBhcnRpYWxzPXR9fSksdC5GTU9zY2lsbGF0b3IucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5Tb3VyY2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJtb2R1bGF0aW9uSW5kZXhcIixcImZyZXF1ZW5jeVwiLFwiZGV0dW5lXCIsXCJoYXJtb25pY2l0eVwiXSksdGhpcy5mcmVxdWVuY3kuZGlzcG9zZSgpLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5kZXR1bmU9bnVsbCx0aGlzLmhhcm1vbmljaXR5LmRpc3Bvc2UoKSx0aGlzLmhhcm1vbmljaXR5PW51bGwsdGhpcy5fY2Fycmllci5kaXNwb3NlKCksdGhpcy5fY2Fycmllcj1udWxsLHRoaXMuX21vZHVsYXRvci5kaXNwb3NlKCksdGhpcy5fbW9kdWxhdG9yPW51bGwsdGhpcy5fbW9kdWxhdGlvbk5vZGUuZGlzcG9zZSgpLHRoaXMuX21vZHVsYXRpb25Ob2RlPW51bGwsdGhpcy5tb2R1bGF0aW9uSW5kZXguZGlzcG9zZSgpLHRoaXMubW9kdWxhdGlvbkluZGV4PW51bGwsdGhpc30sdC5GTU9zY2lsbGF0b3J9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkFNT3NjaWxsYXRvcj1mdW5jdGlvbigpe3ZhciBlPXQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImZyZXF1ZW5jeVwiLFwidHlwZVwiLFwibW9kdWxhdGlvblR5cGVcIl0sdC5BTU9zY2lsbGF0b3IpO3QuU291cmNlLmNhbGwodGhpcyxlKSx0aGlzLl9jYXJyaWVyPW5ldyB0Lk9zY2lsbGF0b3IoZS5mcmVxdWVuY3ksZS50eXBlKSx0aGlzLmZyZXF1ZW5jeT10aGlzLl9jYXJyaWVyLmZyZXF1ZW5jeSx0aGlzLmRldHVuZT10aGlzLl9jYXJyaWVyLmRldHVuZSx0aGlzLmRldHVuZS52YWx1ZT1lLmRldHVuZSx0aGlzLl9tb2R1bGF0b3I9bmV3IHQuT3NjaWxsYXRvcihlLmZyZXF1ZW5jeSxlLm1vZHVsYXRpb25UeXBlKSx0aGlzLl9tb2R1bGF0aW9uU2NhbGU9bmV3IHQuQXVkaW9Ub0dhaW4sdGhpcy5oYXJtb25pY2l0eT1uZXcgdC5NdWx0aXBseShlLmhhcm1vbmljaXR5KSx0aGlzLmhhcm1vbmljaXR5LnVuaXRzPXQuVHlwZS5Qb3NpdGl2ZSx0aGlzLl9tb2R1bGF0aW9uTm9kZT1uZXcgdC5HYWluKDApLHRoaXMuZnJlcXVlbmN5LmNoYWluKHRoaXMuaGFybW9uaWNpdHksdGhpcy5fbW9kdWxhdG9yLmZyZXF1ZW5jeSksdGhpcy5kZXR1bmUuY29ubmVjdCh0aGlzLl9tb2R1bGF0b3IuZGV0dW5lKSx0aGlzLl9tb2R1bGF0b3IuY2hhaW4odGhpcy5fbW9kdWxhdGlvblNjYWxlLHRoaXMuX21vZHVsYXRpb25Ob2RlLmdhaW4pLHRoaXMuX2NhcnJpZXIuY2hhaW4odGhpcy5fbW9kdWxhdGlvbk5vZGUsdGhpcy5vdXRwdXQpLHRoaXMucGhhc2U9ZS5waGFzZSx0aGlzLl9yZWFkT25seShbXCJmcmVxdWVuY3lcIixcImRldHVuZVwiLFwiaGFybW9uaWNpdHlcIl0pfSx0LmV4dGVuZCh0LkFNT3NjaWxsYXRvcix0Lk9zY2lsbGF0b3IpLHQuQU1Pc2NpbGxhdG9yLmRlZmF1bHRzPXtmcmVxdWVuY3k6NDQwLGRldHVuZTowLHBoYXNlOjAsbW9kdWxhdGlvblR5cGU6XCJzcXVhcmVcIixoYXJtb25pY2l0eToxfSx0LkFNT3NjaWxsYXRvci5wcm90b3R5cGUuX3N0YXJ0PWZ1bmN0aW9uKHQpe3Q9dGhpcy50b1NlY29uZHModCksdGhpcy5fbW9kdWxhdG9yLnN0YXJ0KHQpLHRoaXMuX2NhcnJpZXIuc3RhcnQodCl9LHQuQU1Pc2NpbGxhdG9yLnByb3RvdHlwZS5fc3RvcD1mdW5jdGlvbih0KXt0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX21vZHVsYXRvci5zdG9wKHQpLHRoaXMuX2NhcnJpZXIuc3RvcCh0KX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQU1Pc2NpbGxhdG9yLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NhcnJpZXIudHlwZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NhcnJpZXIudHlwZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkFNT3NjaWxsYXRvci5wcm90b3R5cGUsXCJtb2R1bGF0aW9uVHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxhdG9yLnR5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9tb2R1bGF0b3IudHlwZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkFNT3NjaWxsYXRvci5wcm90b3R5cGUsXCJwaGFzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2Fycmllci5waGFzZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NhcnJpZXIucGhhc2U9dCx0aGlzLl9tb2R1bGF0b3IucGhhc2U9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5BTU9zY2lsbGF0b3IucHJvdG90eXBlLFwicGFydGlhbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NhcnJpZXIucGFydGlhbHN9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jYXJyaWVyLnBhcnRpYWxzPXR9fSksdC5BTU9zY2lsbGF0b3IucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5Tb3VyY2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJmcmVxdWVuY3lcIixcImRldHVuZVwiLFwiaGFybW9uaWNpdHlcIl0pLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5kZXR1bmU9bnVsbCx0aGlzLmhhcm1vbmljaXR5LmRpc3Bvc2UoKSx0aGlzLmhhcm1vbmljaXR5PW51bGwsdGhpcy5fY2Fycmllci5kaXNwb3NlKCksdGhpcy5fY2Fycmllcj1udWxsLHRoaXMuX21vZHVsYXRvci5kaXNwb3NlKCksdGhpcy5fbW9kdWxhdG9yPW51bGwsdGhpcy5fbW9kdWxhdGlvbk5vZGUuZGlzcG9zZSgpLHRoaXMuX21vZHVsYXRpb25Ob2RlPW51bGwsdGhpcy5fbW9kdWxhdGlvblNjYWxlLmRpc3Bvc2UoKSx0aGlzLl9tb2R1bGF0aW9uU2NhbGU9bnVsbCx0aGlzfSx0LkFNT3NjaWxsYXRvcn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuRmF0T3NjaWxsYXRvcj1mdW5jdGlvbigpe3ZhciBlPXQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImZyZXF1ZW5jeVwiLFwidHlwZVwiLFwic3ByZWFkXCJdLHQuRmF0T3NjaWxsYXRvcik7dC5Tb3VyY2UuY2FsbCh0aGlzLGUpLHRoaXMuZnJlcXVlbmN5PW5ldyB0LlNpZ25hbChlLmZyZXF1ZW5jeSx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLmRldHVuZT1uZXcgdC5TaWduYWwoZS5kZXR1bmUsdC5UeXBlLkNlbnRzKSx0aGlzLl9vc2NpbGxhdG9ycz1bXSx0aGlzLl9zcHJlYWQ9ZS5zcHJlYWQsdGhpcy5fdHlwZT1lLnR5cGUsdGhpcy5fcGhhc2U9ZS5waGFzZSx0aGlzLl9wYXJ0aWFscz10LmRlZmF1bHRBcmcoZS5wYXJ0aWFscyxbXSksdGhpcy5jb3VudD1lLmNvdW50LHRoaXMuX3JlYWRPbmx5KFtcImZyZXF1ZW5jeVwiLFwiZGV0dW5lXCJdKX0sdC5leHRlbmQodC5GYXRPc2NpbGxhdG9yLHQuU291cmNlKSx0LkZhdE9zY2lsbGF0b3IuZGVmYXVsdHM9e2ZyZXF1ZW5jeTo0NDAsZGV0dW5lOjAscGhhc2U6MCxzcHJlYWQ6MjAsY291bnQ6Myx0eXBlOlwic2F3dG9vdGhcIn0sdC5GYXRPc2NpbGxhdG9yLnByb3RvdHlwZS5fc3RhcnQ9ZnVuY3Rpb24odCl7dD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKGUpe2Uuc3RhcnQodCl9KX0sdC5GYXRPc2NpbGxhdG9yLnByb3RvdHlwZS5fc3RvcD1mdW5jdGlvbih0KXt0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX2ZvckVhY2goZnVuY3Rpb24oZSl7ZS5zdG9wKHQpfSl9LHQuRmF0T3NjaWxsYXRvci5wcm90b3R5cGUuX2ZvckVhY2g9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLl9vc2NpbGxhdG9ycy5sZW5ndGg7ZSsrKXQuY2FsbCh0aGlzLHRoaXMuX29zY2lsbGF0b3JzW2VdLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5GYXRPc2NpbGxhdG9yLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3R5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl90eXBlPXQsdGhpcy5fZm9yRWFjaChmdW5jdGlvbihlKXtlLnR5cGU9dH0pfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkZhdE9zY2lsbGF0b3IucHJvdG90eXBlLFwic3ByZWFkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zcHJlYWR9LHNldDpmdW5jdGlvbih0KXt2YXIgZSxpO3RoaXMuX3NwcmVhZD10LHRoaXMuX29zY2lsbGF0b3JzLmxlbmd0aD4xJiYoZT0tdC8yLGk9dC8odGhpcy5fb3NjaWxsYXRvcnMubGVuZ3RoLTEpLHRoaXMuX2ZvckVhY2goZnVuY3Rpb24odCxuKXt0LmRldHVuZS52YWx1ZT1lK2kqbn0pKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5GYXRPc2NpbGxhdG9yLnByb3RvdHlwZSxcImNvdW50XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vc2NpbGxhdG9ycy5sZW5ndGh9LHNldDpmdW5jdGlvbihlKXt2YXIgaSxuO2lmKGU9TWF0aC5tYXgoZSwxKSx0aGlzLl9vc2NpbGxhdG9ycy5sZW5ndGghPT1lKXtmb3IodGhpcy5fZm9yRWFjaChmdW5jdGlvbih0KXt0LmRpc3Bvc2UoKX0pLHRoaXMuX29zY2lsbGF0b3JzPVtdLGk9MDtpPGU7aSsrKW49bmV3IHQuT3NjaWxsYXRvcix0aGlzLnR5cGU9PT10Lk9zY2lsbGF0b3IuVHlwZS5DdXN0b20/bi5wYXJ0aWFscz10aGlzLl9wYXJ0aWFsczpuLnR5cGU9dGhpcy5fdHlwZSxuLnBoYXNlPXRoaXMuX3BoYXNlLG4udm9sdW1lLnZhbHVlPS02LWUsdGhpcy5mcmVxdWVuY3kuY29ubmVjdChuLmZyZXF1ZW5jeSksdGhpcy5kZXR1bmUuY29ubmVjdChuLmRldHVuZSksbi5jb25uZWN0KHRoaXMub3V0cHV0KSx0aGlzLl9vc2NpbGxhdG9yc1tpXT1uO3RoaXMuc3ByZWFkPXRoaXMuX3NwcmVhZCx0aGlzLnN0YXRlPT09dC5TdGF0ZS5TdGFydGVkJiZ0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKHQpe3Quc3RhcnQoKX0pfX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5GYXRPc2NpbGxhdG9yLnByb3RvdHlwZSxcInBoYXNlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9waGFzZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BoYXNlPXQsdGhpcy5fZm9yRWFjaChmdW5jdGlvbihlKXtlLnBoYXNlPXR9KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5GYXRPc2NpbGxhdG9yLnByb3RvdHlwZSxcInBhcnRpYWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXJ0aWFsc30sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX3BhcnRpYWxzPWUsdGhpcy5fdHlwZT10Lk9zY2lsbGF0b3IuVHlwZS5DdXN0b20sdGhpcy5fZm9yRWFjaChmdW5jdGlvbih0KXt0LnBhcnRpYWxzPWV9KX19KSx0LkZhdE9zY2lsbGF0b3IucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5Tb3VyY2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJmcmVxdWVuY3lcIixcImRldHVuZVwiXSksdGhpcy5mcmVxdWVuY3kuZGlzcG9zZSgpLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5kZXR1bmUuZGlzcG9zZSgpLHRoaXMuZGV0dW5lPW51bGwsdGhpcy5fZm9yRWFjaChmdW5jdGlvbih0KXt0LmRpc3Bvc2UoKX0pLHRoaXMuX29zY2lsbGF0b3JzPW51bGwsdGhpcy5fcGFydGlhbHM9bnVsbCx0aGlzfSx0LkZhdE9zY2lsbGF0b3J9KSx0KGZ1bmN0aW9uKHQpe3QuT21uaU9zY2lsbGF0b3I9ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcInR5cGVcIl0sdC5PbW5pT3NjaWxsYXRvcik7dC5Tb3VyY2UuY2FsbCh0aGlzLGUpLHRoaXMuZnJlcXVlbmN5PW5ldyB0LlNpZ25hbChlLmZyZXF1ZW5jeSx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLmRldHVuZT1uZXcgdC5TaWduYWwoZS5kZXR1bmUsdC5UeXBlLkNlbnRzKSx0aGlzLl9zb3VyY2VUeXBlPXZvaWQgMCx0aGlzLl9vc2NpbGxhdG9yPW51bGwsdGhpcy50eXBlPWUudHlwZSx0aGlzLl9yZWFkT25seShbXCJmcmVxdWVuY3lcIixcImRldHVuZVwiXSksdGhpcy5zZXQoZSl9LHQuZXh0ZW5kKHQuT21uaU9zY2lsbGF0b3IsdC5Tb3VyY2UpLHQuT21uaU9zY2lsbGF0b3IuZGVmYXVsdHM9e2ZyZXF1ZW5jeTo0NDAsZGV0dW5lOjAsdHlwZTpcInNpbmVcIixwaGFzZTowfTt2YXIgZT17UHVsc2U6XCJQdWxzZU9zY2lsbGF0b3JcIixQV006XCJQV01Pc2NpbGxhdG9yXCIsT3NjOlwiT3NjaWxsYXRvclwiLEZNOlwiRk1Pc2NpbGxhdG9yXCIsQU06XCJBTU9zY2lsbGF0b3JcIixGYXQ6XCJGYXRPc2NpbGxhdG9yXCJ9O3JldHVybiB0Lk9tbmlPc2NpbGxhdG9yLnByb3RvdHlwZS5fc3RhcnQ9ZnVuY3Rpb24odCl7dGhpcy5fb3NjaWxsYXRvci5zdGFydCh0KX0sdC5PbW5pT3NjaWxsYXRvci5wcm90b3R5cGUuX3N0b3A9ZnVuY3Rpb24odCl7dGhpcy5fb3NjaWxsYXRvci5zdG9wKHQpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5PbW5pT3NjaWxsYXRvci5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3ZhciB0PVwiXCI7cmV0dXJuIHRoaXMuX3NvdXJjZVR5cGU9PT1lLkZNP3Q9XCJmbVwiOnRoaXMuX3NvdXJjZVR5cGU9PT1lLkFNP3Q9XCJhbVwiOnRoaXMuX3NvdXJjZVR5cGU9PT1lLkZhdCYmKHQ9XCJmYXRcIiksdCt0aGlzLl9vc2NpbGxhdG9yLnR5cGV9LHNldDpmdW5jdGlvbih0KXtcImZtXCI9PT10LnN1YnN0cigwLDIpPyh0aGlzLl9jcmVhdGVOZXdPc2NpbGxhdG9yKGUuRk0pLHRoaXMuX29zY2lsbGF0b3IudHlwZT10LnN1YnN0cigyKSk6XCJhbVwiPT09dC5zdWJzdHIoMCwyKT8odGhpcy5fY3JlYXRlTmV3T3NjaWxsYXRvcihlLkFNKSx0aGlzLl9vc2NpbGxhdG9yLnR5cGU9dC5zdWJzdHIoMikpOlwiZmF0XCI9PT10LnN1YnN0cigwLDMpPyh0aGlzLl9jcmVhdGVOZXdPc2NpbGxhdG9yKGUuRmF0KSx0aGlzLl9vc2NpbGxhdG9yLnR5cGU9dC5zdWJzdHIoMykpOlwicHdtXCI9PT10P3RoaXMuX2NyZWF0ZU5ld09zY2lsbGF0b3IoZS5QV00pOlwicHVsc2VcIj09PXQ/dGhpcy5fY3JlYXRlTmV3T3NjaWxsYXRvcihlLlB1bHNlKToodGhpcy5fY3JlYXRlTmV3T3NjaWxsYXRvcihlLk9zYyksdGhpcy5fb3NjaWxsYXRvci50eXBlPXQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lk9tbmlPc2NpbGxhdG9yLnByb3RvdHlwZSxcInBhcnRpYWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vc2NpbGxhdG9yLnBhcnRpYWxzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3NjaWxsYXRvci5wYXJ0aWFscz10fX0pLHQuT21uaU9zY2lsbGF0b3IucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLGkpe3JldHVyblwidHlwZVwiPT09ZT90aGlzLnR5cGU9aTp0LmlzT2JqZWN0KGUpJiZlLmhhc093blByb3BlcnR5KFwidHlwZVwiKSYmKHRoaXMudHlwZT1lLnR5cGUpLHQucHJvdG90eXBlLnNldC5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpc30sdC5PbW5pT3NjaWxsYXRvci5wcm90b3R5cGUuX2NyZWF0ZU5ld09zY2lsbGF0b3I9ZnVuY3Rpb24oZSl7dmFyIGksbixzO2UhPT10aGlzLl9zb3VyY2VUeXBlJiYodGhpcy5fc291cmNlVHlwZT1lLGk9dFtlXSxuPXRoaXMubm93KCksbnVsbCE9PXRoaXMuX29zY2lsbGF0b3ImJihzPXRoaXMuX29zY2lsbGF0b3Iscy5zdG9wKG4pLHRoaXMuY29udGV4dC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cy5kaXNwb3NlKCkscz1udWxsfSx0aGlzLmJsb2NrVGltZSkpLHRoaXMuX29zY2lsbGF0b3I9bmV3IGksdGhpcy5mcmVxdWVuY3kuY29ubmVjdCh0aGlzLl9vc2NpbGxhdG9yLmZyZXF1ZW5jeSksdGhpcy5kZXR1bmUuY29ubmVjdCh0aGlzLl9vc2NpbGxhdG9yLmRldHVuZSksdGhpcy5fb3NjaWxsYXRvci5jb25uZWN0KHRoaXMub3V0cHV0KSx0aGlzLnN0YXRlPT09dC5TdGF0ZS5TdGFydGVkJiZ0aGlzLl9vc2NpbGxhdG9yLnN0YXJ0KG4pKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuT21uaU9zY2lsbGF0b3IucHJvdG90eXBlLFwicGhhc2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29zY2lsbGF0b3IucGhhc2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vc2NpbGxhdG9yLnBoYXNlPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuT21uaU9zY2lsbGF0b3IucHJvdG90eXBlLFwid2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5fc291cmNlVHlwZT09PWUuUHVsc2UpcmV0dXJuIHRoaXMuX29zY2lsbGF0b3Iud2lkdGh9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuT21uaU9zY2lsbGF0b3IucHJvdG90eXBlLFwiY291bnRcIix7Z2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5fc291cmNlVHlwZT09PWUuRmF0KXJldHVybiB0aGlzLl9vc2NpbGxhdG9yLmNvdW50fSxzZXQ6ZnVuY3Rpb24odCl7XG50aGlzLl9zb3VyY2VUeXBlPT09ZS5GYXQmJih0aGlzLl9vc2NpbGxhdG9yLmNvdW50PXQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lk9tbmlPc2NpbGxhdG9yLnByb3RvdHlwZSxcInNwcmVhZFwiLHtnZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLl9zb3VyY2VUeXBlPT09ZS5GYXQpcmV0dXJuIHRoaXMuX29zY2lsbGF0b3Iuc3ByZWFkfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc291cmNlVHlwZT09PWUuRmF0JiYodGhpcy5fb3NjaWxsYXRvci5zcHJlYWQ9dCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuT21uaU9zY2lsbGF0b3IucHJvdG90eXBlLFwibW9kdWxhdGlvblR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5fc291cmNlVHlwZT09PWUuRk18fHRoaXMuX3NvdXJjZVR5cGU9PT1lLkFNKXJldHVybiB0aGlzLl9vc2NpbGxhdG9yLm1vZHVsYXRpb25UeXBlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc291cmNlVHlwZSE9PWUuRk0mJnRoaXMuX3NvdXJjZVR5cGUhPT1lLkFNfHwodGhpcy5fb3NjaWxsYXRvci5tb2R1bGF0aW9uVHlwZT10KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5PbW5pT3NjaWxsYXRvci5wcm90b3R5cGUsXCJtb2R1bGF0aW9uSW5kZXhcIix7Z2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5fc291cmNlVHlwZT09PWUuRk0pcmV0dXJuIHRoaXMuX29zY2lsbGF0b3IubW9kdWxhdGlvbkluZGV4fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lk9tbmlPc2NpbGxhdG9yLnByb3RvdHlwZSxcImhhcm1vbmljaXR5XCIse2dldDpmdW5jdGlvbigpe2lmKHRoaXMuX3NvdXJjZVR5cGU9PT1lLkZNfHx0aGlzLl9zb3VyY2VUeXBlPT09ZS5BTSlyZXR1cm4gdGhpcy5fb3NjaWxsYXRvci5oYXJtb25pY2l0eX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5PbW5pT3NjaWxsYXRvci5wcm90b3R5cGUsXCJtb2R1bGF0aW9uRnJlcXVlbmN5XCIse2dldDpmdW5jdGlvbigpe2lmKHRoaXMuX3NvdXJjZVR5cGU9PT1lLlBXTSlyZXR1cm4gdGhpcy5fb3NjaWxsYXRvci5tb2R1bGF0aW9uRnJlcXVlbmN5fX0pLHQuT21uaU9zY2lsbGF0b3IucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5Tb3VyY2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJmcmVxdWVuY3lcIixcImRldHVuZVwiXSksdGhpcy5kZXR1bmUuZGlzcG9zZSgpLHRoaXMuZGV0dW5lPW51bGwsdGhpcy5mcmVxdWVuY3kuZGlzcG9zZSgpLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5fb3NjaWxsYXRvci5kaXNwb3NlKCksdGhpcy5fb3NjaWxsYXRvcj1udWxsLHRoaXMuX3NvdXJjZVR5cGU9bnVsbCx0aGlzfSx0Lk9tbmlPc2NpbGxhdG9yfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5JbnN0cnVtZW50PWZ1bmN0aW9uKGUpe2U9dC5kZWZhdWx0QXJnKGUsdC5JbnN0cnVtZW50LmRlZmF1bHRzKSx0LkF1ZGlvTm9kZS5jYWxsKHRoaXMpLHRoaXMuX3ZvbHVtZT10aGlzLm91dHB1dD1uZXcgdC5Wb2x1bWUoZS52b2x1bWUpLHRoaXMudm9sdW1lPXRoaXMuX3ZvbHVtZS52b2x1bWUsdGhpcy5fcmVhZE9ubHkoXCJ2b2x1bWVcIil9LHQuZXh0ZW5kKHQuSW5zdHJ1bWVudCx0LkF1ZGlvTm9kZSksdC5JbnN0cnVtZW50LmRlZmF1bHRzPXt2b2x1bWU6MH0sdC5JbnN0cnVtZW50LnByb3RvdHlwZS50cmlnZ2VyQXR0YWNrPXQubm9PcCx0Lkluc3RydW1lbnQucHJvdG90eXBlLnRyaWdnZXJSZWxlYXNlPXQubm9PcCx0Lkluc3RydW1lbnQucHJvdG90eXBlLnRyaWdnZXJBdHRhY2tSZWxlYXNlPWZ1bmN0aW9uKHQsZSxpLG4pe3JldHVybiBpPXRoaXMudG9TZWNvbmRzKGkpLGU9dGhpcy50b1NlY29uZHMoZSksdGhpcy50cmlnZ2VyQXR0YWNrKHQsaSxuKSx0aGlzLnRyaWdnZXJSZWxlYXNlKGkrZSksdGhpc30sdC5JbnN0cnVtZW50LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fdm9sdW1lLmRpc3Bvc2UoKSx0aGlzLl92b2x1bWU9bnVsbCx0aGlzLl93cml0YWJsZShbXCJ2b2x1bWVcIl0pLHRoaXMudm9sdW1lPW51bGwsdGhpc30sdC5JbnN0cnVtZW50fSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5Nb25vcGhvbmljPWZ1bmN0aW9uKGUpe2U9dC5kZWZhdWx0QXJnKGUsdC5Nb25vcGhvbmljLmRlZmF1bHRzKSx0Lkluc3RydW1lbnQuY2FsbCh0aGlzLGUpLHRoaXMucG9ydGFtZW50bz1lLnBvcnRhbWVudG99LHQuZXh0ZW5kKHQuTW9ub3Bob25pYyx0Lkluc3RydW1lbnQpLHQuTW9ub3Bob25pYy5kZWZhdWx0cz17cG9ydGFtZW50bzowfSx0Lk1vbm9waG9uaWMucHJvdG90eXBlLnRyaWdnZXJBdHRhY2s9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBlPXRoaXMudG9TZWNvbmRzKGUpLHRoaXMuX3RyaWdnZXJFbnZlbG9wZUF0dGFjayhlLGkpLHRoaXMuc2V0Tm90ZSh0LGUpLHRoaXN9LHQuTW9ub3Bob25pYy5wcm90b3R5cGUudHJpZ2dlclJlbGVhc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy50b1NlY29uZHModCksdGhpcy5fdHJpZ2dlckVudmVsb3BlUmVsZWFzZSh0KSx0aGlzfSx0Lk1vbm9waG9uaWMucHJvdG90eXBlLl90cmlnZ2VyRW52ZWxvcGVBdHRhY2s9ZnVuY3Rpb24oKXt9LHQuTW9ub3Bob25pYy5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZVJlbGVhc2U9ZnVuY3Rpb24oKXt9LHQuTW9ub3Bob25pYy5wcm90b3R5cGUuc2V0Tm90ZT1mdW5jdGlvbih0LGUpe3ZhciBpLG47cmV0dXJuIGU9dGhpcy50b1NlY29uZHMoZSksdGhpcy5wb3J0YW1lbnRvPjA/KGk9dGhpcy5mcmVxdWVuY3kudmFsdWUsdGhpcy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoaSxlKSxuPXRoaXMudG9TZWNvbmRzKHRoaXMucG9ydGFtZW50byksdGhpcy5mcmVxdWVuY3kuZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSh0LGUrbikpOnRoaXMuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKHQsZSksdGhpc30sdC5Nb25vcGhvbmljfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5TeW50aD1mdW5jdGlvbihlKXtlPXQuZGVmYXVsdEFyZyhlLHQuU3ludGguZGVmYXVsdHMpLHQuTW9ub3Bob25pYy5jYWxsKHRoaXMsZSksdGhpcy5vc2NpbGxhdG9yPW5ldyB0Lk9tbmlPc2NpbGxhdG9yKGUub3NjaWxsYXRvciksdGhpcy5mcmVxdWVuY3k9dGhpcy5vc2NpbGxhdG9yLmZyZXF1ZW5jeSx0aGlzLmRldHVuZT10aGlzLm9zY2lsbGF0b3IuZGV0dW5lLHRoaXMuZW52ZWxvcGU9bmV3IHQuQW1wbGl0dWRlRW52ZWxvcGUoZS5lbnZlbG9wZSksdGhpcy5vc2NpbGxhdG9yLmNoYWluKHRoaXMuZW52ZWxvcGUsdGhpcy5vdXRwdXQpLHRoaXMub3NjaWxsYXRvci5zdGFydCgpLHRoaXMuX3JlYWRPbmx5KFtcIm9zY2lsbGF0b3JcIixcImZyZXF1ZW5jeVwiLFwiZGV0dW5lXCIsXCJlbnZlbG9wZVwiXSl9LHQuZXh0ZW5kKHQuU3ludGgsdC5Nb25vcGhvbmljKSx0LlN5bnRoLmRlZmF1bHRzPXtvc2NpbGxhdG9yOnt0eXBlOlwidHJpYW5nbGVcIn0sZW52ZWxvcGU6e2F0dGFjazouMDA1LGRlY2F5Oi4xLHN1c3RhaW46LjMscmVsZWFzZToxfX0sdC5TeW50aC5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZUF0dGFjaz1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmVudmVsb3BlLnRyaWdnZXJBdHRhY2sodCxlKSx0aGlzfSx0LlN5bnRoLnByb3RvdHlwZS5fdHJpZ2dlckVudmVsb3BlUmVsZWFzZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5lbnZlbG9wZS50cmlnZ2VyUmVsZWFzZSh0KSx0aGlzfSx0LlN5bnRoLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuTW9ub3Bob25pYy5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcIm9zY2lsbGF0b3JcIixcImZyZXF1ZW5jeVwiLFwiZGV0dW5lXCIsXCJlbnZlbG9wZVwiXSksdGhpcy5vc2NpbGxhdG9yLmRpc3Bvc2UoKSx0aGlzLm9zY2lsbGF0b3I9bnVsbCx0aGlzLmVudmVsb3BlLmRpc3Bvc2UoKSx0aGlzLmVudmVsb3BlPW51bGwsdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLmRldHVuZT1udWxsLHRoaXN9LHQuU3ludGh9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkFNU3ludGg9ZnVuY3Rpb24oZSl7ZT10LmRlZmF1bHRBcmcoZSx0LkFNU3ludGguZGVmYXVsdHMpLHQuTW9ub3Bob25pYy5jYWxsKHRoaXMsZSksdGhpcy5fY2Fycmllcj1uZXcgdC5TeW50aCx0aGlzLl9jYXJyaWVyLnZvbHVtZS52YWx1ZT0tMTAsdGhpcy5vc2NpbGxhdG9yPXRoaXMuX2NhcnJpZXIub3NjaWxsYXRvcix0aGlzLmVudmVsb3BlPXRoaXMuX2NhcnJpZXIuZW52ZWxvcGUuc2V0KGUuZW52ZWxvcGUpLHRoaXMuX21vZHVsYXRvcj1uZXcgdC5TeW50aCx0aGlzLl9tb2R1bGF0b3Iudm9sdW1lLnZhbHVlPS0xMCx0aGlzLm1vZHVsYXRpb249dGhpcy5fbW9kdWxhdG9yLm9zY2lsbGF0b3Iuc2V0KGUubW9kdWxhdGlvbiksdGhpcy5tb2R1bGF0aW9uRW52ZWxvcGU9dGhpcy5fbW9kdWxhdG9yLmVudmVsb3BlLnNldChlLm1vZHVsYXRpb25FbnZlbG9wZSksdGhpcy5mcmVxdWVuY3k9bmV3IHQuU2lnbmFsKDQ0MCx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLmRldHVuZT1uZXcgdC5TaWduYWwoZS5kZXR1bmUsdC5UeXBlLkNlbnRzKSx0aGlzLmhhcm1vbmljaXR5PW5ldyB0Lk11bHRpcGx5KGUuaGFybW9uaWNpdHkpLHRoaXMuaGFybW9uaWNpdHkudW5pdHM9dC5UeXBlLlBvc2l0aXZlLHRoaXMuX21vZHVsYXRpb25TY2FsZT1uZXcgdC5BdWRpb1RvR2Fpbix0aGlzLl9tb2R1bGF0aW9uTm9kZT1uZXcgdC5HYWluLHRoaXMuZnJlcXVlbmN5LmNvbm5lY3QodGhpcy5fY2Fycmllci5mcmVxdWVuY3kpLHRoaXMuZnJlcXVlbmN5LmNoYWluKHRoaXMuaGFybW9uaWNpdHksdGhpcy5fbW9kdWxhdG9yLmZyZXF1ZW5jeSksdGhpcy5kZXR1bmUuZmFuKHRoaXMuX2NhcnJpZXIuZGV0dW5lLHRoaXMuX21vZHVsYXRvci5kZXR1bmUpLHRoaXMuX21vZHVsYXRvci5jaGFpbih0aGlzLl9tb2R1bGF0aW9uU2NhbGUsdGhpcy5fbW9kdWxhdGlvbk5vZGUuZ2FpbiksdGhpcy5fY2Fycmllci5jaGFpbih0aGlzLl9tb2R1bGF0aW9uTm9kZSx0aGlzLm91dHB1dCksdGhpcy5fcmVhZE9ubHkoW1wiZnJlcXVlbmN5XCIsXCJoYXJtb25pY2l0eVwiLFwib3NjaWxsYXRvclwiLFwiZW52ZWxvcGVcIixcIm1vZHVsYXRpb25cIixcIm1vZHVsYXRpb25FbnZlbG9wZVwiLFwiZGV0dW5lXCJdKX0sdC5leHRlbmQodC5BTVN5bnRoLHQuTW9ub3Bob25pYyksdC5BTVN5bnRoLmRlZmF1bHRzPXtoYXJtb25pY2l0eTozLGRldHVuZTowLG9zY2lsbGF0b3I6e3R5cGU6XCJzaW5lXCJ9LGVudmVsb3BlOnthdHRhY2s6LjAxLGRlY2F5Oi4wMSxzdXN0YWluOjEscmVsZWFzZTouNX0sbW9kdWxhdGlvbjp7dHlwZTpcInNxdWFyZVwifSxtb2R1bGF0aW9uRW52ZWxvcGU6e2F0dGFjazouNSxkZWNheTowLHN1c3RhaW46MSxyZWxlYXNlOi41fX0sdC5BTVN5bnRoLnByb3RvdHlwZS5fdHJpZ2dlckVudmVsb3BlQXR0YWNrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9dGhpcy50b1NlY29uZHModCksdGhpcy5lbnZlbG9wZS50cmlnZ2VyQXR0YWNrKHQsZSksdGhpcy5tb2R1bGF0aW9uRW52ZWxvcGUudHJpZ2dlckF0dGFjayh0LGUpLHRoaXN9LHQuQU1TeW50aC5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZVJlbGVhc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZW52ZWxvcGUudHJpZ2dlclJlbGVhc2UodCksdGhpcy5tb2R1bGF0aW9uRW52ZWxvcGUudHJpZ2dlclJlbGVhc2UodCksdGhpc30sdC5BTVN5bnRoLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuTW9ub3Bob25pYy5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcImZyZXF1ZW5jeVwiLFwiaGFybW9uaWNpdHlcIixcIm9zY2lsbGF0b3JcIixcImVudmVsb3BlXCIsXCJtb2R1bGF0aW9uXCIsXCJtb2R1bGF0aW9uRW52ZWxvcGVcIixcImRldHVuZVwiXSksdGhpcy5fY2Fycmllci5kaXNwb3NlKCksdGhpcy5fY2Fycmllcj1udWxsLHRoaXMuX21vZHVsYXRvci5kaXNwb3NlKCksdGhpcy5fbW9kdWxhdG9yPW51bGwsdGhpcy5mcmVxdWVuY3kuZGlzcG9zZSgpLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5kZXR1bmUuZGlzcG9zZSgpLHRoaXMuZGV0dW5lPW51bGwsdGhpcy5oYXJtb25pY2l0eS5kaXNwb3NlKCksdGhpcy5oYXJtb25pY2l0eT1udWxsLHRoaXMuX21vZHVsYXRpb25TY2FsZS5kaXNwb3NlKCksdGhpcy5fbW9kdWxhdGlvblNjYWxlPW51bGwsdGhpcy5fbW9kdWxhdGlvbk5vZGUuZGlzcG9zZSgpLHRoaXMuX21vZHVsYXRpb25Ob2RlPW51bGwsdGhpcy5vc2NpbGxhdG9yPW51bGwsdGhpcy5lbnZlbG9wZT1udWxsLHRoaXMubW9kdWxhdGlvbkVudmVsb3BlPW51bGwsdGhpcy5tb2R1bGF0aW9uPW51bGwsdGhpc30sdC5BTVN5bnRofSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5Nb25vU3ludGg9ZnVuY3Rpb24oZSl7ZT10LmRlZmF1bHRBcmcoZSx0Lk1vbm9TeW50aC5kZWZhdWx0cyksdC5Nb25vcGhvbmljLmNhbGwodGhpcyxlKSx0aGlzLm9zY2lsbGF0b3I9bmV3IHQuT21uaU9zY2lsbGF0b3IoZS5vc2NpbGxhdG9yKSx0aGlzLmZyZXF1ZW5jeT10aGlzLm9zY2lsbGF0b3IuZnJlcXVlbmN5LHRoaXMuZGV0dW5lPXRoaXMub3NjaWxsYXRvci5kZXR1bmUsdGhpcy5maWx0ZXI9bmV3IHQuRmlsdGVyKGUuZmlsdGVyKSx0aGlzLmZpbHRlckVudmVsb3BlPW5ldyB0LkZyZXF1ZW5jeUVudmVsb3BlKGUuZmlsdGVyRW52ZWxvcGUpLHRoaXMuZW52ZWxvcGU9bmV3IHQuQW1wbGl0dWRlRW52ZWxvcGUoZS5lbnZlbG9wZSksdGhpcy5vc2NpbGxhdG9yLmNoYWluKHRoaXMuZmlsdGVyLHRoaXMuZW52ZWxvcGUsdGhpcy5vdXRwdXQpLHRoaXMub3NjaWxsYXRvci5zdGFydCgpLHRoaXMuZmlsdGVyRW52ZWxvcGUuY29ubmVjdCh0aGlzLmZpbHRlci5mcmVxdWVuY3kpLHRoaXMuX3JlYWRPbmx5KFtcIm9zY2lsbGF0b3JcIixcImZyZXF1ZW5jeVwiLFwiZGV0dW5lXCIsXCJmaWx0ZXJcIixcImZpbHRlckVudmVsb3BlXCIsXCJlbnZlbG9wZVwiXSl9LHQuZXh0ZW5kKHQuTW9ub1N5bnRoLHQuTW9ub3Bob25pYyksdC5Nb25vU3ludGguZGVmYXVsdHM9e2ZyZXF1ZW5jeTpcIkM0XCIsZGV0dW5lOjAsb3NjaWxsYXRvcjp7dHlwZTpcInNxdWFyZVwifSxmaWx0ZXI6e1E6Nix0eXBlOlwibG93cGFzc1wiLHJvbGxvZmY6LTI0fSxlbnZlbG9wZTp7YXR0YWNrOi4wMDUsZGVjYXk6LjEsc3VzdGFpbjouOSxyZWxlYXNlOjF9LGZpbHRlckVudmVsb3BlOnthdHRhY2s6LjA2LGRlY2F5Oi4yLHN1c3RhaW46LjUscmVsZWFzZToyLGJhc2VGcmVxdWVuY3k6MjAwLG9jdGF2ZXM6NyxleHBvbmVudDoyfX0sdC5Nb25vU3ludGgucHJvdG90eXBlLl90cmlnZ2VyRW52ZWxvcGVBdHRhY2s9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5lbnZlbG9wZS50cmlnZ2VyQXR0YWNrKHQsZSksdGhpcy5maWx0ZXJFbnZlbG9wZS50cmlnZ2VyQXR0YWNrKHQpLHRoaXN9LHQuTW9ub1N5bnRoLnByb3RvdHlwZS5fdHJpZ2dlckVudmVsb3BlUmVsZWFzZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5lbnZlbG9wZS50cmlnZ2VyUmVsZWFzZSh0KSx0aGlzLmZpbHRlckVudmVsb3BlLnRyaWdnZXJSZWxlYXNlKHQpLHRoaXN9LHQuTW9ub1N5bnRoLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuTW9ub3Bob25pYy5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcIm9zY2lsbGF0b3JcIixcImZyZXF1ZW5jeVwiLFwiZGV0dW5lXCIsXCJmaWx0ZXJcIixcImZpbHRlckVudmVsb3BlXCIsXCJlbnZlbG9wZVwiXSksdGhpcy5vc2NpbGxhdG9yLmRpc3Bvc2UoKSx0aGlzLm9zY2lsbGF0b3I9bnVsbCx0aGlzLmVudmVsb3BlLmRpc3Bvc2UoKSx0aGlzLmVudmVsb3BlPW51bGwsdGhpcy5maWx0ZXJFbnZlbG9wZS5kaXNwb3NlKCksdGhpcy5maWx0ZXJFbnZlbG9wZT1udWxsLHRoaXMuZmlsdGVyLmRpc3Bvc2UoKSx0aGlzLmZpbHRlcj1udWxsLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5kZXR1bmU9bnVsbCx0aGlzfSx0Lk1vbm9TeW50aH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuRHVvU3ludGg9ZnVuY3Rpb24oZSl7ZT10LmRlZmF1bHRBcmcoZSx0LkR1b1N5bnRoLmRlZmF1bHRzKSx0Lk1vbm9waG9uaWMuY2FsbCh0aGlzLGUpLHRoaXMudm9pY2UwPW5ldyB0Lk1vbm9TeW50aChlLnZvaWNlMCksdGhpcy52b2ljZTAudm9sdW1lLnZhbHVlPS0xMCx0aGlzLnZvaWNlMT1uZXcgdC5Nb25vU3ludGgoZS52b2ljZTEpLHRoaXMudm9pY2UxLnZvbHVtZS52YWx1ZT0tMTAsdGhpcy5fdmlicmF0bz1uZXcgdC5MRk8oZS52aWJyYXRvUmF0ZSwtNTAsNTApLHRoaXMuX3ZpYnJhdG8uc3RhcnQoKSx0aGlzLnZpYnJhdG9SYXRlPXRoaXMuX3ZpYnJhdG8uZnJlcXVlbmN5LHRoaXMuX3ZpYnJhdG9HYWluPW5ldyB0LkdhaW4oZS52aWJyYXRvQW1vdW50LHQuVHlwZS5Qb3NpdGl2ZSksdGhpcy52aWJyYXRvQW1vdW50PXRoaXMuX3ZpYnJhdG9HYWluLmdhaW4sdGhpcy5mcmVxdWVuY3k9bmV3IHQuU2lnbmFsKDQ0MCx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLmhhcm1vbmljaXR5PW5ldyB0Lk11bHRpcGx5KGUuaGFybW9uaWNpdHkpLHRoaXMuaGFybW9uaWNpdHkudW5pdHM9dC5UeXBlLlBvc2l0aXZlLHRoaXMuZnJlcXVlbmN5LmNvbm5lY3QodGhpcy52b2ljZTAuZnJlcXVlbmN5KSx0aGlzLmZyZXF1ZW5jeS5jaGFpbih0aGlzLmhhcm1vbmljaXR5LHRoaXMudm9pY2UxLmZyZXF1ZW5jeSksdGhpcy5fdmlicmF0by5jb25uZWN0KHRoaXMuX3ZpYnJhdG9HYWluKSx0aGlzLl92aWJyYXRvR2Fpbi5mYW4odGhpcy52b2ljZTAuZGV0dW5lLHRoaXMudm9pY2UxLmRldHVuZSksdGhpcy52b2ljZTAuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy52b2ljZTEuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5fcmVhZE9ubHkoW1widm9pY2UwXCIsXCJ2b2ljZTFcIixcImZyZXF1ZW5jeVwiLFwidmlicmF0b0Ftb3VudFwiLFwidmlicmF0b1JhdGVcIl0pfSx0LmV4dGVuZCh0LkR1b1N5bnRoLHQuTW9ub3Bob25pYyksdC5EdW9TeW50aC5kZWZhdWx0cz17dmlicmF0b0Ftb3VudDouNSx2aWJyYXRvUmF0ZTo1LGhhcm1vbmljaXR5OjEuNSx2b2ljZTA6e3ZvbHVtZTotMTAscG9ydGFtZW50bzowLG9zY2lsbGF0b3I6e3R5cGU6XCJzaW5lXCJ9LGZpbHRlckVudmVsb3BlOnthdHRhY2s6LjAxLGRlY2F5OjAsc3VzdGFpbjoxLHJlbGVhc2U6LjV9LGVudmVsb3BlOnthdHRhY2s6LjAxLGRlY2F5OjAsc3VzdGFpbjoxLHJlbGVhc2U6LjV9fSx2b2ljZTE6e3ZvbHVtZTotMTAscG9ydGFtZW50bzowLG9zY2lsbGF0b3I6e3R5cGU6XCJzaW5lXCJ9LGZpbHRlckVudmVsb3BlOnthdHRhY2s6LjAxLGRlY2F5OjAsc3VzdGFpbjoxLHJlbGVhc2U6LjV9LGVudmVsb3BlOnthdHRhY2s6LjAxLGRlY2F5OjAsc3VzdGFpbjoxLHJlbGVhc2U6LjV9fX0sdC5EdW9TeW50aC5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZUF0dGFjaz1mdW5jdGlvbih0LGUpe3JldHVybiB0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMudm9pY2UwLmVudmVsb3BlLnRyaWdnZXJBdHRhY2sodCxlKSx0aGlzLnZvaWNlMS5lbnZlbG9wZS50cmlnZ2VyQXR0YWNrKHQsZSksdGhpcy52b2ljZTAuZmlsdGVyRW52ZWxvcGUudHJpZ2dlckF0dGFjayh0KSx0aGlzLnZvaWNlMS5maWx0ZXJFbnZlbG9wZS50cmlnZ2VyQXR0YWNrKHQpLHRoaXN9LHQuRHVvU3ludGgucHJvdG90eXBlLl90cmlnZ2VyRW52ZWxvcGVSZWxlYXNlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnZvaWNlMC50cmlnZ2VyUmVsZWFzZSh0KSx0aGlzLnZvaWNlMS50cmlnZ2VyUmVsZWFzZSh0KSx0aGlzfSx0LkR1b1N5bnRoLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuTW9ub3Bob25pYy5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcInZvaWNlMFwiLFwidm9pY2UxXCIsXCJmcmVxdWVuY3lcIixcInZpYnJhdG9BbW91bnRcIixcInZpYnJhdG9SYXRlXCJdKSx0aGlzLnZvaWNlMC5kaXNwb3NlKCksdGhpcy52b2ljZTA9bnVsbCx0aGlzLnZvaWNlMS5kaXNwb3NlKCksdGhpcy52b2ljZTE9bnVsbCx0aGlzLmZyZXF1ZW5jeS5kaXNwb3NlKCksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLl92aWJyYXRvR2Fpbi5kaXNwb3NlKCksdGhpcy5fdmlicmF0b0dhaW49bnVsbCx0aGlzLl92aWJyYXRvPW51bGwsdGhpcy5oYXJtb25pY2l0eS5kaXNwb3NlKCksdGhpcy5oYXJtb25pY2l0eT1udWxsLHRoaXMudmlicmF0b0Ftb3VudC5kaXNwb3NlKCksdGhpcy52aWJyYXRvQW1vdW50PW51bGwsdGhpcy52aWJyYXRvUmF0ZT1udWxsLHRoaXN9LHQuRHVvU3ludGh9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkZNU3ludGg9ZnVuY3Rpb24oZSl7ZT10LmRlZmF1bHRBcmcoZSx0LkZNU3ludGguZGVmYXVsdHMpLHQuTW9ub3Bob25pYy5jYWxsKHRoaXMsZSksdGhpcy5fY2Fycmllcj1uZXcgdC5TeW50aChlLmNhcnJpZXIpLHRoaXMuX2NhcnJpZXIudm9sdW1lLnZhbHVlPS0xMCx0aGlzLm9zY2lsbGF0b3I9dGhpcy5fY2Fycmllci5vc2NpbGxhdG9yLHRoaXMuZW52ZWxvcGU9dGhpcy5fY2Fycmllci5lbnZlbG9wZS5zZXQoZS5lbnZlbG9wZSksdGhpcy5fbW9kdWxhdG9yPW5ldyB0LlN5bnRoKGUubW9kdWxhdG9yKSx0aGlzLl9tb2R1bGF0b3Iudm9sdW1lLnZhbHVlPS0xMCx0aGlzLm1vZHVsYXRpb249dGhpcy5fbW9kdWxhdG9yLm9zY2lsbGF0b3Iuc2V0KGUubW9kdWxhdGlvbiksdGhpcy5tb2R1bGF0aW9uRW52ZWxvcGU9dGhpcy5fbW9kdWxhdG9yLmVudmVsb3BlLnNldChlLm1vZHVsYXRpb25FbnZlbG9wZSksdGhpcy5mcmVxdWVuY3k9bmV3IHQuU2lnbmFsKDQ0MCx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLmRldHVuZT1uZXcgdC5TaWduYWwoZS5kZXR1bmUsdC5UeXBlLkNlbnRzKSx0aGlzLmhhcm1vbmljaXR5PW5ldyB0Lk11bHRpcGx5KGUuaGFybW9uaWNpdHkpLHRoaXMuaGFybW9uaWNpdHkudW5pdHM9dC5UeXBlLlBvc2l0aXZlLHRoaXMubW9kdWxhdGlvbkluZGV4PW5ldyB0Lk11bHRpcGx5KGUubW9kdWxhdGlvbkluZGV4KSx0aGlzLm1vZHVsYXRpb25JbmRleC51bml0cz10LlR5cGUuUG9zaXRpdmUsdGhpcy5fbW9kdWxhdGlvbk5vZGU9bmV3IHQuR2FpbigwKSx0aGlzLmZyZXF1ZW5jeS5jb25uZWN0KHRoaXMuX2NhcnJpZXIuZnJlcXVlbmN5KSx0aGlzLmZyZXF1ZW5jeS5jaGFpbih0aGlzLmhhcm1vbmljaXR5LHRoaXMuX21vZHVsYXRvci5mcmVxdWVuY3kpLHRoaXMuZnJlcXVlbmN5LmNoYWluKHRoaXMubW9kdWxhdGlvbkluZGV4LHRoaXMuX21vZHVsYXRpb25Ob2RlKSx0aGlzLmRldHVuZS5mYW4odGhpcy5fY2Fycmllci5kZXR1bmUsdGhpcy5fbW9kdWxhdG9yLmRldHVuZSksdGhpcy5fbW9kdWxhdG9yLmNvbm5lY3QodGhpcy5fbW9kdWxhdGlvbk5vZGUuZ2FpbiksdGhpcy5fbW9kdWxhdGlvbk5vZGUuY29ubmVjdCh0aGlzLl9jYXJyaWVyLmZyZXF1ZW5jeSksdGhpcy5fY2Fycmllci5jb25uZWN0KHRoaXMub3V0cHV0KSx0aGlzLl9yZWFkT25seShbXCJmcmVxdWVuY3lcIixcImhhcm1vbmljaXR5XCIsXCJtb2R1bGF0aW9uSW5kZXhcIixcIm9zY2lsbGF0b3JcIixcImVudmVsb3BlXCIsXCJtb2R1bGF0aW9uXCIsXCJtb2R1bGF0aW9uRW52ZWxvcGVcIixcImRldHVuZVwiXSl9LHQuZXh0ZW5kKHQuRk1TeW50aCx0Lk1vbm9waG9uaWMpLHQuRk1TeW50aC5kZWZhdWx0cz17aGFybW9uaWNpdHk6Myxtb2R1bGF0aW9uSW5kZXg6MTAsZGV0dW5lOjAsb3NjaWxsYXRvcjp7dHlwZTpcInNpbmVcIn0sZW52ZWxvcGU6e2F0dGFjazouMDEsZGVjYXk6LjAxLHN1c3RhaW46MSxyZWxlYXNlOi41fSxtb2R1bGF0aW9uOnt0eXBlOlwic3F1YXJlXCJ9LG1vZHVsYXRpb25FbnZlbG9wZTp7YXR0YWNrOi41LGRlY2F5OjAsc3VzdGFpbjoxLHJlbGVhc2U6LjV9fSx0LkZNU3ludGgucHJvdG90eXBlLl90cmlnZ2VyRW52ZWxvcGVBdHRhY2s9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLmVudmVsb3BlLnRyaWdnZXJBdHRhY2sodCxlKSx0aGlzLm1vZHVsYXRpb25FbnZlbG9wZS50cmlnZ2VyQXR0YWNrKHQpLHRoaXN9LHQuRk1TeW50aC5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZVJlbGVhc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy50b1NlY29uZHModCksdGhpcy5lbnZlbG9wZS50cmlnZ2VyUmVsZWFzZSh0KSx0aGlzLm1vZHVsYXRpb25FbnZlbG9wZS50cmlnZ2VyUmVsZWFzZSh0KSx0aGlzfSx0LkZNU3ludGgucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5Nb25vcGhvbmljLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wiZnJlcXVlbmN5XCIsXCJoYXJtb25pY2l0eVwiLFwibW9kdWxhdGlvbkluZGV4XCIsXCJvc2NpbGxhdG9yXCIsXCJlbnZlbG9wZVwiLFwibW9kdWxhdGlvblwiLFwibW9kdWxhdGlvbkVudmVsb3BlXCIsXCJkZXR1bmVcIl0pLHRoaXMuX2NhcnJpZXIuZGlzcG9zZSgpLHRoaXMuX2NhcnJpZXI9bnVsbCx0aGlzLl9tb2R1bGF0b3IuZGlzcG9zZSgpLHRoaXMuX21vZHVsYXRvcj1udWxsLHRoaXMuZnJlcXVlbmN5LmRpc3Bvc2UoKSx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuZGV0dW5lLmRpc3Bvc2UoKSx0aGlzLmRldHVuZT1udWxsLHRoaXMubW9kdWxhdGlvbkluZGV4LmRpc3Bvc2UoKSx0aGlzLm1vZHVsYXRpb25JbmRleD1udWxsLHRoaXMuaGFybW9uaWNpdHkuZGlzcG9zZSgpLHRoaXMuaGFybW9uaWNpdHk9bnVsbCx0aGlzLl9tb2R1bGF0aW9uTm9kZS5kaXNwb3NlKCksdGhpcy5fbW9kdWxhdGlvbk5vZGU9bnVsbCx0aGlzLm9zY2lsbGF0b3I9bnVsbCx0aGlzLmVudmVsb3BlPW51bGwsdGhpcy5tb2R1bGF0aW9uRW52ZWxvcGU9bnVsbCx0aGlzLm1vZHVsYXRpb249bnVsbCx0aGlzfSx0LkZNU3ludGh9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0Lk1lbWJyYW5lU3ludGg9ZnVuY3Rpb24oZSl7ZT10LmRlZmF1bHRBcmcoZSx0Lk1lbWJyYW5lU3ludGguZGVmYXVsdHMpLHQuSW5zdHJ1bWVudC5jYWxsKHRoaXMsZSksdGhpcy5vc2NpbGxhdG9yPW5ldyB0Lk9tbmlPc2NpbGxhdG9yKGUub3NjaWxsYXRvcikuc3RhcnQoKSx0aGlzLmVudmVsb3BlPW5ldyB0LkFtcGxpdHVkZUVudmVsb3BlKGUuZW52ZWxvcGUpLHRoaXMub2N0YXZlcz1lLm9jdGF2ZXMsdGhpcy5waXRjaERlY2F5PWUucGl0Y2hEZWNheSx0aGlzLm9zY2lsbGF0b3IuY2hhaW4odGhpcy5lbnZlbG9wZSx0aGlzLm91dHB1dCksdGhpcy5fcmVhZE9ubHkoW1wib3NjaWxsYXRvclwiLFwiZW52ZWxvcGVcIl0pfSx0LmV4dGVuZCh0Lk1lbWJyYW5lU3ludGgsdC5JbnN0cnVtZW50KSx0Lk1lbWJyYW5lU3ludGguZGVmYXVsdHM9e3BpdGNoRGVjYXk6LjA1LG9jdGF2ZXM6MTAsb3NjaWxsYXRvcjp7dHlwZTpcInNpbmVcIn0sZW52ZWxvcGU6e2F0dGFjazouMDAxLGRlY2F5Oi40LHN1c3RhaW46LjAxLHJlbGVhc2U6MS40LGF0dGFja0N1cnZlOlwiZXhwb25lbnRpYWxcIn19LHQuTWVtYnJhbmVTeW50aC5wcm90b3R5cGUudHJpZ2dlckF0dGFjaz1mdW5jdGlvbih0LGUsaSl7ZT10aGlzLnRvU2Vjb25kcyhlKSx0PXRoaXMudG9GcmVxdWVuY3kodCk7dmFyIG49dCp0aGlzLm9jdGF2ZXM7cmV0dXJuIHRoaXMub3NjaWxsYXRvci5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUobixlKSx0aGlzLm9zY2lsbGF0b3IuZnJlcXVlbmN5LmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUodCxlK3RoaXMudG9TZWNvbmRzKHRoaXMucGl0Y2hEZWNheSkpLHRoaXMuZW52ZWxvcGUudHJpZ2dlckF0dGFjayhlLGkpLHRoaXN9LHQuTWVtYnJhbmVTeW50aC5wcm90b3R5cGUudHJpZ2dlclJlbGVhc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZW52ZWxvcGUudHJpZ2dlclJlbGVhc2UodCksdGhpc30sdC5NZW1icmFuZVN5bnRoLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuSW5zdHJ1bWVudC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcIm9zY2lsbGF0b3JcIixcImVudmVsb3BlXCJdKSx0aGlzLm9zY2lsbGF0b3IuZGlzcG9zZSgpLHRoaXMub3NjaWxsYXRvcj1udWxsLHRoaXMuZW52ZWxvcGUuZGlzcG9zZSgpLHRoaXMuZW52ZWxvcGU9bnVsbCx0aGlzfSx0Lk1lbWJyYW5lU3ludGh9KSx0KGZ1bmN0aW9uKHQpe3ZhciBlPVsxLDEuNDgzLDEuOTMyLDIuNTQ2LDIuNjMsMy44OTddO3JldHVybiB0Lk1ldGFsU3ludGg9ZnVuY3Rpb24oaSl7dmFyIG4scyxvO2ZvcihpPXQuZGVmYXVsdEFyZyhpLHQuTWV0YWxTeW50aC5kZWZhdWx0cyksdC5JbnN0cnVtZW50LmNhbGwodGhpcyxpKSx0aGlzLmZyZXF1ZW5jeT1uZXcgdC5TaWduYWwoaS5mcmVxdWVuY3ksdC5UeXBlLkZyZXF1ZW5jeSksdGhpcy5fb3NjaWxsYXRvcnM9W10sdGhpcy5fZnJlcU11bHRpcGxpZXJzPVtdLHRoaXMuX2FtcGxpdHVlPW5ldyB0LkdhaW4oMCkuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5faGlnaHBhc3M9bmV3IHQuRmlsdGVyKHt0eXBlOlwiaGlnaHBhc3NcIixROi0zLjAxMDI5OTk1NjYzOTgxMjV9KS5jb25uZWN0KHRoaXMuX2FtcGxpdHVlKSx0aGlzLl9vY3RhdmVzPWkub2N0YXZlcyx0aGlzLl9maWx0ZXJGcmVxU2NhbGVyPW5ldyB0LlNjYWxlKGkucmVzb25hbmNlLDdlMyksdGhpcy5lbnZlbG9wZT1uZXcgdC5FbnZlbG9wZSh7YXR0YWNrOmkuZW52ZWxvcGUuYXR0YWNrLGF0dGFja0N1cnZlOlwibGluZWFyXCIsZGVjYXk6aS5lbnZlbG9wZS5kZWNheSxzdXN0YWluOjAscmVsZWFzZTppLmVudmVsb3BlLnJlbGVhc2V9KS5jaGFpbih0aGlzLl9maWx0ZXJGcmVxU2NhbGVyLHRoaXMuX2hpZ2hwYXNzLmZyZXF1ZW5jeSksdGhpcy5lbnZlbG9wZS5jb25uZWN0KHRoaXMuX2FtcGxpdHVlLmdhaW4pLG49MDtuPGUubGVuZ3RoO24rKylzPW5ldyB0LkZNT3NjaWxsYXRvcih7dHlwZTpcInNxdWFyZVwiLG1vZHVsYXRpb25UeXBlOlwic3F1YXJlXCIsaGFybW9uaWNpdHk6aS5oYXJtb25pY2l0eSxtb2R1bGF0aW9uSW5kZXg6aS5tb2R1bGF0aW9uSW5kZXh9KSxzLmNvbm5lY3QodGhpcy5faGlnaHBhc3MpLnN0YXJ0KCksdGhpcy5fb3NjaWxsYXRvcnNbbl09cyxvPW5ldyB0Lk11bHRpcGx5KGVbbl0pLHRoaXMuX2ZyZXFNdWx0aXBsaWVyc1tuXT1vLHRoaXMuZnJlcXVlbmN5LmNoYWluKG8scy5mcmVxdWVuY3kpO3RoaXMub2N0YXZlcz1pLm9jdGF2ZXN9LHQuZXh0ZW5kKHQuTWV0YWxTeW50aCx0Lkluc3RydW1lbnQpLHQuTWV0YWxTeW50aC5kZWZhdWx0cz17ZnJlcXVlbmN5OjIwMCxlbnZlbG9wZTp7YXR0YWNrOi4wMDEsZGVjYXk6MS40LHJlbGVhc2U6LjJ9LGhhcm1vbmljaXR5OjUuMSxtb2R1bGF0aW9uSW5kZXg6MzIscmVzb25hbmNlOjRlMyxvY3RhdmVzOjEuNX0sdC5NZXRhbFN5bnRoLnByb3RvdHlwZS50cmlnZ2VyQXR0YWNrPWZ1bmN0aW9uKGUsaSl7cmV0dXJuIGU9dGhpcy50b1NlY29uZHMoZSksaT10LmRlZmF1bHRBcmcoaSwxKSx0aGlzLmVudmVsb3BlLnRyaWdnZXJBdHRhY2soZSxpKSx0aGlzfSx0Lk1ldGFsU3ludGgucHJvdG90eXBlLnRyaWdnZXJSZWxlYXNlPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuZW52ZWxvcGUudHJpZ2dlclJlbGVhc2UodCksdGhpc30sdC5NZXRhbFN5bnRoLnByb3RvdHlwZS50cmlnZ2VyQXR0YWNrUmVsZWFzZT1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIGU9dGhpcy50b1NlY29uZHMoZSksdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLnRyaWdnZXJBdHRhY2soZSxpKSx0aGlzLnRyaWdnZXJSZWxlYXNlKGUrdCksdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTWV0YWxTeW50aC5wcm90b3R5cGUsXCJtb2R1bGF0aW9uSW5kZXhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29zY2lsbGF0b3JzWzBdLm1vZHVsYXRpb25JbmRleC52YWx1ZX0sc2V0OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5fb3NjaWxsYXRvcnMubGVuZ3RoO2UrKyl0aGlzLl9vc2NpbGxhdG9yc1tlXS5tb2R1bGF0aW9uSW5kZXgudmFsdWU9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5NZXRhbFN5bnRoLnByb3RvdHlwZSxcImhhcm1vbmljaXR5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vc2NpbGxhdG9yc1swXS5oYXJtb25pY2l0eS52YWx1ZX0sc2V0OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5fb3NjaWxsYXRvcnMubGVuZ3RoO2UrKyl0aGlzLl9vc2NpbGxhdG9yc1tlXS5oYXJtb25pY2l0eS52YWx1ZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lk1ldGFsU3ludGgucHJvdG90eXBlLFwicmVzb25hbmNlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9maWx0ZXJGcmVxU2NhbGVyLm1pbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2ZpbHRlckZyZXFTY2FsZXIubWluPXQsdGhpcy5vY3RhdmVzPXRoaXMuX29jdGF2ZXN9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTWV0YWxTeW50aC5wcm90b3R5cGUsXCJvY3RhdmVzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vY3RhdmVzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb2N0YXZlcz10LHRoaXMuX2ZpbHRlckZyZXFTY2FsZXIubWF4PXRoaXMuX2ZpbHRlckZyZXFTY2FsZXIubWluKk1hdGgucG93KDIsdCl9fSksdC5NZXRhbFN5bnRoLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5JbnN0cnVtZW50LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7Zm9yKHZhciBlPTA7ZTx0aGlzLl9vc2NpbGxhdG9ycy5sZW5ndGg7ZSsrKXRoaXMuX29zY2lsbGF0b3JzW2VdLmRpc3Bvc2UoKSx0aGlzLl9mcmVxTXVsdGlwbGllcnNbZV0uZGlzcG9zZSgpO3RoaXMuX29zY2lsbGF0b3JzPW51bGwsdGhpcy5fZnJlcU11bHRpcGxpZXJzPW51bGwsdGhpcy5mcmVxdWVuY3kuZGlzcG9zZSgpLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5fZmlsdGVyRnJlcVNjYWxlci5kaXNwb3NlKCksdGhpcy5fZmlsdGVyRnJlcVNjYWxlcj1udWxsLHRoaXMuX2FtcGxpdHVlLmRpc3Bvc2UoKSx0aGlzLl9hbXBsaXR1ZT1udWxsLHRoaXMuZW52ZWxvcGUuZGlzcG9zZSgpLHRoaXMuZW52ZWxvcGU9bnVsbCx0aGlzLl9oaWdocGFzcy5kaXNwb3NlKCksdGhpcy5faGlnaHBhc3M9bnVsbH0sdC5NZXRhbFN5bnRofSksdChmdW5jdGlvbih0KXtyZXR1cm4gd2luZG93LkF1ZGlvQnVmZmVyU291cmNlTm9kZSYmIUF1ZGlvQnVmZmVyU291cmNlTm9kZS5wcm90b3R5cGUuc3RhcnQmJihBdWRpb0J1ZmZlclNvdXJjZU5vZGUucHJvdG90eXBlLnN0YXJ0PUF1ZGlvQnVmZmVyU291cmNlTm9kZS5wcm90b3R5cGUubm90ZUdyYWluT24sQXVkaW9CdWZmZXJTb3VyY2VOb2RlLnByb3RvdHlwZS5zdG9wPUF1ZGlvQnVmZmVyU291cmNlTm9kZS5wcm90b3R5cGUubm90ZU9mZiksdC5CdWZmZXJTb3VyY2U9ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJidWZmZXJcIixcIm9ubG9hZFwiXSx0LkJ1ZmZlclNvdXJjZSk7dC5BdWRpb05vZGUuY2FsbCh0aGlzKSx0aGlzLm9uZW5kZWQ9ZS5vbmVuZGVkLHRoaXMuX3N0YXJ0VGltZT0tMSx0aGlzLl9zdG9wVGltZT0tMSx0aGlzLl9nYWluTm9kZT10aGlzLm91dHB1dD1uZXcgdC5HYWluLHRoaXMuX3NvdXJjZT10aGlzLmNvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCksdGhpcy5fc291cmNlLmNvbm5lY3QodGhpcy5fZ2Fpbk5vZGUpLHRoaXMuX2J1ZmZlcj1uZXcgdC5CdWZmZXIoZS5idWZmZXIsZS5vbmxvYWQpLHRoaXMucGxheWJhY2tSYXRlPW5ldyB0LlBhcmFtKHRoaXMuX3NvdXJjZS5wbGF5YmFja1JhdGUsdC5UeXBlLlBvc2l0aXZlKSx0aGlzLmZhZGVJbj1lLmZhZGVJbix0aGlzLmZhZGVPdXQ9ZS5mYWRlT3V0LHRoaXMuY3VydmU9ZS5jdXJ2ZSx0aGlzLl9nYWluPTEsdGhpcy5fb25lbmRlZFRpbWVvdXQ9LTEsdGhpcy5sb29wPWUubG9vcCx0aGlzLmxvb3BTdGFydD1lLmxvb3BTdGFydCx0aGlzLmxvb3BFbmQ9ZS5sb29wRW5kLHRoaXMucGxheWJhY2tSYXRlLnZhbHVlPWUucGxheWJhY2tSYXRlfSx0LmV4dGVuZCh0LkJ1ZmZlclNvdXJjZSx0LkF1ZGlvTm9kZSksdC5CdWZmZXJTb3VyY2UuZGVmYXVsdHM9e29uZW5kZWQ6dC5ub09wLG9ubG9hZDp0Lm5vT3AsbG9vcDohMSxsb29wU3RhcnQ6MCxsb29wRW5kOjAsZmFkZUluOjAsZmFkZU91dDowLGN1cnZlOlwibGluZWFyXCIscGxheWJhY2tSYXRlOjF9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkJ1ZmZlclNvdXJjZS5wcm90b3R5cGUsXCJzdGF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm5vdygpO3JldHVybi0xIT09dGhpcy5fc3RhcnRUaW1lJiZlPj10aGlzLl9zdGFydFRpbWUmJmU8dGhpcy5fc3RvcFRpbWU/dC5TdGF0ZS5TdGFydGVkOnQuU3RhdGUuU3RvcHBlZH19KSx0LkJ1ZmZlclNvdXJjZS5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oZSxpLG4scyxvKXt2YXIgcixhLGwsaDtpZigtMSE9PXRoaXMuX3N0YXJ0VGltZSl0aHJvdyBuZXcgRXJyb3IoXCJUb25lLkJ1ZmZlclNvdXJjZSBjYW4gb25seSBiZSBzdGFydGVkIG9uY2UuXCIpO2lmKCF0aGlzLmJ1ZmZlci5sb2FkZWQpdGhyb3cgbmV3IEVycm9yKFwiVG9uZS5CdWZmZXJTb3VyY2U6IGJ1ZmZlciBpcyBlaXRoZXIgbm90IHNldCBvciBub3QgbG9hZGVkLlwiKTtyZXR1cm4gZT10aGlzLnRvU2Vjb25kcyhlKSxpPXRoaXMubG9vcD90LmRlZmF1bHRBcmcoaSx0aGlzLmxvb3BTdGFydCk6dC5kZWZhdWx0QXJnKGksMCksaT10aGlzLnRvU2Vjb25kcyhpKSxzPXQuZGVmYXVsdEFyZyhzLDEpLHRoaXMuX2dhaW49cyxvPXRoaXMudG9TZWNvbmRzKHQuZGVmYXVsdEFyZyhvLHRoaXMuZmFkZUluKSksdGhpcy5mYWRlSW49byxvPjA/KHRoaXMuX2dhaW5Ob2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUoMCxlKSxcImxpbmVhclwiPT09dGhpcy5jdXJ2ZT90aGlzLl9nYWluTm9kZS5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKHRoaXMuX2dhaW4sZStvKTp0aGlzLl9nYWluTm9kZS5nYWluLnNldFRhcmdldEF0VGltZSh0aGlzLl9nYWluLGUsdGhpcy5fZ2Fpbk5vZGUuZ2Fpbi5nZXRUaW1lQ29uc3RhbnQobykpKTp0aGlzLl9nYWluTm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKHMsZSksdGhpcy5fc3RhcnRUaW1lPWUscj10aGlzLnRvU2Vjb25kcyh0LmRlZmF1bHRBcmcobix0aGlzLmJ1ZmZlci5kdXJhdGlvbi1pKSkscj1NYXRoLm1heChyLDApLCghdGhpcy5sb29wfHx0aGlzLmxvb3AmJiF0LmlzVW5kZWYobikpJiYodGhpcy5sb29wfHwocj1NYXRoLm1pbihyLHRoaXMuYnVmZmVyLmR1cmF0aW9uLWkpKSx0aGlzLnN0b3AoZStyLHRoaXMuZmFkZU91dCkpLHRoaXMubG9vcCYmKGE9dGhpcy5sb29wRW5kfHx0aGlzLmJ1ZmZlci5kdXJhdGlvbixsPXRoaXMubG9vcFN0YXJ0LGg9YS1sLGk+YSYmKGk9KGktbCklaCtsKSksdGhpcy5fc291cmNlLmJ1ZmZlcj10aGlzLmJ1ZmZlci5nZXQoKSx0aGlzLl9zb3VyY2UubG9vcEVuZD10aGlzLmxvb3BFbmR8fHRoaXMuYnVmZmVyLmR1cmF0aW9uLHQuaXNQYXN0KGUpLHRoaXMuX3NvdXJjZS5zdGFydChlLGkpLHRoaXN9LHQuQnVmZmVyU291cmNlLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKGUsaSl7dmFyIG4scztpZighdGhpcy5idWZmZXIubG9hZGVkKXRocm93IG5ldyBFcnJvcihcIlRvbmUuQnVmZmVyU291cmNlOiBidWZmZXIgaXMgZWl0aGVyIG5vdCBzZXQgb3Igbm90IGxvYWRlZC5cIik7aWYoZT10aGlzLnRvU2Vjb25kcyhlKSwtMT09PXRoaXMuX3N0b3BUaW1lfHx0aGlzLl9zdG9wVGltZT5lKXtpZihlPD10aGlzLl9zdGFydFRpbWUpcmV0dXJuIHRoaXMuX2dhaW5Ob2RlLmdhaW4uY2FuY2VsU2NoZWR1bGVkVmFsdWVzKGUpLHRoaXMuX2dhaW5Ob2RlLmdhaW4udmFsdWU9MCx0aGlzO2U9TWF0aC5tYXgodGhpcy5fc3RhcnRUaW1lK3RoaXMuZmFkZUluK3RoaXMuc2FtcGxlVGltZSxlKSx0aGlzLl9nYWluTm9kZS5nYWluLmNhbmNlbFNjaGVkdWxlZFZhbHVlcyhlKSx0aGlzLl9zdG9wVGltZT1lLGk9dGhpcy50b1NlY29uZHModC5kZWZhdWx0QXJnKGksdGhpcy5mYWRlT3V0KSksbj1NYXRoLm1pbihlLXRoaXMuX3N0YXJ0VGltZS10aGlzLmZhZGVJbi10aGlzLnNhbXBsZVRpbWUsdGhpcy5idWZmZXIuZHVyYXRpb24pLGk9TWF0aC5taW4obixpKSxzPWUtaSxpPnRoaXMuc2FtcGxlVGltZT8odGhpcy5fZ2Fpbk5vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSh0aGlzLl9nYWluLHMpLFwibGluZWFyXCI9PT10aGlzLmN1cnZlP3RoaXMuX2dhaW5Ob2RlLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMCxlKTp0aGlzLl9nYWluTm9kZS5nYWluLnNldFRhcmdldEF0VGltZSgwLHMsdGhpcy5fZ2Fpbk5vZGUuZ2Fpbi5nZXRUaW1lQ29uc3RhbnQoaSkpKTp0aGlzLl9nYWluTm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKDAsZSksdC5jb250ZXh0LmNsZWFyVGltZW91dCh0aGlzLl9vbmVuZGVkVGltZW91dCksdGhpcy5fb25lbmRlZFRpbWVvdXQ9dC5jb250ZXh0LnNldFRpbWVvdXQodGhpcy5fb25lbmRlZC5iaW5kKHRoaXMpLHRoaXMuX3N0b3BUaW1lLXRoaXMubm93KCkpfXJldHVybiB0aGlzfSx0LkJ1ZmZlclNvdXJjZS5wcm90b3R5cGUuX29uZW5kZWQ9ZnVuY3Rpb24oKXt0aGlzLm9uZW5kZWQodGhpcyl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkJ1ZmZlclNvdXJjZS5wcm90b3R5cGUsXCJsb29wU3RhcnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZS5sb29wU3RhcnR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zb3VyY2UubG9vcFN0YXJ0PXRoaXMudG9TZWNvbmRzKHQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkJ1ZmZlclNvdXJjZS5wcm90b3R5cGUsXCJsb29wRW5kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2UubG9vcEVuZH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NvdXJjZS5sb29wRW5kPXRoaXMudG9TZWNvbmRzKHQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkJ1ZmZlclNvdXJjZS5wcm90b3R5cGUsXCJidWZmZXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2J1ZmZlci5zZXQodCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQnVmZmVyU291cmNlLnByb3RvdHlwZSxcImxvb3BcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZS5sb29wfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc291cmNlLmxvb3A9dH19KSx0LkJ1ZmZlclNvdXJjZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMub25lbmRlZD1udWxsLHRoaXMuX3NvdXJjZS5kaXNjb25uZWN0KCksdGhpcy5fc291cmNlPW51bGwsdGhpcy5fZ2Fpbk5vZGUuZGlzcG9zZSgpLHRoaXMuX2dhaW5Ob2RlPW51bGwsdGhpcy5fYnVmZmVyLmRpc3Bvc2UoKSx0aGlzLl9idWZmZXI9bnVsbCx0aGlzLl9zdGFydFRpbWU9LTEsdGhpcy5wbGF5YmFja1JhdGU9bnVsbCx0LmNvbnRleHQuY2xlYXJUaW1lb3V0KHRoaXMuX29uZW5kZWRUaW1lb3V0KSx0aGlzfSx0LkJ1ZmZlclNvdXJjZX0pLHQoZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe2Zvcih2YXIgZSBpbiBzKW9bZV09KG5ldyB0LkJ1ZmZlcikuZnJvbUFycmF5KHNbZV0pfXZhciBpLG4scyxvO3JldHVybiB0Lk5vaXNlPWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1widHlwZVwiXSx0Lk5vaXNlKTt0LlNvdXJjZS5jYWxsKHRoaXMsZSksdGhpcy5fc291cmNlPW51bGwsdGhpcy5fdHlwZT1lLnR5cGUsdGhpcy5fcGxheWJhY2tSYXRlPWUucGxheWJhY2tSYXRlfSx0LmV4dGVuZCh0Lk5vaXNlLHQuU291cmNlKSx0Lk5vaXNlLmRlZmF1bHRzPXt0eXBlOlwid2hpdGVcIixwbGF5YmFja1JhdGU6MX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTm9pc2UucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHlwZX0sc2V0OmZ1bmN0aW9uKGUpe2lmKHRoaXMuX3R5cGUhPT1lKXtpZighKGUgaW4gbykpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRvbmUuTm9pc2U6IGludmFsaWQgdHlwZTogXCIrZSk7aWYodGhpcy5fdHlwZT1lLHRoaXMuc3RhdGU9PT10LlN0YXRlLlN0YXJ0ZWQpe3ZhciBpPXRoaXMubm93KCk7dGhpcy5fc3RvcChpKSx0aGlzLl9zdGFydChpKX19fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lk5vaXNlLnByb3RvdHlwZSxcInBsYXliYWNrUmF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGxheWJhY2tSYXRlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGxheWJhY2tSYXRlPXQsdGhpcy5fc291cmNlJiYodGhpcy5fc291cmNlLnBsYXliYWNrUmF0ZS52YWx1ZT10KX19KSx0Lk5vaXNlLnByb3RvdHlwZS5fc3RhcnQ9ZnVuY3Rpb24oZSl7dmFyIGk9b1t0aGlzLl90eXBlXTt0aGlzLl9zb3VyY2U9bmV3IHQuQnVmZmVyU291cmNlKGkpLmNvbm5lY3QodGhpcy5vdXRwdXQpLHRoaXMuX3NvdXJjZS5sb29wPSEwLHRoaXMuX3NvdXJjZS5wbGF5YmFja1JhdGUudmFsdWU9dGhpcy5fcGxheWJhY2tSYXRlLHRoaXMuX3NvdXJjZS5zdGFydCh0aGlzLnRvU2Vjb25kcyhlKSxNYXRoLnJhbmRvbSgpKihpLmR1cmF0aW9uLS4wMDEpKX0sdC5Ob2lzZS5wcm90b3R5cGUuX3N0b3A9ZnVuY3Rpb24odCl7dGhpcy5fc291cmNlJiYodGhpcy5fc291cmNlLnN0b3AodGhpcy50b1NlY29uZHModCkpLHRoaXMuX3NvdXJjZT1udWxsKX0sdC5Ob2lzZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LlNvdXJjZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLG51bGwhPT10aGlzLl9zb3VyY2UmJih0aGlzLl9zb3VyY2UuZGlzY29ubmVjdCgpLHRoaXMuX3NvdXJjZT1udWxsKSx0aGlzLl9idWZmZXI9bnVsbCx0aGlzfSxpPTIyMDUwMCxuPTIscz17cGluazpmdW5jdGlvbigpe3ZhciB0LGUscyxvLHIsYSxsLGgsdSxjLHAsZj1bXTtmb3IodD0wO3Q8bjt0KyspZm9yKGU9bmV3IEZsb2F0MzJBcnJheShpKSxmW3RdPWUscz1vPXI9YT1sPWg9dT0wLGM9MDtjPGk7YysrKXA9MipNYXRoLnJhbmRvbSgpLTEscz0uOTk4ODYqcysuMDU1NTE3OSpwLG89Ljk5MzMyKm8rLjA3NTA3NTkqcCxyPS45NjkqcisuMTUzODUyKnAsYT0uODY2NSphKy4zMTA0ODU2KnAsbD0uNTUqbCsuNTMyOTUyMipwLGg9LS43NjE2KmgtLjAxNjg5OCpwLGVbY109cytvK3IrYStsK2grdSsuNTM2MipwLGVbY10qPS4xMSx1PS4xMTU5MjYqcDtyZXR1cm4gZn0oKSxicm93bjpmdW5jdGlvbigpe3ZhciB0LGUscyxvLHIsYT1bXTtmb3IodD0wO3Q8bjt0KyspZm9yKGU9bmV3IEZsb2F0MzJBcnJheShpKSxhW3RdPWUscz0wLG89MDtvPGk7bysrKXI9MipNYXRoLnJhbmRvbSgpLTEsZVtvXT0ocysuMDIqcikvMS4wMixzPWVbb10sZVtvXSo9My41O3JldHVybiBhfSgpLHdoaXRlOmZ1bmN0aW9uKCl7dmFyIHQsZSxzLG89W107Zm9yKHQ9MDt0PG47dCsrKWZvcihlPW5ldyBGbG9hdDMyQXJyYXkoaSksb1t0XT1lLHM9MDtzPGk7cysrKWVbc109MipNYXRoLnJhbmRvbSgpLTE7cmV0dXJuIG99KCl9LG89e30sdC5nZXRDb250ZXh0KGUpLHQuQ29udGV4dC5vbihcImluaXRcIixlKSx0Lk5vaXNlfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5Ob2lzZVN5bnRoPWZ1bmN0aW9uKGUpe2U9dC5kZWZhdWx0QXJnKGUsdC5Ob2lzZVN5bnRoLmRlZmF1bHRzKSx0Lkluc3RydW1lbnQuY2FsbCh0aGlzLGUpLHRoaXMubm9pc2U9bmV3IHQuTm9pc2UsdGhpcy5lbnZlbG9wZT1uZXcgdC5BbXBsaXR1ZGVFbnZlbG9wZShlLmVudmVsb3BlKSx0aGlzLm5vaXNlLmNoYWluKHRoaXMuZW52ZWxvcGUsdGhpcy5vdXRwdXQpLHRoaXMubm9pc2Uuc3RhcnQoKSx0aGlzLl9yZWFkT25seShbXCJub2lzZVwiLFwiZW52ZWxvcGVcIl0pfSx0LmV4dGVuZCh0Lk5vaXNlU3ludGgsdC5JbnN0cnVtZW50KSx0Lk5vaXNlU3ludGguZGVmYXVsdHM9e25vaXNlOnt0eXBlOlwid2hpdGVcIn0sZW52ZWxvcGU6e2F0dGFjazouMDA1LGRlY2F5Oi4xLHN1c3RhaW46MH19LHQuTm9pc2VTeW50aC5wcm90b3R5cGUudHJpZ2dlckF0dGFjaz1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmVudmVsb3BlLnRyaWdnZXJBdHRhY2sodCxlKSx0aGlzfSx0Lk5vaXNlU3ludGgucHJvdG90eXBlLnRyaWdnZXJSZWxlYXNlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVudmVsb3BlLnRyaWdnZXJSZWxlYXNlKHQpLHRoaXN9LHQuTm9pc2VTeW50aC5wcm90b3R5cGUudHJpZ2dlckF0dGFja1JlbGVhc2U9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBlPXRoaXMudG9TZWNvbmRzKGUpLHQ9dGhpcy50b1NlY29uZHModCksdGhpcy50cmlnZ2VyQXR0YWNrKGUsaSksdGhpcy50cmlnZ2VyUmVsZWFzZShlK3QpLHRoaXN9LHQuTm9pc2VTeW50aC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0Lkluc3RydW1lbnQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJub2lzZVwiLFwiZW52ZWxvcGVcIl0pLHRoaXMubm9pc2UuZGlzcG9zZSgpLHRoaXMubm9pc2U9bnVsbCx0aGlzLmVudmVsb3BlLmRpc3Bvc2UoKSx0aGlzLmVudmVsb3BlPW51bGwsdGhpc30sdC5Ob2lzZVN5bnRofSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5QbHVja1N5bnRoPWZ1bmN0aW9uKGUpe2U9dC5kZWZhdWx0QXJnKGUsdC5QbHVja1N5bnRoLmRlZmF1bHRzKSx0Lkluc3RydW1lbnQuY2FsbCh0aGlzLGUpLHRoaXMuX25vaXNlPW5ldyB0Lk5vaXNlKFwicGlua1wiKSx0aGlzLmF0dGFja05vaXNlPWUuYXR0YWNrTm9pc2UsdGhpcy5fbGZjZj1uZXcgdC5Mb3dwYXNzQ29tYkZpbHRlcih7cmVzb25hbmNlOmUucmVzb25hbmNlLGRhbXBlbmluZzplLmRhbXBlbmluZ30pLHRoaXMucmVzb25hbmNlPXRoaXMuX2xmY2YucmVzb25hbmNlLHRoaXMuZGFtcGVuaW5nPXRoaXMuX2xmY2YuZGFtcGVuaW5nLHRoaXMuX25vaXNlLmNvbm5lY3QodGhpcy5fbGZjZiksdGhpcy5fbGZjZi5jb25uZWN0KHRoaXMub3V0cHV0KSx0aGlzLl9yZWFkT25seShbXCJyZXNvbmFuY2VcIixcImRhbXBlbmluZ1wiXSl9LHQuZXh0ZW5kKHQuUGx1Y2tTeW50aCx0Lkluc3RydW1lbnQpLHQuUGx1Y2tTeW50aC5kZWZhdWx0cz17YXR0YWNrTm9pc2U6MSxkYW1wZW5pbmc6NGUzLHJlc29uYW5jZTouOX0sdC5QbHVja1N5bnRoLnByb3RvdHlwZS50cmlnZ2VyQXR0YWNrPWZ1bmN0aW9uKHQsZSl7dD10aGlzLnRvRnJlcXVlbmN5KHQpLGU9dGhpcy50b1NlY29uZHMoZSk7dmFyIGk9MS90O3JldHVybiB0aGlzLl9sZmNmLmRlbGF5VGltZS5zZXRWYWx1ZUF0VGltZShpLGUpLHRoaXMuX25vaXNlLnN0YXJ0KGUpLHRoaXMuX25vaXNlLnN0b3AoZStpKnRoaXMuYXR0YWNrTm9pc2UpLHRoaXN9LHQuUGx1Y2tTeW50aC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0Lkluc3RydW1lbnQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9ub2lzZS5kaXNwb3NlKCksdGhpcy5fbGZjZi5kaXNwb3NlKCksdGhpcy5fbm9pc2U9bnVsbCx0aGlzLl9sZmNmPW51bGwsdGhpcy5fd3JpdGFibGUoW1wicmVzb25hbmNlXCIsXCJkYW1wZW5pbmdcIl0pLHRoaXMuZGFtcGVuaW5nPW51bGwsdGhpcy5yZXNvbmFuY2U9bnVsbCx0aGlzfSx0LlBsdWNrU3ludGh9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlBvbHlTeW50aD1mdW5jdGlvbigpe3ZhciBlLGksbj10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJwb2x5cGhvbnlcIixcInZvaWNlXCJdLHQuUG9seVN5bnRoKTtmb3IodC5JbnN0cnVtZW50LmNhbGwodGhpcyxuKSxuPXQuZGVmYXVsdEFyZyhuLHQuSW5zdHJ1bWVudC5kZWZhdWx0cyksbi5wb2x5cGhvbnk9TWF0aC5taW4odC5Qb2x5U3ludGguTUFYX1BPTFlQSE9OWSxuLnBvbHlwaG9ueSksdGhpcy52b2ljZXM9bmV3IEFycmF5KG4ucG9seXBob255KSx0aGlzLl90cmlnZ2Vycz1uZXcgQXJyYXkobi5wb2x5cGhvbnkpLHRoaXMuZGV0dW5lPW5ldyB0LlNpZ25hbChuLmRldHVuZSx0LlR5cGUuQ2VudHMpLHRoaXMuX3JlYWRPbmx5KFwiZGV0dW5lXCIpLGU9MDtlPG4ucG9seXBob255O2UrKylpPW5ldyBuLnZvaWNlKGFyZ3VtZW50c1syXSxhcmd1bWVudHNbM10pLHRoaXMudm9pY2VzW2VdPWksaS5jb25uZWN0KHRoaXMub3V0cHV0KSxpLmhhc093blByb3BlcnR5KFwiZGV0dW5lXCIpJiZ0aGlzLmRldHVuZS5jb25uZWN0KGkuZGV0dW5lKSx0aGlzLl90cmlnZ2Vyc1tlXT17cmVsZWFzZTotMSxub3RlOm51bGwsdm9pY2U6aX19LHQuZXh0ZW5kKHQuUG9seVN5bnRoLHQuSW5zdHJ1bWVudCksdC5Qb2x5U3ludGguZGVmYXVsdHM9e3BvbHlwaG9ueTo0LHZvbHVtZTowLGRldHVuZTowLHZvaWNlOnQuU3ludGh9LHQuUG9seVN5bnRoLnByb3RvdHlwZS50cmlnZ2VyQXR0YWNrPWZ1bmN0aW9uKHQsZSxpKXt2YXIgbixzLG8scjtmb3IoQXJyYXkuaXNBcnJheSh0KXx8KHQ9W3RdKSxlPXRoaXMudG9TZWNvbmRzKGUpLG49MDtuPHQubGVuZ3RoO24rKyl7Zm9yKHM9dFtuXSxvPXRoaXMuX3RyaWdnZXJzWzBdLDAscj0xO3I8dGhpcy5fdHJpZ2dlcnMubGVuZ3RoO3IrKyl0aGlzLl90cmlnZ2Vyc1tyXS5yZWxlYXNlPG8ucmVsZWFzZSYmKG89dGhpcy5fdHJpZ2dlcnNbcl0scik7by5yZWxlYXNlPTEvMCxvLm5vdGU9SlNPTi5zdHJpbmdpZnkocyksby52b2ljZS50cmlnZ2VyQXR0YWNrKHMsZSxpKX1yZXR1cm4gdGhpc30sdC5Qb2x5U3ludGgucHJvdG90eXBlLnRyaWdnZXJBdHRhY2tSZWxlYXNlPWZ1bmN0aW9uKGUsaSxuLHMpe3ZhciBvLHI7aWYobj10aGlzLnRvU2Vjb25kcyhuKSx0aGlzLnRyaWdnZXJBdHRhY2soZSxuLHMpLHQuaXNBcnJheShpKSYmdC5pc0FycmF5KGUpKWZvcihvPTA7bzxlLmxlbmd0aDtvKyspcj1pW01hdGgubWluKG8saS5sZW5ndGgtMSldLHRoaXMudHJpZ2dlclJlbGVhc2UoZVtvXSxuK3RoaXMudG9TZWNvbmRzKHIpKTtlbHNlIHRoaXMudHJpZ2dlclJlbGVhc2UoZSxuK3RoaXMudG9TZWNvbmRzKGkpKTtyZXR1cm4gdGhpc30sdC5Qb2x5U3ludGgucHJvdG90eXBlLnRyaWdnZXJSZWxlYXNlPWZ1bmN0aW9uKHQsZSl7dmFyIGksbixzLG87Zm9yKEFycmF5LmlzQXJyYXkodCl8fCh0PVt0XSksZT10aGlzLnRvU2Vjb25kcyhlKSxpPTA7aTx0Lmxlbmd0aDtpKyspZm9yKG49SlNPTi5zdHJpbmdpZnkodFtpXSkscz0wO3M8dGhpcy5fdHJpZ2dlcnMubGVuZ3RoO3MrKylvPXRoaXMuX3RyaWdnZXJzW3NdLG8ubm90ZT09PW4mJm8ucmVsZWFzZT5lJiYoby52b2ljZS50cmlnZ2VyUmVsZWFzZShlKSxvLnJlbGVhc2U9ZSk7cmV0dXJuIHRoaXN9LHQuUG9seVN5bnRoLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgbj0wO248dGhpcy52b2ljZXMubGVuZ3RoO24rKyl0aGlzLnZvaWNlc1tuXS5zZXQodCxlLGkpO3JldHVybiB0aGlzfSx0LlBvbHlTeW50aC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnZvaWNlc1swXS5nZXQodCl9LHQuUG9seVN5bnRoLnByb3RvdHlwZS5yZWxlYXNlQWxsPWZ1bmN0aW9uKHQpe3ZhciBlLGk7Zm9yKHQ9dGhpcy50b1NlY29uZHModCksZT0wO2U8dGhpcy5fdHJpZ2dlcnMubGVuZ3RoO2UrKylpPXRoaXMuX3RyaWdnZXJzW2VdLGkucmVsZWFzZT50JiYoaS5yZWxlYXNlPXQsaS52b2ljZS50cmlnZ2VyUmVsZWFzZSh0KSk7cmV0dXJuIHRoaXN9LHQuUG9seVN5bnRoLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5JbnN0cnVtZW50LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7Zm9yKHZhciBlPTA7ZTx0aGlzLnZvaWNlcy5sZW5ndGg7ZSsrKXRoaXMudm9pY2VzW2VdLmRpc3Bvc2UoKSx0aGlzLnZvaWNlc1tlXT1udWxsO3JldHVybiB0aGlzLl93cml0YWJsZShcImRldHVuZVwiKSx0aGlzLmRldHVuZS5kaXNwb3NlKCksdGhpcy5kZXR1bmU9bnVsbCx0aGlzLnZvaWNlcz1udWxsLHRoaXMuX3RyaWdnZXJzPW51bGwsdGhpc30sdC5Qb2x5U3ludGguTUFYX1BPTFlQSE9OWT0yMCx0LlBvbHlTeW50aH0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuU2FtcGxlcj1mdW5jdGlvbihlKXt2YXIgaSxuLHMsbyxyPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7ci5zaGlmdCgpLGk9dC5kZWZhdWx0cyhyLFtcIm9ubG9hZFwiLFwiYmFzZVVybFwiXSx0LlNhbXBsZXIpLHQuSW5zdHJ1bWVudC5jYWxsKHRoaXMsaSksbj17fTtmb3IocyBpbiBlKWlmKHQuaXNOb3RlKHMpKW89dC5GcmVxdWVuY3kocykudG9NaWRpKCksbltvXT1lW3NdO2Vsc2V7aWYoaXNOYU4ocGFyc2VGbG9hdChzKSkpdGhyb3cgbmV3IEVycm9yKFwiVG9uZS5TYW1wbGVyOiB1cmwga2V5cyBtdXN0IGJlIHRoZSBub3RlJ3MgcGl0Y2hcIik7bltzXT1lW3NdfXRoaXMuX2J1ZmZlcnM9bmV3IHQuQnVmZmVycyhuLGkub25sb2FkLGkuYmFzZVVybCksdGhpcy5fYWN0aXZlU291cmNlcz17fSx0aGlzLmF0dGFjaz1pLmF0dGFjayx0aGlzLnJlbGVhc2U9aS5yZWxlYXNlfSx0LmV4dGVuZCh0LlNhbXBsZXIsdC5JbnN0cnVtZW50KSx0LlNhbXBsZXIuZGVmYXVsdHM9e2F0dGFjazowLHJlbGVhc2U6LjEsb25sb2FkOnQubm9PcCxiYXNlVXJsOlwiXCJ9LHQuU2FtcGxlci5wcm90b3R5cGUuX2ZpbmRDbG9zZXN0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0yNCxpPTA7aTxlOyl7aWYodGhpcy5fYnVmZmVycy5oYXModCtpKSlyZXR1cm4taTtpZih0aGlzLl9idWZmZXJzLmhhcyh0LWkpKXJldHVybiBpO2krK31yZXR1cm4gbnVsbH0sdC5TYW1wbGVyLnByb3RvdHlwZS50cmlnZ2VyQXR0YWNrPWZ1bmN0aW9uKGUsaSxuKXt2YXIgcyxvLHIsYT10LkZyZXF1ZW5jeShlKS50b01pZGkoKSxsPXRoaXMuX2ZpbmRDbG9zZXN0KGEpO3JldHVybiBudWxsIT09bCYmKHM9YS1sLG89dGhpcy5fYnVmZmVycy5nZXQocykscj1uZXcgdC5CdWZmZXJTb3VyY2Uoe2J1ZmZlcjpvLHBsYXliYWNrUmF0ZTp0LmludGVydmFsVG9GcmVxdWVuY3lSYXRpbyhsKSxmYWRlSW46dGhpcy5hdHRhY2ssZmFkZU91dDp0aGlzLnJlbGVhc2UsY3VydmU6XCJleHBvbmVudGlhbFwifSkuY29ubmVjdCh0aGlzLm91dHB1dCksci5zdGFydChpLDAsby5kdXJhdGlvbixuKSx0LmlzQXJyYXkodGhpcy5fYWN0aXZlU291cmNlc1thXSl8fCh0aGlzLl9hY3RpdmVTb3VyY2VzW2FdPVtdKSx0aGlzLl9hY3RpdmVTb3VyY2VzW2FdLnB1c2goe25vdGU6YSxzb3VyY2U6cn0pKSx0aGlzfSx0LlNhbXBsZXIucHJvdG90eXBlLnRyaWdnZXJSZWxlYXNlPWZ1bmN0aW9uKGUsaSl7dmFyIG4scz10LkZyZXF1ZW5jeShlKS50b01pZGkoKTt0aGlzLl9hY3RpdmVTb3VyY2VzW3NdJiZ0aGlzLl9hY3RpdmVTb3VyY2VzW3NdLmxlbmd0aCYmKG49dGhpcy5fYWN0aXZlU291cmNlc1tzXS5zaGlmdCgpLnNvdXJjZSxpPXRoaXMudG9TZWNvbmRzKGkpLG4uc3RvcChpK3RoaXMucmVsZWFzZSx0aGlzLnJlbGVhc2UpKX0sdC5TYW1wbGVyLnByb3RvdHlwZS50cmlnZ2VyQXR0YWNrUmVsZWFzZT1mdW5jdGlvbih0LGUsaSxuKXtyZXR1cm4gaT10aGlzLnRvU2Vjb25kcyhpKSxlPXRoaXMudG9TZWNvbmRzKGUpLHRoaXMudHJpZ2dlckF0dGFjayh0LGksbiksdGhpcy50cmlnZ2VyUmVsZWFzZSh0LGkrZSksdGhpc30sdC5TYW1wbGVyLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZSxpLG4pe2lmKHQuaXNOb3RlKGUpKXt2YXIgcz10LkZyZXF1ZW5jeShlKS50b01pZGkoKTt0aGlzLl9idWZmZXJzLmFkZChzLGksbil9ZWxzZXtpZihpc05hTihwYXJzZUZsb2F0KGUpKSl0aHJvdyBuZXcgRXJyb3IoXCJUb25lLlNhbXBsZXI6IG5vdGUgbXVzdCBiZSB0aGUgbm90ZSdzIHBpdGNoLiBJbnN0ZWFkIGdvdCBcIitlKTt0aGlzLl9idWZmZXJzLmFkZChlLGksbil9fSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5TYW1wbGVyLnByb3RvdHlwZSxcImxvYWRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVycy5sb2FkZWR9fSksdC5TYW1wbGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5JbnN0cnVtZW50LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fYnVmZmVycy5kaXNwb3NlKCksdGhpcy5fYnVmZmVycz1udWxsO2Zvcih2YXIgZSBpbiB0aGlzLl9hY3RpdmVTb3VyY2VzKXRoaXMuX2FjdGl2ZVNvdXJjZXNbZV0uZm9yRWFjaChmdW5jdGlvbih0KXt0LnNvdXJjZS5kaXNwb3NlKCl9KTtyZXR1cm4gdGhpcy5fYWN0aXZlU291cmNlcz1udWxsLHRoaXN9LHQuU2FtcGxlcn0pLHQoZnVuY3Rpb24odCl7cmV0dXJuIHQuR2FpblRvQXVkaW89ZnVuY3Rpb24oKXt0LlNpZ25hbEJhc2UuY2FsbCh0aGlzKSx0aGlzLl9ub3JtPXRoaXMuaW5wdXQ9dGhpcy5vdXRwdXQ9bmV3IHQuV2F2ZVNoYXBlcihmdW5jdGlvbih0KXtyZXR1cm4gMipNYXRoLmFicyh0KS0xfSl9LHQuZXh0ZW5kKHQuR2FpblRvQXVkaW8sdC5TaWduYWxCYXNlKSx0LkdhaW5Ub0F1ZGlvLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuU2lnbmFsQmFzZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX25vcm0uZGlzcG9zZSgpLHRoaXMuX25vcm09bnVsbCx0aGlzfSx0LkdhaW5Ub0F1ZGlvfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5Ob3JtYWxpemU9ZnVuY3Rpb24oZSxpKXt0LlNpZ25hbEJhc2UuY2FsbCh0aGlzKSx0aGlzLl9pbnB1dE1pbj10LmRlZmF1bHRBcmcoZSwwKSx0aGlzLl9pbnB1dE1heD10LmRlZmF1bHRBcmcoaSwxKSx0aGlzLl9zdWI9dGhpcy5pbnB1dD1uZXcgdC5BZGQoMCksdGhpcy5fZGl2PXRoaXMub3V0cHV0PW5ldyB0Lk11bHRpcGx5KDEpLHRoaXMuX3N1Yi5jb25uZWN0KHRoaXMuX2RpdiksdGhpcy5fc2V0UmFuZ2UoKX0sdC5leHRlbmQodC5Ob3JtYWxpemUsdC5TaWduYWxCYXNlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Ob3JtYWxpemUucHJvdG90eXBlLFwibWluXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbnB1dE1pbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2lucHV0TWluPXQsdGhpcy5fc2V0UmFuZ2UoKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Ob3JtYWxpemUucHJvdG90eXBlLFwibWF4XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbnB1dE1heH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2lucHV0TWF4PXQsdGhpcy5fc2V0UmFuZ2UoKX19KSx0Lk5vcm1hbGl6ZS5wcm90b3R5cGUuX3NldFJhbmdlPWZ1bmN0aW9uKCl7dGhpcy5fc3ViLnZhbHVlPS10aGlzLl9pbnB1dE1pbix0aGlzLl9kaXYudmFsdWU9MS8odGhpcy5faW5wdXRNYXgtdGhpcy5faW5wdXRNaW4pfSx0Lk5vcm1hbGl6ZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LlNpZ25hbEJhc2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9zdWIuZGlzcG9zZSgpLHRoaXMuX3N1Yj1udWxsLHRoaXMuX2Rpdi5kaXNwb3NlKCksdGhpcy5fZGl2PW51bGwsdGhpc30sdC5Ob3JtYWxpemV9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlRyYW5zcG9ydFRpbWVsaW5lU2lnbmFsPWZ1bmN0aW9uKCl7dC5UaW1lbGluZVNpZ25hbC5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5vdXRwdXQ9dGhpcy5fb3V0cHV0U2lnPW5ldyB0LlNpZ25hbCh0aGlzLl9pbml0aWFsKSx0aGlzLl9sYXN0VmFsPXRoaXMudmFsdWUsdGhpcy5fc3luY2VkPXQuVHJhbnNwb3J0LnNjaGVkdWxlUmVwZWF0KHRoaXMuX29uVGljay5iaW5kKHRoaXMpLFwiMWlcIiksdGhpcy5fYmluZEFuY2hvclZhbHVlPXRoaXMuX2FuY2hvclZhbHVlLmJpbmQodGhpcyksdC5UcmFuc3BvcnQub24oXCJzdGFydCBzdG9wIHBhdXNlXCIsdGhpcy5fYmluZEFuY2hvclZhbHVlKSx0aGlzLl9ldmVudHMubWVtb3J5PTEvMH0sdC5leHRlbmQodC5UcmFuc3BvcnRUaW1lbGluZVNpZ25hbCx0LlRpbWVsaW5lU2lnbmFsKSx0LlRyYW5zcG9ydFRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5fb25UaWNrPWZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMuZ2V0VmFsdWVBdFRpbWUodC5UcmFuc3BvcnQuc2Vjb25kcyk7dGhpcy5fbGFzdFZhbCE9PWkmJih0aGlzLl9sYXN0VmFsPWksdGhpcy5fb3V0cHV0U2lnLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKGksZSkpfSx0LlRyYW5zcG9ydFRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5fYW5jaG9yVmFsdWU9ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy5nZXRWYWx1ZUF0VGltZSh0LlRyYW5zcG9ydC50aWNrcyk7cmV0dXJuIHRoaXMuX2xhc3RWYWw9aSx0aGlzLl9vdXRwdXRTaWcuY2FuY2VsU2NoZWR1bGVkVmFsdWVzKGUpLHRoaXMuX291dHB1dFNpZy5zZXRWYWx1ZUF0VGltZShpLGUpLHRoaXN9LFxudC5UcmFuc3BvcnRUaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuZ2V0VmFsdWVBdFRpbWU9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9dGhpcy50b1RpY2tzKGUpLHQuVGltZWxpbmVTaWduYWwucHJvdG90eXBlLmdldFZhbHVlQXRUaW1lLmNhbGwodGhpcyxlKX0sdC5UcmFuc3BvcnRUaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuc2V0VmFsdWVBdFRpbWU9ZnVuY3Rpb24oZSxpKXtyZXR1cm4gaT10aGlzLnRvVGlja3MoaSksdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuc2V0VmFsdWVBdFRpbWUuY2FsbCh0aGlzLGUsaSksdGhpc30sdC5UcmFuc3BvcnRUaW1lbGluZVNpZ25hbC5wcm90b3R5cGUubGluZWFyUmFtcFRvVmFsdWVBdFRpbWU9ZnVuY3Rpb24oZSxpKXtyZXR1cm4gaT10aGlzLnRvVGlja3MoaSksdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUuY2FsbCh0aGlzLGUsaSksdGhpc30sdC5UcmFuc3BvcnRUaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZT1mdW5jdGlvbihlLGkpe3JldHVybiBpPXRoaXMudG9UaWNrcyhpKSx0LlRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lLmNhbGwodGhpcyxlLGkpLHRoaXN9LHQuVHJhbnNwb3J0VGltZWxpbmVTaWduYWwucHJvdG90eXBlLnNldFRhcmdldEF0VGltZT1mdW5jdGlvbihlLGksbil7cmV0dXJuIGk9dGhpcy50b1RpY2tzKGkpLHQuVGltZWxpbmVTaWduYWwucHJvdG90eXBlLnNldFRhcmdldEF0VGltZS5jYWxsKHRoaXMsZSxpLG4pLHRoaXN9LHQuVHJhbnNwb3J0VGltZWxpbmVTaWduYWwucHJvdG90eXBlLmNhbmNlbFNjaGVkdWxlZFZhbHVlcz1mdW5jdGlvbihlKXtyZXR1cm4gZT10aGlzLnRvVGlja3MoZSksdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuY2FuY2VsU2NoZWR1bGVkVmFsdWVzLmNhbGwodGhpcyxlKSx0aGlzfSx0LlRyYW5zcG9ydFRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5zZXRWYWx1ZUN1cnZlQXRUaW1lPWZ1bmN0aW9uKGUsaSxuLHMpe3JldHVybiBpPXRoaXMudG9UaWNrcyhpKSxuPXRoaXMudG9UaWNrcyhuKSx0LlRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5zZXRWYWx1ZUN1cnZlQXRUaW1lLmNhbGwodGhpcyxlLGksbixzKSx0aGlzfSx0LlRyYW5zcG9ydFRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5UcmFuc3BvcnQuY2xlYXIodGhpcy5fc3luY2VkKSx0LlRyYW5zcG9ydC5vZmYoXCJzdGFydCBzdG9wIHBhdXNlXCIsdGhpcy5fc3luY2VkQ2FsbGJhY2spLHRoaXMuX2V2ZW50cy5jYW5jZWwoMCksdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX291dHB1dFNpZy5kaXNwb3NlKCksdGhpcy5fb3V0cHV0U2lnPW51bGx9LHQuVHJhbnNwb3J0VGltZWxpbmVTaWduYWx9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0Lk11bHRpUGxheWVyPWZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRvbmUuTXVsdGlQbGF5ZXIgaXMgZGVwcmVjYXRlZC4gVXNlIFRvbmUuUGxheWVycyBpbnN0ZWFkLlwiKSwxIT09YXJndW1lbnRzLmxlbmd0aHx8dC5pc1VuZGVmKGFyZ3VtZW50c1swXSl8fGFyZ3VtZW50c1swXS5oYXNPd25Qcm9wZXJ0eShcInVybHNcIil8fChlPXt1cmxzOmV9KTt2YXIgaT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJ1cmxzXCIsXCJvbmxvYWRcIl0sdC5NdWx0aVBsYXllcik7dC5Tb3VyY2UuY2FsbCh0aGlzLGkpLGkudXJscyBpbnN0YW5jZW9mIHQuQnVmZmVycz90aGlzLmJ1ZmZlcnM9aS51cmxzOnRoaXMuYnVmZmVycz1uZXcgdC5CdWZmZXJzKGkudXJscyxpLm9ubG9hZCksdGhpcy5fYWN0aXZlU291cmNlcz17fSx0aGlzLmZhZGVJbj1pLmZhZGVJbix0aGlzLmZhZGVPdXQ9aS5mYWRlT3V0fSx0LmV4dGVuZCh0Lk11bHRpUGxheWVyLHQuU291cmNlKSx0Lk11bHRpUGxheWVyLmRlZmF1bHRzPXtvbmxvYWQ6dC5ub09wLGZhZGVJbjowLGZhZGVPdXQ6MH0sdC5NdWx0aVBsYXllci5wcm90b3R5cGUuX21ha2VTb3VyY2U9ZnVuY3Rpb24oZSl7dmFyIGksbjtyZXR1cm4gdC5pc1N0cmluZyhlKXx8dC5pc051bWJlcihlKT9pPXRoaXMuYnVmZmVycy5nZXQoZSkuZ2V0KCk6ZSBpbnN0YW5jZW9mIHQuQnVmZmVyP2k9ZS5nZXQoKTplIGluc3RhbmNlb2YgQXVkaW9CdWZmZXImJihpPWUpLG49bmV3IHQuQnVmZmVyU291cmNlKGkpLmNvbm5lY3QodGhpcy5vdXRwdXQpLHRoaXMuX2FjdGl2ZVNvdXJjZXMuaGFzT3duUHJvcGVydHkoZSl8fCh0aGlzLl9hY3RpdmVTb3VyY2VzW2VdPVtdKSx0aGlzLl9hY3RpdmVTb3VyY2VzW2VdLnB1c2gobiksbn0sdC5NdWx0aVBsYXllci5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oZSxpLG4scyxvLHIpe2k9dGhpcy50b1NlY29uZHMoaSk7dmFyIGE9dGhpcy5fbWFrZVNvdXJjZShlKTtyZXR1cm4gYS5zdGFydChpLG4scyx0LmRlZmF1bHRBcmcociwxKSx0aGlzLmZhZGVJbikscyYmYS5zdG9wKGkrdGhpcy50b1NlY29uZHMocyksdGhpcy5mYWRlT3V0KSxvPXQuZGVmYXVsdEFyZyhvLDApLGEucGxheWJhY2tSYXRlLnZhbHVlPXQuaW50ZXJ2YWxUb0ZyZXF1ZW5jeVJhdGlvKG8pLHRoaXN9LHQuTXVsdGlQbGF5ZXIucHJvdG90eXBlLnN0YXJ0TG9vcD1mdW5jdGlvbihlLGksbixzLG8scixhKXtpPXRoaXMudG9TZWNvbmRzKGkpO3ZhciBsPXRoaXMuX21ha2VTb3VyY2UoZSk7cmV0dXJuIGwubG9vcD0hMCxsLmxvb3BTdGFydD10aGlzLnRvU2Vjb25kcyh0LmRlZmF1bHRBcmcocywwKSksbC5sb29wRW5kPXRoaXMudG9TZWNvbmRzKHQuZGVmYXVsdEFyZyhvLDApKSxsLnN0YXJ0KGksbix2b2lkIDAsdC5kZWZhdWx0QXJnKGEsMSksdGhpcy5mYWRlSW4pLHI9dC5kZWZhdWx0QXJnKHIsMCksbC5wbGF5YmFja1JhdGUudmFsdWU9dC5pbnRlcnZhbFRvRnJlcXVlbmN5UmF0aW8ociksdGhpc30sdC5NdWx0aVBsYXllci5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbih0LGUpe2lmKCF0aGlzLl9hY3RpdmVTb3VyY2VzW3RdfHwhdGhpcy5fYWN0aXZlU291cmNlc1t0XS5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiVG9uZS5NdWx0aVBsYXllcjogY2Fubm90IHN0b3AgYSBidWZmZXIgdGhhdCBoYXNuJ3QgYmVlbiBzdGFydGVkIG9yIGlzIGFscmVhZHkgc3RvcHBlZFwiKTtyZXR1cm4gZT10aGlzLnRvU2Vjb25kcyhlKSx0aGlzLl9hY3RpdmVTb3VyY2VzW3RdLnNoaWZ0KCkuc3RvcChlLHRoaXMuZmFkZU91dCksdGhpc30sdC5NdWx0aVBsYXllci5wcm90b3R5cGUuc3RvcEFsbD1mdW5jdGlvbih0KXt2YXIgZSxpLG47dD10aGlzLnRvU2Vjb25kcyh0KTtmb3IoZSBpbiB0aGlzLl9hY3RpdmVTb3VyY2VzKWZvcihpPXRoaXMuX2FjdGl2ZVNvdXJjZXNbZV0sbj0wO248aS5sZW5ndGg7bisrKWlbbl0uc3RvcCh0KTtyZXR1cm4gdGhpc30sdC5NdWx0aVBsYXllci5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdGhpcy5idWZmZXJzLmFkZCh0LGUsaSksdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTXVsdGlQbGF5ZXIucHJvdG90eXBlLFwic3RhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FjdGl2ZVNvdXJjZXMubGVuZ3RoPjA/dC5TdGF0ZS5TdGFydGVkOnQuU3RhdGUuU3RvcHBlZH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5NdWx0aVBsYXllci5wcm90b3R5cGUsXCJtdXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92b2x1bWUubXV0ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3ZvbHVtZS5tdXRlPXR9fSksdC5NdWx0aVBsYXllci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3QuU291cmNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7Zm9yKHZhciBlIGluIHRoaXMuX2FjdGl2ZVNvdXJjZXMpdGhpcy5fYWN0aXZlU291cmNlc1tlXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuZGlzcG9zZSgpfSk7cmV0dXJuIHRoaXMuYnVmZmVycy5kaXNwb3NlKCksdGhpcy5idWZmZXJzPW51bGwsdGhpcy5fYWN0aXZlU291cmNlcz1udWxsLHRoaXN9LHQuTXVsdGlQbGF5ZXJ9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LkdyYWluUGxheWVyPWZ1bmN0aW9uKCl7dmFyIGU9dC5kZWZhdWx0cyhhcmd1bWVudHMsW1widXJsXCIsXCJvbmxvYWRcIl0sdC5HcmFpblBsYXllcik7dC5Tb3VyY2UuY2FsbCh0aGlzLGUpLHRoaXMuYnVmZmVyPW5ldyB0LkJ1ZmZlcihlLnVybCxlLm9ubG9hZCksdGhpcy5fY2xvY2s9bmV3IHQuQ2xvY2sodGhpcy5fdGljay5iaW5kKHRoaXMpLGUuZ3JhaW5TaXplKSx0aGlzLl9sb29wU3RhcnQ9MCx0aGlzLl9sb29wRW5kPTAsdGhpcy5fYWN0aXZlU291cmNlcz1bXSx0aGlzLl9wbGF5YmFja1JhdGU9ZS5wbGF5YmFja1JhdGUsdGhpcy5fZ3JhaW5TaXplPWUuZ3JhaW5TaXplLHRoaXMuX292ZXJsYXA9ZS5vdmVybGFwLHRoaXMuZGV0dW5lPWUuZGV0dW5lLHRoaXMub3ZlcmxhcD1lLm92ZXJsYXAsdGhpcy5sb29wPWUubG9vcCx0aGlzLnBsYXliYWNrUmF0ZT1lLnBsYXliYWNrUmF0ZSx0aGlzLmdyYWluU2l6ZT1lLmdyYWluU2l6ZSx0aGlzLmxvb3BTdGFydD1lLmxvb3BTdGFydCx0aGlzLmxvb3BFbmQ9ZS5sb29wRW5kLHRoaXMucmV2ZXJzZT1lLnJldmVyc2UsdGhpcy5fY2xvY2sub24oXCJzdG9wXCIsdGhpcy5fb25zdG9wLmJpbmQodGhpcykpfSx0LmV4dGVuZCh0LkdyYWluUGxheWVyLHQuU291cmNlKSx0LkdyYWluUGxheWVyLmRlZmF1bHRzPXtvbmxvYWQ6dC5ub09wLG92ZXJsYXA6LjEsZ3JhaW5TaXplOi4yLHBsYXliYWNrUmF0ZToxLGRldHVuZTowLGxvb3A6ITEsbG9vcFN0YXJ0OjAsbG9vcEVuZDowLHJldmVyc2U6ITF9LHQuR3JhaW5QbGF5ZXIucHJvdG90eXBlLl9zdGFydD1mdW5jdGlvbihlLGksbil7aT10LmRlZmF1bHRBcmcoaSwwKSxpPXRoaXMudG9TZWNvbmRzKGkpLGU9dGhpcy50b1NlY29uZHMoZSksdGhpcy5fb2Zmc2V0PWksdGhpcy5fY2xvY2suc3RhcnQoZSksbiYmdGhpcy5zdG9wKGUrdGhpcy50b1NlY29uZHMobikpfSx0LkdyYWluUGxheWVyLnByb3RvdHlwZS5fc3RvcD1mdW5jdGlvbih0KXt0aGlzLl9jbG9jay5zdG9wKHQpfSx0LkdyYWluUGxheWVyLnByb3RvdHlwZS5fb25zdG9wPWZ1bmN0aW9uKHQpe3RoaXMuX2FjdGl2ZVNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnN0b3AodCwwKX0pfSx0LkdyYWluUGxheWVyLnByb3RvdHlwZS5fdGljaz1mdW5jdGlvbihlKXt2YXIgaT10aGlzLl9vZmZzZXQ8dGhpcy5fb3ZlcmxhcD8wOnRoaXMuX292ZXJsYXAsbj1uZXcgdC5CdWZmZXJTb3VyY2Uoe2J1ZmZlcjp0aGlzLmJ1ZmZlcixmYWRlSW46aSxmYWRlT3V0OnRoaXMuX292ZXJsYXAsbG9vcDp0aGlzLmxvb3AsbG9vcFN0YXJ0OnRoaXMuX2xvb3BTdGFydCxsb29wRW5kOnRoaXMuX2xvb3BFbmQscGxheWJhY2tSYXRlOnQuaW50ZXJ2YWxUb0ZyZXF1ZW5jeVJhdGlvKHRoaXMuZGV0dW5lLzEwMCl9KS5jb25uZWN0KHRoaXMub3V0cHV0KTtuLnN0YXJ0KGUsdGhpcy5fb2Zmc2V0KSx0aGlzLl9vZmZzZXQrPXRoaXMuZ3JhaW5TaXplLG4uc3RvcChlK3RoaXMuZ3JhaW5TaXplKSx0aGlzLl9hY3RpdmVTb3VyY2VzLnB1c2gobiksbi5vbmVuZGVkPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fYWN0aXZlU291cmNlcy5pbmRleE9mKG4pOy0xIT09dCYmdGhpcy5fYWN0aXZlU291cmNlcy5zcGxpY2UodCwxKX0uYmluZCh0aGlzKX0sdC5HcmFpblBsYXllci5wcm90b3R5cGUuc2Vlaz1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9vZmZzZXQ9dGhpcy50b1NlY29uZHModCksdGhpcy5fdGljayh0aGlzLnRvU2Vjb25kcyhlKSksdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuR3JhaW5QbGF5ZXIucHJvdG90eXBlLFwicGxheWJhY2tSYXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wbGF5YmFja1JhdGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wbGF5YmFja1JhdGU9dCx0aGlzLmdyYWluU2l6ZT10aGlzLl9ncmFpblNpemV9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuR3JhaW5QbGF5ZXIucHJvdG90eXBlLFwibG9vcFN0YXJ0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb29wU3RhcnR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sb29wU3RhcnQ9dGhpcy50b1NlY29uZHModCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuR3JhaW5QbGF5ZXIucHJvdG90eXBlLFwibG9vcEVuZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9vcEVuZH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xvb3BFbmQ9dGhpcy50b1NlY29uZHModCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuR3JhaW5QbGF5ZXIucHJvdG90eXBlLFwicmV2ZXJzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idWZmZXIucmV2ZXJzZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuYnVmZmVyLnJldmVyc2U9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5HcmFpblBsYXllci5wcm90b3R5cGUsXCJncmFpblNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dyYWluU2l6ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2dyYWluU2l6ZT10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9jbG9jay5mcmVxdWVuY3kudmFsdWU9dGhpcy5fcGxheWJhY2tSYXRlL3RoaXMuX2dyYWluU2l6ZX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5HcmFpblBsYXllci5wcm90b3R5cGUsXCJvdmVybGFwXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vdmVybGFwfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3ZlcmxhcD10aGlzLnRvU2Vjb25kcyh0KX19KSx0LkdyYWluUGxheWVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuU291cmNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5idWZmZXIuZGlzcG9zZSgpLHRoaXMuYnVmZmVyPW51bGwsdGhpcy5fY2xvY2suZGlzcG9zZSgpLHRoaXMuX2Nsb2NrPW51bGwsdGhpcy5fYWN0aXZlU291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuZGlzcG9zZSgpfSksdGhpcy5fYWN0aXZlU291cmNlcz1udWxsLHRoaXN9LHQuR3JhaW5QbGF5ZXJ9KSx0KGZ1bmN0aW9uKHQpe3JldHVybiB0LlBsYXllcj1mdW5jdGlvbihlKXt2YXIgaTtlIGluc3RhbmNlb2YgdC5CdWZmZXI/KGU9ZS5nZXQoKSxpPXQuUGxheWVyLmRlZmF1bHRzKTppPXQuZGVmYXVsdHMoYXJndW1lbnRzLFtcInVybFwiLFwib25sb2FkXCJdLHQuUGxheWVyKSx0LlNvdXJjZS5jYWxsKHRoaXMsaSksdGhpcy5fc291cmNlPW51bGwsdGhpcy5hdXRvc3RhcnQ9aS5hdXRvc3RhcnQsdGhpcy5fYnVmZmVyPW5ldyB0LkJ1ZmZlcih7dXJsOmkudXJsLG9ubG9hZDp0aGlzLl9vbmxvYWQuYmluZCh0aGlzLGkub25sb2FkKSxyZXZlcnNlOmkucmV2ZXJzZX0pLGUgaW5zdGFuY2VvZiBBdWRpb0J1ZmZlciYmdGhpcy5fYnVmZmVyLnNldChlKSx0aGlzLl9sb29wPWkubG9vcCx0aGlzLl9sb29wU3RhcnQ9aS5sb29wU3RhcnQsdGhpcy5fbG9vcEVuZD1pLmxvb3BFbmQsdGhpcy5fcGxheWJhY2tSYXRlPWkucGxheWJhY2tSYXRlLHRoaXMucmV0cmlnZ2VyPWkucmV0cmlnZ2VyLHRoaXMuZmFkZUluPWkuZmFkZUluLHRoaXMuZmFkZU91dD1pLmZhZGVPdXR9LHQuZXh0ZW5kKHQuUGxheWVyLHQuU291cmNlKSx0LlBsYXllci5kZWZhdWx0cz17b25sb2FkOnQubm9PcCxwbGF5YmFja1JhdGU6MSxsb29wOiExLGF1dG9zdGFydDohMSxsb29wU3RhcnQ6MCxsb29wRW5kOjAscmV0cmlnZ2VyOiExLHJldmVyc2U6ITEsZmFkZUluOjAsZmFkZU91dDowfSx0LlBsYXllci5wcm90b3R5cGUubG9hZD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9idWZmZXIubG9hZCh0LHRoaXMuX29ubG9hZC5iaW5kKHRoaXMsZSkpfSx0LlBsYXllci5wcm90b3R5cGUuX29ubG9hZD1mdW5jdGlvbihlKXtlPXQuZGVmYXVsdEFyZyhlLHQubm9PcCksZSh0aGlzKSx0aGlzLmF1dG9zdGFydCYmdGhpcy5zdGFydCgpfSx0LlBsYXllci5wcm90b3R5cGUuX3N0YXJ0PWZ1bmN0aW9uKGUsaSxuKXtyZXR1cm4gaT10aGlzLl9sb29wP3QuZGVmYXVsdEFyZyhpLHRoaXMuX2xvb3BTdGFydCk6dC5kZWZhdWx0QXJnKGksMCksaT10aGlzLnRvU2Vjb25kcyhpKSxuPXQuZGVmYXVsdEFyZyhuLE1hdGgubWF4KHRoaXMuX2J1ZmZlci5kdXJhdGlvbi1pLDApKSxuPXRoaXMudG9TZWNvbmRzKG4pLGU9dGhpcy50b1NlY29uZHMoZSksdGhpcy5fc291cmNlPW5ldyB0LkJ1ZmZlclNvdXJjZSh7YnVmZmVyOnRoaXMuX2J1ZmZlcixsb29wOnRoaXMuX2xvb3AsbG9vcFN0YXJ0OnRoaXMuX2xvb3BTdGFydCxsb29wRW5kOnRoaXMuX2xvb3BFbmQscGxheWJhY2tSYXRlOnRoaXMuX3BsYXliYWNrUmF0ZSxmYWRlSW46dGhpcy5mYWRlSW4sZmFkZU91dDp0aGlzLmZhZGVPdXR9KS5jb25uZWN0KHRoaXMub3V0cHV0KSx0aGlzLl9sb29wfHx0aGlzLl9zeW5jZWR8fHRoaXMuX3N0YXRlLnNldFN0YXRlQXRUaW1lKHQuU3RhdGUuU3RvcHBlZCxlK24pLHRoaXMuX2xvb3A/dGhpcy5fc291cmNlLnN0YXJ0KGUsaSk6dGhpcy5fc291cmNlLnN0YXJ0KGUsaSxuKSx0aGlzfSx0LlBsYXllci5wcm90b3R5cGUuX3N0b3A9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3NvdXJjZSYmdGhpcy5fc291cmNlLnN0b3AodGhpcy50b1NlY29uZHModCkpLHRoaXN9LHQuUGxheWVyLnByb3RvdHlwZS5zZWVrPWZ1bmN0aW9uKGUsaSl7cmV0dXJuIGk9dGhpcy50b1NlY29uZHMoaSksdGhpcy5fc3RhdGUuZ2V0VmFsdWVBdFRpbWUoaSk9PT10LlN0YXRlLlN0YXJ0ZWQmJihlPXRoaXMudG9TZWNvbmRzKGUpLHRoaXMuX3N0b3AoaSksdGhpcy5fc3RhcnQoaSxlKSksdGhpc30sdC5QbGF5ZXIucHJvdG90eXBlLnNldExvb3BQb2ludHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5sb29wU3RhcnQ9dCx0aGlzLmxvb3BFbmQ9ZSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QbGF5ZXIucHJvdG90eXBlLFwibG9vcFN0YXJ0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb29wU3RhcnR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sb29wU3RhcnQ9dCx0aGlzLl9zb3VyY2UmJih0aGlzLl9zb3VyY2UubG9vcFN0YXJ0PXRoaXMudG9TZWNvbmRzKHQpKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QbGF5ZXIucHJvdG90eXBlLFwibG9vcEVuZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9vcEVuZH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xvb3BFbmQ9dCx0aGlzLl9zb3VyY2UmJih0aGlzLl9zb3VyY2UubG9vcEVuZD10aGlzLnRvU2Vjb25kcyh0KSl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGxheWVyLnByb3RvdHlwZSxcImJ1ZmZlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYnVmZmVyLnNldCh0KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QbGF5ZXIucHJvdG90eXBlLFwibG9vcFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9vcH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xvb3A9dCx0aGlzLl9zb3VyY2UmJih0aGlzLl9zb3VyY2UubG9vcD10KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QbGF5ZXIucHJvdG90eXBlLFwicGxheWJhY2tSYXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wbGF5YmFja1JhdGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wbGF5YmFja1JhdGU9dCx0aGlzLl9zb3VyY2UmJih0aGlzLl9zb3VyY2UucGxheWJhY2tSYXRlLnZhbHVlPXQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBsYXllci5wcm90b3R5cGUsXCJyZXZlcnNlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXIucmV2ZXJzZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2J1ZmZlci5yZXZlcnNlPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGxheWVyLnByb3RvdHlwZSxcImxvYWRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyLmxvYWRlZH19KSx0LlBsYXllci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LlNvdXJjZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLG51bGwhPT10aGlzLl9zb3VyY2UmJih0aGlzLl9zb3VyY2UuZGlzY29ubmVjdCgpLHRoaXMuX3NvdXJjZT1udWxsKSx0aGlzLl9idWZmZXIuZGlzcG9zZSgpLHRoaXMuX2J1ZmZlcj1udWxsLHRoaXN9LHQuUGxheWVyfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5QbGF5ZXJzPWZ1bmN0aW9uKGUpe3ZhciBpLG4scz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO3Muc2hpZnQoKSxpPXQuZGVmYXVsdHMocyxbXCJvbmxvYWRcIl0sdC5QbGF5ZXJzKSx0LmNhbGwodGhpcyksdGhpcy5fdm9sdW1lPXRoaXMub3V0cHV0PW5ldyB0LlZvbHVtZShpLnZvbHVtZSksdGhpcy52b2x1bWU9dGhpcy5fdm9sdW1lLnZvbHVtZSx0aGlzLl9yZWFkT25seShcInZvbHVtZVwiKSx0aGlzLl92b2x1bWUub3V0cHV0Lm91dHB1dC5jaGFubmVsQ291bnQ9Mix0aGlzLl92b2x1bWUub3V0cHV0Lm91dHB1dC5jaGFubmVsQ291bnRNb2RlPVwiZXhwbGljaXRcIix0aGlzLm11dGU9aS5tdXRlLHRoaXMuX3BsYXllcnM9e30sdGhpcy5fbG9hZGluZ0NvdW50PTAsdGhpcy5fZmFkZUluPWkuZmFkZUluLHRoaXMuX2ZhZGVPdXQ9aS5mYWRlT3V0O2ZvcihuIGluIGUpdGhpcy5fbG9hZGluZ0NvdW50KyssdGhpcy5hZGQobixlW25dLHRoaXMuX2J1ZmZlckxvYWRlZC5iaW5kKHRoaXMsaS5vbmxvYWQpKX0sdC5leHRlbmQodC5QbGF5ZXJzLHQuQXVkaW9Ob2RlKSx0LlBsYXllcnMuZGVmYXVsdHM9e3ZvbHVtZTowLG11dGU6ITEsb25sb2FkOnQubm9PcCxmYWRlSW46MCxmYWRlT3V0OjB9LHQuUGxheWVycy5wcm90b3R5cGUuX2J1ZmZlckxvYWRlZD1mdW5jdGlvbih0KXswPT09LS10aGlzLl9sb2FkaW5nQ291bnQmJnQmJnQodGhpcyl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBsYXllcnMucHJvdG90eXBlLFwibXV0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdm9sdW1lLm11dGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl92b2x1bWUubXV0ZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBsYXllcnMucHJvdG90eXBlLFwiZmFkZUluXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mYWRlSW59LHNldDpmdW5jdGlvbih0KXt0aGlzLl9mYWRlSW49dCx0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuZmFkZUluPXR9KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QbGF5ZXJzLnByb3RvdHlwZSxcImZhZGVPdXRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZhZGVPdXR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9mYWRlT3V0PXQsdGhpcy5fZm9yRWFjaChmdW5jdGlvbihlKXtlLmZhZGVPdXQ9dH0pfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBsYXllcnMucHJvdG90eXBlLFwic3RhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGU9ITE7cmV0dXJuIHRoaXMuX2ZvckVhY2goZnVuY3Rpb24oaSl7ZT1lfHxpLnN0YXRlPT09dC5TdGF0ZS5TdGFydGVkfSksZT90LlN0YXRlLlN0YXJ0ZWQ6dC5TdGF0ZS5TdG9wcGVkfX0pLHQuUGxheWVycy5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9wbGF5ZXJzLmhhc093blByb3BlcnR5KHQpfSx0LlBsYXllcnMucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtpZih0aGlzLmhhcyh0KSlyZXR1cm4gdGhpcy5fcGxheWVyc1t0XTt0aHJvdyBuZXcgRXJyb3IoXCJUb25lLlBsYXllcnM6IG5vIHBsYXllciBuYW1lZCBcIit0KX0sdC5QbGF5ZXJzLnByb3RvdHlwZS5fZm9yRWFjaD1mdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdGhpcy5fcGxheWVycyl0KHRoaXMuX3BsYXllcnNbZV0sZSk7cmV0dXJuIHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBsYXllcnMucHJvdG90eXBlLFwibG9hZGVkXCIse2dldDpmdW5jdGlvbigpe3ZhciB0PSEwO3JldHVybiB0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKGUpe3Q9dCYmZS5sb2FkZWR9KSx0fX0pLHQuUGxheWVycy5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGUsaSxuKXtyZXR1cm4gdGhpcy5fcGxheWVyc1tlXT1uZXcgdC5QbGF5ZXIoaSxuKS5jb25uZWN0KHRoaXMub3V0cHV0KSx0aGlzLl9wbGF5ZXJzW2VdLmZhZGVJbj10aGlzLl9mYWRlSW4sdGhpcy5fcGxheWVyc1tlXS5mYWRlT3V0PXRoaXMuX2ZhZGVPdXQsdGhpc30sdC5QbGF5ZXJzLnByb3RvdHlwZS5zdG9wQWxsPWZ1bmN0aW9uKHQpe3RoaXMuX2ZvckVhY2goZnVuY3Rpb24oZSl7ZS5zdG9wKHQpfSl9LHQuUGxheWVycy5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3ZvbHVtZS5kaXNwb3NlKCksdGhpcy5fdm9sdW1lPW51bGwsdGhpcy5fd3JpdGFibGUoXCJ2b2x1bWVcIiksdGhpcy52b2x1bWU9bnVsbCx0aGlzLm91dHB1dD1udWxsLHRoaXMuX2ZvckVhY2goZnVuY3Rpb24odCl7dC5kaXNwb3NlKCl9KSx0aGlzLl9wbGF5ZXJzPW51bGwsdGhpc30sdC5QbGF5ZXJzfSksdChmdW5jdGlvbih0KXtyZXR1cm4gdC5Vc2VyTWVkaWE9ZnVuY3Rpb24oKXt2YXIgZT10LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJ2b2x1bWVcIl0sdC5Vc2VyTWVkaWEpO3QuQXVkaW9Ob2RlLmNhbGwodGhpcyksdGhpcy5fbWVkaWFTdHJlYW09bnVsbCx0aGlzLl9zdHJlYW09bnVsbCx0aGlzLl9kZXZpY2U9bnVsbCx0aGlzLl92b2x1bWU9dGhpcy5vdXRwdXQ9bmV3IHQuVm9sdW1lKGUudm9sdW1lKSx0aGlzLnZvbHVtZT10aGlzLl92b2x1bWUudm9sdW1lLHRoaXMuX3JlYWRPbmx5KFwidm9sdW1lXCIpLHRoaXMubXV0ZT1lLm11dGV9LHQuZXh0ZW5kKHQuVXNlck1lZGlhLHQuQXVkaW9Ob2RlKSx0LlVzZXJNZWRpYS5kZWZhdWx0cz17dm9sdW1lOjAsbXV0ZTohMX0sdC5Vc2VyTWVkaWEucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24oZSl7cmV0dXJuIGU9dC5kZWZhdWx0QXJnKGUsXCJkZWZhdWx0XCIpLHQuVXNlck1lZGlhLmVudW1lcmF0ZURldmljZXMoKS50aGVuKGZ1bmN0aW9uKGkpe3ZhciBuLHM7aWYodC5pc051bWJlcihlKSluPWlbZV07ZWxzZSBpZighKG49aS5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0LmxhYmVsPT09ZXx8dC5kZXZpY2VJZD09PWV9KSkpdGhyb3cgbmV3IEVycm9yKFwiVG9uZS5Vc2VyTWVkaWE6IG5vIG1hdGNoaW5nIGRldmljZTogXCIrZSk7cmV0dXJuIHRoaXMuX2RldmljZT1uLHM9e2F1ZGlvOntkZXZpY2VJZDpuLmRldmljZUlkLGVjaG9DYW5jZWxsYXRpb246ITEsc2FtcGxlUmF0ZTp0aGlzLmNvbnRleHQuc2FtcGxlUmF0ZX19LG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHMpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3N0cmVhbXx8KHRoaXMuX3N0cmVhbT10LHRoaXMuX21lZGlhU3RyZWFtPXRoaXMuY29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZSh0KSx0aGlzLl9tZWRpYVN0cmVhbS5jb25uZWN0KHRoaXMub3V0cHV0KSksdGhpc30uYmluZCh0aGlzKSl9LmJpbmQodGhpcykpfSx0LlVzZXJNZWRpYS5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RyZWFtJiYodGhpcy5fc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0KXt0LnN0b3AoKX0pLHRoaXMuX3N0cmVhbT1udWxsLHRoaXMuX21lZGlhU3RyZWFtLmRpc2Nvbm5lY3QoKSx0aGlzLl9tZWRpYVN0cmVhbT1udWxsKSx0aGlzLl9kZXZpY2U9bnVsbCx0aGlzfSx0LlVzZXJNZWRpYS5lbnVtZXJhdGVEZXZpY2VzPWZ1bmN0aW9uKCl7cmV0dXJuIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVyblwiYXVkaW9pbnB1dFwiPT09dC5raW5kfSl9KX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuVXNlck1lZGlhLnByb3RvdHlwZSxcInN0YXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdHJlYW0mJnRoaXMuX3N0cmVhbS5hY3RpdmU/dC5TdGF0ZS5TdGFydGVkOnQuU3RhdGUuU3RvcHBlZH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Vc2VyTWVkaWEucHJvdG90eXBlLFwiZGV2aWNlSWRcIix7Z2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5fZGV2aWNlKXJldHVybiB0aGlzLl9kZXZpY2UuZGV2aWNlSWR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuVXNlck1lZGlhLnByb3RvdHlwZSxcImdyb3VwSWRcIix7Z2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5fZGV2aWNlKXJldHVybiB0aGlzLl9kZXZpY2UuZ3JvdXBJZH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Vc2VyTWVkaWEucHJvdG90eXBlLFwibGFiZWxcIix7Z2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5fZGV2aWNlKXJldHVybiB0aGlzLl9kZXZpY2UubGFiZWx9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuVXNlck1lZGlhLnByb3RvdHlwZSxcIm11dGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZvbHVtZS5tdXRlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdm9sdW1lLm11dGU9dH19KSx0LlVzZXJNZWRpYS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuY2xvc2UoKSx0aGlzLl93cml0YWJsZShcInZvbHVtZVwiKSx0aGlzLl92b2x1bWUuZGlzcG9zZSgpLHRoaXMuX3ZvbHVtZT1udWxsLHRoaXMudm9sdW1lPW51bGwsdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuVXNlck1lZGlhLFwic3VwcG9ydGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiF0LmlzVW5kZWYobmF2aWdhdG9yLm1lZGlhRGV2aWNlcykmJnQuaXNGdW5jdGlvbihuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSl9fSksdC5Vc2VyTWVkaWF9KSxlfSk7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/Tone/build/Tone.min.js\n");

/***/ }),

/***/ "./node_modules/stats.js/build/stats.min.js":
/*!**************************************************!*\
  !*** ./node_modules/stats.js/build/stats.min.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// stats.js - http://github.com/mrdoob/stats.js\n(function(f,e){ true?module.exports=e():undefined})(this,function(){var f=function(){function e(a){c.appendChild(a.dom);return a}function u(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?\"block\":\"none\";l=a}var l=0,c=document.createElement(\"div\");c.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";c.addEventListener(\"click\",function(a){a.preventDefault();\nu(++l%c.children.length)},!1);var k=(performance||Date).now(),g=k,a=0,r=e(new f.Panel(\"FPS\",\"#0ff\",\"#002\")),h=e(new f.Panel(\"MS\",\"#0f0\",\"#020\"));if(self.performance&&self.performance.memory)var t=e(new f.Panel(\"MB\",\"#f08\",\"#201\"));u(0);return{REVISION:16,dom:c,addPanel:e,showPanel:u,begin:function(){k=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();h.update(c-k,200);if(c>g+1E3&&(r.update(1E3*a/(c-g),100),g=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/\n1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){k=this.end()},domElement:c,setMode:u}};f.Panel=function(e,f,l){var c=Infinity,k=0,g=Math.round,a=g(window.devicePixelRatio||1),r=80*a,h=48*a,t=3*a,v=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement(\"canvas\");q.width=r;q.height=h;q.style.cssText=\"width:80px;height:48px\";var b=q.getContext(\"2d\");b.font=\"bold \"+9*a+\"px Helvetica,Arial,sans-serif\";b.textBaseline=\"top\";b.fillStyle=l;b.fillRect(0,0,r,h);b.fillStyle=f;b.fillText(e,t,v);\nb.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(h,w){c=Math.min(c,h);k=Math.max(k,h);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=f;b.fillText(g(h)+\" \"+e+\" (\"+g(c)+\"-\"+g(k)+\")\",t,v);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,g((1-h/w)*p))}}};return f});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc3RhdHMuanMvYnVpbGQvc3RhdHMubWluLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUlMvLi9ub2RlX21vZHVsZXMvc3RhdHMuanMvYnVpbGQvc3RhdHMubWluLmpzPzMxOTEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3RhdHMuanMgLSBodHRwOi8vZ2l0aHViLmNvbS9tcmRvb2Ivc3RhdHMuanNcbihmdW5jdGlvbihmLGUpe1wib2JqZWN0XCI9PT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9ZSgpOlwiZnVuY3Rpb25cIj09PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGUpOmYuU3RhdHM9ZSgpfSkodGhpcyxmdW5jdGlvbigpe3ZhciBmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShhKXtjLmFwcGVuZENoaWxkKGEuZG9tKTtyZXR1cm4gYX1mdW5jdGlvbiB1KGEpe2Zvcih2YXIgZD0wO2Q8Yy5jaGlsZHJlbi5sZW5ndGg7ZCsrKWMuY2hpbGRyZW5bZF0uc3R5bGUuZGlzcGxheT1kPT09YT9cImJsb2NrXCI6XCJub25lXCI7bD1hfXZhciBsPTAsYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2Muc3R5bGUuY3NzVGV4dD1cInBvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDtjdXJzb3I6cG9pbnRlcjtvcGFjaXR5OjAuOTt6LWluZGV4OjEwMDAwXCI7Yy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCk7XG51KCsrbCVjLmNoaWxkcmVuLmxlbmd0aCl9LCExKTt2YXIgaz0ocGVyZm9ybWFuY2V8fERhdGUpLm5vdygpLGc9ayxhPTAscj1lKG5ldyBmLlBhbmVsKFwiRlBTXCIsXCIjMGZmXCIsXCIjMDAyXCIpKSxoPWUobmV3IGYuUGFuZWwoXCJNU1wiLFwiIzBmMFwiLFwiIzAyMFwiKSk7aWYoc2VsZi5wZXJmb3JtYW5jZSYmc2VsZi5wZXJmb3JtYW5jZS5tZW1vcnkpdmFyIHQ9ZShuZXcgZi5QYW5lbChcIk1CXCIsXCIjZjA4XCIsXCIjMjAxXCIpKTt1KDApO3JldHVybntSRVZJU0lPTjoxNixkb206YyxhZGRQYW5lbDplLHNob3dQYW5lbDp1LGJlZ2luOmZ1bmN0aW9uKCl7az0ocGVyZm9ybWFuY2V8fERhdGUpLm5vdygpfSxlbmQ6ZnVuY3Rpb24oKXthKys7dmFyIGM9KHBlcmZvcm1hbmNlfHxEYXRlKS5ub3coKTtoLnVwZGF0ZShjLWssMjAwKTtpZihjPmcrMUUzJiYoci51cGRhdGUoMUUzKmEvKGMtZyksMTAwKSxnPWMsYT0wLHQpKXt2YXIgZD1wZXJmb3JtYW5jZS5tZW1vcnk7dC51cGRhdGUoZC51c2VkSlNIZWFwU2l6ZS9cbjEwNDg1NzYsZC5qc0hlYXBTaXplTGltaXQvMTA0ODU3Nil9cmV0dXJuIGN9LHVwZGF0ZTpmdW5jdGlvbigpe2s9dGhpcy5lbmQoKX0sZG9tRWxlbWVudDpjLHNldE1vZGU6dX19O2YuUGFuZWw9ZnVuY3Rpb24oZSxmLGwpe3ZhciBjPUluZmluaXR5LGs9MCxnPU1hdGgucm91bmQsYT1nKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfHwxKSxyPTgwKmEsaD00OCphLHQ9MyphLHY9MiphLGQ9MyphLG09MTUqYSxuPTc0KmEscD0zMCphLHE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtxLndpZHRoPXI7cS5oZWlnaHQ9aDtxLnN0eWxlLmNzc1RleHQ9XCJ3aWR0aDo4MHB4O2hlaWdodDo0OHB4XCI7dmFyIGI9cS5nZXRDb250ZXh0KFwiMmRcIik7Yi5mb250PVwiYm9sZCBcIis5KmErXCJweCBIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZlwiO2IudGV4dEJhc2VsaW5lPVwidG9wXCI7Yi5maWxsU3R5bGU9bDtiLmZpbGxSZWN0KDAsMCxyLGgpO2IuZmlsbFN0eWxlPWY7Yi5maWxsVGV4dChlLHQsdik7XG5iLmZpbGxSZWN0KGQsbSxuLHApO2IuZmlsbFN0eWxlPWw7Yi5nbG9iYWxBbHBoYT0uOTtiLmZpbGxSZWN0KGQsbSxuLHApO3JldHVybntkb206cSx1cGRhdGU6ZnVuY3Rpb24oaCx3KXtjPU1hdGgubWluKGMsaCk7az1NYXRoLm1heChrLGgpO2IuZmlsbFN0eWxlPWw7Yi5nbG9iYWxBbHBoYT0xO2IuZmlsbFJlY3QoMCwwLHIsbSk7Yi5maWxsU3R5bGU9ZjtiLmZpbGxUZXh0KGcoaCkrXCIgXCIrZStcIiAoXCIrZyhjKStcIi1cIitnKGspK1wiKVwiLHQsdik7Yi5kcmF3SW1hZ2UocSxkK2EsbSxuLWEscCxkLG0sbi1hLHApO2IuZmlsbFJlY3QoZCtuLWEsbSxhLHApO2IuZmlsbFN0eWxlPWw7Yi5nbG9iYWxBbHBoYT0uOTtiLmZpbGxSZWN0KGQrbi1hLG0sYSxnKCgxLWgvdykqcCkpfX19O3JldHVybiBmfSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/stats.js/build/stats.min.js\n");

/***/ }),

/***/ "./node_modules/three/build/three.min.js":
/*!***********************************************!*\
  !*** ./node_modules/three/build/three.min.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// threejs.org/license\n(function(l,za){ true?za(exports):undefined})(this,function(l){function za(){}function D(a,b){this.x=a||0;this.y=b||0}function O(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error(\"THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.\")}function ha(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1}function p(a,\nb,c){this.x=a||0;this.y=b||0;this.z=c||0}function ma(){this.elements=[1,0,0,0,1,0,0,0,1];0<arguments.length&&console.error(\"THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.\")}function U(a,b,c,d,e,f,g,h,k,m){Object.defineProperty(this,\"id\",{value:Af++});this.uuid=Q.generateUUID();this.name=\"\";this.image=void 0!==a?a:U.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:U.DEFAULT_MAPPING;this.wrapS=void 0!==c?c:1001;this.wrapT=void 0!==d?d:1001;this.magFilter=void 0!==\ne?e:1006;this.minFilter=void 0!==f?f:1008;this.anisotropy=void 0!==k?k:1;this.format=void 0!==g?g:1023;this.type=void 0!==h?h:1009;this.offset=new D(0,0);this.repeat=new D(1,1);this.center=new D(0,0);this.rotation=0;this.matrixAutoUpdate=!0;this.matrix=new ma;this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void 0!==m?m:3E3;this.version=0;this.onUpdate=null}function aa(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1}function kb(a,\nb,c){this.uuid=Q.generateUUID();this.width=a;this.height=b;this.scissor=new aa(0,0,a,b);this.scissorTest=!1;this.viewport=new aa(0,0,a,b);c=c||{};void 0===c.minFilter&&(c.minFilter=1006);this.texture=new U(void 0,void 0,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding);this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.depthTexture=void 0!==c.depthTexture?c.depthTexture:null}function Jb(a,b,c){kb.call(this,\na,b,c);this.activeMipMapLevel=this.activeCubeFace=0}function lb(a,b,c,d,e,f,g,h,k,m,q,n){U.call(this,null,f,g,h,k,m,d,e,q,n);this.image={data:a,width:b,height:c};this.magFilter=void 0!==k?k:1003;this.minFilter=void 0!==m?m:1003;this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1}function db(a,b,c,d,e,f,g,h,k,m){a=void 0!==a?a:[];U.call(this,a,void 0!==b?b:301,c,d,e,f,g,h,k,m);this.flipY=!1}function Kb(a,b,c){var d=a[0];if(0>=d||0<d)return a;var e=b*c,f=Ie[e];void 0===f&&(f=new Float32Array(e),\nIe[e]=f);if(0!==b)for(d.toArray(f,0),d=1,e=0;d!==b;++d)e+=c,a[d].toArray(f,e);return f}function Je(a,b){var c=Ke[b];void 0===c&&(c=new Int32Array(b),Ke[b]=c);for(var d=0;d!==b;++d)c[d]=a.allocTextureUnit();return c}function Bf(a,b){a.uniform1f(this.addr,b)}function Cf(a,b){a.uniform1i(this.addr,b)}function Df(a,b){void 0===b.x?a.uniform2fv(this.addr,b):a.uniform2f(this.addr,b.x,b.y)}function Ef(a,b){void 0!==b.x?a.uniform3f(this.addr,b.x,b.y,b.z):void 0!==b.r?a.uniform3f(this.addr,b.r,b.g,b.b):a.uniform3fv(this.addr,\nb)}function Ff(a,b){void 0===b.x?a.uniform4fv(this.addr,b):a.uniform4f(this.addr,b.x,b.y,b.z,b.w)}function Gf(a,b){a.uniformMatrix2fv(this.addr,!1,b.elements||b)}function Hf(a,b){void 0===b.elements?a.uniformMatrix3fv(this.addr,!1,b):(Le.set(b.elements),a.uniformMatrix3fv(this.addr,!1,Le))}function If(a,b){void 0===b.elements?a.uniformMatrix4fv(this.addr,!1,b):(Me.set(b.elements),a.uniformMatrix4fv(this.addr,!1,Me))}function Jf(a,b,c){var d=c.allocTextureUnit();a.uniform1i(this.addr,d);c.setTexture2D(b||\nNe,d)}function Kf(a,b,c){var d=c.allocTextureUnit();a.uniform1i(this.addr,d);c.setTextureCube(b||Oe,d)}function Pe(a,b){a.uniform2iv(this.addr,b)}function Qe(a,b){a.uniform3iv(this.addr,b)}function Re(a,b){a.uniform4iv(this.addr,b)}function Lf(a){switch(a){case 5126:return Bf;case 35664:return Df;case 35665:return Ef;case 35666:return Ff;case 35674:return Gf;case 35675:return Hf;case 35676:return If;case 35678:case 36198:return Jf;case 35680:return Kf;case 5124:case 35670:return Cf;case 35667:case 35671:return Pe;\ncase 35668:case 35672:return Qe;case 35669:case 35673:return Re}}function Mf(a,b){a.uniform1fv(this.addr,b)}function Nf(a,b){a.uniform1iv(this.addr,b)}function Of(a,b){a.uniform2fv(this.addr,Kb(b,this.size,2))}function Pf(a,b){a.uniform3fv(this.addr,Kb(b,this.size,3))}function Qf(a,b){a.uniform4fv(this.addr,Kb(b,this.size,4))}function Rf(a,b){a.uniformMatrix2fv(this.addr,!1,Kb(b,this.size,4))}function Sf(a,b){a.uniformMatrix3fv(this.addr,!1,Kb(b,this.size,9))}function Tf(a,b){a.uniformMatrix4fv(this.addr,\n!1,Kb(b,this.size,16))}function Uf(a,b,c){var d=b.length,e=Je(c,d);a.uniform1iv(this.addr,e);for(a=0;a!==d;++a)c.setTexture2D(b[a]||Ne,e[a])}function Vf(a,b,c){var d=b.length,e=Je(c,d);a.uniform1iv(this.addr,e);for(a=0;a!==d;++a)c.setTextureCube(b[a]||Oe,e[a])}function Wf(a){switch(a){case 5126:return Mf;case 35664:return Of;case 35665:return Pf;case 35666:return Qf;case 35674:return Rf;case 35675:return Sf;case 35676:return Tf;case 35678:return Uf;case 35680:return Vf;case 5124:case 35670:return Nf;\ncase 35667:case 35671:return Pe;case 35668:case 35672:return Qe;case 35669:case 35673:return Re}}function Xf(a,b,c){this.id=a;this.addr=c;this.setValue=Lf(b.type)}function Yf(a,b,c){this.id=a;this.addr=c;this.size=b.size;this.setValue=Wf(b.type)}function Se(a){this.id=a;this.seq=[];this.map={}}function mb(a,b,c){this.seq=[];this.map={};this.renderer=c;c=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(var d=0;d<c;++d){var e=a.getActiveUniform(b,d),f=a.getUniformLocation(b,e.name),g=this,h=e.name,k=\nh.length;for(Vd.lastIndex=0;;){var m=Vd.exec(h),q=Vd.lastIndex,n=m[1],u=m[3];\"]\"===m[2]&&(n|=0);if(void 0===u||\"[\"===u&&q+2===k){h=g;e=void 0===u?new Xf(n,e,f):new Yf(n,e,f);h.seq.push(e);h.map[e.id]=e;break}else u=g.map[n],void 0===u&&(u=new Se(n),n=g,g=u,n.seq.push(g),n.map[g.id]=g),g=u}}}function H(a,b,c){return void 0===b&&void 0===c?this.set(a):this.setRGB(a,b,c)}function od(a,b){this.min=void 0!==a?a:new D(Infinity,Infinity);this.max=void 0!==b?b:new D(-Infinity,-Infinity)}function Zf(a,b,c,\nd,e){var f,g,h,k,m,q,n,u,r,t,l,w,z,y,I,A;this.render=function(a,v,Da,na){if(0!==a.length){v=new p;var J=na.w/na.z,Ha=.5*na.z,pd=.5*na.w,la=16/na.w,S=new D(la*J,la),va=new p(1,1,0),N=new D(1,1),B=new od;B.min.set(na.x,na.y);B.max.set(na.x+(na.z-16),na.y+(na.w-16));if(void 0===y){var la=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),x=new Uint16Array([0,1,2,0,2,3]);l=b.createBuffer();w=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,l);b.bufferData(b.ARRAY_BUFFER,la,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,\nw);b.bufferData(b.ELEMENT_ARRAY_BUFFER,x,b.STATIC_DRAW);I=b.createTexture();A=b.createTexture();c.bindTexture(b.TEXTURE_2D,I);b.texImage2D(b.TEXTURE_2D,0,b.RGB,16,16,0,b.RGB,b.UNSIGNED_BYTE,null);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);c.bindTexture(b.TEXTURE_2D,A);b.texImage2D(b.TEXTURE_2D,0,\nb.RGBA,16,16,0,b.RGBA,b.UNSIGNED_BYTE,null);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);var la=z={vertexShader:\"uniform lowp int renderType;\\nuniform vec3 screenPosition;\\nuniform vec2 scale;\\nuniform float rotation;\\nuniform sampler2D occlusionMap;\\nattribute vec2 position;\\nattribute vec2 uv;\\nvarying vec2 vUV;\\nvarying float vVisibility;\\nvoid main() {\\n\\tvUV = uv;\\n\\tvec2 pos = position;\\n\\tif ( renderType == 2 ) {\\n\\t\\tvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\\n\\t\\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\\n\\t\\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\\n\\t\\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\\n\\t\\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\\n\\t\\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\\n\\t\\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\\n\\t\\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\\n\\t\\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\\n\\t\\tvVisibility =        visibility.r / 9.0;\\n\\t\\tvVisibility *= 1.0 - visibility.g / 9.0;\\n\\t\\tvVisibility *=       visibility.b / 9.0;\\n\\t\\tvVisibility *= 1.0 - visibility.a / 9.0;\\n\\t\\tpos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\\n\\t\\tpos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\\n\\t}\\n\\tgl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\\n}\",\nfragmentShader:\"uniform lowp int renderType;\\nuniform sampler2D map;\\nuniform float opacity;\\nuniform vec3 color;\\nvarying vec2 vUV;\\nvarying float vVisibility;\\nvoid main() {\\n\\tif ( renderType == 0 ) {\\n\\t\\tgl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\\n\\t} else if ( renderType == 1 ) {\\n\\t\\tgl_FragColor = texture2D( map, vUV );\\n\\t} else {\\n\\t\\tvec4 texture = texture2D( map, vUV );\\n\\t\\ttexture.a *= opacity * vVisibility;\\n\\t\\tgl_FragColor = texture;\\n\\t\\tgl_FragColor.rgb *= color;\\n\\t}\\n}\"},x=b.createProgram(),\nE=b.createShader(b.FRAGMENT_SHADER),V=b.createShader(b.VERTEX_SHADER),H=\"precision \"+e.precision+\" float;\\n\";b.shaderSource(E,H+la.fragmentShader);b.shaderSource(V,H+la.vertexShader);b.compileShader(E);b.compileShader(V);b.attachShader(x,E);b.attachShader(x,V);b.linkProgram(x);y=x;r=b.getAttribLocation(y,\"position\");t=b.getAttribLocation(y,\"uv\");f=b.getUniformLocation(y,\"renderType\");g=b.getUniformLocation(y,\"map\");h=b.getUniformLocation(y,\"occlusionMap\");k=b.getUniformLocation(y,\"opacity\");m=b.getUniformLocation(y,\n\"color\");q=b.getUniformLocation(y,\"scale\");n=b.getUniformLocation(y,\"rotation\");u=b.getUniformLocation(y,\"screenPosition\")}c.useProgram(y);c.initAttributes();c.enableAttribute(r);c.enableAttribute(t);c.disableUnusedAttributes();b.uniform1i(h,0);b.uniform1i(g,1);b.bindBuffer(b.ARRAY_BUFFER,l);b.vertexAttribPointer(r,2,b.FLOAT,!1,16,0);b.vertexAttribPointer(t,2,b.FLOAT,!1,16,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,w);c.disable(b.CULL_FACE);c.buffers.depth.setMask(!1);x=0;for(E=a.length;x<E;x++)if(la=\n16/na.w,S.set(la*J,la),V=a[x],v.set(V.matrixWorld.elements[12],V.matrixWorld.elements[13],V.matrixWorld.elements[14]),v.applyMatrix4(Da.matrixWorldInverse),v.applyMatrix4(Da.projectionMatrix),va.copy(v),N.x=na.x+va.x*Ha+Ha-8,N.y=na.y+va.y*pd+pd-8,!0===B.containsPoint(N)){c.activeTexture(b.TEXTURE0);c.bindTexture(b.TEXTURE_2D,null);c.activeTexture(b.TEXTURE1);c.bindTexture(b.TEXTURE_2D,I);b.copyTexImage2D(b.TEXTURE_2D,0,b.RGB,N.x,N.y,16,16,0);b.uniform1i(f,0);b.uniform2f(q,S.x,S.y);b.uniform3f(u,va.x,\nva.y,va.z);c.disable(b.BLEND);c.enable(b.DEPTH_TEST);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);c.activeTexture(b.TEXTURE0);c.bindTexture(b.TEXTURE_2D,A);b.copyTexImage2D(b.TEXTURE_2D,0,b.RGBA,N.x,N.y,16,16,0);b.uniform1i(f,1);c.disable(b.DEPTH_TEST);c.activeTexture(b.TEXTURE1);c.bindTexture(b.TEXTURE_2D,I);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);V.positionScreen.copy(va);V.customUpdateCallback?V.customUpdateCallback(V):V.updateLensFlares();b.uniform1i(f,2);c.enable(b.BLEND);for(var H=\n0,K=V.lensFlares.length;H<K;H++){var C=V.lensFlares[H];.001<C.opacity&&.001<C.scale&&(va.x=C.x,va.y=C.y,va.z=C.z,la=C.size*C.scale/na.w,S.x=la*J,S.y=la,b.uniform3f(u,va.x,va.y,va.z),b.uniform2f(q,S.x,S.y),b.uniform1f(n,C.rotation),b.uniform1f(k,C.opacity),b.uniform3f(m,C.color.r,C.color.g,C.color.b),c.setBlending(C.blending,C.blendEquation,C.blendSrc,C.blendDst),d.setTexture2D(C.texture,1),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0))}}c.enable(b.CULL_FACE);c.enable(b.DEPTH_TEST);c.buffers.depth.setMask(!0);\nc.reset()}}}function tc(a,b,c,d,e,f,g,h,k){U.call(this,a,b,c,d,e,f,g,h,k);this.needsUpdate=!0}function $f(a,b,c,d,e){var f,g,h,k,m,q,n,u,r,t,l,w,z,y,I,A,J;function Ha(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:b.id-a.id}var Da,na,oa,Te,pd=new p,la=new ha,S=new p;this.render=function(v,p,D){if(0!==v.length){if(void 0===oa){var x=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),N=new Uint16Array([0,1,2,0,2,3]);Da=b.createBuffer();na=b.createBuffer();\nb.bindBuffer(b.ARRAY_BUFFER,Da);b.bufferData(b.ARRAY_BUFFER,x,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,na);b.bufferData(b.ELEMENT_ARRAY_BUFFER,N,b.STATIC_DRAW);x=b.createProgram();N=b.createShader(b.VERTEX_SHADER);var B=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(N,[\"precision \"+e.precision+\" float;\",\"#define SHADER_NAME SpriteMaterial\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform float rotation;\\nuniform vec2 scale;\\nuniform vec2 uvOffset;\\nuniform vec2 uvScale;\\nattribute vec2 position;\\nattribute vec2 uv;\\nvarying vec2 vUV;\\nvarying float fogDepth;\\nvoid main() {\\n\\tvUV = uvOffset + uv * uvScale;\\n\\tvec2 alignedPosition = position * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tvec4 mvPosition;\\n\\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\tfogDepth = - mvPosition.z;\\n}\"].join(\"\\n\"));\nb.shaderSource(B,[\"precision \"+e.precision+\" float;\",\"#define SHADER_NAME SpriteMaterial\\nuniform vec3 color;\\nuniform sampler2D map;\\nuniform float opacity;\\nuniform int fogType;\\nuniform vec3 fogColor;\\nuniform float fogDensity;\\nuniform float fogNear;\\nuniform float fogFar;\\nuniform float alphaTest;\\nvarying vec2 vUV;\\nvarying float fogDepth;\\nvoid main() {\\n\\tvec4 texture = texture2D( map, vUV );\\n\\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\\n\\tif ( gl_FragColor.a < alphaTest ) discard;\\n\\tif ( fogType > 0 ) {\\n\\t\\tfloat fogFactor = 0.0;\\n\\t\\tif ( fogType == 1 ) {\\n\\t\\t\\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t\\t} else {\\n\\t\\t\\tconst float LOG2 = 1.442695;\\n\\t\\t\\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );\\n\\t\\t\\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\\n\\t\\t}\\n\\t\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n\\t}\\n}\"].join(\"\\n\"));\nb.compileShader(N);b.compileShader(B);b.attachShader(x,N);b.attachShader(x,B);b.linkProgram(x);oa=x;A=b.getAttribLocation(oa,\"position\");J=b.getAttribLocation(oa,\"uv\");f=b.getUniformLocation(oa,\"uvOffset\");g=b.getUniformLocation(oa,\"uvScale\");h=b.getUniformLocation(oa,\"rotation\");k=b.getUniformLocation(oa,\"scale\");m=b.getUniformLocation(oa,\"color\");q=b.getUniformLocation(oa,\"map\");n=b.getUniformLocation(oa,\"opacity\");u=b.getUniformLocation(oa,\"modelViewMatrix\");r=b.getUniformLocation(oa,\"projectionMatrix\");\nt=b.getUniformLocation(oa,\"fogType\");l=b.getUniformLocation(oa,\"fogDensity\");w=b.getUniformLocation(oa,\"fogNear\");z=b.getUniformLocation(oa,\"fogFar\");y=b.getUniformLocation(oa,\"fogColor\");b.getUniformLocation(oa,\"fogDepth\");I=b.getUniformLocation(oa,\"alphaTest\");x=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\");x.width=8;x.height=8;N=x.getContext(\"2d\");N.fillStyle=\"white\";N.fillRect(0,0,8,8);Te=new tc(x)}c.useProgram(oa);c.initAttributes();c.enableAttribute(A);c.enableAttribute(J);\nc.disableUnusedAttributes();c.disable(b.CULL_FACE);c.enable(b.BLEND);b.bindBuffer(b.ARRAY_BUFFER,Da);b.vertexAttribPointer(A,2,b.FLOAT,!1,16,0);b.vertexAttribPointer(J,2,b.FLOAT,!1,16,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,na);b.uniformMatrix4fv(r,!1,D.projectionMatrix.elements);c.activeTexture(b.TEXTURE0);b.uniform1i(q,0);N=x=0;(B=p.fog)?(b.uniform3f(y,B.color.r,B.color.g,B.color.b),B.isFog?(b.uniform1f(w,B.near),b.uniform1f(z,B.far),b.uniform1i(t,1),N=x=1):B.isFogExp2&&(b.uniform1f(l,B.density),\nb.uniform1i(t,2),N=x=2)):(b.uniform1i(t,0),N=x=0);for(var C=0,E=v.length;C<E;C++)B=v[C],B.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,B.matrixWorld),B.z=-B.modelViewMatrix.elements[14];v.sort(Ha);for(var va=[],C=0,E=v.length;C<E;C++){B=v[C];var G=B.material;if(!1!==G.visible){B.onBeforeRender(a,p,D,void 0,G,void 0);b.uniform1f(I,G.alphaTest);b.uniformMatrix4fv(u,!1,B.modelViewMatrix.elements);B.matrixWorld.decompose(pd,la,S);va[0]=S.x;va[1]=S.y;var qd=0;p.fog&&G.fog&&(qd=N);x!==qd&&(b.uniform1i(t,\nqd),x=qd);null!==G.map?(b.uniform2f(f,G.map.offset.x,G.map.offset.y),b.uniform2f(g,G.map.repeat.x,G.map.repeat.y)):(b.uniform2f(f,0,0),b.uniform2f(g,1,1));b.uniform1f(n,G.opacity);b.uniform3f(m,G.color.r,G.color.g,G.color.b);b.uniform1f(h,G.rotation);b.uniform2fv(k,va);c.setBlending(G.blending,G.blendEquation,G.blendSrc,G.blendDst,G.blendEquationAlpha,G.blendSrcAlpha,G.blendDstAlpha,G.premultipliedAlpha);c.buffers.depth.setTest(G.depthTest);c.buffers.depth.setMask(G.depthWrite);c.buffers.color.setMask(G.colorWrite);\nd.setTexture2D(G.map||Te,0);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);B.onAfterRender(a,p,D,void 0,G,void 0)}}c.enable(b.CULL_FACE);c.reset()}}}function P(){Object.defineProperty(this,\"id\",{value:ag++});this.uuid=Q.generateUUID();this.name=\"\";this.type=\"Material\";this.lights=this.fog=!0;this.blending=1;this.side=0;this.flatShading=!1;this.vertexColors=0;this.opacity=1;this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=\nnull;this.depthFunc=3;this.depthWrite=this.depthTest=!0;this.clippingPlanes=null;this.clipShadows=this.clipIntersection=!1;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.dithering=!1;this.alphaTest=0;this.premultipliedAlpha=!1;this.overdraw=0;this.visible=!0;this.userData={};this.needsUpdate=!0}function eb(a){P.call(this);this.type=\"MeshDepthMaterial\";this.depthPacking=3200;this.morphTargets=this.skinning=!1;this.displacementMap=\nthis.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.setValues(a)}function fb(a){P.call(this);this.type=\"MeshDistanceMaterial\";this.referencePosition=new p;this.nearDistance=1;this.farDistance=1E3;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.lights=this.fog=!1;this.setValues(a)}function Xa(a,b){this.min=void 0!==\na?a:new p(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new p(-Infinity,-Infinity,-Infinity)}function Ia(a,b){this.center=void 0!==a?a:new p;this.radius=void 0!==b?b:0}function Ea(a,b){this.normal=void 0!==a?a:new p(1,0,0);this.constant=void 0!==b?b:0}function rd(a,b,c,d,e,f){this.planes=[void 0!==a?a:new Ea,void 0!==b?b:new Ea,void 0!==c?c:new Ea,void 0!==d?d:new Ea,void 0!==e?e:new Ea,void 0!==f?f:new Ea]}function Ue(a,b,c){function d(b,c,d,e,f,g){var h=b.geometry;var k=n;var m=b.customDepthMaterial;\nd&&(k=u,m=b.customDistanceMaterial);m?k=m:(m=!1,c.morphTargets&&(h&&h.isBufferGeometry?m=h.morphAttributes&&h.morphAttributes.position&&0<h.morphAttributes.position.length:h&&h.isGeometry&&(m=h.morphTargets&&0<h.morphTargets.length)),b.isSkinnedMesh&&!1===c.skinning&&console.warn(\"THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:\",b),b=b.isSkinnedMesh&&c.skinning,h=0,m&&(h|=1),b&&(h|=2),k=k[h]);a.localClippingEnabled&&!0===c.clipShadows&&0!==c.clippingPlanes.length&&(h=\nk.uuid,m=c.uuid,b=r[h],void 0===b&&(b={},r[h]=b),h=b[m],void 0===h&&(h=k.clone(),b[m]=h),k=h);k.visible=c.visible;k.wireframe=c.wireframe;m=c.side;A.renderSingleSided&&2==m&&(m=0);A.renderReverseSided&&(0===m?m=1:1===m&&(m=0));k.side=m;k.clipShadows=c.clipShadows;k.clippingPlanes=c.clippingPlanes;k.clipIntersection=c.clipIntersection;k.wireframeLinewidth=c.wireframeLinewidth;k.linewidth=c.linewidth;d&&k.isMeshDistanceMaterial&&(k.referencePosition.copy(e),k.nearDistance=f,k.farDistance=g);return k}\nfunction e(c,h,g,k){var m;if(!1!==c.visible){if(c.layers.test(h.layers)&&(c.isMesh||c.isLine||c.isPoints)&&c.castShadow&&(!c.frustumCulled||f.intersectsObject(c))){c.modelViewMatrix.multiplyMatrices(g.matrixWorldInverse,c.matrixWorld);var n=b.update(c),u=c.material;if(Array.isArray(u))for(var r=n.groups,t=0,l=r.length;t<l;t++){var I=r[t];(m=u[I.materialIndex])&&m.visible&&(m=d(c,m,k,q,g.near,g.far),a.renderBufferDirect(g,null,n,m,c,I))}else u.visible&&(m=d(c,u,k,q,g.near,g.far),a.renderBufferDirect(g,\nnull,n,m,c,null))}c=c.children;n=0;for(u=c.length;n<u;n++)e(c[n],h,g,k)}}var f=new rd,g=new O,h=new D,k=new D(c,c),m=new p,q=new p,n=Array(4),u=Array(4),r={},t=[new p(1,0,0),new p(-1,0,0),new p(0,0,1),new p(0,0,-1),new p(0,1,0),new p(0,-1,0)],l=[new p(0,1,0),new p(0,1,0),new p(0,1,0),new p(0,1,0),new p(0,0,1),new p(0,0,-1)],w=[new aa,new aa,new aa,new aa,new aa,new aa];for(c=0;4!==c;++c){var z=0!==(c&1),y=0!==(c&2),I=new eb({depthPacking:3201,morphTargets:z,skinning:y});n[c]=I;z=new fb({morphTargets:z,\nskinning:y});u[c]=z}var A=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=1;this.renderSingleSided=this.renderReverseSided=!0;this.render=function(b,c,d){if(!1!==A.enabled&&(!1!==A.autoUpdate||!1!==A.needsUpdate)&&0!==b.length){var n=a.state;n.disable(a.context.BLEND);n.buffers.color.setClear(1,1,1,1);n.buffers.depth.setTest(!0);n.setScissorTest(!1);for(var u,r=0,I=b.length;r<I;r++){var v=b[r];u=v.shadow;var p=v&&v.isPointLight;if(void 0===u)console.warn(\"THREE.WebGLShadowMap:\",\nv,\"has no shadow.\");else{var z=u.camera;h.copy(u.mapSize);h.min(k);if(p){var y=h.x,J=h.y;w[0].set(2*y,J,y,J);w[1].set(0,J,y,J);w[2].set(3*y,J,y,J);w[3].set(y,J,y,J);w[4].set(3*y,0,y,J);w[5].set(y,0,y,J);h.x*=4;h.y*=2}null===u.map&&(u.map=new kb(h.x,h.y,{minFilter:1003,magFilter:1003,format:1023}),u.map.texture.name=v.name+\".shadowMap\",z.updateProjectionMatrix());u.isSpotLightShadow&&u.update(v);y=u.map;J=u.matrix;q.setFromMatrixPosition(v.matrixWorld);z.position.copy(q);p?(u=6,J.makeTranslation(-q.x,\n-q.y,-q.z)):(u=1,m.setFromMatrixPosition(v.target.matrixWorld),z.lookAt(m),z.updateMatrixWorld(),J.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),J.multiply(z.projectionMatrix),J.multiply(z.matrixWorldInverse));a.setRenderTarget(y);a.clear();for(v=0;v<u;v++)p&&(m.copy(z.position),m.add(t[v]),z.up.copy(l[v]),z.lookAt(m),z.updateMatrixWorld(),n.viewport(w[v])),g.multiplyMatrices(z.projectionMatrix,z.matrixWorldInverse),f.setFromMatrix(g),e(c,d,z,p)}}A.needsUpdate=!1}}}function bg(a){var b={};return{get:function(a){a.isInterleavedBufferAttribute&&\n(a=a.data);return b[a.uuid]},remove:function(c){c.isInterleavedBufferAttribute&&(c=c.data);var d=b[c.uuid];d&&(a.deleteBuffer(d.buffer),delete b[c.uuid])},update:function(c,d){c.isInterleavedBufferAttribute&&(c=c.data);var e=b[c.uuid];if(void 0===e){var e=c.uuid,f=c.array,g=c.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW,h=a.createBuffer();a.bindBuffer(d,h);a.bufferData(d,f,g);c.onUploadCallback();d=a.FLOAT;f instanceof Float32Array?d=a.FLOAT:f instanceof Float64Array?console.warn(\"THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.\"):\nf instanceof Uint16Array?d=a.UNSIGNED_SHORT:f instanceof Int16Array?d=a.SHORT:f instanceof Uint32Array?d=a.UNSIGNED_INT:f instanceof Int32Array?d=a.INT:f instanceof Int8Array?d=a.BYTE:f instanceof Uint8Array&&(d=a.UNSIGNED_BYTE);b[e]={buffer:h,type:d,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version}}else e.version<c.version&&(f=c,h=f.array,g=f.updateRange,a.bindBuffer(d,e.buffer),!1===f.dynamic?a.bufferData(d,h,a.STATIC_DRAW):-1===g.count?a.bufferSubData(d,0,h):0===g.count?console.error(\"THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.\"):\n(a.bufferSubData(d,g.offset*h.BYTES_PER_ELEMENT,h.subarray(g.offset,g.offset+g.count)),g.count=-1),e.version=c.version)}}}function gb(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||gb.DefaultOrder}function Wd(){this.mask=1}function x(){Object.defineProperty(this,\"id\",{value:cg++});this.uuid=Q.generateUUID();this.name=\"\";this.type=\"Object3D\";this.parent=null;this.children=[];this.up=x.DefaultUp.clone();var a=new p,b=new gb,c=new ha,d=new p(1,1,1);b.onChange(function(){c.setFromEuler(b,\n!1)});c.onChange(function(){b.setFromQuaternion(c,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:b},quaternion:{enumerable:!0,value:c},scale:{enumerable:!0,value:d},modelViewMatrix:{value:new O},normalMatrix:{value:new ma}});this.matrix=new O;this.matrixWorld=new O;this.matrixAutoUpdate=x.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new Wd;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=\n0;this.userData={}}function Ta(){x.call(this);this.type=\"Camera\";this.matrixWorldInverse=new O;this.projectionMatrix=new O}function Lb(a,b,c,d,e,f){Ta.call(this);this.type=\"OrthographicCamera\";this.zoom=1;this.view=null;this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()}function Ya(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.normal=d&&d.isVector3?d:new p;this.vertexNormals=Array.isArray(d)?d:[];this.color=e&&e.isColor?\ne:new H;this.vertexColors=Array.isArray(e)?e:[];this.materialIndex=void 0!==f?f:0}function L(){Object.defineProperty(this,\"id\",{value:dg+=2});this.uuid=Q.generateUUID();this.name=\"\";this.type=\"Geometry\";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=\nthis.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function M(a,b,c){if(Array.isArray(a))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");this.uuid=Q.generateUUID();this.name=\"\";this.array=a;this.itemSize=b;this.count=void 0!==a?a.length/b:0;this.normalized=!0===c;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}function uc(a,b,c){M.call(this,new Int8Array(a),b,c)}function vc(a,b,c){M.call(this,new Uint8Array(a),\nb,c)}function wc(a,b,c){M.call(this,new Uint8ClampedArray(a),b,c)}function xc(a,b,c){M.call(this,new Int16Array(a),b,c)}function ob(a,b,c){M.call(this,new Uint16Array(a),b,c)}function yc(a,b,c){M.call(this,new Int32Array(a),b,c)}function pb(a,b,c){M.call(this,new Uint32Array(a),b,c)}function B(a,b,c){M.call(this,new Float32Array(a),b,c)}function zc(a,b,c){M.call(this,new Float64Array(a),b,c)}function Ve(){this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=\n[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function Xd(a){if(0===a.length)return-Infinity;for(var b=a[0],c=1,d=a.length;c<d;++c)a[c]>b&&(b=a[c]);return b}function E(){Object.defineProperty(this,\"id\",{value:eg+=2});this.uuid=Q.generateUUID();this.name=\"\";this.type=\"BufferGeometry\";this.index=null;this.attributes={};this.morphAttributes=\n{};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity}}function Mb(a,b,c,d,e,f){L.call(this);this.type=\"BoxGeometry\";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};this.fromBufferGeometry(new qb(a,b,c,d,e,f));this.mergeVertices()}function qb(a,b,c,d,e,f){function g(a,b,c,d,e,f,g,l,Ha,Da,na){var t=f/Ha,v=g/Da,I=f/2,A=g/2,w=l/2;g=Ha+1;var z=Da+1,y=f=0,J,x,B=new p;for(x=0;x<z;x++){var D=x*v-A;for(J=0;J<g;J++)B[a]=\n(J*t-I)*d,B[b]=D*e,B[c]=w,m.push(B.x,B.y,B.z),B[a]=0,B[b]=0,B[c]=0<l?1:-1,q.push(B.x,B.y,B.z),n.push(J/Ha),n.push(1-x/Da),f+=1}for(x=0;x<Da;x++)for(J=0;J<Ha;J++)a=u+J+g*(x+1),b=u+(J+1)+g*(x+1),c=u+(J+1)+g*x,k.push(u+J+g*x,a,c),k.push(a,b,c),y+=6;h.addGroup(r,y,na);r+=y;u+=f}E.call(this);this.type=\"BoxBufferGeometry\";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};var h=this;a=a||1;b=b||1;c=c||1;d=Math.floor(d)||1;e=Math.floor(e)||1;f=Math.floor(f)||1;var k=\n[],m=[],q=[],n=[],u=0,r=0;g(\"z\",\"y\",\"x\",-1,-1,c,b,a,f,e,0);g(\"z\",\"y\",\"x\",1,-1,c,b,-a,f,e,1);g(\"x\",\"z\",\"y\",1,1,a,c,b,d,f,2);g(\"x\",\"z\",\"y\",1,-1,a,c,-b,d,f,3);g(\"x\",\"y\",\"z\",1,-1,a,b,c,d,e,4);g(\"x\",\"y\",\"z\",-1,-1,a,b,-c,d,e,5);this.setIndex(k);this.addAttribute(\"position\",new B(m,3));this.addAttribute(\"normal\",new B(q,3));this.addAttribute(\"uv\",new B(n,2))}function Ac(a,b,c,d){L.call(this);this.type=\"PlaneGeometry\";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};this.fromBufferGeometry(new rb(a,\nb,c,d));this.mergeVertices()}function rb(a,b,c,d){E.call(this);this.type=\"PlaneBufferGeometry\";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};a=a||1;b=b||1;var e=a/2,f=b/2;c=Math.floor(c)||1;d=Math.floor(d)||1;var g=c+1,h=d+1,k=a/c,m=b/d,q=[],n=[],u=[],r=[];for(a=0;a<h;a++){var t=a*m-f;for(b=0;b<g;b++)n.push(b*k-e,-t,0),u.push(0,0,1),r.push(b/c),r.push(1-a/d)}for(a=0;a<d;a++)for(b=0;b<c;b++)e=b+g*(a+1),f=b+1+g*(a+1),h=b+1+g*a,q.push(b+g*a,e,h),q.push(e,f,h);this.setIndex(q);this.addAttribute(\"position\",\nnew B(n,3));this.addAttribute(\"normal\",new B(u,3));this.addAttribute(\"uv\",new B(r,2))}function Aa(a){P.call(this);this.type=\"MeshBasicMaterial\";this.color=new H(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=\"round\";this.lights=this.morphTargets=this.skinning=\n!1;this.setValues(a)}function Fa(a){P.call(this);this.type=\"ShaderMaterial\";this.defines={};this.uniforms={};this.vertexShader=\"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\";this.fragmentShader=\"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\";this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,\ndrawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;void 0!==a&&(void 0!==a.attributes&&console.error(\"THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.\"),this.setValues(a))}function sb(a,b){this.origin=void 0!==a?a:new p;this.direction=void 0!==b?b:new p}function Nb(a,b){this.start=void 0!==a?a:new p;this.end=void 0!==b?b:new p}function Za(a,b,c){this.a=void 0!==a?a:new p;this.b=void 0!==\nb?b:new p;this.c=void 0!==c?c:new p}function ra(a,b){x.call(this);this.type=\"Mesh\";this.geometry=void 0!==a?a:new E;this.material=void 0!==b?b:new Aa({color:16777215*Math.random()});this.drawMode=0;this.updateMorphTargets()}function fg(a,b,c,d){function e(a,c){b.buffers.color.setClear(a.r,a.g,a.b,c,d)}var f=new H(0),g=0,h,k,m;return{getClearColor:function(){return f},setClearColor:function(a,b){f.set(a);g=void 0!==b?b:1;e(f,g)},getClearAlpha:function(){return g},setClearAlpha:function(a){g=a;e(f,\ng)},render:function(b,d,u,r){d=d.background;null===d?e(f,g):d&&d.isColor&&(e(d,1),r=!0);(a.autoClear||r)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil);d&&d.isCubeTexture?(void 0===m&&(m=new ra(new qb(1,1,1),new Fa({uniforms:tb.cube.uniforms,vertexShader:tb.cube.vertexShader,fragmentShader:tb.cube.fragmentShader,side:1,depthTest:!0,depthWrite:!1,fog:!1})),m.geometry.removeAttribute(\"normal\"),m.geometry.removeAttribute(\"uv\"),m.onBeforeRender=function(a,b,c){this.matrixWorld.copyPosition(c.matrixWorld)},\nc.update(m.geometry)),m.material.uniforms.tCube.value=d,b.push(m,m.geometry,m.material,0,null)):d&&d.isTexture&&(void 0===h&&(h=new Lb(-1,1,1,-1,0,1),k=new ra(new rb(2,2),new Aa({depthTest:!1,depthWrite:!1,fog:!1})),c.update(k.geometry)),k.material.map=d,a.renderBufferDirect(h,null,k.geometry,k.material,k,null))}}}function gg(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.program&&b.program&&a.program!==b.program?a.program.id-b.program.id:a.material.id!==b.material.id?a.material.id-\nb.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function hg(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function ig(){var a=[],b=0,c=[],d=[];return{opaque:c,transparent:d,init:function(){b=0;c.length=0;d.length=0},push:function(e,f,g,h,k){var m=a[b];void 0===m?(m={id:e.id,object:e,geometry:f,material:g,program:g.program,renderOrder:e.renderOrder,z:h,group:k},a[b]=m):(m.id=e.id,m.object=e,m.geometry=f,m.material=g,m.program=g.program,m.renderOrder=e.renderOrder,\nm.z=h,m.group=k);(!0===g.transparent?d:c).push(m);b++},sort:function(){1<c.length&&c.sort(gg);1<d.length&&d.sort(hg)}}}function jg(){var a={};return{get:function(b,c){b=b.id+\",\"+c.id;c=a[b];void 0===c&&(c=new ig,a[b]=c);return c},dispose:function(){a={}}}}function kg(a,b){return Math.abs(b[1])-Math.abs(a[1])}function lg(a){var b={},c=new Float32Array(8);return{update:function(d,e,f,g){var h=d.morphTargetInfluences,k=h.length;d=b[e.id];if(void 0===d){d=[];for(var m=0;m<k;m++)d[m]=[m,0];b[e.id]=d}var q=\nf.morphTargets&&e.morphAttributes.position;f=f.morphNormals&&e.morphAttributes.normal;for(m=0;m<k;m++){var n=d[m];0!==n[1]&&(q&&e.removeAttribute(\"morphTarget\"+m),f&&e.removeAttribute(\"morphNormal\"+m))}for(m=0;m<k;m++)n=d[m],n[0]=m,n[1]=h[m];d.sort(kg);for(m=0;8>m;m++){if(n=d[m])if(h=n[0],n=n[1]){q&&e.addAttribute(\"morphTarget\"+m,q[h]);f&&e.addAttribute(\"morphNormal\"+m,f[h]);c[m]=n;continue}c[m]=0}g.getUniforms().setValue(a,\"morphTargetInfluences\",c)}}}function mg(a,b,c){var d,e,f;this.setMode=function(a){d=\na};this.setIndex=function(a){e=a.type;f=a.bytesPerElement};this.render=function(b,h){a.drawElements(d,h,e,b*f);c.calls++;c.vertices+=h;d===a.TRIANGLES?c.faces+=h/3:d===a.POINTS&&(c.points+=h)};this.renderInstances=function(g,h,k){var m=b.get(\"ANGLE_instanced_arrays\");null===m?console.error(\"THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\"):(m.drawElementsInstancedANGLE(d,k,e,h*f,g.maxInstancedCount),c.calls++,c.vertices+=\nk*g.maxInstancedCount,d===a.TRIANGLES?c.faces+=g.maxInstancedCount*k/3:d===a.POINTS&&(c.points+=g.maxInstancedCount*k))}}function ng(a,b,c){var d;this.setMode=function(a){d=a};this.render=function(b,f){a.drawArrays(d,b,f);c.calls++;c.vertices+=f;d===a.TRIANGLES?c.faces+=f/3:d===a.POINTS&&(c.points+=f)};this.renderInstances=function(e,f,g){var h=b.get(\"ANGLE_instanced_arrays\");if(null===h)console.error(\"THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");\nelse{var k=e.attributes.position;k.isInterleavedBufferAttribute?(g=k.data.count,h.drawArraysInstancedANGLE(d,0,g,e.maxInstancedCount)):h.drawArraysInstancedANGLE(d,f,g,e.maxInstancedCount);c.calls++;c.vertices+=g*e.maxInstancedCount;d===a.TRIANGLES?c.faces+=e.maxInstancedCount*g/3:d===a.POINTS&&(c.points+=e.maxInstancedCount*g)}}}function og(a,b,c){function d(a){a=a.target;var h=e[a.id];null!==h.index&&b.remove(h.index);for(var g in h.attributes)b.remove(h.attributes[g]);a.removeEventListener(\"dispose\",\nd);delete e[a.id];if(g=f[a.id])b.remove(g),delete f[a.id];if(g=f[h.id])b.remove(g),delete f[h.id];c.geometries--}var e={},f={};return{get:function(a,b){var f=e[b.id];if(f)return f;b.addEventListener(\"dispose\",d);b.isBufferGeometry?f=b:b.isGeometry&&(void 0===b._bufferGeometry&&(b._bufferGeometry=(new E).setFromObject(a)),f=b._bufferGeometry);e[b.id]=f;c.geometries++;return f},update:function(c){var d=c.index,e=c.attributes;null!==d&&b.update(d,a.ELEMENT_ARRAY_BUFFER);for(var f in e)b.update(e[f],\na.ARRAY_BUFFER);c=c.morphAttributes;for(f in c)for(var d=c[f],e=0,g=d.length;e<g;e++)b.update(d[e],a.ARRAY_BUFFER)},getWireframeAttribute:function(c){var d=f[c.id];if(d)return d;d=[];var e=c.index;var g=c.attributes;if(null!==e){var q=e.array;for(var n=0,u=q.length;n<u;n+=3){var r=q[n+0];g=q[n+1];e=q[n+2];d.push(r,g,g,e,e,r)}}else for(q=g.position.array,n=0,u=q.length/3-1;n<u;n+=3)r=n+0,g=n+1,e=n+2,d.push(r,g,g,e,e,r);d=new (65535<Xd(d)?pb:ob)(d,1);b.update(d,a.ELEMENT_ARRAY_BUFFER);return f[c.id]=\nd}}}function pg(){var a={};return{get:function(b){if(void 0!==a[b.id])return a[b.id];switch(b.type){case \"DirectionalLight\":var c={direction:new p,color:new H,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new D};break;case \"SpotLight\":c={position:new p,direction:new p,color:new H,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new D};break;case \"PointLight\":c={position:new p,color:new H,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new D,\nshadowCameraNear:1,shadowCameraFar:1E3};break;case \"HemisphereLight\":c={direction:new p,skyColor:new H,groundColor:new H};break;case \"RectAreaLight\":c={color:new H,position:new p,halfWidth:new p,halfHeight:new p}}return a[b.id]=c}}}function qg(){var a=new pg,b={hash:\"\",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},c=new p,d=new O,e=new O;return{setup:function(f,\ng,h){for(var k,m=0,q=0,n=0,u=0,r=0,t=0,l=0,w=0,p=h.matrixWorldInverse,y=0,I=f.length;y<I;y++){var A=f[y];k=A.color;var J=A.intensity,Ha=A.distance,Da=A.shadow&&A.shadow.map?A.shadow.map.texture:null;if(A.isAmbientLight)m+=k.r*J,q+=k.g*J,n+=k.b*J;else if(A.isDirectionalLight){h=a.get(A);h.color.copy(A.color).multiplyScalar(A.intensity);h.direction.setFromMatrixPosition(A.matrixWorld);c.setFromMatrixPosition(A.target.matrixWorld);h.direction.sub(c);h.direction.transformDirection(p);if(h.shadow=A.castShadow)k=\nA.shadow,h.shadowBias=k.bias,h.shadowRadius=k.radius,h.shadowMapSize=k.mapSize;b.directionalShadowMap[u]=Da;b.directionalShadowMatrix[u]=A.shadow.matrix;b.directional[u]=h;u++}else if(A.isSpotLight){h=a.get(A);h.position.setFromMatrixPosition(A.matrixWorld);h.position.applyMatrix4(p);h.color.copy(k).multiplyScalar(J);h.distance=Ha;h.direction.setFromMatrixPosition(A.matrixWorld);c.setFromMatrixPosition(A.target.matrixWorld);h.direction.sub(c);h.direction.transformDirection(p);h.coneCos=Math.cos(A.angle);\nh.penumbraCos=Math.cos(A.angle*(1-A.penumbra));h.decay=0===A.distance?0:A.decay;if(h.shadow=A.castShadow)k=A.shadow,h.shadowBias=k.bias,h.shadowRadius=k.radius,h.shadowMapSize=k.mapSize;b.spotShadowMap[t]=Da;b.spotShadowMatrix[t]=A.shadow.matrix;b.spot[t]=h;t++}else if(A.isRectAreaLight)h=a.get(A),h.color.copy(k).multiplyScalar(J/(A.width*A.height)),h.position.setFromMatrixPosition(A.matrixWorld),h.position.applyMatrix4(p),e.identity(),d.copy(A.matrixWorld),d.premultiply(p),e.extractRotation(d),h.halfWidth.set(.5*\nA.width,0,0),h.halfHeight.set(0,.5*A.height,0),h.halfWidth.applyMatrix4(e),h.halfHeight.applyMatrix4(e),b.rectArea[l]=h,l++;else if(A.isPointLight){h=a.get(A);h.position.setFromMatrixPosition(A.matrixWorld);h.position.applyMatrix4(p);h.color.copy(A.color).multiplyScalar(A.intensity);h.distance=A.distance;h.decay=0===A.distance?0:A.decay;if(h.shadow=A.castShadow)k=A.shadow,h.shadowBias=k.bias,h.shadowRadius=k.radius,h.shadowMapSize=k.mapSize,h.shadowCameraNear=k.camera.near,h.shadowCameraFar=k.camera.far;\nb.pointShadowMap[r]=Da;b.pointShadowMatrix[r]=A.shadow.matrix;b.point[r]=h;r++}else A.isHemisphereLight&&(h=a.get(A),h.direction.setFromMatrixPosition(A.matrixWorld),h.direction.transformDirection(p),h.direction.normalize(),h.skyColor.copy(A.color).multiplyScalar(J),h.groundColor.copy(A.groundColor).multiplyScalar(J),b.hemi[w]=h,w++)}b.ambient[0]=m;b.ambient[1]=q;b.ambient[2]=n;b.directional.length=u;b.spot.length=t;b.rectArea.length=l;b.point.length=r;b.hemi.length=w;b.hash=u+\",\"+r+\",\"+t+\",\"+l+\",\"+\nw+\",\"+g.length},state:b}}function rg(a,b){var c={};return{update:function(d){var e=b.frame,f=d.geometry,g=a.get(d,f);c[g.id]!==e&&(f.isGeometry&&g.updateFromObject(d),a.update(g),c[g.id]=e);return g},clear:function(){c={}}}}function sg(a){a=a.split(\"\\n\");for(var b=0;b<a.length;b++)a[b]=b+1+\": \"+a[b];return a.join(\"\\n\")}function We(a,b,c){var d=a.createShader(b);a.shaderSource(d,c);a.compileShader(d);!1===a.getShaderParameter(d,a.COMPILE_STATUS)&&console.error(\"THREE.WebGLShader: Shader couldn't compile.\");\n\"\"!==a.getShaderInfoLog(d)&&console.warn(\"THREE.WebGLShader: gl.getShaderInfoLog()\",b===a.VERTEX_SHADER?\"vertex\":\"fragment\",a.getShaderInfoLog(d),sg(c));return d}function Xe(a){switch(a){case 3E3:return[\"Linear\",\"( value )\"];case 3001:return[\"sRGB\",\"( value )\"];case 3002:return[\"RGBE\",\"( value )\"];case 3004:return[\"RGBM\",\"( value, 7.0 )\"];case 3005:return[\"RGBM\",\"( value, 16.0 )\"];case 3006:return[\"RGBD\",\"( value, 256.0 )\"];case 3007:return[\"Gamma\",\"( value, float( GAMMA_FACTOR ) )\"];default:throw Error(\"unsupported encoding: \"+\na);}}function Yd(a,b){b=Xe(b);return\"vec4 \"+a+\"( vec4 value ) { return \"+b[0]+\"ToLinear\"+b[1]+\"; }\"}function tg(a,b){b=Xe(b);return\"vec4 \"+a+\"( vec4 value ) { return LinearTo\"+b[0]+b[1]+\"; }\"}function ug(a,b){switch(b){case 1:b=\"Linear\";break;case 2:b=\"Reinhard\";break;case 3:b=\"Uncharted2\";break;case 4:b=\"OptimizedCineon\";break;default:throw Error(\"unsupported toneMapping: \"+b);}return\"vec3 \"+a+\"( vec3 color ) { return \"+b+\"ToneMapping( color ); }\"}function vg(a,b,c){a=a||{};return[a.derivatives||\nb.envMapCubeUV||b.bumpMap||b.normalMap||b.flatShading?\"#extension GL_OES_standard_derivatives : enable\":\"\",(a.fragDepth||b.logarithmicDepthBuffer)&&c.get(\"EXT_frag_depth\")?\"#extension GL_EXT_frag_depth : enable\":\"\",a.drawBuffers&&c.get(\"WEBGL_draw_buffers\")?\"#extension GL_EXT_draw_buffers : require\":\"\",(a.shaderTextureLOD||b.envMap)&&c.get(\"EXT_shader_texture_lod\")?\"#extension GL_EXT_shader_texture_lod : enable\":\"\"].filter(Bc).join(\"\\n\")}function wg(a){var b=[],c;for(c in a){var d=a[c];!1!==d&&b.push(\"#define \"+\nc+\" \"+d)}return b.join(\"\\n\")}function Bc(a){return\"\"!==a}function Ye(a,b){return a.replace(/NUM_DIR_LIGHTS/g,b.numDirLights).replace(/NUM_SPOT_LIGHTS/g,b.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,b.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,b.numPointLights).replace(/NUM_HEMI_LIGHTS/g,b.numHemiLights)}function Zd(a){return a.replace(/^[ \\t]*#include +<([\\w\\d.]+)>/gm,function(a,c){a=R[c];if(void 0===a)throw Error(\"Can not resolve #include <\"+c+\">\");return Zd(a)})}function Ze(a){return a.replace(/for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g,\nfunction(a,c,d,e){a=\"\";for(c=parseInt(c);c<parseInt(d);c++)a+=e.replace(/\\[ i \\]/g,\"[ \"+c+\" ]\");return a})}function xg(a,b,c,d,e,f){var g=a.context,h=d.defines,k=e.vertexShader,m=e.fragmentShader,q=\"SHADOWMAP_TYPE_BASIC\";1===f.shadowMapType?q=\"SHADOWMAP_TYPE_PCF\":2===f.shadowMapType&&(q=\"SHADOWMAP_TYPE_PCF_SOFT\");var n=\"ENVMAP_TYPE_CUBE\",u=\"ENVMAP_MODE_REFLECTION\",r=\"ENVMAP_BLENDING_MULTIPLY\";if(f.envMap){switch(d.envMap.mapping){case 301:case 302:n=\"ENVMAP_TYPE_CUBE\";break;case 306:case 307:n=\"ENVMAP_TYPE_CUBE_UV\";\nbreak;case 303:case 304:n=\"ENVMAP_TYPE_EQUIREC\";break;case 305:n=\"ENVMAP_TYPE_SPHERE\"}switch(d.envMap.mapping){case 302:case 304:u=\"ENVMAP_MODE_REFRACTION\"}switch(d.combine){case 0:r=\"ENVMAP_BLENDING_MULTIPLY\";break;case 1:r=\"ENVMAP_BLENDING_MIX\";break;case 2:r=\"ENVMAP_BLENDING_ADD\"}}var t=0<a.gammaFactor?a.gammaFactor:1,l=vg(d.extensions,f,b),p=wg(h),z=g.createProgram();d.isRawShaderMaterial?(h=[p].filter(Bc).join(\"\\n\"),0<h.length&&(h+=\"\\n\"),b=[l,p].filter(Bc).join(\"\\n\"),0<b.length&&(b+=\"\\n\")):(h=\n[\"precision \"+f.precision+\" float;\",\"precision \"+f.precision+\" int;\",\"#define SHADER_NAME \"+e.name,p,f.supportsVertexTextures?\"#define VERTEX_TEXTURES\":\"\",\"#define GAMMA_FACTOR \"+t,\"#define MAX_BONES \"+f.maxBones,f.useFog&&f.fog?\"#define USE_FOG\":\"\",f.useFog&&f.fogExp?\"#define FOG_EXP2\":\"\",f.map?\"#define USE_MAP\":\"\",f.envMap?\"#define USE_ENVMAP\":\"\",f.envMap?\"#define \"+u:\"\",f.lightMap?\"#define USE_LIGHTMAP\":\"\",f.aoMap?\"#define USE_AOMAP\":\"\",f.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",f.bumpMap?\"#define USE_BUMPMAP\":\n\"\",f.normalMap?\"#define USE_NORMALMAP\":\"\",f.displacementMap&&f.supportsVertexTextures?\"#define USE_DISPLACEMENTMAP\":\"\",f.specularMap?\"#define USE_SPECULARMAP\":\"\",f.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",f.metalnessMap?\"#define USE_METALNESSMAP\":\"\",f.alphaMap?\"#define USE_ALPHAMAP\":\"\",f.vertexColors?\"#define USE_COLOR\":\"\",f.flatShading?\"#define FLAT_SHADED\":\"\",f.skinning?\"#define USE_SKINNING\":\"\",f.useVertexTexture?\"#define BONE_TEXTURE\":\"\",f.morphTargets?\"#define USE_MORPHTARGETS\":\"\",f.morphNormals&&\n!1===f.flatShading?\"#define USE_MORPHNORMALS\":\"\",f.doubleSided?\"#define DOUBLE_SIDED\":\"\",f.flipSided?\"#define FLIP_SIDED\":\"\",\"#define NUM_CLIPPING_PLANES \"+f.numClippingPlanes,f.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",f.shadowMapEnabled?\"#define \"+q:\"\",f.sizeAttenuation?\"#define USE_SIZEATTENUATION\":\"\",f.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",f.logarithmicDepthBuffer&&b.get(\"EXT_frag_depth\")?\"#define USE_LOGDEPTHBUF_EXT\":\"\",\"uniform mat4 modelMatrix;\",\"uniform mat4 modelViewMatrix;\",\n\"uniform mat4 projectionMatrix;\",\"uniform mat4 viewMatrix;\",\"uniform mat3 normalMatrix;\",\"uniform vec3 cameraPosition;\",\"attribute vec3 position;\",\"attribute vec3 normal;\",\"attribute vec2 uv;\",\"#ifdef USE_COLOR\",\"\\tattribute vec3 color;\",\"#endif\",\"#ifdef USE_MORPHTARGETS\",\"\\tattribute vec3 morphTarget0;\",\"\\tattribute vec3 morphTarget1;\",\"\\tattribute vec3 morphTarget2;\",\"\\tattribute vec3 morphTarget3;\",\"\\t#ifdef USE_MORPHNORMALS\",\"\\t\\tattribute vec3 morphNormal0;\",\"\\t\\tattribute vec3 morphNormal1;\",\n\"\\t\\tattribute vec3 morphNormal2;\",\"\\t\\tattribute vec3 morphNormal3;\",\"\\t#else\",\"\\t\\tattribute vec3 morphTarget4;\",\"\\t\\tattribute vec3 morphTarget5;\",\"\\t\\tattribute vec3 morphTarget6;\",\"\\t\\tattribute vec3 morphTarget7;\",\"\\t#endif\",\"#endif\",\"#ifdef USE_SKINNING\",\"\\tattribute vec4 skinIndex;\",\"\\tattribute vec4 skinWeight;\",\"#endif\",\"\\n\"].filter(Bc).join(\"\\n\"),b=[l,\"precision \"+f.precision+\" float;\",\"precision \"+f.precision+\" int;\",\"#define SHADER_NAME \"+e.name,p,f.alphaTest?\"#define ALPHATEST \"+f.alphaTest:\n\"\",\"#define GAMMA_FACTOR \"+t,f.useFog&&f.fog?\"#define USE_FOG\":\"\",f.useFog&&f.fogExp?\"#define FOG_EXP2\":\"\",f.map?\"#define USE_MAP\":\"\",f.envMap?\"#define USE_ENVMAP\":\"\",f.envMap?\"#define \"+n:\"\",f.envMap?\"#define \"+u:\"\",f.envMap?\"#define \"+r:\"\",f.lightMap?\"#define USE_LIGHTMAP\":\"\",f.aoMap?\"#define USE_AOMAP\":\"\",f.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",f.bumpMap?\"#define USE_BUMPMAP\":\"\",f.normalMap?\"#define USE_NORMALMAP\":\"\",f.specularMap?\"#define USE_SPECULARMAP\":\"\",f.roughnessMap?\"#define USE_ROUGHNESSMAP\":\n\"\",f.metalnessMap?\"#define USE_METALNESSMAP\":\"\",f.alphaMap?\"#define USE_ALPHAMAP\":\"\",f.vertexColors?\"#define USE_COLOR\":\"\",f.gradientMap?\"#define USE_GRADIENTMAP\":\"\",f.flatShading?\"#define FLAT_SHADED\":\"\",f.doubleSided?\"#define DOUBLE_SIDED\":\"\",f.flipSided?\"#define FLIP_SIDED\":\"\",\"#define NUM_CLIPPING_PLANES \"+f.numClippingPlanes,\"#define UNION_CLIPPING_PLANES \"+(f.numClippingPlanes-f.numClipIntersection),f.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",f.shadowMapEnabled?\"#define \"+q:\"\",f.premultipliedAlpha?\n\"#define PREMULTIPLIED_ALPHA\":\"\",f.physicallyCorrectLights?\"#define PHYSICALLY_CORRECT_LIGHTS\":\"\",f.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",f.logarithmicDepthBuffer&&b.get(\"EXT_frag_depth\")?\"#define USE_LOGDEPTHBUF_EXT\":\"\",f.envMap&&b.get(\"EXT_shader_texture_lod\")?\"#define TEXTURE_LOD_EXT\":\"\",\"uniform mat4 viewMatrix;\",\"uniform vec3 cameraPosition;\",0!==f.toneMapping?\"#define TONE_MAPPING\":\"\",0!==f.toneMapping?R.tonemapping_pars_fragment:\"\",0!==f.toneMapping?ug(\"toneMapping\",f.toneMapping):\n\"\",f.dithering?\"#define DITHERING\":\"\",f.outputEncoding||f.mapEncoding||f.envMapEncoding||f.emissiveMapEncoding?R.encodings_pars_fragment:\"\",f.mapEncoding?Yd(\"mapTexelToLinear\",f.mapEncoding):\"\",f.envMapEncoding?Yd(\"envMapTexelToLinear\",f.envMapEncoding):\"\",f.emissiveMapEncoding?Yd(\"emissiveMapTexelToLinear\",f.emissiveMapEncoding):\"\",f.outputEncoding?tg(\"linearToOutputTexel\",f.outputEncoding):\"\",f.depthPacking?\"#define DEPTH_PACKING \"+d.depthPacking:\"\",\"\\n\"].filter(Bc).join(\"\\n\"));k=Zd(k);k=Ye(k,f);\nm=Zd(m);m=Ye(m,f);d.isShaderMaterial||(k=Ze(k),m=Ze(m));m=b+m;k=We(g,g.VERTEX_SHADER,h+k);m=We(g,g.FRAGMENT_SHADER,m);g.attachShader(z,k);g.attachShader(z,m);void 0!==d.index0AttributeName?g.bindAttribLocation(z,0,d.index0AttributeName):!0===f.morphTargets&&g.bindAttribLocation(z,0,\"position\");g.linkProgram(z);f=g.getProgramInfoLog(z);e=g.getShaderInfoLog(k);q=g.getShaderInfoLog(m);u=n=!0;if(!1===g.getProgramParameter(z,g.LINK_STATUS))n=!1,console.error(\"THREE.WebGLProgram: shader error: \",g.getError(),\n\"gl.VALIDATE_STATUS\",g.getProgramParameter(z,g.VALIDATE_STATUS),\"gl.getProgramInfoLog\",f,e,q);else if(\"\"!==f)console.warn(\"THREE.WebGLProgram: gl.getProgramInfoLog()\",f);else if(\"\"===e||\"\"===q)u=!1;u&&(this.diagnostics={runnable:n,material:d,programLog:f,vertexShader:{log:e,prefix:h},fragmentShader:{log:q,prefix:b}});g.deleteShader(k);g.deleteShader(m);var y;this.getUniforms=function(){void 0===y&&(y=new mb(g,z,a));return y};var I;this.getAttributes=function(){if(void 0===I){for(var a={},b=g.getProgramParameter(z,\ng.ACTIVE_ATTRIBUTES),c=0;c<b;c++){var d=g.getActiveAttrib(z,c).name;a[d]=g.getAttribLocation(z,d)}I=a}return I};this.destroy=function(){g.deleteProgram(z);this.program=void 0};Object.defineProperties(this,{uniforms:{get:function(){console.warn(\"THREE.WebGLProgram: .uniforms is now .getUniforms().\");return this.getUniforms()}},attributes:{get:function(){console.warn(\"THREE.WebGLProgram: .attributes is now .getAttributes().\");return this.getAttributes()}}});this.id=yg++;this.code=c;this.usedTimes=1;\nthis.program=z;this.vertexShader=k;this.fragmentShader=m;return this}function zg(a,b,c){function d(a,b){if(a)a.isTexture?c=a.encoding:a.isWebGLRenderTarget&&(console.warn(\"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\"),c=a.texture.encoding);else var c=3E3;3E3===c&&b&&(c=3007);return c}var e=[],f={MeshDepthMaterial:\"depth\",MeshDistanceMaterial:\"distanceRGBA\",MeshNormalMaterial:\"normal\",MeshBasicMaterial:\"basic\",MeshLambertMaterial:\"lambert\",\nMeshPhongMaterial:\"phong\",MeshToonMaterial:\"phong\",MeshStandardMaterial:\"physical\",MeshPhysicalMaterial:\"physical\",LineBasicMaterial:\"basic\",LineDashedMaterial:\"dashed\",PointsMaterial:\"points\",ShadowMaterial:\"shadow\"},g=\"precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering\".split(\" \");\nthis.getParameters=function(b,e,g,q,n,u,r){var h=f[b.type];if(r.isSkinnedMesh){var k=r.skeleton.bones;if(c.floatVertexTextures)k=1024;else{var m=Math.min(Math.floor((c.maxVertexUniforms-20)/4),k.length);m<k.length?(console.warn(\"THREE.WebGLRenderer: Skeleton has \"+k.length+\" bones. This GPU supports \"+m+\".\"),k=0):k=m}}else k=0;m=c.precision;null!==b.precision&&(m=c.getMaxPrecision(b.precision),m!==b.precision&&console.warn(\"THREE.WebGLProgram.getParameters:\",b.precision,\"not supported, using\",m,\"instead.\"));\nvar l=a.getRenderTarget();return{shaderID:h,precision:m,supportsVertexTextures:c.vertexTextures,outputEncoding:d(l?l.texture:null,a.gammaOutput),map:!!b.map,mapEncoding:d(b.map,a.gammaInput),envMap:!!b.envMap,envMapMode:b.envMap&&b.envMap.mapping,envMapEncoding:d(b.envMap,a.gammaInput),envMapCubeUV:!!b.envMap&&(306===b.envMap.mapping||307===b.envMap.mapping),lightMap:!!b.lightMap,aoMap:!!b.aoMap,emissiveMap:!!b.emissiveMap,emissiveMapEncoding:d(b.emissiveMap,a.gammaInput),bumpMap:!!b.bumpMap,normalMap:!!b.normalMap,\ndisplacementMap:!!b.displacementMap,roughnessMap:!!b.roughnessMap,metalnessMap:!!b.metalnessMap,specularMap:!!b.specularMap,alphaMap:!!b.alphaMap,gradientMap:!!b.gradientMap,combine:b.combine,vertexColors:b.vertexColors,fog:!!q,useFog:b.fog,fogExp:q&&q.isFogExp2,flatShading:b.flatShading,sizeAttenuation:b.sizeAttenuation,logarithmicDepthBuffer:c.logarithmicDepthBuffer,skinning:b.skinning&&0<k,maxBones:k,useVertexTexture:c.floatVertexTextures,morphTargets:b.morphTargets,morphNormals:b.morphNormals,\nmaxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,numDirLights:e.directional.length,numPointLights:e.point.length,numSpotLights:e.spot.length,numRectAreaLights:e.rectArea.length,numHemiLights:e.hemi.length,numClippingPlanes:n,numClipIntersection:u,dithering:b.dithering,shadowMapEnabled:a.shadowMap.enabled&&r.receiveShadow&&0<g.length,shadowMapType:a.shadowMap.type,toneMapping:a.toneMapping,physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:b.premultipliedAlpha,\nalphaTest:b.alphaTest,doubleSided:2===b.side,flipSided:1===b.side,depthPacking:void 0!==b.depthPacking?b.depthPacking:!1}};this.getProgramCode=function(b,c){var d=[];c.shaderID?d.push(c.shaderID):(d.push(b.fragmentShader),d.push(b.vertexShader));if(void 0!==b.defines)for(var e in b.defines)d.push(e),d.push(b.defines[e]);for(e=0;e<g.length;e++)d.push(c[g[e]]);d.push(b.onBeforeCompile.toString());d.push(a.gammaOutput);return d.join()};this.acquireProgram=function(c,d,f,g){for(var h,k=0,m=e.length;k<\nm;k++){var q=e[k];if(q.code===g){h=q;++h.usedTimes;break}}void 0===h&&(h=new xg(a,b,g,c,d,f),e.push(h));return h};this.releaseProgram=function(a){if(0===--a.usedTimes){var b=e.indexOf(a);e[b]=e[e.length-1];e.pop();a.destroy()}};this.programs=e}function Ag(a,b,c,d,e,f,g){function h(a,b){if(a.width>b||a.height>b){b/=Math.max(a.width,a.height);var c=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\");c.width=Math.floor(a.width*b);c.height=Math.floor(a.height*b);c.getContext(\"2d\").drawImage(a,\n0,0,a.width,a.height,0,0,c.width,c.height);console.warn(\"THREE.WebGLRenderer: image is too big (\"+a.width+\"x\"+a.height+\"). Resized to \"+c.width+\"x\"+c.height,a);return c}return a}function k(a){return Q.isPowerOfTwo(a.width)&&Q.isPowerOfTwo(a.height)}function m(a,b){return a.generateMipmaps&&b&&1003!==a.minFilter&&1006!==a.minFilter}function q(b){return 1003===b||1004===b||1005===b?a.NEAREST:a.LINEAR}function n(b){b=b.target;b.removeEventListener(\"dispose\",n);a:{var c=d.get(b);if(b.image&&c.__image__webglTextureCube)a.deleteTexture(c.__image__webglTextureCube);\nelse{if(void 0===c.__webglInit)break a;a.deleteTexture(c.__webglTexture)}d.remove(b)}b.isVideoTexture&&delete y[b.id];g.textures--}function u(b){b=b.target;b.removeEventListener(\"dispose\",u);var c=d.get(b),e=d.get(b.texture);if(b){void 0!==e.__webglTexture&&a.deleteTexture(e.__webglTexture);b.depthTexture&&b.depthTexture.dispose();if(b.isWebGLRenderTargetCube)for(e=0;6>e;e++)a.deleteFramebuffer(c.__webglFramebuffer[e]),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer[e]);else a.deleteFramebuffer(c.__webglFramebuffer),\nc.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer);d.remove(b.texture);d.remove(b)}g.textures--}function r(b,q){var u=d.get(b);if(0<b.version&&u.__version!==b.version){var r=b.image;if(void 0===r)console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is undefined\",b);else if(!1===r.complete)console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is incomplete\",b);else{void 0===u.__webglInit&&(u.__webglInit=!0,b.addEventListener(\"dispose\",n),u.__webglTexture=\na.createTexture(),b.isVideoTexture&&(y[b.id]=b),g.textures++);c.activeTexture(a.TEXTURE0+q);c.bindTexture(a.TEXTURE_2D,u.__webglTexture);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.flipY);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b.premultiplyAlpha);a.pixelStorei(a.UNPACK_ALIGNMENT,b.unpackAlignment);var l=h(b.image,e.maxTextureSize);(1001!==b.wrapS||1001!==b.wrapT||1003!==b.minFilter&&1006!==b.minFilter)&&!1===k(l)&&(q=l,q instanceof HTMLImageElement||q instanceof HTMLCanvasElement||q instanceof ImageBitmap?\n(r=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\"),r.width=Q.floorPowerOfTwo(q.width),r.height=Q.floorPowerOfTwo(q.height),r.getContext(\"2d\").drawImage(q,0,0,r.width,r.height),console.warn(\"THREE.WebGLRenderer: image is not power of two (\"+q.width+\"x\"+q.height+\"). Resized to \"+r.width+\"x\"+r.height,q),l=r):l=q);q=k(l);var r=f.convert(b.format),v=f.convert(b.type);t(a.TEXTURE_2D,b,q);var p=b.mipmaps;if(b.isDepthTexture){p=a.DEPTH_COMPONENT;if(1015===b.type){if(!z)throw Error(\"Float Depth Texture only supported in WebGL2.0\");\np=a.DEPTH_COMPONENT32F}else z&&(p=a.DEPTH_COMPONENT16);1026===b.format&&p===a.DEPTH_COMPONENT&&1012!==b.type&&1014!==b.type&&(console.warn(\"THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.\"),b.type=1012,v=f.convert(b.type));1027===b.format&&(p=a.DEPTH_STENCIL,1020!==b.type&&(console.warn(\"THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.\"),b.type=1020,v=f.convert(b.type)));c.texImage2D(a.TEXTURE_2D,0,p,l.width,l.height,0,r,\nv,null)}else if(b.isDataTexture)if(0<p.length&&q){for(var A=0,w=p.length;A<w;A++)l=p[A],c.texImage2D(a.TEXTURE_2D,A,r,l.width,l.height,0,r,v,l.data);b.generateMipmaps=!1}else c.texImage2D(a.TEXTURE_2D,0,r,l.width,l.height,0,r,v,l.data);else if(b.isCompressedTexture)for(A=0,w=p.length;A<w;A++)l=p[A],1023!==b.format&&1022!==b.format?-1<c.getCompressedTextureFormats().indexOf(r)?c.compressedTexImage2D(a.TEXTURE_2D,A,r,l.width,l.height,0,l.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\"):\nc.texImage2D(a.TEXTURE_2D,A,r,l.width,l.height,0,r,v,l.data);else if(0<p.length&&q){A=0;for(w=p.length;A<w;A++)l=p[A],c.texImage2D(a.TEXTURE_2D,A,r,r,v,l);b.generateMipmaps=!1}else c.texImage2D(a.TEXTURE_2D,0,r,r,v,l);m(b,q)&&a.generateMipmap(a.TEXTURE_2D);u.__version=b.version;if(b.onUpdate)b.onUpdate(b);return}}c.activeTexture(a.TEXTURE0+q);c.bindTexture(a.TEXTURE_2D,u.__webglTexture)}function t(c,g,h){h?(a.texParameteri(c,a.TEXTURE_WRAP_S,f.convert(g.wrapS)),a.texParameteri(c,a.TEXTURE_WRAP_T,\nf.convert(g.wrapT)),a.texParameteri(c,a.TEXTURE_MAG_FILTER,f.convert(g.magFilter)),a.texParameteri(c,a.TEXTURE_MIN_FILTER,f.convert(g.minFilter))):(a.texParameteri(c,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(c,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),1001===g.wrapS&&1001===g.wrapT||console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.\",g),a.texParameteri(c,a.TEXTURE_MAG_FILTER,q(g.magFilter)),a.texParameteri(c,\na.TEXTURE_MIN_FILTER,q(g.minFilter)),1003!==g.minFilter&&1006!==g.minFilter&&console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.\",g));!(h=b.get(\"EXT_texture_filter_anisotropic\"))||1015===g.type&&null===b.get(\"OES_texture_float_linear\")||1016===g.type&&null===b.get(\"OES_texture_half_float_linear\")||!(1<g.anisotropy||d.get(g).__currentAnisotropy)||(a.texParameterf(c,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(g.anisotropy,\ne.getMaxAnisotropy())),d.get(g).__currentAnisotropy=g.anisotropy)}function l(b,e,g,h){var k=f.convert(e.texture.format),m=f.convert(e.texture.type);c.texImage2D(h,0,k,e.width,e.height,0,k,m,null);a.bindFramebuffer(a.FRAMEBUFFER,b);a.framebufferTexture2D(a.FRAMEBUFFER,g,h,d.get(e.texture).__webglTexture,0);a.bindFramebuffer(a.FRAMEBUFFER,null)}function p(b,c){a.bindRenderbuffer(a.RENDERBUFFER,b);c.depthBuffer&&!c.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,c.width,c.height),\na.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,b)):c.depthBuffer&&c.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,c.width,c.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,b)):a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,c.width,c.height);a.bindRenderbuffer(a.RENDERBUFFER,null)}var z=\"undefined\"!==typeof WebGL2RenderingContext&&a instanceof window.WebGL2RenderingContext,y={};this.setTexture2D=r;this.setTextureCube=\nfunction(b,q){var u=d.get(b);if(6===b.image.length)if(0<b.version&&u.__version!==b.version){u.__image__webglTextureCube||(b.addEventListener(\"dispose\",n),u.__image__webglTextureCube=a.createTexture(),g.textures++);c.activeTexture(a.TEXTURE0+q);c.bindTexture(a.TEXTURE_CUBE_MAP,u.__image__webglTextureCube);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.flipY);q=b&&b.isCompressedTexture;for(var r=b.image[0]&&b.image[0].isDataTexture,l=[],v=0;6>v;v++)l[v]=q||r?r?b.image[v].image:b.image[v]:h(b.image[v],e.maxCubemapSize);\nvar p=k(l[0]),w=f.convert(b.format),A=f.convert(b.type);t(a.TEXTURE_CUBE_MAP,b,p);for(v=0;6>v;v++)if(q)for(var y,I=l[v].mipmaps,z=0,x=I.length;z<x;z++)y=I[z],1023!==b.format&&1022!==b.format?-1<c.getCompressedTextureFormats().indexOf(w)?c.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+v,z,w,y.width,y.height,0,y.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()\"):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+v,z,w,y.width,y.height,\n0,w,A,y.data);else r?c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,w,l[v].width,l[v].height,0,w,A,l[v].data):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,w,w,A,l[v]);m(b,p)&&a.generateMipmap(a.TEXTURE_CUBE_MAP);u.__version=b.version;if(b.onUpdate)b.onUpdate(b)}else c.activeTexture(a.TEXTURE0+q),c.bindTexture(a.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)};this.setTextureCubeDynamic=function(b,e){c.activeTexture(a.TEXTURE0+e);c.bindTexture(a.TEXTURE_CUBE_MAP,d.get(b).__webglTexture)};this.setupRenderTarget=\nfunction(b){var e=d.get(b),f=d.get(b.texture);b.addEventListener(\"dispose\",u);f.__webglTexture=a.createTexture();g.textures++;var h=!0===b.isWebGLRenderTargetCube,n=k(b);if(h){e.__webglFramebuffer=[];for(var q=0;6>q;q++)e.__webglFramebuffer[q]=a.createFramebuffer()}else e.__webglFramebuffer=a.createFramebuffer();if(h){c.bindTexture(a.TEXTURE_CUBE_MAP,f.__webglTexture);t(a.TEXTURE_CUBE_MAP,b.texture,n);for(q=0;6>q;q++)l(e.__webglFramebuffer[q],b,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+q);\nm(b.texture,n)&&a.generateMipmap(a.TEXTURE_CUBE_MAP);c.bindTexture(a.TEXTURE_CUBE_MAP,null)}else c.bindTexture(a.TEXTURE_2D,f.__webglTexture),t(a.TEXTURE_2D,b.texture,n),l(e.__webglFramebuffer,b,a.COLOR_ATTACHMENT0,a.TEXTURE_2D),m(b.texture,n)&&a.generateMipmap(a.TEXTURE_2D),c.bindTexture(a.TEXTURE_2D,null);if(b.depthBuffer){e=d.get(b);f=!0===b.isWebGLRenderTargetCube;if(b.depthTexture){if(f)throw Error(\"target.depthTexture not supported in Cube render targets\");if(b&&b.isWebGLRenderTargetCube)throw Error(\"Depth Texture with cube render targets is not supported\");\na.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer);if(!b.depthTexture||!b.depthTexture.isDepthTexture)throw Error(\"renderTarget.depthTexture must be an instance of THREE.DepthTexture\");d.get(b.depthTexture).__webglTexture&&b.depthTexture.image.width===b.width&&b.depthTexture.image.height===b.height||(b.depthTexture.image.width=b.width,b.depthTexture.image.height=b.height,b.depthTexture.needsUpdate=!0);r(b.depthTexture,0);e=d.get(b.depthTexture).__webglTexture;if(1026===b.depthTexture.format)a.framebufferTexture2D(a.FRAMEBUFFER,\na.DEPTH_ATTACHMENT,a.TEXTURE_2D,e,0);else if(1027===b.depthTexture.format)a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,e,0);else throw Error(\"Unknown depthTexture format\");}else if(f)for(e.__webglDepthbuffer=[],f=0;6>f;f++)a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer[f]),e.__webglDepthbuffer[f]=a.createRenderbuffer(),p(e.__webglDepthbuffer[f],b);else a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer),e.__webglDepthbuffer=a.createRenderbuffer(),p(e.__webglDepthbuffer,\nb);a.bindFramebuffer(a.FRAMEBUFFER,null)}};this.updateRenderTargetMipmap=function(b){var e=b.texture,f=k(b);m(e,f)&&(b=b.isWebGLRenderTargetCube?a.TEXTURE_CUBE_MAP:a.TEXTURE_2D,e=d.get(e).__webglTexture,c.bindTexture(b,e),a.generateMipmap(b),c.bindTexture(b,null))};this.updateVideoTextures=function(){for(var a in y)y[a].update()}}function Bg(){var a={};return{get:function(b){b=b.uuid;var c=a[b];void 0===c&&(c={},a[b]=c);return c},remove:function(b){delete a[b.uuid]},clear:function(){a={}}}}function Cg(a,\nb,c){function d(b,c,d){var e=new Uint8Array(4),f=a.createTexture();a.bindTexture(b,f);a.texParameteri(b,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(b,a.TEXTURE_MAG_FILTER,a.NEAREST);for(b=0;b<d;b++)a.texImage2D(c+b,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,e);return f}function e(b){!0!==y[b]&&(a.enable(b),y[b]=!0)}function f(b){!1!==y[b]&&(a.disable(b),y[b]=!1)}function g(b,d,g,h,k,m,q,n){0!==b?e(a.BLEND):f(a.BLEND);if(5!==b){if(b!==J||n!==la)switch(b){case 2:n?(a.blendEquationSeparate(a.FUNC_ADD,\na.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE,a.ONE,a.ONE)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.SRC_ALPHA,a.ONE));break;case 3:n?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.ONE_MINUS_SRC_COLOR));break;case 4:n?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,\na.SRC_COLOR));break;default:n?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA))}H=E=C=D=B=x=null}else{k=k||d;m=m||g;q=q||h;if(d!==x||k!==C)a.blendEquationSeparate(c.convert(d),c.convert(k)),x=d,C=k;if(g!==B||h!==D||m!==E||q!==H)a.blendFuncSeparate(c.convert(g),c.convert(h),c.convert(m),c.convert(q)),\nB=g,D=h,E=m,H=q}J=b;la=n}function h(b){S!==b&&(b?a.frontFace(a.CW):a.frontFace(a.CCW),S=b)}function k(b){0!==b?(e(a.CULL_FACE),b!==K&&(1===b?a.cullFace(a.BACK):2===b?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):f(a.CULL_FACE);K=b}function m(b,c,d){if(b){if(e(a.POLYGON_OFFSET_FILL),L!==c||O!==d)a.polygonOffset(c,d),L=c,O=d}else f(a.POLYGON_OFFSET_FILL)}function q(b){void 0===b&&(b=a.TEXTURE0+Q-1);M!==b&&(a.activeTexture(b),M=b)}var n=new function(){var b=!1,c=new aa,d=null,e=new aa(0,0,0,0);\nreturn{setMask:function(c){d===c||b||(a.colorMask(c,c,c,c),d=c)},setLocked:function(a){b=a},setClear:function(b,d,f,g,h){!0===h&&(b*=g,d*=g,f*=g);c.set(b,d,f,g);!1===e.equals(c)&&(a.clearColor(b,d,f,g),e.copy(c))},reset:function(){b=!1;d=null;e.set(-1,0,0,0)}}},u=new function(){var b=!1,c=null,d=null,g=null;return{setTest:function(b){b?e(a.DEPTH_TEST):f(a.DEPTH_TEST)},setMask:function(d){c===d||b||(a.depthMask(d),c=d)},setFunc:function(b){if(d!==b){if(b)switch(b){case 0:a.depthFunc(a.NEVER);break;\ncase 1:a.depthFunc(a.ALWAYS);break;case 2:a.depthFunc(a.LESS);break;case 3:a.depthFunc(a.LEQUAL);break;case 4:a.depthFunc(a.EQUAL);break;case 5:a.depthFunc(a.GEQUAL);break;case 6:a.depthFunc(a.GREATER);break;case 7:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}else a.depthFunc(a.LEQUAL);d=b}},setLocked:function(a){b=a},setClear:function(b){g!==b&&(a.clearDepth(b),g=b)},reset:function(){b=!1;g=d=c=null}}},r=new function(){var b=!1,c=null,d=null,g=null,h=null,k=null,m=null,n=null,q=null;\nreturn{setTest:function(b){b?e(a.STENCIL_TEST):f(a.STENCIL_TEST)},setMask:function(d){c===d||b||(a.stencilMask(d),c=d)},setFunc:function(b,c,e){if(d!==b||g!==c||h!==e)a.stencilFunc(b,c,e),d=b,g=c,h=e},setOp:function(b,c,d){if(k!==b||m!==c||n!==d)a.stencilOp(b,c,d),k=b,m=c,n=d},setLocked:function(a){b=a},setClear:function(b){q!==b&&(a.clearStencil(b),q=b)},reset:function(){b=!1;q=n=m=k=h=g=d=c=null}}},l=a.getParameter(a.MAX_VERTEX_ATTRIBS),v=new Uint8Array(l),p=new Uint8Array(l),z=new Uint8Array(l),\ny={},I=null,A=null,J=null,x=null,B=null,D=null,C=null,E=null,H=null,la=!1,S=null,K=null,N=null,L=null,O=null,Q=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS),l=parseFloat(/^WebGL\\ ([0-9])/.exec(a.getParameter(a.VERSION))[1]),V=1<=parseFloat(l),M=null,P={},R=new aa,G=new aa,Y={};Y[a.TEXTURE_2D]=d(a.TEXTURE_2D,a.TEXTURE_2D,1);Y[a.TEXTURE_CUBE_MAP]=d(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6);n.setClear(0,0,0,1);u.setClear(1);r.setClear(0);e(a.DEPTH_TEST);u.setFunc(3);h(!1);k(1);e(a.CULL_FACE);\ne(a.BLEND);g(1);return{buffers:{color:n,depth:u,stencil:r},initAttributes:function(){for(var a=0,b=v.length;a<b;a++)v[a]=0},enableAttribute:function(c){v[c]=1;0===p[c]&&(a.enableVertexAttribArray(c),p[c]=1);0!==z[c]&&(b.get(\"ANGLE_instanced_arrays\").vertexAttribDivisorANGLE(c,0),z[c]=0)},enableAttributeAndDivisor:function(c,d){v[c]=1;0===p[c]&&(a.enableVertexAttribArray(c),p[c]=1);z[c]!==d&&(b.get(\"ANGLE_instanced_arrays\").vertexAttribDivisorANGLE(c,d),z[c]=d)},disableUnusedAttributes:function(){for(var b=\n0,c=p.length;b!==c;++b)p[b]!==v[b]&&(a.disableVertexAttribArray(b),p[b]=0)},enable:e,disable:f,getCompressedTextureFormats:function(){if(null===I&&(I=[],b.get(\"WEBGL_compressed_texture_pvrtc\")||b.get(\"WEBGL_compressed_texture_s3tc\")||b.get(\"WEBGL_compressed_texture_etc1\")))for(var c=a.getParameter(a.COMPRESSED_TEXTURE_FORMATS),d=0;d<c.length;d++)I.push(c[d]);return I},useProgram:function(b){return A!==b?(a.useProgram(b),A=b,!0):!1},setBlending:g,setMaterial:function(b,c){2===b.side?f(a.CULL_FACE):\ne(a.CULL_FACE);var d=1===b.side;c&&(d=!d);h(d);!0===b.transparent?g(b.blending,b.blendEquation,b.blendSrc,b.blendDst,b.blendEquationAlpha,b.blendSrcAlpha,b.blendDstAlpha,b.premultipliedAlpha):g(0);u.setFunc(b.depthFunc);u.setTest(b.depthTest);u.setMask(b.depthWrite);n.setMask(b.colorWrite);m(b.polygonOffset,b.polygonOffsetFactor,b.polygonOffsetUnits)},setFlipSided:h,setCullFace:k,setLineWidth:function(b){b!==N&&(V&&a.lineWidth(b),N=b)},setPolygonOffset:m,setScissorTest:function(b){b?e(a.SCISSOR_TEST):\nf(a.SCISSOR_TEST)},activeTexture:q,bindTexture:function(b,c){null===M&&q();var d=P[M];void 0===d&&(d={type:void 0,texture:void 0},P[M]=d);if(d.type!==b||d.texture!==c)a.bindTexture(b,c||Y[b]),d.type=b,d.texture=c},compressedTexImage2D:function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(ea){console.error(\"THREE.WebGLState:\",ea)}},texImage2D:function(){try{a.texImage2D.apply(a,arguments)}catch(ea){console.error(\"THREE.WebGLState:\",ea)}},scissor:function(b){!1===R.equals(b)&&(a.scissor(b.x,\nb.y,b.z,b.w),R.copy(b))},viewport:function(b){!1===G.equals(b)&&(a.viewport(b.x,b.y,b.z,b.w),G.copy(b))},reset:function(){for(var b=0;b<p.length;b++)1===p[b]&&(a.disableVertexAttribArray(b),p[b]=0);y={};M=I=null;P={};K=S=J=A=null;n.reset();u.reset();r.reset()}}}function Dg(a,b,c){function d(b){if(\"highp\"===b){if(0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision)return\"highp\";b=\"mediump\"}return\"mediump\"===b&&\n0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision?\"mediump\":\"lowp\"}var e,f=void 0!==c.precision?c.precision:\"highp\",g=d(f);g!==f&&(console.warn(\"THREE.WebGLRenderer:\",f,\"not supported, using\",g,\"instead.\"),f=g);c=!0===c.logarithmicDepthBuffer;var g=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),h=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),k=a.getParameter(a.MAX_TEXTURE_SIZE),m=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),\nq=a.getParameter(a.MAX_VERTEX_ATTRIBS),n=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),u=a.getParameter(a.MAX_VARYING_VECTORS),r=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),l=0<h,v=!!b.get(\"OES_texture_float\");return{getMaxAnisotropy:function(){if(void 0!==e)return e;var c=b.get(\"EXT_texture_filter_anisotropic\");return e=null!==c?a.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:d,precision:f,logarithmicDepthBuffer:c,maxTextures:g,maxVertexTextures:h,maxTextureSize:k,maxCubemapSize:m,\nmaxAttributes:q,maxVertexUniforms:n,maxVaryings:u,maxFragmentUniforms:r,vertexTextures:l,floatFragmentTextures:v,floatVertexTextures:l&&v}}function ba(a,b,c,d){Ta.call(this);this.type=\"PerspectiveCamera\";this.fov=void 0!==a?a:50;this.zoom=1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:2E3;this.focus=10;this.aspect=void 0!==b?b:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}function ud(a){ba.call(this);this.cameras=a||[]}function be(a){function b(){if(null!==\nd&&d.isPresenting){var b=d.getEyeParameters(\"left\"),e=b.renderWidth,b=b.renderHeight;n=a.getPixelRatio();q=a.getSize();a.setDrawingBufferSize(2*e,b,1)}else c.enabled&&a.setDrawingBufferSize(q.width,q.height,n)}var c=this,d=null,e=null,f=null;\"undefined\"!==typeof window&&\"VRFrameData\"in window&&(e=new window.VRFrameData);var g=new O,h=new ba;h.bounds=new aa(0,0,.5,1);h.layers.enable(1);var k=new ba;k.bounds=new aa(.5,0,.5,1);k.layers.enable(2);var m=new ud([h,k]);m.layers.enable(1);m.layers.enable(2);\nvar q,n;\"undefined\"!==typeof window&&window.addEventListener(\"vrdisplaypresentchange\",b,!1);this.enabled=!1;this.getDevice=function(){return d};this.setDevice=function(a){void 0!==a&&(d=a)};this.setPoseTarget=function(a){void 0!==a&&(f=a)};this.getCamera=function(a){if(null===d)return a;d.depthNear=a.near;d.depthFar=a.far;d.getFrameData(e);var b=e.pose,c=null!==f?f:a;null!==b.position?c.position.fromArray(b.position):c.position.set(0,0,0);null!==b.orientation&&c.quaternion.fromArray(b.orientation);\nc.updateMatrixWorld();if(!1===d.isPresenting)return a;h.near=a.near;k.near=a.near;h.far=a.far;k.far=a.far;m.matrixWorld.copy(a.matrixWorld);m.matrixWorldInverse.copy(a.matrixWorldInverse);h.matrixWorldInverse.fromArray(e.leftViewMatrix);k.matrixWorldInverse.fromArray(e.rightViewMatrix);a=c.parent;null!==a&&(g.getInverse(a.matrixWorld),h.matrixWorldInverse.multiply(g),k.matrixWorldInverse.multiply(g));h.matrixWorld.getInverse(h.matrixWorldInverse);k.matrixWorld.getInverse(k.matrixWorldInverse);h.projectionMatrix.fromArray(e.leftProjectionMatrix);\nk.projectionMatrix.fromArray(e.rightProjectionMatrix);m.projectionMatrix.copy(h.projectionMatrix);a=d.getLayers();a.length&&(a=a[0],null!==a.leftBounds&&4===a.leftBounds.length&&h.bounds.fromArray(a.leftBounds),null!==a.rightBounds&&4===a.rightBounds.length&&k.bounds.fromArray(a.rightBounds));return m};this.submitFrame=function(){d&&d.isPresenting&&d.submitFrame()};this.dispose=function(){\"undefined\"!==typeof window&&window.removeEventListener(\"vrdisplaypresentchange\",b)}}function Eg(a){var b={};\nreturn{get:function(c){if(void 0!==b[c])return b[c];switch(c){case \"WEBGL_depth_texture\":var d=a.getExtension(\"WEBGL_depth_texture\")||a.getExtension(\"MOZ_WEBGL_depth_texture\")||a.getExtension(\"WEBKIT_WEBGL_depth_texture\");break;case \"EXT_texture_filter_anisotropic\":d=a.getExtension(\"EXT_texture_filter_anisotropic\")||a.getExtension(\"MOZ_EXT_texture_filter_anisotropic\")||a.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");break;case \"WEBGL_compressed_texture_s3tc\":d=a.getExtension(\"WEBGL_compressed_texture_s3tc\")||\na.getExtension(\"MOZ_WEBGL_compressed_texture_s3tc\")||a.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\");break;case \"WEBGL_compressed_texture_pvrtc\":d=a.getExtension(\"WEBGL_compressed_texture_pvrtc\")||a.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\");break;case \"WEBGL_compressed_texture_etc1\":d=a.getExtension(\"WEBGL_compressed_texture_etc1\");break;default:d=a.getExtension(c)}null===d&&console.warn(\"THREE.WebGLRenderer: \"+c+\" extension not supported.\");return b[c]=d}}}function Fg(){function a(){m.value!==\nd&&(m.value=d,m.needsUpdate=0<e);c.numPlanes=e;c.numIntersection=0}function b(a,b,d,e){var f=null!==a?a.length:0,g=null;if(0!==f){g=m.value;if(!0!==e||null===g){e=d+4*f;b=b.matrixWorldInverse;k.getNormalMatrix(b);if(null===g||g.length<e)g=new Float32Array(e);for(e=0;e!==f;++e,d+=4)h.copy(a[e]).applyMatrix4(b,k),h.normal.toArray(g,d),g[d+3]=h.constant}m.value=g;m.needsUpdate=!0}c.numPlanes=f;return g}var c=this,d=null,e=0,f=!1,g=!1,h=new Ea,k=new ma,m={value:null,needsUpdate:!1};this.uniform=m;this.numIntersection=\nthis.numPlanes=0;this.init=function(a,c,g){var h=0!==a.length||c||0!==e||f;f=c;d=b(a,g,0);e=a.length;return h};this.beginShadows=function(){g=!0;b(null)};this.endShadows=function(){g=!1;a()};this.setState=function(c,h,k,l,t,v){if(!f||null===c||0===c.length||g&&!k)g?b(null):a();else{k=g?0:e;var n=4*k,q=t.clippingState||null;m.value=q;q=b(c,l,n,v);for(c=0;c!==n;++c)q[c]=d[c];t.clippingState=q;this.numIntersection=h?this.numPlanes:0;this.numPlanes+=k}}}function af(a,b){return{convert:function(c){if(1E3===\nc)return a.REPEAT;if(1001===c)return a.CLAMP_TO_EDGE;if(1002===c)return a.MIRRORED_REPEAT;if(1003===c)return a.NEAREST;if(1004===c)return a.NEAREST_MIPMAP_NEAREST;if(1005===c)return a.NEAREST_MIPMAP_LINEAR;if(1006===c)return a.LINEAR;if(1007===c)return a.LINEAR_MIPMAP_NEAREST;if(1008===c)return a.LINEAR_MIPMAP_LINEAR;if(1009===c)return a.UNSIGNED_BYTE;if(1017===c)return a.UNSIGNED_SHORT_4_4_4_4;if(1018===c)return a.UNSIGNED_SHORT_5_5_5_1;if(1019===c)return a.UNSIGNED_SHORT_5_6_5;if(1010===c)return a.BYTE;\nif(1011===c)return a.SHORT;if(1012===c)return a.UNSIGNED_SHORT;if(1013===c)return a.INT;if(1014===c)return a.UNSIGNED_INT;if(1015===c)return a.FLOAT;if(1016===c){var d=b.get(\"OES_texture_half_float\");if(null!==d)return d.HALF_FLOAT_OES}if(1021===c)return a.ALPHA;if(1022===c)return a.RGB;if(1023===c)return a.RGBA;if(1024===c)return a.LUMINANCE;if(1025===c)return a.LUMINANCE_ALPHA;if(1026===c)return a.DEPTH_COMPONENT;if(1027===c)return a.DEPTH_STENCIL;if(100===c)return a.FUNC_ADD;if(101===c)return a.FUNC_SUBTRACT;\nif(102===c)return a.FUNC_REVERSE_SUBTRACT;if(200===c)return a.ZERO;if(201===c)return a.ONE;if(202===c)return a.SRC_COLOR;if(203===c)return a.ONE_MINUS_SRC_COLOR;if(204===c)return a.SRC_ALPHA;if(205===c)return a.ONE_MINUS_SRC_ALPHA;if(206===c)return a.DST_ALPHA;if(207===c)return a.ONE_MINUS_DST_ALPHA;if(208===c)return a.DST_COLOR;if(209===c)return a.ONE_MINUS_DST_COLOR;if(210===c)return a.SRC_ALPHA_SATURATE;if(2001===c||2002===c||2003===c||2004===c)if(d=b.get(\"WEBGL_compressed_texture_s3tc\"),null!==\nd){if(2001===c)return d.COMPRESSED_RGB_S3TC_DXT1_EXT;if(2002===c)return d.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(2003===c)return d.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(2004===c)return d.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(2100===c||2101===c||2102===c||2103===c)if(d=b.get(\"WEBGL_compressed_texture_pvrtc\"),null!==d){if(2100===c)return d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(2101===c)return d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(2102===c)return d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(2103===c)return d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(2151===\nc&&(d=b.get(\"WEBGL_compressed_texture_etc1\"),null!==d))return d.COMPRESSED_RGB_ETC1_WEBGL;if(103===c||104===c)if(d=b.get(\"EXT_blend_minmax\"),null!==d){if(103===c)return d.MIN_EXT;if(104===c)return d.MAX_EXT}return 1020===c&&(d=b.get(\"WEBGL_depth_texture\"),null!==d)?d.UNSIGNED_INT_24_8_WEBGL:0}}}function ce(a){function b(){ia=new Eg(F);ia.get(\"WEBGL_depth_texture\");ia.get(\"OES_texture_float\");ia.get(\"OES_texture_float_linear\");ia.get(\"OES_texture_half_float\");ia.get(\"OES_texture_half_float_linear\");\nia.get(\"OES_standard_derivatives\");ia.get(\"OES_element_index_uint\");ia.get(\"ANGLE_instanced_arrays\");pa=new af(F,ia);T=new Dg(F,ia,a);Z=new Cg(F,ia,pa);Z.scissor(X.copy(fa).multiplyScalar(wa));Z.viewport(nb.copy(da).multiplyScalar(wa));ca=new Bg;ga=new Ag(F,ia,Z,ca,T,pa,ha);qa=new bg(F);ra=new og(F,qa,ha);ta=new rg(ra,ba);xa=new lg(F);ma=new zg(S,ia,T);ua=new qg;sa=new jg;ja=new fg(S,Z,ra,J);ya=new ng(F,ia,ba);za=new mg(F,ia,ba);Aa=new Zf(S,F,Z,ga,T);Ba=new $f(S,F,Z,ga,T);S.info.programs=ma.programs;\nS.context=F;S.capabilities=T;S.extensions=ia;S.properties=ca;S.renderLists=sa;S.state=Z}function c(a){a.preventDefault();console.log(\"THREE.WebGLRenderer: Context Lost.\");L=!0}function d(){console.log(\"THREE.WebGLRenderer: Context Restored.\");L=!1;b()}function e(a){a=a.target;a.removeEventListener(\"dispose\",e);f(a);ca.remove(a)}function f(a){var b=ca.get(a).program;a.program=void 0;void 0!==b&&ma.releaseProgram(b)}function g(a,b,c){a.render(function(a){S.renderBufferImmediate(a,b,c)})}function h(a){null!==\nCa&&Ca(a);(a=ka.getDevice())&&a.isPresenting?a.requestAnimationFrame(h):window.requestAnimationFrame(h)}function k(a,b,c){if(!1!==a.visible){if(a.layers.test(b.layers))if(a.isLight)D.push(a),a.castShadow&&C.push(a);else if(a.isSprite)a.frustumCulled&&!$d.intersectsSprite(a)||H.push(a);else if(a.isLensFlare)la.push(a);else if(a.isImmediateRenderObject)c&&Ob.setFromMatrixPosition(a.matrixWorld).applyMatrix4(td),E.push(a,null,a.material,Ob.z,null);else if(a.isMesh||a.isLine||a.isPoints)if(a.isSkinnedMesh&&\na.skeleton.update(),!a.frustumCulled||$d.intersectsObject(a)){c&&Ob.setFromMatrixPosition(a.matrixWorld).applyMatrix4(td);var d=ta.update(a),e=a.material;if(Array.isArray(e))for(var f=d.groups,g=0,h=f.length;g<h;g++){var m=f[g],n=e[m.materialIndex];n&&n.visible&&E.push(a,d,n,Ob.z,m)}else e.visible&&E.push(a,d,e,Ob.z,null)}a=a.children;g=0;for(h=a.length;g<h;g++)k(a[g],b,c)}}function m(a,b,c,d){for(var e=0,f=a.length;e<f;e++){var g=a[e],h=g.object,k=g.geometry,m=void 0===d?g.material:d,g=g.group;if(c.isArrayCamera){W=\nc;for(var n=c.cameras,u=0,l=n.length;u<l;u++){var r=n[u];if(h.layers.test(r.layers)){var t=r.bounds;Z.viewport(nb.set(t.x*ea,t.y*U,t.z*ea,t.w*U).multiplyScalar(wa));q(h,b,r,k,m,g)}}}else W=null,q(h,b,c,k,m,g)}}function q(a,b,c,d,e,f){a.onBeforeRender(S,b,c,d,e,f);a.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,a.matrixWorld);a.normalMatrix.getNormalMatrix(a.modelViewMatrix);if(a.isImmediateRenderObject){var h=a.isMesh&&0>a.matrixWorld.determinant();Z.setMaterial(e,h);h=u(c,b.fog,e,a);R=\"\";\ng(a,h,e)}else S.renderBufferDirect(c,b.fog,d,e,a,f);a.onAfterRender(S,b,c,d,e,f)}function n(a,b,c){var d=ca.get(a);c=ma.getParameters(a,ua.state,C,b,Ja.numPlanes,Ja.numIntersection,c);var g=ma.getProgramCode(a,c),h=d.program,k=!0;if(void 0===h)a.addEventListener(\"dispose\",e);else if(h.code!==g)f(a);else{if(void 0!==c.shaderID)return;k=!1}k&&(c.shaderID?(h=tb[c.shaderID],d.shader={name:a.type,uniforms:Ga.clone(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}):d.shader={name:a.type,\nuniforms:a.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader},a.onBeforeCompile(d.shader),h=ma.acquireProgram(a,d.shader,c,g),d.program=h,a.program=h);c=h.getAttributes();if(a.morphTargets)for(g=a.numSupportedMorphTargets=0;g<S.maxMorphTargets;g++)0<=c[\"morphTarget\"+g]&&a.numSupportedMorphTargets++;if(a.morphNormals)for(g=a.numSupportedMorphNormals=0;g<S.maxMorphNormals;g++)0<=c[\"morphNormal\"+g]&&a.numSupportedMorphNormals++;c=d.shader.uniforms;if(!a.isShaderMaterial&&!a.isRawShaderMaterial||\n!0===a.clipping)d.numClippingPlanes=Ja.numPlanes,d.numIntersection=Ja.numIntersection,c.clippingPlanes=Ja.uniform;d.fog=b;d.lightsHash=ua.state.hash;a.lights&&(c.ambientLightColor.value=ua.state.ambient,c.directionalLights.value=ua.state.directional,c.spotLights.value=ua.state.spot,c.rectAreaLights.value=ua.state.rectArea,c.pointLights.value=ua.state.point,c.hemisphereLights.value=ua.state.hemi,c.directionalShadowMap.value=ua.state.directionalShadowMap,c.directionalShadowMatrix.value=ua.state.directionalShadowMatrix,\nc.spotShadowMap.value=ua.state.spotShadowMap,c.spotShadowMatrix.value=ua.state.spotShadowMatrix,c.pointShadowMap.value=ua.state.pointShadowMap,c.pointShadowMatrix.value=ua.state.pointShadowMatrix);a=d.program.getUniforms();a=mb.seqWithValue(a.seq,c);d.uniformsList=a}function u(a,b,c,d){Y=0;var e=ca.get(c);sd&&(ae||a!==V)&&Ja.setState(c.clippingPlanes,c.clipIntersection,c.clipShadows,a,e,a===V&&c.id===P);!1===c.needsUpdate&&(void 0===e.program?c.needsUpdate=!0:c.fog&&e.fog!==b?c.needsUpdate=!0:c.lights&&\ne.lightsHash!==ua.state.hash?c.needsUpdate=!0:void 0===e.numClippingPlanes||e.numClippingPlanes===Ja.numPlanes&&e.numIntersection===Ja.numIntersection||(c.needsUpdate=!0));c.needsUpdate&&(n(c,b,d),c.needsUpdate=!1);var f=!1,g=!1,h=!1,k=e.program,m=k.getUniforms(),q=e.shader.uniforms;Z.useProgram(k.program)&&(h=g=f=!0);c.id!==P&&(P=c.id,g=!0);if(f||a!==V){m.setValue(F,\"projectionMatrix\",a.projectionMatrix);T.logarithmicDepthBuffer&&m.setValue(F,\"logDepthBufFC\",2/(Math.log(a.far+1)/Math.LN2));V!==(W||\na)&&(V=W||a,h=g=!0);if(c.isShaderMaterial||c.isMeshPhongMaterial||c.isMeshStandardMaterial||c.envMap)f=m.map.cameraPosition,void 0!==f&&f.setValue(F,Ob.setFromMatrixPosition(a.matrixWorld));(c.isMeshPhongMaterial||c.isMeshLambertMaterial||c.isMeshBasicMaterial||c.isMeshStandardMaterial||c.isShaderMaterial||c.skinning)&&m.setValue(F,\"viewMatrix\",a.matrixWorldInverse)}if(c.skinning&&(m.setOptional(F,d,\"bindMatrix\"),m.setOptional(F,d,\"bindMatrixInverse\"),a=d.skeleton))if(f=a.bones,T.floatVertexTextures){if(void 0===\na.boneTexture){var f=Math.sqrt(4*f.length),f=Q.ceilPowerOfTwo(f),f=Math.max(f,4),u=new Float32Array(f*f*4);u.set(a.boneMatrices);var r=new lb(u,f,f,1023,1015);a.boneMatrices=u;a.boneTexture=r;a.boneTextureSize=f}m.setValue(F,\"boneTexture\",a.boneTexture);m.setValue(F,\"boneTextureSize\",a.boneTextureSize)}else m.setOptional(F,a,\"boneMatrices\");g&&(m.setValue(F,\"toneMappingExposure\",S.toneMappingExposure),m.setValue(F,\"toneMappingWhitePoint\",S.toneMappingWhitePoint),c.lights&&(g=h,q.ambientLightColor.needsUpdate=\ng,q.directionalLights.needsUpdate=g,q.pointLights.needsUpdate=g,q.spotLights.needsUpdate=g,q.rectAreaLights.needsUpdate=g,q.hemisphereLights.needsUpdate=g),b&&c.fog&&(q.fogColor.value=b.color,b.isFog?(q.fogNear.value=b.near,q.fogFar.value=b.far):b.isFogExp2&&(q.fogDensity.value=b.density)),c.isMeshBasicMaterial?l(q,c):c.isMeshLambertMaterial?(l(q,c),c.emissiveMap&&(q.emissiveMap.value=c.emissiveMap)):c.isMeshPhongMaterial?(l(q,c),c.isMeshToonMaterial?(t(q,c),c.gradientMap&&(q.gradientMap.value=c.gradientMap)):\nt(q,c)):c.isMeshStandardMaterial?(l(q,c),c.isMeshPhysicalMaterial&&(q.clearCoat.value=c.clearCoat,q.clearCoatRoughness.value=c.clearCoatRoughness),q.roughness.value=c.roughness,q.metalness.value=c.metalness,c.roughnessMap&&(q.roughnessMap.value=c.roughnessMap),c.metalnessMap&&(q.metalnessMap.value=c.metalnessMap),c.emissiveMap&&(q.emissiveMap.value=c.emissiveMap),c.bumpMap&&(q.bumpMap.value=c.bumpMap,q.bumpScale.value=c.bumpScale),c.normalMap&&(q.normalMap.value=c.normalMap,q.normalScale.value.copy(c.normalScale)),\nc.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias),c.envMap&&(q.envMapIntensity.value=c.envMapIntensity)):c.isMeshDepthMaterial?(l(q,c),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias)):c.isMeshDistanceMaterial?(l(q,c),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=\nc.displacementScale,q.displacementBias.value=c.displacementBias),q.referencePosition.value.copy(c.referencePosition),q.nearDistance.value=c.nearDistance,q.farDistance.value=c.farDistance):c.isMeshNormalMaterial?(l(q,c),c.bumpMap&&(q.bumpMap.value=c.bumpMap,q.bumpScale.value=c.bumpScale),c.normalMap&&(q.normalMap.value=c.normalMap,q.normalScale.value.copy(c.normalScale)),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=\nc.displacementBias)):c.isLineBasicMaterial?(q.diffuse.value=c.color,q.opacity.value=c.opacity,c.isLineDashedMaterial&&(q.dashSize.value=c.dashSize,q.totalSize.value=c.dashSize+c.gapSize,q.scale.value=c.scale)):c.isPointsMaterial?(q.diffuse.value=c.color,q.opacity.value=c.opacity,q.size.value=c.size*wa,q.scale.value=.5*U,q.map.value=c.map,null!==c.map&&(!0===c.map.matrixAutoUpdate&&(b=c.map.offset,g=c.map.repeat,h=c.map.center,c.map.matrix.setUvTransform(b.x,b.y,g.x,g.y,c.map.rotation,h.x,h.y)),q.uvTransform.value.copy(c.map.matrix))):\nc.isShadowMaterial&&(q.color.value=c.color,q.opacity.value=c.opacity),void 0!==q.ltcMat&&(q.ltcMat.value=K.LTC_MAT_TEXTURE),void 0!==q.ltcMag&&(q.ltcMag.value=K.LTC_MAG_TEXTURE),mb.upload(F,e.uniformsList,q,S));m.setValue(F,\"modelViewMatrix\",d.modelViewMatrix);m.setValue(F,\"normalMatrix\",d.normalMatrix);m.setValue(F,\"modelMatrix\",d.matrixWorld);return k}function l(a,b){a.opacity.value=b.opacity;b.color&&(a.diffuse.value=b.color);b.emissive&&a.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity);\nb.map&&(a.map.value=b.map);b.alphaMap&&(a.alphaMap.value=b.alphaMap);b.specularMap&&(a.specularMap.value=b.specularMap);b.envMap&&(a.envMap.value=b.envMap,a.flipEnvMap.value=b.envMap&&b.envMap.isCubeTexture?-1:1,a.reflectivity.value=b.reflectivity,a.refractionRatio.value=b.refractionRatio);b.lightMap&&(a.lightMap.value=b.lightMap,a.lightMapIntensity.value=b.lightMapIntensity);b.aoMap&&(a.aoMap.value=b.aoMap,a.aoMapIntensity.value=b.aoMapIntensity);if(b.map)var c=b.map;else b.specularMap?c=b.specularMap:\nb.displacementMap?c=b.displacementMap:b.normalMap?c=b.normalMap:b.bumpMap?c=b.bumpMap:b.roughnessMap?c=b.roughnessMap:b.metalnessMap?c=b.metalnessMap:b.alphaMap?c=b.alphaMap:b.emissiveMap&&(c=b.emissiveMap);if(void 0!==c){c.isWebGLRenderTarget&&(c=c.texture);if(!0===c.matrixAutoUpdate){b=c.offset;var d=c.repeat,e=c.center;c.matrix.setUvTransform(b.x,b.y,d.x,d.y,c.rotation,e.x,e.y)}a.uvTransform.value.copy(c.matrix)}}function t(a,b){a.specular.value=b.specular;a.shininess.value=Math.max(b.shininess,\n1E-4);b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap);b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale);b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale));b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias)}console.log(\"THREE.WebGLRenderer\",\"89\");a=a||{};var v=void 0!==a.canvas?a.canvas:document.createElementNS(\"http://www.w3.org/1999/xhtml\",\n\"canvas\"),w=void 0!==a.context?a.context:null,z=void 0!==a.alpha?a.alpha:!1,y=void 0!==a.depth?a.depth:!0,I=void 0!==a.stencil?a.stencil:!0,A=void 0!==a.antialias?a.antialias:!1,J=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,x=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,B=void 0!==a.powerPreference?a.powerPreference:\"default\",D=[],C=[],E=null,H=[],la=[];this.domElement=v;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=\n!0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var S=this,L=!1,N=null,M=null,P=-1,R=\"\",V=null,W=null,nb=new aa,X=new aa,G=null,Y=0,ea=v.width,U=v.height,wa=1,da=new aa(0,0,ea,U),fa=new aa(0,0,ea,U),$e=!1,$d=new rd,Ja=new Fg,sd=!1,ae=!1,td=new O,Ob=new p,ha={geometries:0,textures:0},ba={frame:0,\ncalls:0,vertices:0,faces:0,points:0};this.info={render:ba,memory:ha,programs:null};try{z={alpha:z,depth:y,stencil:I,antialias:A,premultipliedAlpha:J,preserveDrawingBuffer:x,powerPreference:B};v.addEventListener(\"webglcontextlost\",c,!1);v.addEventListener(\"webglcontextrestored\",d,!1);var F=w||v.getContext(\"webgl\",z)||v.getContext(\"experimental-webgl\",z);if(null===F){if(null!==v.getContext(\"webgl\"))throw Error(\"Error creating WebGL context with your selected attributes.\");throw Error(\"Error creating WebGL context.\");\n}void 0===F.getShaderPrecisionFormat&&(F.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Gg){console.error(\"THREE.WebGLRenderer: \"+Gg.message)}var ia,T,Z,ca,ga,qa,ra,ta,ua,ma,sa,ja,xa,ya,za,Aa,Ba,pa;b();var ka=new be(S);this.vr=ka;var Ea=new Ue(S,ta,T.maxTextureSize);this.shadowMap=Ea;this.getContext=function(){return F};this.getContextAttributes=function(){return F.getContextAttributes()};this.forceContextLoss=function(){var a=ia.get(\"WEBGL_lose_context\");a&&\na.loseContext()};this.forceContextRestore=function(){var a=ia.get(\"WEBGL_lose_context\");a&&a.restoreContext()};this.getPixelRatio=function(){return wa};this.setPixelRatio=function(a){void 0!==a&&(wa=a,this.setSize(ea,U,!1))};this.getSize=function(){return{width:ea,height:U}};this.setSize=function(a,b,c){var d=ka.getDevice();d&&d.isPresenting?console.warn(\"THREE.WebGLRenderer: Can't change size while VR device is presenting.\"):(ea=a,U=b,v.width=a*wa,v.height=b*wa,!1!==c&&(v.style.width=a+\"px\",v.style.height=\nb+\"px\"),this.setViewport(0,0,a,b))};this.getDrawingBufferSize=function(){return{width:ea*wa,height:U*wa}};this.setDrawingBufferSize=function(a,b,c){ea=a;U=b;wa=c;v.width=a*c;v.height=b*c;this.setViewport(0,0,a,b)};this.setViewport=function(a,b,c,d){da.set(a,U-b-d,c,d);Z.viewport(nb.copy(da).multiplyScalar(wa))};this.setScissor=function(a,b,c,d){fa.set(a,U-b-d,c,d);Z.scissor(X.copy(fa).multiplyScalar(wa))};this.setScissorTest=function(a){Z.setScissorTest($e=a)};this.getClearColor=function(){return ja.getClearColor()};\nthis.setClearColor=function(){ja.setClearColor.apply(ja,arguments)};this.getClearAlpha=function(){return ja.getClearAlpha()};this.setClearAlpha=function(){ja.setClearAlpha.apply(ja,arguments)};this.clear=function(a,b,c){var d=0;if(void 0===a||a)d|=F.COLOR_BUFFER_BIT;if(void 0===b||b)d|=F.DEPTH_BUFFER_BIT;if(void 0===c||c)d|=F.STENCIL_BUFFER_BIT;F.clear(d)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,\n!0)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};this.dispose=function(){v.removeEventListener(\"webglcontextlost\",c,!1);v.removeEventListener(\"webglcontextrestored\",d,!1);sa.dispose();ka.dispose()};this.renderBufferImmediate=function(a,b,c){Z.initAttributes();var d=ca.get(a);a.hasPositions&&!d.position&&(d.position=F.createBuffer());a.hasNormals&&!d.normal&&(d.normal=F.createBuffer());a.hasUvs&&!d.uv&&(d.uv=F.createBuffer());a.hasColors&&!d.color&&(d.color=F.createBuffer());\nb=b.getAttributes();a.hasPositions&&(F.bindBuffer(F.ARRAY_BUFFER,d.position),F.bufferData(F.ARRAY_BUFFER,a.positionArray,F.DYNAMIC_DRAW),Z.enableAttribute(b.position),F.vertexAttribPointer(b.position,3,F.FLOAT,!1,0,0));if(a.hasNormals){F.bindBuffer(F.ARRAY_BUFFER,d.normal);if(!c.isMeshPhongMaterial&&!c.isMeshStandardMaterial&&!c.isMeshNormalMaterial&&!0===c.flatShading)for(var e=0,f=3*a.count;e<f;e+=9){var g=a.normalArray,h=(g[e+0]+g[e+3]+g[e+6])/3,k=(g[e+1]+g[e+4]+g[e+7])/3,m=(g[e+2]+g[e+5]+g[e+\n8])/3;g[e+0]=h;g[e+1]=k;g[e+2]=m;g[e+3]=h;g[e+4]=k;g[e+5]=m;g[e+6]=h;g[e+7]=k;g[e+8]=m}F.bufferData(F.ARRAY_BUFFER,a.normalArray,F.DYNAMIC_DRAW);Z.enableAttribute(b.normal);F.vertexAttribPointer(b.normal,3,F.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(F.bindBuffer(F.ARRAY_BUFFER,d.uv),F.bufferData(F.ARRAY_BUFFER,a.uvArray,F.DYNAMIC_DRAW),Z.enableAttribute(b.uv),F.vertexAttribPointer(b.uv,2,F.FLOAT,!1,0,0));a.hasColors&&0!==c.vertexColors&&(F.bindBuffer(F.ARRAY_BUFFER,d.color),F.bufferData(F.ARRAY_BUFFER,a.colorArray,\nF.DYNAMIC_DRAW),Z.enableAttribute(b.color),F.vertexAttribPointer(b.color,3,F.FLOAT,!1,0,0));Z.disableUnusedAttributes();F.drawArrays(F.TRIANGLES,0,a.count);a.count=0};this.renderBufferDirect=function(a,b,c,d,e,f){var g=e.isMesh&&0>e.matrixWorld.determinant();Z.setMaterial(d,g);var h=u(a,b,d,e);a=c.id+\"_\"+h.id+\"_\"+(!0===d.wireframe);var k=!1;a!==R&&(R=a,k=!0);e.morphTargetInfluences&&(xa.update(e,c,d,h),k=!0);var g=c.index,m=c.attributes.position;b=1;!0===d.wireframe&&(g=ra.getWireframeAttribute(c),\nb=2);a=ya;if(null!==g){var q=qa.get(g);a=za;a.setIndex(q)}if(k){k=void 0;if(c&&c.isInstancedBufferGeometry&&null===ia.get(\"ANGLE_instanced_arrays\"))console.error(\"THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");else{void 0===k&&(k=0);Z.initAttributes();var n=c.attributes,h=h.getAttributes(),l=d.defaultAttributeValues;for(J in h){var r=h[J];if(0<=r){var t=n[J];if(void 0!==t){var v=t.normalized,p=t.itemSize,\nw=qa.get(t);if(void 0!==w){var A=w.buffer,y=w.type,w=w.bytesPerElement;if(t.isInterleavedBufferAttribute){var z=t.data,I=z.stride,t=t.offset;z&&z.isInstancedInterleavedBuffer?(Z.enableAttributeAndDivisor(r,z.meshPerAttribute),void 0===c.maxInstancedCount&&(c.maxInstancedCount=z.meshPerAttribute*z.count)):Z.enableAttribute(r);F.bindBuffer(F.ARRAY_BUFFER,A);F.vertexAttribPointer(r,p,y,v,I*w,(k*I+t)*w)}else t.isInstancedBufferAttribute?(Z.enableAttributeAndDivisor(r,t.meshPerAttribute),void 0===c.maxInstancedCount&&\n(c.maxInstancedCount=t.meshPerAttribute*t.count)):Z.enableAttribute(r),F.bindBuffer(F.ARRAY_BUFFER,A),F.vertexAttribPointer(r,p,y,v,0,k*p*w)}}else if(void 0!==l&&(v=l[J],void 0!==v))switch(v.length){case 2:F.vertexAttrib2fv(r,v);break;case 3:F.vertexAttrib3fv(r,v);break;case 4:F.vertexAttrib4fv(r,v);break;default:F.vertexAttrib1fv(r,v)}}}Z.disableUnusedAttributes()}null!==g&&F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,q.buffer)}q=0;null!==g?q=g.count:void 0!==m&&(q=m.count);g=c.drawRange.start*b;m=null!==\nf?f.start*b:0;var J=Math.max(g,m);f=Math.max(0,Math.min(q,g+c.drawRange.count*b,m+(null!==f?f.count*b:Infinity))-1-J+1);if(0!==f){if(e.isMesh)if(!0===d.wireframe)Z.setLineWidth(d.wireframeLinewidth*(null===N?wa:1)),a.setMode(F.LINES);else switch(e.drawMode){case 0:a.setMode(F.TRIANGLES);break;case 1:a.setMode(F.TRIANGLE_STRIP);break;case 2:a.setMode(F.TRIANGLE_FAN)}else e.isLine?(d=d.linewidth,void 0===d&&(d=1),Z.setLineWidth(d*(null===N?wa:1)),e.isLineSegments?a.setMode(F.LINES):e.isLineLoop?a.setMode(F.LINE_LOOP):\na.setMode(F.LINE_STRIP)):e.isPoints&&a.setMode(F.POINTS);c&&c.isInstancedBufferGeometry?0<c.maxInstancedCount&&a.renderInstances(c,J,f):a.render(J,f)}};this.compile=function(a,b){D.length=0;C.length=0;a.traverse(function(a){a.isLight&&(D.push(a),a.castShadow&&C.push(a))});ua.setup(D,C,b);a.traverse(function(b){if(b.material)if(Array.isArray(b.material))for(var c=0;c<b.material.length;c++)n(b.material[c],a.fog,b);else n(b.material,a.fog,b)})};var Fa=!1,Ca=null;this.animate=function(a){Ca=a;Fa||((a=\nka.getDevice())&&a.isPresenting?a.requestAnimationFrame(h):window.requestAnimationFrame(h),Fa=!0)};this.render=function(a,b,c,d){if(!b||!b.isCamera)console.error(\"THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.\");else if(!L){R=\"\";P=-1;V=null;!0===a.autoUpdate&&a.updateMatrixWorld();null===b.parent&&b.updateMatrixWorld();ka.enabled&&(b=ka.getCamera(b));td.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);$d.setFromMatrix(td);D.length=0;C.length=0;H.length=0;la.length=\n0;ae=this.localClippingEnabled;sd=Ja.init(this.clippingPlanes,ae,b);E=sa.get(a,b);E.init();k(a,b,S.sortObjects);!0===S.sortObjects&&E.sort();ga.updateVideoTextures();sd&&Ja.beginShadows();Ea.render(C,a,b);ua.setup(D,C,b);sd&&Ja.endShadows();ba.frame++;ba.calls=0;ba.vertices=0;ba.faces=0;ba.points=0;void 0===c&&(c=null);this.setRenderTarget(c);ja.render(E,a,b,d);d=E.opaque;var e=E.transparent;if(a.overrideMaterial){var f=a.overrideMaterial;d.length&&m(d,a,b,f);e.length&&m(e,a,b,f)}else d.length&&m(d,\na,b),e.length&&m(e,a,b);Ba.render(H,a,b);Aa.render(la,a,b,nb);c&&ga.updateRenderTargetMipmap(c);Z.buffers.depth.setTest(!0);Z.buffers.depth.setMask(!0);Z.buffers.color.setMask(!0);Z.setPolygonOffset(!1);ka.enabled&&ka.submitFrame()}};this.setFaceCulling=function(a,b){Z.setCullFace(a);Z.setFlipSided(0===b)};this.allocTextureUnit=function(){var a=Y;a>=T.maxTextures&&console.warn(\"THREE.WebGLRenderer: Trying to use \"+a+\" texture units while this GPU supports only \"+T.maxTextures);Y+=1;return a};this.setTexture2D=\nfunction(){var a=!1;return function(b,c){b&&b.isWebGLRenderTarget&&(a||(console.warn(\"THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.\"),a=!0),b=b.texture);ga.setTexture2D(b,c)}}();this.setTexture=function(){var a=!1;return function(b,c){a||(console.warn(\"THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.\"),a=!0);ga.setTexture2D(b,c)}}();this.setTextureCube=function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTargetCube&&\n(a||(console.warn(\"THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.\"),a=!0),b=b.texture);b&&b.isCubeTexture||Array.isArray(b.image)&&6===b.image.length?ga.setTextureCube(b,c):ga.setTextureCubeDynamic(b,c)}}();this.getRenderTarget=function(){return N};this.setRenderTarget=function(a){(N=a)&&void 0===ca.get(a).__webglFramebuffer&&ga.setupRenderTarget(a);var b=null,c=!1;a?(b=ca.get(a).__webglFramebuffer,a.isWebGLRenderTargetCube&&(b=\nb[a.activeCubeFace],c=!0),nb.copy(a.viewport),X.copy(a.scissor),G=a.scissorTest):(nb.copy(da).multiplyScalar(wa),X.copy(fa).multiplyScalar(wa),G=$e);M!==b&&(F.bindFramebuffer(F.FRAMEBUFFER,b),M=b);Z.viewport(nb);Z.scissor(X);Z.setScissorTest(G);c&&(c=ca.get(a.texture),F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_CUBE_MAP_POSITIVE_X+a.activeCubeFace,c.__webglTexture,a.activeMipMapLevel))};this.readRenderTargetPixels=function(a,b,c,d,e,f){if(a&&a.isWebGLRenderTarget){var g=ca.get(a).__webglFramebuffer;\nif(g){var h=!1;g!==M&&(F.bindFramebuffer(F.FRAMEBUFFER,g),h=!0);try{var k=a.texture,m=k.format,q=k.type;1023!==m&&pa.convert(m)!==F.getParameter(F.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.\"):1009===q||pa.convert(q)===F.getParameter(F.IMPLEMENTATION_COLOR_READ_TYPE)||1015===q&&(ia.get(\"OES_texture_float\")||ia.get(\"WEBGL_color_buffer_float\"))||1016===q&&ia.get(\"EXT_color_buffer_half_float\")?\nF.checkFramebufferStatus(F.FRAMEBUFFER)===F.FRAMEBUFFER_COMPLETE?0<=b&&b<=a.width-d&&0<=c&&c<=a.height-e&&F.readPixels(b,c,d,e,pa.convert(m),pa.convert(q),f):console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.\"):console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.\")}finally{h&&F.bindFramebuffer(F.FRAMEBUFFER,M)}}}else console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.\")}}\nfunction Pb(a,b){this.name=\"\";this.color=new H(a);this.density=void 0!==b?b:2.5E-4}function Qb(a,b,c){this.name=\"\";this.color=new H(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3}function vd(){x.call(this);this.type=\"Scene\";this.overrideMaterial=this.fog=this.background=null;this.autoUpdate=!0}function de(a,b,c,d,e){x.call(this);this.lensFlares=[];this.positionScreen=new p;this.customUpdateCallback=void 0;void 0!==a&&this.add(a,b,c,d,e)}function hb(a){P.call(this);this.type=\"SpriteMaterial\";\nthis.color=new H(16777215);this.map=null;this.rotation=0;this.lights=this.fog=!1;this.setValues(a)}function Cc(a){x.call(this);this.type=\"Sprite\";this.material=void 0!==a?a:new hb}function Dc(){x.call(this);this.type=\"LOD\";Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Ec(a,b){a=a||[];this.bones=a.slice(0);this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===b)this.calculateInverses();else if(this.bones.length===b.length)this.boneInverses=b.slice(0);else for(console.warn(\"THREE.Skeleton boneInverses is the wrong length.\"),\nthis.boneInverses=[],a=0,b=this.bones.length;a<b;a++)this.boneInverses.push(new O)}function wd(){x.call(this);this.type=\"Bone\"}function xd(a,b){ra.call(this,a,b);this.type=\"SkinnedMesh\";this.bindMode=\"attached\";this.bindMatrix=new O;this.bindMatrixInverse=new O;a=this.initBones();a=new Ec(a);this.bind(a,this.matrixWorld);this.normalizeSkinWeights()}function W(a){P.call(this);this.type=\"LineBasicMaterial\";this.color=new H(16777215);this.linewidth=1;this.linejoin=this.linecap=\"round\";this.lights=!1;\nthis.setValues(a)}function sa(a,b,c){if(1===c)return console.warn(\"THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.\"),new X(a,b);x.call(this);this.type=\"Line\";this.geometry=void 0!==a?a:new E;this.material=void 0!==b?b:new W({color:16777215*Math.random()})}function X(a,b){sa.call(this,a,b);this.type=\"LineSegments\"}function yd(a,b){sa.call(this,a,b);this.type=\"LineLoop\"}function Ka(a){P.call(this);this.type=\"PointsMaterial\";this.color=new H(16777215);\nthis.map=null;this.size=1;this.sizeAttenuation=!0;this.lights=!1;this.setValues(a)}function Rb(a,b){x.call(this);this.type=\"Points\";this.geometry=void 0!==a?a:new E;this.material=void 0!==b?b:new Ka({color:16777215*Math.random()})}function Fc(){x.call(this);this.type=\"Group\"}function ee(a,b,c,d,e,f,g,h,k){function m(){a.removeEventListener(\"loadeddata\",m,!1);q.needsUpdate=!0}U.call(this,a,b,c,d,e,f,g,h,k);this.generateMipmaps=!1;var q=this;a.addEventListener(\"loadeddata\",m,!1)}function Sb(a,b,c,d,\ne,f,g,h,k,m,q,n){U.call(this,null,f,g,h,k,m,d,e,q,n);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=this.flipY=!1}function Gc(a,b,c,d,e,f,g,h,k,m){m=void 0!==m?m:1026;if(1026!==m&&1027!==m)throw Error(\"DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat\");void 0===c&&1026===m&&(c=1012);void 0===c&&1027===m&&(c=1020);U.call(this,null,d,e,f,g,h,m,c,k);this.image={width:a,height:b};this.magFilter=void 0!==g?g:1003;this.minFilter=void 0!==h?h:1003;this.generateMipmaps=\nthis.flipY=!1}function Tb(a){E.call(this);this.type=\"WireframeGeometry\";var b=[],c,d,e,f=[0,0],g={},h=[\"a\",\"b\",\"c\"];if(a&&a.isGeometry){var k=a.faces;var m=0;for(d=k.length;m<d;m++){var q=k[m];for(c=0;3>c;c++){var n=q[h[c]];var u=q[h[(c+1)%3]];f[0]=Math.min(n,u);f[1]=Math.max(n,u);n=f[0]+\",\"+f[1];void 0===g[n]&&(g[n]={index1:f[0],index2:f[1]})}}for(n in g)m=g[n],h=a.vertices[m.index1],b.push(h.x,h.y,h.z),h=a.vertices[m.index2],b.push(h.x,h.y,h.z)}else if(a&&a.isBufferGeometry){var h=new p;if(null!==\na.index){k=a.attributes.position;q=a.index;var l=a.groups;0===l.length&&(l=[{start:0,count:q.count,materialIndex:0}]);a=0;for(e=l.length;a<e;++a)for(m=l[a],c=m.start,d=m.count,m=c,d=c+d;m<d;m+=3)for(c=0;3>c;c++)n=q.getX(m+c),u=q.getX(m+(c+1)%3),f[0]=Math.min(n,u),f[1]=Math.max(n,u),n=f[0]+\",\"+f[1],void 0===g[n]&&(g[n]={index1:f[0],index2:f[1]});for(n in g)m=g[n],h.fromBufferAttribute(k,m.index1),b.push(h.x,h.y,h.z),h.fromBufferAttribute(k,m.index2),b.push(h.x,h.y,h.z)}else for(k=a.attributes.position,\nm=0,d=k.count/3;m<d;m++)for(c=0;3>c;c++)g=3*m+c,h.fromBufferAttribute(k,g),b.push(h.x,h.y,h.z),g=3*m+(c+1)%3,h.fromBufferAttribute(k,g),b.push(h.x,h.y,h.z)}this.addAttribute(\"position\",new B(b,3))}function Hc(a,b,c){L.call(this);this.type=\"ParametricGeometry\";this.parameters={func:a,slices:b,stacks:c};this.fromBufferGeometry(new Ub(a,b,c));this.mergeVertices()}function Ub(a,b,c){E.call(this);this.type=\"ParametricBufferGeometry\";this.parameters={func:a,slices:b,stacks:c};var d=[],e=[],f=[],g=[],h=\nnew p,k=new p,m=new p,q=new p,n=new p,u,l,t=b+1;for(u=0;u<=c;u++){var v=u/c;for(l=0;l<=b;l++){var w=l/b,k=a(w,v,k);e.push(k.x,k.y,k.z);0<=w-1E-5?(m=a(w-1E-5,v,m),q.subVectors(k,m)):(m=a(w+1E-5,v,m),q.subVectors(m,k));0<=v-1E-5?(m=a(w,v-1E-5,m),n.subVectors(k,m)):(m=a(w,v+1E-5,m),n.subVectors(m,k));h.crossVectors(q,n).normalize();f.push(h.x,h.y,h.z);g.push(w,v)}}for(u=0;u<c;u++)for(l=0;l<b;l++)a=u*t+l+1,h=(u+1)*t+l+1,k=(u+1)*t+l,d.push(u*t+l,a,k),d.push(a,h,k);this.setIndex(d);this.addAttribute(\"position\",\nnew B(e,3));this.addAttribute(\"normal\",new B(f,3));this.addAttribute(\"uv\",new B(g,2))}function Ic(a,b,c,d){L.call(this);this.type=\"PolyhedronGeometry\";this.parameters={vertices:a,indices:b,radius:c,detail:d};this.fromBufferGeometry(new ja(a,b,c,d));this.mergeVertices()}function ja(a,b,c,d){function e(a){h.push(a.x,a.y,a.z)}function f(b,c){b*=3;c.x=a[b+0];c.y=a[b+1];c.z=a[b+2]}function g(a,b,c,d){0>d&&1===a.x&&(k[b]=a.x-1);0===c.x&&0===c.z&&(k[b]=d/2/Math.PI+.5)}E.call(this);this.type=\"PolyhedronBufferGeometry\";\nthis.parameters={vertices:a,indices:b,radius:c,detail:d};c=c||1;d=d||0;var h=[],k=[];(function(a){for(var c=new p,d=new p,g=new p,h=0;h<b.length;h+=3){f(b[h+0],c);f(b[h+1],d);f(b[h+2],g);var k,m,l=c,z=d,y=g,I=Math.pow(2,a),A=[];for(m=0;m<=I;m++){A[m]=[];var J=l.clone().lerp(y,m/I),x=z.clone().lerp(y,m/I),B=I-m;for(k=0;k<=B;k++)A[m][k]=0===k&&m===I?J:J.clone().lerp(x,k/B)}for(m=0;m<I;m++)for(k=0;k<2*(I-m)-1;k++)l=Math.floor(k/2),0===k%2?(e(A[m][l+1]),e(A[m+1][l]),e(A[m][l])):(e(A[m][l+1]),e(A[m+1][l+\n1]),e(A[m+1][l]))}})(d);(function(a){for(var b=new p,c=0;c<h.length;c+=3)b.x=h[c+0],b.y=h[c+1],b.z=h[c+2],b.normalize().multiplyScalar(a),h[c+0]=b.x,h[c+1]=b.y,h[c+2]=b.z})(c);(function(){for(var a=new p,b=0;b<h.length;b+=3)a.x=h[b+0],a.y=h[b+1],a.z=h[b+2],k.push(Math.atan2(a.z,-a.x)/2/Math.PI+.5,1-(Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5));for(var a=new p,b=new p,c=new p,d=new p,e=new D,f=new D,l=new D,w=0,z=0;w<h.length;w+=9,z+=6){a.set(h[w+0],h[w+1],h[w+2]);b.set(h[w+3],h[w+4],h[w+\n5]);c.set(h[w+6],h[w+7],h[w+8]);e.set(k[z+0],k[z+1]);f.set(k[z+2],k[z+3]);l.set(k[z+4],k[z+5]);d.copy(a).add(b).add(c).divideScalar(3);var y=Math.atan2(d.z,-d.x);g(e,z+0,a,y);g(f,z+2,b,y);g(l,z+4,c,y)}for(a=0;a<k.length;a+=6)b=k[a+0],c=k[a+2],d=k[a+4],e=Math.min(b,c,d),.9<Math.max(b,c,d)&&.1>e&&(.2>b&&(k[a+0]+=1),.2>c&&(k[a+2]+=1),.2>d&&(k[a+4]+=1))})();this.addAttribute(\"position\",new B(h,3));this.addAttribute(\"normal\",new B(h.slice(),3));this.addAttribute(\"uv\",new B(k,2));0===d?this.computeVertexNormals():\nthis.normalizeNormals()}function Jc(a,b){L.call(this);this.type=\"TetrahedronGeometry\";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Vb(a,b));this.mergeVertices()}function Vb(a,b){ja.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type=\"TetrahedronBufferGeometry\";this.parameters={radius:a,detail:b}}function Kc(a,b){L.call(this);this.type=\"OctahedronGeometry\";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new ub(a,b));this.mergeVertices()}\nfunction ub(a,b){ja.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type=\"OctahedronBufferGeometry\";this.parameters={radius:a,detail:b}}function Lc(a,b){L.call(this);this.type=\"IcosahedronGeometry\";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Wb(a,b));this.mergeVertices()}function Wb(a,b){var c=(1+Math.sqrt(5))/2;ja.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,\n5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type=\"IcosahedronBufferGeometry\";this.parameters={radius:a,detail:b}}function Mc(a,b){L.call(this);this.type=\"DodecahedronGeometry\";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Xb(a,b));this.mergeVertices()}function Xb(a,b){var c=(1+Math.sqrt(5))/2,d=1/c;ja.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,\nd,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,b);this.type=\"DodecahedronBufferGeometry\";this.parameters={radius:a,detail:b}}function Nc(a,b,c,d,e,f){L.call(this);this.type=\"TubeGeometry\";this.parameters={path:a,\ntubularSegments:b,radius:c,radialSegments:d,closed:e};void 0!==f&&console.warn(\"THREE.TubeGeometry: taper has been removed.\");a=new Yb(a,b,c,d,e);this.tangents=a.tangents;this.normals=a.normals;this.binormals=a.binormals;this.fromBufferGeometry(a);this.mergeVertices()}function Yb(a,b,c,d,e){function f(e){q=a.getPointAt(e/b,q);var f=g.normals[e];e=g.binormals[e];for(l=0;l<=d;l++){var m=l/d*Math.PI*2,n=Math.sin(m),m=-Math.cos(m);k.x=m*f.x+n*e.x;k.y=m*f.y+n*e.y;k.z=m*f.z+n*e.z;k.normalize();t.push(k.x,\nk.y,k.z);h.x=q.x+c*k.x;h.y=q.y+c*k.y;h.z=q.z+c*k.z;r.push(h.x,h.y,h.z)}}E.call(this);this.type=\"TubeBufferGeometry\";this.parameters={path:a,tubularSegments:b,radius:c,radialSegments:d,closed:e};b=b||64;c=c||1;d=d||8;e=e||!1;var g=a.computeFrenetFrames(b,e);this.tangents=g.tangents;this.normals=g.normals;this.binormals=g.binormals;var h=new p,k=new p,m=new D,q=new p,n,l,r=[],t=[],v=[],w=[];for(n=0;n<b;n++)f(n);f(!1===e?b:0);for(n=0;n<=b;n++)for(l=0;l<=d;l++)m.x=n/b,m.y=l/d,v.push(m.x,m.y);(function(){for(l=\n1;l<=b;l++)for(n=1;n<=d;n++){var a=(d+1)*l+(n-1),c=(d+1)*l+n,e=(d+1)*(l-1)+n;w.push((d+1)*(l-1)+(n-1),a,e);w.push(a,c,e)}})();this.setIndex(w);this.addAttribute(\"position\",new B(r,3));this.addAttribute(\"normal\",new B(t,3));this.addAttribute(\"uv\",new B(v,2))}function Oc(a,b,c,d,e,f,g){L.call(this);this.type=\"TorusKnotGeometry\";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};void 0!==g&&console.warn(\"THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.\");\nthis.fromBufferGeometry(new Zb(a,b,c,d,e,f));this.mergeVertices()}function Zb(a,b,c,d,e,f){function g(a,b,c,d,e){var f=Math.sin(a);b=c/b*a;c=Math.cos(b);e.x=d*(2+c)*.5*Math.cos(a);e.y=d*(2+c)*f*.5;e.z=d*Math.sin(b)*.5}E.call(this);this.type=\"TorusKnotBufferGeometry\";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};a=a||1;b=b||.4;c=Math.floor(c)||64;d=Math.floor(d)||8;e=e||2;f=f||3;var h=[],k=[],m=[],q=[],n,l=new p,r=new p,t=new p,v=new p,w=new p,z=new p,y=new p;for(n=0;n<=\nc;++n){var I=n/c*e*Math.PI*2;g(I,e,f,a,t);g(I+.01,e,f,a,v);z.subVectors(v,t);y.addVectors(v,t);w.crossVectors(z,y);y.crossVectors(w,z);w.normalize();y.normalize();for(I=0;I<=d;++I){var A=I/d*Math.PI*2,J=-b*Math.cos(A),A=b*Math.sin(A);l.x=t.x+(J*y.x+A*w.x);l.y=t.y+(J*y.y+A*w.y);l.z=t.z+(J*y.z+A*w.z);k.push(l.x,l.y,l.z);r.subVectors(l,t).normalize();m.push(r.x,r.y,r.z);q.push(n/c);q.push(I/d)}}for(I=1;I<=c;I++)for(n=1;n<=d;n++)a=(d+1)*I+(n-1),b=(d+1)*I+n,e=(d+1)*(I-1)+n,h.push((d+1)*(I-1)+(n-1),a,e),\nh.push(a,b,e);this.setIndex(h);this.addAttribute(\"position\",new B(k,3));this.addAttribute(\"normal\",new B(m,3));this.addAttribute(\"uv\",new B(q,2))}function Pc(a,b,c,d,e){L.call(this);this.type=\"TorusGeometry\";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};this.fromBufferGeometry(new $b(a,b,c,d,e));this.mergeVertices()}function $b(a,b,c,d,e){E.call(this);this.type=\"TorusBufferGeometry\";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};a=a||1;b=b||\n.4;c=Math.floor(c)||8;d=Math.floor(d)||6;e=e||2*Math.PI;var f=[],g=[],h=[],k=[],m=new p,q=new p,n=new p,l,r;for(l=0;l<=c;l++)for(r=0;r<=d;r++){var t=r/d*e,v=l/c*Math.PI*2;q.x=(a+b*Math.cos(v))*Math.cos(t);q.y=(a+b*Math.cos(v))*Math.sin(t);q.z=b*Math.sin(v);g.push(q.x,q.y,q.z);m.x=a*Math.cos(t);m.y=a*Math.sin(t);n.subVectors(q,m).normalize();h.push(n.x,n.y,n.z);k.push(r/d);k.push(l/c)}for(l=1;l<=c;l++)for(r=1;r<=d;r++)a=(d+1)*(l-1)+r-1,b=(d+1)*(l-1)+r,e=(d+1)*l+r,f.push((d+1)*l+r-1,a,e),f.push(a,b,\ne);this.setIndex(f);this.addAttribute(\"position\",new B(g,3));this.addAttribute(\"normal\",new B(h,3));this.addAttribute(\"uv\",new B(k,2))}function bf(a,b,c,d,e){for(var f,g=0,h=b,k=c-d;h<c;h+=d)g+=(a[k]-a[h])*(a[h+1]+a[k+1]),k=h;if(e===0<g)for(e=b;e<c;e+=d)f=cf(e,a[e],a[e+1],f);else for(e=c-d;e>=b;e-=d)f=cf(e,a[e],a[e+1],f);f&&vb(f,f.next)&&(Qc(f),f=f.next);return f}function Rc(a,b){if(!a)return a;b||(b=a);do{var c=!1;if(a.steiner||!vb(a,a.next)&&0!==ta(a.prev,a,a.next))a=a.next;else{Qc(a);a=b=a.prev;\nif(a===a.next)break;c=!0}}while(c||a!==b);return b}function Sc(a,b,c,d,e,f,g){if(a){if(!g&&f){var h=a,k=h;do null===k.z&&(k.z=fe(k.x,k.y,d,e,f)),k.prevZ=k.prev,k=k.nextZ=k.next;while(k!==h);k.prevZ.nextZ=null;k.prevZ=null;var h=k,m,q,n,l,r=1;do{k=h;var t=h=null;for(q=0;k;){q++;var p=k;for(m=n=0;m<r&&(n++,p=p.nextZ,p);m++);for(l=r;0<n||0<l&&p;)0!==n&&(0===l||!p||k.z<=p.z)?(m=k,k=k.nextZ,n--):(m=p,p=p.nextZ,l--),t?t.nextZ=m:h=m,m.prevZ=t,t=m;k=p}t.nextZ=null;r*=2}while(1<q)}for(h=a;a.prev!==a.next;){k=\na.prev;p=a.next;if(f)a:{t=a;l=d;var w=e,z=f;q=t.prev;n=t;r=t.next;if(0<=ta(q,n,r))t=!1;else{var y=q.x>n.x?q.x>r.x?q.x:r.x:n.x>r.x?n.x:r.x,I=q.y>n.y?q.y>r.y?q.y:r.y:n.y>r.y?n.y:r.y;m=fe(q.x<n.x?q.x<r.x?q.x:r.x:n.x<r.x?n.x:r.x,q.y<n.y?q.y<r.y?q.y:r.y:n.y<r.y?n.y:r.y,l,w,z);l=fe(y,I,l,w,z);for(w=t.nextZ;w&&w.z<=l;){if(w!==t.prev&&w!==t.next&&zd(q.x,q.y,n.x,n.y,r.x,r.y,w.x,w.y)&&0<=ta(w.prev,w,w.next)){t=!1;break a}w=w.nextZ}for(w=t.prevZ;w&&w.z>=m;){if(w!==t.prev&&w!==t.next&&zd(q.x,q.y,n.x,n.y,r.x,\nr.y,w.x,w.y)&&0<=ta(w.prev,w,w.next)){t=!1;break a}w=w.prevZ}t=!0}}else a:if(t=a,q=t.prev,n=t,r=t.next,0<=ta(q,n,r))t=!1;else{for(m=t.next.next;m!==t.prev;){if(zd(q.x,q.y,n.x,n.y,r.x,r.y,m.x,m.y)&&0<=ta(m.prev,m,m.next)){t=!1;break a}m=m.next}t=!0}if(t)b.push(k.i/c),b.push(a.i/c),b.push(p.i/c),Qc(a),h=a=p.next;else if(a=p,a===h){if(!g)Sc(Rc(a),b,c,d,e,f,1);else if(1===g){g=b;h=c;k=a;do p=k.prev,t=k.next.next,!vb(p,t)&&df(p,k,k.next,t)&&Tc(p,t)&&Tc(t,p)&&(g.push(p.i/h),g.push(k.i/h),g.push(t.i/h),\nQc(k),Qc(k.next),k=a=t),k=k.next;while(k!==a);a=k;Sc(a,b,c,d,e,f,2)}else if(2===g)a:{g=a;do{for(h=g.next.next;h!==g.prev;){if(k=g.i!==h.i){k=g;p=h;if(t=k.next.i!==p.i&&k.prev.i!==p.i){b:{t=k;do{if(t.i!==k.i&&t.next.i!==k.i&&t.i!==p.i&&t.next.i!==p.i&&df(t,t.next,k,p)){t=!0;break b}t=t.next}while(t!==k);t=!1}t=!t}if(t=t&&Tc(k,p)&&Tc(p,k)){t=k;q=!1;n=(k.x+p.x)/2;p=(k.y+p.y)/2;do t.y>p!==t.next.y>p&&t.next.y!==t.y&&n<(t.next.x-t.x)*(p-t.y)/(t.next.y-t.y)+t.x&&(q=!q),t=t.next;while(t!==k);t=q}k=t}if(k){a=\nef(g,h);g=Rc(g,g.next);a=Rc(a,a.next);Sc(g,b,c,d,e,f);Sc(a,b,c,d,e,f);break a}h=h.next}g=g.next}while(g!==a)}break}}}}function Hg(a,b){return a.x-b.x}function Ig(a,b){var c=b,d=a.x,e=a.y,f=-Infinity;do{if(e<=c.y&&e>=c.next.y&&c.next.y!==c.y){var g=c.x+(e-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(g<=d&&g>f){f=g;if(g===d){if(e===c.y)return c;if(e===c.next.y)return c.next}var h=c.x<c.next.x?c:c.next}}c=c.next}while(c!==b);if(!h)return null;if(d===f)return h.prev;b=h;for(var g=h.x,k=h.y,m=Infinity,q,c=h.next;c!==\nb;)d>=c.x&&c.x>=g&&d!==c.x&&zd(e<k?d:f,e,g,k,e<k?f:d,e,c.x,c.y)&&(q=Math.abs(e-c.y)/(d-c.x),(q<m||q===m&&c.x>h.x)&&Tc(c,a)&&(h=c,m=q)),c=c.next;return h}function fe(a,b,c,d,e){a=32767*(a-c)*e;b=32767*(b-d)*e;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function Jg(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function zd(a,b,c,d,e,f,g,h){return 0<=(e-\ng)*(b-h)-(a-g)*(f-h)&&0<=(a-g)*(d-h)-(c-g)*(b-h)&&0<=(c-g)*(f-h)-(e-g)*(d-h)}function ta(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function vb(a,b){return a.x===b.x&&a.y===b.y}function df(a,b,c,d){return vb(a,b)&&vb(c,d)||vb(a,d)&&vb(c,b)?!0:0<ta(a,b,c)!==0<ta(a,b,d)&&0<ta(c,d,a)!==0<ta(c,d,b)}function Tc(a,b){return 0>ta(a.prev,a,a.next)?0<=ta(a,b,a.next)&&0<=ta(a,a.prev,b):0>ta(a,b,a.prev)||0>ta(a,a.next,b)}function ef(a,b){var c=new ge(a.i,a.x,a.y),d=new ge(b.i,b.x,b.y),e=a.next,f=b.prev;\na.next=b;b.prev=a;c.next=e;e.prev=c;d.next=c;c.prev=d;f.next=d;d.prev=f;return d}function cf(a,b,c,d){a=new ge(a,b,c);d?(a.next=d.next,a.prev=d,d.next.prev=a,d.next=a):(a.prev=a,a.next=a);return a}function Qc(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function ge(a,b,c){this.i=a;this.x=b;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function ib(a,b){L.call(this);this.type=\"ExtrudeGeometry\";this.parameters=\n{shapes:a,options:b};this.fromBufferGeometry(new La(a,b));this.mergeVertices()}function La(a,b){\"undefined\"!==typeof a&&(E.call(this),this.type=\"ExtrudeBufferGeometry\",a=Array.isArray(a)?a:[a],this.addShapeList(a,b),this.computeVertexNormals())}function Uc(a,b){L.call(this);this.type=\"TextGeometry\";this.parameters={text:a,parameters:b};this.fromBufferGeometry(new ac(a,b));this.mergeVertices()}function ac(a,b){b=b||{};var c=b.font;if(!c||!c.isFont)return console.error(\"THREE.TextGeometry: font parameter is not an instance of THREE.Font.\"),\nnew L;a=c.generateShapes(a,b.size,b.curveSegments);b.amount=void 0!==b.height?b.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);La.call(this,a,b);this.type=\"TextBufferGeometry\"}function Vc(a,b,c,d,e,f,g){L.call(this);this.type=\"SphereGeometry\";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};this.fromBufferGeometry(new wb(a,b,c,d,e,f,g));this.mergeVertices()}\nfunction wb(a,b,c,d,e,f,g){E.call(this);this.type=\"SphereBufferGeometry\";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};a=a||1;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);d=void 0!==d?d:0;e=void 0!==e?e:2*Math.PI;f=void 0!==f?f:0;g=void 0!==g?g:Math.PI;var h=f+g,k,m,q=0,n=[],l=new p,r=new p,t=[],v=[],w=[],z=[];for(m=0;m<=c;m++){var y=[],I=m/c;for(k=0;k<=b;k++){var A=k/b;l.x=-a*Math.cos(d+A*e)*Math.sin(f+I*g);l.y=a*Math.cos(f+\nI*g);l.z=a*Math.sin(d+A*e)*Math.sin(f+I*g);v.push(l.x,l.y,l.z);r.set(l.x,l.y,l.z).normalize();w.push(r.x,r.y,r.z);z.push(A,1-I);y.push(q++)}n.push(y)}for(m=0;m<c;m++)for(k=0;k<b;k++)a=n[m][k+1],d=n[m][k],e=n[m+1][k],g=n[m+1][k+1],(0!==m||0<f)&&t.push(a,d,g),(m!==c-1||h<Math.PI)&&t.push(d,e,g);this.setIndex(t);this.addAttribute(\"position\",new B(v,3));this.addAttribute(\"normal\",new B(w,3));this.addAttribute(\"uv\",new B(z,2))}function Wc(a,b,c,d,e,f){L.call(this);this.type=\"RingGeometry\";this.parameters=\n{innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};this.fromBufferGeometry(new bc(a,b,c,d,e,f));this.mergeVertices()}function bc(a,b,c,d,e,f){E.call(this);this.type=\"RingBufferGeometry\";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};a=a||.5;b=b||1;e=void 0!==e?e:0;f=void 0!==f?f:2*Math.PI;c=void 0!==c?Math.max(3,c):8;d=void 0!==d?Math.max(1,d):1;var g=[],h=[],k=[],m=[],q=a,n=(b-a)/d,l=new p,r=new D,t,v;for(t=\n0;t<=d;t++){for(v=0;v<=c;v++)a=e+v/c*f,l.x=q*Math.cos(a),l.y=q*Math.sin(a),h.push(l.x,l.y,l.z),k.push(0,0,1),r.x=(l.x/b+1)/2,r.y=(l.y/b+1)/2,m.push(r.x,r.y);q+=n}for(t=0;t<d;t++)for(b=t*(c+1),v=0;v<c;v++)a=v+b,e=a+c+1,f=a+c+2,q=a+1,g.push(a,e,q),g.push(e,f,q);this.setIndex(g);this.addAttribute(\"position\",new B(h,3));this.addAttribute(\"normal\",new B(k,3));this.addAttribute(\"uv\",new B(m,2))}function Xc(a,b,c,d){L.call(this);this.type=\"LatheGeometry\";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};\nthis.fromBufferGeometry(new cc(a,b,c,d));this.mergeVertices()}function cc(a,b,c,d){E.call(this);this.type=\"LatheBufferGeometry\";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};b=Math.floor(b)||12;c=c||0;d=d||2*Math.PI;d=Q.clamp(d,0,2*Math.PI);var e=[],f=[],g=[],h=1/b,k=new p,m=new D,q;for(q=0;q<=b;q++){var n=c+q*h*d;var l=Math.sin(n),r=Math.cos(n);for(n=0;n<=a.length-1;n++)k.x=a[n].x*l,k.y=a[n].y,k.z=a[n].x*r,f.push(k.x,k.y,k.z),m.x=q/b,m.y=n/(a.length-1),g.push(m.x,m.y)}for(q=0;q<b;q++)for(n=\n0;n<a.length-1;n++)c=n+q*a.length,h=c+a.length,k=c+a.length+1,m=c+1,e.push(c,h,m),e.push(h,k,m);this.setIndex(e);this.addAttribute(\"position\",new B(f,3));this.addAttribute(\"uv\",new B(g,2));this.computeVertexNormals();if(d===2*Math.PI)for(d=this.attributes.normal.array,e=new p,f=new p,g=new p,c=b*a.length*3,n=q=0;q<a.length;q++,n+=3)e.x=d[n+0],e.y=d[n+1],e.z=d[n+2],f.x=d[c+n+0],f.y=d[c+n+1],f.z=d[c+n+2],g.addVectors(e,f).normalize(),d[n+0]=d[c+n+0]=g.x,d[n+1]=d[c+n+1]=g.y,d[n+2]=d[c+n+2]=g.z}function xb(a,\nb){L.call(this);this.type=\"ShapeGeometry\";\"object\"===typeof b&&(console.warn(\"THREE.ShapeGeometry: Options parameter has been removed.\"),b=b.curveSegments);this.parameters={shapes:a,curveSegments:b};this.fromBufferGeometry(new yb(a,b));this.mergeVertices()}function yb(a,b){function c(a){var c,h=e.length/3;a=a.extractPoints(b);var m=a.shape,q=a.holes;if(!1===$a.isClockWise(m))for(m=m.reverse(),a=0,c=q.length;a<c;a++){var l=q[a];!0===$a.isClockWise(l)&&(q[a]=l.reverse())}var p=$a.triangulateShape(m,\nq);a=0;for(c=q.length;a<c;a++)l=q[a],m=m.concat(l);a=0;for(c=m.length;a<c;a++)l=m[a],e.push(l.x,l.y,0),f.push(0,0,1),g.push(l.x,l.y);a=0;for(c=p.length;a<c;a++)m=p[a],d.push(m[0]+h,m[1]+h,m[2]+h),k+=3}E.call(this);this.type=\"ShapeBufferGeometry\";this.parameters={shapes:a,curveSegments:b};b=b||12;var d=[],e=[],f=[],g=[],h=0,k=0;if(!1===Array.isArray(a))c(a);else for(var m=0;m<a.length;m++)c(a[m]),this.addGroup(h,k,m),h+=k,k=0;this.setIndex(d);this.addAttribute(\"position\",new B(e,3));this.addAttribute(\"normal\",\nnew B(f,3));this.addAttribute(\"uv\",new B(g,2))}function ff(a,b){b.shapes=[];if(Array.isArray(a))for(var c=0,d=a.length;c<d;c++)b.shapes.push(a[c].uuid);else b.shapes.push(a.uuid);return b}function dc(a,b){E.call(this);this.type=\"EdgesGeometry\";this.parameters={thresholdAngle:b};var c=[];b=Math.cos(Q.DEG2RAD*(void 0!==b?b:1));var d=[0,0],e={},f=[\"a\",\"b\",\"c\"];if(a.isBufferGeometry){var g=new L;g.fromBufferGeometry(a)}else g=a.clone();g.mergeVertices();g.computeFaceNormals();a=g.vertices;g=g.faces;for(var h=\n0,k=g.length;h<k;h++)for(var m=g[h],q=0;3>q;q++){var n=m[f[q]];var l=m[f[(q+1)%3]];d[0]=Math.min(n,l);d[1]=Math.max(n,l);n=d[0]+\",\"+d[1];void 0===e[n]?e[n]={index1:d[0],index2:d[1],face1:h,face2:void 0}:e[n].face2=h}for(n in e)if(d=e[n],void 0===d.face2||g[d.face1].normal.dot(g[d.face2].normal)<=b)f=a[d.index1],c.push(f.x,f.y,f.z),f=a[d.index2],c.push(f.x,f.y,f.z);this.addAttribute(\"position\",new B(c,3))}function zb(a,b,c,d,e,f,g,h){L.call(this);this.type=\"CylinderGeometry\";this.parameters={radiusTop:a,\nradiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};this.fromBufferGeometry(new ab(a,b,c,d,e,f,g,h));this.mergeVertices()}function ab(a,b,c,d,e,f,g,h){function k(c){var e,f=new D,k=new p,u=0,v=!0===c?a:b,y=!0===c?1:-1;var x=t;for(e=1;e<=d;e++)n.push(0,w*y,0),l.push(0,y,0),r.push(.5,.5),t++;var B=t;for(e=0;e<=d;e++){var C=e/d*h+g,E=Math.cos(C),C=Math.sin(C);k.x=v*C;k.y=w*y;k.z=v*E;n.push(k.x,k.y,k.z);l.push(0,y,0);f.x=.5*E+.5;f.y=.5*C*y+.5;r.push(f.x,f.y);\nt++}for(e=0;e<d;e++)f=x+e,k=B+e,!0===c?q.push(k,k+1,f):q.push(k+1,k,f),u+=3;m.addGroup(z,u,!0===c?1:2);z+=u}E.call(this);this.type=\"CylinderBufferGeometry\";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};var m=this;a=void 0!==a?a:1;b=void 0!==b?b:1;c=c||1;d=Math.floor(d)||8;e=Math.floor(e)||1;f=void 0!==f?f:!1;g=void 0!==g?g:0;h=void 0!==h?h:2*Math.PI;var q=[],n=[],l=[],r=[],t=0,v=[],w=c/2,z=0;(function(){var f,k,u=new p,\nJ=new p,x=0,B=(b-a)/c;for(k=0;k<=e;k++){var D=[],C=k/e,E=C*(b-a)+a;for(f=0;f<=d;f++){var H=f/d,K=H*h+g,S=Math.sin(K),K=Math.cos(K);J.x=E*S;J.y=-C*c+w;J.z=E*K;n.push(J.x,J.y,J.z);u.set(S,B,K).normalize();l.push(u.x,u.y,u.z);r.push(H,1-C);D.push(t++)}v.push(D)}for(f=0;f<d;f++)for(k=0;k<e;k++)u=v[k+1][f],J=v[k+1][f+1],B=v[k][f+1],q.push(v[k][f],u,B),q.push(u,J,B),x+=6;m.addGroup(z,x,0);z+=x})();!1===f&&(0<a&&k(!0),0<b&&k(!1));this.setIndex(q);this.addAttribute(\"position\",new B(n,3));this.addAttribute(\"normal\",\nnew B(l,3));this.addAttribute(\"uv\",new B(r,2))}function Yc(a,b,c,d,e,f,g){zb.call(this,0,a,b,c,d,e,f,g);this.type=\"ConeGeometry\";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}function Zc(a,b,c,d,e,f,g){ab.call(this,0,a,b,c,d,e,f,g);this.type=\"ConeBufferGeometry\";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}function $c(a,b,c,d){L.call(this);this.type=\"CircleGeometry\";this.parameters=\n{radius:a,segments:b,thetaStart:c,thetaLength:d};this.fromBufferGeometry(new ec(a,b,c,d));this.mergeVertices()}function ec(a,b,c,d){E.call(this);this.type=\"CircleBufferGeometry\";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};a=a||1;b=void 0!==b?Math.max(3,b):8;c=void 0!==c?c:0;d=void 0!==d?d:2*Math.PI;var e=[],f=[],g=[],h=[],k,m=new p,q=new D;f.push(0,0,0);g.push(0,0,1);h.push(.5,.5);var n=0;for(k=3;n<=b;n++,k+=3){var l=c+n/b*d;m.x=a*Math.cos(l);m.y=a*Math.sin(l);f.push(m.x,m.y,\nm.z);g.push(0,0,1);q.x=(f[k]/a+1)/2;q.y=(f[k+1]/a+1)/2;h.push(q.x,q.y)}for(k=1;k<=b;k++)e.push(k,k+1,0);this.setIndex(e);this.addAttribute(\"position\",new B(f,3));this.addAttribute(\"normal\",new B(g,3));this.addAttribute(\"uv\",new B(h,2))}function fc(a){P.call(this);this.type=\"ShadowMaterial\";this.color=new H(0);this.opacity=1;this.transparent=this.lights=!0;this.setValues(a)}function gc(a){Fa.call(this,a);this.type=\"RawShaderMaterial\"}function Ua(a){P.call(this);this.defines={STANDARD:\"\"};this.type=\n\"MeshStandardMaterial\";this.color=new H(16777215);this.metalness=this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new H(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new D(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=\n.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=\"round\";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function Ab(a){Ua.call(this);this.defines={PHYSICAL:\"\"};this.type=\"MeshPhysicalMaterial\";this.reflectivity=.5;this.clearCoatRoughness=this.clearCoat=0;this.setValues(a)}function Ma(a){P.call(this);this.type=\"MeshPhongMaterial\";this.color=new H(16777215);this.specular=new H(1118481);this.shininess=30;this.lightMap=this.map=null;\nthis.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new H(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new D(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=\"round\";this.morphNormals=\nthis.morphTargets=this.skinning=!1;this.setValues(a)}function Bb(a){Ma.call(this);this.defines={TOON:\"\"};this.type=\"MeshToonMaterial\";this.gradientMap=null;this.setValues(a)}function Cb(a){P.call(this);this.type=\"MeshNormalMaterial\";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new D(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=\n!1;this.setValues(a)}function Db(a){P.call(this);this.type=\"MeshLambertMaterial\";this.color=new H(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new H(0);this.emissiveIntensity=1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=\"round\";this.morphNormals=this.morphTargets=\nthis.skinning=!1;this.setValues(a)}function Eb(a){W.call(this);this.type=\"LineDashedMaterial\";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(a)}function he(a,b,c){var d=this,e=!1,f=0,g=0,h=void 0;this.onStart=void 0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(a){g++;if(!1===e&&void 0!==d.onStart)d.onStart(a,f,g);e=!0};this.itemEnd=function(a){f++;if(void 0!==d.onProgress)d.onProgress(a,f,g);if(f===g&&(e=!1,void 0!==d.onLoad))d.onLoad()};this.itemError=function(a){if(void 0!==\nd.onError)d.onError(a)};this.resolveURL=function(a){return h?h(a):a};this.setURLModifier=function(a){h=a;return this}}function Na(a){this.manager=void 0!==a?a:xa}function gf(a){this.manager=void 0!==a?a:xa;this._parser=null}function ie(a){this.manager=void 0!==a?a:xa;this._parser=null}function ad(a){this.manager=void 0!==a?a:xa}function je(a){this.manager=void 0!==a?a:xa}function Ad(a){this.manager=void 0!==a?a:xa}function C(){this.type=\"Curve\";this.arcLengthDivisions=200}function Ba(a,b,c,d,e,f,\ng,h){C.call(this);this.type=\"EllipseCurve\";this.aX=a||0;this.aY=b||0;this.xRadius=c||1;this.yRadius=d||1;this.aStartAngle=e||0;this.aEndAngle=f||2*Math.PI;this.aClockwise=g||!1;this.aRotation=h||0}function hc(a,b,c,d,e,f){Ba.call(this,a,b,c,c,d,e,f);this.type=\"ArcCurve\"}function ke(){var a=0,b=0,c=0,d=0;return{initCatmullRom:function(e,f,g,h,k){e=k*(g-e);h=k*(h-f);a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},initNonuniformCatmullRom:function(e,f,g,h,k,m,q){e=((f-e)/k-(g-e)/(k+m)+(g-f)/m)*m;h=((g-f)/m-\n(h-f)/(m+q)+(h-g)/q)*m;a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},calc:function(e){var f=e*e;return a+b*e+c*f+d*f*e}}}function ca(a,b,c,d){C.call(this);this.type=\"CatmullRomCurve3\";this.points=a||[];this.closed=b||!1;this.curveType=c||\"centripetal\";this.tension=d||.5}function hf(a,b,c,d,e){b=.5*(d-b);e=.5*(e-c);var f=a*a;return(2*c-2*d+b+e)*a*f+(-3*c+3*d-2*b-e)*f+b*a+c}function bd(a,b,c,d){var e=1-a;return e*e*b+2*(1-a)*a*c+a*a*d}function cd(a,b,c,d,e){var f=1-a,g=1-a;return f*f*f*b+3*g*g*a*c+3*(1-a)*\na*a*d+a*a*a*e}function Oa(a,b,c,d){C.call(this);this.type=\"CubicBezierCurve\";this.v0=a||new D;this.v1=b||new D;this.v2=c||new D;this.v3=d||new D}function Va(a,b,c,d){C.call(this);this.type=\"CubicBezierCurve3\";this.v0=a||new p;this.v1=b||new p;this.v2=c||new p;this.v3=d||new p}function ya(a,b){C.call(this);this.type=\"LineCurve\";this.v1=a||new D;this.v2=b||new D}function Pa(a,b){C.call(this);this.type=\"LineCurve3\";this.v1=a||new p;this.v2=b||new p}function Qa(a,b,c){C.call(this);this.type=\"QuadraticBezierCurve\";\nthis.v0=a||new D;this.v1=b||new D;this.v2=c||new D}function Wa(a,b,c){C.call(this);this.type=\"QuadraticBezierCurve3\";this.v0=a||new p;this.v1=b||new p;this.v2=c||new p}function Ra(a){C.call(this);this.type=\"SplineCurve\";this.points=a||[]}function bb(){C.call(this);this.type=\"CurvePath\";this.curves=[];this.autoClose=!1}function Sa(a){bb.call(this);this.type=\"Path\";this.currentPoint=new D;a&&this.setFromPoints(a)}function jb(a){Sa.call(this,a);this.uuid=Q.generateUUID();this.type=\"Shape\";this.holes=\n[]}function da(a,b){x.call(this);this.type=\"Light\";this.color=new H(a);this.intensity=void 0!==b?b:1;this.receiveShadow=void 0}function Bd(a,b,c){da.call(this,a,c);this.type=\"HemisphereLight\";this.castShadow=void 0;this.position.copy(x.DefaultUp);this.updateMatrix();this.groundColor=new H(b)}function Fb(a){this.camera=a;this.bias=0;this.radius=1;this.mapSize=new D(512,512);this.map=null;this.matrix=new O}function Cd(){Fb.call(this,new ba(50,1,.5,500))}function Dd(a,b,c,d,e,f){da.call(this,a,b);this.type=\n\"SpotLight\";this.position.copy(x.DefaultUp);this.updateMatrix();this.target=new x;Object.defineProperty(this,\"power\",{get:function(){return this.intensity*Math.PI},set:function(a){this.intensity=a/Math.PI}});this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.penumbra=void 0!==e?e:0;this.decay=void 0!==f?f:1;this.shadow=new Cd}function Ed(a,b,c,d){da.call(this,a,b);this.type=\"PointLight\";Object.defineProperty(this,\"power\",{get:function(){return 4*this.intensity*Math.PI},set:function(a){this.intensity=\na/(4*Math.PI)}});this.distance=void 0!==c?c:0;this.decay=void 0!==d?d:1;this.shadow=new Fb(new ba(90,1,.5,500))}function Fd(){Fb.call(this,new Lb(-5,5,5,-5,.5,500))}function Gd(a,b){da.call(this,a,b);this.type=\"DirectionalLight\";this.position.copy(x.DefaultUp);this.updateMatrix();this.target=new x;this.shadow=new Fd}function Hd(a,b){da.call(this,a,b);this.type=\"AmbientLight\";this.castShadow=void 0}function Id(a,b,c,d){da.call(this,a,b);this.type=\"RectAreaLight\";this.position.set(0,1,0);this.updateMatrix();\nthis.width=void 0!==c?c:10;this.height=void 0!==d?d:10}function Jd(a,b,c,d){T.call(this,a,b,c,d)}function Kd(a,b,c){T.call(this,a,b,c)}function pa(a,b,c,d){this.parameterPositions=a;this._cachedIndex=0;this.resultBuffer=void 0!==d?d:new b.constructor(c);this.sampleValues=b;this.valueSize=c}function Ld(a,b,c,d){pa.call(this,a,b,c,d)}function dd(a,b,c,d){T.call(this,a,b,c,d)}function Md(a,b,c,d){T.call(this,a,b,c,d)}function ic(a,b,c,d){T.call(this,a,b,c,d)}function Nd(a,b,c,d){pa.call(this,a,b,c,d);\nthis._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function ed(a,b,c,d){pa.call(this,a,b,c,d)}function Od(a,b,c,d){pa.call(this,a,b,c,d)}function T(a,b,c,d){if(void 0===a)throw Error(\"THREE.KeyframeTrack: track name is undefined\");if(void 0===b||0===b.length)throw Error(\"THREE.KeyframeTrack: no keyframes in track named \"+a);this.name=a;this.times=ga.convertArray(b,this.TimeBufferType);this.values=ga.convertArray(c,this.ValueBufferType);this.setInterpolation(d||this.DefaultInterpolation);\nthis.validate();this.optimize()}function jc(a,b,c,d){T.call(this,a,b,c,d)}function Ca(a,b,c){this.name=a;this.tracks=c;this.duration=void 0!==b?b:-1;this.uuid=Q.generateUUID();0>this.duration&&this.resetDuration();this.optimize()}function Pd(a){this.manager=void 0!==a?a:xa;this.textures={}}function le(a){this.manager=void 0!==a?a:xa}function kc(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}}function me(a){\"boolean\"===typeof a&&(console.warn(\"THREE.JSONLoader: showStatus parameter has been removed from constructor.\"),\na=void 0);this.manager=void 0!==a?a:xa;this.withCredentials=!1}function jf(a){this.manager=void 0!==a?a:xa;this.texturePath=\"\"}function ne(a){\"undefined\"===typeof createImageBitmap&&console.warn(\"THREE.ImageBitmapLoader: createImageBitmap() not supported.\");\"undefined\"===typeof fetch&&console.warn(\"THREE.ImageBitmapLoader: fetch() not supported.\");this.manager=void 0!==a?a:xa;this.options=void 0}function oe(){this.type=\"ShapePath\";this.subPaths=[];this.currentPath=null}function pe(a){this.type=\"Font\";\nthis.data=a}function kf(a){this.manager=void 0!==a?a:xa}function qe(a){this.manager=void 0!==a?a:xa}function lf(){this.type=\"StereoCamera\";this.aspect=1;this.eyeSep=.064;this.cameraL=new ba;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new ba;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1}function fd(a,b,c){x.call(this);this.type=\"CubeCamera\";var d=new ba(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new p(1,0,0));this.add(d);var e=new ba(90,1,a,b);e.up.set(0,-1,\n0);e.lookAt(new p(-1,0,0));this.add(e);var f=new ba(90,1,a,b);f.up.set(0,0,1);f.lookAt(new p(0,1,0));this.add(f);var g=new ba(90,1,a,b);g.up.set(0,0,-1);g.lookAt(new p(0,-1,0));this.add(g);var h=new ba(90,1,a,b);h.up.set(0,-1,0);h.lookAt(new p(0,0,1));this.add(h);var k=new ba(90,1,a,b);k.up.set(0,-1,0);k.lookAt(new p(0,0,-1));this.add(k);this.renderTarget=new Jb(c,c,{format:1022,magFilter:1006,minFilter:1006});this.renderTarget.texture.name=\"CubeCamera\";this.update=function(a,b){null===this.parent&&\nthis.updateMatrixWorld();var c=this.renderTarget,m=c.texture.generateMipmaps;c.texture.generateMipmaps=!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=2;a.render(b,f,c);c.activeCubeFace=3;a.render(b,g,c);c.activeCubeFace=4;a.render(b,h,c);c.texture.generateMipmaps=m;c.activeCubeFace=5;a.render(b,k,c);a.setRenderTarget(null)};this.clear=function(a,b,c,d){for(var e=this.renderTarget,f=0;6>f;f++)e.activeCubeFace=f,a.setRenderTarget(e),a.clear(b,c,d);a.setRenderTarget(null)}}\nfunction re(){x.call(this);this.type=\"AudioListener\";this.context=se.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null}function lc(a){x.call(this);this.type=\"Audio\";this.context=a.context;this.gain=this.context.createGain();this.gain.connect(a.getInput());this.autoplay=!1;this.buffer=null;this.loop=!1;this.offset=this.startTime=0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType=\"empty\";this.filters=[]}function te(a){lc.call(this,\na);this.panner=this.context.createPanner();this.panner.connect(this.gain)}function ue(a,b){this.analyser=a.context.createAnalyser();this.analyser.fftSize=void 0!==b?b:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);a.getOutput().connect(this.analyser)}function ve(a,b,c){this.binding=a;this.valueSize=c;a=Float64Array;switch(b){case \"quaternion\":b=this._slerp;break;case \"string\":case \"bool\":a=Array;b=this._select;break;default:b=this._lerp}this.buffer=new a(4*c);this._mixBufferRegion=\nb;this.referenceCount=this.useCount=this.cumulativeWeight=0}function mf(a,b,c){c=c||qa.parseTrackName(b);this._targetGroup=a;this._bindings=a.subscribe_(b,c)}function qa(a,b,c){this.path=b;this.parsedPath=c||qa.parseTrackName(b);this.node=qa.findNode(a,this.parsedPath.nodeName)||a;this.rootNode=a}function nf(){this.uuid=Q.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var a={};this._indicesByUUID=a;for(var b=0,c=arguments.length;b!==c;++b)a[arguments[b].uuid]=\nb;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var d=this;this.stats={objects:{get total(){return d._objects.length},get inUse(){return this.total-d.nCachedObjects_}},get bindingsPerObject(){return d._bindings.length}}}function of(a,b,c){this._mixer=a;this._clip=b;this._localRoot=c||null;a=b.tracks;b=a.length;c=Array(b);for(var d={endingStart:2400,endingEnd:2400},e=0;e!==b;++e){var f=a[e].createInterpolant(null);c[e]=f;f.settings=d}this._interpolantSettings=\nd;this._interpolants=c;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=2201;this._loopCount=-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function we(a){this._root=a;this._initMemoryManager();this.time=this._accuIndex=\n0;this.timeScale=1}function Qd(a,b){\"string\"===typeof a&&(console.warn(\"THREE.Uniform: Type parameter is no longer needed.\"),a=b);this.value=a}function xe(){E.call(this);this.type=\"InstancedBufferGeometry\";this.maxInstancedCount=void 0}function ye(a,b,c,d){this.uuid=Q.generateUUID();this.data=a;this.itemSize=b;this.offset=c;this.normalized=!0===d}function mc(a,b){this.uuid=Q.generateUUID();this.array=a;this.stride=b;this.count=void 0!==a?a.length/b:0;this.dynamic=!1;this.updateRange={offset:0,count:-1};\nthis.onUploadCallback=function(){};this.version=0}function ze(a,b,c){mc.call(this,a,b);this.meshPerAttribute=c||1}function Ae(a,b,c){M.call(this,a,b);this.meshPerAttribute=c||1}function pf(a,b,c,d){this.ray=new sb(a,b);this.near=c||0;this.far=d||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn(\"THREE.Raycaster: params.PointCloud has been renamed to params.Points.\");return this.Points}}})}function qf(a,\nb){return a.distance-b.distance}function Be(a,b,c,d){if(!1!==a.visible&&(a.raycast(b,c),!0===d)){a=a.children;d=0;for(var e=a.length;d<e;d++)Be(a[d],b,c,!0)}}function rf(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1}function sf(a,b,c){this.radius=void 0!==a?a:1;this.phi=void 0!==b?b:0;this.theta=void 0!==c?c:0;return this}function tf(a,b,c){this.radius=void 0!==a?a:1;this.theta=void 0!==b?b:0;this.y=void 0!==c?c:0;return this}function gd(a){x.call(this);\nthis.material=a;this.render=function(){}}function hd(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16711680;d=void 0!==d?d:1;b=0;(c=this.object.geometry)&&c.isGeometry?b=3*c.faces.length:c&&c.isBufferGeometry&&(b=c.attributes.normal.count);c=new E;b=new B(6*b,3);c.addAttribute(\"position\",b);X.call(this,c,new W({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()}function nc(a,b){x.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=\n!1;this.color=b;a=new E;b=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var c=0,d=1;32>c;c++,d++){var e=c/32*Math.PI*2,f=d/32*Math.PI*2;b.push(Math.cos(e),Math.sin(e),1,Math.cos(f),Math.sin(f),1)}a.addAttribute(\"position\",new B(b,3));b=new W({fog:!1});this.cone=new X(a,b);this.add(this.cone);this.update()}function uf(a){var b=[];a&&a.isBone&&b.push(a);for(var c=0;c<a.children.length;c++)b.push.apply(b,uf(a.children[c]));return b}function oc(a){for(var b=uf(a),c=new E,d=[],e=\n[],f=new H(0,0,1),g=new H(0,1,0),h=0;h<b.length;h++){var k=b[h];k.parent&&k.parent.isBone&&(d.push(0,0,0),d.push(0,0,0),e.push(f.r,f.g,f.b),e.push(g.r,g.g,g.b))}c.addAttribute(\"position\",new B(d,3));c.addAttribute(\"color\",new B(e,3));d=new W({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});X.call(this,c,d);this.root=a;this.bones=b;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1}function pc(a,b,c){this.light=a;this.light.updateMatrixWorld();this.color=c;a=new wb(b,4,2);b=new Aa({wireframe:!0,\nfog:!1});ra.call(this,a,b);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1;this.update()}function qc(a,b){x.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=b;a=new W({fog:!1});b=new E;b.addAttribute(\"position\",new M(new Float32Array(15),3));this.line=new sa(b,a);this.add(this.line);this.update()}function rc(a,b,c){x.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=\n!1;this.color=c;a=new ub(b);a.rotateY(.5*Math.PI);this.material=new Aa({wireframe:!0,fog:!1});void 0===this.color&&(this.material.vertexColors=2);b=a.getAttribute(\"position\");b=new Float32Array(3*b.count);a.addAttribute(\"color\",new M(b,3));this.add(new ra(a,this.material));this.update()}function id(a,b,c,d){a=a||10;b=b||10;c=new H(void 0!==c?c:4473924);d=new H(void 0!==d?d:8947848);var e=b/2,f=a/b,g=a/2;a=[];for(var h=[],k=0,m=0,q=-g;k<=b;k++,q+=f){a.push(-g,0,q,g,0,q);a.push(q,0,-g,q,0,g);var n=\nk===e?c:d;n.toArray(h,m);m+=3;n.toArray(h,m);m+=3;n.toArray(h,m);m+=3;n.toArray(h,m);m+=3}b=new E;b.addAttribute(\"position\",new B(a,3));b.addAttribute(\"color\",new B(h,3));c=new W({vertexColors:2});X.call(this,b,c)}function Rd(a,b,c,d,e,f){a=a||10;b=b||16;c=c||8;d=d||64;e=new H(void 0!==e?e:4473924);f=new H(void 0!==f?f:8947848);var g=[],h=[],k;for(k=0;k<=b;k++){var m=k/b*2*Math.PI;var q=Math.sin(m)*a;m=Math.cos(m)*a;g.push(0,0,0);g.push(q,0,m);var n=k&1?e:f;h.push(n.r,n.g,n.b);h.push(n.r,n.g,n.b)}for(k=\n0;k<=c;k++){n=k&1?e:f;var l=a-a/c*k;for(b=0;b<d;b++)m=b/d*2*Math.PI,q=Math.sin(m)*l,m=Math.cos(m)*l,g.push(q,0,m),h.push(n.r,n.g,n.b),m=(b+1)/d*2*Math.PI,q=Math.sin(m)*l,m=Math.cos(m)*l,g.push(q,0,m),h.push(n.r,n.g,n.b)}a=new E;a.addAttribute(\"position\",new B(g,3));a.addAttribute(\"color\",new B(h,3));g=new W({vertexColors:2});X.call(this,a,g)}function jd(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16776960;d=void 0!==d?d:1;b=0;(c=this.object.geometry)&&c.isGeometry?b=c.faces.length:\nconsole.warn(\"THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.\");c=new E;b=new B(6*b,3);c.addAttribute(\"position\",b);X.call(this,c,new W({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()}function sc(a,b,c){x.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;void 0===b&&(b=1);a=new E;a.addAttribute(\"position\",new B([-b,b,0,b,b,0,b,-b,0,-b,-b,0,-b,b,0],3));b=new W({fog:!1});\nthis.lightPlane=new sa(a,b);this.add(this.lightPlane);a=new E;a.addAttribute(\"position\",new B([0,0,0,0,0,1],3));this.targetLine=new sa(a,b);this.add(this.targetLine);this.update()}function kd(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){f.push(0,0,0);g.push(b.r,b.g,b.b);void 0===h[a]&&(h[a]=[]);h[a].push(f.length/3-1)}var d=new E,e=new W({color:16777215,vertexColors:1}),f=[],g=[],h={},k=new H(16755200),m=new H(16711680),q=new H(43775),l=new H(16777215),u=new H(3355443);b(\"n1\",\"n2\",k);b(\"n2\",\n\"n4\",k);b(\"n4\",\"n3\",k);b(\"n3\",\"n1\",k);b(\"f1\",\"f2\",k);b(\"f2\",\"f4\",k);b(\"f4\",\"f3\",k);b(\"f3\",\"f1\",k);b(\"n1\",\"f1\",k);b(\"n2\",\"f2\",k);b(\"n3\",\"f3\",k);b(\"n4\",\"f4\",k);b(\"p\",\"n1\",m);b(\"p\",\"n2\",m);b(\"p\",\"n3\",m);b(\"p\",\"n4\",m);b(\"u1\",\"u2\",q);b(\"u2\",\"u3\",q);b(\"u3\",\"u1\",q);b(\"c\",\"t\",l);b(\"p\",\"c\",u);b(\"cn1\",\"cn2\",u);b(\"cn3\",\"cn4\",u);b(\"cf1\",\"cf2\",u);b(\"cf3\",\"cf4\",u);d.addAttribute(\"position\",new B(f,3));d.addAttribute(\"color\",new B(g,3));X.call(this,d,e);this.camera=a;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();\nthis.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=h;this.update()}function Gb(a,b){this.object=a;void 0===b&&(b=16776960);a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var c=new Float32Array(24),d=new E;d.setIndex(new M(a,1));d.addAttribute(\"position\",new M(c,3));X.call(this,d,new W({color:b}));this.matrixAutoUpdate=!1;this.update()}function ld(a,b){this.type=\"Box3Helper\";this.box=a;a=void 0!==b?b:16776960;b=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,\n4,1,5,2,6,3,7]);var c=new E;c.setIndex(new M(b,1));c.addAttribute(\"position\",new B([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));X.call(this,c,new W({color:a}));this.geometry.computeBoundingSphere()}function md(a,b,c){this.type=\"PlaneHelper\";this.plane=a;this.size=void 0===b?1:b;a=void 0!==c?c:16776960;b=new E;b.addAttribute(\"position\",new B([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));b.computeBoundingSphere();sa.call(this,b,new W({color:a}));b=new E;\nb.addAttribute(\"position\",new B([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));b.computeBoundingSphere();this.add(new ra(b,new Aa({color:a,opacity:.2,transparent:!0,depthWrite:!1})))}function Hb(a,b,c,d,e,f){x.call(this);void 0===d&&(d=16776960);void 0===c&&(c=1);void 0===e&&(e=.2*c);void 0===f&&(f=.2*e);void 0===Sd&&(Sd=new E,Sd.addAttribute(\"position\",new B([0,0,0,0,1,0],3)),Ce=new ab(0,.5,1,5,1),Ce.translate(0,-.5,0));this.position.copy(b);this.line=new sa(Sd,new W({color:d}));this.line.matrixAutoUpdate=\n!1;this.add(this.line);this.cone=new ra(Ce,new Aa({color:d}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(a);this.setLength(c,e,f)}function nd(a){a=a||1;var b=[0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a];a=new E;a.addAttribute(\"position\",new B(b,3));a.addAttribute(\"color\",new B([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));b=new W({vertexColors:2});X.call(this,a,b)}function vf(a){console.warn(\"THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.\");ca.call(this,\na);this.type=\"catmullrom\";this.closed=!0}function wf(a){console.warn(\"THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.\");ca.call(this,a);this.type=\"catmullrom\"}function De(a){console.warn(\"THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.\");ca.call(this,a);this.type=\"catmullrom\"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Number.isInteger&&(Number.isInteger=function(a){return\"number\"===typeof a&&isFinite(a)&&Math.floor(a)===a});void 0===\nMath.sign&&(Math.sign=function(a){return 0>a?-1:0<a?1:+a});!1===\"name\"in Function.prototype&&Object.defineProperty(Function.prototype,\"name\",{get:function(){return this.toString().match(/^\\s*function\\s*([^\\(\\s]*)/)[1]}});void 0===Object.assign&&function(){Object.assign=function(a){if(void 0===a||null===a)throw new TypeError(\"Cannot convert undefined or null to object\");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(void 0!==d&&null!==d)for(var e in d)Object.prototype.hasOwnProperty.call(d,\ne)&&(b[e]=d[e])}return b}}();Object.assign(za.prototype,{addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)},removeEventListener:function(a,b){void 0!==this._listeners&&(a=this._listeners[a],void 0!==a&&(b=a.indexOf(b),-1!==b&&a.splice(b,1)))},dispatchEvent:function(a){if(void 0!==\nthis._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;for(var b=b.slice(0),c=0,d=b.length;c<d;c++)b[c].call(this,a)}}}});var Q={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var a=[],b=0;256>b;b++)a[b]=(16>b?\"0\":\"\")+b.toString(16).toUpperCase();return function(){var b=4294967295*Math.random()|0,d=4294967295*Math.random()|0,e=4294967295*Math.random()|0,f=4294967295*Math.random()|0;return a[b&255]+a[b>>8&255]+a[b>>16&255]+a[b>>24&255]+\"-\"+a[d&255]+a[d>>8&\n255]+\"-\"+a[d>>16&15|64]+a[d>>24&255]+\"-\"+a[e&63|128]+a[e>>8&255]+\"-\"+a[e>>16&255]+a[e>>24&255]+a[f&255]+a[f>>8&255]+a[f>>16&255]+a[f>>24&255]}}(),clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},euclideanModulo:function(a,b){return(a%b+b)%b},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},lerp:function(a,b,c){return(1-c)*a+c*b},smoothstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;\na=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(a){return a*Q.DEG2RAD},radToDeg:function(a){return a*Q.RAD2DEG},isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},ceilPowerOfTwo:function(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},floorPowerOfTwo:function(a){return Math.pow(2,Math.floor(Math.log(a)/\nMath.LN2))}};Object.defineProperties(D.prototype,{width:{get:function(){return this.x},set:function(a){this.x=a}},height:{get:function(){return this.y},set:function(a){this.y=a}}});Object.assign(D.prototype,{isVector2:!0,set:function(a,b){this.x=a;this.y=b;return this},setScalar:function(a){this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error(\"index is out of range: \"+\na);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error(\"index is out of range: \"+a);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},\naddVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;return this},sub:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=\na.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},applyMatrix3:function(a){var b=this.x,c=this.y;a=a.elements;this.x=a[0]*b+a[3]*c+a[6];this.y=a[1]*b+a[4]*c+a[7];return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},clamp:function(a,\nb){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},clampScalar:function(){var a=new D,b=new D;return function(c,d){a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=\nMath.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||\n1)},angle:function(){var a=Math.atan2(this.y,this.x);0>a&&(a+=2*Math.PI);return a},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},manhattanDistanceTo:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,\na).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn(\"THREE.Vector2: offset has been removed from .fromBufferAttribute().\");this.x=a.getX(b);this.y=a.getY(b);return this},rotateAround:function(a,b){var c=Math.cos(b);b=Math.sin(b);var d=\nthis.x-a.x,e=this.y-a.y;this.x=d*c-e*b+a.x;this.y=d*b+e*c+a.y;return this}});Object.assign(O.prototype,{isMatrix4:!0,set:function(a,b,c,d,e,f,g,h,k,m,q,l,u,r,t,p){var n=this.elements;n[0]=a;n[4]=b;n[8]=c;n[12]=d;n[1]=e;n[5]=f;n[9]=g;n[13]=h;n[2]=k;n[6]=m;n[10]=q;n[14]=l;n[3]=u;n[7]=r;n[11]=t;n[15]=p;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new O).fromArray(this.elements)},copy:function(a){var b=this.elements;a=a.elements;b[0]=\na[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return this},copyPosition:function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function(a,b,c){a.setFromMatrixColumn(this,0);b.setFromMatrixColumn(this,1);c.setFromMatrixColumn(this,2);return this},makeBasis:function(a,b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,\n1);return this},extractRotation:function(){var a=new p;return function(b){var c=this.elements,d=b.elements,e=1/a.setFromMatrixColumn(b,0).length(),f=1/a.setFromMatrixColumn(b,1).length();b=1/a.setFromMatrixColumn(b,2).length();c[0]=d[0]*e;c[1]=d[1]*e;c[2]=d[2]*e;c[4]=d[4]*f;c[5]=d[5]*f;c[6]=d[6]*f;c[8]=d[8]*b;c[9]=d[9]*b;c[10]=d[10]*b;return this}}(),makeRotationFromEuler:function(a){a&&a.isEuler||console.error(\"THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.\");\nvar b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c),c=Math.sin(c),g=Math.cos(d),d=Math.sin(d),h=Math.cos(e),e=Math.sin(e);if(\"XYZ\"===a.order){var k=f*h;var m=f*e;var q=c*h;a=c*e;b[0]=g*h;b[4]=-g*e;b[8]=d;b[1]=m+q*d;b[5]=k-a*d;b[9]=-c*g;b[2]=a-k*d;b[6]=q+m*d;b[10]=f*g}else\"YXZ\"===a.order?(k=g*h,m=g*e,q=d*h,a=d*e,b[0]=k+a*c,b[4]=q*c-m,b[8]=f*d,b[1]=f*e,b[5]=f*h,b[9]=-c,b[2]=m*c-q,b[6]=a+k*c,b[10]=f*g):\"ZXY\"===a.order?(k=g*h,m=g*e,q=d*h,a=d*e,b[0]=k-a*c,b[4]=-f*e,b[8]=q+m*c,b[1]=m+q*c,b[5]=f*h,b[9]=\na-k*c,b[2]=-f*d,b[6]=c,b[10]=f*g):\"ZYX\"===a.order?(k=f*h,m=f*e,q=c*h,a=c*e,b[0]=g*h,b[4]=q*d-m,b[8]=k*d+a,b[1]=g*e,b[5]=a*d+k,b[9]=m*d-q,b[2]=-d,b[6]=c*g,b[10]=f*g):\"YZX\"===a.order?(k=f*g,m=f*d,q=c*g,a=c*d,b[0]=g*h,b[4]=a-k*e,b[8]=q*e+m,b[1]=e,b[5]=f*h,b[9]=-c*h,b[2]=-d*h,b[6]=m*e+q,b[10]=k-a*e):\"XZY\"===a.order&&(k=f*g,m=f*d,q=c*g,a=c*d,b[0]=g*h,b[4]=-e,b[8]=d*h,b[1]=k*e+a,b[5]=f*h,b[9]=m*e-q,b[2]=q*e-m,b[6]=c*h,b[10]=a*e+k);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},makeRotationFromQuaternion:function(a){var b=\nthis.elements,c=a._x,d=a._y,e=a._z,f=a._w,g=c+c,h=d+d,k=e+e;a=c*g;var m=c*h,c=c*k,q=d*h,d=d*k,e=e*k,g=f*g,h=f*h,f=f*k;b[0]=1-(q+e);b[4]=m-f;b[8]=c+h;b[1]=m+f;b[5]=1-(a+e);b[9]=d-g;b[2]=c-h;b[6]=d+g;b[10]=1-(a+q);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a=new p,b=new p,c=new p;return function(d,e,f){var g=this.elements;c.subVectors(d,e);0===c.lengthSq()&&(c.z=1);c.normalize();a.crossVectors(f,c);0===a.lengthSq()&&(1===Math.abs(f.z)?c.x+=1E-4:c.z+=1E-4,\nc.normalize(),a.crossVectors(f,c));a.normalize();b.crossVectors(c,a);g[0]=a.x;g[4]=b.x;g[8]=c.x;g[1]=a.y;g[5]=b.y;g[9]=c.y;g[2]=a.z;g[6]=b.z;g[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn(\"THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.\"),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements;\nb=this.elements;a=c[0];var e=c[4],f=c[8],g=c[12],h=c[1],k=c[5],m=c[9],q=c[13],n=c[2],l=c[6],r=c[10],t=c[14],p=c[3],w=c[7],z=c[11],c=c[15],y=d[0],I=d[4],A=d[8],J=d[12],x=d[1],B=d[5],D=d[9],C=d[13],E=d[2],H=d[6],K=d[10],S=d[14],L=d[3],N=d[7],M=d[11],d=d[15];b[0]=a*y+e*x+f*E+g*L;b[4]=a*I+e*B+f*H+g*N;b[8]=a*A+e*D+f*K+g*M;b[12]=a*J+e*C+f*S+g*d;b[1]=h*y+k*x+m*E+q*L;b[5]=h*I+k*B+m*H+q*N;b[9]=h*A+k*D+m*K+q*M;b[13]=h*J+k*C+m*S+q*d;b[2]=n*y+l*x+r*E+t*L;b[6]=n*I+l*B+r*H+t*N;b[10]=n*A+l*D+r*K+t*M;b[14]=n*J+l*\nC+r*S+t*d;b[3]=p*y+w*x+z*E+c*L;b[7]=p*I+w*B+z*H+c*N;b[11]=p*A+w*D+z*K+c*M;b[15]=p*J+w*C+z*S+c*d;return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},applyToBufferAttribute:function(){var a=new p;return function(b){for(var c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix4(this),b.setXYZ(c,a.x,a.y,a.z);return b}}(),determinant:function(){var a=\nthis.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],k=a[13],m=a[2],q=a[6],n=a[10],l=a[14];return a[3]*(+e*h*q-d*k*q-e*g*n+c*k*n+d*g*l-c*h*l)+a[7]*(+b*h*l-b*k*n+e*f*n-d*f*l+d*k*m-e*h*m)+a[11]*(+b*k*q-b*g*l-e*f*q+c*f*l+e*g*m-c*k*m)+a[15]*(-d*g*m-b*h*q+b*g*n+d*f*q-c*f*n+c*h*m)},transpose:function(){var a=this.elements;var b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},setPosition:function(a){var b=\nthis.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,d=a.elements;a=d[0];var e=d[1],f=d[2],g=d[3],h=d[4],k=d[5],m=d[6],q=d[7],l=d[8],u=d[9],r=d[10],t=d[11],p=d[12],w=d[13],z=d[14],d=d[15],y=u*z*q-w*r*q+w*m*t-k*z*t-u*m*d+k*r*d,x=p*r*q-l*z*q-p*m*t+h*z*t+l*m*d-h*r*d,A=l*w*q-p*u*q+p*k*t-h*w*t-l*k*d+h*u*d,J=p*u*m-l*w*m-p*k*r+h*w*r+l*k*z-h*u*z,B=a*y+e*x+f*A+g*J;if(0===B){if(!0===b)throw Error(\"THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0\");\nconsole.warn(\"THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0\");return this.identity()}b=1/B;c[0]=y*b;c[1]=(w*r*g-u*z*g-w*f*t+e*z*t+u*f*d-e*r*d)*b;c[2]=(k*z*g-w*m*g+w*f*q-e*z*q-k*f*d+e*m*d)*b;c[3]=(u*m*g-k*r*g-u*f*q+e*r*q+k*f*t-e*m*t)*b;c[4]=x*b;c[5]=(l*z*g-p*r*g+p*f*t-a*z*t-l*f*d+a*r*d)*b;c[6]=(p*m*g-h*z*g-p*f*q+a*z*q+h*f*d-a*m*d)*b;c[7]=(h*r*g-l*m*g+l*f*q-a*r*q-h*f*t+a*m*t)*b;c[8]=A*b;c[9]=(p*u*g-l*w*g-p*e*t+a*w*t+l*e*d-a*u*d)*b;c[10]=(h*w*g-p*k*g+p*e*q-a*w*q-h*e*d+a*k*d)*b;c[11]=\n(l*k*g-h*u*g-l*e*q+a*u*q+h*e*t-a*k*t)*b;c[12]=J*b;c[13]=(l*w*f-p*u*f+p*e*r-a*w*r-l*e*z+a*u*z)*b;c[14]=(p*k*f-h*w*f-p*e*m+a*w*m+h*e*z-a*k*z)*b;c[15]=(h*u*f-l*k*f+l*e*m-a*u*m-h*e*r+a*k*r)*b;return this},scale:function(a){var b=this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],\na[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=\nMath.cos(b);b=Math.sin(b);var d=1-c,e=a.x,f=a.y;a=a.z;var g=d*e,h=d*f;this.set(g*e+c,g*f-b*a,g*a+b*f,0,g*f+b*a,h*f+c,h*a-b*e,0,g*a-b*f,h*a+b*e,d*a*a+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},makeShear:function(a,b,c){this.set(1,b,c,0,a,1,c,0,a,b,1,0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},decompose:function(){var a=new p,b=new O;return function(c,\nd,e){var f=this.elements,g=a.set(f[0],f[1],f[2]).length(),h=a.set(f[4],f[5],f[6]).length(),k=a.set(f[8],f[9],f[10]).length();0>this.determinant()&&(g=-g);c.x=f[12];c.y=f[13];c.z=f[14];b.copy(this);c=1/g;var f=1/h,m=1/k;b.elements[0]*=c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=f;b.elements[5]*=f;b.elements[6]*=f;b.elements[8]*=m;b.elements[9]*=m;b.elements[10]*=m;d.setFromRotationMatrix(b);e.x=g;e.y=h;e.z=k;return this}}(),makePerspective:function(a,b,c,d,e,f){void 0===f&&console.warn(\"THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.\");\nvar g=this.elements;g[0]=2*e/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*e/(c-d);g[9]=(c+d)/(c-d);g[13]=0;g[2]=0;g[6]=0;g[10]=-(f+e)/(f-e);g[14]=-2*f*e/(f-e);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this},makeOrthographic:function(a,b,c,d,e,f){var g=this.elements,h=1/(b-a),k=1/(c-d),m=1/(f-e);g[0]=2*h;g[4]=0;g[8]=0;g[12]=-((b+a)*h);g[1]=0;g[5]=2*k;g[9]=0;g[13]=-((c+d)*k);g[2]=0;g[6]=0;g[10]=-2*m;g[14]=-((f+e)*m);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this},equals:function(a){var b=this.elements;\na=a.elements;for(var c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;16>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a}});Object.assign(ha,{slerp:function(a,b,c,d){return c.copy(a).slerp(b,\nd)},slerpFlat:function(a,b,c,d,e,f,g){var h=c[d+0],k=c[d+1],m=c[d+2];c=c[d+3];d=e[f+0];var q=e[f+1],l=e[f+2];e=e[f+3];if(c!==e||h!==d||k!==q||m!==l){f=1-g;var u=h*d+k*q+m*l+c*e,r=0<=u?1:-1,p=1-u*u;p>Number.EPSILON&&(p=Math.sqrt(p),u=Math.atan2(p,u*r),f=Math.sin(f*u)/p,g=Math.sin(g*u)/p);r*=g;h=h*f+d*r;k=k*f+q*r;m=m*f+l*r;c=c*f+e*r;f===1-g&&(g=1/Math.sqrt(h*h+k*k+m*m+c*c),h*=g,k*=g,m*=g,c*=g)}a[b]=h;a[b+1]=k;a[b+2]=m;a[b+3]=c}});Object.defineProperties(ha.prototype,{x:{get:function(){return this._x},\nset:function(a){this._x=a;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(a){this._y=a;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(a){this._z=a;this.onChangeCallback()}},w:{get:function(){return this._w},set:function(a){this._w=a;this.onChangeCallback()}}});Object.assign(ha.prototype,{set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,\nthis._w)},copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!a||!a.isEuler)throw Error(\"THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.\");var c=a._x,d=a._y,e=a._z;a=a.order;var f=Math.cos,g=Math.sin,h=f(c/2),k=f(d/2),f=f(e/2),c=g(c/2),d=g(d/2),e=g(e/2);\"XYZ\"===a?(this._x=c*k*f+h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f-c*d*e):\"YXZ\"===a?(this._x=c*k*f+\nh*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f+c*d*e):\"ZXY\"===a?(this._x=c*k*f-h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f-c*d*e):\"ZYX\"===a?(this._x=c*k*f-h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f+c*d*e):\"YZX\"===a?(this._x=c*k*f+h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f-c*d*e):\"XZY\"===a&&(this._x=c*k*f-h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f+c*d*e);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,\nb){b/=2;var c=Math.sin(b);this._x=a.x*c;this._y=a.y*c;this._z=a.z*c;this._w=Math.cos(b);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],f=b[5],g=b[9],h=b[2],k=b[6],b=b[10],m=c+f+b;0<m?(c=.5/Math.sqrt(m+1),this._w=.25/c,this._x=(k-g)*c,this._y=(d-h)*c,this._z=(e-a)*c):c>f&&c>b?(c=2*Math.sqrt(1+c-f-b),this._w=(k-g)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+h)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=\n.25*c,this._z=(g+k)/c):(c=2*Math.sqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(g+k)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a=new p,b;return function(c,d){void 0===a&&(a=new p);b=c.dot(d)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;return this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){this._x*=\n-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},\nmultiply:function(a,b){return void 0!==b?(console.warn(\"THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.\"),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},premultiply:function(a){return this.multiplyQuaternions(a,this)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z;a=a._w;var f=b._x,g=b._y,h=b._z;b=b._w;this._x=c*b+a*f+d*h-e*g;this._y=d*b+a*g+e*f-c*h;this._z=e*b+a*h+c*g-d*f;this._w=a*b-c*f-d*g-e*h;this.onChangeCallback();\nreturn this},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,f=this._w,g=f*a._w+c*a._x+d*a._y+e*a._z;0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a);if(1<=g)return this._w=f,this._x=c,this._y=d,this._z=e,this;a=Math.sqrt(1-g*g);if(.001>Math.abs(a))return this._w=.5*(f+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),this;var h=Math.atan2(a,g),g=Math.sin((1-b)*h)/a;b=Math.sin(b*h)/a;\nthis._w=f*g+this._w*b;this._x=c*g+this._x*b;this._y=d*g+this._y*b;this._z=e*g+this._z*b;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=\na;return this},onChangeCallback:function(){}});Object.assign(p.prototype,{isVector3:!0,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setScalar:function(a){this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error(\"index is out of range: \"+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;\ncase 1:return this.y;case 2:return this.z;default:throw Error(\"index is out of range: \"+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},\naddVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},sub:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=\na.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.\"),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a=new ha;return function(b){b&&b.isEuler||console.error(\"THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.\");\nreturn this.applyQuaternion(a.setFromEuler(b))}}(),applyAxisAngle:function(){var a=new ha;return function(b,c){return this.applyQuaternion(a.setFromAxisAngle(b,c))}}(),applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+\na[9]*d+a[13])*e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z;a=a.w;var h=a*b+f*d-g*c,k=a*c+g*b-e*d,m=a*d+e*c-f*b,b=-e*b-f*c-g*d;this.x=h*a+b*-e+k*-g-m*-f;this.y=k*a+b*-f+m*-e-h*-g;this.z=m*a+b*-g+h*-f-k*-e;return this},project:function(){var a=new O;return function(b){a.multiplyMatrices(b.projectionMatrix,a.getInverse(b.matrixWorld));return this.applyMatrix4(a)}}(),unproject:function(){var a=new O;return function(b){a.multiplyMatrices(b.matrixWorld,\na.getInverse(b.projectionMatrix));return this.applyMatrix4(a)}}(),transformDirection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;return this.normalize()},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=\nMath.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},clampScalar:function(){var a=new p,b=new p;return function(c,d){a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=\nMath.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=\n-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-\nthis.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},cross:function(a,b){return void 0!==b?(console.warn(\"THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.\"),this.crossVectors(a,b)):this.crossVectors(this,a)},crossVectors:function(a,b){var c=a.x,d=a.y;a=a.z;var e=b.x,f=b.y;b=b.z;this.x=d*b-a*f;this.y=a*e-c*b;this.z=c*f-d*e;return this},projectOnVector:function(a){var b=\na.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(b)},projectOnPlane:function(){var a=new p;return function(b){a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a=new p;return function(b){return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(Q.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-\na.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},manhattanDistanceTo:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)},setFromSpherical:function(a){var b=Math.sin(a.phi)*a.radius;this.x=b*Math.sin(a.theta);this.y=Math.cos(a.phi)*a.radius;this.z=b*Math.cos(a.theta);return this},setFromCylindrical:function(a){this.x=a.radius*Math.sin(a.theta);this.y=a.y;this.z=a.radius*Math.cos(a.theta);return this},setFromMatrixPosition:function(a){a=a.elements;this.x=a[12];this.y=\na[13];this.z=a[14];return this},setFromMatrixScale:function(a){var b=this.setFromMatrixColumn(a,0).length(),c=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,2).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,b){return this.fromArray(a.elements,4*b)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=\n[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn(\"THREE.Vector3: offset has been removed from .fromBufferAttribute().\");this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);return this}});Object.assign(ma.prototype,{isMatrix3:!0,set:function(a,b,c,d,e,f,g,h,k){var m=this.elements;m[0]=a;m[1]=d;m[2]=g;m[3]=b;m[4]=e;m[5]=h;m[6]=c;m[7]=f;m[8]=k;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},\ncopy:function(a){var b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return this},setFromMatrix4:function(a){a=a.elements;this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]);return this},applyToBufferAttribute:function(){var a=new p;return function(b){for(var c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix3(this),b.setXYZ(c,a.x,a.y,a.z);return b}}(),multiply:function(a){return this.multiplyMatrices(this,\na)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements;b=this.elements;a=c[0];var e=c[3],f=c[6],g=c[1],h=c[4],k=c[7],m=c[2],q=c[5],c=c[8],l=d[0],p=d[3],r=d[6],t=d[1],v=d[4],w=d[7],z=d[2],y=d[5],d=d[8];b[0]=a*l+e*t+f*z;b[3]=a*p+e*v+f*y;b[6]=a*r+e*w+f*d;b[1]=g*l+h*t+k*z;b[4]=g*p+h*v+k*y;b[7]=g*r+h*w+k*d;b[2]=m*l+q*t+c*z;b[5]=m*p+q*v+c*y;b[8]=m*r+q*w+c*d;return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;\nb[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7],a=a[8];return b*f*a-b*g*k-c*e*a+c*g*h+d*e*k-d*f*h},getInverse:function(a,b){a&&a.isMatrix4&&console.error(\"THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.\");var c=a.elements;a=this.elements;var d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],k=c[5],m=c[6],q=c[7],c=c[8],l=c*h-k*q,p=k*m-c*g,r=q*g-h*m,t=d*l+e*p+f*r;if(0===t){if(!0===\nb)throw Error(\"THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0\");console.warn(\"THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0\");return this.identity()}b=1/t;a[0]=l*b;a[1]=(f*q-c*e)*b;a[2]=(k*e-f*h)*b;a[3]=p*b;a[4]=(c*d-f*m)*b;a[5]=(f*g-k*d)*b;a[6]=r*b;a[7]=(e*m-q*d)*b;a[8]=(h*d-e*g)*b;return this},transpose:function(){var a=this.elements;var b=a[1];a[1]=a[3];a[3]=b;b=a[2];a[2]=a[6];a[6]=b;b=a[5];a[5]=a[7];a[7]=b;return this},getNormalMatrix:function(a){return this.setFromMatrix4(a).getInverse(this).transpose()},\ntransposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},setUvTransform:function(a,b,c,d,e,f,g){var h=Math.cos(e);e=Math.sin(e);this.set(c*h,c*e,-c*(h*f+e*g)+f+a,-d*e,d*h,-d*(-e*f+h*g)+g+b,0,0,1)},scale:function(a,b){var c=this.elements;c[0]*=a;c[3]*=a;c[6]*=a;c[1]*=b;c[4]*=b;c[7]*=b;return this},rotate:function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.elements,d=c[0],e=c[3],f=c[6],g=c[1],h=c[4],\nk=c[7];c[0]=b*d+a*g;c[3]=b*e+a*h;c[6]=b*f+a*k;c[1]=-a*d+b*g;c[4]=-a*e+b*h;c[7]=-a*f+b*k;return this},translate:function(a,b){var c=this.elements;c[0]+=a*c[2];c[3]+=a*c[5];c[6]+=a*c[8];c[1]+=b*c[2];c[4]+=b*c[5];c[7]+=b*c[8];return this},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;9>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;9>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=\nthis.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a}});var Af=0;U.DEFAULT_IMAGE=void 0;U.DEFAULT_MAPPING=300;U.prototype=Object.assign(Object.create(za.prototype),{constructor:U,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name;this.image=a.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=\na.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.center.copy(a.center);this.rotation=a.rotation;this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrix.copy(a.matrix);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.encoding=a.encoding;return this},toJSON:function(a){var b=void 0===a||\"string\"===typeof a;if(!b&&void 0!==\na.textures[this.uuid])return a.textures[this.uuid];var c={metadata:{version:4.5,type:\"Texture\",generator:\"Texture.toJSON\"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var d=this.image;void 0===d.uuid&&(d.uuid=Q.generateUUID());\nif(!b&&void 0===a.images[d.uuid]){var e=a.images,f=d.uuid,g=d.uuid;if(d instanceof HTMLCanvasElement)var h=d;else{h=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\");h.width=d.width;h.height=d.height;var k=h.getContext(\"2d\");d instanceof ImageData?k.putImageData(d,0,0):k.drawImage(d,0,0,d.width,d.height)}h=2048<h.width||2048<h.height?h.toDataURL(\"image/jpeg\",.6):h.toDataURL(\"image/png\");e[f]={uuid:g,url:h}}c.image=d.uuid}b||(a.textures[this.uuid]=c);return c},dispose:function(){this.dispatchEvent({type:\"dispose\"})},\ntransformUv:function(a){if(300===this.mapping){a.applyMatrix3(this.matrix);if(0>a.x||1<a.x)switch(this.wrapS){case 1E3:a.x-=Math.floor(a.x);break;case 1001:a.x=0>a.x?0:1;break;case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapT){case 1E3:a.y-=Math.floor(a.y);break;case 1001:a.y=0>a.y?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}});Object.defineProperty(U.prototype,\n\"needsUpdate\",{set:function(a){!0===a&&this.version++}});Object.assign(aa.prototype,{isVector4:!0,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setScalar:function(a){this.w=this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=\nb;break;default:throw Error(\"index is out of range: \"+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error(\"index is out of range: \"+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),\nthis.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this},sub:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(a,\nb);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;this.w-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*\ne;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){a=a.elements;var b=a[0];var c=a[4];var d=a[8],e=a[1],f=a[5],g=a[9];var h=a[2];var k=a[6];var m=a[10];if(.01>Math.abs(c-e)&&.01>Math.abs(d-h)&&.01>Math.abs(g-k)){if(.1>Math.abs(c+\ne)&&.1>Math.abs(d+h)&&.1>Math.abs(g+k)&&.1>Math.abs(b+f+m-3))return this.set(1,0,0,0),this;a=Math.PI;b=(b+1)/2;f=(f+1)/2;m=(m+1)/2;c=(c+e)/4;d=(d+h)/4;g=(g+k)/4;b>f&&b>m?.01>b?(k=0,c=h=.707106781):(k=Math.sqrt(b),h=c/k,c=d/k):f>m?.01>f?(k=.707106781,h=0,c=.707106781):(h=Math.sqrt(f),k=c/h,c=g/h):.01>m?(h=k=.707106781,c=0):(c=Math.sqrt(m),k=d/c,h=g/c);this.set(k,h,c,a);return this}a=Math.sqrt((k-g)*(k-g)+(d-h)*(d-h)+(e-c)*(e-c));.001>Math.abs(a)&&(a=1);this.x=(k-g)/a;this.y=(d-h)/a;this.z=(e-c)/a;\nthis.w=Math.acos((b+f+m-1)/2);return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);this.w=Math.min(this.w,a.w);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);this.w=Math.max(this.w,a.w);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));this.w=Math.max(a.w,Math.min(b.w,\nthis.w));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new aa,b=new aa);a.set(c,c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);\nthis.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},\ndot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=\n(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromBufferAttribute:function(a,\nb,c){void 0!==c&&console.warn(\"THREE.Vector4: offset has been removed from .fromBufferAttribute().\");this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);this.w=a.getW(b);return this}});kb.prototype=Object.assign(Object.create(za.prototype),{constructor:kb,isWebGLRenderTarget:!0,setSize:function(a,b){if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.dispose();this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,b)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.width=\na.width;this.height=a.height;this.viewport.copy(a.viewport);this.texture=a.texture.clone();this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;this.depthTexture=a.depthTexture;return this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});Jb.prototype=Object.create(kb.prototype);Jb.prototype.constructor=Jb;Jb.prototype.isWebGLRenderTargetCube=!0;lb.prototype=Object.create(U.prototype);lb.prototype.constructor=lb;lb.prototype.isDataTexture=!0;db.prototype=Object.create(U.prototype);\ndb.prototype.constructor=db;db.prototype.isCubeTexture=!0;Object.defineProperty(db.prototype,\"images\",{get:function(){return this.image},set:function(a){this.image=a}});var Ne=new U,Oe=new db,Ie=[],Ke=[],Me=new Float32Array(16),Le=new Float32Array(9);Se.prototype.setValue=function(a,b){for(var c=this.seq,d=0,e=c.length;d!==e;++d){var f=c[d];f.setValue(a,b[f.id])}};var Vd=/([\\w\\d_]+)(\\])?(\\[|\\.)?/g;mb.prototype.setValue=function(a,b,c){b=this.map[b];void 0!==b&&b.setValue(a,c,this.renderer)};mb.prototype.setOptional=\nfunction(a,b,c){b=b[c];void 0!==b&&this.setValue(a,c,b)};mb.upload=function(a,b,c,d){for(var e=0,f=b.length;e!==f;++e){var g=b[e],h=c[g.id];!1!==h.needsUpdate&&g.setValue(a,h.value,d)}};mb.seqWithValue=function(a,b){for(var c=[],d=0,e=a.length;d!==e;++d){var f=a[d];f.id in b&&c.push(f)}return c};var Kg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,\ncadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,\ndeeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,\nlightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,\nmediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,\nroyalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(H.prototype,{isColor:!0,r:1,g:1,b:1,set:function(a){a&&\na.isColor?this.copy(a):\"number\"===typeof a?this.setHex(a):\"string\"===typeof a&&this.setStyle(a);return this},setScalar:function(a){this.b=this.g=this.r=a;return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(){function a(a,c,d){0>d&&(d+=1);1<d&&--d;return d<1/6?a+6*(c-a)*d:.5>d?c:d<2/3?a+6*(c-a)*(2/3-d):a}return function(b,c,d){b=Q.euclideanModulo(b,\n1);c=Q.clamp(c,0,1);d=Q.clamp(d,0,1);0===c?this.r=this.g=this.b=d:(c=.5>=d?d*(1+c):d+c-d*c,d=2*d-c,this.r=a(d,c,b+1/3),this.g=a(d,c,b),this.b=a(d,c,b-1/3));return this}}(),setStyle:function(a){function b(b){void 0!==b&&1>parseFloat(b)&&console.warn(\"THREE.Color: Alpha component of \"+a+\" will be ignored.\")}var c;if(c=/^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec(a)){var d=c[2];switch(c[1]){case \"rgb\":case \"rgba\":if(c=/^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(d))return this.r=Math.min(255,\nparseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,b(c[5]),this;if(c=/^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,b(c[5]),this;break;case \"hsl\":case \"hsla\":if(c=/^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(d)){var d=parseFloat(c[1])/360,\ne=parseInt(c[2],10)/100,f=parseInt(c[3],10)/100;b(c[5]);return this.setHSL(d,e,f)}}}else if(c=/^\\#([A-Fa-f0-9]+)$/.exec(a)){c=c[1];d=c.length;if(3===d)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}a&&0<a.length&&(c=Kg[a],void 0!==\nc?this.setHex(c):console.warn(\"THREE.Color: Unknown color \"+a));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this},copyGammaToLinear:function(a,b){void 0===b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},copyLinearToGamma:function(a,b){void 0===b&&(b=2);b=0<b?1/b:1;this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},convertGammaToLinear:function(){var a=\nthis.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return(\"000000\"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){a=a||{h:0,s:0,l:0};var b=this.r,c=this.g,d=this.b,e=Math.max(b,c,d),f=Math.min(b,c,d),g,h=(f+e)/2;if(f===e)f=g=0;else{var k=e-f,f=.5>=h?k/(e+f):\nk/(2-e-f);switch(e){case b:g=(c-d)/k+(c<d?6:0);break;case c:g=(d-b)/k+2;break;case d:g=(b-c)/k+4}g/=6}a.h=g;a.s=f;a.l=h;return a},getStyle:function(){return\"rgb(\"+(255*this.r|0)+\",\"+(255*this.g|0)+\",\"+(255*this.b|0)+\")\"},offsetHSL:function(a,b,c){var d=this.getHSL();d.h+=a;d.s+=b;d.l+=c;this.setHSL(d.h,d.s,d.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},addScalar:function(a){this.r+=\na;this.g+=a;this.b+=a;return this},sub:function(a){this.r=Math.max(0,this.r-a.r);this.g=Math.max(0,this.g-a.g);this.b=Math.max(0,this.b-a.b);return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a,b){void 0===b&&(b=\n0);this.r=a[b];this.g=a[b+1];this.b=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.r;a[b+1]=this.g;a[b+2]=this.b;return a},toJSON:function(){return this.getHex()}});var K={common:{diffuse:{value:new H(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new ma},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},\naoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new D(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},\nfogFar:{value:2E3},fogColor:{value:new H(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},\npointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new H(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new ma}}},\nGa={merge:function(a){for(var b={},c=0;c<a.length;c++){var d=this.clone(a[c]),e;for(e in d)b[e]=d[e]}return b},clone:function(a){var b={},c;for(c in a){b[c]={};for(var d in a[c]){var e=a[c][d];e&&(e.isColor||e.isMatrix3||e.isMatrix4||e.isVector2||e.isVector3||e.isVector4||e.isTexture)?b[c][d]=e.clone():Array.isArray(e)?b[c][d]=e.slice():b[c][d]=e}}return b}},R={alphamap_fragment:\"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\\n\",alphamap_pars_fragment:\"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\\n\",\nalphatest_fragment:\"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\\n\",aomap_fragment:\"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\\n\",\naomap_pars_fragment:\"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\",begin_vertex:\"\\nvec3 transformed = vec3( position );\\n\",beginnormal_vertex:\"\\nvec3 objectNormal = vec3( normal );\\n\",bsdfs:\"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\tif( decayExponent > 0.0 ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\t\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\t\\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t\\treturn distanceFalloff * maxDistanceCutoffFactor;\\n#else\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n#endif\\n\\t}\\n\\treturn 1.0;\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE  = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\\n\\tfloat theta = acos( dot( N, V ) );\\n\\tvec2 uv = vec2(\\n\\t\\tsqrt( saturate( roughness ) ),\\n\\t\\tsaturate( theta / ( 0.5 * PI ) ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\\n\\tfloat b = 3.45068 + (4.18814 + y) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\\n\\treturn result;\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\\n\\treturn specularColor * AB.x + AB.y;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n\",\nbumpmap_pars_fragment:\"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\\n\",\nclipping_planes_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\\n\\t\\tvec4 plane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t\\t\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\\n\\t\\t\\tvec4 plane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\tif ( clipped ) discard;\\n\\t\\n\\t#endif\\n#endif\\n\",\nclipping_planes_pars_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\t\\tvarying vec3 vViewPosition;\\n\\t#endif\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\\n\",clipping_planes_pars_vertex:\"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n\",clipping_planes_vertex:\"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n\",\ncolor_fragment:\"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\",color_pars_fragment:\"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\\n\",color_pars_vertex:\"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\",color_vertex:\"#ifdef USE_COLOR\\n\\tvColor.xyz = color.xyz;\\n#endif\",common:\"#define PI 3.14159265359\\n#define PI2 6.28318530718\\n#define PI_HALF 1.5707963267949\\n#define RECIPROCAL_PI 0.31830988618\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat linearToRelativeLuminance( const in vec3 color ) {\\n\\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\\n\\treturn dot( weights, color.rgb );\\n}\\n\",\ncube_uv_reflection_fragment:\"#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_textureSize (1024.0)\\nint getFaceFromDirection(vec3 direction) {\\n\\tvec3 absDirection = abs(direction);\\n\\tint face = -1;\\n\\tif( absDirection.x > absDirection.z ) {\\n\\t\\tif(absDirection.x > absDirection.y )\\n\\t\\t\\tface = direction.x > 0.0 ? 0 : 3;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\telse {\\n\\t\\tif(absDirection.z > absDirection.y )\\n\\t\\t\\tface = direction.z > 0.0 ? 2 : 5;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\treturn face;\\n}\\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\\n\\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\\n\\tfloat dxRoughness = dFdx(roughness);\\n\\tfloat dyRoughness = dFdy(roughness);\\n\\tvec3 dx = dFdx( vec * scale * dxRoughness );\\n\\tvec3 dy = dFdy( vec * scale * dyRoughness );\\n\\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\\n\\td = clamp(d, 1.0, cubeUV_rangeClamp);\\n\\tfloat mipLevel = 0.5 * log2(d);\\n\\treturn vec2(floor(mipLevel), fract(mipLevel));\\n}\\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\\n\\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\\n\\tfloat a = 16.0 * cubeUV_rcpTextureSize;\\n\\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\\n\\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\\n\\tfloat powScale = exp2_packed.x * exp2_packed.y;\\n\\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\\n\\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\\n\\tbool bRes = mipLevel == 0.0;\\n\\tscale =  bRes && (scale < a) ? a : scale;\\n\\tvec3 r;\\n\\tvec2 offset;\\n\\tint face = getFaceFromDirection(direction);\\n\\tfloat rcpPowScale = 1.0 / powScale;\\n\\tif( face == 0) {\\n\\t\\tr = vec3(direction.x, -direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 1) {\\n\\t\\tr = vec3(direction.y, direction.x, direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 2) {\\n\\t\\tr = vec3(direction.z, direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 3) {\\n\\t\\tr = vec3(direction.x, direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse if( face == 4) {\\n\\t\\tr = vec3(direction.y, direction.x, -direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse {\\n\\t\\tr = vec3(direction.z, -direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\tr = normalize(r);\\n\\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\\n\\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\\n\\tvec2 base = offset + vec2( texelOffset );\\n\\treturn base + s * ( scale - 2.0 * texelOffset );\\n}\\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\\n\\tfloat roughnessVal = roughness* cubeUV_maxLods3;\\n\\tfloat r1 = floor(roughnessVal);\\n\\tfloat r2 = r1 + 1.0;\\n\\tfloat t = fract(roughnessVal);\\n\\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\\n\\tfloat s = mipInfo.y;\\n\\tfloat level0 = mipInfo.x;\\n\\tfloat level1 = level0 + 1.0;\\n\\tlevel1 = level1 > 5.0 ? 5.0 : level1;\\n\\tlevel0 += min( floor( s + 0.5 ), 5.0 );\\n\\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\\n\\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\\n\\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\\n\\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\\n\\tvec4 result = mix(color10, color20, t);\\n\\treturn vec4(result.rgb, 1.0);\\n}\\n#endif\\n\",\ndefaultnormal_vertex:\"vec3 transformedNormal = normalMatrix * objectNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n\",displacementmap_pars_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\\n\",displacementmap_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n#endif\\n\",\nemissivemap_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\\n\",emissivemap_pars_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\\n\",encodings_fragment:\"  gl_FragColor = linearToOutputTexel( gl_FragColor );\\n\",encodings_pars_fragment:\"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM            = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat D      = max( maxRange / maxRGB, 1.0 );\\n\\tD            = min( floor( D ) / 255.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n\\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\\n\\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract(Le);\\n\\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\\n\\treturn vec4( max(vRGB, 0.0), 1.0 );\\n}\\n\",\nenvmap_fragment:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\tvec2 sampleUV;\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\\n\\t\\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\\n\",\nenvmap_pars_fragment:\"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\\n\\tuniform float reflectivity;\\n\\tuniform float envMapIntensity;\\n#endif\\n#ifdef USE_ENVMAP\\n\\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\tuniform float flipEnvMap;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\\n\",\nenvmap_pars_vertex:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\\n\",envmap_vertex:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\n\",\nfog_vertex:\"\\n#ifdef USE_FOG\\nfogDepth = -mvPosition.z;\\n#endif\",fog_pars_vertex:\"#ifdef USE_FOG\\n  varying float fogDepth;\\n#endif\\n\",fog_fragment:\"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\\n\",fog_pars_fragment:\"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\\n\",\ngradientmap_pars_fragment:\"#ifdef TOON\\n\\tuniform sampler2D gradientMap;\\n\\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\t\\tfloat dotNL = dot( normal, lightDirection );\\n\\t\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t\\t#ifdef USE_GRADIENTMAP\\n\\t\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t\\t#else\\n\\t\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\",lightmap_fragment:\"#ifdef USE_LIGHTMAP\\n\\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n#endif\\n\",\nlightmap_pars_fragment:\"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\",lights_lambert_vertex:\"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\n#if NUM_POINT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\",\nlights_pars:\"uniform vec3 ambientLightColor;\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t\\tfloat shadowCameraNear;\\n\\t\\tfloat shadowCameraFar;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltcMat;\\tuniform sampler2D ltcMag;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\\n\\t\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\t\\tvec2 sampleUV;\\n\\t\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\\n\",\nlights_phong_fragment:\"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\\n\",lights_phong_pars_fragment:\"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tvec3\\tspecularColor;\\n\\tfloat\\tspecularShininess;\\n\\tfloat\\tspecularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifdef TOON\\n\\t\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#else\\n\\t\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\t\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#endif\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\\n\",\nlights_physical_fragment:\"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\\n#ifdef STANDARD\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.clearCoat = saturate( clearCoat );\\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\\n#endif\\n\",\nlights_physical_pars_fragment:\"struct PhysicalMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tfloat\\tspecularRoughness;\\n\\tvec3\\tspecularColor;\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoat;\\n\\t\\tfloat clearCoatRoughness;\\n\\t#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tfloat norm = texture2D( ltcMag, uv ).a;\\n\\t\\tvec4 t = texture2D( ltcMat, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3(   1,   0, t.y ),\\n\\t\\t\\tvec3(   0, t.z,   0 ),\\n\\t\\t\\tvec3( t.w,   0, t.x )\\n\\t\\t);\\n\\t\\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\\n\\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifndef STANDARD\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\tfloat dotNL = dotNV;\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\\n\",\nlights_template:\"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = normalize( vViewPosition );\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\\n\\t#endif\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\\n\\t#ifndef STANDARD\\n\\t\\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\\n\\t#else\\n\\t\\tvec3 clearCoatRadiance = vec3( 0.0 );\\n\\t#endif\\n\\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\\n#endif\\n\",\nlogdepthbuf_fragment:\"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\",logdepthbuf_pars_fragment:\"#ifdef USE_LOGDEPTHBUF\\n\\tuniform float logDepthBufFC;\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n#endif\\n\",logdepthbuf_pars_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n\\tuniform float logDepthBufFC;\\n#endif\",logdepthbuf_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t#else\\n\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\tgl_Position.z *= gl_Position.w;\\n\\t#endif\\n#endif\\n\",\nmap_fragment:\"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\\n\",map_pars_fragment:\"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n\",map_particle_fragment:\"#ifdef USE_MAP\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n\\tvec4 mapTexel = texture2D( map, uv );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n\",map_particle_pars_fragment:\"#ifdef USE_MAP\\n\\tuniform mat3 uvTransform;\\n\\tuniform sampler2D map;\\n#endif\\n\",\nmetalnessmap_fragment:\"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\\n\",metalnessmap_pars_fragment:\"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\",morphnormal_vertex:\"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n#endif\\n\",\nmorphtarget_pars_vertex:\"#ifdef USE_MORPHTARGETS\\n\\t#ifndef USE_MORPHNORMALS\\n\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\",morphtarget_vertex:\"#ifdef USE_MORPHTARGETS\\n\\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\\n\",\nnormal_fragment:\"#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n#endif\\n#ifdef USE_NORMALMAP\\n\\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\\n\",\nnormalmap_pars_fragment:\"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\\t\\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\t\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t\\tmapN.xy = normalScale * mapN.xy;\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\treturn normalize( tsn * mapN );\\n\\t}\\n#endif\\n\",\npacking:\"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\\n\",\npremultiplied_alpha_fragment:\"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\\n\",project_vertex:\"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\ngl_Position = projectionMatrix * mvPosition;\\n\",dithering_fragment:\"#if defined( DITHERING )\\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\\n\",dithering_pars_fragment:\"#if defined( DITHERING )\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\\n\",\nroughnessmap_fragment:\"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\\n\",roughnessmap_pars_fragment:\"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\",shadowmap_pars_fragment:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\\n\\t\\tconst vec2 offset = vec2( 0.0, 1.0 );\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / size;\\n\\t\\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\\n\\t\\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\\n\\t\\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\\n\\t\\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\\n\\t\\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\\n\\t\\tvec2 f = fract( uv * size + 0.5 );\\n\\t\\tfloat a = mix( lb, lt, f.y );\\n\\t\\tfloat b = mix( rb, rt, f.y );\\n\\t\\tfloat c = mix( a, b, f.x );\\n\\t\\treturn c;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\",\nshadowmap_pars_vertex:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n#endif\\n\",\nshadowmap_vertex:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n#endif\\n\",\nshadowmask_pars_fragment:\"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\tDirectionalLight directionalLight;\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\tSpotLight spotLight;\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\tPointLight pointLight;\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\\n\",\nskinbase_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\",skinning_pars_vertex:\"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\\n\",\nskinning_vertex:\"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\\n\",skinnormal_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n#endif\\n\",\nspecularmap_fragment:\"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\",specularmap_pars_fragment:\"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\",tonemapping_fragment:\"#if defined( TONE_MAPPING )\\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\\n\",tonemapping_pars_fragment:\"#ifndef saturate\\n\\t#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nuniform float toneMappingWhitePoint;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\\nvec3 Uncharted2ToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\n\",\nuv_pars_fragment:\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n#endif\",uv_pars_vertex:\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n\\tuniform mat3 uvTransform;\\n#endif\\n\",\nuv_vertex:\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\",uv2_pars_fragment:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\",uv2_pars_vertex:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n#endif\",\nuv2_vertex:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = uv2;\\n#endif\",worldpos_vertex:\"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\\n\\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n#endif\\n\",cube_frag:\"uniform samplerCube tCube;\\nuniform float tFlip;\\nuniform float opacity;\\nvarying vec3 vWorldPosition;\\nvoid main() {\\n\\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\\n\\tgl_FragColor.a *= opacity;\\n}\\n\",\ncube_vert:\"varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\\n\",depth_frag:\"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\\n\\t#endif\\n}\\n\",\ndepth_vert:\"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n}\\n\",\ndistanceRGBA_frag:\"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\\n\",\ndistanceRGBA_vert:\"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\\n\",\nequirect_frag:\"uniform sampler2D tEquirect;\\nvarying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldPosition );\\n\\tvec2 sampleUV;\\n\\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n}\\n\",equirect_vert:\"varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\\n\",\nlinedashed_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\",\nlinedashed_vert:\"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\tvLineDistance = scale * lineDistance;\\n\\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nmeshbasic_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\",\nmeshbasic_vert:\"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nmeshlambert_frag:\"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\",\nmeshlambert_vert:\"#define LAMBERT\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nmeshphong_frag:\"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_template>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\",\nmeshphong_vert:\"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nmeshphysical_frag:\"#define PHYSICAL\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifndef STANDARD\\n\\tuniform float clearCoat;\\n\\tuniform float clearCoatRoughness;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <lights_pars>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_template>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\",\nmeshphysical_vert:\"#define PHYSICAL\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nnormal_frag:\"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\\n\",\nnormal_vert:\"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\\n\",\npoints_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\",\npoints_vert:\"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tgl_PointSize = size * ( scale / - mvPosition.z );\\n\\t#else\\n\\t\\tgl_PointSize = size;\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nshadow_frag:\"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <fog_fragment>\\n}\\n\",shadow_vert:\"#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\"},\ntb={basic:{uniforms:Ga.merge([K.common,K.specularmap,K.envmap,K.aomap,K.lightmap,K.fog]),vertexShader:R.meshbasic_vert,fragmentShader:R.meshbasic_frag},lambert:{uniforms:Ga.merge([K.common,K.specularmap,K.envmap,K.aomap,K.lightmap,K.emissivemap,K.fog,K.lights,{emissive:{value:new H(0)}}]),vertexShader:R.meshlambert_vert,fragmentShader:R.meshlambert_frag},phong:{uniforms:Ga.merge([K.common,K.specularmap,K.envmap,K.aomap,K.lightmap,K.emissivemap,K.bumpmap,K.normalmap,K.displacementmap,K.gradientmap,\nK.fog,K.lights,{emissive:{value:new H(0)},specular:{value:new H(1118481)},shininess:{value:30}}]),vertexShader:R.meshphong_vert,fragmentShader:R.meshphong_frag},standard:{uniforms:Ga.merge([K.common,K.envmap,K.aomap,K.lightmap,K.emissivemap,K.bumpmap,K.normalmap,K.displacementmap,K.roughnessmap,K.metalnessmap,K.fog,K.lights,{emissive:{value:new H(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:R.meshphysical_vert,fragmentShader:R.meshphysical_frag},points:{uniforms:Ga.merge([K.points,\nK.fog]),vertexShader:R.points_vert,fragmentShader:R.points_frag},dashed:{uniforms:Ga.merge([K.common,K.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:R.linedashed_vert,fragmentShader:R.linedashed_frag},depth:{uniforms:Ga.merge([K.common,K.displacementmap]),vertexShader:R.depth_vert,fragmentShader:R.depth_frag},normal:{uniforms:Ga.merge([K.common,K.bumpmap,K.normalmap,K.displacementmap,{opacity:{value:1}}]),vertexShader:R.normal_vert,fragmentShader:R.normal_frag},cube:{uniforms:{tCube:{value:null},\ntFlip:{value:-1},opacity:{value:1}},vertexShader:R.cube_vert,fragmentShader:R.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:R.equirect_vert,fragmentShader:R.equirect_frag},distanceRGBA:{uniforms:Ga.merge([K.common,K.displacementmap,{referencePosition:{value:new p},nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:R.distanceRGBA_vert,fragmentShader:R.distanceRGBA_frag},shadow:{uniforms:Ga.merge([K.lights,K.fog,{color:{value:new H(0)},opacity:{value:1}}]),vertexShader:R.shadow_vert,\nfragmentShader:R.shadow_frag}};tb.physical={uniforms:Ga.merge([tb.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:R.meshphysical_vert,fragmentShader:R.meshphysical_frag};Object.assign(od.prototype,{set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new D;return function(b,c){c=a.copy(c).multiplyScalar(.5);\nthis.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(a){a=a||new D;return this.isEmpty()?a.set(0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){a=\na||new D;return this.isEmpty()?a.set(0,0):a.subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=\nthis.max.y},getParameter:function(a,b){return(b||new D).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function(a,b){return(b||new D).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new D;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);\nthis.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}});tc.prototype=Object.create(U.prototype);tc.prototype.constructor=tc;var ag=0;P.prototype=Object.assign(Object.create(za.prototype),{constructor:P,isMaterial:!0,onBeforeCompile:function(){},setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===\nc)console.warn(\"THREE.Material: '\"+b+\"' parameter is undefined.\");else if(\"shading\"===b)console.warn(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\"),this.flatShading=1===c?!0:!1;else{var d=this[b];void 0===d?console.warn(\"THREE.\"+this.type+\": '\"+b+\"' is not a property of this material.\"):d&&d.isColor?d.set(c):d&&d.isVector3&&c&&c.isVector3?d.copy(c):this[b]=\"overdraw\"===b?Number(c):c}}},toJSON:function(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;\nb.push(d)}return b}var c=void 0===a||\"string\"===typeof a;c&&(a={textures:{},images:{}});var d={metadata:{version:4.5,type:\"Material\",generator:\"Material.toJSON\"}};d.uuid=this.uuid;d.type=this.type;\"\"!==this.name&&(d.name=this.name);this.color&&this.color.isColor&&(d.color=this.color.getHex());void 0!==this.roughness&&(d.roughness=this.roughness);void 0!==this.metalness&&(d.metalness=this.metalness);this.emissive&&this.emissive.isColor&&(d.emissive=this.emissive.getHex());1!==this.emissiveIntensity&&\n(d.emissiveIntensity=this.emissiveIntensity);this.specular&&this.specular.isColor&&(d.specular=this.specular.getHex());void 0!==this.shininess&&(d.shininess=this.shininess);void 0!==this.clearCoat&&(d.clearCoat=this.clearCoat);void 0!==this.clearCoatRoughness&&(d.clearCoatRoughness=this.clearCoatRoughness);this.map&&this.map.isTexture&&(d.map=this.map.toJSON(a).uuid);this.alphaMap&&this.alphaMap.isTexture&&(d.alphaMap=this.alphaMap.toJSON(a).uuid);this.lightMap&&this.lightMap.isTexture&&(d.lightMap=\nthis.lightMap.toJSON(a).uuid);this.bumpMap&&this.bumpMap.isTexture&&(d.bumpMap=this.bumpMap.toJSON(a).uuid,d.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(d.normalMap=this.normalMap.toJSON(a).uuid,d.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(d.displacementMap=this.displacementMap.toJSON(a).uuid,d.displacementScale=this.displacementScale,d.displacementBias=this.displacementBias);this.roughnessMap&&this.roughnessMap.isTexture&&\n(d.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(d.metalnessMap=this.metalnessMap.toJSON(a).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(d.emissiveMap=this.emissiveMap.toJSON(a).uuid);this.specularMap&&this.specularMap.isTexture&&(d.specularMap=this.specularMap.toJSON(a).uuid);this.envMap&&this.envMap.isTexture&&(d.envMap=this.envMap.toJSON(a).uuid,d.reflectivity=this.reflectivity);this.gradientMap&&this.gradientMap.isTexture&&(d.gradientMap=\nthis.gradientMap.toJSON(a).uuid);void 0!==this.size&&(d.size=this.size);void 0!==this.sizeAttenuation&&(d.sizeAttenuation=this.sizeAttenuation);1!==this.blending&&(d.blending=this.blending);!0===this.flatShading&&(d.flatShading=this.flatShading);0!==this.side&&(d.side=this.side);0!==this.vertexColors&&(d.vertexColors=this.vertexColors);1>this.opacity&&(d.opacity=this.opacity);!0===this.transparent&&(d.transparent=this.transparent);d.depthFunc=this.depthFunc;d.depthTest=this.depthTest;d.depthWrite=\nthis.depthWrite;0!==this.rotation&&(d.rotation=this.rotation);1!==this.linewidth&&(d.linewidth=this.linewidth);void 0!==this.dashSize&&(d.dashSize=this.dashSize);void 0!==this.gapSize&&(d.gapSize=this.gapSize);void 0!==this.scale&&(d.scale=this.scale);!0===this.dithering&&(d.dithering=!0);0<this.alphaTest&&(d.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(d.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&(d.wireframe=this.wireframe);1<this.wireframeLinewidth&&(d.wireframeLinewidth=\nthis.wireframeLinewidth);\"round\"!==this.wireframeLinecap&&(d.wireframeLinecap=this.wireframeLinecap);\"round\"!==this.wireframeLinejoin&&(d.wireframeLinejoin=this.wireframeLinejoin);!0===this.morphTargets&&(d.morphTargets=!0);!0===this.skinning&&(d.skinning=!0);!1===this.visible&&(d.visible=!1);\"{}\"!==JSON.stringify(this.userData)&&(d.userData=this.userData);c&&(c=b(a.textures),a=b(a.images),0<c.length&&(d.textures=c),0<a.length&&(d.images=a));return d},clone:function(){return(new this.constructor).copy(this)},\ncopy:function(a){this.name=a.name;this.fog=a.fog;this.lights=a.lights;this.blending=a.blending;this.side=a.side;this.flatShading=a.flatShading;this.vertexColors=a.vertexColors;this.opacity=a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;this.blendEquationAlpha=a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;\nthis.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.dithering=a.dithering;this.alphaTest=a.alphaTest;this.premultipliedAlpha=a.premultipliedAlpha;this.overdraw=a.overdraw;this.visible=a.visible;this.userData=JSON.parse(JSON.stringify(a.userData));this.clipShadows=a.clipShadows;this.clipIntersection=a.clipIntersection;a=a.clippingPlanes;var b=null;if(null!==a)for(var c=\na.length,b=Array(c),d=0;d!==c;++d)b[d]=a[d].clone();this.clippingPlanes=b;return this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});eb.prototype=Object.create(P.prototype);eb.prototype.constructor=eb;eb.prototype.isMeshDepthMaterial=!0;eb.prototype.copy=function(a){P.prototype.copy.call(this,a);this.depthPacking=a.depthPacking;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=\na.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};fb.prototype=Object.create(P.prototype);fb.prototype.constructor=fb;fb.prototype.isMeshDistanceMaterial=!0;fb.prototype.copy=function(a){P.prototype.copy.call(this,a);this.referencePosition.copy(a.referencePosition);this.nearDistance=a.nearDistance;this.farDistance=a.farDistance;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=\na.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;return this};Object.assign(Xa.prototype,{isBox3:!0,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromArray:function(a){for(var b=Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,k=a.length;h<k;h+=3){var m=a[h],q=a[h+1],l=a[h+2];m<b&&(b=m);q<c&&(c=q);l<d&&(d=l);m>e&&(e=m);q>f&&(f=q);l>g&&(g=l)}this.min.set(b,c,d);this.max.set(e,\nf,g);return this},setFromBufferAttribute:function(a){for(var b=Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,k=a.count;h<k;h++){var m=a.getX(h),q=a.getY(h),l=a.getZ(h);m<b&&(b=m);q<c&&(c=q);l<d&&(d=l);m>e&&(e=m);q>f&&(f=q);l>g&&(g=l)}this.min.set(b,c,d);this.max.set(e,f,g);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new p;return function(b,c){c=a.copy(c).multiplyScalar(.5);\nthis.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),setFromObject:function(a){this.makeEmpty();return this.expandByObject(a)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(a){a=\na||new p;return this.isEmpty()?a.set(0,0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){a=a||new p;return this.isEmpty()?a.set(0,0,0):a.subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},expandByObject:function(){function a(a){var f=a.geometry;if(void 0!==f)if(f.isGeometry)for(f=\nf.vertices,c=0,d=f.length;c<d;c++)e.copy(f[c]),e.applyMatrix4(a.matrixWorld),b.expandByPoint(e);else if(f.isBufferGeometry&&(f=f.attributes.position,void 0!==f))for(c=0,d=f.count;c<d;c++)e.fromBufferAttribute(f,c).applyMatrix4(a.matrixWorld),b.expandByPoint(e)}var b,c,d,e=new p;return function(c){b=this;c.updateMatrixWorld(!0);c.traverse(a);return this}}(),containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=\na.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z},getParameter:function(a,b){return(b||new p).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},intersectsSphere:function(){var a=new p;return function(b){this.clampPoint(b.center,\na);return a.distanceToSquared(b.center)<=b.radius*b.radius}}(),intersectsPlane:function(a){if(0<a.normal.x){var b=a.normal.x*this.min.x;var c=a.normal.x*this.max.x}else b=a.normal.x*this.max.x,c=a.normal.x*this.min.x;0<a.normal.y?(b+=a.normal.y*this.min.y,c+=a.normal.y*this.max.y):(b+=a.normal.y*this.max.y,c+=a.normal.y*this.min.y);0<a.normal.z?(b+=a.normal.z*this.min.z,c+=a.normal.z*this.max.z):(b+=a.normal.z*this.max.z,c+=a.normal.z*this.min.z);return b<=a.constant&&c>=a.constant},clampPoint:function(a,\nb){return(b||new p).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new p;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=new p;return function(b){b=b||new Ia;this.getCenter(b.center);b.radius=.5*this.getSize(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=\n[new p,new p,new p,new p,new p,new p,new p,new p];return function(b){if(this.isEmpty())return this;a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);\na[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}});Object.assign(Ia.prototype,{set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new Xa;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).getCenter(d);for(var e=c=0,f=b.length;e<f;e++)c=Math.max(c,\nd.distanceToSquared(b[e]));this.radius=Math.sqrt(c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=\nb*b},intersectsBox:function(a){return a.intersectsSphere(this)},intersectsPlane:function(a){return Math.abs(a.distanceToPoint(this.center))<=this.radius},clampPoint:function(a,b){var c=this.center.distanceToSquared(a);b=b||new p;b.copy(a);c>this.radius*this.radius&&(b.sub(this.center).normalize(),b.multiplyScalar(this.radius).add(this.center));return b},getBoundingBox:function(a){a=a||new Xa;a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function(a){this.center.applyMatrix4(a);\nthis.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius}});Object.assign(Ea.prototype,{set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=\nnew p,b=new p;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+\nthis.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return(b||new p).copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)},intersectLine:function(){var a=new p;return function(b,c){c=c||new p;var d=b.delta(a),e=this.normal.dot(d);if(0===e){if(0===this.distanceToPoint(b.start))return c.copy(b.start)}else if(e=-(b.start.dot(this.normal)+this.constant)/e,!(0>e||1<e))return c.copy(d).multiplyScalar(e).add(b.start)}}(),intersectsLine:function(a){var b=\nthis.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectsBox:function(a){return a.intersectsPlane(this)},intersectsSphere:function(a){return a.intersectsPlane(this)},coplanarPoint:function(a){return(a||new p).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new p,b=new ma;return function(c,d){d=d||b.getNormalMatrix(c);c=this.coplanarPoint(a).applyMatrix4(c);d=this.normal.applyMatrix3(d).normalize();this.constant=-c.dot(d);return this}}(),\ntranslate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant}});Object.assign(rd.prototype,{set:function(a,b,c,d,e,f){var g=this.planes;g[0].copy(a);g[1].copy(b);g[2].copy(c);g[3].copy(d);g[4].copy(e);g[5].copy(f);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,\nc=a.elements;a=c[0];var d=c[1],e=c[2],f=c[3],g=c[4],h=c[5],k=c[6],m=c[7],q=c[8],l=c[9],p=c[10],r=c[11],t=c[12],v=c[13],w=c[14],c=c[15];b[0].setComponents(f-a,m-g,r-q,c-t).normalize();b[1].setComponents(f+a,m+g,r+q,c+t).normalize();b[2].setComponents(f+d,m+h,r+l,c+v).normalize();b[3].setComponents(f-d,m-h,r-l,c-v).normalize();b[4].setComponents(f-e,m-k,r-p,c-w).normalize();b[5].setComponents(f+e,m+k,r+p,c+w).normalize();return this},intersectsObject:function(){var a=new Ia;return function(b){var c=\nb.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere).applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSprite:function(){var a=new Ia;return function(b){a.center.set(0,0,0);a.radius=.7071067811865476;a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function(a){var b=this.planes,c=a.center;a=-a.radius;for(var d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new p,b=\nnew p;return function(c){for(var d=this.planes,e=0;6>e;e++){var f=d[e];a.x=0<f.normal.x?c.min.x:c.max.x;b.x=0<f.normal.x?c.max.x:c.min.x;a.y=0<f.normal.y?c.min.y:c.max.y;b.y=0<f.normal.y?c.max.y:c.min.y;a.z=0<f.normal.z?c.min.z:c.max.z;b.z=0<f.normal.z?c.max.z:c.min.z;var g=f.distanceToPoint(a),f=f.distanceToPoint(b);if(0>g&&0>f)return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0}});gb.RotationOrders=\"XYZ YZX ZXY XZY YXZ ZYX\".split(\" \");\ngb.DefaultOrder=\"XYZ\";Object.defineProperties(gb.prototype,{x:{get:function(){return this._x},set:function(a){this._x=a;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(a){this._y=a;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(a){this._z=a;this.onChangeCallback()}},order:{get:function(){return this._order},set:function(a){this._order=a;this.onChangeCallback()}}});Object.assign(gb.prototype,{isEuler:!0,set:function(a,b,c,d){this._x=a;this._y=b;this._z=\nc;this._order=d||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b,c){var d=Q.clamp,e=a.elements;a=e[0];var f=e[4],g=e[8],h=e[1],k=e[5],m=e[9],l=e[2],n=e[6],e=e[10];b=b||this._order;\"XYZ\"===b?(this._y=Math.asin(d(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(-m,e),this._z=\nMath.atan2(-f,a)):(this._x=Math.atan2(n,k),this._z=0)):\"YXZ\"===b?(this._x=Math.asin(-d(m,-1,1)),.99999>Math.abs(m)?(this._y=Math.atan2(g,e),this._z=Math.atan2(h,k)):(this._y=Math.atan2(-l,a),this._z=0)):\"ZXY\"===b?(this._x=Math.asin(d(n,-1,1)),.99999>Math.abs(n)?(this._y=Math.atan2(-l,e),this._z=Math.atan2(-f,k)):(this._y=0,this._z=Math.atan2(h,a))):\"ZYX\"===b?(this._y=Math.asin(-d(l,-1,1)),.99999>Math.abs(l)?(this._x=Math.atan2(n,e),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-f,k))):\"YZX\"===\nb?(this._z=Math.asin(d(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(-m,k),this._y=Math.atan2(-l,a)):(this._x=0,this._y=Math.atan2(g,e))):\"XZY\"===b?(this._z=Math.asin(-d(f,-1,1)),.99999>Math.abs(f)?(this._x=Math.atan2(n,k),this._y=Math.atan2(g,a)):(this._x=Math.atan2(-m,e),this._y=0)):console.warn(\"THREE.Euler: .setFromRotationMatrix() given unsupported order: \"+b);this._order=b;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var a=new O;return function(b,c,d){a.makeRotationFromQuaternion(b);\nreturn this.setFromRotationMatrix(a,c,d)}}(),setFromVector3:function(a,b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new ha;return function(b){a.setFromEuler(this);return this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);\nvoid 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._order;return a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new p(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}});Object.assign(Wd.prototype,{set:function(a){this.mask=1<<a|0},enable:function(a){this.mask=this.mask|1<<a|0},toggle:function(a){this.mask^=1<<a|0},disable:function(a){this.mask&=~(1<<a|0)},test:function(a){return 0!==(this.mask&\na.mask)}});var cg=0;x.DefaultUp=new p(0,1,0);x.DefaultMatrixAutoUpdate=!0;x.prototype=Object.assign(Object.create(za.prototype),{constructor:x,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(a){this.quaternion.premultiply(a);return this},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,\n!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new ha;return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.multiply(a);return this}}(),rotateOnWorldAxis:function(){var a=new ha;return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.premultiply(a);return this}}(),rotateX:function(){var a=new p(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=\nnew p(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new p(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new p;return function(b,c){a.copy(b).applyQuaternion(this.quaternion);this.position.add(a.multiplyScalar(c));return this}}(),translateX:function(){var a=new p(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new p(0,1,0);return function(b){return this.translateOnAxis(a,\nb)}}(),translateZ:function(){var a=new p(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new O;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new O,b=new p;return function(c,d,e){c.isVector3?b.copy(c):b.set(c,d,e);this.isCamera?a.lookAt(this.position,b,this.up):a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),\nadd:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error(\"THREE.Object3D.add: object can't be added as a child of itself.\",a),this;a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:\"added\"}),this.children.push(a)):console.error(\"THREE.Object3D.add: object not an instance of THREE.Object3D.\",a);return this},remove:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);\nreturn this}b=this.children.indexOf(a);-1!==b&&(a.parent=null,a.dispatchEvent({type:\"removed\"}),this.children.splice(b,1));return this},getObjectById:function(a){return this.getObjectByProperty(\"id\",a)},getObjectByName:function(a){return this.getObjectByProperty(\"name\",a)},getObjectByProperty:function(a,b){if(this[a]===b)return this;for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c].getObjectByProperty(a,b);if(void 0!==e)return e}},getWorldPosition:function(a){a=a||new p;this.updateMatrixWorld(!0);\nreturn a.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new p,b=new p;return function(c){c=c||new ha;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,c,b);return c}}(),getWorldRotation:function(){var a=new ha;return function(b){b=b||new gb;this.getWorldQuaternion(a);return b.setFromQuaternion(a,this.rotation.order,!1)}}(),getWorldScale:function(){var a=new p,b=new ha;return function(c){c=c||new p;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,b,c);return c}}(),\ngetWorldDirection:function(){var a=new ha;return function(b){b=b||new p;this.getWorldQuaternion(a);return b.set(0,0,1).applyQuaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverseVisible(a)}},traverseAncestors:function(a){var b=this.parent;null!==b&&(a(b),b.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,\nthis.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].updateMatrixWorld(a)},toJSON:function(a){function b(b,c){void 0===b[c.uuid]&&(b[c.uuid]=c.toJSON(a));return c.uuid}function c(a){var b=\n[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var d=void 0===a||\"string\"===typeof a,e={};d&&(a={geometries:{},materials:{},textures:{},images:{},shapes:{}},e.metadata={version:4.5,type:\"Object\",generator:\"Object3D.toJSON\"});var f={};f.uuid=this.uuid;f.type=this.type;\"\"!==this.name&&(f.name=this.name);!0===this.castShadow&&(f.castShadow=!0);!0===this.receiveShadow&&(f.receiveShadow=!0);!1===this.visible&&(f.visible=!1);\"{}\"!==JSON.stringify(this.userData)&&(f.userData=this.userData);\nf.matrix=this.matrix.toArray();if(void 0!==this.geometry){f.geometry=b(a.geometries,this.geometry);var g=this.geometry.parameters;if(void 0!==g&&void 0!==g.shapes)if(g=g.shapes,Array.isArray(g))for(var h=0,k=g.length;h<k;h++)b(a.shapes,g[h]);else b(a.shapes,g)}if(void 0!==this.material)if(Array.isArray(this.material)){g=[];h=0;for(k=this.material.length;h<k;h++)g.push(b(a.materials,this.material[h]));f.material=g}else f.material=b(a.materials,this.material);if(0<this.children.length)for(f.children=\n[],h=0;h<this.children.length;h++)f.children.push(this.children[h].toJSON(a).object);if(d){var d=c(a.geometries),h=c(a.materials),k=c(a.textures),m=c(a.images);g=c(a.shapes);0<d.length&&(e.geometries=d);0<h.length&&(e.materials=h);0<k.length&&(e.textures=k);0<m.length&&(e.images=m);0<g.length&&(e.shapes=g)}e.object=f;return e},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,b){void 0===b&&(b=!0);this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.quaternion.copy(a.quaternion);\nthis.scale.copy(a.scale);this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.layers.mask=a.layers.mask;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(b=0;b<a.children.length;b++)this.add(a.children[b].clone());return this}});\nTa.prototype=Object.assign(Object.create(x.prototype),{constructor:Ta,isCamera:!0,copy:function(a,b){x.prototype.copy.call(this,a,b);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);return this},getWorldDirection:function(){var a=new ha;return function(b){b=b||new p;this.getWorldQuaternion(a);return b.set(0,0,-1).applyQuaternion(a)}}(),updateMatrixWorld:function(a){x.prototype.updateMatrixWorld.call(this,a);this.matrixWorldInverse.getInverse(this.matrixWorld)},\nclone:function(){return(new this.constructor).copy(this)}});Lb.prototype=Object.assign(Object.create(Ta.prototype),{constructor:Lb,isOrthographicCamera:!0,copy:function(a,b){Ta.prototype.copy.call(this,a,b);this.left=a.left;this.right=a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;this.view=null===a.view?null:Object.assign({},a.view);return this},setViewOffset:function(a,b,c,d,e,f){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,\noffsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=c;this.view.offsetY=d;this.view.width=e;this.view.height=f;this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=(this.right-this.left)/(2*this.zoom),b=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,d=(this.top+this.bottom)/2,e=c-a,c=c+a,a=d+b,b=d-b;if(null!==\nthis.view&&this.view.enabled)var c=this.zoom/(this.view.width/this.view.fullWidth),b=this.zoom/(this.view.height/this.view.fullHeight),f=(this.right-this.left)/this.view.width,d=(this.top-this.bottom)/this.view.height,e=e+this.view.offsetX/c*f,c=e+this.view.width/c*f,a=a-this.view.offsetY/b*d,b=a-this.view.height/b*d;this.projectionMatrix.makeOrthographic(e,c,a,b,this.near,this.far)},toJSON:function(a){a=x.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=\nthis.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;null!==this.view&&(a.object.view=Object.assign({},this.view));return a}});Object.assign(Ya.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var b=0,c=a.vertexNormals.length;b<c;b++)this.vertexNormals[b]=a.vertexNormals[b].clone();b=0;\nfor(c=a.vertexColors.length;b<c;b++)this.vertexColors[b]=a.vertexColors[b].clone();return this}});var dg=0;L.prototype=Object.assign(Object.create(za.prototype),{constructor:L,isGeometry:!0,applyMatrix:function(a){for(var b=(new ma).getNormalMatrix(a),c=0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();for(var e=0,f=a.vertexNormals.length;e<f;e++)a.vertexNormals[e].applyMatrix3(b).normalize()}null!==\nthis.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=this.verticesNeedUpdate=!0;return this},rotateX:function(){var a=new O;return function(b){a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a=new O;return function(b){a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a=new O;return function(b){a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a=\nnew O;return function(b,c,d){a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a=new O;return function(b,c,d){a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a=new x;return function(b){a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(a){function b(a,b,d,e){var f=void 0!==g?[l[a].clone(),l[b].clone(),l[d].clone()]:[],q=void 0!==h?[c.colors[a].clone(),c.colors[b].clone(),c.colors[d].clone()]:[];e=new Ya(a,\nb,d,f,q,e);c.faces.push(e);void 0!==k&&c.faceVertexUvs[0].push([n[a].clone(),n[b].clone(),n[d].clone()]);void 0!==m&&c.faceVertexUvs[1].push([u[a].clone(),u[b].clone(),u[d].clone()])}var c=this,d=null!==a.index?a.index.array:void 0,e=a.attributes,f=e.position.array,g=void 0!==e.normal?e.normal.array:void 0,h=void 0!==e.color?e.color.array:void 0,k=void 0!==e.uv?e.uv.array:void 0,m=void 0!==e.uv2?e.uv2.array:void 0;void 0!==m&&(this.faceVertexUvs[1]=[]);for(var l=[],n=[],u=[],r=e=0;e<f.length;e+=3,\nr+=2)c.vertices.push(new p(f[e],f[e+1],f[e+2])),void 0!==g&&l.push(new p(g[e],g[e+1],g[e+2])),void 0!==h&&c.colors.push(new H(h[e],h[e+1],h[e+2])),void 0!==k&&n.push(new D(k[r],k[r+1])),void 0!==m&&u.push(new D(m[r],m[r+1]));var t=a.groups;if(0<t.length)for(e=0;e<t.length;e++)for(var f=t[e],v=f.start,w=f.count,r=v,v=v+w;r<v;r+=3)void 0!==d?b(d[r],d[r+1],d[r+2],f.materialIndex):b(r,r+1,r+2,f.materialIndex);else if(void 0!==d)for(e=0;e<d.length;e+=3)b(d[e],d[e+1],d[e+2]);else for(e=0;e<f.length/3;e+=\n3)b(e,e+1,e+2);this.computeFaceNormals();null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();var a=this.boundingBox.getCenter().negate();this.translate(a.x,a.y,a.z);return a},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,b=this.boundingSphere.radius,b=0===b?1:1/b,c=new O;c.set(b,0,0,-b*a.x,0,b,0,-b*a.y,0,0,b,-b*a.z,0,0,0,1);\nthis.applyMatrix(c);return this},computeFaceNormals:function(){for(var a=new p,b=new p,c=0,d=this.faces.length;c<d;c++){var e=this.faces[c],f=this.vertices[e.a],g=this.vertices[e.b];a.subVectors(this.vertices[e.c],g);b.subVectors(f,g);a.cross(b);a.normalize();e.normal.copy(a)}},computeVertexNormals:function(a){void 0===a&&(a=!0);var b;var c=Array(this.vertices.length);var d=0;for(b=this.vertices.length;d<b;d++)c[d]=new p;if(a){var e=new p,f=new p;a=0;for(d=this.faces.length;a<d;a++){b=this.faces[a];\nvar g=this.vertices[b.a];var h=this.vertices[b.b];var k=this.vertices[b.c];e.subVectors(k,h);f.subVectors(g,h);e.cross(f);c[b.a].add(e);c[b.b].add(e);c[b.c].add(e)}}else for(this.computeFaceNormals(),a=0,d=this.faces.length;a<d;a++)b=this.faces[a],c[b.a].add(b.normal),c[b.b].add(b.normal),c[b.c].add(b.normal);d=0;for(b=this.vertices.length;d<b;d++)c[d].normalize();a=0;for(d=this.faces.length;a<d;a++)b=this.faces[a],g=b.vertexNormals,3===g.length?(g[0].copy(c[b.a]),g[1].copy(c[b.b]),g[2].copy(c[b.c])):\n(g[0]=c[b.a].clone(),g[1]=c[b.b].clone(),g[2]=c[b.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var a;this.computeFaceNormals();var b=0;for(a=this.faces.length;b<a;b++){var c=this.faces[b];var d=c.vertexNormals;3===d.length?(d[0].copy(c.normal),d[1].copy(c.normal),d[2].copy(c.normal)):(d[0]=c.normal.clone(),d[1]=c.normal.clone(),d[2]=c.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var a,b;var c=\n0;for(b=this.faces.length;c<b;c++){var d=this.faces[c];d.__originalFaceNormal?d.__originalFaceNormal.copy(d.normal):d.__originalFaceNormal=d.normal.clone();d.__originalVertexNormals||(d.__originalVertexNormals=[]);var e=0;for(a=d.vertexNormals.length;e<a;e++)d.__originalVertexNormals[e]?d.__originalVertexNormals[e].copy(d.vertexNormals[e]):d.__originalVertexNormals[e]=d.vertexNormals[e].clone()}var f=new L;f.faces=this.faces;e=0;for(a=this.morphTargets.length;e<a;e++){if(!this.morphNormals[e]){this.morphNormals[e]=\n{};this.morphNormals[e].faceNormals=[];this.morphNormals[e].vertexNormals=[];d=this.morphNormals[e].faceNormals;var g=this.morphNormals[e].vertexNormals;c=0;for(b=this.faces.length;c<b;c++){var h=new p;var k={a:new p,b:new p,c:new p};d.push(h);g.push(k)}}g=this.morphNormals[e];f.vertices=this.morphTargets[e].vertices;f.computeFaceNormals();f.computeVertexNormals();c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],h=g.faceNormals[c],k=g.vertexNormals[c],h.copy(d.normal),k.a.copy(d.vertexNormals[0]),\nk.b.copy(d.vertexNormals[1]),k.c.copy(d.vertexNormals[2])}c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],d.normal=d.__originalFaceNormal,d.vertexNormals=d.__originalVertexNormals},computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,d=b.length;c<d;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Xa);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&\n(this.boundingSphere=new Ia);this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,b,c){if(a&&a.isGeometry){var d,e=this.vertices.length,f=this.vertices,g=a.vertices,h=this.faces,k=a.faces,m=this.faceVertexUvs[0],l=a.faceVertexUvs[0],n=this.colors,p=a.colors;void 0===c&&(c=0);void 0!==b&&(d=(new ma).getNormalMatrix(b));a=0;for(var r=g.length;a<r;a++){var t=g[a].clone();void 0!==b&&t.applyMatrix4(b);f.push(t)}a=0;for(r=p.length;a<r;a++)n.push(p[a].clone());a=0;for(r=k.length;a<r;a++){var g=\nk[a],v=g.vertexNormals,p=g.vertexColors,n=new Ya(g.a+e,g.b+e,g.c+e);n.normal.copy(g.normal);void 0!==d&&n.normal.applyMatrix3(d).normalize();b=0;for(f=v.length;b<f;b++)t=v[b].clone(),void 0!==d&&t.applyMatrix3(d).normalize(),n.vertexNormals.push(t);n.color.copy(g.color);b=0;for(f=p.length;b<f;b++)t=p[b],n.vertexColors.push(t.clone());n.materialIndex=g.materialIndex+c;h.push(n)}a=0;for(r=l.length;a<r;a++)if(c=l[a],d=[],void 0!==c){b=0;for(f=c.length;b<f;b++)d.push(c[b].clone());m.push(d)}}else console.error(\"THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.\",\na)},mergeMesh:function(a){a&&a.isMesh?(a.matrixAutoUpdate&&a.updateMatrix(),this.merge(a.geometry,a.matrix)):console.error(\"THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.\",a)},mergeVertices:function(){var a={},b=[],c=[],d=Math.pow(10,4),e;var f=0;for(e=this.vertices.length;f<e;f++){var g=this.vertices[f];g=Math.round(g.x*d)+\"_\"+Math.round(g.y*d)+\"_\"+Math.round(g.z*d);void 0===a[g]?(a[g]=f,b.push(this.vertices[f]),c[f]=b.length-1):c[f]=c[a[g]]}a=[];f=0;for(e=this.faces.length;f<e;f++)for(d=\nthis.faces[f],d.a=c[d.a],d.b=c[d.b],d.c=c[d.c],d=[d.a,d.b,d.c],g=0;3>g;g++)if(d[g]===d[(g+1)%3]){a.push(f);break}for(f=a.length-1;0<=f;f--)for(d=a[f],this.faces.splice(d,1),c=0,e=this.faceVertexUvs.length;c<e;c++)this.faceVertexUvs[c].splice(d,1);f=this.vertices.length-b.length;this.vertices=b;return f},setFromPoints:function(a){this.vertices=[];for(var b=0,c=a.length;b<c;b++){var d=a[b];this.vertices.push(new p(d.x,d.y,d.z||0))}return this},sortFacesByMaterialIndex:function(){for(var a=this.faces,\nb=a.length,c=0;c<b;c++)a[c]._id=c;a.sort(function(a,b){return a.materialIndex-b.materialIndex});var d=this.faceVertexUvs[0],e=this.faceVertexUvs[1],f,g;d&&d.length===b&&(f=[]);e&&e.length===b&&(g=[]);for(c=0;c<b;c++){var h=a[c]._id;f&&f.push(d[h]);g&&g.push(e[h])}f&&(this.faceVertexUvs[0]=f);g&&(this.faceVertexUvs[1]=g)},toJSON:function(){function a(a,b,c){return c?a|1<<b:a&~(1<<b)}function b(a){var b=a.x.toString()+a.y.toString()+a.z.toString();if(void 0!==m[b])return m[b];m[b]=k.length/3;k.push(a.x,\na.y,a.z);return m[b]}function c(a){var b=a.r.toString()+a.g.toString()+a.b.toString();if(void 0!==n[b])return n[b];n[b]=l.length;l.push(a.getHex());return n[b]}function d(a){var b=a.x.toString()+a.y.toString();if(void 0!==r[b])return r[b];r[b]=p.length/2;p.push(a.x,a.y);return r[b]}var e={metadata:{version:4.5,type:\"Geometry\",generator:\"Geometry.toJSON\"}};e.uuid=this.uuid;e.type=this.type;\"\"!==this.name&&(e.name=this.name);if(void 0!==this.parameters){var f=this.parameters,g;for(g in f)void 0!==f[g]&&\n(e[g]=f[g]);return e}f=[];for(g=0;g<this.vertices.length;g++){var h=this.vertices[g];f.push(h.x,h.y,h.z)}var h=[],k=[],m={},l=[],n={},p=[],r={};for(g=0;g<this.faces.length;g++){var t=this.faces[g],v=void 0!==this.faceVertexUvs[0][g],w=0<t.normal.length(),z=0<t.vertexNormals.length,y=1!==t.color.r||1!==t.color.g||1!==t.color.b,x=0<t.vertexColors.length,A=0,A=a(A,0,0),A=a(A,1,!0),A=a(A,2,!1),A=a(A,3,v),A=a(A,4,w),A=a(A,5,z),A=a(A,6,y),A=a(A,7,x);h.push(A);h.push(t.a,t.b,t.c);h.push(t.materialIndex);\nv&&(v=this.faceVertexUvs[0][g],h.push(d(v[0]),d(v[1]),d(v[2])));w&&h.push(b(t.normal));z&&(w=t.vertexNormals,h.push(b(w[0]),b(w[1]),b(w[2])));y&&h.push(c(t.color));x&&(t=t.vertexColors,h.push(c(t[0]),c(t[1]),c(t[2])))}e.data={};e.data.vertices=f;e.data.normals=k;0<l.length&&(e.data.colors=l);0<p.length&&(e.data.uvs=[p]);e.data.faces=h;return e},clone:function(){return(new L).copy(this)},copy:function(a){var b,c,d;this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=\n[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var e=a.vertices;var f=0;for(b=e.length;f<b;f++)this.vertices.push(e[f].clone());e=a.colors;f=0;for(b=e.length;f<b;f++)this.colors.push(e[f].clone());e=a.faces;f=0;for(b=e.length;f<b;f++)this.faces.push(e[f].clone());f=0;for(b=a.faceVertexUvs.length;f<b;f++){var g=a.faceVertexUvs[f];void 0===this.faceVertexUvs[f]&&(this.faceVertexUvs[f]=[]);e=0;for(c=g.length;e<\nc;e++){var h=g[e],k=[];var m=0;for(d=h.length;m<d;m++)k.push(h[m].clone());this.faceVertexUvs[f].push(k)}}m=a.morphTargets;f=0;for(b=m.length;f<b;f++){d={};d.name=m[f].name;if(void 0!==m[f].vertices)for(d.vertices=[],e=0,c=m[f].vertices.length;e<c;e++)d.vertices.push(m[f].vertices[e].clone());if(void 0!==m[f].normals)for(d.normals=[],e=0,c=m[f].normals.length;e<c;e++)d.normals.push(m[f].normals[e].clone());this.morphTargets.push(d)}m=a.morphNormals;f=0;for(b=m.length;f<b;f++){d={};if(void 0!==m[f].vertexNormals)for(d.vertexNormals=\n[],e=0,c=m[f].vertexNormals.length;e<c;e++)g=m[f].vertexNormals[e],h={},h.a=g.a.clone(),h.b=g.b.clone(),h.c=g.c.clone(),d.vertexNormals.push(h);if(void 0!==m[f].faceNormals)for(d.faceNormals=[],e=0,c=m[f].faceNormals.length;e<c;e++)d.faceNormals.push(m[f].faceNormals[e].clone());this.morphNormals.push(d)}e=a.skinWeights;f=0;for(b=e.length;f<b;f++)this.skinWeights.push(e[f].clone());e=a.skinIndices;f=0;for(b=e.length;f<b;f++)this.skinIndices.push(e[f].clone());e=a.lineDistances;f=0;for(b=e.length;f<\nb;f++)this.lineDistances.push(e[f]);f=a.boundingBox;null!==f&&(this.boundingBox=f.clone());f=a.boundingSphere;null!==f&&(this.boundingSphere=f.clone());this.elementsNeedUpdate=a.elementsNeedUpdate;this.verticesNeedUpdate=a.verticesNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.lineDistancesNeedUpdate=a.lineDistancesNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});\nObject.defineProperty(M.prototype,\"needsUpdate\",{set:function(a){!0===a&&this.version++}});Object.assign(M.prototype,{isBufferAttribute:!0,setArray:function(a){if(Array.isArray(a))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");this.count=void 0!==a?a.length/this.itemSize:0;this.array=a},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.itemSize=a.itemSize;this.count=a.count;this.normalized=a.normalized;\nthis.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.itemSize;c*=b.itemSize;for(var d=0,e=this.itemSize;d<e;d++)this.array[a+d]=b.array[c+d];return this},copyArray:function(a){this.array.set(a);return this},copyColorsArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn(\"THREE.BufferAttribute.copyColorsArray(): color is undefined\",d),f=new H);b[c++]=f.r;b[c++]=f.g;b[c++]=f.b}return this},copyIndicesArray:function(a){for(var b=this.array,\nc=0,d=0,e=a.length;d<e;d++){var f=a[d];b[c++]=f.a;b[c++]=f.b;b[c++]=f.c}return this},copyVector2sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn(\"THREE.BufferAttribute.copyVector2sArray(): vector is undefined\",d),f=new D);b[c++]=f.x;b[c++]=f.y}return this},copyVector3sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn(\"THREE.BufferAttribute.copyVector3sArray(): vector is undefined\",d),f=new p);\nb[c++]=f.x;b[c++]=f.y;b[c++]=f.z}return this},copyVector4sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn(\"THREE.BufferAttribute.copyVector4sArray(): vector is undefined\",d),f=new aa);b[c++]=f.x;b[c++]=f.y;b[c++]=f.z;b[c++]=f.w}return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},getX:function(a){return this.array[a*this.itemSize]},setX:function(a,b){this.array[a*this.itemSize]=b;return this},getY:function(a){return this.array[a*\nthis.itemSize+1]},setY:function(a,b){this.array[a*this.itemSize+1]=b;return this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,b){this.array[a*this.itemSize+2]=b;return this},getW:function(a){return this.array[a*this.itemSize+3]},setW:function(a,b){this.array[a*this.itemSize+3]=b;return this},setXY:function(a,b,c){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;return this},setXYZ:function(a,b,c,d){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=\nd;return this},setXYZW:function(a,b,c,d,e){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return this},onUpload:function(a){this.onUploadCallback=a;return this},clone:function(){return(new this.constructor(this.array,this.itemSize)).copy(this)}});uc.prototype=Object.create(M.prototype);uc.prototype.constructor=uc;vc.prototype=Object.create(M.prototype);vc.prototype.constructor=vc;wc.prototype=Object.create(M.prototype);wc.prototype.constructor=wc;xc.prototype=\nObject.create(M.prototype);xc.prototype.constructor=xc;ob.prototype=Object.create(M.prototype);ob.prototype.constructor=ob;yc.prototype=Object.create(M.prototype);yc.prototype.constructor=yc;pb.prototype=Object.create(M.prototype);pb.prototype.constructor=pb;B.prototype=Object.create(M.prototype);B.prototype.constructor=B;zc.prototype=Object.create(M.prototype);zc.prototype.constructor=zc;Object.assign(Ve.prototype,{computeGroups:function(a){var b=[],c=void 0;a=a.faces;for(var d=0;d<a.length;d++){var e=\na[d];if(e.materialIndex!==c){c=e.materialIndex;void 0!==f&&(f.count=3*d-f.start,b.push(f));var f={start:3*d,materialIndex:c}}}void 0!==f&&(f.count=3*d-f.start,b.push(f));this.groups=b},fromGeometry:function(a){var b=a.faces,c=a.vertices,d=a.faceVertexUvs,e=d[0]&&0<d[0].length,f=d[1]&&0<d[1].length,g=a.morphTargets,h=g.length;if(0<h){var k=[];for(var m=0;m<h;m++)k[m]=[];this.morphTargets.position=k}var l=a.morphNormals,n=l.length;if(0<n){var p=[];for(m=0;m<n;m++)p[m]=[];this.morphTargets.normal=p}for(var r=\na.skinIndices,t=a.skinWeights,v=r.length===c.length,w=t.length===c.length,m=0;m<b.length;m++){var z=b[m];this.vertices.push(c[z.a],c[z.b],c[z.c]);var y=z.vertexNormals;3===y.length?this.normals.push(y[0],y[1],y[2]):(y=z.normal,this.normals.push(y,y,y));y=z.vertexColors;3===y.length?this.colors.push(y[0],y[1],y[2]):(y=z.color,this.colors.push(y,y,y));!0===e&&(y=d[0][m],void 0!==y?this.uvs.push(y[0],y[1],y[2]):(console.warn(\"THREE.DirectGeometry.fromGeometry(): Undefined vertexUv \",m),this.uvs.push(new D,\nnew D,new D)));!0===f&&(y=d[1][m],void 0!==y?this.uvs2.push(y[0],y[1],y[2]):(console.warn(\"THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 \",m),this.uvs2.push(new D,new D,new D)));for(y=0;y<h;y++){var x=g[y].vertices;k[y].push(x[z.a],x[z.b],x[z.c])}for(y=0;y<n;y++)x=l[y].vertexNormals[m],p[y].push(x.a,x.b,x.c);v&&this.skinIndices.push(r[z.a],r[z.b],r[z.c]);w&&this.skinWeights.push(t[z.a],t[z.b],t[z.c])}this.computeGroups(a);this.verticesNeedUpdate=a.verticesNeedUpdate;this.normalsNeedUpdate=\na.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this}});var eg=1;E.prototype=Object.assign(Object.create(za.prototype),{constructor:E,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(a){Array.isArray(a)?this.index=new (65535<Xd(a)?pb:ob)(a,1):this.index=a},addAttribute:function(a,b,c){if(b&&b.isBufferAttribute||b&&b.isInterleavedBufferAttribute)if(\"index\"===a)console.warn(\"THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.\"),\nthis.setIndex(b);else return this.attributes[a]=b,this;else console.warn(\"THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).\"),this.addAttribute(a,new M(b,c))},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){delete this.attributes[a];return this},addGroup:function(a,b,c){this.groups.push({start:a,count:b,materialIndex:void 0!==c?c:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,b){this.drawRange.start=a;this.drawRange.count=b},\napplyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToBufferAttribute(b),b.needsUpdate=!0);b=this.attributes.normal;void 0!==b&&((new ma).getNormalMatrix(a).applyToBufferAttribute(b),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(){var a=new O;return function(b){a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a=new O;return function(b){a.makeRotationY(b);\nthis.applyMatrix(a);return this}}(),rotateZ:function(){var a=new O;return function(b){a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a=new O;return function(b,c,d){a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a=new O;return function(b,c,d){a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a=new x;return function(b){a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),center:function(){this.computeBoundingBox();\nvar a=this.boundingBox.getCenter().negate();this.translate(a.x,a.y,a.z);return a},setFromObject:function(a){var b=a.geometry;if(a.isPoints||a.isLine){a=new B(3*b.vertices.length,3);var c=new B(3*b.colors.length,3);this.addAttribute(\"position\",a.copyVector3sArray(b.vertices));this.addAttribute(\"color\",c.copyColorsArray(b.colors));b.lineDistances&&b.lineDistances.length===b.vertices.length&&(a=new B(b.lineDistances.length,1),this.addAttribute(\"lineDistance\",a.copyArray(b.lineDistances)));null!==b.boundingSphere&&\n(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else a.isMesh&&b&&b.isGeometry&&this.fromGeometry(b);return this},setFromPoints:function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];b.push(e.x,e.y,e.z||0)}this.addAttribute(\"position\",new B(b,3));return this},updateFromObject:function(a){var b=a.geometry;if(a.isMesh){var c=b.__directGeometry;!0===b.elementsNeedUpdate&&(c=void 0,b.elementsNeedUpdate=!1);if(void 0===c)return this.fromGeometry(b);\nc.verticesNeedUpdate=b.verticesNeedUpdate;c.normalsNeedUpdate=b.normalsNeedUpdate;c.colorsNeedUpdate=b.colorsNeedUpdate;c.uvsNeedUpdate=b.uvsNeedUpdate;c.groupsNeedUpdate=b.groupsNeedUpdate;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=c}!0===b.verticesNeedUpdate&&(c=this.attributes.position,void 0!==c&&(c.copyVector3sArray(b.vertices),c.needsUpdate=!0),b.verticesNeedUpdate=!1);!0===b.normalsNeedUpdate&&(c=this.attributes.normal,void 0!==\nc&&(c.copyVector3sArray(b.normals),c.needsUpdate=!0),b.normalsNeedUpdate=!1);!0===b.colorsNeedUpdate&&(c=this.attributes.color,void 0!==c&&(c.copyColorsArray(b.colors),c.needsUpdate=!0),b.colorsNeedUpdate=!1);b.uvsNeedUpdate&&(c=this.attributes.uv,void 0!==c&&(c.copyVector2sArray(b.uvs),c.needsUpdate=!0),b.uvsNeedUpdate=!1);b.lineDistancesNeedUpdate&&(c=this.attributes.lineDistance,void 0!==c&&(c.copyArray(b.lineDistances),c.needsUpdate=!0),b.lineDistancesNeedUpdate=!1);b.groupsNeedUpdate&&(b.computeGroups(a.geometry),\nthis.groups=b.groups,b.groupsNeedUpdate=!1);return this},fromGeometry:function(a){a.__directGeometry=(new Ve).fromGeometry(a);return this.fromDirectGeometry(a.__directGeometry)},fromDirectGeometry:function(a){var b=new Float32Array(3*a.vertices.length);this.addAttribute(\"position\",(new M(b,3)).copyVector3sArray(a.vertices));0<a.normals.length&&(b=new Float32Array(3*a.normals.length),this.addAttribute(\"normal\",(new M(b,3)).copyVector3sArray(a.normals)));0<a.colors.length&&(b=new Float32Array(3*a.colors.length),\nthis.addAttribute(\"color\",(new M(b,3)).copyColorsArray(a.colors)));0<a.uvs.length&&(b=new Float32Array(2*a.uvs.length),this.addAttribute(\"uv\",(new M(b,2)).copyVector2sArray(a.uvs)));0<a.uvs2.length&&(b=new Float32Array(2*a.uvs2.length),this.addAttribute(\"uv2\",(new M(b,2)).copyVector2sArray(a.uvs2)));0<a.indices.length&&(b=new (65535<Xd(a.indices)?Uint32Array:Uint16Array)(3*a.indices.length),this.setIndex((new M(b,1)).copyIndicesArray(a.indices)));this.groups=a.groups;for(var c in a.morphTargets){for(var b=\n[],d=a.morphTargets[c],e=0,f=d.length;e<f;e++){var g=d[e],h=new B(3*g.length,3);b.push(h.copyVector3sArray(g))}this.morphAttributes[c]=b}0<a.skinIndices.length&&(c=new B(4*a.skinIndices.length,4),this.addAttribute(\"skinIndex\",c.copyVector4sArray(a.skinIndices)));0<a.skinWeights.length&&(c=new B(4*a.skinWeights.length,4),this.addAttribute(\"skinWeight\",c.copyVector4sArray(a.skinWeights)));null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=\na.boundingBox.clone());return this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Xa);var a=this.attributes.position;void 0!==a?this.boundingBox.setFromBufferAttribute(a):this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var a=\nnew Xa,b=new p;return function(){null===this.boundingSphere&&(this.boundingSphere=new Ia);var c=this.attributes.position;if(c){var d=this.boundingSphere.center;a.setFromBufferAttribute(c);a.getCenter(d);for(var e=0,f=0,g=c.count;f<g;f++)b.x=c.getX(f),b.y=c.getY(f),b.z=c.getZ(f),e=Math.max(e,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(e);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.',\nthis)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.index,b=this.attributes,c=this.groups;if(b.position){var d=b.position.array;if(void 0===b.normal)this.addAttribute(\"normal\",new M(new Float32Array(d.length),3));else for(var e=b.normal.array,f=0,g=e.length;f<g;f++)e[f]=0;var e=b.normal.array,h=new p,k=new p,m=new p,l=new p,n=new p;if(a){a=a.array;0===c.length&&this.addGroup(0,a.length);for(var u=0,r=c.length;u<r;++u){f=c[u];g=f.start;var t=f.count;f=g;for(g+=t;f<\ng;f+=3){t=3*a[f+0];var v=3*a[f+1];var w=3*a[f+2];h.fromArray(d,t);k.fromArray(d,v);m.fromArray(d,w);l.subVectors(m,k);n.subVectors(h,k);l.cross(n);e[t]+=l.x;e[t+1]+=l.y;e[t+2]+=l.z;e[v]+=l.x;e[v+1]+=l.y;e[v+2]+=l.z;e[w]+=l.x;e[w+1]+=l.y;e[w+2]+=l.z}}}else for(f=0,g=d.length;f<g;f+=9)h.fromArray(d,f),k.fromArray(d,f+3),m.fromArray(d,f+6),l.subVectors(m,k),n.subVectors(h,k),l.cross(n),e[f]=l.x,e[f+1]=l.y,e[f+2]=l.z,e[f+3]=l.x,e[f+4]=l.y,e[f+5]=l.z,e[f+6]=l.x,e[f+7]=l.y,e[f+8]=l.z;this.normalizeNormals();\nb.normal.needsUpdate=!0}},merge:function(a,b){if(a&&a.isBufferGeometry){void 0===b&&(b=0);var c=this.attributes,d;for(d in c)if(void 0!==a.attributes[d])for(var e=c[d].array,f=a.attributes[d],g=f.array,h=0,f=f.itemSize*b;h<g.length;h++,f++)e[f]=g[h];return this}console.error(\"THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.\",a)},normalizeNormals:function(){var a=new p;return function(){for(var b=this.attributes.normal,c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),\na.z=b.getZ(c),a.normalize(),b.setXYZ(c,a.x,a.y,a.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn(\"THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.\"),this;var a=new E,b=this.index.array,c=this.attributes,d;for(d in c){for(var e=c[d],f=e.array,e=e.itemSize,g=new f.constructor(b.length*e),h,k=0,m=0,l=b.length;m<l;m++){h=b[m]*e;for(var n=0;n<e;n++)g[k++]=f[h++]}a.addAttribute(d,new M(g,e))}return a},toJSON:function(){var a={metadata:{version:4.5,type:\"BufferGeometry\",\ngenerator:\"BufferGeometry.toJSON\"}};a.uuid=this.uuid;a.type=this.type;\"\"!==this.name&&(a.name=this.name);if(void 0!==this.parameters){var b=this.parameters;for(var c in b)void 0!==b[c]&&(a[c]=b[c]);return a}a.data={attributes:{}};var d=this.index;null!==d&&(b=Array.prototype.slice.call(d.array),a.data.index={type:d.array.constructor.name,array:b});d=this.attributes;for(c in d){var e=d[c];b=Array.prototype.slice.call(e.array);a.data.attributes[c]={itemSize:e.itemSize,type:e.array.constructor.name,\narray:b,normalized:e.normalized}}c=this.groups;0<c.length&&(a.data.groups=JSON.parse(JSON.stringify(c)));c=this.boundingSphere;null!==c&&(a.data.boundingSphere={center:c.center.toArray(),radius:c.radius});return a},clone:function(){return(new E).copy(this)},copy:function(a){var b;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var c=a.index;null!==c&&this.setIndex(c.clone());c=a.attributes;for(g in c)this.addAttribute(g,\nc[g].clone());var d=a.morphAttributes;for(g in d){var e=[],f=d[g];c=0;for(b=f.length;c<b;c++)e.push(f[c].clone());this.morphAttributes[g]=e}var g=a.groups;c=0;for(b=g.length;c<b;c++)d=g[c],this.addGroup(d.start,d.count,d.materialIndex);g=a.boundingBox;null!==g&&(this.boundingBox=g.clone());g=a.boundingSphere;null!==g&&(this.boundingSphere=g.clone());this.drawRange.start=a.drawRange.start;this.drawRange.count=a.drawRange.count;return this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});\nMb.prototype=Object.create(L.prototype);Mb.prototype.constructor=Mb;qb.prototype=Object.create(E.prototype);qb.prototype.constructor=qb;Ac.prototype=Object.create(L.prototype);Ac.prototype.constructor=Ac;rb.prototype=Object.create(E.prototype);rb.prototype.constructor=rb;Aa.prototype=Object.create(P.prototype);Aa.prototype.constructor=Aa;Aa.prototype.isMeshBasicMaterial=!0;Aa.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;\nthis.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;return this};Fa.prototype=\nObject.create(P.prototype);Fa.prototype.constructor=Fa;Fa.prototype.isShaderMaterial=!0;Fa.prototype.copy=function(a){P.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=Ga.clone(a.uniforms);this.defines=a.defines;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.lights=a.lights;this.clipping=a.clipping;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;this.extensions=\na.extensions;return this};Fa.prototype.toJSON=function(a){a=P.prototype.toJSON.call(this,a);a.uniforms=this.uniforms;a.vertexShader=this.vertexShader;a.fragmentShader=this.fragmentShader;return a};Object.assign(sb.prototype,{set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new p).copy(this.direction).multiplyScalar(a).add(this.origin)},\nlookAt:function(a){this.direction.copy(a).sub(this.origin).normalize();return this},recast:function(){var a=new p;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(a,b){b=b||new p;b.subVectors(a,this.origin);a=b.dot(this.direction);return 0>a?b.copy(this.origin):b.copy(this.direction).multiplyScalar(a).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new p;return function(b){var c=\na.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceToSquared(b)}}(),distanceSqToSegment:function(){var a=new p,b=new p,c=new p;return function(d,e,f,g){a.copy(d).add(e).multiplyScalar(.5);b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var h=.5*d.distanceTo(e),k=-this.direction.dot(b),m=c.dot(this.direction),l=-c.dot(b),n=c.lengthSq(),p=Math.abs(1-k*k);if(0<p){d=k*l-m;e=k*\nm-l;var r=h*p;0<=d?e>=-r?e<=r?(h=1/p,d*=h,e*=h,k=d*(d+k*e+2*m)+e*(k*d+e+2*l)+n):(e=h,d=Math.max(0,-(k*e+m)),k=-d*d+e*(e+2*l)+n):(e=-h,d=Math.max(0,-(k*e+m)),k=-d*d+e*(e+2*l)+n):e<=-r?(d=Math.max(0,-(-k*h+m)),e=0<d?-h:Math.min(Math.max(-h,-l),h),k=-d*d+e*(e+2*l)+n):e<=r?(d=0,e=Math.min(Math.max(-h,-l),h),k=e*(e+2*l)+n):(d=Math.max(0,-(k*h+m)),e=0<d?h:Math.min(Math.max(-h,-l),h),k=-d*d+e*(e+2*l)+n)}else e=0<k?-h:h,d=Math.max(0,-(k*e+m)),k=-d*d+e*(e+2*l)+n;f&&f.copy(this.direction).multiplyScalar(d).add(this.origin);\ng&&g.copy(b).multiplyScalar(e).add(a);return k}}(),intersectSphere:function(){var a=new p;return function(b,c){a.subVectors(b.center,this.origin);var d=a.dot(this.direction),e=a.dot(a)-d*d;b=b.radius*b.radius;if(e>b)return null;b=Math.sqrt(b-e);e=d-b;d+=b;return 0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c)}}(),intersectsSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?\n0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null},intersectPlane:function(a,b){a=this.distanceToPlane(a);return null===a?null:this.at(a,b)},intersectsPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},intersectBox:function(a,b){var c=1/this.direction.x;var d=1/this.direction.y;var e=1/this.direction.z,f=this.origin;if(0<=c){var g=(a.min.x-f.x)*c;c*=a.max.x-f.x}else g=(a.max.x-f.x)*c,c*=a.min.x-f.x;if(0<=d){var h=(a.min.y-\nf.y)*d;d*=a.max.y-f.y}else h=(a.max.y-f.y)*d,d*=a.min.y-f.y;if(g>d||h>c)return null;if(h>g||g!==g)g=h;if(d<c||c!==c)c=d;0<=e?(h=(a.min.z-f.z)*e,a=(a.max.z-f.z)*e):(h=(a.max.z-f.z)*e,a=(a.min.z-f.z)*e);if(g>a||h>c)return null;if(h>g||g!==g)g=h;if(a<c||c!==c)c=a;return 0>c?null:this.at(0<=g?g:c,b)},intersectsBox:function(){var a=new p;return function(b){return null!==this.intersectBox(b,a)}}(),intersectTriangle:function(){var a=new p,b=new p,c=new p,d=new p;return function(e,f,g,h,k){b.subVectors(f,\ne);c.subVectors(g,e);d.crossVectors(b,c);f=this.direction.dot(d);if(0<f){if(h)return null;h=1}else if(0>f)h=-1,f=-f;else return null;a.subVectors(this.origin,e);e=h*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;g=h*this.direction.dot(b.cross(a));if(0>g||e+g>f)return null;e=-h*a.dot(d);return 0>e?null:this.at(e/f,k)}}(),applyMatrix4:function(a){this.origin.applyMatrix4(a);this.direction.transformDirection(a);return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}});\nObject.assign(Nb.prototype,{set:function(a,b){this.start.copy(a);this.end.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},getCenter:function(a){return(a||new p).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){return(a||new p).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},\nat:function(a,b){b=b||new p;return this.delta(b).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new p,b=new p;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);c=b.dot(b);c=b.dot(a)/c;d&&(c=Q.clamp(c,0,1));return c}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);c=c||new p;return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);this.end.applyMatrix4(a);\nreturn this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)}});Object.assign(Za,{normal:function(){var a=new p;return function(b,c,d,e){e=e||new p;e.subVectors(d,c);a.subVectors(b,c);e.cross(a);b=e.lengthSq();return 0<b?e.multiplyScalar(1/Math.sqrt(b)):e.set(0,0,0)}}(),barycoordFromPoint:function(){var a=new p,b=new p,c=new p;return function(d,e,f,g,h){a.subVectors(g,e);b.subVectors(f,e);c.subVectors(d,e);d=a.dot(a);e=a.dot(b);f=a.dot(c);var k=b.dot(b);g=b.dot(c);var m=\nd*k-e*e;h=h||new p;if(0===m)return h.set(-2,-1,-1);m=1/m;k=(k*f-e*g)*m;d=(d*g-e*f)*m;return h.set(1-k-d,d,k)}}(),containsPoint:function(){var a=new p;return function(b,c,d,e){b=Za.barycoordFromPoint(b,c,d,e,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}()});Object.assign(Za.prototype,{set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},clone:function(){return(new this.constructor).copy(this)},\ncopy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new p,b=new p;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return.5*a.cross(b).length()}}(),midpoint:function(a){return(a||new p).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return Za.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new Ea).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return Za.barycoordFromPoint(a,\nthis.a,this.b,this.c,b)},containsPoint:function(a){return Za.containsPoint(a,this.a,this.b,this.c)},closestPointToPoint:function(){var a=new Ea,b=[new Nb,new Nb,new Nb],c=new p,d=new p;return function(e,f){f=f||new p;var g=Infinity;a.setFromCoplanarPoints(this.a,this.b,this.c);a.projectPoint(e,c);if(!0===this.containsPoint(c))f.copy(c);else for(b[0].set(this.a,this.b),b[1].set(this.b,this.c),b[2].set(this.c,this.a),e=0;e<b.length;e++){b[e].closestPointToPoint(c,!0,d);var h=c.distanceToSquared(d);\nh<g&&(g=h,f.copy(d))}return f}}(),equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}});ra.prototype=Object.assign(Object.create(x.prototype),{constructor:ra,isMesh:!0,setDrawMode:function(a){this.drawMode=a},copy:function(a){x.prototype.copy.call(this,a);this.drawMode=a.drawMode;void 0!==a.morphTargetInfluences&&(this.morphTargetInfluences=a.morphTargetInfluences.slice());void 0!==a.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},a.morphTargetDictionary));\nreturn this},updateMorphTargets:function(){var a=this.geometry;if(a.isBufferGeometry){a=a.morphAttributes;var b=Object.keys(a);if(0<b.length){var c=a[b[0]];if(void 0!==c)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},a=0,b=c.length;a<b;a++){var d=c[a].name||String(a);this.morphTargetInfluences.push(0);this.morphTargetDictionary[d]=a}}}else if(c=a.morphTargets,void 0!==c&&0<c.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},a=0,b=c.length;a<b;a++)d=c[a].name||\nString(a),this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=a},raycast:function(){function a(a,b,c,d,e,f,g){Za.barycoordFromPoint(a,b,c,d,v);e.multiplyScalar(v.x);f.multiplyScalar(v.y);g.multiplyScalar(v.z);e.add(f).add(g);return e.clone()}function b(a,b,c,d,e,f,g,h){if(null===(1===b.side?d.intersectTriangle(g,f,e,!0,h):d.intersectTriangle(e,f,g,2!==b.side,h)))return null;z.copy(h);z.applyMatrix4(a.matrixWorld);b=c.ray.origin.distanceTo(z);return b<c.near||b>c.far?null:{distance:b,\npoint:z.clone(),object:a}}function c(c,d,e,f,m,l,q,n){g.fromBufferAttribute(f,l);h.fromBufferAttribute(f,q);k.fromBufferAttribute(f,n);if(c=b(c,c.material,d,e,g,h,k,w))m&&(u.fromBufferAttribute(m,l),r.fromBufferAttribute(m,q),t.fromBufferAttribute(m,n),c.uv=a(w,g,h,k,u,r,t)),c.face=new Ya(l,q,n,Za.normal(g,h,k)),c.faceIndex=l;return c}var d=new O,e=new sb,f=new Ia,g=new p,h=new p,k=new p,m=new p,l=new p,n=new p,u=new D,r=new D,t=new D,v=new p,w=new p,z=new p;return function(q,p){var v=this.geometry,\nz=this.material,y=this.matrixWorld;if(void 0!==z&&(null===v.boundingSphere&&v.computeBoundingSphere(),f.copy(v.boundingSphere),f.applyMatrix4(y),!1!==q.ray.intersectsSphere(f)&&(d.getInverse(y),e.copy(q.ray).applyMatrix4(d),null===v.boundingBox||!1!==e.intersectsBox(v.boundingBox)))){var x;if(v.isBufferGeometry){var z=v.index,B=v.attributes.position,y=v.attributes.uv,D;if(null!==z){var C=0;for(D=z.count;C<D;C+=3){v=z.getX(C);var I=z.getX(C+1);var E=z.getX(C+2);if(x=c(this,q,e,B,y,v,I,E))x.faceIndex=\nMath.floor(C/3),p.push(x)}}else if(void 0!==B)for(C=0,D=B.count;C<D;C+=3)if(v=C,I=C+1,E=C+2,x=c(this,q,e,B,y,v,I,E))x.index=v,p.push(x)}else if(v.isGeometry){var y=Array.isArray(z);C=v.vertices;D=v.faces;I=v.faceVertexUvs[0];0<I.length&&(B=I);for(var H=0,K=D.length;H<K;H++){var N=D[H];x=y?z[N.materialIndex]:z;if(void 0!==x){I=C[N.a];E=C[N.b];var L=C[N.c];if(!0===x.morphTargets){var M=v.morphTargets,O=this.morphTargetInfluences;g.set(0,0,0);h.set(0,0,0);k.set(0,0,0);for(var P=0,Q=M.length;P<Q;P++){var R=\nO[P];if(0!==R){var U=M[P].vertices;g.addScaledVector(m.subVectors(U[N.a],I),R);h.addScaledVector(l.subVectors(U[N.b],E),R);k.addScaledVector(n.subVectors(U[N.c],L),R)}}g.add(I);h.add(E);k.add(L);I=g;E=h;L=k}if(x=b(this,x,q,e,I,E,L,w))B&&B[H]&&(M=B[H],u.copy(M[0]),r.copy(M[1]),t.copy(M[2]),x.uv=a(w,I,E,L,u,r,t)),x.face=N,x.faceIndex=H,p.push(x)}}}}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});var yg=0;ba.prototype=Object.assign(Object.create(Ta.prototype),\n{constructor:ba,isPerspectiveCamera:!0,copy:function(a,b){Ta.prototype.copy.call(this,a,b);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=null===a.view?null:Object.assign({},a.view);this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return this},setFocalLength:function(a){a=.5*this.getFilmHeight()/a;this.fov=2*Q.RAD2DEG*Math.atan(a);this.updateProjectionMatrix()},getFocalLength:function(){var a=Math.tan(.5*Q.DEG2RAD*this.fov);\nreturn.5*this.getFilmHeight()/a},getEffectiveFOV:function(){return 2*Q.RAD2DEG*Math.atan(Math.tan(.5*Q.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(a,b,c,d,e,f){this.aspect=a/b;null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=\nc;this.view.offsetY=d;this.view.width=e;this.view.height=f;this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=this.near,b=a*Math.tan(.5*Q.DEG2RAD*this.fov)/this.zoom,c=2*b,d=this.aspect*c,e=-.5*d,f=this.view;if(null!==this.view&&this.view.enabled)var g=f.fullWidth,h=f.fullHeight,e=e+f.offsetX*d/g,b=b-f.offsetY*c/h,d=f.width/g*d,c=f.height/h*c;f=this.filmOffset;0!==f&&(e+=a*f/this.getFilmWidth());\nthis.projectionMatrix.makePerspective(e,e+d,b,b-c,a,this.far)},toJSON:function(a){a=x.prototype.toJSON.call(this,a);a.object.fov=this.fov;a.object.zoom=this.zoom;a.object.near=this.near;a.object.far=this.far;a.object.focus=this.focus;a.object.aspect=this.aspect;null!==this.view&&(a.object.view=Object.assign({},this.view));a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;return a}});ud.prototype=Object.assign(Object.create(ba.prototype),{constructor:ud,isArrayCamera:!0});Pb.prototype.isFogExp2=\n!0;Pb.prototype.clone=function(){return new Pb(this.color.getHex(),this.density)};Pb.prototype.toJSON=function(){return{type:\"FogExp2\",color:this.color.getHex(),density:this.density}};Qb.prototype.isFog=!0;Qb.prototype.clone=function(){return new Qb(this.color.getHex(),this.near,this.far)};Qb.prototype.toJSON=function(){return{type:\"Fog\",color:this.color.getHex(),near:this.near,far:this.far}};vd.prototype=Object.assign(Object.create(x.prototype),{constructor:vd,copy:function(a,b){x.prototype.copy.call(this,\na,b);null!==a.background&&(this.background=a.background.clone());null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return this},toJSON:function(a){var b=x.prototype.toJSON.call(this,a);null!==this.background&&(b.object.background=this.background.toJSON(a));null!==this.fog&&(b.object.fog=this.fog.toJSON());return b}});de.prototype=Object.assign(Object.create(x.prototype),\n{constructor:de,isLensFlare:!0,copy:function(a){x.prototype.copy.call(this,a);this.positionScreen.copy(a.positionScreen);this.customUpdateCallback=a.customUpdateCallback;for(var b=0,c=a.lensFlares.length;b<c;b++)this.lensFlares.push(a.lensFlares[b]);return this},add:function(a,b,c,d,e,f){void 0===b&&(b=-1);void 0===c&&(c=0);void 0===f&&(f=1);void 0===e&&(e=new H(16777215));void 0===d&&(d=1);c=Math.min(c,Math.max(0,c));this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:0,\nopacity:f,color:e,blending:d})},updateLensFlares:function(){var a,b=this.lensFlares.length,c=2*-this.positionScreen.x,d=2*-this.positionScreen.y;for(a=0;a<b;a++){var e=this.lensFlares[a];e.x=this.positionScreen.x+c*e.distance;e.y=this.positionScreen.y+d*e.distance;e.wantedRotation=e.x*Math.PI*.25;e.rotation+=.25*(e.wantedRotation-e.rotation)}}});hb.prototype=Object.create(P.prototype);hb.prototype.constructor=hb;hb.prototype.isSpriteMaterial=!0;hb.prototype.copy=function(a){P.prototype.copy.call(this,\na);this.color.copy(a.color);this.map=a.map;this.rotation=a.rotation;return this};Cc.prototype=Object.assign(Object.create(x.prototype),{constructor:Cc,isSprite:!0,raycast:function(){var a=new p,b=new p,c=new p;return function(d,e){b.setFromMatrixPosition(this.matrixWorld);d.ray.closestPointToPoint(b,a);c.setFromMatrixScale(this.matrixWorld);var f=c.x*c.y/4;b.distanceToSquared(a)>f||(f=d.ray.origin.distanceTo(a),f<d.near||f>d.far||e.push({distance:f,point:a.clone(),face:null,object:this}))}}(),clone:function(){return(new this.constructor(this.material)).copy(this)}});\nDc.prototype=Object.assign(Object.create(x.prototype),{constructor:Dc,copy:function(a){x.prototype.copy.call(this,a,!1);a=a.levels;for(var b=0,c=a.length;b<c;b++){var d=a[b];this.addLevel(d.object.clone(),d.distance)}return this},addLevel:function(a,b){void 0===b&&(b=0);b=Math.abs(b);for(var c=this.levels,d=0;d<c.length&&!(b<c[d].distance);d++);c.splice(d,0,{distance:b,object:a});this.add(a)},getObjectForDistance:function(a){for(var b=this.levels,c=1,d=b.length;c<d&&!(a<b[c].distance);c++);return b[c-\n1].object},raycast:function(){var a=new p;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.origin.distanceTo(a);this.getObjectForDistance(d).raycast(b,c)}}(),update:function(){var a=new p,b=new p;return function(c){var d=this.levels;if(1<d.length){a.setFromMatrixPosition(c.matrixWorld);b.setFromMatrixPosition(this.matrixWorld);c=a.distanceTo(b);d[0].object.visible=!0;for(var e=1,f=d.length;e<f;e++)if(c>=d[e].distance)d[e-1].object.visible=!1,d[e].object.visible=!0;else break;\nfor(;e<f;e++)d[e].object.visible=!1}}}(),toJSON:function(a){a=x.prototype.toJSON.call(this,a);a.object.levels=[];for(var b=this.levels,c=0,d=b.length;c<d;c++){var e=b[c];a.object.levels.push({object:e.object.uuid,distance:e.distance})}return a}});Object.assign(Ec.prototype,{calculateInverses:function(){this.boneInverses=[];for(var a=0,b=this.bones.length;a<b;a++){var c=new O;this.bones[a]&&c.getInverse(this.bones[a].matrixWorld);this.boneInverses.push(c)}},pose:function(){var a,b;var c=0;for(b=this.bones.length;c<\nb;c++)(a=this.bones[c])&&a.matrixWorld.getInverse(this.boneInverses[c]);c=0;for(b=this.bones.length;c<b;c++)if(a=this.bones[c])a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)},update:function(){var a=new O,b=new O;return function(){for(var c=this.bones,d=this.boneInverses,e=this.boneMatrices,f=this.boneTexture,g=0,h=c.length;g<h;g++)a.multiplyMatrices(c[g]?c[g].matrixWorld:\nb,d[g]),a.toArray(e,16*g);void 0!==f&&(f.needsUpdate=!0)}}(),clone:function(){return new Ec(this.bones,this.boneInverses)}});wd.prototype=Object.assign(Object.create(x.prototype),{constructor:wd,isBone:!0});xd.prototype=Object.assign(Object.create(ra.prototype),{constructor:xd,isSkinnedMesh:!0,initBones:function(){var a=[],b;if(this.geometry&&void 0!==this.geometry.bones){var c=0;for(b=this.geometry.bones.length;c<b;c++){var d=this.geometry.bones[c];var e=new wd;a.push(e);e.name=d.name;e.position.fromArray(d.pos);\ne.quaternion.fromArray(d.rotq);void 0!==d.scl&&e.scale.fromArray(d.scl)}c=0;for(b=this.geometry.bones.length;c<b;c++)d=this.geometry.bones[c],-1!==d.parent&&null!==d.parent&&void 0!==a[d.parent]?a[d.parent].add(a[c]):this.add(a[c])}this.updateMatrixWorld(!0);return a},bind:function(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var a;\nif(this.geometry&&this.geometry.isGeometry)for(a=0;a<this.geometry.skinWeights.length;a++){var b=this.geometry.skinWeights[a];var c=1/b.manhattanLength();Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var b=new aa,d=this.geometry.attributes.skinWeight;for(a=0;a<d.count;a++)b.x=d.getX(a),b.y=d.getY(a),b.z=d.getZ(a),b.w=d.getW(a),c=1/b.manhattanLength(),Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0),d.setXYZW(a,b.x,b.y,b.z,b.w)}},updateMatrixWorld:function(a){ra.prototype.updateMatrixWorld.call(this,\na);\"attached\"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):\"detached\"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn(\"THREE.SkinnedMesh: Unrecognized bindMode: \"+this.bindMode)},clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});W.prototype=Object.create(P.prototype);W.prototype.constructor=W;W.prototype.isLineBasicMaterial=!0;W.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);\nthis.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;return this};sa.prototype=Object.assign(Object.create(x.prototype),{constructor:sa,isLine:!0,raycast:function(){var a=new O,b=new sb,c=new Ia;return function(d,e){var f=d.linePrecision,f=f*f,g=this.geometry,h=this.matrixWorld;null===g.boundingSphere&&g.computeBoundingSphere();c.copy(g.boundingSphere);c.applyMatrix4(h);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(h);b.copy(d.ray).applyMatrix4(a);var k=new p,m=new p,h=new p,\nl=new p,n=this&&this.isLineSegments?2:1;if(g.isBufferGeometry){var u=g.index;var r=g.attributes.position.array;if(null!==u)for(var t=u.array,g=0,v=t.length-1;g<v;g+=n)u=t[g+1],k.fromArray(r,3*t[g]),m.fromArray(r,3*u),u=b.distanceSqToSegment(k,m,l,h),u>f||(l.applyMatrix4(this.matrixWorld),u=d.ray.origin.distanceTo(l),u<d.near||u>d.far||e.push({distance:u,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}));else for(g=0,v=r.length/3-1;g<v;g+=n)k.fromArray(r,\n3*g),m.fromArray(r,3*g+3),u=b.distanceSqToSegment(k,m,l,h),u>f||(l.applyMatrix4(this.matrixWorld),u=d.ray.origin.distanceTo(l),u<d.near||u>d.far||e.push({distance:u,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else if(g.isGeometry)for(k=g.vertices,m=k.length,g=0;g<m-1;g+=n)u=b.distanceSqToSegment(k[g],k[g+1],l,h),u>f||(l.applyMatrix4(this.matrixWorld),u=d.ray.origin.distanceTo(l),u<d.near||u>d.far||e.push({distance:u,point:h.clone().applyMatrix4(this.matrixWorld),\nindex:g,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});X.prototype=Object.assign(Object.create(sa.prototype),{constructor:X,isLineSegments:!0});yd.prototype=Object.assign(Object.create(sa.prototype),{constructor:yd,isLineLoop:!0});Ka.prototype=Object.create(P.prototype);Ka.prototype.constructor=Ka;Ka.prototype.isPointsMaterial=!0;Ka.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);\nthis.map=a.map;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;return this};Rb.prototype=Object.assign(Object.create(x.prototype),{constructor:Rb,isPoints:!0,raycast:function(){var a=new O,b=new sb,c=new Ia;return function(d,e){function f(a,c){var f=b.distanceSqToPoint(a);if(f<l){a=b.closestPointToPoint(a);a.applyMatrix4(k);var h=d.ray.origin.distanceTo(a);h<d.near||h>d.far||e.push({distance:h,distanceToRay:Math.sqrt(f),point:a.clone(),index:c,face:null,object:g})}}var g=this,h=this.geometry,\nk=this.matrixWorld,m=d.params.Points.threshold;null===h.boundingSphere&&h.computeBoundingSphere();c.copy(h.boundingSphere);c.applyMatrix4(k);c.radius+=m;if(!1!==d.ray.intersectsSphere(c)){a.getInverse(k);b.copy(d.ray).applyMatrix4(a);var m=m/((this.scale.x+this.scale.y+this.scale.z)/3),l=m*m,m=new p;if(h.isBufferGeometry){var n=h.index,h=h.attributes.position.array;if(null!==n)for(var u=n.array,n=0,r=u.length;n<r;n++){var t=u[n];m.fromArray(h,3*t);f(m,t)}else for(n=0,u=h.length/3;n<u;n++)m.fromArray(h,\n3*n),f(m,n)}else for(m=h.vertices,n=0,u=m.length;n<u;n++)f(m[n],n)}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});Fc.prototype=Object.assign(Object.create(x.prototype),{constructor:Fc,isGroup:!0});ee.prototype=Object.assign(Object.create(U.prototype),{constructor:ee,isVideoTexture:!0,update:function(){var a=this.image;a.readyState>=a.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});Sb.prototype=Object.create(U.prototype);Sb.prototype.constructor=Sb;Sb.prototype.isCompressedTexture=\n!0;Gc.prototype=Object.create(U.prototype);Gc.prototype.constructor=Gc;Gc.prototype.isDepthTexture=!0;Tb.prototype=Object.create(E.prototype);Tb.prototype.constructor=Tb;Hc.prototype=Object.create(L.prototype);Hc.prototype.constructor=Hc;Ub.prototype=Object.create(E.prototype);Ub.prototype.constructor=Ub;Ic.prototype=Object.create(L.prototype);Ic.prototype.constructor=Ic;ja.prototype=Object.create(E.prototype);ja.prototype.constructor=ja;Jc.prototype=Object.create(L.prototype);Jc.prototype.constructor=\nJc;Vb.prototype=Object.create(ja.prototype);Vb.prototype.constructor=Vb;Kc.prototype=Object.create(L.prototype);Kc.prototype.constructor=Kc;ub.prototype=Object.create(ja.prototype);ub.prototype.constructor=ub;Lc.prototype=Object.create(L.prototype);Lc.prototype.constructor=Lc;Wb.prototype=Object.create(ja.prototype);Wb.prototype.constructor=Wb;Mc.prototype=Object.create(L.prototype);Mc.prototype.constructor=Mc;Xb.prototype=Object.create(ja.prototype);Xb.prototype.constructor=Xb;Nc.prototype=Object.create(L.prototype);\nNc.prototype.constructor=Nc;Yb.prototype=Object.create(E.prototype);Yb.prototype.constructor=Yb;Oc.prototype=Object.create(L.prototype);Oc.prototype.constructor=Oc;Zb.prototype=Object.create(E.prototype);Zb.prototype.constructor=Zb;Pc.prototype=Object.create(L.prototype);Pc.prototype.constructor=Pc;$b.prototype=Object.create(E.prototype);$b.prototype.constructor=$b;var Lg={triangulate:function(a,b,c){c=c||2;var d=b&&b.length,e=d?b[0]*c:a.length,f=bf(a,0,e,c,!0),g=[];if(!f)return g;var h;if(d){var k=\nc,d=[],m;var l=0;for(m=b.length;l<m;l++){var n=b[l]*k;var p=l<m-1?b[l+1]*k:a.length;n=bf(a,n,p,k,!1);n===n.next&&(n.steiner=!0);d.push(Jg(n))}d.sort(Hg);for(l=0;l<d.length;l++){b=d[l];k=f;if(k=Ig(b,k))b=ef(k,b),Rc(b,b.next);f=Rc(f,f.next)}}if(a.length>80*c){var r=h=a[0];var t=d=a[1];for(k=c;k<e;k+=c)l=a[k],b=a[k+1],l<r&&(r=l),b<t&&(t=b),l>h&&(h=l),b>d&&(d=b);h=Math.max(h-r,d-t);h=0!==h?1/h:0}Sc(f,g,c,r,t,h);return g}},$a={area:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d].x*a[e].y-\na[e].x*a[d].y;return.5*c},isClockWise:function(a){return 0>$a.area(a)},triangulateShape:function(a,b){function c(a){var b=a.length;2<b&&a[b-1].equals(a[0])&&a.pop()}function d(a,b){for(var c=0;c<b.length;c++)a.push(b[c].x),a.push(b[c].y)}var e=[],f=[],g=[];c(a);d(e,a);var h=a.length;b.forEach(c);for(a=0;a<b.length;a++)f.push(h),h+=b[a].length,d(e,b[a]);b=Lg.triangulate(e,f);for(a=0;a<b.length;a+=3)g.push(b.slice(a,a+3));return g}};ib.prototype=Object.create(L.prototype);ib.prototype.constructor=ib;\nLa.prototype=Object.create(E.prototype);La.prototype.constructor=La;La.prototype.getArrays=function(){var a=this.getAttribute(\"position\"),a=a?Array.prototype.slice.call(a.array):[],b=this.getAttribute(\"uv\"),b=b?Array.prototype.slice.call(b.array):[],c=this.index,c=c?Array.prototype.slice.call(c.array):[];return{position:a,uv:b,index:c}};La.prototype.addShapeList=function(a,b){var c=a.length;b.arrays=this.getArrays();for(var d=0;d<c;d++)this.addShape(a[d],b);this.setIndex(b.arrays.index);this.addAttribute(\"position\",\nnew B(b.arrays.position,3));this.addAttribute(\"uv\",new B(b.arrays.uv,2))};La.prototype.addShape=function(a,b){function c(a,b,c){b||console.error(\"THREE.ExtrudeGeometry: vec does not exist\");return b.clone().multiplyScalar(c).add(a)}function d(a,b,c){var d=a.x-b.x;var e=a.y-b.y;var f=c.x-a.x;var g=c.y-a.y,h=d*d+e*e;if(Math.abs(d*g-e*f)>Number.EPSILON){var k=Math.sqrt(h),m=Math.sqrt(f*f+g*g),h=b.x-e/k;b=b.y+d/k;g=((c.x-g/m-h)*g-(c.y+f/m-b)*f)/(d*g-e*f);f=h+d*g-a.x;d=b+e*g-a.y;e=f*f+d*d;if(2>=e)return new D(f,\nd);e=Math.sqrt(e/2)}else a=!1,d>Number.EPSILON?f>Number.EPSILON&&(a=!0):d<-Number.EPSILON?f<-Number.EPSILON&&(a=!0):Math.sign(e)===Math.sign(g)&&(a=!0),a?(f=-e,e=Math.sqrt(h)):(f=d,d=e,e=Math.sqrt(h/2));return new D(f/e,d/e)}function e(a,b){for(G=a.length;0<=--G;){var c=G;var d=G-1;0>d&&(d=a.length-1);var e,f=x+2*w;for(e=0;e<f;e++){var g=X*e,m=X*(e+1),n=b+d+g,q=b+d+m,m=b+c+m;h(b+c+g);h(n);h(m);h(n);h(q);h(m);g=l.length/3;g=E.generateSideWallUV(S,l,g-6,g-3,g-2,g-1);k(g[0]);k(g[1]);k(g[3]);k(g[1]);\nk(g[2]);k(g[3])}}}function f(a,b,c){r.push(a);r.push(b);r.push(c)}function g(a,b,c){h(a);h(b);h(c);a=l.length/3;a=E.generateTopUV(S,l,a-3,a-2,a-1);k(a[0]);k(a[1]);k(a[2])}function h(a){n.push(l.length/3);l.push(r[3*a+0]);l.push(r[3*a+1]);l.push(r[3*a+2])}function k(a){u.push(a.x);u.push(a.y)}var m=b.arrays?b.arrays:this.getArrays(),l=m.position,n=m.index,u=m.uv,r=[],m=void 0!==b.amount?b.amount:100,t=void 0!==b.bevelThickness?b.bevelThickness:6,v=void 0!==b.bevelSize?b.bevelSize:t-2,w=void 0!==b.bevelSegments?\nb.bevelSegments:3,z=void 0!==b.bevelEnabled?b.bevelEnabled:!0,y=void 0!==b.curveSegments?b.curveSegments:12,x=void 0!==b.steps?b.steps:1,A=b.extrudePath,C=!1,E=void 0!==b.UVGenerator?b.UVGenerator:ib.WorldUVGenerator;if(A){var H=A.getSpacedPoints(x);C=!0;z=!1;var K=void 0!==b.frames?b.frames:A.computeFrenetFrames(x,!1);var L=new p;var M=new p;var P=new p}z||(v=t=w=0);var O,S=this,y=a.extractPoints(y);a=y.shape;var Q=y.holes;if(!$a.isClockWise(a)){a=a.reverse();var N=0;for(O=Q.length;N<O;N++){var R=\nQ[N];$a.isClockWise(R)&&(Q[N]=R.reverse())}}var U=$a.triangulateShape(a,Q),W=a;N=0;for(O=Q.length;N<O;N++)R=Q[N],a=a.concat(R);var V,X=a.length,T,ba=U.length,y=[],G=0;var Y=W.length;var ea=Y-1;for(V=G+1;G<Y;G++,ea++,V++)ea===Y&&(ea=0),V===Y&&(V=0),y[G]=d(W[G],W[ea],W[V]);var A=[],ca=y.concat();N=0;for(O=Q.length;N<O;N++){R=Q[N];var aa=[];G=0;Y=R.length;ea=Y-1;for(V=G+1;G<Y;G++,ea++,V++)ea===Y&&(ea=0),V===Y&&(V=0),aa[G]=d(R[G],R[ea],R[V]);A.push(aa);ca=ca.concat(aa)}for(ea=0;ea<w;ea++){Y=ea/w;var da=\nt*Math.cos(Y*Math.PI/2);V=v*Math.sin(Y*Math.PI/2);G=0;for(Y=W.length;G<Y;G++){var fa=c(W[G],y[G],V);f(fa.x,fa.y,-da)}N=0;for(O=Q.length;N<O;N++)for(R=Q[N],aa=A[N],G=0,Y=R.length;G<Y;G++)fa=c(R[G],aa[G],V),f(fa.x,fa.y,-da)}V=v;for(G=0;G<X;G++)fa=z?c(a[G],ca[G],V):a[G],C?(M.copy(K.normals[0]).multiplyScalar(fa.x),L.copy(K.binormals[0]).multiplyScalar(fa.y),P.copy(H[0]).add(M).add(L),f(P.x,P.y,P.z)):f(fa.x,fa.y,0);for(Y=1;Y<=x;Y++)for(G=0;G<X;G++)fa=z?c(a[G],ca[G],V):a[G],C?(M.copy(K.normals[Y]).multiplyScalar(fa.x),\nL.copy(K.binormals[Y]).multiplyScalar(fa.y),P.copy(H[Y]).add(M).add(L),f(P.x,P.y,P.z)):f(fa.x,fa.y,m/x*Y);for(ea=w-1;0<=ea;ea--){Y=ea/w;da=t*Math.cos(Y*Math.PI/2);V=v*Math.sin(Y*Math.PI/2);G=0;for(Y=W.length;G<Y;G++)fa=c(W[G],y[G],V),f(fa.x,fa.y,m+da);N=0;for(O=Q.length;N<O;N++)for(R=Q[N],aa=A[N],G=0,Y=R.length;G<Y;G++)fa=c(R[G],aa[G],V),C?f(fa.x,fa.y+H[x-1].y,H[x-1].x+da):f(fa.x,fa.y,m+da)}(function(){var a=l.length/3;if(z){var c=0*X;for(G=0;G<ba;G++)T=U[G],g(T[2]+c,T[1]+c,T[0]+c);c=X*(x+2*w);for(G=\n0;G<ba;G++)T=U[G],g(T[0]+c,T[1]+c,T[2]+c)}else{for(G=0;G<ba;G++)T=U[G],g(T[2],T[1],T[0]);for(G=0;G<ba;G++)T=U[G],g(T[0]+X*x,T[1]+X*x,T[2]+X*x)}S.addGroup(a,l.length/3-a,void 0!==b.material?b.material:0)})();(function(){var a=l.length/3,c=0;e(W,c);c+=W.length;N=0;for(O=Q.length;N<O;N++)R=Q[N],e(R,c),c+=R.length;S.addGroup(a,l.length/3-a,void 0!==b.extrudeMaterial?b.extrudeMaterial:1)})();b.arrays||(this.setIndex(n),this.addAttribute(\"position\",new B(l,3)),this.addAttribute(\"uv\",new B(u,2)))};ib.WorldUVGenerator=\n{generateTopUV:function(a,b,c,d,e){a=b[3*d];d=b[3*d+1];var f=b[3*e];e=b[3*e+1];return[new D(b[3*c],b[3*c+1]),new D(a,d),new D(f,e)]},generateSideWallUV:function(a,b,c,d,e,f){a=b[3*c];var g=b[3*c+1];c=b[3*c+2];var h=b[3*d],k=b[3*d+1];d=b[3*d+2];var m=b[3*e],l=b[3*e+1];e=b[3*e+2];var n=b[3*f],p=b[3*f+1];b=b[3*f+2];return.01>Math.abs(g-k)?[new D(a,1-c),new D(h,1-d),new D(m,1-e),new D(n,1-b)]:[new D(g,1-c),new D(k,1-d),new D(l,1-e),new D(p,1-b)]}};Uc.prototype=Object.create(L.prototype);Uc.prototype.constructor=\nUc;ac.prototype=Object.create(La.prototype);ac.prototype.constructor=ac;Vc.prototype=Object.create(L.prototype);Vc.prototype.constructor=Vc;wb.prototype=Object.create(E.prototype);wb.prototype.constructor=wb;Wc.prototype=Object.create(L.prototype);Wc.prototype.constructor=Wc;bc.prototype=Object.create(E.prototype);bc.prototype.constructor=bc;Xc.prototype=Object.create(L.prototype);Xc.prototype.constructor=Xc;cc.prototype=Object.create(E.prototype);cc.prototype.constructor=cc;xb.prototype=Object.create(L.prototype);\nxb.prototype.constructor=xb;xb.prototype.toJSON=function(){var a=L.prototype.toJSON.call(this);return ff(this.parameters.shapes,a)};yb.prototype=Object.create(E.prototype);yb.prototype.constructor=yb;yb.prototype.toJSON=function(){var a=E.prototype.toJSON.call(this);return ff(this.parameters.shapes,a)};dc.prototype=Object.create(E.prototype);dc.prototype.constructor=dc;zb.prototype=Object.create(L.prototype);zb.prototype.constructor=zb;ab.prototype=Object.create(E.prototype);ab.prototype.constructor=\nab;Yc.prototype=Object.create(zb.prototype);Yc.prototype.constructor=Yc;Zc.prototype=Object.create(ab.prototype);Zc.prototype.constructor=Zc;$c.prototype=Object.create(L.prototype);$c.prototype.constructor=$c;ec.prototype=Object.create(E.prototype);ec.prototype.constructor=ec;var ka=Object.freeze({WireframeGeometry:Tb,ParametricGeometry:Hc,ParametricBufferGeometry:Ub,TetrahedronGeometry:Jc,TetrahedronBufferGeometry:Vb,OctahedronGeometry:Kc,OctahedronBufferGeometry:ub,IcosahedronGeometry:Lc,IcosahedronBufferGeometry:Wb,\nDodecahedronGeometry:Mc,DodecahedronBufferGeometry:Xb,PolyhedronGeometry:Ic,PolyhedronBufferGeometry:ja,TubeGeometry:Nc,TubeBufferGeometry:Yb,TorusKnotGeometry:Oc,TorusKnotBufferGeometry:Zb,TorusGeometry:Pc,TorusBufferGeometry:$b,TextGeometry:Uc,TextBufferGeometry:ac,SphereGeometry:Vc,SphereBufferGeometry:wb,RingGeometry:Wc,RingBufferGeometry:bc,PlaneGeometry:Ac,PlaneBufferGeometry:rb,LatheGeometry:Xc,LatheBufferGeometry:cc,ShapeGeometry:xb,ShapeBufferGeometry:yb,ExtrudeGeometry:ib,ExtrudeBufferGeometry:La,\nEdgesGeometry:dc,ConeGeometry:Yc,ConeBufferGeometry:Zc,CylinderGeometry:zb,CylinderBufferGeometry:ab,CircleGeometry:$c,CircleBufferGeometry:ec,BoxGeometry:Mb,BoxBufferGeometry:qb});fc.prototype=Object.create(P.prototype);fc.prototype.constructor=fc;fc.prototype.isShadowMaterial=!0;gc.prototype=Object.create(Fa.prototype);gc.prototype.constructor=gc;gc.prototype.isRawShaderMaterial=!0;Ua.prototype=Object.create(P.prototype);Ua.prototype.constructor=Ua;Ua.prototype.isMeshStandardMaterial=!0;Ua.prototype.copy=\nfunction(a){P.prototype.copy.call(this,a);this.defines={STANDARD:\"\"};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);\nthis.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=a.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapIntensity=a.envMapIntensity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=\na.morphTargets;this.morphNormals=a.morphNormals;return this};Ab.prototype=Object.create(Ua.prototype);Ab.prototype.constructor=Ab;Ab.prototype.isMeshPhysicalMaterial=!0;Ab.prototype.copy=function(a){Ua.prototype.copy.call(this,a);this.defines={PHYSICAL:\"\"};this.reflectivity=a.reflectivity;this.clearCoat=a.clearCoat;this.clearCoatRoughness=a.clearCoatRoughness;return this};Ma.prototype=Object.create(P.prototype);Ma.prototype.constructor=Ma;Ma.prototype.isMeshPhongMaterial=!0;Ma.prototype.copy=function(a){P.prototype.copy.call(this,\na);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess=a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=\na.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Bb.prototype=\nObject.create(Ma.prototype);Bb.prototype.constructor=Bb;Bb.prototype.isMeshToonMaterial=!0;Bb.prototype.copy=function(a){Ma.prototype.copy.call(this,a);this.gradientMap=a.gradientMap;return this};Cb.prototype=Object.create(P.prototype);Cb.prototype.constructor=Cb;Cb.prototype.isMeshNormalMaterial=!0;Cb.prototype.copy=function(a){P.prototype.copy.call(this,a);this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;\nthis.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Db.prototype=Object.create(P.prototype);Db.prototype.constructor=Db;Db.prototype.isMeshLambertMaterial=!0;Db.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=\na.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;\nthis.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Eb.prototype=Object.create(W.prototype);Eb.prototype.constructor=Eb;Eb.prototype.isLineDashedMaterial=!0;Eb.prototype.copy=function(a){W.prototype.copy.call(this,a);this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return this};var Mg=Object.freeze({ShadowMaterial:fc,SpriteMaterial:hb,RawShaderMaterial:gc,ShaderMaterial:Fa,PointsMaterial:Ka,MeshPhysicalMaterial:Ab,MeshStandardMaterial:Ua,\nMeshPhongMaterial:Ma,MeshToonMaterial:Bb,MeshNormalMaterial:Cb,MeshLambertMaterial:Db,MeshDepthMaterial:eb,MeshDistanceMaterial:fb,MeshBasicMaterial:Aa,LineDashedMaterial:Eb,LineBasicMaterial:W,Material:P}),Ib={enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}},xa=new he,cb={};Object.assign(Na.prototype,{load:function(a,b,c,d){void 0===a&&(a=\n\"\");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var e=this,f=Ib.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;if(void 0!==cb[a])cb[a].push({onLoad:b,onProgress:c,onError:d});else{var g=a.match(/^data:(.*?)(;base64)?,(.*)$/);if(g){c=g[1];var h=!!g[2],g=g[3],g=window.decodeURIComponent(g);h&&(g=window.atob(g));try{var k=(this.responseType||\"\").toLowerCase();switch(k){case \"arraybuffer\":case \"blob\":for(var m=new Uint8Array(g.length),\nh=0;h<g.length;h++)m[h]=g.charCodeAt(h);var l=\"blob\"===k?new Blob([m.buffer],{type:c}):m.buffer;break;case \"document\":l=(new DOMParser).parseFromString(g,c);break;case \"json\":l=JSON.parse(g);break;default:l=g}window.setTimeout(function(){b&&b(l);e.manager.itemEnd(a)},0)}catch(u){window.setTimeout(function(){d&&d(u);e.manager.itemEnd(a);e.manager.itemError(a)},0)}}else{cb[a]=[];cb[a].push({onLoad:b,onProgress:c,onError:d});var n=new XMLHttpRequest;n.open(\"GET\",a,!0);n.addEventListener(\"load\",function(b){var c=\nthis.response;Ib.add(a,c);var d=cb[a];delete cb[a];if(200===this.status){for(var f=0,g=d.length;f<g;f++){var h=d[f];if(h.onLoad)h.onLoad(c)}e.manager.itemEnd(a)}else if(0===this.status){console.warn(\"THREE.FileLoader: HTTP Status 0 received.\");f=0;for(g=d.length;f<g;f++)if(h=d[f],h.onLoad)h.onLoad(c);e.manager.itemEnd(a)}else{f=0;for(g=d.length;f<g;f++)if(h=d[f],h.onError)h.onError(b);e.manager.itemEnd(a);e.manager.itemError(a)}},!1);n.addEventListener(\"progress\",function(b){for(var c=cb[a],d=0,e=\nc.length;d<e;d++){var f=c[d];if(f.onProgress)f.onProgress(b)}},!1);n.addEventListener(\"error\",function(b){var c=cb[a];delete cb[a];for(var d=0,f=c.length;d<f;d++){var g=c[d];if(g.onError)g.onError(b)}e.manager.itemEnd(a);e.manager.itemError(a)},!1);void 0!==this.responseType&&(n.responseType=this.responseType);void 0!==this.withCredentials&&(n.withCredentials=this.withCredentials);n.overrideMimeType&&n.overrideMimeType(void 0!==this.mimeType?this.mimeType:\"text/plain\");for(h in this.requestHeader)n.setRequestHeader(h,\nthis.requestHeader[h]);n.send(null)}e.manager.itemStart(a);return n}},setPath:function(a){this.path=a;return this},setResponseType:function(a){this.responseType=a;return this},setWithCredentials:function(a){this.withCredentials=a;return this},setMimeType:function(a){this.mimeType=a;return this},setRequestHeader:function(a){this.requestHeader=a;return this}});Object.assign(gf.prototype,{load:function(a,b,c,d){function e(e){m.load(a[e],function(a){a=g._parser(a,!0);h[e]={width:a.width,height:a.height,\nformat:a.format,mipmaps:a.mipmaps};f+=1;6===f&&(1===a.mipmapCount&&(k.minFilter=1006),k.format=a.format,k.needsUpdate=!0,b&&b(k))},c,d)}var f,g=this,h=[],k=new Sb;k.image=h;var m=new Na(this.manager);m.setPath(this.path);m.setResponseType(\"arraybuffer\");if(Array.isArray(a))for(var l=f=0,n=a.length;l<n;++l)e(l);else m.load(a,function(a){a=g._parser(a,!0);if(a.isCubemap)for(var c=a.mipmaps.length/a.mipmapCount,d=0;d<c;d++){h[d]={mipmaps:[]};for(var e=0;e<a.mipmapCount;e++)h[d].mipmaps.push(a.mipmaps[d*\na.mipmapCount+e]),h[d].format=a.format,h[d].width=a.width,h[d].height=a.height}else k.image.width=a.width,k.image.height=a.height,k.mipmaps=a.mipmaps;1===a.mipmapCount&&(k.minFilter=1006);k.format=a.format;k.needsUpdate=!0;b&&b(k)},c,d);return k},setPath:function(a){this.path=a;return this}});Object.assign(ie.prototype,{load:function(a,b,c,d){var e=this,f=new lb,g=new Na(this.manager);g.setResponseType(\"arraybuffer\");g.load(a,function(a){if(a=e._parser(a))void 0!==a.image?f.image=a.image:void 0!==\na.data&&(f.image.width=a.width,f.image.height=a.height,f.image.data=a.data),f.wrapS=void 0!==a.wrapS?a.wrapS:1001,f.wrapT=void 0!==a.wrapT?a.wrapT:1001,f.magFilter=void 0!==a.magFilter?a.magFilter:1006,f.minFilter=void 0!==a.minFilter?a.minFilter:1008,f.anisotropy=void 0!==a.anisotropy?a.anisotropy:1,void 0!==a.format&&(f.format=a.format),void 0!==a.type&&(f.type=a.type),void 0!==a.mipmaps&&(f.mipmaps=a.mipmaps),1===a.mipmapCount&&(f.minFilter=1006),f.needsUpdate=!0,b&&b(f,a)},c,d);return f}});Object.assign(ad.prototype,\n{crossOrigin:\"Anonymous\",load:function(a,b,c,d){void 0===a&&(a=\"\");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var e=this,f=Ib.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;c=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"img\");c.addEventListener(\"load\",function(){Ib.add(a,this);b&&b(this);e.manager.itemEnd(a)},!1);c.addEventListener(\"error\",function(b){d&&d(b);e.manager.itemEnd(a);e.manager.itemError(a)},\n!1);\"data:\"!==a.substr(0,5)&&void 0!==this.crossOrigin&&(c.crossOrigin=this.crossOrigin);e.manager.itemStart(a);c.src=a;return c},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});Object.assign(je.prototype,{crossOrigin:\"Anonymous\",load:function(a,b,c,d){function e(c){g.load(a[c],function(a){f.images[c]=a;h++;6===h&&(f.needsUpdate=!0,b&&b(f))},void 0,d)}var f=new db,g=new ad(this.manager);g.setCrossOrigin(this.crossOrigin);g.setPath(this.path);\nvar h=0;for(c=0;c<a.length;++c)e(c);return f},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});Object.assign(Ad.prototype,{crossOrigin:\"Anonymous\",load:function(a,b,c,d){var e=new U,f=new ad(this.manager);f.setCrossOrigin(this.crossOrigin);f.setPath(this.path);f.load(a,function(c){e.image=c;c=0<a.search(/\\.(jpg|jpeg)$/)||0===a.search(/^data\\:image\\/jpeg/);e.format=c?1022:1023;e.needsUpdate=!0;void 0!==b&&b(e)},c,d);return e},setCrossOrigin:function(a){this.crossOrigin=\na;return this},setPath:function(a){this.path=a;return this}});Object.assign(C.prototype,{getPoint:function(){console.warn(\"THREE.Curve: .getPoint() not implemented.\");return null},getPointAt:function(a,b){a=this.getUtoTmapping(a);return this.getPoint(a,b)},getPoints:function(a){void 0===a&&(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));return b},getSpacedPoints:function(a){void 0===a&&(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPointAt(c/a));return b},getLength:function(){var a=this.getLengths();\nreturn a[a.length-1]},getLengths:function(a){void 0===a&&(a=this.arcLengthDivisions);if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b=[],c=this.getPoint(0),d,e=0;b.push(0);for(d=1;d<=a;d++){var f=this.getPoint(d/a);e+=f.distanceTo(c);b.push(e);c=f}return this.cacheArcLengths=b},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(a,b){var c=this.getLengths(),d=c.length;b=b?b:a*\nc[d-1];for(var e=0,f=d-1,g;e<=f;)if(a=Math.floor(e+(f-e)/2),g=c[a]-b,0>g)e=a+1;else if(0<g)f=a-1;else{f=a;break}a=f;if(c[a]===b)return a/(d-1);e=c[a];return(a+(b-e)/(c[a+1]-e))/(d-1)},getTangent:function(a){var b=a-1E-4;a+=1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()},getTangentAt:function(a){a=this.getUtoTmapping(a);return this.getTangent(a)},computeFrenetFrames:function(a,b){var c=new p,d=[],e=[],f=[],g=new p,h=new O,k;for(k=0;k<=a;k++){var m=\nk/a;d[k]=this.getTangentAt(m);d[k].normalize()}e[0]=new p;f[0]=new p;k=Number.MAX_VALUE;m=Math.abs(d[0].x);var l=Math.abs(d[0].y),n=Math.abs(d[0].z);m<=k&&(k=m,c.set(1,0,0));l<=k&&(k=l,c.set(0,1,0));n<=k&&c.set(0,0,1);g.crossVectors(d[0],c).normalize();e[0].crossVectors(d[0],g);f[0].crossVectors(d[0],e[0]);for(k=1;k<=a;k++)e[k]=e[k-1].clone(),f[k]=f[k-1].clone(),g.crossVectors(d[k-1],d[k]),g.length()>Number.EPSILON&&(g.normalize(),c=Math.acos(Q.clamp(d[k-1].dot(d[k]),-1,1)),e[k].applyMatrix4(h.makeRotationAxis(g,\nc))),f[k].crossVectors(d[k],e[k]);if(!0===b)for(c=Math.acos(Q.clamp(e[0].dot(e[a]),-1,1)),c/=a,0<d[0].dot(g.crossVectors(e[0],e[a]))&&(c=-c),k=1;k<=a;k++)e[k].applyMatrix4(h.makeRotationAxis(d[k],c*k)),f[k].crossVectors(d[k],e[k]);return{tangents:d,normals:e,binormals:f}},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.arcLengthDivisions=a.arcLengthDivisions;return this},toJSON:function(){var a={metadata:{version:4.5,type:\"Curve\",generator:\"Curve.toJSON\"}};a.arcLengthDivisions=\nthis.arcLengthDivisions;a.type=this.type;return a},fromJSON:function(a){this.arcLengthDivisions=a.arcLengthDivisions;return this}});Ba.prototype=Object.create(C.prototype);Ba.prototype.constructor=Ba;Ba.prototype.isEllipseCurve=!0;Ba.prototype.getPoint=function(a,b){b=b||new D;for(var c=2*Math.PI,d=this.aEndAngle-this.aStartAngle,e=Math.abs(d)<Number.EPSILON;0>d;)d+=c;for(;d>c;)d-=c;d<Number.EPSILON&&(d=e?0:c);!0!==this.aClockwise||e||(d=d===c?-c:d-c);c=this.aStartAngle+a*d;a=this.aX+this.xRadius*\nMath.cos(c);var f=this.aY+this.yRadius*Math.sin(c);0!==this.aRotation&&(c=Math.cos(this.aRotation),d=Math.sin(this.aRotation),e=a-this.aX,f-=this.aY,a=e*c-f*d+this.aX,f=e*d+f*c+this.aY);return b.set(a,f)};Ba.prototype.copy=function(a){C.prototype.copy.call(this,a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this};Ba.prototype.toJSON=function(){var a=\nC.prototype.toJSON.call(this);a.aX=this.aX;a.aY=this.aY;a.xRadius=this.xRadius;a.yRadius=this.yRadius;a.aStartAngle=this.aStartAngle;a.aEndAngle=this.aEndAngle;a.aClockwise=this.aClockwise;a.aRotation=this.aRotation;return a};Ba.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this};hc.prototype=\nObject.create(Ba.prototype);hc.prototype.constructor=hc;hc.prototype.isArcCurve=!0;var Td=new p,Ee=new ke,Fe=new ke,Ge=new ke;ca.prototype=Object.create(C.prototype);ca.prototype.constructor=ca;ca.prototype.isCatmullRomCurve3=!0;ca.prototype.getPoint=function(a,b){b=b||new p;var c=this.points,d=c.length;a*=d-(this.closed?0:1);var e=Math.floor(a);a-=e;this.closed?e+=0<e?0:(Math.floor(Math.abs(e)/c.length)+1)*c.length:0===a&&e===d-1&&(e=d-2,a=1);if(this.closed||0<e)var f=c[(e-1)%d];else Td.subVectors(c[0],\nc[1]).add(c[0]),f=Td;var g=c[e%d];var h=c[(e+1)%d];this.closed||e+2<d?c=c[(e+2)%d]:(Td.subVectors(c[d-1],c[d-2]).add(c[d-1]),c=Td);if(\"centripetal\"===this.curveType||\"chordal\"===this.curveType){var k=\"chordal\"===this.curveType?.5:.25,d=Math.pow(f.distanceToSquared(g),k),e=Math.pow(g.distanceToSquared(h),k),k=Math.pow(h.distanceToSquared(c),k);1E-4>e&&(e=1);1E-4>d&&(d=e);1E-4>k&&(k=e);Ee.initNonuniformCatmullRom(f.x,g.x,h.x,c.x,d,e,k);Fe.initNonuniformCatmullRom(f.y,g.y,h.y,c.y,d,e,k);Ge.initNonuniformCatmullRom(f.z,\ng.z,h.z,c.z,d,e,k)}else\"catmullrom\"===this.curveType&&(Ee.initCatmullRom(f.x,g.x,h.x,c.x,this.tension),Fe.initCatmullRom(f.y,g.y,h.y,c.y,this.tension),Ge.initCatmullRom(f.z,g.z,h.z,c.z,this.tension));b.set(Ee.calc(a),Fe.calc(a),Ge.calc(a));return b};ca.prototype.copy=function(a){C.prototype.copy.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++)this.points.push(a.points[b].clone());this.closed=a.closed;this.curveType=a.curveType;this.tension=a.tension;return this};ca.prototype.toJSON=\nfunction(){var a=C.prototype.toJSON.call(this);a.points=[];for(var b=0,c=this.points.length;b<c;b++)a.points.push(this.points[b].toArray());a.closed=this.closed;a.curveType=this.curveType;a.tension=this.tension;return a};ca.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++){var d=a.points[b];this.points.push((new p).fromArray(d))}this.closed=a.closed;this.curveType=a.curveType;this.tension=a.tension;return this};Oa.prototype=Object.create(C.prototype);\nOa.prototype.constructor=Oa;Oa.prototype.isCubicBezierCurve=!0;Oa.prototype.getPoint=function(a,b){b=b||new D;var c=this.v0,d=this.v1,e=this.v2,f=this.v3;b.set(cd(a,c.x,d.x,e.x,f.x),cd(a,c.y,d.y,e.y,f.y));return b};Oa.prototype.copy=function(a){C.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this};Oa.prototype.toJSON=function(){var a=C.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=\nthis.v3.toArray();return a};Oa.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this};Va.prototype=Object.create(C.prototype);Va.prototype.constructor=Va;Va.prototype.isCubicBezierCurve3=!0;Va.prototype.getPoint=function(a,b){b=b||new p;var c=this.v0,d=this.v1,e=this.v2,f=this.v3;b.set(cd(a,c.x,d.x,e.x,f.x),cd(a,c.y,d.y,e.y,f.y),cd(a,c.z,d.z,e.z,f.z));return b};Va.prototype.copy=\nfunction(a){C.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this};Va.prototype.toJSON=function(){var a=C.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return a};Va.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this};ya.prototype=Object.create(C.prototype);\nya.prototype.constructor=ya;ya.prototype.isLineCurve=!0;ya.prototype.getPoint=function(a,b){b=b||new D;1===a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return b};ya.prototype.getPointAt=function(a,b){return this.getPoint(a,b)};ya.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()};ya.prototype.copy=function(a){C.prototype.copy.call(this,a);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};ya.prototype.toJSON=function(){var a=C.prototype.toJSON.call(this);\na.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};ya.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Pa.prototype=Object.create(C.prototype);Pa.prototype.constructor=Pa;Pa.prototype.isLineCurve3=!0;Pa.prototype.getPoint=function(a,b){b=b||new p;1===a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return b};Pa.prototype.getPointAt=function(a,b){return this.getPoint(a,b)};Pa.prototype.copy=\nfunction(a){C.prototype.copy.call(this,a);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};Pa.prototype.toJSON=function(){var a=C.prototype.toJSON.call(this);a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};Pa.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Qa.prototype=Object.create(C.prototype);Qa.prototype.constructor=Qa;Qa.prototype.isQuadraticBezierCurve=!0;Qa.prototype.getPoint=function(a,b){b=b||new D;var c=\nthis.v0,d=this.v1,e=this.v2;b.set(bd(a,c.x,d.x,e.x),bd(a,c.y,d.y,e.y));return b};Qa.prototype.copy=function(a){C.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};Qa.prototype.toJSON=function(){var a=C.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};Qa.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};\nWa.prototype=Object.create(C.prototype);Wa.prototype.constructor=Wa;Wa.prototype.isQuadraticBezierCurve3=!0;Wa.prototype.getPoint=function(a,b){b=b||new p;var c=this.v0,d=this.v1,e=this.v2;b.set(bd(a,c.x,d.x,e.x),bd(a,c.y,d.y,e.y),bd(a,c.z,d.z,e.z));return b};Wa.prototype.copy=function(a){C.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};Wa.prototype.toJSON=function(){var a=C.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();\na.v2=this.v2.toArray();return a};Wa.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Ra.prototype=Object.create(C.prototype);Ra.prototype.constructor=Ra;Ra.prototype.isSplineCurve=!0;Ra.prototype.getPoint=function(a,b){b=b||new D;var c=this.points,d=(c.length-1)*a;a=Math.floor(d);var d=d-a,e=c[0===a?a:a-1],f=c[a],g=c[a>c.length-2?c.length-1:a+1],c=c[a>c.length-3?c.length-1:a+2];b.set(hf(d,e.x,f.x,\ng.x,c.x),hf(d,e.y,f.y,g.y,c.y));return b};Ra.prototype.copy=function(a){C.prototype.copy.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++)this.points.push(a.points[b].clone());return this};Ra.prototype.toJSON=function(){var a=C.prototype.toJSON.call(this);a.points=[];for(var b=0,c=this.points.length;b<c;b++)a.points.push(this.points[b].toArray());return a};Ra.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++){var d=\na.points[b];this.points.push((new D).fromArray(d))}return this};var Ng=Object.freeze({ArcCurve:hc,CatmullRomCurve3:ca,CubicBezierCurve:Oa,CubicBezierCurve3:Va,EllipseCurve:Ba,LineCurve:ya,LineCurve3:Pa,QuadraticBezierCurve:Qa,QuadraticBezierCurve3:Wa,SplineCurve:Ra});bb.prototype=Object.assign(Object.create(C.prototype),{constructor:bb,add:function(a){this.curves.push(a)},closePath:function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new ya(b,\na))},getPoint:function(a){var b=a*this.getLength(),c=this.getCurveLengths();for(a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.curves[a],c=a.getLength(),a.getPointAt(0===c?0:1-b/c);a++}return null},getLength:function(){var a=this.getCurveLengths();return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=!0;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],\nb=0,c=0,d=this.curves.length;c<d;c++)b+=this.curves[c].getLength(),a.push(b);return this.cacheLengths=a},getSpacedPoints:function(a){void 0===a&&(a=40);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));this.autoClose&&b.push(b[0]);return b},getPoints:function(a){a=a||12;for(var b=[],c,d=0,e=this.curves;d<e.length;d++)for(var f=e[d],f=f.getPoints(f&&f.isEllipseCurve?2*a:f&&f.isLineCurve?1:f&&f.isSplineCurve?a*f.points.length:a),g=0;g<f.length;g++){var h=f[g];c&&c.equals(h)||(b.push(h),c=h)}this.autoClose&&\n1<b.length&&!b[b.length-1].equals(b[0])&&b.push(b[0]);return b},copy:function(a){C.prototype.copy.call(this,a);this.curves=[];for(var b=0,c=a.curves.length;b<c;b++)this.curves.push(a.curves[b].clone());this.autoClose=a.autoClose;return this},toJSON:function(){var a=C.prototype.toJSON.call(this);a.autoClose=this.autoClose;a.curves=[];for(var b=0,c=this.curves.length;b<c;b++)a.curves.push(this.curves[b].toJSON());return a},fromJSON:function(a){C.prototype.fromJSON.call(this,a);this.autoClose=a.autoClose;\nthis.curves=[];for(var b=0,c=a.curves.length;b<c;b++){var d=a.curves[b];this.curves.push((new Ng[d.type]).fromJSON(d))}return this}});Sa.prototype=Object.assign(Object.create(bb.prototype),{constructor:Sa,setFromPoints:function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)},moveTo:function(a,b){this.currentPoint.set(a,b)},lineTo:function(a,b){var c=new ya(this.currentPoint.clone(),new D(a,b));this.curves.push(c);this.currentPoint.set(a,b)},quadraticCurveTo:function(a,\nb,c,d){a=new Qa(this.currentPoint.clone(),new D(a,b),new D(c,d));this.curves.push(a);this.currentPoint.set(c,d)},bezierCurveTo:function(a,b,c,d,e,f){a=new Oa(this.currentPoint.clone(),new D(a,b),new D(c,d),new D(e,f));this.curves.push(a);this.currentPoint.set(e,f)},splineThru:function(a){var b=[this.currentPoint.clone()].concat(a),b=new Ra(b);this.curves.push(b);this.currentPoint.copy(a[a.length-1])},arc:function(a,b,c,d,e,f){this.absarc(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,f)},absarc:function(a,\nb,c,d,e,f){this.absellipse(a,b,c,c,d,e,f)},ellipse:function(a,b,c,d,e,f,g,h){this.absellipse(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,f,g,h)},absellipse:function(a,b,c,d,e,f,g,h){a=new Ba(a,b,c,d,e,f,g,h);0<this.curves.length&&(b=a.getPoint(0),b.equals(this.currentPoint)||this.lineTo(b.x,b.y));this.curves.push(a);a=a.getPoint(1);this.currentPoint.copy(a)},copy:function(a){bb.prototype.copy.call(this,a);this.currentPoint.copy(a.currentPoint);return this},toJSON:function(){var a=bb.prototype.toJSON.call(this);\na.currentPoint=this.currentPoint.toArray();return a},fromJSON:function(a){bb.prototype.fromJSON.call(this,a);this.currentPoint.fromArray(a.currentPoint);return this}});jb.prototype=Object.assign(Object.create(Sa.prototype),{constructor:jb,getPointsHoles:function(a){for(var b=[],c=0,d=this.holes.length;c<d;c++)b[c]=this.holes[c].getPoints(a);return b},extractPoints:function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}},copy:function(a){Sa.prototype.copy.call(this,a);this.holes=[];\nfor(var b=0,c=a.holes.length;b<c;b++)this.holes.push(a.holes[b].clone());return this},toJSON:function(){var a=Sa.prototype.toJSON.call(this);a.uuid=this.uuid;a.holes=[];for(var b=0,c=this.holes.length;b<c;b++)a.holes.push(this.holes[b].toJSON());return a},fromJSON:function(a){Sa.prototype.fromJSON.call(this,a);this.uuid=a.uuid;this.holes=[];for(var b=0,c=a.holes.length;b<c;b++){var d=a.holes[b];this.holes.push((new Sa).fromJSON(d))}return this}});da.prototype=Object.assign(Object.create(x.prototype),\n{constructor:da,isLight:!0,copy:function(a){x.prototype.copy.call(this,a);this.color.copy(a.color);this.intensity=a.intensity;return this},toJSON:function(a){a=x.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();a.object.intensity=this.intensity;void 0!==this.groundColor&&(a.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(a.object.distance=this.distance);void 0!==this.angle&&(a.object.angle=this.angle);void 0!==this.decay&&(a.object.decay=this.decay);void 0!==\nthis.penumbra&&(a.object.penumbra=this.penumbra);void 0!==this.shadow&&(a.object.shadow=this.shadow.toJSON());return a}});Bd.prototype=Object.assign(Object.create(da.prototype),{constructor:Bd,isHemisphereLight:!0,copy:function(a){da.prototype.copy.call(this,a);this.groundColor.copy(a.groundColor);return this}});Object.assign(Fb.prototype,{copy:function(a){this.camera=a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return this},clone:function(){return(new this.constructor).copy(this)},\ntoJSON:function(){var a={};0!==this.bias&&(a.bias=this.bias);1!==this.radius&&(a.radius=this.radius);if(512!==this.mapSize.x||512!==this.mapSize.y)a.mapSize=this.mapSize.toArray();a.camera=this.camera.toJSON(!1).object;delete a.camera.matrix;return a}});Cd.prototype=Object.assign(Object.create(Fb.prototype),{constructor:Cd,isSpotLightShadow:!0,update:function(a){var b=this.camera,c=2*Q.RAD2DEG*a.angle,d=this.mapSize.width/this.mapSize.height;a=a.distance||b.far;if(c!==b.fov||d!==b.aspect||a!==b.far)b.fov=\nc,b.aspect=d,b.far=a,b.updateProjectionMatrix()}});Dd.prototype=Object.assign(Object.create(da.prototype),{constructor:Dd,isSpotLight:!0,copy:function(a){da.prototype.copy.call(this,a);this.distance=a.distance;this.angle=a.angle;this.penumbra=a.penumbra;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});Ed.prototype=Object.assign(Object.create(da.prototype),{constructor:Ed,isPointLight:!0,copy:function(a){da.prototype.copy.call(this,a);this.distance=a.distance;\nthis.decay=a.decay;this.shadow=a.shadow.clone();return this}});Fd.prototype=Object.assign(Object.create(Fb.prototype),{constructor:Fd});Gd.prototype=Object.assign(Object.create(da.prototype),{constructor:Gd,isDirectionalLight:!0,copy:function(a){da.prototype.copy.call(this,a);this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});Hd.prototype=Object.assign(Object.create(da.prototype),{constructor:Hd,isAmbientLight:!0});Id.prototype=Object.assign(Object.create(da.prototype),{constructor:Id,\nisRectAreaLight:!0,copy:function(a){da.prototype.copy.call(this,a);this.width=a.width;this.height=a.height;return this},toJSON:function(a){a=da.prototype.toJSON.call(this,a);a.object.width=this.width;a.object.height=this.height;return a}});Jd.prototype=Object.assign(Object.create(T.prototype),{constructor:Jd,ValueTypeName:\"string\",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});Kd.prototype=Object.assign(Object.create(T.prototype),\n{constructor:Kd,ValueTypeName:\"bool\",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});Object.assign(pa.prototype,{evaluate:function(a){var b=this.parameterPositions,c=this._cachedIndex,d=b[c],e=b[c-1];a:{b:{c:{d:if(!(a<d)){for(var f=c+2;;){if(void 0===d){if(a<e)break d;this._cachedIndex=c=b.length;return this.afterEnd_(c-1,a,e)}if(c===f)break;e=d;d=b[++c];if(a<d)break b}d=b.length;break c}if(a>=e)break a;else{f=b[1];a<f&&\n(c=2,e=f);for(f=c-2;;){if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(c===f)break;d=e;e=b[--c-1];if(a>=e)break b}d=c;c=0}}for(;c<d;)e=c+d>>>1,a<b[e]?d=e:c=e+1;d=b[c];e=b[c-1];if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(void 0===d)return this._cachedIndex=c=b.length,this.afterEnd_(c-1,e,a)}this._cachedIndex=c;this.intervalChanged_(c,e,d)}return this.interpolate_(c,e,a,d)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||\nthis.DefaultSettings_},copySampleValue_:function(a){var b=this.resultBuffer,c=this.sampleValues,d=this.valueSize;a*=d;for(var e=0;e!==d;++e)b[e]=c[a+e];return b},interpolate_:function(){throw Error(\"call to abstract method\");},intervalChanged_:function(){}});Object.assign(pa.prototype,{beforeStart_:pa.prototype.copySampleValue_,afterEnd_:pa.prototype.copySampleValue_});Ld.prototype=Object.assign(Object.create(pa.prototype),{constructor:Ld,interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,\ng=this.valueSize;a*=g;b=(c-b)/(d-b);for(c=a+g;a!==c;a+=4)ha.slerpFlat(e,0,f,a-g,f,a,b);return e}});dd.prototype=Object.assign(Object.create(T.prototype),{constructor:dd,ValueTypeName:\"quaternion\",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(a){return new Ld(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:void 0});Md.prototype=Object.assign(Object.create(T.prototype),{constructor:Md,ValueTypeName:\"color\"});ic.prototype=Object.assign(Object.create(T.prototype),\n{constructor:ic,ValueTypeName:\"number\"});Nd.prototype=Object.assign(Object.create(pa.prototype),{constructor:Nd,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(a,b,c){var d=this.parameterPositions,e=a-2,f=a+1,g=d[e],h=d[f];if(void 0===g)switch(this.getSettings_().endingStart){case 2401:e=a;g=2*b-c;break;case 2402:e=d.length-2;g=b+d[e]-d[e+1];break;default:e=a,g=c}if(void 0===h)switch(this.getSettings_().endingEnd){case 2401:f=a;h=2*c-b;break;case 2402:f=1;h=c+d[1]-d[0];\nbreak;default:f=a-1,h=b}a=.5*(c-b);d=this.valueSize;this._weightPrev=a/(b-g);this._weightNext=a/(h-c);this._offsetPrev=e*d;this._offsetNext=f*d},interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;var h=a-g,k=this._offsetPrev,m=this._offsetNext,l=this._weightPrev,n=this._weightNext,p=(c-b)/(d-b);c=p*p;d=c*p;b=-l*d+2*l*c-l*p;l=(1+l)*d+(-1.5-2*l)*c+(-.5+l)*p+1;p=(-1-n)*d+(1.5+n)*c+.5*p;n=n*d-n*c;for(c=0;c!==g;++c)e[c]=b*f[k+c]+l*f[h+c]+p*f[a+c]+n*f[m+c];\nreturn e}});ed.prototype=Object.assign(Object.create(pa.prototype),{constructor:ed,interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;var h=a-g;b=(c-b)/(d-b);c=1-b;for(d=0;d!==g;++d)e[d]=f[h+d]*c+f[a+d]*b;return e}});Od.prototype=Object.assign(Object.create(pa.prototype),{constructor:Od,interpolate_:function(a){return this.copySampleValue_(a-1)}});var ga={arraySlice:function(a,b,c){return ga.isTypedArray(a)?new a.constructor(a.subarray(b,void 0!==c?c:\na.length)):a.slice(b,c)},convertArray:function(a,b,c){return!a||!c&&a.constructor===b?a:\"number\"===typeof b.BYTES_PER_ELEMENT?new b(a):Array.prototype.slice.call(a)},isTypedArray:function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)},getKeyframeOrder:function(a){for(var b=a.length,c=Array(b),d=0;d!==b;++d)c[d]=d;c.sort(function(b,c){return a[b]-a[c]});return c},sortedArray:function(a,b,c){for(var d=a.length,e=new a.constructor(d),f=0,g=0;g!==d;++f)for(var h=c[f]*b,k=0;k!==b;++k)e[g++]=\na[h+k];return e},flattenJSON:function(a,b,c,d){for(var e=1,f=a[0];void 0!==f&&void 0===f[d];)f=a[e++];if(void 0!==f){var g=f[d];if(void 0!==g)if(Array.isArray(g)){do g=f[d],void 0!==g&&(b.push(f.time),c.push.apply(c,g)),f=a[e++];while(void 0!==f)}else if(void 0!==g.toArray){do g=f[d],void 0!==g&&(b.push(f.time),g.toArray(c,c.length)),f=a[e++];while(void 0!==f)}else{do g=f[d],void 0!==g&&(b.push(f.time),c.push(g)),f=a[e++];while(void 0!==f)}}}};Object.assign(T,{parse:function(a){if(void 0===a.type)throw Error(\"THREE.KeyframeTrack: track type undefined, can not parse\");\nvar b=T._getTrackTypeForValueTypeName(a.type);if(void 0===a.times){var c=[],d=[];ga.flattenJSON(a.keys,c,d,\"value\");a.times=c;a.values=d}return void 0!==b.parse?b.parse(a):new b(a.name,a.times,a.values,a.interpolation)},toJSON:function(a){var b=a.constructor;if(void 0!==b.toJSON)b=b.toJSON(a);else{var b={name:a.name,times:ga.convertArray(a.times,Array),values:ga.convertArray(a.values,Array)},c=a.getInterpolation();c!==a.DefaultInterpolation&&(b.interpolation=c)}b.type=a.ValueTypeName;return b},_getTrackTypeForValueTypeName:function(a){switch(a.toLowerCase()){case \"scalar\":case \"double\":case \"float\":case \"number\":case \"integer\":return ic;\ncase \"vector\":case \"vector2\":case \"vector3\":case \"vector4\":return jc;case \"color\":return Md;case \"quaternion\":return dd;case \"bool\":case \"boolean\":return Kd;case \"string\":return Jd}throw Error(\"THREE.KeyframeTrack: Unsupported typeName: \"+a);}});Object.assign(T.prototype,{constructor:T,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(a){return new Od(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodLinear:function(a){return new ed(this.times,\nthis.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:function(a){return new Nd(this.times,this.values,this.getValueSize(),a)},setInterpolation:function(a){switch(a){case 2300:var b=this.InterpolantFactoryMethodDiscrete;break;case 2301:b=this.InterpolantFactoryMethodLinear;break;case 2302:b=this.InterpolantFactoryMethodSmooth}if(void 0===b){b=\"unsupported interpolation for \"+this.ValueTypeName+\" keyframe track named \"+this.name;if(void 0===this.createInterpolant)if(a!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);\nelse throw Error(b);console.warn(\"THREE.KeyframeTrack:\",b)}else this.createInterpolant=b},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(a){if(0!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]+=a;return this},scale:function(a){if(1!==a)for(var b=\nthis.times,c=0,d=b.length;c!==d;++c)b[c]*=a;return this},trim:function(a,b){for(var c=this.times,d=c.length,e=0,f=d-1;e!==d&&c[e]<a;)++e;for(;-1!==f&&c[f]>b;)--f;++f;if(0!==e||f!==d)e>=f&&(f=Math.max(f,1),e=f-1),a=this.getValueSize(),this.times=ga.arraySlice(c,e,f),this.values=ga.arraySlice(this.values,e*a,f*a);return this},validate:function(){var a=!0,b=this.getValueSize();0!==b-Math.floor(b)&&(console.error(\"THREE.KeyframeTrack: Invalid value size in track.\",this),a=!1);var c=this.times,b=this.values,\nd=c.length;0===d&&(console.error(\"THREE.KeyframeTrack: Track is empty.\",this),a=!1);for(var e=null,f=0;f!==d;f++){var g=c[f];if(\"number\"===typeof g&&isNaN(g)){console.error(\"THREE.KeyframeTrack: Time is not a valid number.\",this,f,g);a=!1;break}if(null!==e&&e>g){console.error(\"THREE.KeyframeTrack: Out of order keys.\",this,f,g,e);a=!1;break}e=g}if(void 0!==b&&ga.isTypedArray(b))for(f=0,c=b.length;f!==c;++f)if(d=b[f],isNaN(d)){console.error(\"THREE.KeyframeTrack: Value is not a valid number.\",this,f,\nd);a=!1;break}return a},optimize:function(){for(var a,b,c=this.times,d=this.values,e=this.getValueSize(),f=2302===this.getInterpolation(),g=1,h=c.length-1,k=1;k<h;++k){a=!1;var m=c[k];if(m!==c[k+1]&&(1!==k||m!==m[0]))if(f)a=!0;else{b=k*e;for(var l=b-e,n=b+e,m=0;m!==e;++m){var p=d[b+m];if(p!==d[l+m]||p!==d[n+m]){a=!0;break}}}if(a){if(k!==g)for(c[g]=c[k],b=k*e,a=g*e,m=0;m!==e;++m)d[a+m]=d[b+m];++g}}if(0<h){c[g]=c[h];b=h*e;a=g*e;for(m=0;m!==e;++m)d[a+m]=d[b+m];++g}g!==c.length&&(this.times=ga.arraySlice(c,\n0,g),this.values=ga.arraySlice(d,0,g*e));return this}});jc.prototype=Object.assign(Object.create(T.prototype),{constructor:jc,ValueTypeName:\"vector\"});Object.assign(Ca,{parse:function(a){for(var b=[],c=a.tracks,d=1/(a.fps||1),e=0,f=c.length;e!==f;++e)b.push(T.parse(c[e]).scale(d));return new Ca(a.name,a.duration,b)},toJSON:function(a){var b=[],c=a.tracks;a={name:a.name,duration:a.duration,tracks:b};for(var d=0,e=c.length;d!==e;++d)b.push(T.toJSON(c[d]));return a},CreateFromMorphTargetSequence:function(a,\nb,c,d){for(var e=b.length,f=[],g=0;g<e;g++){var h=[],k=[];h.push((g+e-1)%e,g,(g+1)%e);k.push(0,1,0);var m=ga.getKeyframeOrder(h),h=ga.sortedArray(h,1,m),k=ga.sortedArray(k,1,m);d||0!==h[0]||(h.push(e),k.push(k[0]));f.push((new ic(\".morphTargetInfluences[\"+b[g].name+\"]\",h,k)).scale(1/c))}return new Ca(a,-1,f)},findByName:function(a,b){var c=a;Array.isArray(a)||(c=a.geometry&&a.geometry.animations||a.animations);for(a=0;a<c.length;a++)if(c[a].name===b)return c[a];return null},CreateClipsFromMorphTargetSequences:function(a,\nb,c){for(var d,e={},f=/^([\\w-]*?)([\\d]+)$/,g=0,h=a.length;g<h;g++){var k=a[g],m=k.name.match(f);m&&1<m.length&&(d=m[1],(m=e[d])||(e[d]=m=[]),m.push(k))}a=[];for(d in e)a.push(Ca.CreateFromMorphTargetSequence(d,e[d],b,c));return a},parseAnimation:function(a,b){if(!a)return console.error(\"THREE.AnimationClip: No animation in JSONLoader data.\"),null;var c=function(a,b,c,d,e){if(0!==c.length){var f=[],g=[];ga.flattenJSON(c,f,g,d);0!==f.length&&e.push(new a(b,f,g))}},d=[],e=a.name||\"default\",f=a.length||\n-1,g=a.fps||30;a=a.hierarchy||[];for(var h=0;h<a.length;h++){var k=a[h].keys;if(k&&0!==k.length)if(k[0].morphTargets){for(var f={},m=0;m<k.length;m++)if(k[m].morphTargets)for(var l=0;l<k[m].morphTargets.length;l++)f[k[m].morphTargets[l]]=-1;for(var n in f){for(var p=[],r=[],l=0;l!==k[m].morphTargets.length;++l){var t=k[m];p.push(t.time);r.push(t.morphTarget===n?1:0)}d.push(new ic(\".morphTargetInfluence[\"+n+\"]\",p,r))}f=f.length*(g||1)}else m=\".bones[\"+b[h].name+\"]\",c(jc,m+\".position\",k,\"pos\",d),c(dd,\nm+\".quaternion\",k,\"rot\",d),c(jc,m+\".scale\",k,\"scl\",d)}return 0===d.length?null:new Ca(e,f,d)}});Object.assign(Ca.prototype,{resetDuration:function(){for(var a=0,b=0,c=this.tracks.length;b!==c;++b)var d=this.tracks[b],a=Math.max(a,d.times[d.times.length-1]);this.duration=a},trim:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this},optimize:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}});Object.assign(Pd.prototype,\n{load:function(a,b,c,d){var e=this;(new Na(e.manager)).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setTextures:function(a){this.textures=a},parse:function(a){function b(a){void 0===c[a]&&console.warn(\"THREE.MaterialLoader: Undefined texture\",a);return c[a]}var c=this.textures,d=new Mg[a.type];void 0!==a.uuid&&(d.uuid=a.uuid);void 0!==a.name&&(d.name=a.name);void 0!==a.color&&d.color.setHex(a.color);void 0!==a.roughness&&(d.roughness=a.roughness);void 0!==a.metalness&&(d.metalness=a.metalness);\nvoid 0!==a.emissive&&d.emissive.setHex(a.emissive);void 0!==a.specular&&d.specular.setHex(a.specular);void 0!==a.shininess&&(d.shininess=a.shininess);void 0!==a.clearCoat&&(d.clearCoat=a.clearCoat);void 0!==a.clearCoatRoughness&&(d.clearCoatRoughness=a.clearCoatRoughness);void 0!==a.uniforms&&(d.uniforms=a.uniforms);void 0!==a.vertexShader&&(d.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(d.fragmentShader=a.fragmentShader);void 0!==a.vertexColors&&(d.vertexColors=a.vertexColors);void 0!==\na.fog&&(d.fog=a.fog);void 0!==a.flatShading&&(d.flatShading=a.flatShading);void 0!==a.blending&&(d.blending=a.blending);void 0!==a.side&&(d.side=a.side);void 0!==a.opacity&&(d.opacity=a.opacity);void 0!==a.transparent&&(d.transparent=a.transparent);void 0!==a.alphaTest&&(d.alphaTest=a.alphaTest);void 0!==a.depthTest&&(d.depthTest=a.depthTest);void 0!==a.depthWrite&&(d.depthWrite=a.depthWrite);void 0!==a.colorWrite&&(d.colorWrite=a.colorWrite);void 0!==a.wireframe&&(d.wireframe=a.wireframe);void 0!==\na.wireframeLinewidth&&(d.wireframeLinewidth=a.wireframeLinewidth);void 0!==a.wireframeLinecap&&(d.wireframeLinecap=a.wireframeLinecap);void 0!==a.wireframeLinejoin&&(d.wireframeLinejoin=a.wireframeLinejoin);void 0!==a.rotation&&(d.rotation=a.rotation);1!==a.linewidth&&(d.linewidth=a.linewidth);void 0!==a.dashSize&&(d.dashSize=a.dashSize);void 0!==a.gapSize&&(d.gapSize=a.gapSize);void 0!==a.scale&&(d.scale=a.scale);void 0!==a.skinning&&(d.skinning=a.skinning);void 0!==a.morphTargets&&(d.morphTargets=\na.morphTargets);void 0!==a.dithering&&(d.dithering=a.dithering);void 0!==a.visible&&(d.visible=a.visible);void 0!==a.userData&&(d.userData=a.userData);void 0!==a.shading&&(d.flatShading=1===a.shading);void 0!==a.size&&(d.size=a.size);void 0!==a.sizeAttenuation&&(d.sizeAttenuation=a.sizeAttenuation);void 0!==a.map&&(d.map=b(a.map));void 0!==a.alphaMap&&(d.alphaMap=b(a.alphaMap),d.transparent=!0);void 0!==a.bumpMap&&(d.bumpMap=b(a.bumpMap));void 0!==a.bumpScale&&(d.bumpScale=a.bumpScale);void 0!==a.normalMap&&\n(d.normalMap=b(a.normalMap));if(void 0!==a.normalScale){var e=a.normalScale;!1===Array.isArray(e)&&(e=[e,e]);d.normalScale=(new D).fromArray(e)}void 0!==a.displacementMap&&(d.displacementMap=b(a.displacementMap));void 0!==a.displacementScale&&(d.displacementScale=a.displacementScale);void 0!==a.displacementBias&&(d.displacementBias=a.displacementBias);void 0!==a.roughnessMap&&(d.roughnessMap=b(a.roughnessMap));void 0!==a.metalnessMap&&(d.metalnessMap=b(a.metalnessMap));void 0!==a.emissiveMap&&(d.emissiveMap=\nb(a.emissiveMap));void 0!==a.emissiveIntensity&&(d.emissiveIntensity=a.emissiveIntensity);void 0!==a.specularMap&&(d.specularMap=b(a.specularMap));void 0!==a.envMap&&(d.envMap=b(a.envMap));void 0!==a.reflectivity&&(d.reflectivity=a.reflectivity);void 0!==a.lightMap&&(d.lightMap=b(a.lightMap));void 0!==a.lightMapIntensity&&(d.lightMapIntensity=a.lightMapIntensity);void 0!==a.aoMap&&(d.aoMap=b(a.aoMap));void 0!==a.aoMapIntensity&&(d.aoMapIntensity=a.aoMapIntensity);void 0!==a.gradientMap&&(d.gradientMap=\nb(a.gradientMap));return d}});Object.assign(le.prototype,{load:function(a,b,c,d){var e=this;(new Na(e.manager)).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},parse:function(a){var b=new E;var c=a.data.index;void 0!==c&&(c=new xf[c.type](c.array),b.setIndex(new M(c,1)));var d=a.data.attributes;for(f in d){var e=d[f];c=new xf[e.type](e.array);b.addAttribute(f,new M(c,e.itemSize,e.normalized))}var f=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==f)for(c=0,d=f.length;c!==d;++c)e=f[c],\nb.addGroup(e.start,e.count,e.materialIndex);a=a.data.boundingSphere;void 0!==a&&(f=new p,void 0!==a.center&&f.fromArray(a.center),b.boundingSphere=new Ia(f,a.radius));return b}});var xf={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:\"undefined\"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};kc.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,\nb)},get:function(a){for(var b=this.handlers,c=0,d=b.length;c<d;c+=2){var e=b[c+1];if(b[c].test(a))return e}return null}};Object.assign(kc.prototype,{crossOrigin:void 0,initMaterials:function(a,b,c){for(var d=[],e=0;e<a.length;++e)d[e]=this.createMaterial(a[e],b,c);return d},createMaterial:function(){var a={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},b=new H,c=new Ad,d=new Pd;return function(e,f,g){function h(a,b,d,e,h){a=f+a;var m=kc.Handlers.get(a);\nnull!==m?a=m.load(a):(c.setCrossOrigin(g),a=c.load(a));void 0!==b&&(a.repeat.fromArray(b),1!==b[0]&&(a.wrapS=1E3),1!==b[1]&&(a.wrapT=1E3));void 0!==d&&a.offset.fromArray(d);void 0!==e&&(\"repeat\"===e[0]&&(a.wrapS=1E3),\"mirror\"===e[0]&&(a.wrapS=1002),\"repeat\"===e[1]&&(a.wrapT=1E3),\"mirror\"===e[1]&&(a.wrapT=1002));void 0!==h&&(a.anisotropy=h);b=Q.generateUUID();k[b]=a;return b}var k={},m={uuid:Q.generateUUID(),type:\"MeshLambertMaterial\"},l;for(l in e){var n=e[l];switch(l){case \"DbgColor\":case \"DbgIndex\":case \"opticalDensity\":case \"illumination\":break;\ncase \"DbgName\":m.name=n;break;case \"blending\":m.blending=a[n];break;case \"colorAmbient\":case \"mapAmbient\":console.warn(\"THREE.Loader.createMaterial:\",l,\"is no longer supported.\");break;case \"colorDiffuse\":m.color=b.fromArray(n).getHex();break;case \"colorSpecular\":m.specular=b.fromArray(n).getHex();break;case \"colorEmissive\":m.emissive=b.fromArray(n).getHex();break;case \"specularCoef\":m.shininess=n;break;case \"shading\":\"basic\"===n.toLowerCase()&&(m.type=\"MeshBasicMaterial\");\"phong\"===n.toLowerCase()&&\n(m.type=\"MeshPhongMaterial\");\"standard\"===n.toLowerCase()&&(m.type=\"MeshStandardMaterial\");break;case \"mapDiffuse\":m.map=h(n,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case \"mapDiffuseRepeat\":case \"mapDiffuseOffset\":case \"mapDiffuseWrap\":case \"mapDiffuseAnisotropy\":break;case \"mapEmissive\":m.emissiveMap=h(n,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case \"mapEmissiveRepeat\":case \"mapEmissiveOffset\":case \"mapEmissiveWrap\":case \"mapEmissiveAnisotropy\":break;\ncase \"mapLight\":m.lightMap=h(n,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case \"mapLightRepeat\":case \"mapLightOffset\":case \"mapLightWrap\":case \"mapLightAnisotropy\":break;case \"mapAO\":m.aoMap=h(n,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case \"mapAORepeat\":case \"mapAOOffset\":case \"mapAOWrap\":case \"mapAOAnisotropy\":break;case \"mapBump\":m.bumpMap=h(n,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case \"mapBumpScale\":m.bumpScale=\nn;break;case \"mapBumpRepeat\":case \"mapBumpOffset\":case \"mapBumpWrap\":case \"mapBumpAnisotropy\":break;case \"mapNormal\":m.normalMap=h(n,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case \"mapNormalFactor\":m.normalScale=[n,n];break;case \"mapNormalRepeat\":case \"mapNormalOffset\":case \"mapNormalWrap\":case \"mapNormalAnisotropy\":break;case \"mapSpecular\":m.specularMap=h(n,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case \"mapSpecularRepeat\":case \"mapSpecularOffset\":case \"mapSpecularWrap\":case \"mapSpecularAnisotropy\":break;\ncase \"mapMetalness\":m.metalnessMap=h(n,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case \"mapMetalnessRepeat\":case \"mapMetalnessOffset\":case \"mapMetalnessWrap\":case \"mapMetalnessAnisotropy\":break;case \"mapRoughness\":m.roughnessMap=h(n,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case \"mapRoughnessRepeat\":case \"mapRoughnessOffset\":case \"mapRoughnessWrap\":case \"mapRoughnessAnisotropy\":break;case \"mapAlpha\":m.alphaMap=\nh(n,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case \"mapAlphaRepeat\":case \"mapAlphaOffset\":case \"mapAlphaWrap\":case \"mapAlphaAnisotropy\":break;case \"flipSided\":m.side=1;break;case \"doubleSided\":m.side=2;break;case \"transparency\":console.warn(\"THREE.Loader.createMaterial: transparency has been renamed to opacity\");m.opacity=n;break;case \"depthTest\":case \"depthWrite\":case \"colorWrite\":case \"opacity\":case \"reflectivity\":case \"transparent\":case \"visible\":case \"wireframe\":m[l]=\nn;break;case \"vertexColors\":!0===n&&(m.vertexColors=2);\"face\"===n&&(m.vertexColors=1);break;default:console.error(\"THREE.Loader.createMaterial: Unsupported\",l,n)}}\"MeshBasicMaterial\"===m.type&&delete m.emissive;\"MeshPhongMaterial\"!==m.type&&delete m.specular;1>m.opacity&&(m.transparent=!0);d.setTextures(k);return d.parse(m)}}()});var He={decodeText:function(a){if(\"undefined\"!==typeof TextDecoder)return(new TextDecoder).decode(a);for(var b=\"\",c=0,d=a.length;c<d;c++)b+=String.fromCharCode(a[c]);return b},\nextractUrlBase:function(a){a=a.split(\"/\");if(1===a.length)return\"./\";a.pop();return a.join(\"/\")+\"/\"}};Object.assign(me.prototype,{load:function(a,b,c,d){var e=this,f=this.texturePath&&\"string\"===typeof this.texturePath?this.texturePath:He.extractUrlBase(a),g=new Na(this.manager);g.setWithCredentials(this.withCredentials);g.load(a,function(c){c=JSON.parse(c);var d=c.metadata;if(void 0!==d&&(d=d.type,void 0!==d)){if(\"object\"===d.toLowerCase()){console.error(\"THREE.JSONLoader: \"+a+\" should be loaded with THREE.ObjectLoader instead.\");\nreturn}if(\"scene\"===d.toLowerCase()){console.error(\"THREE.JSONLoader: \"+a+\" should be loaded with THREE.SceneLoader instead.\");return}}c=e.parse(c,f);b(c.geometry,c.materials)},c,d)},setTexturePath:function(a){this.texturePath=a},parse:function(){return function(a,b){void 0!==a.data&&(a=a.data);a.scale=void 0!==a.scale?1/a.scale:1;var c=new L,d=a,e,f,g,h=d.faces;var k=d.vertices;var m=d.normals,l=d.colors;var n=d.scale;var u=0;if(void 0!==d.uvs){for(e=0;e<d.uvs.length;e++)d.uvs[e].length&&u++;for(e=\n0;e<u;e++)c.faceVertexUvs[e]=[]}var r=0;for(g=k.length;r<g;)e=new p,e.x=k[r++]*n,e.y=k[r++]*n,e.z=k[r++]*n,c.vertices.push(e);r=0;for(g=h.length;r<g;){k=h[r++];var t=k&1;var v=k&2;e=k&8;var w=k&16;var z=k&32;n=k&64;k&=128;if(t){t=new Ya;t.a=h[r];t.b=h[r+1];t.c=h[r+3];var y=new Ya;y.a=h[r+1];y.b=h[r+2];y.c=h[r+3];r+=4;v&&(v=h[r++],t.materialIndex=v,y.materialIndex=v);v=c.faces.length;if(e)for(e=0;e<u;e++){var x=d.uvs[e];c.faceVertexUvs[e][v]=[];c.faceVertexUvs[e][v+1]=[];for(f=0;4>f;f++){var A=h[r++];\nvar B=x[2*A];A=x[2*A+1];B=new D(B,A);2!==f&&c.faceVertexUvs[e][v].push(B);0!==f&&c.faceVertexUvs[e][v+1].push(B)}}w&&(w=3*h[r++],t.normal.set(m[w++],m[w++],m[w]),y.normal.copy(t.normal));if(z)for(e=0;4>e;e++)w=3*h[r++],z=new p(m[w++],m[w++],m[w]),2!==e&&t.vertexNormals.push(z),0!==e&&y.vertexNormals.push(z);n&&(n=h[r++],n=l[n],t.color.setHex(n),y.color.setHex(n));if(k)for(e=0;4>e;e++)n=h[r++],n=l[n],2!==e&&t.vertexColors.push(new H(n)),0!==e&&y.vertexColors.push(new H(n));c.faces.push(t);c.faces.push(y)}else{t=\nnew Ya;t.a=h[r++];t.b=h[r++];t.c=h[r++];v&&(v=h[r++],t.materialIndex=v);v=c.faces.length;if(e)for(e=0;e<u;e++)for(x=d.uvs[e],c.faceVertexUvs[e][v]=[],f=0;3>f;f++)A=h[r++],B=x[2*A],A=x[2*A+1],B=new D(B,A),c.faceVertexUvs[e][v].push(B);w&&(w=3*h[r++],t.normal.set(m[w++],m[w++],m[w]));if(z)for(e=0;3>e;e++)w=3*h[r++],z=new p(m[w++],m[w++],m[w]),t.vertexNormals.push(z);n&&(n=h[r++],t.color.setHex(l[n]));if(k)for(e=0;3>e;e++)n=h[r++],t.vertexColors.push(new H(l[n]));c.faces.push(t)}}d=a;r=void 0!==d.influencesPerVertex?\nd.influencesPerVertex:2;if(d.skinWeights)for(g=0,h=d.skinWeights.length;g<h;g+=r)c.skinWeights.push(new aa(d.skinWeights[g],1<r?d.skinWeights[g+1]:0,2<r?d.skinWeights[g+2]:0,3<r?d.skinWeights[g+3]:0));if(d.skinIndices)for(g=0,h=d.skinIndices.length;g<h;g+=r)c.skinIndices.push(new aa(d.skinIndices[g],1<r?d.skinIndices[g+1]:0,2<r?d.skinIndices[g+2]:0,3<r?d.skinIndices[g+3]:0));c.bones=d.bones;c.bones&&0<c.bones.length&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&\nconsole.warn(\"When skinning, number of vertices (\"+c.vertices.length+\"), skinIndices (\"+c.skinIndices.length+\"), and skinWeights (\"+c.skinWeights.length+\") should match.\");g=a;h=g.scale;if(void 0!==g.morphTargets)for(d=0,r=g.morphTargets.length;d<r;d++)for(c.morphTargets[d]={},c.morphTargets[d].name=g.morphTargets[d].name,c.morphTargets[d].vertices=[],m=c.morphTargets[d].vertices,l=g.morphTargets[d].vertices,u=0,k=l.length;u<k;u+=3)n=new p,n.x=l[u]*h,n.y=l[u+1]*h,n.z=l[u+2]*h,m.push(n);if(void 0!==\ng.morphColors&&0<g.morphColors.length)for(console.warn('THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.'),h=c.faces,g=g.morphColors[0].colors,d=0,r=h.length;d<r;d++)h[d].color.fromArray(g,3*d);g=a;d=[];r=[];void 0!==g.animation&&r.push(g.animation);void 0!==g.animations&&(g.animations.length?r=r.concat(g.animations):r.push(g.animations));for(g=0;g<r.length;g++)(h=Ca.parseAnimation(r[g],c.bones))&&d.push(h);c.morphTargets&&(r=Ca.CreateClipsFromMorphTargetSequences(c.morphTargets,\n10),d=d.concat(r));0<d.length&&(c.animations=d);c.computeFaceNormals();c.computeBoundingSphere();if(void 0===a.materials||0===a.materials.length)return{geometry:c};a=kc.prototype.initMaterials(a.materials,b,this.crossOrigin);return{geometry:c,materials:a}}}()});Object.assign(jf.prototype,{load:function(a,b,c,d){\"\"===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf(\"/\")+1));var e=this;(new Na(e.manager)).load(a,function(c){var f=null;try{f=JSON.parse(c)}catch(h){void 0!==d&&d(h);console.error(\"THREE:ObjectLoader: Can't parse \"+\na+\".\",h.message);return}c=f.metadata;void 0===c||void 0===c.type||\"geometry\"===c.type.toLowerCase()?console.error(\"THREE.ObjectLoader: Can't load \"+a+\". Use THREE.JSONLoader instead.\"):e.parse(f,b)},c,d)},setTexturePath:function(a){this.texturePath=a},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,b){var c=this.parseShape(a.shapes),c=this.parseGeometries(a.geometries,c),d=this.parseImages(a.images,function(){void 0!==b&&b(e)}),d=this.parseTextures(a.textures,d),d=this.parseMaterials(a.materials,\nd),e=this.parseObject(a.object,c,d);a.animations&&(e.animations=this.parseAnimations(a.animations));void 0!==a.images&&0!==a.images.length||void 0===b||b(e);return e},parseShape:function(a){var b={};if(void 0!==a)for(var c=0,d=a.length;c<d;c++){var e=(new jb).fromJSON(a[c]);b[e.uuid]=e}return b},parseGeometries:function(a,b){var c={};if(void 0!==a)for(var d=new me,e=new le,f=0,g=a.length;f<g;f++){var h=a[f];switch(h.type){case \"PlaneGeometry\":case \"PlaneBufferGeometry\":var k=new ka[h.type](h.width,\nh.height,h.widthSegments,h.heightSegments);break;case \"BoxGeometry\":case \"BoxBufferGeometry\":case \"CubeGeometry\":k=new ka[h.type](h.width,h.height,h.depth,h.widthSegments,h.heightSegments,h.depthSegments);break;case \"CircleGeometry\":case \"CircleBufferGeometry\":k=new ka[h.type](h.radius,h.segments,h.thetaStart,h.thetaLength);break;case \"CylinderGeometry\":case \"CylinderBufferGeometry\":k=new ka[h.type](h.radiusTop,h.radiusBottom,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);\nbreak;case \"ConeGeometry\":case \"ConeBufferGeometry\":k=new ka[h.type](h.radius,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case \"SphereGeometry\":case \"SphereBufferGeometry\":k=new ka[h.type](h.radius,h.widthSegments,h.heightSegments,h.phiStart,h.phiLength,h.thetaStart,h.thetaLength);break;case \"DodecahedronGeometry\":case \"DodecahedronBufferGeometry\":case \"IcosahedronGeometry\":case \"IcosahedronBufferGeometry\":case \"OctahedronGeometry\":case \"OctahedronBufferGeometry\":case \"TetrahedronGeometry\":case \"TetrahedronBufferGeometry\":k=\nnew ka[h.type](h.radius,h.detail);break;case \"RingGeometry\":case \"RingBufferGeometry\":k=new ka[h.type](h.innerRadius,h.outerRadius,h.thetaSegments,h.phiSegments,h.thetaStart,h.thetaLength);break;case \"TorusGeometry\":case \"TorusBufferGeometry\":k=new ka[h.type](h.radius,h.tube,h.radialSegments,h.tubularSegments,h.arc);break;case \"TorusKnotGeometry\":case \"TorusKnotBufferGeometry\":k=new ka[h.type](h.radius,h.tube,h.tubularSegments,h.radialSegments,h.p,h.q);break;case \"LatheGeometry\":case \"LatheBufferGeometry\":k=\nnew ka[h.type](h.points,h.segments,h.phiStart,h.phiLength);break;case \"PolyhedronGeometry\":case \"PolyhedronBufferGeometry\":k=new ka[h.type](h.vertices,h.indices,h.radius,h.details);break;case \"ShapeGeometry\":case \"ShapeBufferGeometry\":k=[];f=0;for(g=h.shapes.length;f<g;f++)k.push(b[h.shapes[f]]);k=new ka[h.type](k,h.curveSegments);break;case \"BufferGeometry\":k=e.parse(h);break;case \"Geometry\":k=d.parse(h,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type \"'+\nh.type+'\"');continue}k.uuid=h.uuid;void 0!==h.name&&(k.name=h.name);c[h.uuid]=k}return c},parseMaterials:function(a,b){var c={};if(void 0!==a){var d=new Pd;d.setTextures(b);b=0;for(var e=a.length;b<e;b++){var f=a[b];if(\"MultiMaterial\"===f.type){for(var g=[],h=0;h<f.materials.length;h++)g.push(d.parse(f.materials[h]));c[f.uuid]=g}else c[f.uuid]=d.parse(f)}}return c},parseAnimations:function(a){for(var b=[],c=0;c<a.length;c++){var d=Ca.parse(a[c]);b.push(d)}return b},parseImages:function(a,b){function c(a){d.manager.itemStart(a);\nreturn f.load(a,function(){d.manager.itemEnd(a)},void 0,function(){d.manager.itemEnd(a);d.manager.itemError(a)})}var d=this,e={};if(void 0!==a&&0<a.length){b=new he(b);var f=new ad(b);f.setCrossOrigin(this.crossOrigin);b=0;for(var g=a.length;b<g;b++){var h=a[b],k=/^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(h.url)?h.url:d.texturePath+h.url;e[h.uuid]=c(k)}}return e},parseTextures:function(a,b){function c(a,b){if(\"number\"===typeof a)return a;console.warn(\"THREE.ObjectLoader.parseTexture: Constant should be in numeric form.\",\na);return b[a]}var d={};if(void 0!==a)for(var e=0,f=a.length;e<f;e++){var g=a[e];void 0===g.image&&console.warn('THREE.ObjectLoader: No \"image\" specified for',g.uuid);void 0===b[g.image]&&console.warn(\"THREE.ObjectLoader: Undefined image\",g.image);var h=new U(b[g.image]);h.needsUpdate=!0;h.uuid=g.uuid;void 0!==g.name&&(h.name=g.name);void 0!==g.mapping&&(h.mapping=c(g.mapping,Og));void 0!==g.offset&&h.offset.fromArray(g.offset);void 0!==g.repeat&&h.repeat.fromArray(g.repeat);void 0!==g.center&&h.center.fromArray(g.center);\nvoid 0!==g.rotation&&(h.rotation=g.rotation);void 0!==g.wrap&&(h.wrapS=c(g.wrap[0],yf),h.wrapT=c(g.wrap[1],yf));void 0!==g.minFilter&&(h.minFilter=c(g.minFilter,zf));void 0!==g.magFilter&&(h.magFilter=c(g.magFilter,zf));void 0!==g.anisotropy&&(h.anisotropy=g.anisotropy);void 0!==g.flipY&&(h.flipY=g.flipY);d[g.uuid]=h}return d},parseObject:function(){var a=new O;return function(b,c,d){function e(a){void 0===c[a]&&console.warn(\"THREE.ObjectLoader: Undefined geometry\",a);return c[a]}function f(a){if(void 0!==\na){if(Array.isArray(a)){for(var b=[],c=0,e=a.length;c<e;c++){var f=a[c];void 0===d[f]&&console.warn(\"THREE.ObjectLoader: Undefined material\",f);b.push(d[f])}return b}void 0===d[a]&&console.warn(\"THREE.ObjectLoader: Undefined material\",a);return d[a]}}switch(b.type){case \"Scene\":var g=new vd;void 0!==b.background&&Number.isInteger(b.background)&&(g.background=new H(b.background));void 0!==b.fog&&(\"Fog\"===b.fog.type?g.fog=new Qb(b.fog.color,b.fog.near,b.fog.far):\"FogExp2\"===b.fog.type&&(g.fog=new Pb(b.fog.color,\nb.fog.density)));break;case \"PerspectiveCamera\":g=new ba(b.fov,b.aspect,b.near,b.far);void 0!==b.focus&&(g.focus=b.focus);void 0!==b.zoom&&(g.zoom=b.zoom);void 0!==b.filmGauge&&(g.filmGauge=b.filmGauge);void 0!==b.filmOffset&&(g.filmOffset=b.filmOffset);void 0!==b.view&&(g.view=Object.assign({},b.view));break;case \"OrthographicCamera\":g=new Lb(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case \"AmbientLight\":g=new Hd(b.color,b.intensity);break;case \"DirectionalLight\":g=new Gd(b.color,b.intensity);\nbreak;case \"PointLight\":g=new Ed(b.color,b.intensity,b.distance,b.decay);break;case \"RectAreaLight\":g=new Id(b.color,b.intensity,b.width,b.height);break;case \"SpotLight\":g=new Dd(b.color,b.intensity,b.distance,b.angle,b.penumbra,b.decay);break;case \"HemisphereLight\":g=new Bd(b.color,b.groundColor,b.intensity);break;case \"SkinnedMesh\":console.warn(\"THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.\");case \"Mesh\":g=e(b.geometry);var h=f(b.material);g=g.bones&&0<g.bones.length?new xd(g,\nh):new ra(g,h);break;case \"LOD\":g=new Dc;break;case \"Line\":g=new sa(e(b.geometry),f(b.material),b.mode);break;case \"LineLoop\":g=new yd(e(b.geometry),f(b.material));break;case \"LineSegments\":g=new X(e(b.geometry),f(b.material));break;case \"PointCloud\":case \"Points\":g=new Rb(e(b.geometry),f(b.material));break;case \"Sprite\":g=new Cc(f(b.material));break;case \"Group\":g=new Fc;break;default:g=new x}g.uuid=b.uuid;void 0!==b.name&&(g.name=b.name);void 0!==b.matrix?(a.fromArray(b.matrix),a.decompose(g.position,\ng.quaternion,g.scale)):(void 0!==b.position&&g.position.fromArray(b.position),void 0!==b.rotation&&g.rotation.fromArray(b.rotation),void 0!==b.quaternion&&g.quaternion.fromArray(b.quaternion),void 0!==b.scale&&g.scale.fromArray(b.scale));void 0!==b.castShadow&&(g.castShadow=b.castShadow);void 0!==b.receiveShadow&&(g.receiveShadow=b.receiveShadow);b.shadow&&(void 0!==b.shadow.bias&&(g.shadow.bias=b.shadow.bias),void 0!==b.shadow.radius&&(g.shadow.radius=b.shadow.radius),void 0!==b.shadow.mapSize&&\ng.shadow.mapSize.fromArray(b.shadow.mapSize),void 0!==b.shadow.camera&&(g.shadow.camera=this.parseObject(b.shadow.camera)));void 0!==b.visible&&(g.visible=b.visible);void 0!==b.userData&&(g.userData=b.userData);if(void 0!==b.children)for(var h=b.children,k=0;k<h.length;k++)g.add(this.parseObject(h[k],c,d));if(\"LOD\"===b.type)for(b=b.levels,h=0;h<b.length;h++){var k=b[h],m=g.getObjectByProperty(\"uuid\",k.object);void 0!==m&&g.addLevel(m,k.distance)}return g}}()});var Og={UVMapping:300,CubeReflectionMapping:301,\nCubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},yf={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},zf={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};ne.prototype={constructor:ne,setOptions:function(a){this.options=a;return this},\nload:function(a,b,c,d){void 0===a&&(a=\"\");void 0!==this.path&&(a=this.path+a);var e=this,f=Ib.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;fetch(a).then(function(a){return a.blob()}).then(function(a){return createImageBitmap(a,e.options)}).then(function(c){Ib.add(a,c);b&&b(c);e.manager.itemEnd(a)}).catch(function(b){d&&d(b);e.manager.itemEnd(a);e.manager.itemError(a)})},setCrossOrigin:function(){return this},setPath:function(a){this.path=\na;return this}};Object.assign(oe.prototype,{moveTo:function(a,b){this.currentPath=new Sa;this.subPaths.push(this.currentPath);this.currentPath.moveTo(a,b)},lineTo:function(a,b){this.currentPath.lineTo(a,b)},quadraticCurveTo:function(a,b,c,d){this.currentPath.quadraticCurveTo(a,b,c,d)},bezierCurveTo:function(a,b,c,d,e,f){this.currentPath.bezierCurveTo(a,b,c,d,e,f)},splineThru:function(a){this.currentPath.splineThru(a)},toShapes:function(a,b){function c(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=\na[c],f=new jb;f.curves=e.curves;b.push(f)}return b}function d(a,b){for(var c=b.length,d=!1,e=c-1,f=0;f<c;e=f++){var g=b[e],h=b[f],k=h.x-g.x,m=h.y-g.y;if(Math.abs(m)>Number.EPSILON){if(0>m&&(g=b[f],k=-k,h=b[e],m=-m),!(a.y<g.y||a.y>h.y))if(a.y===g.y){if(a.x===g.x)return!0}else{e=m*(a.x-g.x)-k*(a.y-g.y);if(0===e)return!0;0>e||(d=!d)}}else if(a.y===g.y&&(h.x<=a.x&&a.x<=g.x||g.x<=a.x&&a.x<=h.x))return!0}return d}var e=$a.isClockWise,f=this.subPaths;if(0===f.length)return[];if(!0===b)return c(f);b=[];if(1===\nf.length){var g=f[0];var h=new jb;h.curves=g.curves;b.push(h);return b}var k=!e(f[0].getPoints()),k=a?!k:k;h=[];var m=[],l=[],n=0;m[n]=void 0;l[n]=[];for(var p=0,r=f.length;p<r;p++){g=f[p];var t=g.getPoints();var v=e(t);(v=a?!v:v)?(!k&&m[n]&&n++,m[n]={s:new jb,p:t},m[n].s.curves=g.curves,k&&n++,l[n]=[]):l[n].push({h:g,p:t[0]})}if(!m[0])return c(f);if(1<m.length){p=!1;a=[];e=0;for(f=m.length;e<f;e++)h[e]=[];e=0;for(f=m.length;e<f;e++)for(g=l[e],v=0;v<g.length;v++){k=g[v];n=!0;for(t=0;t<m.length;t++)d(k.p,\nm[t].p)&&(e!==t&&a.push({froms:e,tos:t,hole:v}),n?(n=!1,h[t].push(k)):p=!0);n&&h[e].push(k)}0<a.length&&(p||(l=h))}p=0;for(e=m.length;p<e;p++)for(h=m[p].s,b.push(h),a=l[p],f=0,g=a.length;f<g;f++)h.holes.push(a[f].h);return b}});Object.assign(pe.prototype,{isFont:!0,generateShapes:function(a,b,c){void 0===b&&(b=100);c=this.data;a=String(a).split(\"\");var d=b/c.resolution,e=(c.boundingBox.yMax-c.boundingBox.yMin+c.underlineThickness)*d,f=0,g=0;b=[];for(var h=0;h<a.length;h++){var k=a[h];if(\"\\n\"===k)f=\n0,g-=e;else{var m=d;var l=f,n=g;if(k=c.glyphs[k]||c.glyphs[\"?\"]){var p=new oe;if(k.o)for(var r=k._cachedOutline||(k._cachedOutline=k.o.split(\" \")),t=0,v=r.length;t<v;)switch(r[t++]){case \"m\":var w=r[t++]*m+l;var x=r[t++]*m+n;p.moveTo(w,x);break;case \"l\":w=r[t++]*m+l;x=r[t++]*m+n;p.lineTo(w,x);break;case \"q\":var y=r[t++]*m+l;var B=r[t++]*m+n;var A=r[t++]*m+l;var C=r[t++]*m+n;p.quadraticCurveTo(A,C,y,B);break;case \"b\":y=r[t++]*m+l,B=r[t++]*m+n,A=r[t++]*m+l,C=r[t++]*m+n,w=r[t++]*m+l,x=r[t++]*m+n,p.bezierCurveTo(A,\nC,w,x,y,B)}m={offsetX:k.ha*m,path:p}}else m=void 0;f+=m.offsetX;b.push(m.path)}}c=[];a=0;for(d=b.length;a<d;a++)Array.prototype.push.apply(c,b[a].toShapes());return c}});Object.assign(kf.prototype,{load:function(a,b,c,d){var e=this,f=new Na(this.manager);f.setPath(this.path);f.load(a,function(a){try{var c=JSON.parse(a)}catch(k){console.warn(\"THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.\"),c=JSON.parse(a.substring(65,a.length-2))}a=e.parse(c);b&&b(a)},c,d)},\nparse:function(a){return new pe(a)},setPath:function(a){this.path=a;return this}});var Ud,se={getContext:function(){void 0===Ud&&(Ud=new (window.AudioContext||window.webkitAudioContext));return Ud},setContext:function(a){Ud=a}};Object.assign(qe.prototype,{load:function(a,b,c,d){var e=new Na(this.manager);e.setResponseType(\"arraybuffer\");e.load(a,function(a){se.getContext().decodeAudioData(a,function(a){b(a)})},c,d)}});Object.assign(lf.prototype,{update:function(){var a,b,c,d,e,f,g,h,k=new O,m=new O;\nreturn function(l){if(a!==this||b!==l.focus||c!==l.fov||d!==l.aspect*this.aspect||e!==l.near||f!==l.far||g!==l.zoom||h!==this.eyeSep){a=this;b=l.focus;c=l.fov;d=l.aspect*this.aspect;e=l.near;f=l.far;g=l.zoom;var n=l.projectionMatrix.clone();h=this.eyeSep/2;var p=h*e/b,q=e*Math.tan(Q.DEG2RAD*c*.5)/g;m.elements[12]=-h;k.elements[12]=h;var t=-q*d+p;var v=q*d+p;n.elements[0]=2*e/(v-t);n.elements[8]=(v+t)/(v-t);this.cameraL.projectionMatrix.copy(n);t=-q*d-p;v=q*d-p;n.elements[0]=2*e/(v-t);n.elements[8]=\n(v+t)/(v-t);this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(l.matrixWorld).multiply(m);this.cameraR.matrixWorld.copy(l.matrixWorld).multiply(k)}}()});fd.prototype=Object.create(x.prototype);fd.prototype.constructor=fd;re.prototype=Object.assign(Object.create(x.prototype),{constructor:re,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),\nthis.filter=null)},getFilter:function(){return this.filter},setFilter:function(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination);this.filter=a;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(a){this.gain.gain.value=a},updateMatrixWorld:function(){var a=new p,b=new ha,c=new p,d=new p;return function(e){x.prototype.updateMatrixWorld.call(this,\ne);e=this.context.listener;var f=this.up;this.matrixWorld.decompose(a,b,c);d.set(0,0,-1).applyQuaternion(b);e.positionX?(e.positionX.setValueAtTime(a.x,this.context.currentTime),e.positionY.setValueAtTime(a.y,this.context.currentTime),e.positionZ.setValueAtTime(a.z,this.context.currentTime),e.forwardX.setValueAtTime(d.x,this.context.currentTime),e.forwardY.setValueAtTime(d.y,this.context.currentTime),e.forwardZ.setValueAtTime(d.z,this.context.currentTime),e.upX.setValueAtTime(f.x,this.context.currentTime),\ne.upY.setValueAtTime(f.y,this.context.currentTime),e.upZ.setValueAtTime(f.z,this.context.currentTime)):(e.setPosition(a.x,a.y,a.z),e.setOrientation(d.x,d.y,d.z,f.x,f.y,f.z))}}()});lc.prototype=Object.assign(Object.create(x.prototype),{constructor:lc,getOutput:function(){return this.gain},setNodeSource:function(a){this.hasPlaybackControl=!1;this.sourceType=\"audioNode\";this.source=a;this.connect();return this},setBuffer:function(a){this.buffer=a;this.sourceType=\"buffer\";this.autoplay&&this.play();return this},\nplay:function(){if(!0===this.isPlaying)console.warn(\"THREE.Audio: Audio is already playing.\");else if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");else{var a=this.context.createBufferSource();a.buffer=this.buffer;a.loop=this.loop;a.onended=this.onEnded.bind(this);a.playbackRate.setValueAtTime(this.playbackRate,this.startTime);this.startTime=this.context.currentTime;a.start(this.startTime,this.offset);this.isPlaying=!0;this.source=a;return this.connect()}},\npause:function(){if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");else return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this},stop:function(){if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");else return this.source.stop(),this.offset=0,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);\nfor(var a=1,b=this.filters.length;a<b;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},\ngetFilters:function(){return this.filters},setFilters:function(a){a||(a=[]);!0===this.isPlaying?(this.disconnect(),this.filters=a,this.connect()):this.filters=a;return this},getFilter:function(){return this.getFilters()[0]},setFilter:function(a){return this.setFilters(a?[a]:[])},setPlaybackRate:function(a){if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");else return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,\nthis.context.currentTime),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn(\"THREE.Audio: this Audio has no playback control.\"),!1):this.loop},setLoop:function(a){if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");else return this.loop=a,!0===this.isPlaying&&(this.source.loop=this.loop),this},getVolume:function(){return this.gain.gain.value},\nsetVolume:function(a){this.gain.gain.value=a;return this}});te.prototype=Object.assign(Object.create(lc.prototype),{constructor:te,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(a){this.panner.refDistance=a},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(a){this.panner.rolloffFactor=a},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(a){this.panner.distanceModel=\na},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(a){this.panner.maxDistance=a},updateMatrixWorld:function(){var a=new p;return function(b){x.prototype.updateMatrixWorld.call(this,b);a.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(a.x,a.y,a.z)}}()});Object.assign(ue.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){for(var a=0,b=this.getFrequencyData(),c=0;c<b.length;c++)a+=\nb[c];return a/b.length}});Object.assign(ve.prototype,{accumulate:function(a,b){var c=this.buffer,d=this.valueSize;a=a*d+d;var e=this.cumulativeWeight;if(0===e){for(e=0;e!==d;++e)c[a+e]=c[e];e=b}else e+=b,this._mixBufferRegion(c,a,0,b/e,d);this.cumulativeWeight=e},apply:function(a){var b=this.valueSize,c=this.buffer;a=a*b+b;var d=this.cumulativeWeight,e=this.binding;this.cumulativeWeight=0;1>d&&this._mixBufferRegion(c,a,3*b,1-d,b);for(var d=b,f=b+b;d!==f;++d)if(c[d]!==c[d+b]){e.setValue(c,a);break}},\nsaveOriginalState:function(){var a=this.buffer,b=this.valueSize,c=3*b;this.binding.getValue(a,c);for(var d=b;d!==c;++d)a[d]=a[c+d%b];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(a,b,c,d,e){if(.5<=d)for(d=0;d!==e;++d)a[b+d]=a[c+d]},_slerp:function(a,b,c,d){ha.slerpFlat(a,b,a,b,a,c,d)},_lerp:function(a,b,c,d,e){for(var f=1-d,g=0;g!==e;++g){var h=b+g;a[h]=a[h]*f+a[c+g]*d}}});Object.assign(mf.prototype,{getValue:function(a,\nb){this.bind();var c=this._bindings[this._targetGroup.nCachedObjects_];void 0!==c&&c.getValue(a,b)},setValue:function(a,b){for(var c=this._bindings,d=this._targetGroup.nCachedObjects_,e=c.length;d!==e;++d)c[d].setValue(a,b)},bind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].bind()},unbind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].unbind()}});Object.assign(qa,{Composite:mf,create:function(a,\nb,c){return a&&a.isAnimationObjectGroup?new qa.Composite(a,b,c):new qa(a,b,c)},sanitizeNodeName:function(a){return a.replace(/\\s/g,\"_\").replace(/[^\\w-]/g,\"\")},parseTrackName:function(){var a=new RegExp(\"^\"+/((?:[\\w-]+[\\/:])*)/.source+/([\\w-\\.]+)?/.source+/(?:\\.([\\w-]+)(?:\\[(.+)\\])?)?/.source+/\\.([\\w-]+)(?:\\[(.+)\\])?/.source+\"$\"),b=[\"material\",\"materials\",\"bones\"];return function(c){var d=a.exec(c);if(!d)throw Error(\"PropertyBinding: Cannot parse trackName: \"+c);var d={nodeName:d[2],objectName:d[3],\nobjectIndex:d[4],propertyName:d[5],propertyIndex:d[6]},e=d.nodeName&&d.nodeName.lastIndexOf(\".\");if(void 0!==e&&-1!==e){var f=d.nodeName.substring(e+1);-1!==b.indexOf(f)&&(d.nodeName=d.nodeName.substring(0,e),d.objectName=f)}if(null===d.propertyName||0===d.propertyName.length)throw Error(\"PropertyBinding: can not parse propertyName from trackName: \"+c);return d}}(),findNode:function(a,b){if(!b||\"\"===b||\"root\"===b||\".\"===b||-1===b||b===a.name||b===a.uuid)return a;if(a.skeleton){var c=function(a){for(var c=\n0;c<a.bones.length;c++){var d=a.bones[c];if(d.name===b)return d}return null}(a.skeleton);if(c)return c}if(a.children){var d=function(a){for(var c=0;c<a.length;c++){var e=a[c];if(e.name===b||e.uuid===b||(e=d(e.children)))return e}return null};if(a=d(a.children))return a}return null}});Object.assign(qa.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},\nGetterByBindingType:[function(a,b){a[b]=this.node[this.propertyName]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)a[b++]=c[d]},function(a,b){a[b]=this.resolvedProperty[this.propertyIndex]},function(a,b){this.resolvedProperty.toArray(a,b)}],SetterByBindingTypeAndVersioning:[[function(a,b){this.targetObject[this.propertyName]=a[b]},function(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.targetObject[this.propertyName]=a[b];\nthis.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.needsUpdate=!0},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty[this.propertyIndex]=a[b]},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];\nthis.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty.fromArray(a,b)},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(a,b){this.bind();this.getValue(a,b)},setValue:function(a,b){this.bind();this.setValue(a,b)},bind:function(){var a=\nthis.node,b=this.parsedPath,c=b.objectName,d=b.propertyName,e=b.propertyIndex;a||(this.node=a=qa.findNode(this.rootNode,b.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(a){if(c){var f=b.objectIndex;switch(c){case \"materials\":if(!a.material){console.error(\"THREE.PropertyBinding: Can not bind to material as node does not have a material.\",this);return}if(!a.material.materials){console.error(\"THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.\",\nthis);return}a=a.material.materials;break;case \"bones\":if(!a.skeleton){console.error(\"THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.\",this);return}a=a.skeleton.bones;for(c=0;c<a.length;c++)if(a[c].name===f){f=c;break}break;default:if(void 0===a[c]){console.error(\"THREE.PropertyBinding: Can not bind to objectName of node undefined.\",this);return}a=a[c]}if(void 0!==f){if(void 0===a[f]){console.error(\"THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.\",\nthis,a);return}a=a[f]}}f=a[d];if(void 0===f)console.error(\"THREE.PropertyBinding: Trying to update property for track: \"+b.nodeName+\".\"+d+\" but it wasn't found.\",a);else{b=this.Versioning.None;void 0!==a.needsUpdate?(b=this.Versioning.NeedsUpdate,this.targetObject=a):void 0!==a.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=a);c=this.BindingType.Direct;if(void 0!==e){if(\"morphTargetInfluences\"===d){if(!a.geometry){console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.\",\nthis);return}if(a.geometry.isBufferGeometry){if(!a.geometry.morphAttributes){console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.\",this);return}for(c=0;c<this.node.geometry.morphAttributes.position.length;c++)if(a.geometry.morphAttributes.position[c].name===e){e=c;break}}else{if(!a.geometry.morphTargets){console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.\",\nthis);return}for(c=0;c<this.node.geometry.morphTargets.length;c++)if(a.geometry.morphTargets[c].name===e){e=c;break}}}c=this.BindingType.ArrayElement;this.resolvedProperty=f;this.propertyIndex=e}else void 0!==f.fromArray&&void 0!==f.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=f):Array.isArray(f)?(c=this.BindingType.EntireArray,this.resolvedProperty=f):this.propertyName=d;this.getValue=this.GetterByBindingType[c];this.setValue=this.SetterByBindingTypeAndVersioning[c][b]}}else console.error(\"THREE.PropertyBinding: Trying to update node for track: \"+\nthis.path+\" but it wasn't found.\")},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});Object.assign(qa.prototype,{_getValue_unbound:qa.prototype.getValue,_setValue_unbound:qa.prototype.setValue});Object.assign(nf.prototype,{isAnimationObjectGroup:!0,add:function(){for(var a=this._objects,b=a.length,c=this.nCachedObjects_,d=this._indicesByUUID,e=this._paths,f=this._parsedPaths,g=this._bindings,h=g.length,k=0,m=arguments.length;k!==m;++k){var l=\narguments[k],n=l.uuid,p=d[n];if(void 0===p){p=b++;d[n]=p;a.push(l);for(var n=0,r=h;n!==r;++n)g[n].push(new qa(l,e[n],f[n]))}else if(p<c){var t=--c,r=a[t];d[r.uuid]=p;a[p]=r;d[n]=t;a[t]=l;n=0;for(r=h;n!==r;++n){var v=g[n],w=v[p];v[p]=v[t];void 0===w&&(w=new qa(l,e[n],f[n]));v[t]=w}}else void 0!==a[p]&&console.error(\"THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.\")}this.nCachedObjects_=c},remove:function(){for(var a=\nthis._objects,b=this.nCachedObjects_,c=this._indicesByUUID,d=this._bindings,e=d.length,f=0,g=arguments.length;f!==g;++f){var h=arguments[f],k=h.uuid,m=c[k];if(void 0!==m&&m>=b){var l=b++,n=a[l];c[n.uuid]=m;a[m]=n;c[k]=l;a[l]=h;h=0;for(k=e;h!==k;++h){var n=d[h],p=n[m];n[m]=n[l];n[l]=p}}}this.nCachedObjects_=b},uncache:function(){for(var a,b,c=this._objects,d=c.length,e=this.nCachedObjects_,f=this._indicesByUUID,g=this._bindings,h=g.length,k=0,m=arguments.length;k!==m;++k){b=arguments[k].uuid;var l=\nf[b];if(void 0!==l)if(delete f[b],l<e){var n=--e,p=c[n];b=--d;a=c[b];f[p.uuid]=l;c[l]=p;f[a.uuid]=n;c[n]=a;c.pop();for(var p=0,r=h;p!==r;++p){a=g[p];var t=a[b];a[l]=a[n];a[n]=t;a.pop()}}else for(b=--d,a=c[b],f[a.uuid]=l,c[l]=a,c.pop(),p=0,r=h;p!==r;++p)a=g[p],a[l]=a[b],a.pop()}this.nCachedObjects_=e},subscribe_:function(a,b){var c=this._bindingsIndicesByPath,d=c[a],e=this._bindings;if(void 0!==d)return e[d];var f=this._paths,g=this._parsedPaths,h=this._objects,k=this.nCachedObjects_,m=Array(h.length),\nd=e.length;c[a]=d;f.push(a);g.push(b);e.push(m);c=k;for(d=h.length;c!==d;++c)m[c]=new qa(h[c],a,b);return m},unsubscribe_:function(a){var b=this._bindingsIndicesByPath,c=b[a];if(void 0!==c){var d=this._paths,e=this._parsedPaths,f=this._bindings,g=f.length-1,h=f[g];b[a[g]]=c;f[c]=h;f.pop();e[c]=e[g];e.pop();d[c]=d[g];d.pop()}}});Object.assign(of.prototype,{play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=\n!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(a){this._startTime=a;return this},setLoop:function(a,b){this.loop=a;this.repetitions=b;return this},setEffectiveWeight:function(a){this.weight=a;this._effectiveWeight=this.enabled?\na:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(a){return this._scheduleFading(a,0,1)},fadeOut:function(a){return this._scheduleFading(a,1,0)},crossFadeFrom:function(a,b,c){a.fadeOut(b);this.fadeIn(b);if(c){c=this._clip.duration;var d=a._clip.duration,e=c/d;a.warp(1,d/c,b);this.warp(e,1,b)}return this},crossFadeTo:function(a,b,c){return a.crossFadeFrom(this,b,c)},stopFading:function(){var a=this._weightInterpolant;null!==a&&(this._weightInterpolant=\nnull,this._mixer._takeBackControlInterpolant(a));return this},setEffectiveTimeScale:function(a){this.timeScale=a;this._effectiveTimeScale=this.paused?0:a;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(a){this.timeScale=this._clip.duration/a;return this.stopWarping()},syncWith:function(a){this.time=a.time;this.timeScale=a.timeScale;return this.stopWarping()},halt:function(a){return this.warp(this._effectiveTimeScale,0,a)},warp:function(a,\nb,c){var d=this._mixer,e=d.time,f=this._timeScaleInterpolant,g=this.timeScale;null===f&&(this._timeScaleInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;d[1]=e+c;f[0]=a/g;f[1]=b/g;return this},stopWarping:function(){var a=this._timeScaleInterpolant;null!==a&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||\nthis._mixer._root},_update:function(a,b,c,d){if(this.enabled){var e=this._startTime;if(null!==e){b=(a-e)*c;if(0>b||0===c)return;this._startTime=null;b*=c}b*=this._updateTimeScale(a);c=this._updateTime(b);a=this._updateWeight(a);if(0<a){b=this._interpolants;for(var e=this._propertyBindings,f=0,g=b.length;f!==g;++f)b[f].evaluate(c),e[f].accumulate(d,a)}}else this._updateWeight(a)},_updateWeight:function(a){var b=0;if(this.enabled){var b=this.weight,c=this._weightInterpolant;if(null!==c){var d=c.evaluate(a)[0],\nb=b*d;a>c.parameterPositions[1]&&(this.stopFading(),0===d&&(this.enabled=!1))}}return this._effectiveWeight=b},_updateTimeScale:function(a){var b=0;if(!this.paused){var b=this.timeScale,c=this._timeScaleInterpolant;if(null!==c){var d=c.evaluate(a)[0],b=b*d;a>c.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:this.timeScale=b)}}return this._effectiveTimeScale=b},_updateTime:function(a){var b=this.time+a;if(0===a)return b;var c=this._clip.duration,d=this.loop,e=this._loopCount;if(2200===\nd)a:{if(-1===e&&(this._loopCount=0,this._setEndings(!0,!0,!1)),b>=c)b=c;else if(0>b)b=0;else break a;this.clampWhenFinished?this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:\"finished\",action:this,direction:0>a?-1:1})}else{d=2202===d;-1===e&&(0<=a?(e=0,this._setEndings(!0,0===this.repetitions,d)):this._setEndings(0===this.repetitions,!0,d));if(b>=c||0>b){var f=Math.floor(b/c),b=b-c*f,e=e+Math.abs(f),g=this.repetitions-e;0>g?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,b=0<a?\nc:0,this._mixer.dispatchEvent({type:\"finished\",action:this,direction:0<a?1:-1})):(0===g?(a=0>a,this._setEndings(a,!a,d)):this._setEndings(!1,!1,d),this._loopCount=e,this._mixer.dispatchEvent({type:\"loop\",action:this,loopDelta:f}))}if(d&&1===(e&1))return this.time=b,c-b}return this.time=b},_setEndings:function(a,b,c){var d=this._interpolantSettings;c?(d.endingStart=2401,d.endingEnd=2401):(d.endingStart=a?this.zeroSlopeAtStart?2401:2400:2402,d.endingEnd=b?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(a,\nb,c){var d=this._mixer,e=d.time,f=this._weightInterpolant;null===f&&(this._weightInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;f[0]=b;d[1]=e+a;f[1]=c;return this}});we.prototype=Object.assign(Object.create(za.prototype),{constructor:we,_bindAction:function(a,b){var c=a._localRoot||this._root,d=a._clip.tracks,e=d.length,f=a._propertyBindings;a=a._interpolants;var g=c.uuid,h=this._bindingsByRootAndName,k=h[g];void 0===k&&(k={},h[g]=k);for(h=0;h!==e;++h){var m=\nd[h],l=m.name,n=k[l];if(void 0===n){n=f[h];if(void 0!==n){null===n._cacheIndex&&(++n.referenceCount,this._addInactiveBinding(n,g,l));continue}n=new ve(qa.create(c,l,b&&b._propertyBindings[h].binding.parsedPath),m.ValueTypeName,m.getValueSize());++n.referenceCount;this._addInactiveBinding(n,g,l)}f[h]=n;a[h].resultBuffer=n.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,c=a._clip.uuid,d=this._actionsByClip[c];this._bindAction(a,\nd&&d.knownActions[0]);this._addInactiveAction(a,c,b)}b=a._propertyBindings;c=0;for(d=b.length;c!==d;++c){var e=b[c];0===e.useCount++&&(this._lendBinding(e),e.saveOriginalState())}this._lendAction(a)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var b=a._propertyBindings,c=0,d=b.length;c!==d;++c){var e=b[c];0===--e.useCount&&(e.restoreOriginalState(),this._takeBackBinding(e))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip=\n{};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function(a){a=a._cacheIndex;\nreturn null!==a&&a<this._nActiveActions},_addInactiveAction:function(a,b,c){var d=this._actions,e=this._actionsByClip,f=e[b];void 0===f?(f={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,e[b]=f):(b=f.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=d.length;d.push(a);f.actionByRoot[c]=a},_removeInactiveAction:function(a){var b=this._actions,c=b[b.length-1],d=a._cacheIndex;c._cacheIndex=d;b[d]=c;b.pop();a._cacheIndex=null;var b=a._clip.uuid,c=this._actionsByClip,d=c[b],e=\nd.knownActions,f=e[e.length-1],g=a._byClipCacheIndex;f._byClipCacheIndex=g;e[g]=f;e.pop();a._byClipCacheIndex=null;delete d.actionByRoot[(a._localRoot||this._root).uuid];0===e.length&&delete c[b];this._removeInactiveBindingsForAction(a)},_removeInactiveBindingsForAction:function(a){a=a._propertyBindings;for(var b=0,c=a.length;b!==c;++b){var d=a[b];0===--d.referenceCount&&this._removeInactiveBinding(d)}},_lendAction:function(a){var b=this._actions,c=a._cacheIndex,d=this._nActiveActions++,e=b[d];a._cacheIndex=\nd;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackAction:function(a){var b=this._actions,c=a._cacheIndex,d=--this._nActiveActions,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_addInactiveBinding:function(a,b,c){var d=this._bindingsByRootAndName,e=d[b],f=this._bindings;void 0===e&&(e={},d[b]=e);e[c]=a;a._cacheIndex=f.length;f.push(a)},_removeInactiveBinding:function(a){var b=this._bindings,c=a.binding,d=c.rootNode.uuid,c=c.path,e=this._bindingsByRootAndName,f=e[d],g=b[b.length-1];a=a._cacheIndex;\ng._cacheIndex=a;b[a]=g;b.pop();delete f[c];a:{for(var h in f)break a;delete e[d]}},_lendBinding:function(a){var b=this._bindings,c=a._cacheIndex,d=this._nActiveBindings++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackBinding:function(a){var b=this._bindings,c=a._cacheIndex,d=--this._nActiveBindings,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_lendControlInterpolant:function(){var a=this._controlInterpolants,b=this._nActiveControlInterpolants++,c=a[b];void 0===c&&(c=new ed(new Float32Array(2),\nnew Float32Array(2),1,this._controlInterpolantsResultBuffer),c.__cacheIndex=b,a[b]=c);return c},_takeBackControlInterpolant:function(a){var b=this._controlInterpolants,c=a.__cacheIndex,d=--this._nActiveControlInterpolants,e=b[d];a.__cacheIndex=d;b[d]=a;e.__cacheIndex=c;b[c]=e},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(a,b){var c=b||this._root,d=c.uuid,c=\"string\"===typeof a?Ca.findByName(c,a):a;a=null!==c?c.uuid:a;var e=this._actionsByClip[a],f=null;if(void 0!==e){f=\ne.actionByRoot[d];if(void 0!==f)return f;f=e.knownActions[0];null===c&&(c=f._clip)}if(null===c)return null;b=new of(this,c,b);this._bindAction(b,f);this._addInactiveAction(b,a,d);return b},existingAction:function(a,b){var c=b||this._root;b=c.uuid;c=\"string\"===typeof a?Ca.findByName(c,a):a;a=this._actionsByClip[c?c.uuid:a];return void 0!==a?a.actionByRoot[b]||null:null},stopAllAction:function(){for(var a=this._actions,b=this._nActiveActions,c=this._bindings,d=this._nActiveBindings,e=this._nActiveBindings=\nthis._nActiveActions=0;e!==b;++e)a[e].reset();for(e=0;e!==d;++e)c[e].useCount=0;return this},update:function(a){a*=this.timeScale;for(var b=this._actions,c=this._nActiveActions,d=this.time+=a,e=Math.sign(a),f=this._accuIndex^=1,g=0;g!==c;++g)b[g]._update(d,a,e,f);a=this._bindings;b=this._nActiveBindings;for(g=0;g!==b;++g)a[g].apply(f);return this},getRoot:function(){return this._root},uncacheClip:function(a){var b=this._actions;a=a.uuid;var c=this._actionsByClip,d=c[a];if(void 0!==d){for(var d=d.knownActions,\ne=0,f=d.length;e!==f;++e){var g=d[e];this._deactivateAction(g);var h=g._cacheIndex,k=b[b.length-1];g._cacheIndex=null;g._byClipCacheIndex=null;k._cacheIndex=h;b[h]=k;b.pop();this._removeInactiveBindingsForAction(g)}delete c[a]}},uncacheRoot:function(a){a=a.uuid;var b=this._actionsByClip;for(d in b){var c=b[d].actionByRoot[a];void 0!==c&&(this._deactivateAction(c),this._removeInactiveAction(c))}var d=this._bindingsByRootAndName[a];if(void 0!==d)for(var e in d)a=d[e],a.restoreOriginalState(),this._removeInactiveBinding(a)},\nuncacheAction:function(a,b){a=this.existingAction(a,b);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}});Qd.prototype.clone=function(){return new Qd(void 0===this.value.clone?this.value:this.value.clone())};xe.prototype=Object.assign(Object.create(E.prototype),{constructor:xe,isInstancedBufferGeometry:!0,copy:function(a){E.prototype.copy.call(this,a);this.maxInstancedCount=a.maxInstancedCount;return this},clone:function(){return(new this.constructor).copy(this)}});Object.defineProperties(ye.prototype,\n{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(ye.prototype,{isInterleavedBufferAttribute:!0,setX:function(a,b){this.data.array[a*this.data.stride+this.offset]=b;return this},setY:function(a,b){this.data.array[a*this.data.stride+this.offset+1]=b;return this},setZ:function(a,b){this.data.array[a*this.data.stride+this.offset+2]=b;return this},setW:function(a,b){this.data.array[a*this.data.stride+this.offset+3]=b;return this},getX:function(a){return this.data.array[a*\nthis.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*this.data.stride+this.offset+3]},setXY:function(a,b,c){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;return this},setXYZ:function(a,b,c,d){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;return this},\nsetXYZW:function(a,b,c,d,e){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;this.data.array[a+3]=e;return this}});Object.defineProperty(mc.prototype,\"needsUpdate\",{set:function(a){!0===a&&this.version++}});Object.assign(mc.prototype,{isInterleavedBuffer:!0,setArray:function(a){if(Array.isArray(a))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");this.count=void 0!==a?a.length/this.stride:0;this.array=a},setDynamic:function(a){this.dynamic=\na;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.count=a.count;this.stride=a.stride;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.stride;c*=b.stride;for(var d=0,e=this.stride;d<e;d++)this.array[a+d]=b.array[c+d];return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(a){this.onUploadCallback=a;return this}});ze.prototype=Object.assign(Object.create(mc.prototype),\n{constructor:ze,isInstancedInterleavedBuffer:!0,copy:function(a){mc.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this}});Ae.prototype=Object.assign(Object.create(M.prototype),{constructor:Ae,isInstancedBufferAttribute:!0,copy:function(a){M.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this}});Object.assign(pf.prototype,{linePrecision:1,set:function(a,b){this.ray.set(a,b)},setFromCamera:function(a,b){b&&b.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(b.matrixWorld),\nthis.ray.direction.set(a.x,a.y,.5).unproject(b).sub(this.ray.origin).normalize()):b&&b.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(b.near+b.far)/(b.near-b.far)).unproject(b),this.ray.direction.set(0,0,-1).transformDirection(b.matrixWorld)):console.error(\"THREE.Raycaster: Unsupported camera type.\")},intersectObject:function(a,b){var c=[];Be(a,this,c,b);c.sort(qf);return c},intersectObjects:function(a,b){var c=[];if(!1===Array.isArray(a))return console.warn(\"THREE.Raycaster.intersectObjects: objects is not an Array.\"),\nc;for(var d=0,e=a.length;d<e;d++)Be(a[d],this,c,b);c.sort(qf);return c}});Object.assign(rf.prototype,{start:function(){this.oldTime=this.startTime=(\"undefined\"===typeof performance?Date:performance).now();this.elapsedTime=0;this.running=!0},stop:function(){this.getElapsedTime();this.autoStart=this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var a=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var b=(\"undefined\"===typeof performance?\nDate:performance).now(),a=(b-this.oldTime)/1E3;this.oldTime=b;this.elapsedTime+=a}return a}});Object.assign(sf.prototype,{set:function(a,b,c){this.radius=a;this.phi=b;this.theta=c;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.radius=a.radius;this.phi=a.phi;this.theta=a.theta;return this},makeSafe:function(){this.phi=Math.max(1E-6,Math.min(Math.PI-1E-6,this.phi));return this},setFromVector3:function(a){this.radius=a.length();0===this.radius?this.phi=this.theta=\n0:(this.theta=Math.atan2(a.x,a.z),this.phi=Math.acos(Q.clamp(a.y/this.radius,-1,1)));return this}});Object.assign(tf.prototype,{set:function(a,b,c){this.radius=a;this.theta=b;this.y=c;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.radius=a.radius;this.theta=a.theta;this.y=a.y;return this},setFromVector3:function(a){this.radius=Math.sqrt(a.x*a.x+a.z*a.z);this.theta=Math.atan2(a.x,a.z);this.y=a.y;return this}});gd.prototype=Object.create(x.prototype);gd.prototype.constructor=\ngd;gd.prototype.isImmediateRenderObject=!0;hd.prototype=Object.create(X.prototype);hd.prototype.constructor=hd;hd.prototype.update=function(){var a=new p,b=new p,c=new ma;return function(){var d,e=[\"a\",\"b\",\"c\"];this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);var f=this.object.matrixWorld,g=this.geometry.attributes.position;if((d=this.object.geometry)&&d.isGeometry)for(var h=d.vertices,k=d.faces,l=d=0,p=k.length;l<p;l++)for(var n=k[l],u=0,r=n.vertexNormals.length;u<r;u++){var t=\nn.vertexNormals[u];a.copy(h[n[e[u]]]).applyMatrix4(f);b.copy(t).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);g.setXYZ(d,a.x,a.y,a.z);d+=1;g.setXYZ(d,b.x,b.y,b.z);d+=1}else if(d&&d.isBufferGeometry)for(e=d.attributes.position,h=d.attributes.normal,u=d=0,r=e.count;u<r;u++)a.set(e.getX(u),e.getY(u),e.getZ(u)).applyMatrix4(f),b.set(h.getX(u),h.getY(u),h.getZ(u)),b.applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),g.setXYZ(d,a.x,a.y,a.z),d+=1,g.setXYZ(d,b.x,b.y,b.z),d+=1;g.needsUpdate=\n!0}}();nc.prototype=Object.create(x.prototype);nc.prototype.constructor=nc;nc.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};nc.prototype.update=function(){var a=new p,b=new p;return function(){this.light.updateMatrixWorld();var c=this.light.distance?this.light.distance:1E3,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));\nvoid 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}();oc.prototype=Object.create(X.prototype);oc.prototype.constructor=oc;oc.prototype.updateMatrixWorld=function(){var a=new p,b=new O,c=new O;return function(d){var e=this.bones,f=this.geometry,g=f.getAttribute(\"position\");c.getInverse(this.root.matrixWorld);for(var h=0,k=0;h<e.length;h++){var l=e[h];l.parent&&l.parent.isBone&&(b.multiplyMatrices(c,l.matrixWorld),a.setFromMatrixPosition(b),\ng.setXYZ(k,a.x,a.y,a.z),b.multiplyMatrices(c,l.parent.matrixWorld),a.setFromMatrixPosition(b),g.setXYZ(k+1,a.x,a.y,a.z),k+=2)}f.getAttribute(\"position\").needsUpdate=!0;x.prototype.updateMatrixWorld.call(this,d)}}();pc.prototype=Object.create(ra.prototype);pc.prototype.constructor=pc;pc.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};pc.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};qc.prototype=\nObject.create(x.prototype);qc.prototype.constructor=qc;qc.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};qc.prototype.update=function(){var a=.5*this.light.width,b=.5*this.light.height,c=this.line.geometry.attributes.position,d=c.array;d[0]=a;d[1]=-b;d[2]=0;d[3]=a;d[4]=b;d[5]=0;d[6]=-a;d[7]=b;d[8]=0;d[9]=-a;d[10]=-b;d[11]=0;d[12]=a;d[13]=-b;d[14]=0;c.needsUpdate=!0;void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)};\nrc.prototype=Object.create(x.prototype);rc.prototype.constructor=rc;rc.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};rc.prototype.update=function(){var a=new p,b=new H,c=new H;return function(){var d=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=d.geometry.getAttribute(\"color\");b.copy(this.light.color);c.copy(this.light.groundColor);for(var f=0,g=e.count;f<g;f++){var h=f<g/2?b:c;e.setXYZ(f,h.r,h.g,h.b)}e.needsUpdate=\n!0}d.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate())}}();id.prototype=Object.create(X.prototype);id.prototype.constructor=id;Rd.prototype=Object.create(X.prototype);Rd.prototype.constructor=Rd;jd.prototype=Object.create(X.prototype);jd.prototype.constructor=jd;jd.prototype.update=function(){var a=new p,b=new p,c=new ma;return function(){this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);for(var d=this.object.matrixWorld,e=this.geometry.attributes.position,\nf=this.object.geometry,g=f.vertices,f=f.faces,h=0,k=0,l=f.length;k<l;k++){var p=f[k],n=p.normal;a.copy(g[p.a]).add(g[p.b]).add(g[p.c]).divideScalar(3).applyMatrix4(d);b.copy(n).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);e.setXYZ(h,a.x,a.y,a.z);h+=1;e.setXYZ(h,b.x,b.y,b.z);h+=1}e.needsUpdate=!0}}();sc.prototype=Object.create(x.prototype);sc.prototype.constructor=sc;sc.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();\nthis.targetLine.material.dispose()};sc.prototype.update=function(){var a=new p,b=new p,c=new p;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,a);this.lightPlane.lookAt(c);void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color));this.targetLine.lookAt(c);\nthis.targetLine.scale.z=c.length()}}();kd.prototype=Object.create(X.prototype);kd.prototype.constructor=kd;kd.prototype.update=function(){function a(a,g,h,k){d.set(g,h,k).unproject(e);a=c[a];if(void 0!==a)for(g=b.getAttribute(\"position\"),h=0,k=a.length;h<k;h++)g.setXYZ(a[h],d.x,d.y,d.z)}var b,c,d=new p,e=new Ta;return function(){b=this.geometry;c=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);a(\"c\",0,0,-1);a(\"t\",0,0,1);a(\"n1\",-1,-1,-1);a(\"n2\",1,-1,-1);a(\"n3\",-1,1,-1);a(\"n4\",1,\n1,-1);a(\"f1\",-1,-1,1);a(\"f2\",1,-1,1);a(\"f3\",-1,1,1);a(\"f4\",1,1,1);a(\"u1\",.7,1.1,-1);a(\"u2\",-.7,1.1,-1);a(\"u3\",0,2,-1);a(\"cf1\",-1,0,1);a(\"cf2\",1,0,1);a(\"cf3\",0,-1,1);a(\"cf4\",0,1,1);a(\"cn1\",-1,0,-1);a(\"cn2\",1,0,-1);a(\"cn3\",0,-1,-1);a(\"cn4\",0,1,-1);b.getAttribute(\"position\").needsUpdate=!0}}();Gb.prototype=Object.create(X.prototype);Gb.prototype.constructor=Gb;Gb.prototype.update=function(){var a=new Xa;return function(b){void 0!==b&&console.warn(\"THREE.BoxHelper: .update() has no longer arguments.\");\nvoid 0!==this.object&&a.setFromObject(this.object);if(!a.isEmpty()){b=a.min;var c=a.max,d=this.geometry.attributes.position,e=d.array;e[0]=c.x;e[1]=c.y;e[2]=c.z;e[3]=b.x;e[4]=c.y;e[5]=c.z;e[6]=b.x;e[7]=b.y;e[8]=c.z;e[9]=c.x;e[10]=b.y;e[11]=c.z;e[12]=c.x;e[13]=c.y;e[14]=b.z;e[15]=b.x;e[16]=c.y;e[17]=b.z;e[18]=b.x;e[19]=b.y;e[20]=b.z;e[21]=c.x;e[22]=b.y;e[23]=b.z;d.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();Gb.prototype.setFromObject=function(a){this.object=a;this.update();return this};\nld.prototype=Object.create(X.prototype);ld.prototype.constructor=ld;ld.prototype.updateMatrixWorld=function(a){var b=this.box;b.isEmpty()||(b.getCenter(this.position),b.getSize(this.scale),this.scale.multiplyScalar(.5),x.prototype.updateMatrixWorld.call(this,a))};md.prototype=Object.create(sa.prototype);md.prototype.constructor=md;md.prototype.updateMatrixWorld=function(a){var b=-this.plane.constant;1E-8>Math.abs(b)&&(b=1E-8);this.scale.set(.5*this.size,.5*this.size,b);this.lookAt(this.plane.normal);\nx.prototype.updateMatrixWorld.call(this,a)};var Sd,Ce;Hb.prototype=Object.create(x.prototype);Hb.prototype.constructor=Hb;Hb.prototype.setDirection=function(){var a=new p,b;return function(c){.99999<c.y?this.quaternion.set(0,0,0,1):-.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();Hb.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);this.line.scale.set(1,Math.max(0,a-b),1);this.line.updateMatrix();\nthis.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};Hb.prototype.setColor=function(a){this.line.material.color.copy(a);this.cone.material.color.copy(a)};nd.prototype=Object.create(X.prototype);nd.prototype.constructor=nd;C.create=function(a,b){console.log(\"THREE.Curve.create() has been deprecated\");a.prototype=Object.create(C.prototype);a.prototype.constructor=a;a.prototype.getPoint=b;return a};Object.assign(bb.prototype,{createPointsGeometry:function(a){console.warn(\"THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.\");\na=this.getPoints(a);return this.createGeometry(a)},createSpacedPointsGeometry:function(a){console.warn(\"THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.\");a=this.getSpacedPoints(a);return this.createGeometry(a)},createGeometry:function(a){console.warn(\"THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.\");for(var b=new L,c=0,d=a.length;c<d;c++){var e=a[c];b.vertices.push(new p(e.x,\ne.y,e.z||0))}return b}});Object.assign(Sa.prototype,{fromPoints:function(a){console.warn(\"THREE.Path: .fromPoints() has been renamed to .setFromPoints().\");this.setFromPoints(a)}});vf.prototype=Object.create(ca.prototype);wf.prototype=Object.create(ca.prototype);De.prototype=Object.create(ca.prototype);Object.assign(De.prototype,{initFromArray:function(){console.error(\"THREE.Spline: .initFromArray() has been removed.\")},getControlPointsArray:function(){console.error(\"THREE.Spline: .getControlPointsArray() has been removed.\")},\nreparametrizeByArcLength:function(){console.error(\"THREE.Spline: .reparametrizeByArcLength() has been removed.\")}});id.prototype.setColors=function(){console.error(\"THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.\")};oc.prototype.update=function(){console.error(\"THREE.SkeletonHelper: update() no longer needs to be called.\")};Object.assign(kc.prototype,{extractUrlBase:function(a){console.warn(\"THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.\");\nreturn He.extractUrlBase(a)}});Object.assign(od.prototype,{center:function(a){console.warn(\"THREE.Box2: .center() has been renamed to .getCenter().\");return this.getCenter(a)},empty:function(){console.warn(\"THREE.Box2: .empty() has been renamed to .isEmpty().\");return this.isEmpty()},isIntersectionBox:function(a){console.warn(\"THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().\");return this.intersectsBox(a)},size:function(a){console.warn(\"THREE.Box2: .size() has been renamed to .getSize().\");\nreturn this.getSize(a)}});Object.assign(Xa.prototype,{center:function(a){console.warn(\"THREE.Box3: .center() has been renamed to .getCenter().\");return this.getCenter(a)},empty:function(){console.warn(\"THREE.Box3: .empty() has been renamed to .isEmpty().\");return this.isEmpty()},isIntersectionBox:function(a){console.warn(\"THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().\");return this.intersectsBox(a)},isIntersectionSphere:function(a){console.warn(\"THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().\");\nreturn this.intersectsSphere(a)},size:function(a){console.warn(\"THREE.Box3: .size() has been renamed to .getSize().\");return this.getSize(a)}});Nb.prototype.center=function(a){console.warn(\"THREE.Line3: .center() has been renamed to .getCenter().\");return this.getCenter(a)};Object.assign(Q,{random16:function(){console.warn(\"THREE.Math: .random16() has been deprecated. Use Math.random() instead.\");return Math.random()},nearestPowerOfTwo:function(a){console.warn(\"THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().\");\nreturn Q.floorPowerOfTwo(a)},nextPowerOfTwo:function(a){console.warn(\"THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().\");return Q.ceilPowerOfTwo(a)}});Object.assign(ma.prototype,{flattenToArrayOffset:function(a,b){console.warn(\"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\");return this.toArray(a,b)},multiplyVector3:function(a){console.warn(\"THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.\");return a.applyMatrix3(this)},\nmultiplyVector3Array:function(){console.error(\"THREE.Matrix3: .multiplyVector3Array() has been removed.\")},applyToBuffer:function(a){console.warn(\"THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.\");return this.applyToBufferAttribute(a)},applyToVector3Array:function(){console.error(\"THREE.Matrix3: .applyToVector3Array() has been removed.\")}});Object.assign(O.prototype,{extractPosition:function(a){console.warn(\"THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().\");\nreturn this.copyPosition(a)},flattenToArrayOffset:function(a,b){console.warn(\"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\");return this.toArray(a,b)},getPosition:function(){var a;return function(){void 0===a&&(a=new p);console.warn(\"THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.\");return a.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(a){console.warn(\"THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().\");\nreturn this.makeRotationFromQuaternion(a)},multiplyToArray:function(){console.warn(\"THREE.Matrix4: .multiplyToArray() has been removed.\")},multiplyVector3:function(a){console.warn(\"THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.\");return a.applyMatrix4(this)},multiplyVector4:function(a){console.warn(\"THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.\");return a.applyMatrix4(this)},multiplyVector3Array:function(){console.error(\"THREE.Matrix4: .multiplyVector3Array() has been removed.\")},\nrotateAxis:function(a){console.warn(\"THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.\");a.transformDirection(this)},crossVector:function(a){console.warn(\"THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.\");return a.applyMatrix4(this)},translate:function(){console.error(\"THREE.Matrix4: .translate() has been removed.\")},rotateX:function(){console.error(\"THREE.Matrix4: .rotateX() has been removed.\")},rotateY:function(){console.error(\"THREE.Matrix4: .rotateY() has been removed.\")},\nrotateZ:function(){console.error(\"THREE.Matrix4: .rotateZ() has been removed.\")},rotateByAxis:function(){console.error(\"THREE.Matrix4: .rotateByAxis() has been removed.\")},applyToBuffer:function(a){console.warn(\"THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.\");return this.applyToBufferAttribute(a)},applyToVector3Array:function(){console.error(\"THREE.Matrix4: .applyToVector3Array() has been removed.\")},makeFrustum:function(a,b,c,d,e,f){console.warn(\"THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.\");\nreturn this.makePerspective(a,b,d,c,e,f)}});Ea.prototype.isIntersectionLine=function(a){console.warn(\"THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().\");return this.intersectsLine(a)};ha.prototype.multiplyVector3=function(a){console.warn(\"THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.\");return a.applyQuaternion(this)};Object.assign(sb.prototype,{isIntersectionBox:function(a){console.warn(\"THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().\");\nreturn this.intersectsBox(a)},isIntersectionPlane:function(a){console.warn(\"THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().\");return this.intersectsPlane(a)},isIntersectionSphere:function(a){console.warn(\"THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().\");return this.intersectsSphere(a)}});Object.assign(jb.prototype,{extractAllPoints:function(a){console.warn(\"THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.\");return this.extractPoints(a)},\nextrude:function(a){console.warn(\"THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.\");return new ib(this,a)},makeGeometry:function(a){console.warn(\"THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.\");return new xb(this,a)}});Object.assign(D.prototype,{fromAttribute:function(a,b,c){console.warn(\"THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().\");return this.fromBufferAttribute(a,b,c)},distanceToManhattan:function(a){console.warn(\"THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().\");\nreturn this.manhattanDistanceTo(a)},lengthManhattan:function(){console.warn(\"THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().\");return this.manhattanLength()}});Object.assign(p.prototype,{setEulerFromRotationMatrix:function(){console.error(\"THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.\")},setEulerFromQuaternion:function(){console.error(\"THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.\")},\ngetPositionFromMatrix:function(a){console.warn(\"THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().\");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn(\"THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().\");return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){console.warn(\"THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().\");return this.setFromMatrixColumn(b,\na)},applyProjection:function(a){console.warn(\"THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.\");return this.applyMatrix4(a)},fromAttribute:function(a,b,c){console.warn(\"THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().\");return this.fromBufferAttribute(a,b,c)},distanceToManhattan:function(a){console.warn(\"THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().\");return this.manhattanDistanceTo(a)},lengthManhattan:function(){console.warn(\"THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().\");\nreturn this.manhattanLength()}});Object.assign(aa.prototype,{fromAttribute:function(a,b,c){console.warn(\"THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().\");return this.fromBufferAttribute(a,b,c)},lengthManhattan:function(){console.warn(\"THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().\");return this.manhattanLength()}});L.prototype.computeTangents=function(){console.warn(\"THREE.Geometry: .computeTangents() has been removed.\")};Object.assign(x.prototype,\n{getChildByName:function(a){console.warn(\"THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().\");return this.getObjectByName(a)},renderDepth:function(){console.warn(\"THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.\")},translate:function(a,b){console.warn(\"THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.\");return this.translateOnAxis(b,a)}});Object.defineProperties(x.prototype,{eulerOrder:{get:function(){console.warn(\"THREE.Object3D: .eulerOrder is now .rotation.order.\");\nreturn this.rotation.order},set:function(a){console.warn(\"THREE.Object3D: .eulerOrder is now .rotation.order.\");this.rotation.order=a}},useQuaternion:{get:function(){console.warn(\"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.\")},set:function(){console.warn(\"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.\")}}});Object.defineProperties(Dc.prototype,{objects:{get:function(){console.warn(\"THREE.LOD: .objects has been renamed to .levels.\");\nreturn this.levels}}});Object.defineProperty(Ec.prototype,\"useVertexTexture\",{get:function(){console.warn(\"THREE.Skeleton: useVertexTexture has been removed.\")},set:function(){console.warn(\"THREE.Skeleton: useVertexTexture has been removed.\")}});Object.defineProperty(C.prototype,\"__arcLengthDivisions\",{get:function(){console.warn(\"THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.\");return this.arcLengthDivisions},set:function(a){console.warn(\"THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.\");\nthis.arcLengthDivisions=a}});ba.prototype.setLens=function(a,b){console.warn(\"THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.\");void 0!==b&&(this.filmGauge=b);this.setFocalLength(a)};Object.defineProperties(da.prototype,{onlyShadow:{set:function(){console.warn(\"THREE.Light: .onlyShadow has been removed.\")}},shadowCameraFov:{set:function(a){console.warn(\"THREE.Light: .shadowCameraFov is now .shadow.camera.fov.\");this.shadow.camera.fov=a}},\nshadowCameraLeft:{set:function(a){console.warn(\"THREE.Light: .shadowCameraLeft is now .shadow.camera.left.\");this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn(\"THREE.Light: .shadowCameraRight is now .shadow.camera.right.\");this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn(\"THREE.Light: .shadowCameraTop is now .shadow.camera.top.\");this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn(\"THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.\");\nthis.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn(\"THREE.Light: .shadowCameraNear is now .shadow.camera.near.\");this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn(\"THREE.Light: .shadowCameraFar is now .shadow.camera.far.\");this.shadow.camera.far=a}},shadowCameraVisible:{set:function(){console.warn(\"THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.\")}},shadowBias:{set:function(a){console.warn(\"THREE.Light: .shadowBias is now .shadow.bias.\");\nthis.shadow.bias=a}},shadowDarkness:{set:function(){console.warn(\"THREE.Light: .shadowDarkness has been removed.\")}},shadowMapWidth:{set:function(a){console.warn(\"THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.\");this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn(\"THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.\");this.shadow.mapSize.height=a}}});Object.defineProperties(M.prototype,{length:{get:function(){console.warn(\"THREE.BufferAttribute: .length has been deprecated. Use .count instead.\");\nreturn this.array.length}}});Object.assign(E.prototype,{addIndex:function(a){console.warn(\"THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().\");this.setIndex(a)},addDrawCall:function(a,b,c){void 0!==c&&console.warn(\"THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.\");console.warn(\"THREE.BufferGeometry: .addDrawCall() is now .addGroup().\");this.addGroup(a,b)},clearDrawCalls:function(){console.warn(\"THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().\");\nthis.clearGroups()},computeTangents:function(){console.warn(\"THREE.BufferGeometry: .computeTangents() has been removed.\")},computeOffsets:function(){console.warn(\"THREE.BufferGeometry: .computeOffsets() has been removed.\")}});Object.defineProperties(E.prototype,{drawcalls:{get:function(){console.error(\"THREE.BufferGeometry: .drawcalls has been renamed to .groups.\");return this.groups}},offsets:{get:function(){console.warn(\"THREE.BufferGeometry: .offsets has been renamed to .groups.\");return this.groups}}});\nObject.defineProperties(Qd.prototype,{dynamic:{set:function(){console.warn(\"THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.\")}},onUpdate:{value:function(){console.warn(\"THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.\");return this}}});Object.defineProperties(P.prototype,{wrapAround:{get:function(){console.warn(\"THREE.Material: .wrapAround has been removed.\")},set:function(){console.warn(\"THREE.Material: .wrapAround has been removed.\")}},\nwrapRGB:{get:function(){console.warn(\"THREE.Material: .wrapRGB has been removed.\");return new H}},shading:{get:function(){console.error(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\")},set:function(a){console.warn(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\");this.flatShading=1===a}}});Object.defineProperties(Ma.prototype,{metal:{get:function(){console.warn(\"THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.\");\nreturn!1},set:function(){console.warn(\"THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead\")}}});Object.defineProperties(Fa.prototype,{derivatives:{get:function(){console.warn(\"THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.\");return this.extensions.derivatives},set:function(a){console.warn(\"THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.\");this.extensions.derivatives=a}}});Object.assign(ce.prototype,\n{getCurrentRenderTarget:function(){console.warn(\"THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().\");return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn(\"THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().\");return this.capabilities.getMaxAnisotropy()},getPrecision:function(){console.warn(\"THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.\");return this.capabilities.precision},resetGLState:function(){console.warn(\"THREE.WebGLRenderer: .resetGLState() is now .state.reset().\");\nreturn this.state.reset()},supportsFloatTextures:function(){console.warn(\"THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).\");return this.extensions.get(\"OES_texture_float\")},supportsHalfFloatTextures:function(){console.warn(\"THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).\");return this.extensions.get(\"OES_texture_half_float\")},supportsStandardDerivatives:function(){console.warn(\"THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).\");\nreturn this.extensions.get(\"OES_standard_derivatives\")},supportsCompressedTextureS3TC:function(){console.warn(\"THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).\");return this.extensions.get(\"WEBGL_compressed_texture_s3tc\")},supportsCompressedTexturePVRTC:function(){console.warn(\"THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).\");return this.extensions.get(\"WEBGL_compressed_texture_pvrtc\")},\nsupportsBlendMinMax:function(){console.warn(\"THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).\");return this.extensions.get(\"EXT_blend_minmax\")},supportsVertexTextures:function(){console.warn(\"THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.\");return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn(\"THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).\");\nreturn this.extensions.get(\"ANGLE_instanced_arrays\")},enableScissorTest:function(a){console.warn(\"THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().\");this.setScissorTest(a)},initMaterial:function(){console.warn(\"THREE.WebGLRenderer: .initMaterial() has been removed.\")},addPrePlugin:function(){console.warn(\"THREE.WebGLRenderer: .addPrePlugin() has been removed.\")},addPostPlugin:function(){console.warn(\"THREE.WebGLRenderer: .addPostPlugin() has been removed.\")},updateShadowMap:function(){console.warn(\"THREE.WebGLRenderer: .updateShadowMap() has been removed.\")}});\nObject.defineProperties(ce.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn(\"THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.\");this.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(a){console.warn(\"THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.\");this.shadowMap.type=a}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(a){console.warn(\"THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.\");\nthis.shadowMap.cullFace=a}}});Object.defineProperties(Ue.prototype,{cullFace:{get:function(){return this.renderReverseSided?2:1},set:function(a){a=1!==a;console.warn(\"WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to \"+a+\".\");this.renderReverseSided=a}}});Object.defineProperties(kb.prototype,{wrapS:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.\");return this.texture.wrapS},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.\");\nthis.texture.wrapS=a}},wrapT:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.\");return this.texture.wrapT},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.\");this.texture.wrapT=a}},magFilter:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.\");return this.texture.magFilter},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.\");this.texture.magFilter=\na}},minFilter:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.\");return this.texture.minFilter},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.\");this.texture.minFilter=a}},anisotropy:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.\");return this.texture.anisotropy},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.\");this.texture.anisotropy=\na}},offset:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .offset is now .texture.offset.\");return this.texture.offset},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .offset is now .texture.offset.\");this.texture.offset=a}},repeat:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.\");return this.texture.repeat},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.\");this.texture.repeat=a}},format:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .format is now .texture.format.\");\nreturn this.texture.format},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .format is now .texture.format.\");this.texture.format=a}},type:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .type is now .texture.type.\");return this.texture.type},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .type is now .texture.type.\");this.texture.type=a}},generateMipmaps:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.\");return this.texture.generateMipmaps},\nset:function(a){console.warn(\"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.\");this.texture.generateMipmaps=a}}});Object.assign(be.prototype,{getStandingMatrix:function(){console.warn(\"THREE.WebVRManager: .getStandingMatrix() has been removed.\")}});Object.defineProperties(be.prototype,{standing:{set:function(){console.warn(\"THREE.WebVRManager: .standing has been removed.\")}}});lc.prototype.load=function(a){console.warn(\"THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.\");\nvar b=this;(new qe).load(a,function(a){b.setBuffer(a)});return this};ue.prototype.getData=function(){console.warn(\"THREE.AudioAnalyser: .getData() is now .getFrequencyData().\");return this.getFrequencyData()};fd.prototype.updateCubeMap=function(a,b){console.warn(\"THREE.CubeCamera: .updateCubeMap() is now .update().\");return this.update(a,b)};l.WebGLRenderTargetCube=Jb;l.WebGLRenderTarget=kb;l.WebGLRenderer=ce;l.ShaderLib=tb;l.UniformsLib=K;l.UniformsUtils=Ga;l.ShaderChunk=R;l.FogExp2=Pb;l.Fog=Qb;\nl.Scene=vd;l.LensFlare=de;l.Sprite=Cc;l.LOD=Dc;l.SkinnedMesh=xd;l.Skeleton=Ec;l.Bone=wd;l.Mesh=ra;l.LineSegments=X;l.LineLoop=yd;l.Line=sa;l.Points=Rb;l.Group=Fc;l.VideoTexture=ee;l.DataTexture=lb;l.CompressedTexture=Sb;l.CubeTexture=db;l.CanvasTexture=tc;l.DepthTexture=Gc;l.Texture=U;l.CompressedTextureLoader=gf;l.DataTextureLoader=ie;l.CubeTextureLoader=je;l.TextureLoader=Ad;l.ObjectLoader=jf;l.MaterialLoader=Pd;l.BufferGeometryLoader=le;l.DefaultLoadingManager=xa;l.LoadingManager=he;l.JSONLoader=\nme;l.ImageLoader=ad;l.ImageBitmapLoader=ne;l.FontLoader=kf;l.FileLoader=Na;l.Loader=kc;l.LoaderUtils=He;l.Cache=Ib;l.AudioLoader=qe;l.SpotLightShadow=Cd;l.SpotLight=Dd;l.PointLight=Ed;l.RectAreaLight=Id;l.HemisphereLight=Bd;l.DirectionalLightShadow=Fd;l.DirectionalLight=Gd;l.AmbientLight=Hd;l.LightShadow=Fb;l.Light=da;l.StereoCamera=lf;l.PerspectiveCamera=ba;l.OrthographicCamera=Lb;l.CubeCamera=fd;l.ArrayCamera=ud;l.Camera=Ta;l.AudioListener=re;l.PositionalAudio=te;l.AudioContext=se;l.AudioAnalyser=\nue;l.Audio=lc;l.VectorKeyframeTrack=jc;l.StringKeyframeTrack=Jd;l.QuaternionKeyframeTrack=dd;l.NumberKeyframeTrack=ic;l.ColorKeyframeTrack=Md;l.BooleanKeyframeTrack=Kd;l.PropertyMixer=ve;l.PropertyBinding=qa;l.KeyframeTrack=T;l.AnimationUtils=ga;l.AnimationObjectGroup=nf;l.AnimationMixer=we;l.AnimationClip=Ca;l.Uniform=Qd;l.InstancedBufferGeometry=xe;l.BufferGeometry=E;l.Geometry=L;l.InterleavedBufferAttribute=ye;l.InstancedInterleavedBuffer=ze;l.InterleavedBuffer=mc;l.InstancedBufferAttribute=Ae;\nl.Face3=Ya;l.Object3D=x;l.Raycaster=pf;l.Layers=Wd;l.EventDispatcher=za;l.Clock=rf;l.QuaternionLinearInterpolant=Ld;l.LinearInterpolant=ed;l.DiscreteInterpolant=Od;l.CubicInterpolant=Nd;l.Interpolant=pa;l.Triangle=Za;l.Math=Q;l.Spherical=sf;l.Cylindrical=tf;l.Plane=Ea;l.Frustum=rd;l.Sphere=Ia;l.Ray=sb;l.Matrix4=O;l.Matrix3=ma;l.Box3=Xa;l.Box2=od;l.Line3=Nb;l.Euler=gb;l.Vector4=aa;l.Vector3=p;l.Vector2=D;l.Quaternion=ha;l.Color=H;l.ImmediateRenderObject=gd;l.VertexNormalsHelper=hd;l.SpotLightHelper=\nnc;l.SkeletonHelper=oc;l.PointLightHelper=pc;l.RectAreaLightHelper=qc;l.HemisphereLightHelper=rc;l.GridHelper=id;l.PolarGridHelper=Rd;l.FaceNormalsHelper=jd;l.DirectionalLightHelper=sc;l.CameraHelper=kd;l.BoxHelper=Gb;l.Box3Helper=ld;l.PlaneHelper=md;l.ArrowHelper=Hb;l.AxesHelper=nd;l.Shape=jb;l.Path=Sa;l.ShapePath=oe;l.Font=pe;l.CurvePath=bb;l.Curve=C;l.ShapeUtils=$a;l.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new Fc,d=0,e=b.length;d<e;d++)c.add(new ra(a,b[d]));return c},detach:function(a,\nb,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)},attach:function(a,b,c){a.applyMatrix((new O).getInverse(c.matrixWorld));b.remove(a);c.add(a)}};l.WebGLUtils=af;l.WireframeGeometry=Tb;l.ParametricGeometry=Hc;l.ParametricBufferGeometry=Ub;l.TetrahedronGeometry=Jc;l.TetrahedronBufferGeometry=Vb;l.OctahedronGeometry=Kc;l.OctahedronBufferGeometry=ub;l.IcosahedronGeometry=Lc;l.IcosahedronBufferGeometry=Wb;l.DodecahedronGeometry=Mc;l.DodecahedronBufferGeometry=Xb;l.PolyhedronGeometry=Ic;l.PolyhedronBufferGeometry=\nja;l.TubeGeometry=Nc;l.TubeBufferGeometry=Yb;l.TorusKnotGeometry=Oc;l.TorusKnotBufferGeometry=Zb;l.TorusGeometry=Pc;l.TorusBufferGeometry=$b;l.TextGeometry=Uc;l.TextBufferGeometry=ac;l.SphereGeometry=Vc;l.SphereBufferGeometry=wb;l.RingGeometry=Wc;l.RingBufferGeometry=bc;l.PlaneGeometry=Ac;l.PlaneBufferGeometry=rb;l.LatheGeometry=Xc;l.LatheBufferGeometry=cc;l.ShapeGeometry=xb;l.ShapeBufferGeometry=yb;l.ExtrudeGeometry=ib;l.ExtrudeBufferGeometry=La;l.EdgesGeometry=dc;l.ConeGeometry=Yc;l.ConeBufferGeometry=\nZc;l.CylinderGeometry=zb;l.CylinderBufferGeometry=ab;l.CircleGeometry=$c;l.CircleBufferGeometry=ec;l.BoxGeometry=Mb;l.BoxBufferGeometry=qb;l.ShadowMaterial=fc;l.SpriteMaterial=hb;l.RawShaderMaterial=gc;l.ShaderMaterial=Fa;l.PointsMaterial=Ka;l.MeshPhysicalMaterial=Ab;l.MeshStandardMaterial=Ua;l.MeshPhongMaterial=Ma;l.MeshToonMaterial=Bb;l.MeshNormalMaterial=Cb;l.MeshLambertMaterial=Db;l.MeshDepthMaterial=eb;l.MeshDistanceMaterial=fb;l.MeshBasicMaterial=Aa;l.LineDashedMaterial=Eb;l.LineBasicMaterial=\nW;l.Material=P;l.Float64BufferAttribute=zc;l.Float32BufferAttribute=B;l.Uint32BufferAttribute=pb;l.Int32BufferAttribute=yc;l.Uint16BufferAttribute=ob;l.Int16BufferAttribute=xc;l.Uint8ClampedBufferAttribute=wc;l.Uint8BufferAttribute=vc;l.Int8BufferAttribute=uc;l.BufferAttribute=M;l.ArcCurve=hc;l.CatmullRomCurve3=ca;l.CubicBezierCurve=Oa;l.CubicBezierCurve3=Va;l.EllipseCurve=Ba;l.LineCurve=ya;l.LineCurve3=Pa;l.QuadraticBezierCurve=Qa;l.QuadraticBezierCurve3=Wa;l.SplineCurve=Ra;l.REVISION=\"89\";l.MOUSE=\n{LEFT:0,MIDDLE:1,RIGHT:2};l.CullFaceNone=0;l.CullFaceBack=1;l.CullFaceFront=2;l.CullFaceFrontBack=3;l.FrontFaceDirectionCW=0;l.FrontFaceDirectionCCW=1;l.BasicShadowMap=0;l.PCFShadowMap=1;l.PCFSoftShadowMap=2;l.FrontSide=0;l.BackSide=1;l.DoubleSide=2;l.FlatShading=1;l.SmoothShading=2;l.NoColors=0;l.FaceColors=1;l.VertexColors=2;l.NoBlending=0;l.NormalBlending=1;l.AdditiveBlending=2;l.SubtractiveBlending=3;l.MultiplyBlending=4;l.CustomBlending=5;l.AddEquation=100;l.SubtractEquation=101;l.ReverseSubtractEquation=\n102;l.MinEquation=103;l.MaxEquation=104;l.ZeroFactor=200;l.OneFactor=201;l.SrcColorFactor=202;l.OneMinusSrcColorFactor=203;l.SrcAlphaFactor=204;l.OneMinusSrcAlphaFactor=205;l.DstAlphaFactor=206;l.OneMinusDstAlphaFactor=207;l.DstColorFactor=208;l.OneMinusDstColorFactor=209;l.SrcAlphaSaturateFactor=210;l.NeverDepth=0;l.AlwaysDepth=1;l.LessDepth=2;l.LessEqualDepth=3;l.EqualDepth=4;l.GreaterEqualDepth=5;l.GreaterDepth=6;l.NotEqualDepth=7;l.MultiplyOperation=0;l.MixOperation=1;l.AddOperation=2;l.NoToneMapping=\n0;l.LinearToneMapping=1;l.ReinhardToneMapping=2;l.Uncharted2ToneMapping=3;l.CineonToneMapping=4;l.UVMapping=300;l.CubeReflectionMapping=301;l.CubeRefractionMapping=302;l.EquirectangularReflectionMapping=303;l.EquirectangularRefractionMapping=304;l.SphericalReflectionMapping=305;l.CubeUVReflectionMapping=306;l.CubeUVRefractionMapping=307;l.RepeatWrapping=1E3;l.ClampToEdgeWrapping=1001;l.MirroredRepeatWrapping=1002;l.NearestFilter=1003;l.NearestMipMapNearestFilter=1004;l.NearestMipMapLinearFilter=1005;\nl.LinearFilter=1006;l.LinearMipMapNearestFilter=1007;l.LinearMipMapLinearFilter=1008;l.UnsignedByteType=1009;l.ByteType=1010;l.ShortType=1011;l.UnsignedShortType=1012;l.IntType=1013;l.UnsignedIntType=1014;l.FloatType=1015;l.HalfFloatType=1016;l.UnsignedShort4444Type=1017;l.UnsignedShort5551Type=1018;l.UnsignedShort565Type=1019;l.UnsignedInt248Type=1020;l.AlphaFormat=1021;l.RGBFormat=1022;l.RGBAFormat=1023;l.LuminanceFormat=1024;l.LuminanceAlphaFormat=1025;l.RGBEFormat=1023;l.DepthFormat=1026;l.DepthStencilFormat=\n1027;l.RGB_S3TC_DXT1_Format=2001;l.RGBA_S3TC_DXT1_Format=2002;l.RGBA_S3TC_DXT3_Format=2003;l.RGBA_S3TC_DXT5_Format=2004;l.RGB_PVRTC_4BPPV1_Format=2100;l.RGB_PVRTC_2BPPV1_Format=2101;l.RGBA_PVRTC_4BPPV1_Format=2102;l.RGBA_PVRTC_2BPPV1_Format=2103;l.RGB_ETC1_Format=2151;l.LoopOnce=2200;l.LoopRepeat=2201;l.LoopPingPong=2202;l.InterpolateDiscrete=2300;l.InterpolateLinear=2301;l.InterpolateSmooth=2302;l.ZeroCurvatureEnding=2400;l.ZeroSlopeEnding=2401;l.WrapAroundEnding=2402;l.TrianglesDrawMode=0;l.TriangleStripDrawMode=\n1;l.TriangleFanDrawMode=2;l.LinearEncoding=3E3;l.sRGBEncoding=3001;l.GammaEncoding=3007;l.RGBEEncoding=3002;l.LogLuvEncoding=3003;l.RGBM7Encoding=3004;l.RGBM16Encoding=3005;l.RGBDEncoding=3006;l.BasicDepthPacking=3200;l.RGBADepthPacking=3201;l.CubeGeometry=Mb;l.Face4=function(a,b,c,d,e,f,g){console.warn(\"THREE.Face4 has been removed. A THREE.Face3 will be created instead.\");return new Ya(a,b,c,e,f,g)};l.LineStrip=0;l.LinePieces=1;l.MeshFaceMaterial=function(a){console.warn(\"THREE.MeshFaceMaterial has been removed. Use an Array instead.\");\nreturn a};l.MultiMaterial=function(a){void 0===a&&(a=[]);console.warn(\"THREE.MultiMaterial has been removed. Use an Array instead.\");a.isMultiMaterial=!0;a.materials=a;a.clone=function(){return a.slice()};return a};l.PointCloud=function(a,b){console.warn(\"THREE.PointCloud has been renamed to THREE.Points.\");return new Rb(a,b)};l.Particle=function(a){console.warn(\"THREE.Particle has been renamed to THREE.Sprite.\");return new Cc(a)};l.ParticleSystem=function(a,b){console.warn(\"THREE.ParticleSystem has been renamed to THREE.Points.\");\nreturn new Rb(a,b)};l.PointCloudMaterial=function(a){console.warn(\"THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.\");return new Ka(a)};l.ParticleBasicMaterial=function(a){console.warn(\"THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.\");return new Ka(a)};l.ParticleSystemMaterial=function(a){console.warn(\"THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.\");return new Ka(a)};l.Vertex=function(a,b,c){console.warn(\"THREE.Vertex has been removed. Use THREE.Vector3 instead.\");\nreturn new p(a,b,c)};l.DynamicBufferAttribute=function(a,b){console.warn(\"THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.\");return(new M(a,b)).setDynamic(!0)};l.Int8Attribute=function(a,b){console.warn(\"THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.\");return new uc(a,b)};l.Uint8Attribute=function(a,b){console.warn(\"THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.\");return new vc(a,\nb)};l.Uint8ClampedAttribute=function(a,b){console.warn(\"THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.\");return new wc(a,b)};l.Int16Attribute=function(a,b){console.warn(\"THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.\");return new xc(a,b)};l.Uint16Attribute=function(a,b){console.warn(\"THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.\");return new ob(a,b)};l.Int32Attribute=\nfunction(a,b){console.warn(\"THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.\");return new yc(a,b)};l.Uint32Attribute=function(a,b){console.warn(\"THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.\");return new pb(a,b)};l.Float32Attribute=function(a,b){console.warn(\"THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.\");return new B(a,b)};l.Float64Attribute=function(a,b){console.warn(\"THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.\");\nreturn new zc(a,b)};l.ClosedSplineCurve3=vf;l.SplineCurve3=wf;l.Spline=De;l.AxisHelper=function(a){console.warn(\"THREE.AxisHelper has been renamed to THREE.AxesHelper.\");return new nd(a)};l.BoundingBoxHelper=function(a,b){console.warn(\"THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.\");return new Gb(a,b)};l.EdgesHelper=function(a,b){console.warn(\"THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.\");return new X(new dc(a.geometry),new W({color:void 0!==\nb?b:16777215}))};l.WireframeHelper=function(a,b){console.warn(\"THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.\");return new X(new Tb(a.geometry),new W({color:void 0!==b?b:16777215}))};l.XHRLoader=function(a){console.warn(\"THREE.XHRLoader has been renamed to THREE.FileLoader.\");return new Na(a)};l.BinaryTextureLoader=function(a){console.warn(\"THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.\");return new ie(a)};l.GeometryUtils={merge:function(a,b,c){console.warn(\"THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.\");\nif(b.isMesh){b.matrixAutoUpdate&&b.updateMatrix();var d=b.matrix;b=b.geometry}a.merge(b,d,c)},center:function(a){console.warn(\"THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.\");return a.center()}};l.ImageUtils={crossOrigin:void 0,loadTexture:function(a,b,c,d){console.warn(\"THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.\");var e=new Ad;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a},\nloadTextureCube:function(a,b,c,d){console.warn(\"THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.\");var e=new je;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a},loadCompressedTexture:function(){console.error(\"THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.\")},loadCompressedTextureCube:function(){console.error(\"THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.\")}};\nl.Projector=function(){console.error(\"THREE.Projector has been moved to /examples/js/renderers/Projector.js.\");this.projectVector=function(a,b){console.warn(\"THREE.Projector: .projectVector() is now vector.project().\");a.project(b)};this.unprojectVector=function(a,b){console.warn(\"THREE.Projector: .unprojectVector() is now vector.unproject().\");a.unproject(b)};this.pickingRay=function(){console.error(\"THREE.Projector: .pickingRay() is now raycaster.setFromCamera().\")}};l.CanvasRenderer=function(){console.error(\"THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js\");\nthis.domElement=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}};Object.defineProperty(l,\"__esModule\",{value:!0})});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdGhyZWUvYnVpbGQvdGhyZWUubWluLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUlMvLi9ub2RlX21vZHVsZXMvdGhyZWUvYnVpbGQvdGhyZWUubWluLmpzPzMwYjYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdGhyZWVqcy5vcmcvbGljZW5zZVxuKGZ1bmN0aW9uKGwsemEpe1wib2JqZWN0XCI9PT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBtb2R1bGU/emEoZXhwb3J0cyk6XCJmdW5jdGlvblwiPT09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wiZXhwb3J0c1wiXSx6YSk6emEobC5USFJFRT17fSl9KSh0aGlzLGZ1bmN0aW9uKGwpe2Z1bmN0aW9uIHphKCl7fWZ1bmN0aW9uIEQoYSxiKXt0aGlzLng9YXx8MDt0aGlzLnk9Ynx8MH1mdW5jdGlvbiBPKCl7dGhpcy5lbGVtZW50cz1bMSwwLDAsMCwwLDEsMCwwLDAsMCwxLDAsMCwwLDAsMV07MDxhcmd1bWVudHMubGVuZ3RoJiZjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogdGhlIGNvbnN0cnVjdG9yIG5vIGxvbmdlciByZWFkcyBhcmd1bWVudHMuIHVzZSAuc2V0KCkgaW5zdGVhZC5cIil9ZnVuY3Rpb24gaGEoYSxiLGMsZCl7dGhpcy5feD1hfHwwO3RoaXMuX3k9Ynx8MDt0aGlzLl96PWN8fDA7dGhpcy5fdz12b2lkIDAhPT1kP2Q6MX1mdW5jdGlvbiBwKGEsXG5iLGMpe3RoaXMueD1hfHwwO3RoaXMueT1ifHwwO3RoaXMuej1jfHwwfWZ1bmN0aW9uIG1hKCl7dGhpcy5lbGVtZW50cz1bMSwwLDAsMCwxLDAsMCwwLDFdOzA8YXJndW1lbnRzLmxlbmd0aCYmY29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDM6IHRoZSBjb25zdHJ1Y3RvciBubyBsb25nZXIgcmVhZHMgYXJndW1lbnRzLiB1c2UgLnNldCgpIGluc3RlYWQuXCIpfWZ1bmN0aW9uIFUoYSxiLGMsZCxlLGYsZyxoLGssbSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpZFwiLHt2YWx1ZTpBZisrfSk7dGhpcy51dWlkPVEuZ2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPVwiXCI7dGhpcy5pbWFnZT12b2lkIDAhPT1hP2E6VS5ERUZBVUxUX0lNQUdFO3RoaXMubWlwbWFwcz1bXTt0aGlzLm1hcHBpbmc9dm9pZCAwIT09Yj9iOlUuREVGQVVMVF9NQVBQSU5HO3RoaXMud3JhcFM9dm9pZCAwIT09Yz9jOjEwMDE7dGhpcy53cmFwVD12b2lkIDAhPT1kP2Q6MTAwMTt0aGlzLm1hZ0ZpbHRlcj12b2lkIDAhPT1cbmU/ZToxMDA2O3RoaXMubWluRmlsdGVyPXZvaWQgMCE9PWY/ZjoxMDA4O3RoaXMuYW5pc290cm9weT12b2lkIDAhPT1rP2s6MTt0aGlzLmZvcm1hdD12b2lkIDAhPT1nP2c6MTAyMzt0aGlzLnR5cGU9dm9pZCAwIT09aD9oOjEwMDk7dGhpcy5vZmZzZXQ9bmV3IEQoMCwwKTt0aGlzLnJlcGVhdD1uZXcgRCgxLDEpO3RoaXMuY2VudGVyPW5ldyBEKDAsMCk7dGhpcy5yb3RhdGlvbj0wO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMDt0aGlzLm1hdHJpeD1uZXcgbWE7dGhpcy5nZW5lcmF0ZU1pcG1hcHM9ITA7dGhpcy5wcmVtdWx0aXBseUFscGhhPSExO3RoaXMuZmxpcFk9ITA7dGhpcy51bnBhY2tBbGlnbm1lbnQ9NDt0aGlzLmVuY29kaW5nPXZvaWQgMCE9PW0/bTozRTM7dGhpcy52ZXJzaW9uPTA7dGhpcy5vblVwZGF0ZT1udWxsfWZ1bmN0aW9uIGFhKGEsYixjLGQpe3RoaXMueD1hfHwwO3RoaXMueT1ifHwwO3RoaXMuej1jfHwwO3RoaXMudz12b2lkIDAhPT1kP2Q6MX1mdW5jdGlvbiBrYihhLFxuYixjKXt0aGlzLnV1aWQ9US5nZW5lcmF0ZVVVSUQoKTt0aGlzLndpZHRoPWE7dGhpcy5oZWlnaHQ9Yjt0aGlzLnNjaXNzb3I9bmV3IGFhKDAsMCxhLGIpO3RoaXMuc2Npc3NvclRlc3Q9ITE7dGhpcy52aWV3cG9ydD1uZXcgYWEoMCwwLGEsYik7Yz1jfHx7fTt2b2lkIDA9PT1jLm1pbkZpbHRlciYmKGMubWluRmlsdGVyPTEwMDYpO3RoaXMudGV4dHVyZT1uZXcgVSh2b2lkIDAsdm9pZCAwLGMud3JhcFMsYy53cmFwVCxjLm1hZ0ZpbHRlcixjLm1pbkZpbHRlcixjLmZvcm1hdCxjLnR5cGUsYy5hbmlzb3Ryb3B5LGMuZW5jb2RpbmcpO3RoaXMuZGVwdGhCdWZmZXI9dm9pZCAwIT09Yy5kZXB0aEJ1ZmZlcj9jLmRlcHRoQnVmZmVyOiEwO3RoaXMuc3RlbmNpbEJ1ZmZlcj12b2lkIDAhPT1jLnN0ZW5jaWxCdWZmZXI/Yy5zdGVuY2lsQnVmZmVyOiEwO3RoaXMuZGVwdGhUZXh0dXJlPXZvaWQgMCE9PWMuZGVwdGhUZXh0dXJlP2MuZGVwdGhUZXh0dXJlOm51bGx9ZnVuY3Rpb24gSmIoYSxiLGMpe2tiLmNhbGwodGhpcyxcbmEsYixjKTt0aGlzLmFjdGl2ZU1pcE1hcExldmVsPXRoaXMuYWN0aXZlQ3ViZUZhY2U9MH1mdW5jdGlvbiBsYihhLGIsYyxkLGUsZixnLGgsayxtLHEsbil7VS5jYWxsKHRoaXMsbnVsbCxmLGcsaCxrLG0sZCxlLHEsbik7dGhpcy5pbWFnZT17ZGF0YTphLHdpZHRoOmIsaGVpZ2h0OmN9O3RoaXMubWFnRmlsdGVyPXZvaWQgMCE9PWs/azoxMDAzO3RoaXMubWluRmlsdGVyPXZvaWQgMCE9PW0/bToxMDAzO3RoaXMuZmxpcFk9dGhpcy5nZW5lcmF0ZU1pcG1hcHM9ITE7dGhpcy51bnBhY2tBbGlnbm1lbnQ9MX1mdW5jdGlvbiBkYihhLGIsYyxkLGUsZixnLGgsayxtKXthPXZvaWQgMCE9PWE/YTpbXTtVLmNhbGwodGhpcyxhLHZvaWQgMCE9PWI/YjozMDEsYyxkLGUsZixnLGgsayxtKTt0aGlzLmZsaXBZPSExfWZ1bmN0aW9uIEtiKGEsYixjKXt2YXIgZD1hWzBdO2lmKDA+PWR8fDA8ZClyZXR1cm4gYTt2YXIgZT1iKmMsZj1JZVtlXTt2b2lkIDA9PT1mJiYoZj1uZXcgRmxvYXQzMkFycmF5KGUpLFxuSWVbZV09Zik7aWYoMCE9PWIpZm9yKGQudG9BcnJheShmLDApLGQ9MSxlPTA7ZCE9PWI7KytkKWUrPWMsYVtkXS50b0FycmF5KGYsZSk7cmV0dXJuIGZ9ZnVuY3Rpb24gSmUoYSxiKXt2YXIgYz1LZVtiXTt2b2lkIDA9PT1jJiYoYz1uZXcgSW50MzJBcnJheShiKSxLZVtiXT1jKTtmb3IodmFyIGQ9MDtkIT09YjsrK2QpY1tkXT1hLmFsbG9jVGV4dHVyZVVuaXQoKTtyZXR1cm4gY31mdW5jdGlvbiBCZihhLGIpe2EudW5pZm9ybTFmKHRoaXMuYWRkcixiKX1mdW5jdGlvbiBDZihhLGIpe2EudW5pZm9ybTFpKHRoaXMuYWRkcixiKX1mdW5jdGlvbiBEZihhLGIpe3ZvaWQgMD09PWIueD9hLnVuaWZvcm0yZnYodGhpcy5hZGRyLGIpOmEudW5pZm9ybTJmKHRoaXMuYWRkcixiLngsYi55KX1mdW5jdGlvbiBFZihhLGIpe3ZvaWQgMCE9PWIueD9hLnVuaWZvcm0zZih0aGlzLmFkZHIsYi54LGIueSxiLnopOnZvaWQgMCE9PWIucj9hLnVuaWZvcm0zZih0aGlzLmFkZHIsYi5yLGIuZyxiLmIpOmEudW5pZm9ybTNmdih0aGlzLmFkZHIsXG5iKX1mdW5jdGlvbiBGZihhLGIpe3ZvaWQgMD09PWIueD9hLnVuaWZvcm00ZnYodGhpcy5hZGRyLGIpOmEudW5pZm9ybTRmKHRoaXMuYWRkcixiLngsYi55LGIueixiLncpfWZ1bmN0aW9uIEdmKGEsYil7YS51bmlmb3JtTWF0cml4MmZ2KHRoaXMuYWRkciwhMSxiLmVsZW1lbnRzfHxiKX1mdW5jdGlvbiBIZihhLGIpe3ZvaWQgMD09PWIuZWxlbWVudHM/YS51bmlmb3JtTWF0cml4M2Z2KHRoaXMuYWRkciwhMSxiKTooTGUuc2V0KGIuZWxlbWVudHMpLGEudW5pZm9ybU1hdHJpeDNmdih0aGlzLmFkZHIsITEsTGUpKX1mdW5jdGlvbiBJZihhLGIpe3ZvaWQgMD09PWIuZWxlbWVudHM/YS51bmlmb3JtTWF0cml4NGZ2KHRoaXMuYWRkciwhMSxiKTooTWUuc2V0KGIuZWxlbWVudHMpLGEudW5pZm9ybU1hdHJpeDRmdih0aGlzLmFkZHIsITEsTWUpKX1mdW5jdGlvbiBKZihhLGIsYyl7dmFyIGQ9Yy5hbGxvY1RleHR1cmVVbml0KCk7YS51bmlmb3JtMWkodGhpcy5hZGRyLGQpO2Muc2V0VGV4dHVyZTJEKGJ8fFxuTmUsZCl9ZnVuY3Rpb24gS2YoYSxiLGMpe3ZhciBkPWMuYWxsb2NUZXh0dXJlVW5pdCgpO2EudW5pZm9ybTFpKHRoaXMuYWRkcixkKTtjLnNldFRleHR1cmVDdWJlKGJ8fE9lLGQpfWZ1bmN0aW9uIFBlKGEsYil7YS51bmlmb3JtMml2KHRoaXMuYWRkcixiKX1mdW5jdGlvbiBRZShhLGIpe2EudW5pZm9ybTNpdih0aGlzLmFkZHIsYil9ZnVuY3Rpb24gUmUoYSxiKXthLnVuaWZvcm00aXYodGhpcy5hZGRyLGIpfWZ1bmN0aW9uIExmKGEpe3N3aXRjaChhKXtjYXNlIDUxMjY6cmV0dXJuIEJmO2Nhc2UgMzU2NjQ6cmV0dXJuIERmO2Nhc2UgMzU2NjU6cmV0dXJuIEVmO2Nhc2UgMzU2NjY6cmV0dXJuIEZmO2Nhc2UgMzU2NzQ6cmV0dXJuIEdmO2Nhc2UgMzU2NzU6cmV0dXJuIEhmO2Nhc2UgMzU2NzY6cmV0dXJuIElmO2Nhc2UgMzU2Nzg6Y2FzZSAzNjE5ODpyZXR1cm4gSmY7Y2FzZSAzNTY4MDpyZXR1cm4gS2Y7Y2FzZSA1MTI0OmNhc2UgMzU2NzA6cmV0dXJuIENmO2Nhc2UgMzU2Njc6Y2FzZSAzNTY3MTpyZXR1cm4gUGU7XG5jYXNlIDM1NjY4OmNhc2UgMzU2NzI6cmV0dXJuIFFlO2Nhc2UgMzU2Njk6Y2FzZSAzNTY3MzpyZXR1cm4gUmV9fWZ1bmN0aW9uIE1mKGEsYil7YS51bmlmb3JtMWZ2KHRoaXMuYWRkcixiKX1mdW5jdGlvbiBOZihhLGIpe2EudW5pZm9ybTFpdih0aGlzLmFkZHIsYil9ZnVuY3Rpb24gT2YoYSxiKXthLnVuaWZvcm0yZnYodGhpcy5hZGRyLEtiKGIsdGhpcy5zaXplLDIpKX1mdW5jdGlvbiBQZihhLGIpe2EudW5pZm9ybTNmdih0aGlzLmFkZHIsS2IoYix0aGlzLnNpemUsMykpfWZ1bmN0aW9uIFFmKGEsYil7YS51bmlmb3JtNGZ2KHRoaXMuYWRkcixLYihiLHRoaXMuc2l6ZSw0KSl9ZnVuY3Rpb24gUmYoYSxiKXthLnVuaWZvcm1NYXRyaXgyZnYodGhpcy5hZGRyLCExLEtiKGIsdGhpcy5zaXplLDQpKX1mdW5jdGlvbiBTZihhLGIpe2EudW5pZm9ybU1hdHJpeDNmdih0aGlzLmFkZHIsITEsS2IoYix0aGlzLnNpemUsOSkpfWZ1bmN0aW9uIFRmKGEsYil7YS51bmlmb3JtTWF0cml4NGZ2KHRoaXMuYWRkcixcbiExLEtiKGIsdGhpcy5zaXplLDE2KSl9ZnVuY3Rpb24gVWYoYSxiLGMpe3ZhciBkPWIubGVuZ3RoLGU9SmUoYyxkKTthLnVuaWZvcm0xaXYodGhpcy5hZGRyLGUpO2ZvcihhPTA7YSE9PWQ7KythKWMuc2V0VGV4dHVyZTJEKGJbYV18fE5lLGVbYV0pfWZ1bmN0aW9uIFZmKGEsYixjKXt2YXIgZD1iLmxlbmd0aCxlPUplKGMsZCk7YS51bmlmb3JtMWl2KHRoaXMuYWRkcixlKTtmb3IoYT0wO2EhPT1kOysrYSljLnNldFRleHR1cmVDdWJlKGJbYV18fE9lLGVbYV0pfWZ1bmN0aW9uIFdmKGEpe3N3aXRjaChhKXtjYXNlIDUxMjY6cmV0dXJuIE1mO2Nhc2UgMzU2NjQ6cmV0dXJuIE9mO2Nhc2UgMzU2NjU6cmV0dXJuIFBmO2Nhc2UgMzU2NjY6cmV0dXJuIFFmO2Nhc2UgMzU2NzQ6cmV0dXJuIFJmO2Nhc2UgMzU2NzU6cmV0dXJuIFNmO2Nhc2UgMzU2NzY6cmV0dXJuIFRmO2Nhc2UgMzU2Nzg6cmV0dXJuIFVmO2Nhc2UgMzU2ODA6cmV0dXJuIFZmO2Nhc2UgNTEyNDpjYXNlIDM1NjcwOnJldHVybiBOZjtcbmNhc2UgMzU2Njc6Y2FzZSAzNTY3MTpyZXR1cm4gUGU7Y2FzZSAzNTY2ODpjYXNlIDM1NjcyOnJldHVybiBRZTtjYXNlIDM1NjY5OmNhc2UgMzU2NzM6cmV0dXJuIFJlfX1mdW5jdGlvbiBYZihhLGIsYyl7dGhpcy5pZD1hO3RoaXMuYWRkcj1jO3RoaXMuc2V0VmFsdWU9TGYoYi50eXBlKX1mdW5jdGlvbiBZZihhLGIsYyl7dGhpcy5pZD1hO3RoaXMuYWRkcj1jO3RoaXMuc2l6ZT1iLnNpemU7dGhpcy5zZXRWYWx1ZT1XZihiLnR5cGUpfWZ1bmN0aW9uIFNlKGEpe3RoaXMuaWQ9YTt0aGlzLnNlcT1bXTt0aGlzLm1hcD17fX1mdW5jdGlvbiBtYihhLGIsYyl7dGhpcy5zZXE9W107dGhpcy5tYXA9e307dGhpcy5yZW5kZXJlcj1jO2M9YS5nZXRQcm9ncmFtUGFyYW1ldGVyKGIsYS5BQ1RJVkVfVU5JRk9STVMpO2Zvcih2YXIgZD0wO2Q8YzsrK2Qpe3ZhciBlPWEuZ2V0QWN0aXZlVW5pZm9ybShiLGQpLGY9YS5nZXRVbmlmb3JtTG9jYXRpb24oYixlLm5hbWUpLGc9dGhpcyxoPWUubmFtZSxrPVxuaC5sZW5ndGg7Zm9yKFZkLmxhc3RJbmRleD0wOzspe3ZhciBtPVZkLmV4ZWMoaCkscT1WZC5sYXN0SW5kZXgsbj1tWzFdLHU9bVszXTtcIl1cIj09PW1bMl0mJihufD0wKTtpZih2b2lkIDA9PT11fHxcIltcIj09PXUmJnErMj09PWspe2g9ZztlPXZvaWQgMD09PXU/bmV3IFhmKG4sZSxmKTpuZXcgWWYobixlLGYpO2guc2VxLnB1c2goZSk7aC5tYXBbZS5pZF09ZTticmVha31lbHNlIHU9Zy5tYXBbbl0sdm9pZCAwPT09dSYmKHU9bmV3IFNlKG4pLG49ZyxnPXUsbi5zZXEucHVzaChnKSxuLm1hcFtnLmlkXT1nKSxnPXV9fX1mdW5jdGlvbiBIKGEsYixjKXtyZXR1cm4gdm9pZCAwPT09YiYmdm9pZCAwPT09Yz90aGlzLnNldChhKTp0aGlzLnNldFJHQihhLGIsYyl9ZnVuY3Rpb24gb2QoYSxiKXt0aGlzLm1pbj12b2lkIDAhPT1hP2E6bmV3IEQoSW5maW5pdHksSW5maW5pdHkpO3RoaXMubWF4PXZvaWQgMCE9PWI/YjpuZXcgRCgtSW5maW5pdHksLUluZmluaXR5KX1mdW5jdGlvbiBaZihhLGIsYyxcbmQsZSl7dmFyIGYsZyxoLGssbSxxLG4sdSxyLHQsbCx3LHoseSxJLEE7dGhpcy5yZW5kZXI9ZnVuY3Rpb24oYSx2LERhLG5hKXtpZigwIT09YS5sZW5ndGgpe3Y9bmV3IHA7dmFyIEo9bmEudy9uYS56LEhhPS41Km5hLnoscGQ9LjUqbmEudyxsYT0xNi9uYS53LFM9bmV3IEQobGEqSixsYSksdmE9bmV3IHAoMSwxLDApLE49bmV3IEQoMSwxKSxCPW5ldyBvZDtCLm1pbi5zZXQobmEueCxuYS55KTtCLm1heC5zZXQobmEueCsobmEuei0xNiksbmEueSsobmEudy0xNikpO2lmKHZvaWQgMD09PXkpe3ZhciBsYT1uZXcgRmxvYXQzMkFycmF5KFstMSwtMSwwLDAsMSwtMSwxLDAsMSwxLDEsMSwtMSwxLDAsMV0pLHg9bmV3IFVpbnQxNkFycmF5KFswLDEsMiwwLDIsM10pO2w9Yi5jcmVhdGVCdWZmZXIoKTt3PWIuY3JlYXRlQnVmZmVyKCk7Yi5iaW5kQnVmZmVyKGIuQVJSQVlfQlVGRkVSLGwpO2IuYnVmZmVyRGF0YShiLkFSUkFZX0JVRkZFUixsYSxiLlNUQVRJQ19EUkFXKTtiLmJpbmRCdWZmZXIoYi5FTEVNRU5UX0FSUkFZX0JVRkZFUixcbncpO2IuYnVmZmVyRGF0YShiLkVMRU1FTlRfQVJSQVlfQlVGRkVSLHgsYi5TVEFUSUNfRFJBVyk7ST1iLmNyZWF0ZVRleHR1cmUoKTtBPWIuY3JlYXRlVGV4dHVyZSgpO2MuYmluZFRleHR1cmUoYi5URVhUVVJFXzJELEkpO2IudGV4SW1hZ2UyRChiLlRFWFRVUkVfMkQsMCxiLlJHQiwxNiwxNiwwLGIuUkdCLGIuVU5TSUdORURfQllURSxudWxsKTtiLnRleFBhcmFtZXRlcmkoYi5URVhUVVJFXzJELGIuVEVYVFVSRV9XUkFQX1MsYi5DTEFNUF9UT19FREdFKTtiLnRleFBhcmFtZXRlcmkoYi5URVhUVVJFXzJELGIuVEVYVFVSRV9XUkFQX1QsYi5DTEFNUF9UT19FREdFKTtiLnRleFBhcmFtZXRlcmkoYi5URVhUVVJFXzJELGIuVEVYVFVSRV9NQUdfRklMVEVSLGIuTkVBUkVTVCk7Yi50ZXhQYXJhbWV0ZXJpKGIuVEVYVFVSRV8yRCxiLlRFWFRVUkVfTUlOX0ZJTFRFUixiLk5FQVJFU1QpO2MuYmluZFRleHR1cmUoYi5URVhUVVJFXzJELEEpO2IudGV4SW1hZ2UyRChiLlRFWFRVUkVfMkQsMCxcbmIuUkdCQSwxNiwxNiwwLGIuUkdCQSxiLlVOU0lHTkVEX0JZVEUsbnVsbCk7Yi50ZXhQYXJhbWV0ZXJpKGIuVEVYVFVSRV8yRCxiLlRFWFRVUkVfV1JBUF9TLGIuQ0xBTVBfVE9fRURHRSk7Yi50ZXhQYXJhbWV0ZXJpKGIuVEVYVFVSRV8yRCxiLlRFWFRVUkVfV1JBUF9ULGIuQ0xBTVBfVE9fRURHRSk7Yi50ZXhQYXJhbWV0ZXJpKGIuVEVYVFVSRV8yRCxiLlRFWFRVUkVfTUFHX0ZJTFRFUixiLk5FQVJFU1QpO2IudGV4UGFyYW1ldGVyaShiLlRFWFRVUkVfMkQsYi5URVhUVVJFX01JTl9GSUxURVIsYi5ORUFSRVNUKTt2YXIgbGE9ej17dmVydGV4U2hhZGVyOlwidW5pZm9ybSBsb3dwIGludCByZW5kZXJUeXBlO1xcbnVuaWZvcm0gdmVjMyBzY3JlZW5Qb3NpdGlvbjtcXG51bmlmb3JtIHZlYzIgc2NhbGU7XFxudW5pZm9ybSBmbG9hdCByb3RhdGlvbjtcXG51bmlmb3JtIHNhbXBsZXIyRCBvY2NsdXNpb25NYXA7XFxuYXR0cmlidXRlIHZlYzIgcG9zaXRpb247XFxuYXR0cmlidXRlIHZlYzIgdXY7XFxudmFyeWluZyB2ZWMyIHZVVjtcXG52YXJ5aW5nIGZsb2F0IHZWaXNpYmlsaXR5O1xcbnZvaWQgbWFpbigpIHtcXG5cXHR2VVYgPSB1djtcXG5cXHR2ZWMyIHBvcyA9IHBvc2l0aW9uO1xcblxcdGlmICggcmVuZGVyVHlwZSA9PSAyICkge1xcblxcdFxcdHZlYzQgdmlzaWJpbGl0eSA9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjEsIDAuMSApICk7XFxuXFx0XFx0dmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC41LCAwLjEgKSApO1xcblxcdFxcdHZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuOSwgMC4xICkgKTtcXG5cXHRcXHR2aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjksIDAuNSApICk7XFxuXFx0XFx0dmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC45LCAwLjkgKSApO1xcblxcdFxcdHZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuNSwgMC45ICkgKTtcXG5cXHRcXHR2aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjEsIDAuOSApICk7XFxuXFx0XFx0dmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC4xLCAwLjUgKSApO1xcblxcdFxcdHZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuNSwgMC41ICkgKTtcXG5cXHRcXHR2VmlzaWJpbGl0eSA9ICAgICAgICB2aXNpYmlsaXR5LnIgLyA5LjA7XFxuXFx0XFx0dlZpc2liaWxpdHkgKj0gMS4wIC0gdmlzaWJpbGl0eS5nIC8gOS4wO1xcblxcdFxcdHZWaXNpYmlsaXR5ICo9ICAgICAgIHZpc2liaWxpdHkuYiAvIDkuMDtcXG5cXHRcXHR2VmlzaWJpbGl0eSAqPSAxLjAgLSB2aXNpYmlsaXR5LmEgLyA5LjA7XFxuXFx0XFx0cG9zLnggPSBjb3MoIHJvdGF0aW9uICkgKiBwb3NpdGlvbi54IC0gc2luKCByb3RhdGlvbiApICogcG9zaXRpb24ueTtcXG5cXHRcXHRwb3MueSA9IHNpbiggcm90YXRpb24gKSAqIHBvc2l0aW9uLnggKyBjb3MoIHJvdGF0aW9uICkgKiBwb3NpdGlvbi55O1xcblxcdH1cXG5cXHRnbF9Qb3NpdGlvbiA9IHZlYzQoICggcG9zICogc2NhbGUgKyBzY3JlZW5Qb3NpdGlvbi54eSApLnh5LCBzY3JlZW5Qb3NpdGlvbi56LCAxLjAgKTtcXG59XCIsXG5mcmFnbWVudFNoYWRlcjpcInVuaWZvcm0gbG93cCBpbnQgcmVuZGVyVHlwZTtcXG51bmlmb3JtIHNhbXBsZXIyRCBtYXA7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnVuaWZvcm0gdmVjMyBjb2xvcjtcXG52YXJ5aW5nIHZlYzIgdlVWO1xcbnZhcnlpbmcgZmxvYXQgdlZpc2liaWxpdHk7XFxudm9pZCBtYWluKCkge1xcblxcdGlmICggcmVuZGVyVHlwZSA9PSAwICkge1xcblxcdFxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIDEuMCwgMC4wLCAxLjAsIDAuMCApO1xcblxcdH0gZWxzZSBpZiAoIHJlbmRlclR5cGUgPT0gMSApIHtcXG5cXHRcXHRnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQoIG1hcCwgdlVWICk7XFxuXFx0fSBlbHNlIHtcXG5cXHRcXHR2ZWM0IHRleHR1cmUgPSB0ZXh0dXJlMkQoIG1hcCwgdlVWICk7XFxuXFx0XFx0dGV4dHVyZS5hICo9IG9wYWNpdHkgKiB2VmlzaWJpbGl0eTtcXG5cXHRcXHRnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlO1xcblxcdFxcdGdsX0ZyYWdDb2xvci5yZ2IgKj0gY29sb3I7XFxuXFx0fVxcbn1cIn0seD1iLmNyZWF0ZVByb2dyYW0oKSxcbkU9Yi5jcmVhdGVTaGFkZXIoYi5GUkFHTUVOVF9TSEFERVIpLFY9Yi5jcmVhdGVTaGFkZXIoYi5WRVJURVhfU0hBREVSKSxIPVwicHJlY2lzaW9uIFwiK2UucHJlY2lzaW9uK1wiIGZsb2F0O1xcblwiO2Iuc2hhZGVyU291cmNlKEUsSCtsYS5mcmFnbWVudFNoYWRlcik7Yi5zaGFkZXJTb3VyY2UoVixIK2xhLnZlcnRleFNoYWRlcik7Yi5jb21waWxlU2hhZGVyKEUpO2IuY29tcGlsZVNoYWRlcihWKTtiLmF0dGFjaFNoYWRlcih4LEUpO2IuYXR0YWNoU2hhZGVyKHgsVik7Yi5saW5rUHJvZ3JhbSh4KTt5PXg7cj1iLmdldEF0dHJpYkxvY2F0aW9uKHksXCJwb3NpdGlvblwiKTt0PWIuZ2V0QXR0cmliTG9jYXRpb24oeSxcInV2XCIpO2Y9Yi5nZXRVbmlmb3JtTG9jYXRpb24oeSxcInJlbmRlclR5cGVcIik7Zz1iLmdldFVuaWZvcm1Mb2NhdGlvbih5LFwibWFwXCIpO2g9Yi5nZXRVbmlmb3JtTG9jYXRpb24oeSxcIm9jY2x1c2lvbk1hcFwiKTtrPWIuZ2V0VW5pZm9ybUxvY2F0aW9uKHksXCJvcGFjaXR5XCIpO209Yi5nZXRVbmlmb3JtTG9jYXRpb24oeSxcblwiY29sb3JcIik7cT1iLmdldFVuaWZvcm1Mb2NhdGlvbih5LFwic2NhbGVcIik7bj1iLmdldFVuaWZvcm1Mb2NhdGlvbih5LFwicm90YXRpb25cIik7dT1iLmdldFVuaWZvcm1Mb2NhdGlvbih5LFwic2NyZWVuUG9zaXRpb25cIil9Yy51c2VQcm9ncmFtKHkpO2MuaW5pdEF0dHJpYnV0ZXMoKTtjLmVuYWJsZUF0dHJpYnV0ZShyKTtjLmVuYWJsZUF0dHJpYnV0ZSh0KTtjLmRpc2FibGVVbnVzZWRBdHRyaWJ1dGVzKCk7Yi51bmlmb3JtMWkoaCwwKTtiLnVuaWZvcm0xaShnLDEpO2IuYmluZEJ1ZmZlcihiLkFSUkFZX0JVRkZFUixsKTtiLnZlcnRleEF0dHJpYlBvaW50ZXIociwyLGIuRkxPQVQsITEsMTYsMCk7Yi52ZXJ0ZXhBdHRyaWJQb2ludGVyKHQsMixiLkZMT0FULCExLDE2LDgpO2IuYmluZEJ1ZmZlcihiLkVMRU1FTlRfQVJSQVlfQlVGRkVSLHcpO2MuZGlzYWJsZShiLkNVTExfRkFDRSk7Yy5idWZmZXJzLmRlcHRoLnNldE1hc2soITEpO3g9MDtmb3IoRT1hLmxlbmd0aDt4PEU7eCsrKWlmKGxhPVxuMTYvbmEudyxTLnNldChsYSpKLGxhKSxWPWFbeF0sdi5zZXQoVi5tYXRyaXhXb3JsZC5lbGVtZW50c1sxMl0sVi5tYXRyaXhXb3JsZC5lbGVtZW50c1sxM10sVi5tYXRyaXhXb3JsZC5lbGVtZW50c1sxNF0pLHYuYXBwbHlNYXRyaXg0KERhLm1hdHJpeFdvcmxkSW52ZXJzZSksdi5hcHBseU1hdHJpeDQoRGEucHJvamVjdGlvbk1hdHJpeCksdmEuY29weSh2KSxOLng9bmEueCt2YS54KkhhK0hhLTgsTi55PW5hLnkrdmEueSpwZCtwZC04LCEwPT09Qi5jb250YWluc1BvaW50KE4pKXtjLmFjdGl2ZVRleHR1cmUoYi5URVhUVVJFMCk7Yy5iaW5kVGV4dHVyZShiLlRFWFRVUkVfMkQsbnVsbCk7Yy5hY3RpdmVUZXh0dXJlKGIuVEVYVFVSRTEpO2MuYmluZFRleHR1cmUoYi5URVhUVVJFXzJELEkpO2IuY29weVRleEltYWdlMkQoYi5URVhUVVJFXzJELDAsYi5SR0IsTi54LE4ueSwxNiwxNiwwKTtiLnVuaWZvcm0xaShmLDApO2IudW5pZm9ybTJmKHEsUy54LFMueSk7Yi51bmlmb3JtM2YodSx2YS54LFxudmEueSx2YS56KTtjLmRpc2FibGUoYi5CTEVORCk7Yy5lbmFibGUoYi5ERVBUSF9URVNUKTtiLmRyYXdFbGVtZW50cyhiLlRSSUFOR0xFUyw2LGIuVU5TSUdORURfU0hPUlQsMCk7Yy5hY3RpdmVUZXh0dXJlKGIuVEVYVFVSRTApO2MuYmluZFRleHR1cmUoYi5URVhUVVJFXzJELEEpO2IuY29weVRleEltYWdlMkQoYi5URVhUVVJFXzJELDAsYi5SR0JBLE4ueCxOLnksMTYsMTYsMCk7Yi51bmlmb3JtMWkoZiwxKTtjLmRpc2FibGUoYi5ERVBUSF9URVNUKTtjLmFjdGl2ZVRleHR1cmUoYi5URVhUVVJFMSk7Yy5iaW5kVGV4dHVyZShiLlRFWFRVUkVfMkQsSSk7Yi5kcmF3RWxlbWVudHMoYi5UUklBTkdMRVMsNixiLlVOU0lHTkVEX1NIT1JULDApO1YucG9zaXRpb25TY3JlZW4uY29weSh2YSk7Vi5jdXN0b21VcGRhdGVDYWxsYmFjaz9WLmN1c3RvbVVwZGF0ZUNhbGxiYWNrKFYpOlYudXBkYXRlTGVuc0ZsYXJlcygpO2IudW5pZm9ybTFpKGYsMik7Yy5lbmFibGUoYi5CTEVORCk7Zm9yKHZhciBIPVxuMCxLPVYubGVuc0ZsYXJlcy5sZW5ndGg7SDxLO0grKyl7dmFyIEM9Vi5sZW5zRmxhcmVzW0hdOy4wMDE8Qy5vcGFjaXR5JiYuMDAxPEMuc2NhbGUmJih2YS54PUMueCx2YS55PUMueSx2YS56PUMueixsYT1DLnNpemUqQy5zY2FsZS9uYS53LFMueD1sYSpKLFMueT1sYSxiLnVuaWZvcm0zZih1LHZhLngsdmEueSx2YS56KSxiLnVuaWZvcm0yZihxLFMueCxTLnkpLGIudW5pZm9ybTFmKG4sQy5yb3RhdGlvbiksYi51bmlmb3JtMWYoayxDLm9wYWNpdHkpLGIudW5pZm9ybTNmKG0sQy5jb2xvci5yLEMuY29sb3IuZyxDLmNvbG9yLmIpLGMuc2V0QmxlbmRpbmcoQy5ibGVuZGluZyxDLmJsZW5kRXF1YXRpb24sQy5ibGVuZFNyYyxDLmJsZW5kRHN0KSxkLnNldFRleHR1cmUyRChDLnRleHR1cmUsMSksYi5kcmF3RWxlbWVudHMoYi5UUklBTkdMRVMsNixiLlVOU0lHTkVEX1NIT1JULDApKX19Yy5lbmFibGUoYi5DVUxMX0ZBQ0UpO2MuZW5hYmxlKGIuREVQVEhfVEVTVCk7Yy5idWZmZXJzLmRlcHRoLnNldE1hc2soITApO1xuYy5yZXNldCgpfX19ZnVuY3Rpb24gdGMoYSxiLGMsZCxlLGYsZyxoLGspe1UuY2FsbCh0aGlzLGEsYixjLGQsZSxmLGcsaCxrKTt0aGlzLm5lZWRzVXBkYXRlPSEwfWZ1bmN0aW9uICRmKGEsYixjLGQsZSl7dmFyIGYsZyxoLGssbSxxLG4sdSxyLHQsbCx3LHoseSxJLEEsSjtmdW5jdGlvbiBIYShhLGIpe3JldHVybiBhLnJlbmRlck9yZGVyIT09Yi5yZW5kZXJPcmRlcj9hLnJlbmRlck9yZGVyLWIucmVuZGVyT3JkZXI6YS56IT09Yi56P2Iuei1hLno6Yi5pZC1hLmlkfXZhciBEYSxuYSxvYSxUZSxwZD1uZXcgcCxsYT1uZXcgaGEsUz1uZXcgcDt0aGlzLnJlbmRlcj1mdW5jdGlvbih2LHAsRCl7aWYoMCE9PXYubGVuZ3RoKXtpZih2b2lkIDA9PT1vYSl7dmFyIHg9bmV3IEZsb2F0MzJBcnJheShbLS41LC0uNSwwLDAsLjUsLS41LDEsMCwuNSwuNSwxLDEsLS41LC41LDAsMV0pLE49bmV3IFVpbnQxNkFycmF5KFswLDEsMiwwLDIsM10pO0RhPWIuY3JlYXRlQnVmZmVyKCk7bmE9Yi5jcmVhdGVCdWZmZXIoKTtcbmIuYmluZEJ1ZmZlcihiLkFSUkFZX0JVRkZFUixEYSk7Yi5idWZmZXJEYXRhKGIuQVJSQVlfQlVGRkVSLHgsYi5TVEFUSUNfRFJBVyk7Yi5iaW5kQnVmZmVyKGIuRUxFTUVOVF9BUlJBWV9CVUZGRVIsbmEpO2IuYnVmZmVyRGF0YShiLkVMRU1FTlRfQVJSQVlfQlVGRkVSLE4sYi5TVEFUSUNfRFJBVyk7eD1iLmNyZWF0ZVByb2dyYW0oKTtOPWIuY3JlYXRlU2hhZGVyKGIuVkVSVEVYX1NIQURFUik7dmFyIEI9Yi5jcmVhdGVTaGFkZXIoYi5GUkFHTUVOVF9TSEFERVIpO2Iuc2hhZGVyU291cmNlKE4sW1wicHJlY2lzaW9uIFwiK2UucHJlY2lzaW9uK1wiIGZsb2F0O1wiLFwiI2RlZmluZSBTSEFERVJfTkFNRSBTcHJpdGVNYXRlcmlhbFxcbnVuaWZvcm0gbWF0NCBtb2RlbFZpZXdNYXRyaXg7XFxudW5pZm9ybSBtYXQ0IHByb2plY3Rpb25NYXRyaXg7XFxudW5pZm9ybSBmbG9hdCByb3RhdGlvbjtcXG51bmlmb3JtIHZlYzIgc2NhbGU7XFxudW5pZm9ybSB2ZWMyIHV2T2Zmc2V0O1xcbnVuaWZvcm0gdmVjMiB1dlNjYWxlO1xcbmF0dHJpYnV0ZSB2ZWMyIHBvc2l0aW9uO1xcbmF0dHJpYnV0ZSB2ZWMyIHV2O1xcbnZhcnlpbmcgdmVjMiB2VVY7XFxudmFyeWluZyBmbG9hdCBmb2dEZXB0aDtcXG52b2lkIG1haW4oKSB7XFxuXFx0dlVWID0gdXZPZmZzZXQgKyB1diAqIHV2U2NhbGU7XFxuXFx0dmVjMiBhbGlnbmVkUG9zaXRpb24gPSBwb3NpdGlvbiAqIHNjYWxlO1xcblxcdHZlYzIgcm90YXRlZFBvc2l0aW9uO1xcblxcdHJvdGF0ZWRQb3NpdGlvbi54ID0gY29zKCByb3RhdGlvbiApICogYWxpZ25lZFBvc2l0aW9uLnggLSBzaW4oIHJvdGF0aW9uICkgKiBhbGlnbmVkUG9zaXRpb24ueTtcXG5cXHRyb3RhdGVkUG9zaXRpb24ueSA9IHNpbiggcm90YXRpb24gKSAqIGFsaWduZWRQb3NpdGlvbi54ICsgY29zKCByb3RhdGlvbiApICogYWxpZ25lZFBvc2l0aW9uLnk7XFxuXFx0dmVjNCBtdlBvc2l0aW9uO1xcblxcdG12UG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCAwLjAsIDAuMCwgMC4wLCAxLjAgKTtcXG5cXHRtdlBvc2l0aW9uLnh5ICs9IHJvdGF0ZWRQb3NpdGlvbjtcXG5cXHRnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtdlBvc2l0aW9uO1xcblxcdGZvZ0RlcHRoID0gLSBtdlBvc2l0aW9uLno7XFxufVwiXS5qb2luKFwiXFxuXCIpKTtcbmIuc2hhZGVyU291cmNlKEIsW1wicHJlY2lzaW9uIFwiK2UucHJlY2lzaW9uK1wiIGZsb2F0O1wiLFwiI2RlZmluZSBTSEFERVJfTkFNRSBTcHJpdGVNYXRlcmlhbFxcbnVuaWZvcm0gdmVjMyBjb2xvcjtcXG51bmlmb3JtIHNhbXBsZXIyRCBtYXA7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnVuaWZvcm0gaW50IGZvZ1R5cGU7XFxudW5pZm9ybSB2ZWMzIGZvZ0NvbG9yO1xcbnVuaWZvcm0gZmxvYXQgZm9nRGVuc2l0eTtcXG51bmlmb3JtIGZsb2F0IGZvZ05lYXI7XFxudW5pZm9ybSBmbG9hdCBmb2dGYXI7XFxudW5pZm9ybSBmbG9hdCBhbHBoYVRlc3Q7XFxudmFyeWluZyB2ZWMyIHZVVjtcXG52YXJ5aW5nIGZsb2F0IGZvZ0RlcHRoO1xcbnZvaWQgbWFpbigpIHtcXG5cXHR2ZWM0IHRleHR1cmUgPSB0ZXh0dXJlMkQoIG1hcCwgdlVWICk7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggY29sb3IgKiB0ZXh0dXJlLnh5eiwgdGV4dHVyZS5hICogb3BhY2l0eSApO1xcblxcdGlmICggZ2xfRnJhZ0NvbG9yLmEgPCBhbHBoYVRlc3QgKSBkaXNjYXJkO1xcblxcdGlmICggZm9nVHlwZSA+IDAgKSB7XFxuXFx0XFx0ZmxvYXQgZm9nRmFjdG9yID0gMC4wO1xcblxcdFxcdGlmICggZm9nVHlwZSA9PSAxICkge1xcblxcdFxcdFxcdGZvZ0ZhY3RvciA9IHNtb290aHN0ZXAoIGZvZ05lYXIsIGZvZ0ZhciwgZm9nRGVwdGggKTtcXG5cXHRcXHR9IGVsc2Uge1xcblxcdFxcdFxcdGNvbnN0IGZsb2F0IExPRzIgPSAxLjQ0MjY5NTtcXG5cXHRcXHRcXHRmb2dGYWN0b3IgPSBleHAyKCAtIGZvZ0RlbnNpdHkgKiBmb2dEZW5zaXR5ICogZm9nRGVwdGggKiBmb2dEZXB0aCAqIExPRzIgKTtcXG5cXHRcXHRcXHRmb2dGYWN0b3IgPSAxLjAgLSBjbGFtcCggZm9nRmFjdG9yLCAwLjAsIDEuMCApO1xcblxcdFxcdH1cXG5cXHRcXHRnbF9GcmFnQ29sb3IucmdiID0gbWl4KCBnbF9GcmFnQ29sb3IucmdiLCBmb2dDb2xvciwgZm9nRmFjdG9yICk7XFxuXFx0fVxcbn1cIl0uam9pbihcIlxcblwiKSk7XG5iLmNvbXBpbGVTaGFkZXIoTik7Yi5jb21waWxlU2hhZGVyKEIpO2IuYXR0YWNoU2hhZGVyKHgsTik7Yi5hdHRhY2hTaGFkZXIoeCxCKTtiLmxpbmtQcm9ncmFtKHgpO29hPXg7QT1iLmdldEF0dHJpYkxvY2F0aW9uKG9hLFwicG9zaXRpb25cIik7Sj1iLmdldEF0dHJpYkxvY2F0aW9uKG9hLFwidXZcIik7Zj1iLmdldFVuaWZvcm1Mb2NhdGlvbihvYSxcInV2T2Zmc2V0XCIpO2c9Yi5nZXRVbmlmb3JtTG9jYXRpb24ob2EsXCJ1dlNjYWxlXCIpO2g9Yi5nZXRVbmlmb3JtTG9jYXRpb24ob2EsXCJyb3RhdGlvblwiKTtrPWIuZ2V0VW5pZm9ybUxvY2F0aW9uKG9hLFwic2NhbGVcIik7bT1iLmdldFVuaWZvcm1Mb2NhdGlvbihvYSxcImNvbG9yXCIpO3E9Yi5nZXRVbmlmb3JtTG9jYXRpb24ob2EsXCJtYXBcIik7bj1iLmdldFVuaWZvcm1Mb2NhdGlvbihvYSxcIm9wYWNpdHlcIik7dT1iLmdldFVuaWZvcm1Mb2NhdGlvbihvYSxcIm1vZGVsVmlld01hdHJpeFwiKTtyPWIuZ2V0VW5pZm9ybUxvY2F0aW9uKG9hLFwicHJvamVjdGlvbk1hdHJpeFwiKTtcbnQ9Yi5nZXRVbmlmb3JtTG9jYXRpb24ob2EsXCJmb2dUeXBlXCIpO2w9Yi5nZXRVbmlmb3JtTG9jYXRpb24ob2EsXCJmb2dEZW5zaXR5XCIpO3c9Yi5nZXRVbmlmb3JtTG9jYXRpb24ob2EsXCJmb2dOZWFyXCIpO3o9Yi5nZXRVbmlmb3JtTG9jYXRpb24ob2EsXCJmb2dGYXJcIik7eT1iLmdldFVuaWZvcm1Mb2NhdGlvbihvYSxcImZvZ0NvbG9yXCIpO2IuZ2V0VW5pZm9ybUxvY2F0aW9uKG9hLFwiZm9nRGVwdGhcIik7ST1iLmdldFVuaWZvcm1Mb2NhdGlvbihvYSxcImFscGhhVGVzdFwiKTt4PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIixcImNhbnZhc1wiKTt4LndpZHRoPTg7eC5oZWlnaHQ9ODtOPXguZ2V0Q29udGV4dChcIjJkXCIpO04uZmlsbFN0eWxlPVwid2hpdGVcIjtOLmZpbGxSZWN0KDAsMCw4LDgpO1RlPW5ldyB0Yyh4KX1jLnVzZVByb2dyYW0ob2EpO2MuaW5pdEF0dHJpYnV0ZXMoKTtjLmVuYWJsZUF0dHJpYnV0ZShBKTtjLmVuYWJsZUF0dHJpYnV0ZShKKTtcbmMuZGlzYWJsZVVudXNlZEF0dHJpYnV0ZXMoKTtjLmRpc2FibGUoYi5DVUxMX0ZBQ0UpO2MuZW5hYmxlKGIuQkxFTkQpO2IuYmluZEJ1ZmZlcihiLkFSUkFZX0JVRkZFUixEYSk7Yi52ZXJ0ZXhBdHRyaWJQb2ludGVyKEEsMixiLkZMT0FULCExLDE2LDApO2IudmVydGV4QXR0cmliUG9pbnRlcihKLDIsYi5GTE9BVCwhMSwxNiw4KTtiLmJpbmRCdWZmZXIoYi5FTEVNRU5UX0FSUkFZX0JVRkZFUixuYSk7Yi51bmlmb3JtTWF0cml4NGZ2KHIsITEsRC5wcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzKTtjLmFjdGl2ZVRleHR1cmUoYi5URVhUVVJFMCk7Yi51bmlmb3JtMWkocSwwKTtOPXg9MDsoQj1wLmZvZyk/KGIudW5pZm9ybTNmKHksQi5jb2xvci5yLEIuY29sb3IuZyxCLmNvbG9yLmIpLEIuaXNGb2c/KGIudW5pZm9ybTFmKHcsQi5uZWFyKSxiLnVuaWZvcm0xZih6LEIuZmFyKSxiLnVuaWZvcm0xaSh0LDEpLE49eD0xKTpCLmlzRm9nRXhwMiYmKGIudW5pZm9ybTFmKGwsQi5kZW5zaXR5KSxcbmIudW5pZm9ybTFpKHQsMiksTj14PTIpKTooYi51bmlmb3JtMWkodCwwKSxOPXg9MCk7Zm9yKHZhciBDPTAsRT12Lmxlbmd0aDtDPEU7QysrKUI9dltDXSxCLm1vZGVsVmlld01hdHJpeC5tdWx0aXBseU1hdHJpY2VzKEQubWF0cml4V29ybGRJbnZlcnNlLEIubWF0cml4V29ybGQpLEIuej0tQi5tb2RlbFZpZXdNYXRyaXguZWxlbWVudHNbMTRdO3Yuc29ydChIYSk7Zm9yKHZhciB2YT1bXSxDPTAsRT12Lmxlbmd0aDtDPEU7QysrKXtCPXZbQ107dmFyIEc9Qi5tYXRlcmlhbDtpZighMSE9PUcudmlzaWJsZSl7Qi5vbkJlZm9yZVJlbmRlcihhLHAsRCx2b2lkIDAsRyx2b2lkIDApO2IudW5pZm9ybTFmKEksRy5hbHBoYVRlc3QpO2IudW5pZm9ybU1hdHJpeDRmdih1LCExLEIubW9kZWxWaWV3TWF0cml4LmVsZW1lbnRzKTtCLm1hdHJpeFdvcmxkLmRlY29tcG9zZShwZCxsYSxTKTt2YVswXT1TLng7dmFbMV09Uy55O3ZhciBxZD0wO3AuZm9nJiZHLmZvZyYmKHFkPU4pO3ghPT1xZCYmKGIudW5pZm9ybTFpKHQsXG5xZCkseD1xZCk7bnVsbCE9PUcubWFwPyhiLnVuaWZvcm0yZihmLEcubWFwLm9mZnNldC54LEcubWFwLm9mZnNldC55KSxiLnVuaWZvcm0yZihnLEcubWFwLnJlcGVhdC54LEcubWFwLnJlcGVhdC55KSk6KGIudW5pZm9ybTJmKGYsMCwwKSxiLnVuaWZvcm0yZihnLDEsMSkpO2IudW5pZm9ybTFmKG4sRy5vcGFjaXR5KTtiLnVuaWZvcm0zZihtLEcuY29sb3IucixHLmNvbG9yLmcsRy5jb2xvci5iKTtiLnVuaWZvcm0xZihoLEcucm90YXRpb24pO2IudW5pZm9ybTJmdihrLHZhKTtjLnNldEJsZW5kaW5nKEcuYmxlbmRpbmcsRy5ibGVuZEVxdWF0aW9uLEcuYmxlbmRTcmMsRy5ibGVuZERzdCxHLmJsZW5kRXF1YXRpb25BbHBoYSxHLmJsZW5kU3JjQWxwaGEsRy5ibGVuZERzdEFscGhhLEcucHJlbXVsdGlwbGllZEFscGhhKTtjLmJ1ZmZlcnMuZGVwdGguc2V0VGVzdChHLmRlcHRoVGVzdCk7Yy5idWZmZXJzLmRlcHRoLnNldE1hc2soRy5kZXB0aFdyaXRlKTtjLmJ1ZmZlcnMuY29sb3Iuc2V0TWFzayhHLmNvbG9yV3JpdGUpO1xuZC5zZXRUZXh0dXJlMkQoRy5tYXB8fFRlLDApO2IuZHJhd0VsZW1lbnRzKGIuVFJJQU5HTEVTLDYsYi5VTlNJR05FRF9TSE9SVCwwKTtCLm9uQWZ0ZXJSZW5kZXIoYSxwLEQsdm9pZCAwLEcsdm9pZCAwKX19Yy5lbmFibGUoYi5DVUxMX0ZBQ0UpO2MucmVzZXQoKX19fWZ1bmN0aW9uIFAoKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlkXCIse3ZhbHVlOmFnKyt9KTt0aGlzLnV1aWQ9US5nZW5lcmF0ZVVVSUQoKTt0aGlzLm5hbWU9XCJcIjt0aGlzLnR5cGU9XCJNYXRlcmlhbFwiO3RoaXMubGlnaHRzPXRoaXMuZm9nPSEwO3RoaXMuYmxlbmRpbmc9MTt0aGlzLnNpZGU9MDt0aGlzLmZsYXRTaGFkaW5nPSExO3RoaXMudmVydGV4Q29sb3JzPTA7dGhpcy5vcGFjaXR5PTE7dGhpcy50cmFuc3BhcmVudD0hMTt0aGlzLmJsZW5kU3JjPTIwNDt0aGlzLmJsZW5kRHN0PTIwNTt0aGlzLmJsZW5kRXF1YXRpb249MTAwO3RoaXMuYmxlbmRFcXVhdGlvbkFscGhhPXRoaXMuYmxlbmREc3RBbHBoYT10aGlzLmJsZW5kU3JjQWxwaGE9XG5udWxsO3RoaXMuZGVwdGhGdW5jPTM7dGhpcy5kZXB0aFdyaXRlPXRoaXMuZGVwdGhUZXN0PSEwO3RoaXMuY2xpcHBpbmdQbGFuZXM9bnVsbDt0aGlzLmNsaXBTaGFkb3dzPXRoaXMuY2xpcEludGVyc2VjdGlvbj0hMTt0aGlzLmNvbG9yV3JpdGU9ITA7dGhpcy5wcmVjaXNpb249bnVsbDt0aGlzLnBvbHlnb25PZmZzZXQ9ITE7dGhpcy5wb2x5Z29uT2Zmc2V0VW5pdHM9dGhpcy5wb2x5Z29uT2Zmc2V0RmFjdG9yPTA7dGhpcy5kaXRoZXJpbmc9ITE7dGhpcy5hbHBoYVRlc3Q9MDt0aGlzLnByZW11bHRpcGxpZWRBbHBoYT0hMTt0aGlzLm92ZXJkcmF3PTA7dGhpcy52aXNpYmxlPSEwO3RoaXMudXNlckRhdGE9e307dGhpcy5uZWVkc1VwZGF0ZT0hMH1mdW5jdGlvbiBlYihhKXtQLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTWVzaERlcHRoTWF0ZXJpYWxcIjt0aGlzLmRlcHRoUGFja2luZz0zMjAwO3RoaXMubW9ycGhUYXJnZXRzPXRoaXMuc2tpbm5pbmc9ITE7dGhpcy5kaXNwbGFjZW1lbnRNYXA9XG50aGlzLmFscGhhTWFwPXRoaXMubWFwPW51bGw7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT0xO3RoaXMuZGlzcGxhY2VtZW50Qmlhcz0wO3RoaXMud2lyZWZyYW1lPSExO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy5saWdodHM9dGhpcy5mb2c9ITE7dGhpcy5zZXRWYWx1ZXMoYSl9ZnVuY3Rpb24gZmIoYSl7UC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIk1lc2hEaXN0YW5jZU1hdGVyaWFsXCI7dGhpcy5yZWZlcmVuY2VQb3NpdGlvbj1uZXcgcDt0aGlzLm5lYXJEaXN0YW5jZT0xO3RoaXMuZmFyRGlzdGFuY2U9MUUzO3RoaXMubW9ycGhUYXJnZXRzPXRoaXMuc2tpbm5pbmc9ITE7dGhpcy5kaXNwbGFjZW1lbnRNYXA9dGhpcy5hbHBoYU1hcD10aGlzLm1hcD1udWxsO3RoaXMuZGlzcGxhY2VtZW50U2NhbGU9MTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9MDt0aGlzLmxpZ2h0cz10aGlzLmZvZz0hMTt0aGlzLnNldFZhbHVlcyhhKX1mdW5jdGlvbiBYYShhLGIpe3RoaXMubWluPXZvaWQgMCE9PVxuYT9hOm5ldyBwKEluZmluaXR5LEluZmluaXR5LEluZmluaXR5KTt0aGlzLm1heD12b2lkIDAhPT1iP2I6bmV3IHAoLUluZmluaXR5LC1JbmZpbml0eSwtSW5maW5pdHkpfWZ1bmN0aW9uIElhKGEsYil7dGhpcy5jZW50ZXI9dm9pZCAwIT09YT9hOm5ldyBwO3RoaXMucmFkaXVzPXZvaWQgMCE9PWI/YjowfWZ1bmN0aW9uIEVhKGEsYil7dGhpcy5ub3JtYWw9dm9pZCAwIT09YT9hOm5ldyBwKDEsMCwwKTt0aGlzLmNvbnN0YW50PXZvaWQgMCE9PWI/YjowfWZ1bmN0aW9uIHJkKGEsYixjLGQsZSxmKXt0aGlzLnBsYW5lcz1bdm9pZCAwIT09YT9hOm5ldyBFYSx2b2lkIDAhPT1iP2I6bmV3IEVhLHZvaWQgMCE9PWM/YzpuZXcgRWEsdm9pZCAwIT09ZD9kOm5ldyBFYSx2b2lkIDAhPT1lP2U6bmV3IEVhLHZvaWQgMCE9PWY/ZjpuZXcgRWFdfWZ1bmN0aW9uIFVlKGEsYixjKXtmdW5jdGlvbiBkKGIsYyxkLGUsZixnKXt2YXIgaD1iLmdlb21ldHJ5O3ZhciBrPW47dmFyIG09Yi5jdXN0b21EZXB0aE1hdGVyaWFsO1xuZCYmKGs9dSxtPWIuY3VzdG9tRGlzdGFuY2VNYXRlcmlhbCk7bT9rPW06KG09ITEsYy5tb3JwaFRhcmdldHMmJihoJiZoLmlzQnVmZmVyR2VvbWV0cnk/bT1oLm1vcnBoQXR0cmlidXRlcyYmaC5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24mJjA8aC5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24ubGVuZ3RoOmgmJmguaXNHZW9tZXRyeSYmKG09aC5tb3JwaFRhcmdldHMmJjA8aC5tb3JwaFRhcmdldHMubGVuZ3RoKSksYi5pc1NraW5uZWRNZXNoJiYhMT09PWMuc2tpbm5pbmcmJmNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMU2hhZG93TWFwOiBUSFJFRS5Ta2lubmVkTWVzaCB3aXRoIG1hdGVyaWFsLnNraW5uaW5nIHNldCB0byBmYWxzZTpcIixiKSxiPWIuaXNTa2lubmVkTWVzaCYmYy5za2lubmluZyxoPTAsbSYmKGh8PTEpLGImJihofD0yKSxrPWtbaF0pO2EubG9jYWxDbGlwcGluZ0VuYWJsZWQmJiEwPT09Yy5jbGlwU2hhZG93cyYmMCE9PWMuY2xpcHBpbmdQbGFuZXMubGVuZ3RoJiYoaD1cbmsudXVpZCxtPWMudXVpZCxiPXJbaF0sdm9pZCAwPT09YiYmKGI9e30scltoXT1iKSxoPWJbbV0sdm9pZCAwPT09aCYmKGg9ay5jbG9uZSgpLGJbbV09aCksaz1oKTtrLnZpc2libGU9Yy52aXNpYmxlO2sud2lyZWZyYW1lPWMud2lyZWZyYW1lO209Yy5zaWRlO0EucmVuZGVyU2luZ2xlU2lkZWQmJjI9PW0mJihtPTApO0EucmVuZGVyUmV2ZXJzZVNpZGVkJiYoMD09PW0/bT0xOjE9PT1tJiYobT0wKSk7ay5zaWRlPW07ay5jbGlwU2hhZG93cz1jLmNsaXBTaGFkb3dzO2suY2xpcHBpbmdQbGFuZXM9Yy5jbGlwcGluZ1BsYW5lcztrLmNsaXBJbnRlcnNlY3Rpb249Yy5jbGlwSW50ZXJzZWN0aW9uO2sud2lyZWZyYW1lTGluZXdpZHRoPWMud2lyZWZyYW1lTGluZXdpZHRoO2subGluZXdpZHRoPWMubGluZXdpZHRoO2QmJmsuaXNNZXNoRGlzdGFuY2VNYXRlcmlhbCYmKGsucmVmZXJlbmNlUG9zaXRpb24uY29weShlKSxrLm5lYXJEaXN0YW5jZT1mLGsuZmFyRGlzdGFuY2U9Zyk7cmV0dXJuIGt9XG5mdW5jdGlvbiBlKGMsaCxnLGspe3ZhciBtO2lmKCExIT09Yy52aXNpYmxlKXtpZihjLmxheWVycy50ZXN0KGgubGF5ZXJzKSYmKGMuaXNNZXNofHxjLmlzTGluZXx8Yy5pc1BvaW50cykmJmMuY2FzdFNoYWRvdyYmKCFjLmZydXN0dW1DdWxsZWR8fGYuaW50ZXJzZWN0c09iamVjdChjKSkpe2MubW9kZWxWaWV3TWF0cml4Lm11bHRpcGx5TWF0cmljZXMoZy5tYXRyaXhXb3JsZEludmVyc2UsYy5tYXRyaXhXb3JsZCk7dmFyIG49Yi51cGRhdGUoYyksdT1jLm1hdGVyaWFsO2lmKEFycmF5LmlzQXJyYXkodSkpZm9yKHZhciByPW4uZ3JvdXBzLHQ9MCxsPXIubGVuZ3RoO3Q8bDt0Kyspe3ZhciBJPXJbdF07KG09dVtJLm1hdGVyaWFsSW5kZXhdKSYmbS52aXNpYmxlJiYobT1kKGMsbSxrLHEsZy5uZWFyLGcuZmFyKSxhLnJlbmRlckJ1ZmZlckRpcmVjdChnLG51bGwsbixtLGMsSSkpfWVsc2UgdS52aXNpYmxlJiYobT1kKGMsdSxrLHEsZy5uZWFyLGcuZmFyKSxhLnJlbmRlckJ1ZmZlckRpcmVjdChnLFxubnVsbCxuLG0sYyxudWxsKSl9Yz1jLmNoaWxkcmVuO249MDtmb3IodT1jLmxlbmd0aDtuPHU7bisrKWUoY1tuXSxoLGcsayl9fXZhciBmPW5ldyByZCxnPW5ldyBPLGg9bmV3IEQsaz1uZXcgRChjLGMpLG09bmV3IHAscT1uZXcgcCxuPUFycmF5KDQpLHU9QXJyYXkoNCkscj17fSx0PVtuZXcgcCgxLDAsMCksbmV3IHAoLTEsMCwwKSxuZXcgcCgwLDAsMSksbmV3IHAoMCwwLC0xKSxuZXcgcCgwLDEsMCksbmV3IHAoMCwtMSwwKV0sbD1bbmV3IHAoMCwxLDApLG5ldyBwKDAsMSwwKSxuZXcgcCgwLDEsMCksbmV3IHAoMCwxLDApLG5ldyBwKDAsMCwxKSxuZXcgcCgwLDAsLTEpXSx3PVtuZXcgYWEsbmV3IGFhLG5ldyBhYSxuZXcgYWEsbmV3IGFhLG5ldyBhYV07Zm9yKGM9MDs0IT09YzsrK2Mpe3ZhciB6PTAhPT0oYyYxKSx5PTAhPT0oYyYyKSxJPW5ldyBlYih7ZGVwdGhQYWNraW5nOjMyMDEsbW9ycGhUYXJnZXRzOnosc2tpbm5pbmc6eX0pO25bY109STt6PW5ldyBmYih7bW9ycGhUYXJnZXRzOnosXG5za2lubmluZzp5fSk7dVtjXT16fXZhciBBPXRoaXM7dGhpcy5lbmFibGVkPSExO3RoaXMuYXV0b1VwZGF0ZT0hMDt0aGlzLm5lZWRzVXBkYXRlPSExO3RoaXMudHlwZT0xO3RoaXMucmVuZGVyU2luZ2xlU2lkZWQ9dGhpcy5yZW5kZXJSZXZlcnNlU2lkZWQ9ITA7dGhpcy5yZW5kZXI9ZnVuY3Rpb24oYixjLGQpe2lmKCExIT09QS5lbmFibGVkJiYoITEhPT1BLmF1dG9VcGRhdGV8fCExIT09QS5uZWVkc1VwZGF0ZSkmJjAhPT1iLmxlbmd0aCl7dmFyIG49YS5zdGF0ZTtuLmRpc2FibGUoYS5jb250ZXh0LkJMRU5EKTtuLmJ1ZmZlcnMuY29sb3Iuc2V0Q2xlYXIoMSwxLDEsMSk7bi5idWZmZXJzLmRlcHRoLnNldFRlc3QoITApO24uc2V0U2Npc3NvclRlc3QoITEpO2Zvcih2YXIgdSxyPTAsST1iLmxlbmd0aDtyPEk7cisrKXt2YXIgdj1iW3JdO3U9di5zaGFkb3c7dmFyIHA9diYmdi5pc1BvaW50TGlnaHQ7aWYodm9pZCAwPT09dSljb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFNoYWRvd01hcDpcIixcbnYsXCJoYXMgbm8gc2hhZG93LlwiKTtlbHNle3ZhciB6PXUuY2FtZXJhO2guY29weSh1Lm1hcFNpemUpO2gubWluKGspO2lmKHApe3ZhciB5PWgueCxKPWgueTt3WzBdLnNldCgyKnksSix5LEopO3dbMV0uc2V0KDAsSix5LEopO3dbMl0uc2V0KDMqeSxKLHksSik7d1szXS5zZXQoeSxKLHksSik7d1s0XS5zZXQoMyp5LDAseSxKKTt3WzVdLnNldCh5LDAseSxKKTtoLngqPTQ7aC55Kj0yfW51bGw9PT11Lm1hcCYmKHUubWFwPW5ldyBrYihoLngsaC55LHttaW5GaWx0ZXI6MTAwMyxtYWdGaWx0ZXI6MTAwMyxmb3JtYXQ6MTAyM30pLHUubWFwLnRleHR1cmUubmFtZT12Lm5hbWUrXCIuc2hhZG93TWFwXCIsei51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCkpO3UuaXNTcG90TGlnaHRTaGFkb3cmJnUudXBkYXRlKHYpO3k9dS5tYXA7Sj11Lm1hdHJpeDtxLnNldEZyb21NYXRyaXhQb3NpdGlvbih2Lm1hdHJpeFdvcmxkKTt6LnBvc2l0aW9uLmNvcHkocSk7cD8odT02LEoubWFrZVRyYW5zbGF0aW9uKC1xLngsXG4tcS55LC1xLnopKToodT0xLG0uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHYudGFyZ2V0Lm1hdHJpeFdvcmxkKSx6Lmxvb2tBdChtKSx6LnVwZGF0ZU1hdHJpeFdvcmxkKCksSi5zZXQoLjUsMCwwLC41LDAsLjUsMCwuNSwwLDAsLjUsLjUsMCwwLDAsMSksSi5tdWx0aXBseSh6LnByb2plY3Rpb25NYXRyaXgpLEoubXVsdGlwbHkoei5tYXRyaXhXb3JsZEludmVyc2UpKTthLnNldFJlbmRlclRhcmdldCh5KTthLmNsZWFyKCk7Zm9yKHY9MDt2PHU7disrKXAmJihtLmNvcHkoei5wb3NpdGlvbiksbS5hZGQodFt2XSksei51cC5jb3B5KGxbdl0pLHoubG9va0F0KG0pLHoudXBkYXRlTWF0cml4V29ybGQoKSxuLnZpZXdwb3J0KHdbdl0pKSxnLm11bHRpcGx5TWF0cmljZXMoei5wcm9qZWN0aW9uTWF0cml4LHoubWF0cml4V29ybGRJbnZlcnNlKSxmLnNldEZyb21NYXRyaXgoZyksZShjLGQseixwKX19QS5uZWVkc1VwZGF0ZT0hMX19fWZ1bmN0aW9uIGJnKGEpe3ZhciBiPXt9O3JldHVybntnZXQ6ZnVuY3Rpb24oYSl7YS5pc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlJiZcbihhPWEuZGF0YSk7cmV0dXJuIGJbYS51dWlkXX0scmVtb3ZlOmZ1bmN0aW9uKGMpe2MuaXNJbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZSYmKGM9Yy5kYXRhKTt2YXIgZD1iW2MudXVpZF07ZCYmKGEuZGVsZXRlQnVmZmVyKGQuYnVmZmVyKSxkZWxldGUgYltjLnV1aWRdKX0sdXBkYXRlOmZ1bmN0aW9uKGMsZCl7Yy5pc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlJiYoYz1jLmRhdGEpO3ZhciBlPWJbYy51dWlkXTtpZih2b2lkIDA9PT1lKXt2YXIgZT1jLnV1aWQsZj1jLmFycmF5LGc9Yy5keW5hbWljP2EuRFlOQU1JQ19EUkFXOmEuU1RBVElDX0RSQVcsaD1hLmNyZWF0ZUJ1ZmZlcigpO2EuYmluZEJ1ZmZlcihkLGgpO2EuYnVmZmVyRGF0YShkLGYsZyk7Yy5vblVwbG9hZENhbGxiYWNrKCk7ZD1hLkZMT0FUO2YgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXk/ZD1hLkZMT0FUOmYgaW5zdGFuY2VvZiBGbG9hdDY0QXJyYXk/Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xBdHRyaWJ1dGVzOiBVbnN1cHBvcnRlZCBkYXRhIGJ1ZmZlciBmb3JtYXQ6IEZsb2F0NjRBcnJheS5cIik6XG5mIGluc3RhbmNlb2YgVWludDE2QXJyYXk/ZD1hLlVOU0lHTkVEX1NIT1JUOmYgaW5zdGFuY2VvZiBJbnQxNkFycmF5P2Q9YS5TSE9SVDpmIGluc3RhbmNlb2YgVWludDMyQXJyYXk/ZD1hLlVOU0lHTkVEX0lOVDpmIGluc3RhbmNlb2YgSW50MzJBcnJheT9kPWEuSU5UOmYgaW5zdGFuY2VvZiBJbnQ4QXJyYXk/ZD1hLkJZVEU6ZiBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkmJihkPWEuVU5TSUdORURfQllURSk7YltlXT17YnVmZmVyOmgsdHlwZTpkLGJ5dGVzUGVyRWxlbWVudDpmLkJZVEVTX1BFUl9FTEVNRU5ULHZlcnNpb246Yy52ZXJzaW9ufX1lbHNlIGUudmVyc2lvbjxjLnZlcnNpb24mJihmPWMsaD1mLmFycmF5LGc9Zi51cGRhdGVSYW5nZSxhLmJpbmRCdWZmZXIoZCxlLmJ1ZmZlciksITE9PT1mLmR5bmFtaWM/YS5idWZmZXJEYXRhKGQsaCxhLlNUQVRJQ19EUkFXKTotMT09PWcuY291bnQ/YS5idWZmZXJTdWJEYXRhKGQsMCxoKTowPT09Zy5jb3VudD9jb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xPYmplY3RzLnVwZGF0ZUJ1ZmZlcjogZHluYW1pYyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUgbWFya2VkIGFzIG5lZWRzVXBkYXRlIGJ1dCB1cGRhdGVSYW5nZS5jb3VudCBpcyAwLCBlbnN1cmUgeW91IGFyZSB1c2luZyBzZXQgbWV0aG9kcyBvciB1cGRhdGluZyBtYW51YWxseS5cIik6XG4oYS5idWZmZXJTdWJEYXRhKGQsZy5vZmZzZXQqaC5CWVRFU19QRVJfRUxFTUVOVCxoLnN1YmFycmF5KGcub2Zmc2V0LGcub2Zmc2V0K2cuY291bnQpKSxnLmNvdW50PS0xKSxlLnZlcnNpb249Yy52ZXJzaW9uKX19fWZ1bmN0aW9uIGdiKGEsYixjLGQpe3RoaXMuX3g9YXx8MDt0aGlzLl95PWJ8fDA7dGhpcy5fej1jfHwwO3RoaXMuX29yZGVyPWR8fGdiLkRlZmF1bHRPcmRlcn1mdW5jdGlvbiBXZCgpe3RoaXMubWFzaz0xfWZ1bmN0aW9uIHgoKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlkXCIse3ZhbHVlOmNnKyt9KTt0aGlzLnV1aWQ9US5nZW5lcmF0ZVVVSUQoKTt0aGlzLm5hbWU9XCJcIjt0aGlzLnR5cGU9XCJPYmplY3QzRFwiO3RoaXMucGFyZW50PW51bGw7dGhpcy5jaGlsZHJlbj1bXTt0aGlzLnVwPXguRGVmYXVsdFVwLmNsb25lKCk7dmFyIGE9bmV3IHAsYj1uZXcgZ2IsYz1uZXcgaGEsZD1uZXcgcCgxLDEsMSk7Yi5vbkNoYW5nZShmdW5jdGlvbigpe2Muc2V0RnJvbUV1bGVyKGIsXG4hMSl9KTtjLm9uQ2hhbmdlKGZ1bmN0aW9uKCl7Yi5zZXRGcm9tUXVhdGVybmlvbihjLHZvaWQgMCwhMSl9KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHtwb3NpdGlvbjp7ZW51bWVyYWJsZTohMCx2YWx1ZTphfSxyb3RhdGlvbjp7ZW51bWVyYWJsZTohMCx2YWx1ZTpifSxxdWF0ZXJuaW9uOntlbnVtZXJhYmxlOiEwLHZhbHVlOmN9LHNjYWxlOntlbnVtZXJhYmxlOiEwLHZhbHVlOmR9LG1vZGVsVmlld01hdHJpeDp7dmFsdWU6bmV3IE99LG5vcm1hbE1hdHJpeDp7dmFsdWU6bmV3IG1hfX0pO3RoaXMubWF0cml4PW5ldyBPO3RoaXMubWF0cml4V29ybGQ9bmV3IE87dGhpcy5tYXRyaXhBdXRvVXBkYXRlPXguRGVmYXVsdE1hdHJpeEF1dG9VcGRhdGU7dGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSExO3RoaXMubGF5ZXJzPW5ldyBXZDt0aGlzLnZpc2libGU9ITA7dGhpcy5yZWNlaXZlU2hhZG93PXRoaXMuY2FzdFNoYWRvdz0hMTt0aGlzLmZydXN0dW1DdWxsZWQ9ITA7dGhpcy5yZW5kZXJPcmRlcj1cbjA7dGhpcy51c2VyRGF0YT17fX1mdW5jdGlvbiBUYSgpe3guY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJDYW1lcmFcIjt0aGlzLm1hdHJpeFdvcmxkSW52ZXJzZT1uZXcgTzt0aGlzLnByb2plY3Rpb25NYXRyaXg9bmV3IE99ZnVuY3Rpb24gTGIoYSxiLGMsZCxlLGYpe1RhLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiT3J0aG9ncmFwaGljQ2FtZXJhXCI7dGhpcy56b29tPTE7dGhpcy52aWV3PW51bGw7dGhpcy5sZWZ0PWE7dGhpcy5yaWdodD1iO3RoaXMudG9wPWM7dGhpcy5ib3R0b209ZDt0aGlzLm5lYXI9dm9pZCAwIT09ZT9lOi4xO3RoaXMuZmFyPXZvaWQgMCE9PWY/ZjoyRTM7dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9ZnVuY3Rpb24gWWEoYSxiLGMsZCxlLGYpe3RoaXMuYT1hO3RoaXMuYj1iO3RoaXMuYz1jO3RoaXMubm9ybWFsPWQmJmQuaXNWZWN0b3IzP2Q6bmV3IHA7dGhpcy52ZXJ0ZXhOb3JtYWxzPUFycmF5LmlzQXJyYXkoZCk/ZDpbXTt0aGlzLmNvbG9yPWUmJmUuaXNDb2xvcj9cbmU6bmV3IEg7dGhpcy52ZXJ0ZXhDb2xvcnM9QXJyYXkuaXNBcnJheShlKT9lOltdO3RoaXMubWF0ZXJpYWxJbmRleD12b2lkIDAhPT1mP2Y6MH1mdW5jdGlvbiBMKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpZFwiLHt2YWx1ZTpkZys9Mn0pO3RoaXMudXVpZD1RLmdlbmVyYXRlVVVJRCgpO3RoaXMubmFtZT1cIlwiO3RoaXMudHlwZT1cIkdlb21ldHJ5XCI7dGhpcy52ZXJ0aWNlcz1bXTt0aGlzLmNvbG9ycz1bXTt0aGlzLmZhY2VzPVtdO3RoaXMuZmFjZVZlcnRleFV2cz1bW11dO3RoaXMubW9ycGhUYXJnZXRzPVtdO3RoaXMubW9ycGhOb3JtYWxzPVtdO3RoaXMuc2tpbldlaWdodHM9W107dGhpcy5za2luSW5kaWNlcz1bXTt0aGlzLmxpbmVEaXN0YW5jZXM9W107dGhpcy5ib3VuZGluZ1NwaGVyZT10aGlzLmJvdW5kaW5nQm94PW51bGw7dGhpcy5ncm91cHNOZWVkVXBkYXRlPXRoaXMubGluZURpc3RhbmNlc05lZWRVcGRhdGU9dGhpcy5jb2xvcnNOZWVkVXBkYXRlPXRoaXMubm9ybWFsc05lZWRVcGRhdGU9XG50aGlzLnV2c05lZWRVcGRhdGU9dGhpcy52ZXJ0aWNlc05lZWRVcGRhdGU9dGhpcy5lbGVtZW50c05lZWRVcGRhdGU9ITF9ZnVuY3Rpb24gTShhLGIsYyl7aWYoQXJyYXkuaXNBcnJheShhKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlOiBhcnJheSBzaG91bGQgYmUgYSBUeXBlZCBBcnJheS5cIik7dGhpcy51dWlkPVEuZ2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPVwiXCI7dGhpcy5hcnJheT1hO3RoaXMuaXRlbVNpemU9Yjt0aGlzLmNvdW50PXZvaWQgMCE9PWE/YS5sZW5ndGgvYjowO3RoaXMubm9ybWFsaXplZD0hMD09PWM7dGhpcy5keW5hbWljPSExO3RoaXMudXBkYXRlUmFuZ2U9e29mZnNldDowLGNvdW50Oi0xfTt0aGlzLm9uVXBsb2FkQ2FsbGJhY2s9ZnVuY3Rpb24oKXt9O3RoaXMudmVyc2lvbj0wfWZ1bmN0aW9uIHVjKGEsYixjKXtNLmNhbGwodGhpcyxuZXcgSW50OEFycmF5KGEpLGIsYyl9ZnVuY3Rpb24gdmMoYSxiLGMpe00uY2FsbCh0aGlzLG5ldyBVaW50OEFycmF5KGEpLFxuYixjKX1mdW5jdGlvbiB3YyhhLGIsYyl7TS5jYWxsKHRoaXMsbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGEpLGIsYyl9ZnVuY3Rpb24geGMoYSxiLGMpe00uY2FsbCh0aGlzLG5ldyBJbnQxNkFycmF5KGEpLGIsYyl9ZnVuY3Rpb24gb2IoYSxiLGMpe00uY2FsbCh0aGlzLG5ldyBVaW50MTZBcnJheShhKSxiLGMpfWZ1bmN0aW9uIHljKGEsYixjKXtNLmNhbGwodGhpcyxuZXcgSW50MzJBcnJheShhKSxiLGMpfWZ1bmN0aW9uIHBiKGEsYixjKXtNLmNhbGwodGhpcyxuZXcgVWludDMyQXJyYXkoYSksYixjKX1mdW5jdGlvbiBCKGEsYixjKXtNLmNhbGwodGhpcyxuZXcgRmxvYXQzMkFycmF5KGEpLGIsYyl9ZnVuY3Rpb24gemMoYSxiLGMpe00uY2FsbCh0aGlzLG5ldyBGbG9hdDY0QXJyYXkoYSksYixjKX1mdW5jdGlvbiBWZSgpe3RoaXMuaW5kaWNlcz1bXTt0aGlzLnZlcnRpY2VzPVtdO3RoaXMubm9ybWFscz1bXTt0aGlzLmNvbG9ycz1bXTt0aGlzLnV2cz1bXTt0aGlzLnV2czI9W107dGhpcy5ncm91cHM9XG5bXTt0aGlzLm1vcnBoVGFyZ2V0cz17fTt0aGlzLnNraW5XZWlnaHRzPVtdO3RoaXMuc2tpbkluZGljZXM9W107dGhpcy5ib3VuZGluZ1NwaGVyZT10aGlzLmJvdW5kaW5nQm94PW51bGw7dGhpcy5ncm91cHNOZWVkVXBkYXRlPXRoaXMudXZzTmVlZFVwZGF0ZT10aGlzLmNvbG9yc05lZWRVcGRhdGU9dGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT10aGlzLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMX1mdW5jdGlvbiBYZChhKXtpZigwPT09YS5sZW5ndGgpcmV0dXJuLUluZmluaXR5O2Zvcih2YXIgYj1hWzBdLGM9MSxkPWEubGVuZ3RoO2M8ZDsrK2MpYVtjXT5iJiYoYj1hW2NdKTtyZXR1cm4gYn1mdW5jdGlvbiBFKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpZFwiLHt2YWx1ZTplZys9Mn0pO3RoaXMudXVpZD1RLmdlbmVyYXRlVVVJRCgpO3RoaXMubmFtZT1cIlwiO3RoaXMudHlwZT1cIkJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5pbmRleD1udWxsO3RoaXMuYXR0cmlidXRlcz17fTt0aGlzLm1vcnBoQXR0cmlidXRlcz1cbnt9O3RoaXMuZ3JvdXBzPVtdO3RoaXMuYm91bmRpbmdTcGhlcmU9dGhpcy5ib3VuZGluZ0JveD1udWxsO3RoaXMuZHJhd1JhbmdlPXtzdGFydDowLGNvdW50OkluZmluaXR5fX1mdW5jdGlvbiBNYihhLGIsYyxkLGUsZil7TC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkJveEdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXt3aWR0aDphLGhlaWdodDpiLGRlcHRoOmMsd2lkdGhTZWdtZW50czpkLGhlaWdodFNlZ21lbnRzOmUsZGVwdGhTZWdtZW50czpmfTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgcWIoYSxiLGMsZCxlLGYpKTt0aGlzLm1lcmdlVmVydGljZXMoKX1mdW5jdGlvbiBxYihhLGIsYyxkLGUsZil7ZnVuY3Rpb24gZyhhLGIsYyxkLGUsZixnLGwsSGEsRGEsbmEpe3ZhciB0PWYvSGEsdj1nL0RhLEk9Zi8yLEE9Zy8yLHc9bC8yO2c9SGErMTt2YXIgej1EYSsxLHk9Zj0wLEoseCxCPW5ldyBwO2Zvcih4PTA7eDx6O3grKyl7dmFyIEQ9eCp2LUE7Zm9yKEo9MDtKPGc7SisrKUJbYV09XG4oSip0LUkpKmQsQltiXT1EKmUsQltjXT13LG0ucHVzaChCLngsQi55LEIueiksQlthXT0wLEJbYl09MCxCW2NdPTA8bD8xOi0xLHEucHVzaChCLngsQi55LEIueiksbi5wdXNoKEovSGEpLG4ucHVzaCgxLXgvRGEpLGYrPTF9Zm9yKHg9MDt4PERhO3grKylmb3IoSj0wO0o8SGE7SisrKWE9dStKK2cqKHgrMSksYj11KyhKKzEpK2cqKHgrMSksYz11KyhKKzEpK2cqeCxrLnB1c2godStKK2cqeCxhLGMpLGsucHVzaChhLGIsYykseSs9NjtoLmFkZEdyb3VwKHIseSxuYSk7cis9eTt1Kz1mfUUuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJCb3hCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17d2lkdGg6YSxoZWlnaHQ6YixkZXB0aDpjLHdpZHRoU2VnbWVudHM6ZCxoZWlnaHRTZWdtZW50czplLGRlcHRoU2VnbWVudHM6Zn07dmFyIGg9dGhpczthPWF8fDE7Yj1ifHwxO2M9Y3x8MTtkPU1hdGguZmxvb3IoZCl8fDE7ZT1NYXRoLmZsb29yKGUpfHwxO2Y9TWF0aC5mbG9vcihmKXx8MTt2YXIgaz1cbltdLG09W10scT1bXSxuPVtdLHU9MCxyPTA7ZyhcInpcIixcInlcIixcInhcIiwtMSwtMSxjLGIsYSxmLGUsMCk7ZyhcInpcIixcInlcIixcInhcIiwxLC0xLGMsYiwtYSxmLGUsMSk7ZyhcInhcIixcInpcIixcInlcIiwxLDEsYSxjLGIsZCxmLDIpO2coXCJ4XCIsXCJ6XCIsXCJ5XCIsMSwtMSxhLGMsLWIsZCxmLDMpO2coXCJ4XCIsXCJ5XCIsXCJ6XCIsMSwtMSxhLGIsYyxkLGUsNCk7ZyhcInhcIixcInlcIixcInpcIiwtMSwtMSxhLGIsLWMsZCxlLDUpO3RoaXMuc2V0SW5kZXgoayk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKG0sMykpO3RoaXMuYWRkQXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IEIocSwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBCKG4sMikpfWZ1bmN0aW9uIEFjKGEsYixjLGQpe0wuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJQbGFuZUdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXt3aWR0aDphLGhlaWdodDpiLHdpZHRoU2VnbWVudHM6YyxoZWlnaHRTZWdtZW50czpkfTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgcmIoYSxcbmIsYyxkKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gcmIoYSxiLGMsZCl7RS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlBsYW5lQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3dpZHRoOmEsaGVpZ2h0OmIsd2lkdGhTZWdtZW50czpjLGhlaWdodFNlZ21lbnRzOmR9O2E9YXx8MTtiPWJ8fDE7dmFyIGU9YS8yLGY9Yi8yO2M9TWF0aC5mbG9vcihjKXx8MTtkPU1hdGguZmxvb3IoZCl8fDE7dmFyIGc9YysxLGg9ZCsxLGs9YS9jLG09Yi9kLHE9W10sbj1bXSx1PVtdLHI9W107Zm9yKGE9MDthPGg7YSsrKXt2YXIgdD1hKm0tZjtmb3IoYj0wO2I8ZztiKyspbi5wdXNoKGIqay1lLC10LDApLHUucHVzaCgwLDAsMSksci5wdXNoKGIvYyksci5wdXNoKDEtYS9kKX1mb3IoYT0wO2E8ZDthKyspZm9yKGI9MDtiPGM7YisrKWU9YitnKihhKzEpLGY9YisxK2cqKGErMSksaD1iKzErZyphLHEucHVzaChiK2cqYSxlLGgpLHEucHVzaChlLGYsaCk7dGhpcy5zZXRJbmRleChxKTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsXG5uZXcgQihuLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBCKHUsMykpO3RoaXMuYWRkQXR0cmlidXRlKFwidXZcIixuZXcgQihyLDIpKX1mdW5jdGlvbiBBYShhKXtQLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTWVzaEJhc2ljTWF0ZXJpYWxcIjt0aGlzLmNvbG9yPW5ldyBIKDE2Nzc3MjE1KTt0aGlzLmxpZ2h0TWFwPXRoaXMubWFwPW51bGw7dGhpcy5saWdodE1hcEludGVuc2l0eT0xO3RoaXMuYW9NYXA9bnVsbDt0aGlzLmFvTWFwSW50ZW5zaXR5PTE7dGhpcy5lbnZNYXA9dGhpcy5hbHBoYU1hcD10aGlzLnNwZWN1bGFyTWFwPW51bGw7dGhpcy5jb21iaW5lPTA7dGhpcy5yZWZsZWN0aXZpdHk9MTt0aGlzLnJlZnJhY3Rpb25SYXRpbz0uOTg7dGhpcy53aXJlZnJhbWU9ITE7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLndpcmVmcmFtZUxpbmVqb2luPXRoaXMud2lyZWZyYW1lTGluZWNhcD1cInJvdW5kXCI7dGhpcy5saWdodHM9dGhpcy5tb3JwaFRhcmdldHM9dGhpcy5za2lubmluZz1cbiExO3RoaXMuc2V0VmFsdWVzKGEpfWZ1bmN0aW9uIEZhKGEpe1AuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJTaGFkZXJNYXRlcmlhbFwiO3RoaXMuZGVmaW5lcz17fTt0aGlzLnVuaWZvcm1zPXt9O3RoaXMudmVydGV4U2hhZGVyPVwidm9pZCBtYWluKCkge1xcblxcdGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcXG59XCI7dGhpcy5mcmFnbWVudFNoYWRlcj1cInZvaWQgbWFpbigpIHtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCAxLjAsIDAuMCwgMC4wLCAxLjAgKTtcXG59XCI7dGhpcy5saW5ld2lkdGg9MTt0aGlzLndpcmVmcmFtZT0hMTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMubW9ycGhOb3JtYWxzPXRoaXMubW9ycGhUYXJnZXRzPXRoaXMuc2tpbm5pbmc9dGhpcy5jbGlwcGluZz10aGlzLmxpZ2h0cz10aGlzLmZvZz0hMTt0aGlzLmV4dGVuc2lvbnM9e2Rlcml2YXRpdmVzOiExLGZyYWdEZXB0aDohMSxcbmRyYXdCdWZmZXJzOiExLHNoYWRlclRleHR1cmVMT0Q6ITF9O3RoaXMuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlcz17Y29sb3I6WzEsMSwxXSx1djpbMCwwXSx1djI6WzAsMF19O3RoaXMuaW5kZXgwQXR0cmlidXRlTmFtZT12b2lkIDA7dm9pZCAwIT09YSYmKHZvaWQgMCE9PWEuYXR0cmlidXRlcyYmY29uc29sZS5lcnJvcihcIlRIUkVFLlNoYWRlck1hdGVyaWFsOiBhdHRyaWJ1dGVzIHNob3VsZCBub3cgYmUgZGVmaW5lZCBpbiBUSFJFRS5CdWZmZXJHZW9tZXRyeSBpbnN0ZWFkLlwiKSx0aGlzLnNldFZhbHVlcyhhKSl9ZnVuY3Rpb24gc2IoYSxiKXt0aGlzLm9yaWdpbj12b2lkIDAhPT1hP2E6bmV3IHA7dGhpcy5kaXJlY3Rpb249dm9pZCAwIT09Yj9iOm5ldyBwfWZ1bmN0aW9uIE5iKGEsYil7dGhpcy5zdGFydD12b2lkIDAhPT1hP2E6bmV3IHA7dGhpcy5lbmQ9dm9pZCAwIT09Yj9iOm5ldyBwfWZ1bmN0aW9uIFphKGEsYixjKXt0aGlzLmE9dm9pZCAwIT09YT9hOm5ldyBwO3RoaXMuYj12b2lkIDAhPT1cbmI/YjpuZXcgcDt0aGlzLmM9dm9pZCAwIT09Yz9jOm5ldyBwfWZ1bmN0aW9uIHJhKGEsYil7eC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIk1lc2hcIjt0aGlzLmdlb21ldHJ5PXZvaWQgMCE9PWE/YTpuZXcgRTt0aGlzLm1hdGVyaWFsPXZvaWQgMCE9PWI/YjpuZXcgQWEoe2NvbG9yOjE2Nzc3MjE1Kk1hdGgucmFuZG9tKCl9KTt0aGlzLmRyYXdNb2RlPTA7dGhpcy51cGRhdGVNb3JwaFRhcmdldHMoKX1mdW5jdGlvbiBmZyhhLGIsYyxkKXtmdW5jdGlvbiBlKGEsYyl7Yi5idWZmZXJzLmNvbG9yLnNldENsZWFyKGEucixhLmcsYS5iLGMsZCl9dmFyIGY9bmV3IEgoMCksZz0wLGgsayxtO3JldHVybntnZXRDbGVhckNvbG9yOmZ1bmN0aW9uKCl7cmV0dXJuIGZ9LHNldENsZWFyQ29sb3I6ZnVuY3Rpb24oYSxiKXtmLnNldChhKTtnPXZvaWQgMCE9PWI/YjoxO2UoZixnKX0sZ2V0Q2xlYXJBbHBoYTpmdW5jdGlvbigpe3JldHVybiBnfSxzZXRDbGVhckFscGhhOmZ1bmN0aW9uKGEpe2c9YTtlKGYsXG5nKX0scmVuZGVyOmZ1bmN0aW9uKGIsZCx1LHIpe2Q9ZC5iYWNrZ3JvdW5kO251bGw9PT1kP2UoZixnKTpkJiZkLmlzQ29sb3ImJihlKGQsMSkscj0hMCk7KGEuYXV0b0NsZWFyfHxyKSYmYS5jbGVhcihhLmF1dG9DbGVhckNvbG9yLGEuYXV0b0NsZWFyRGVwdGgsYS5hdXRvQ2xlYXJTdGVuY2lsKTtkJiZkLmlzQ3ViZVRleHR1cmU/KHZvaWQgMD09PW0mJihtPW5ldyByYShuZXcgcWIoMSwxLDEpLG5ldyBGYSh7dW5pZm9ybXM6dGIuY3ViZS51bmlmb3Jtcyx2ZXJ0ZXhTaGFkZXI6dGIuY3ViZS52ZXJ0ZXhTaGFkZXIsZnJhZ21lbnRTaGFkZXI6dGIuY3ViZS5mcmFnbWVudFNoYWRlcixzaWRlOjEsZGVwdGhUZXN0OiEwLGRlcHRoV3JpdGU6ITEsZm9nOiExfSkpLG0uZ2VvbWV0cnkucmVtb3ZlQXR0cmlidXRlKFwibm9ybWFsXCIpLG0uZ2VvbWV0cnkucmVtb3ZlQXR0cmlidXRlKFwidXZcIiksbS5vbkJlZm9yZVJlbmRlcj1mdW5jdGlvbihhLGIsYyl7dGhpcy5tYXRyaXhXb3JsZC5jb3B5UG9zaXRpb24oYy5tYXRyaXhXb3JsZCl9LFxuYy51cGRhdGUobS5nZW9tZXRyeSkpLG0ubWF0ZXJpYWwudW5pZm9ybXMudEN1YmUudmFsdWU9ZCxiLnB1c2gobSxtLmdlb21ldHJ5LG0ubWF0ZXJpYWwsMCxudWxsKSk6ZCYmZC5pc1RleHR1cmUmJih2b2lkIDA9PT1oJiYoaD1uZXcgTGIoLTEsMSwxLC0xLDAsMSksaz1uZXcgcmEobmV3IHJiKDIsMiksbmV3IEFhKHtkZXB0aFRlc3Q6ITEsZGVwdGhXcml0ZTohMSxmb2c6ITF9KSksYy51cGRhdGUoay5nZW9tZXRyeSkpLGsubWF0ZXJpYWwubWFwPWQsYS5yZW5kZXJCdWZmZXJEaXJlY3QoaCxudWxsLGsuZ2VvbWV0cnksay5tYXRlcmlhbCxrLG51bGwpKX19fWZ1bmN0aW9uIGdnKGEsYil7cmV0dXJuIGEucmVuZGVyT3JkZXIhPT1iLnJlbmRlck9yZGVyP2EucmVuZGVyT3JkZXItYi5yZW5kZXJPcmRlcjphLnByb2dyYW0mJmIucHJvZ3JhbSYmYS5wcm9ncmFtIT09Yi5wcm9ncmFtP2EucHJvZ3JhbS5pZC1iLnByb2dyYW0uaWQ6YS5tYXRlcmlhbC5pZCE9PWIubWF0ZXJpYWwuaWQ/YS5tYXRlcmlhbC5pZC1cbmIubWF0ZXJpYWwuaWQ6YS56IT09Yi56P2Euei1iLno6YS5pZC1iLmlkfWZ1bmN0aW9uIGhnKGEsYil7cmV0dXJuIGEucmVuZGVyT3JkZXIhPT1iLnJlbmRlck9yZGVyP2EucmVuZGVyT3JkZXItYi5yZW5kZXJPcmRlcjphLnohPT1iLno/Yi56LWEuejphLmlkLWIuaWR9ZnVuY3Rpb24gaWcoKXt2YXIgYT1bXSxiPTAsYz1bXSxkPVtdO3JldHVybntvcGFxdWU6Yyx0cmFuc3BhcmVudDpkLGluaXQ6ZnVuY3Rpb24oKXtiPTA7Yy5sZW5ndGg9MDtkLmxlbmd0aD0wfSxwdXNoOmZ1bmN0aW9uKGUsZixnLGgsayl7dmFyIG09YVtiXTt2b2lkIDA9PT1tPyhtPXtpZDplLmlkLG9iamVjdDplLGdlb21ldHJ5OmYsbWF0ZXJpYWw6Zyxwcm9ncmFtOmcucHJvZ3JhbSxyZW5kZXJPcmRlcjplLnJlbmRlck9yZGVyLHo6aCxncm91cDprfSxhW2JdPW0pOihtLmlkPWUuaWQsbS5vYmplY3Q9ZSxtLmdlb21ldHJ5PWYsbS5tYXRlcmlhbD1nLG0ucHJvZ3JhbT1nLnByb2dyYW0sbS5yZW5kZXJPcmRlcj1lLnJlbmRlck9yZGVyLFxubS56PWgsbS5ncm91cD1rKTsoITA9PT1nLnRyYW5zcGFyZW50P2Q6YykucHVzaChtKTtiKyt9LHNvcnQ6ZnVuY3Rpb24oKXsxPGMubGVuZ3RoJiZjLnNvcnQoZ2cpOzE8ZC5sZW5ndGgmJmQuc29ydChoZyl9fX1mdW5jdGlvbiBqZygpe3ZhciBhPXt9O3JldHVybntnZXQ6ZnVuY3Rpb24oYixjKXtiPWIuaWQrXCIsXCIrYy5pZDtjPWFbYl07dm9pZCAwPT09YyYmKGM9bmV3IGlnLGFbYl09Yyk7cmV0dXJuIGN9LGRpc3Bvc2U6ZnVuY3Rpb24oKXthPXt9fX19ZnVuY3Rpb24ga2coYSxiKXtyZXR1cm4gTWF0aC5hYnMoYlsxXSktTWF0aC5hYnMoYVsxXSl9ZnVuY3Rpb24gbGcoYSl7dmFyIGI9e30sYz1uZXcgRmxvYXQzMkFycmF5KDgpO3JldHVybnt1cGRhdGU6ZnVuY3Rpb24oZCxlLGYsZyl7dmFyIGg9ZC5tb3JwaFRhcmdldEluZmx1ZW5jZXMsaz1oLmxlbmd0aDtkPWJbZS5pZF07aWYodm9pZCAwPT09ZCl7ZD1bXTtmb3IodmFyIG09MDttPGs7bSsrKWRbbV09W20sMF07YltlLmlkXT1kfXZhciBxPVxuZi5tb3JwaFRhcmdldHMmJmUubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uO2Y9Zi5tb3JwaE5vcm1hbHMmJmUubW9ycGhBdHRyaWJ1dGVzLm5vcm1hbDtmb3IobT0wO208azttKyspe3ZhciBuPWRbbV07MCE9PW5bMV0mJihxJiZlLnJlbW92ZUF0dHJpYnV0ZShcIm1vcnBoVGFyZ2V0XCIrbSksZiYmZS5yZW1vdmVBdHRyaWJ1dGUoXCJtb3JwaE5vcm1hbFwiK20pKX1mb3IobT0wO208azttKyspbj1kW21dLG5bMF09bSxuWzFdPWhbbV07ZC5zb3J0KGtnKTtmb3IobT0wOzg+bTttKyspe2lmKG49ZFttXSlpZihoPW5bMF0sbj1uWzFdKXtxJiZlLmFkZEF0dHJpYnV0ZShcIm1vcnBoVGFyZ2V0XCIrbSxxW2hdKTtmJiZlLmFkZEF0dHJpYnV0ZShcIm1vcnBoTm9ybWFsXCIrbSxmW2hdKTtjW21dPW47Y29udGludWV9Y1ttXT0wfWcuZ2V0VW5pZm9ybXMoKS5zZXRWYWx1ZShhLFwibW9ycGhUYXJnZXRJbmZsdWVuY2VzXCIsYyl9fX1mdW5jdGlvbiBtZyhhLGIsYyl7dmFyIGQsZSxmO3RoaXMuc2V0TW9kZT1mdW5jdGlvbihhKXtkPVxuYX07dGhpcy5zZXRJbmRleD1mdW5jdGlvbihhKXtlPWEudHlwZTtmPWEuYnl0ZXNQZXJFbGVtZW50fTt0aGlzLnJlbmRlcj1mdW5jdGlvbihiLGgpe2EuZHJhd0VsZW1lbnRzKGQsaCxlLGIqZik7Yy5jYWxscysrO2MudmVydGljZXMrPWg7ZD09PWEuVFJJQU5HTEVTP2MuZmFjZXMrPWgvMzpkPT09YS5QT0lOVFMmJihjLnBvaW50cys9aCl9O3RoaXMucmVuZGVySW5zdGFuY2VzPWZ1bmN0aW9uKGcsaCxrKXt2YXIgbT1iLmdldChcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIik7bnVsbD09PW0/Y29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMSW5kZXhlZEJ1ZmZlclJlbmRlcmVyOiB1c2luZyBUSFJFRS5JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSBidXQgaGFyZHdhcmUgZG9lcyBub3Qgc3VwcG9ydCBleHRlbnNpb24gQU5HTEVfaW5zdGFuY2VkX2FycmF5cy5cIik6KG0uZHJhd0VsZW1lbnRzSW5zdGFuY2VkQU5HTEUoZCxrLGUsaCpmLGcubWF4SW5zdGFuY2VkQ291bnQpLGMuY2FsbHMrKyxjLnZlcnRpY2VzKz1cbmsqZy5tYXhJbnN0YW5jZWRDb3VudCxkPT09YS5UUklBTkdMRVM/Yy5mYWNlcys9Zy5tYXhJbnN0YW5jZWRDb3VudCprLzM6ZD09PWEuUE9JTlRTJiYoYy5wb2ludHMrPWcubWF4SW5zdGFuY2VkQ291bnQqaykpfX1mdW5jdGlvbiBuZyhhLGIsYyl7dmFyIGQ7dGhpcy5zZXRNb2RlPWZ1bmN0aW9uKGEpe2Q9YX07dGhpcy5yZW5kZXI9ZnVuY3Rpb24oYixmKXthLmRyYXdBcnJheXMoZCxiLGYpO2MuY2FsbHMrKztjLnZlcnRpY2VzKz1mO2Q9PT1hLlRSSUFOR0xFUz9jLmZhY2VzKz1mLzM6ZD09PWEuUE9JTlRTJiYoYy5wb2ludHMrPWYpfTt0aGlzLnJlbmRlckluc3RhbmNlcz1mdW5jdGlvbihlLGYsZyl7dmFyIGg9Yi5nZXQoXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpO2lmKG51bGw9PT1oKWNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTEJ1ZmZlclJlbmRlcmVyOiB1c2luZyBUSFJFRS5JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSBidXQgaGFyZHdhcmUgZG9lcyBub3Qgc3VwcG9ydCBleHRlbnNpb24gQU5HTEVfaW5zdGFuY2VkX2FycmF5cy5cIik7XG5lbHNle3ZhciBrPWUuYXR0cmlidXRlcy5wb3NpdGlvbjtrLmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGU/KGc9ay5kYXRhLmNvdW50LGguZHJhd0FycmF5c0luc3RhbmNlZEFOR0xFKGQsMCxnLGUubWF4SW5zdGFuY2VkQ291bnQpKTpoLmRyYXdBcnJheXNJbnN0YW5jZWRBTkdMRShkLGYsZyxlLm1heEluc3RhbmNlZENvdW50KTtjLmNhbGxzKys7Yy52ZXJ0aWNlcys9ZyplLm1heEluc3RhbmNlZENvdW50O2Q9PT1hLlRSSUFOR0xFUz9jLmZhY2VzKz1lLm1heEluc3RhbmNlZENvdW50KmcvMzpkPT09YS5QT0lOVFMmJihjLnBvaW50cys9ZS5tYXhJbnN0YW5jZWRDb3VudCpnKX19fWZ1bmN0aW9uIG9nKGEsYixjKXtmdW5jdGlvbiBkKGEpe2E9YS50YXJnZXQ7dmFyIGg9ZVthLmlkXTtudWxsIT09aC5pbmRleCYmYi5yZW1vdmUoaC5pbmRleCk7Zm9yKHZhciBnIGluIGguYXR0cmlidXRlcyliLnJlbW92ZShoLmF0dHJpYnV0ZXNbZ10pO2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixcbmQpO2RlbGV0ZSBlW2EuaWRdO2lmKGc9ZlthLmlkXSliLnJlbW92ZShnKSxkZWxldGUgZlthLmlkXTtpZihnPWZbaC5pZF0pYi5yZW1vdmUoZyksZGVsZXRlIGZbaC5pZF07Yy5nZW9tZXRyaWVzLS19dmFyIGU9e30sZj17fTtyZXR1cm57Z2V0OmZ1bmN0aW9uKGEsYil7dmFyIGY9ZVtiLmlkXTtpZihmKXJldHVybiBmO2IuYWRkRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixkKTtiLmlzQnVmZmVyR2VvbWV0cnk/Zj1iOmIuaXNHZW9tZXRyeSYmKHZvaWQgMD09PWIuX2J1ZmZlckdlb21ldHJ5JiYoYi5fYnVmZmVyR2VvbWV0cnk9KG5ldyBFKS5zZXRGcm9tT2JqZWN0KGEpKSxmPWIuX2J1ZmZlckdlb21ldHJ5KTtlW2IuaWRdPWY7Yy5nZW9tZXRyaWVzKys7cmV0dXJuIGZ9LHVwZGF0ZTpmdW5jdGlvbihjKXt2YXIgZD1jLmluZGV4LGU9Yy5hdHRyaWJ1dGVzO251bGwhPT1kJiZiLnVwZGF0ZShkLGEuRUxFTUVOVF9BUlJBWV9CVUZGRVIpO2Zvcih2YXIgZiBpbiBlKWIudXBkYXRlKGVbZl0sXG5hLkFSUkFZX0JVRkZFUik7Yz1jLm1vcnBoQXR0cmlidXRlcztmb3IoZiBpbiBjKWZvcih2YXIgZD1jW2ZdLGU9MCxnPWQubGVuZ3RoO2U8ZztlKyspYi51cGRhdGUoZFtlXSxhLkFSUkFZX0JVRkZFUil9LGdldFdpcmVmcmFtZUF0dHJpYnV0ZTpmdW5jdGlvbihjKXt2YXIgZD1mW2MuaWRdO2lmKGQpcmV0dXJuIGQ7ZD1bXTt2YXIgZT1jLmluZGV4O3ZhciBnPWMuYXR0cmlidXRlcztpZihudWxsIT09ZSl7dmFyIHE9ZS5hcnJheTtmb3IodmFyIG49MCx1PXEubGVuZ3RoO248dTtuKz0zKXt2YXIgcj1xW24rMF07Zz1xW24rMV07ZT1xW24rMl07ZC5wdXNoKHIsZyxnLGUsZSxyKX19ZWxzZSBmb3IocT1nLnBvc2l0aW9uLmFycmF5LG49MCx1PXEubGVuZ3RoLzMtMTtuPHU7bis9MylyPW4rMCxnPW4rMSxlPW4rMixkLnB1c2gocixnLGcsZSxlLHIpO2Q9bmV3ICg2NTUzNTxYZChkKT9wYjpvYikoZCwxKTtiLnVwZGF0ZShkLGEuRUxFTUVOVF9BUlJBWV9CVUZGRVIpO3JldHVybiBmW2MuaWRdPVxuZH19fWZ1bmN0aW9uIHBnKCl7dmFyIGE9e307cmV0dXJue2dldDpmdW5jdGlvbihiKXtpZih2b2lkIDAhPT1hW2IuaWRdKXJldHVybiBhW2IuaWRdO3N3aXRjaChiLnR5cGUpe2Nhc2UgXCJEaXJlY3Rpb25hbExpZ2h0XCI6dmFyIGM9e2RpcmVjdGlvbjpuZXcgcCxjb2xvcjpuZXcgSCxzaGFkb3c6ITEsc2hhZG93QmlhczowLHNoYWRvd1JhZGl1czoxLHNoYWRvd01hcFNpemU6bmV3IER9O2JyZWFrO2Nhc2UgXCJTcG90TGlnaHRcIjpjPXtwb3NpdGlvbjpuZXcgcCxkaXJlY3Rpb246bmV3IHAsY29sb3I6bmV3IEgsZGlzdGFuY2U6MCxjb25lQ29zOjAscGVudW1icmFDb3M6MCxkZWNheTowLHNoYWRvdzohMSxzaGFkb3dCaWFzOjAsc2hhZG93UmFkaXVzOjEsc2hhZG93TWFwU2l6ZTpuZXcgRH07YnJlYWs7Y2FzZSBcIlBvaW50TGlnaHRcIjpjPXtwb3NpdGlvbjpuZXcgcCxjb2xvcjpuZXcgSCxkaXN0YW5jZTowLGRlY2F5OjAsc2hhZG93OiExLHNoYWRvd0JpYXM6MCxzaGFkb3dSYWRpdXM6MSxzaGFkb3dNYXBTaXplOm5ldyBELFxuc2hhZG93Q2FtZXJhTmVhcjoxLHNoYWRvd0NhbWVyYUZhcjoxRTN9O2JyZWFrO2Nhc2UgXCJIZW1pc3BoZXJlTGlnaHRcIjpjPXtkaXJlY3Rpb246bmV3IHAsc2t5Q29sb3I6bmV3IEgsZ3JvdW5kQ29sb3I6bmV3IEh9O2JyZWFrO2Nhc2UgXCJSZWN0QXJlYUxpZ2h0XCI6Yz17Y29sb3I6bmV3IEgscG9zaXRpb246bmV3IHAsaGFsZldpZHRoOm5ldyBwLGhhbGZIZWlnaHQ6bmV3IHB9fXJldHVybiBhW2IuaWRdPWN9fX1mdW5jdGlvbiBxZygpe3ZhciBhPW5ldyBwZyxiPXtoYXNoOlwiXCIsYW1iaWVudDpbMCwwLDBdLGRpcmVjdGlvbmFsOltdLGRpcmVjdGlvbmFsU2hhZG93TWFwOltdLGRpcmVjdGlvbmFsU2hhZG93TWF0cml4OltdLHNwb3Q6W10sc3BvdFNoYWRvd01hcDpbXSxzcG90U2hhZG93TWF0cml4OltdLHJlY3RBcmVhOltdLHBvaW50OltdLHBvaW50U2hhZG93TWFwOltdLHBvaW50U2hhZG93TWF0cml4OltdLGhlbWk6W119LGM9bmV3IHAsZD1uZXcgTyxlPW5ldyBPO3JldHVybntzZXR1cDpmdW5jdGlvbihmLFxuZyxoKXtmb3IodmFyIGssbT0wLHE9MCxuPTAsdT0wLHI9MCx0PTAsbD0wLHc9MCxwPWgubWF0cml4V29ybGRJbnZlcnNlLHk9MCxJPWYubGVuZ3RoO3k8STt5Kyspe3ZhciBBPWZbeV07az1BLmNvbG9yO3ZhciBKPUEuaW50ZW5zaXR5LEhhPUEuZGlzdGFuY2UsRGE9QS5zaGFkb3cmJkEuc2hhZG93Lm1hcD9BLnNoYWRvdy5tYXAudGV4dHVyZTpudWxsO2lmKEEuaXNBbWJpZW50TGlnaHQpbSs9ay5yKkoscSs9ay5nKkosbis9ay5iKko7ZWxzZSBpZihBLmlzRGlyZWN0aW9uYWxMaWdodCl7aD1hLmdldChBKTtoLmNvbG9yLmNvcHkoQS5jb2xvcikubXVsdGlwbHlTY2FsYXIoQS5pbnRlbnNpdHkpO2guZGlyZWN0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihBLm1hdHJpeFdvcmxkKTtjLnNldEZyb21NYXRyaXhQb3NpdGlvbihBLnRhcmdldC5tYXRyaXhXb3JsZCk7aC5kaXJlY3Rpb24uc3ViKGMpO2guZGlyZWN0aW9uLnRyYW5zZm9ybURpcmVjdGlvbihwKTtpZihoLnNoYWRvdz1BLmNhc3RTaGFkb3cpaz1cbkEuc2hhZG93LGguc2hhZG93Qmlhcz1rLmJpYXMsaC5zaGFkb3dSYWRpdXM9ay5yYWRpdXMsaC5zaGFkb3dNYXBTaXplPWsubWFwU2l6ZTtiLmRpcmVjdGlvbmFsU2hhZG93TWFwW3VdPURhO2IuZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXhbdV09QS5zaGFkb3cubWF0cml4O2IuZGlyZWN0aW9uYWxbdV09aDt1Kyt9ZWxzZSBpZihBLmlzU3BvdExpZ2h0KXtoPWEuZ2V0KEEpO2gucG9zaXRpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKEEubWF0cml4V29ybGQpO2gucG9zaXRpb24uYXBwbHlNYXRyaXg0KHApO2guY29sb3IuY29weShrKS5tdWx0aXBseVNjYWxhcihKKTtoLmRpc3RhbmNlPUhhO2guZGlyZWN0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihBLm1hdHJpeFdvcmxkKTtjLnNldEZyb21NYXRyaXhQb3NpdGlvbihBLnRhcmdldC5tYXRyaXhXb3JsZCk7aC5kaXJlY3Rpb24uc3ViKGMpO2guZGlyZWN0aW9uLnRyYW5zZm9ybURpcmVjdGlvbihwKTtoLmNvbmVDb3M9TWF0aC5jb3MoQS5hbmdsZSk7XG5oLnBlbnVtYnJhQ29zPU1hdGguY29zKEEuYW5nbGUqKDEtQS5wZW51bWJyYSkpO2guZGVjYXk9MD09PUEuZGlzdGFuY2U/MDpBLmRlY2F5O2lmKGguc2hhZG93PUEuY2FzdFNoYWRvdylrPUEuc2hhZG93LGguc2hhZG93Qmlhcz1rLmJpYXMsaC5zaGFkb3dSYWRpdXM9ay5yYWRpdXMsaC5zaGFkb3dNYXBTaXplPWsubWFwU2l6ZTtiLnNwb3RTaGFkb3dNYXBbdF09RGE7Yi5zcG90U2hhZG93TWF0cml4W3RdPUEuc2hhZG93Lm1hdHJpeDtiLnNwb3RbdF09aDt0Kyt9ZWxzZSBpZihBLmlzUmVjdEFyZWFMaWdodCloPWEuZ2V0KEEpLGguY29sb3IuY29weShrKS5tdWx0aXBseVNjYWxhcihKLyhBLndpZHRoKkEuaGVpZ2h0KSksaC5wb3NpdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24oQS5tYXRyaXhXb3JsZCksaC5wb3NpdGlvbi5hcHBseU1hdHJpeDQocCksZS5pZGVudGl0eSgpLGQuY29weShBLm1hdHJpeFdvcmxkKSxkLnByZW11bHRpcGx5KHApLGUuZXh0cmFjdFJvdGF0aW9uKGQpLGguaGFsZldpZHRoLnNldCguNSpcbkEud2lkdGgsMCwwKSxoLmhhbGZIZWlnaHQuc2V0KDAsLjUqQS5oZWlnaHQsMCksaC5oYWxmV2lkdGguYXBwbHlNYXRyaXg0KGUpLGguaGFsZkhlaWdodC5hcHBseU1hdHJpeDQoZSksYi5yZWN0QXJlYVtsXT1oLGwrKztlbHNlIGlmKEEuaXNQb2ludExpZ2h0KXtoPWEuZ2V0KEEpO2gucG9zaXRpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKEEubWF0cml4V29ybGQpO2gucG9zaXRpb24uYXBwbHlNYXRyaXg0KHApO2guY29sb3IuY29weShBLmNvbG9yKS5tdWx0aXBseVNjYWxhcihBLmludGVuc2l0eSk7aC5kaXN0YW5jZT1BLmRpc3RhbmNlO2guZGVjYXk9MD09PUEuZGlzdGFuY2U/MDpBLmRlY2F5O2lmKGguc2hhZG93PUEuY2FzdFNoYWRvdylrPUEuc2hhZG93LGguc2hhZG93Qmlhcz1rLmJpYXMsaC5zaGFkb3dSYWRpdXM9ay5yYWRpdXMsaC5zaGFkb3dNYXBTaXplPWsubWFwU2l6ZSxoLnNoYWRvd0NhbWVyYU5lYXI9ay5jYW1lcmEubmVhcixoLnNoYWRvd0NhbWVyYUZhcj1rLmNhbWVyYS5mYXI7XG5iLnBvaW50U2hhZG93TWFwW3JdPURhO2IucG9pbnRTaGFkb3dNYXRyaXhbcl09QS5zaGFkb3cubWF0cml4O2IucG9pbnRbcl09aDtyKyt9ZWxzZSBBLmlzSGVtaXNwaGVyZUxpZ2h0JiYoaD1hLmdldChBKSxoLmRpcmVjdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24oQS5tYXRyaXhXb3JsZCksaC5kaXJlY3Rpb24udHJhbnNmb3JtRGlyZWN0aW9uKHApLGguZGlyZWN0aW9uLm5vcm1hbGl6ZSgpLGguc2t5Q29sb3IuY29weShBLmNvbG9yKS5tdWx0aXBseVNjYWxhcihKKSxoLmdyb3VuZENvbG9yLmNvcHkoQS5ncm91bmRDb2xvcikubXVsdGlwbHlTY2FsYXIoSiksYi5oZW1pW3ddPWgsdysrKX1iLmFtYmllbnRbMF09bTtiLmFtYmllbnRbMV09cTtiLmFtYmllbnRbMl09bjtiLmRpcmVjdGlvbmFsLmxlbmd0aD11O2Iuc3BvdC5sZW5ndGg9dDtiLnJlY3RBcmVhLmxlbmd0aD1sO2IucG9pbnQubGVuZ3RoPXI7Yi5oZW1pLmxlbmd0aD13O2IuaGFzaD11K1wiLFwiK3IrXCIsXCIrdCtcIixcIitsK1wiLFwiK1xudytcIixcIitnLmxlbmd0aH0sc3RhdGU6Yn19ZnVuY3Rpb24gcmcoYSxiKXt2YXIgYz17fTtyZXR1cm57dXBkYXRlOmZ1bmN0aW9uKGQpe3ZhciBlPWIuZnJhbWUsZj1kLmdlb21ldHJ5LGc9YS5nZXQoZCxmKTtjW2cuaWRdIT09ZSYmKGYuaXNHZW9tZXRyeSYmZy51cGRhdGVGcm9tT2JqZWN0KGQpLGEudXBkYXRlKGcpLGNbZy5pZF09ZSk7cmV0dXJuIGd9LGNsZWFyOmZ1bmN0aW9uKCl7Yz17fX19fWZ1bmN0aW9uIHNnKGEpe2E9YS5zcGxpdChcIlxcblwiKTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdPWIrMStcIjogXCIrYVtiXTtyZXR1cm4gYS5qb2luKFwiXFxuXCIpfWZ1bmN0aW9uIFdlKGEsYixjKXt2YXIgZD1hLmNyZWF0ZVNoYWRlcihiKTthLnNoYWRlclNvdXJjZShkLGMpO2EuY29tcGlsZVNoYWRlcihkKTshMT09PWEuZ2V0U2hhZGVyUGFyYW1ldGVyKGQsYS5DT01QSUxFX1NUQVRVUykmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFNoYWRlcjogU2hhZGVyIGNvdWxkbid0IGNvbXBpbGUuXCIpO1xuXCJcIiE9PWEuZ2V0U2hhZGVySW5mb0xvZyhkKSYmY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xTaGFkZXI6IGdsLmdldFNoYWRlckluZm9Mb2coKVwiLGI9PT1hLlZFUlRFWF9TSEFERVI/XCJ2ZXJ0ZXhcIjpcImZyYWdtZW50XCIsYS5nZXRTaGFkZXJJbmZvTG9nKGQpLHNnKGMpKTtyZXR1cm4gZH1mdW5jdGlvbiBYZShhKXtzd2l0Y2goYSl7Y2FzZSAzRTM6cmV0dXJuW1wiTGluZWFyXCIsXCIoIHZhbHVlIClcIl07Y2FzZSAzMDAxOnJldHVybltcInNSR0JcIixcIiggdmFsdWUgKVwiXTtjYXNlIDMwMDI6cmV0dXJuW1wiUkdCRVwiLFwiKCB2YWx1ZSApXCJdO2Nhc2UgMzAwNDpyZXR1cm5bXCJSR0JNXCIsXCIoIHZhbHVlLCA3LjAgKVwiXTtjYXNlIDMwMDU6cmV0dXJuW1wiUkdCTVwiLFwiKCB2YWx1ZSwgMTYuMCApXCJdO2Nhc2UgMzAwNjpyZXR1cm5bXCJSR0JEXCIsXCIoIHZhbHVlLCAyNTYuMCApXCJdO2Nhc2UgMzAwNzpyZXR1cm5bXCJHYW1tYVwiLFwiKCB2YWx1ZSwgZmxvYXQoIEdBTU1BX0ZBQ1RPUiApIClcIl07ZGVmYXVsdDp0aHJvdyBFcnJvcihcInVuc3VwcG9ydGVkIGVuY29kaW5nOiBcIitcbmEpO319ZnVuY3Rpb24gWWQoYSxiKXtiPVhlKGIpO3JldHVyblwidmVjNCBcIithK1wiKCB2ZWM0IHZhbHVlICkgeyByZXR1cm4gXCIrYlswXStcIlRvTGluZWFyXCIrYlsxXStcIjsgfVwifWZ1bmN0aW9uIHRnKGEsYil7Yj1YZShiKTtyZXR1cm5cInZlYzQgXCIrYStcIiggdmVjNCB2YWx1ZSApIHsgcmV0dXJuIExpbmVhclRvXCIrYlswXStiWzFdK1wiOyB9XCJ9ZnVuY3Rpb24gdWcoYSxiKXtzd2l0Y2goYil7Y2FzZSAxOmI9XCJMaW5lYXJcIjticmVhaztjYXNlIDI6Yj1cIlJlaW5oYXJkXCI7YnJlYWs7Y2FzZSAzOmI9XCJVbmNoYXJ0ZWQyXCI7YnJlYWs7Y2FzZSA0OmI9XCJPcHRpbWl6ZWRDaW5lb25cIjticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwidW5zdXBwb3J0ZWQgdG9uZU1hcHBpbmc6IFwiK2IpO31yZXR1cm5cInZlYzMgXCIrYStcIiggdmVjMyBjb2xvciApIHsgcmV0dXJuIFwiK2IrXCJUb25lTWFwcGluZyggY29sb3IgKTsgfVwifWZ1bmN0aW9uIHZnKGEsYixjKXthPWF8fHt9O3JldHVyblthLmRlcml2YXRpdmVzfHxcbmIuZW52TWFwQ3ViZVVWfHxiLmJ1bXBNYXB8fGIubm9ybWFsTWFwfHxiLmZsYXRTaGFkaW5nP1wiI2V4dGVuc2lvbiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMgOiBlbmFibGVcIjpcIlwiLChhLmZyYWdEZXB0aHx8Yi5sb2dhcml0aG1pY0RlcHRoQnVmZmVyKSYmYy5nZXQoXCJFWFRfZnJhZ19kZXB0aFwiKT9cIiNleHRlbnNpb24gR0xfRVhUX2ZyYWdfZGVwdGggOiBlbmFibGVcIjpcIlwiLGEuZHJhd0J1ZmZlcnMmJmMuZ2V0KFwiV0VCR0xfZHJhd19idWZmZXJzXCIpP1wiI2V4dGVuc2lvbiBHTF9FWFRfZHJhd19idWZmZXJzIDogcmVxdWlyZVwiOlwiXCIsKGEuc2hhZGVyVGV4dHVyZUxPRHx8Yi5lbnZNYXApJiZjLmdldChcIkVYVF9zaGFkZXJfdGV4dHVyZV9sb2RcIik/XCIjZXh0ZW5zaW9uIEdMX0VYVF9zaGFkZXJfdGV4dHVyZV9sb2QgOiBlbmFibGVcIjpcIlwiXS5maWx0ZXIoQmMpLmpvaW4oXCJcXG5cIil9ZnVuY3Rpb24gd2coYSl7dmFyIGI9W10sYztmb3IoYyBpbiBhKXt2YXIgZD1hW2NdOyExIT09ZCYmYi5wdXNoKFwiI2RlZmluZSBcIitcbmMrXCIgXCIrZCl9cmV0dXJuIGIuam9pbihcIlxcblwiKX1mdW5jdGlvbiBCYyhhKXtyZXR1cm5cIlwiIT09YX1mdW5jdGlvbiBZZShhLGIpe3JldHVybiBhLnJlcGxhY2UoL05VTV9ESVJfTElHSFRTL2csYi5udW1EaXJMaWdodHMpLnJlcGxhY2UoL05VTV9TUE9UX0xJR0hUUy9nLGIubnVtU3BvdExpZ2h0cykucmVwbGFjZSgvTlVNX1JFQ1RfQVJFQV9MSUdIVFMvZyxiLm51bVJlY3RBcmVhTGlnaHRzKS5yZXBsYWNlKC9OVU1fUE9JTlRfTElHSFRTL2csYi5udW1Qb2ludExpZ2h0cykucmVwbGFjZSgvTlVNX0hFTUlfTElHSFRTL2csYi5udW1IZW1pTGlnaHRzKX1mdW5jdGlvbiBaZChhKXtyZXR1cm4gYS5yZXBsYWNlKC9eWyBcXHRdKiNpbmNsdWRlICs8KFtcXHdcXGQuXSspPi9nbSxmdW5jdGlvbihhLGMpe2E9UltjXTtpZih2b2lkIDA9PT1hKXRocm93IEVycm9yKFwiQ2FuIG5vdCByZXNvbHZlICNpbmNsdWRlIDxcIitjK1wiPlwiKTtyZXR1cm4gWmQoYSl9KX1mdW5jdGlvbiBaZShhKXtyZXR1cm4gYS5yZXBsYWNlKC9mb3IgXFwoIGludCBpIFxcPSAoXFxkKylcXDsgaSA8IChcXGQrKVxcOyBpIFxcK1xcKyBcXCkgXFx7KFtcXHNcXFNdKz8pKD89XFx9KVxcfS9nLFxuZnVuY3Rpb24oYSxjLGQsZSl7YT1cIlwiO2ZvcihjPXBhcnNlSW50KGMpO2M8cGFyc2VJbnQoZCk7YysrKWErPWUucmVwbGFjZSgvXFxbIGkgXFxdL2csXCJbIFwiK2MrXCIgXVwiKTtyZXR1cm4gYX0pfWZ1bmN0aW9uIHhnKGEsYixjLGQsZSxmKXt2YXIgZz1hLmNvbnRleHQsaD1kLmRlZmluZXMsaz1lLnZlcnRleFNoYWRlcixtPWUuZnJhZ21lbnRTaGFkZXIscT1cIlNIQURPV01BUF9UWVBFX0JBU0lDXCI7MT09PWYuc2hhZG93TWFwVHlwZT9xPVwiU0hBRE9XTUFQX1RZUEVfUENGXCI6Mj09PWYuc2hhZG93TWFwVHlwZSYmKHE9XCJTSEFET1dNQVBfVFlQRV9QQ0ZfU09GVFwiKTt2YXIgbj1cIkVOVk1BUF9UWVBFX0NVQkVcIix1PVwiRU5WTUFQX01PREVfUkVGTEVDVElPTlwiLHI9XCJFTlZNQVBfQkxFTkRJTkdfTVVMVElQTFlcIjtpZihmLmVudk1hcCl7c3dpdGNoKGQuZW52TWFwLm1hcHBpbmcpe2Nhc2UgMzAxOmNhc2UgMzAyOm49XCJFTlZNQVBfVFlQRV9DVUJFXCI7YnJlYWs7Y2FzZSAzMDY6Y2FzZSAzMDc6bj1cIkVOVk1BUF9UWVBFX0NVQkVfVVZcIjtcbmJyZWFrO2Nhc2UgMzAzOmNhc2UgMzA0Om49XCJFTlZNQVBfVFlQRV9FUVVJUkVDXCI7YnJlYWs7Y2FzZSAzMDU6bj1cIkVOVk1BUF9UWVBFX1NQSEVSRVwifXN3aXRjaChkLmVudk1hcC5tYXBwaW5nKXtjYXNlIDMwMjpjYXNlIDMwNDp1PVwiRU5WTUFQX01PREVfUkVGUkFDVElPTlwifXN3aXRjaChkLmNvbWJpbmUpe2Nhc2UgMDpyPVwiRU5WTUFQX0JMRU5ESU5HX01VTFRJUExZXCI7YnJlYWs7Y2FzZSAxOnI9XCJFTlZNQVBfQkxFTkRJTkdfTUlYXCI7YnJlYWs7Y2FzZSAyOnI9XCJFTlZNQVBfQkxFTkRJTkdfQUREXCJ9fXZhciB0PTA8YS5nYW1tYUZhY3Rvcj9hLmdhbW1hRmFjdG9yOjEsbD12ZyhkLmV4dGVuc2lvbnMsZixiKSxwPXdnKGgpLHo9Zy5jcmVhdGVQcm9ncmFtKCk7ZC5pc1Jhd1NoYWRlck1hdGVyaWFsPyhoPVtwXS5maWx0ZXIoQmMpLmpvaW4oXCJcXG5cIiksMDxoLmxlbmd0aCYmKGgrPVwiXFxuXCIpLGI9W2wscF0uZmlsdGVyKEJjKS5qb2luKFwiXFxuXCIpLDA8Yi5sZW5ndGgmJihiKz1cIlxcblwiKSk6KGg9XG5bXCJwcmVjaXNpb24gXCIrZi5wcmVjaXNpb24rXCIgZmxvYXQ7XCIsXCJwcmVjaXNpb24gXCIrZi5wcmVjaXNpb24rXCIgaW50O1wiLFwiI2RlZmluZSBTSEFERVJfTkFNRSBcIitlLm5hbWUscCxmLnN1cHBvcnRzVmVydGV4VGV4dHVyZXM/XCIjZGVmaW5lIFZFUlRFWF9URVhUVVJFU1wiOlwiXCIsXCIjZGVmaW5lIEdBTU1BX0ZBQ1RPUiBcIit0LFwiI2RlZmluZSBNQVhfQk9ORVMgXCIrZi5tYXhCb25lcyxmLnVzZUZvZyYmZi5mb2c/XCIjZGVmaW5lIFVTRV9GT0dcIjpcIlwiLGYudXNlRm9nJiZmLmZvZ0V4cD9cIiNkZWZpbmUgRk9HX0VYUDJcIjpcIlwiLGYubWFwP1wiI2RlZmluZSBVU0VfTUFQXCI6XCJcIixmLmVudk1hcD9cIiNkZWZpbmUgVVNFX0VOVk1BUFwiOlwiXCIsZi5lbnZNYXA/XCIjZGVmaW5lIFwiK3U6XCJcIixmLmxpZ2h0TWFwP1wiI2RlZmluZSBVU0VfTElHSFRNQVBcIjpcIlwiLGYuYW9NYXA/XCIjZGVmaW5lIFVTRV9BT01BUFwiOlwiXCIsZi5lbWlzc2l2ZU1hcD9cIiNkZWZpbmUgVVNFX0VNSVNTSVZFTUFQXCI6XCJcIixmLmJ1bXBNYXA/XCIjZGVmaW5lIFVTRV9CVU1QTUFQXCI6XG5cIlwiLGYubm9ybWFsTWFwP1wiI2RlZmluZSBVU0VfTk9STUFMTUFQXCI6XCJcIixmLmRpc3BsYWNlbWVudE1hcCYmZi5zdXBwb3J0c1ZlcnRleFRleHR1cmVzP1wiI2RlZmluZSBVU0VfRElTUExBQ0VNRU5UTUFQXCI6XCJcIixmLnNwZWN1bGFyTWFwP1wiI2RlZmluZSBVU0VfU1BFQ1VMQVJNQVBcIjpcIlwiLGYucm91Z2huZXNzTWFwP1wiI2RlZmluZSBVU0VfUk9VR0hORVNTTUFQXCI6XCJcIixmLm1ldGFsbmVzc01hcD9cIiNkZWZpbmUgVVNFX01FVEFMTkVTU01BUFwiOlwiXCIsZi5hbHBoYU1hcD9cIiNkZWZpbmUgVVNFX0FMUEhBTUFQXCI6XCJcIixmLnZlcnRleENvbG9ycz9cIiNkZWZpbmUgVVNFX0NPTE9SXCI6XCJcIixmLmZsYXRTaGFkaW5nP1wiI2RlZmluZSBGTEFUX1NIQURFRFwiOlwiXCIsZi5za2lubmluZz9cIiNkZWZpbmUgVVNFX1NLSU5OSU5HXCI6XCJcIixmLnVzZVZlcnRleFRleHR1cmU/XCIjZGVmaW5lIEJPTkVfVEVYVFVSRVwiOlwiXCIsZi5tb3JwaFRhcmdldHM/XCIjZGVmaW5lIFVTRV9NT1JQSFRBUkdFVFNcIjpcIlwiLGYubW9ycGhOb3JtYWxzJiZcbiExPT09Zi5mbGF0U2hhZGluZz9cIiNkZWZpbmUgVVNFX01PUlBITk9STUFMU1wiOlwiXCIsZi5kb3VibGVTaWRlZD9cIiNkZWZpbmUgRE9VQkxFX1NJREVEXCI6XCJcIixmLmZsaXBTaWRlZD9cIiNkZWZpbmUgRkxJUF9TSURFRFwiOlwiXCIsXCIjZGVmaW5lIE5VTV9DTElQUElOR19QTEFORVMgXCIrZi5udW1DbGlwcGluZ1BsYW5lcyxmLnNoYWRvd01hcEVuYWJsZWQ/XCIjZGVmaW5lIFVTRV9TSEFET1dNQVBcIjpcIlwiLGYuc2hhZG93TWFwRW5hYmxlZD9cIiNkZWZpbmUgXCIrcTpcIlwiLGYuc2l6ZUF0dGVudWF0aW9uP1wiI2RlZmluZSBVU0VfU0laRUFUVEVOVUFUSU9OXCI6XCJcIixmLmxvZ2FyaXRobWljRGVwdGhCdWZmZXI/XCIjZGVmaW5lIFVTRV9MT0dERVBUSEJVRlwiOlwiXCIsZi5sb2dhcml0aG1pY0RlcHRoQnVmZmVyJiZiLmdldChcIkVYVF9mcmFnX2RlcHRoXCIpP1wiI2RlZmluZSBVU0VfTE9HREVQVEhCVUZfRVhUXCI6XCJcIixcInVuaWZvcm0gbWF0NCBtb2RlbE1hdHJpeDtcIixcInVuaWZvcm0gbWF0NCBtb2RlbFZpZXdNYXRyaXg7XCIsXG5cInVuaWZvcm0gbWF0NCBwcm9qZWN0aW9uTWF0cml4O1wiLFwidW5pZm9ybSBtYXQ0IHZpZXdNYXRyaXg7XCIsXCJ1bmlmb3JtIG1hdDMgbm9ybWFsTWF0cml4O1wiLFwidW5pZm9ybSB2ZWMzIGNhbWVyYVBvc2l0aW9uO1wiLFwiYXR0cmlidXRlIHZlYzMgcG9zaXRpb247XCIsXCJhdHRyaWJ1dGUgdmVjMyBub3JtYWw7XCIsXCJhdHRyaWJ1dGUgdmVjMiB1djtcIixcIiNpZmRlZiBVU0VfQ09MT1JcIixcIlxcdGF0dHJpYnV0ZSB2ZWMzIGNvbG9yO1wiLFwiI2VuZGlmXCIsXCIjaWZkZWYgVVNFX01PUlBIVEFSR0VUU1wiLFwiXFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQwO1wiLFwiXFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQxO1wiLFwiXFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQyO1wiLFwiXFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQzO1wiLFwiXFx0I2lmZGVmIFVTRV9NT1JQSE5PUk1BTFNcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoTm9ybWFsMDtcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoTm9ybWFsMTtcIixcblwiXFx0XFx0YXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwyO1wiLFwiXFx0XFx0YXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwzO1wiLFwiXFx0I2Vsc2VcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0NDtcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0NTtcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0NjtcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0NztcIixcIlxcdCNlbmRpZlwiLFwiI2VuZGlmXCIsXCIjaWZkZWYgVVNFX1NLSU5OSU5HXCIsXCJcXHRhdHRyaWJ1dGUgdmVjNCBza2luSW5kZXg7XCIsXCJcXHRhdHRyaWJ1dGUgdmVjNCBza2luV2VpZ2h0O1wiLFwiI2VuZGlmXCIsXCJcXG5cIl0uZmlsdGVyKEJjKS5qb2luKFwiXFxuXCIpLGI9W2wsXCJwcmVjaXNpb24gXCIrZi5wcmVjaXNpb24rXCIgZmxvYXQ7XCIsXCJwcmVjaXNpb24gXCIrZi5wcmVjaXNpb24rXCIgaW50O1wiLFwiI2RlZmluZSBTSEFERVJfTkFNRSBcIitlLm5hbWUscCxmLmFscGhhVGVzdD9cIiNkZWZpbmUgQUxQSEFURVNUIFwiK2YuYWxwaGFUZXN0OlxuXCJcIixcIiNkZWZpbmUgR0FNTUFfRkFDVE9SIFwiK3QsZi51c2VGb2cmJmYuZm9nP1wiI2RlZmluZSBVU0VfRk9HXCI6XCJcIixmLnVzZUZvZyYmZi5mb2dFeHA/XCIjZGVmaW5lIEZPR19FWFAyXCI6XCJcIixmLm1hcD9cIiNkZWZpbmUgVVNFX01BUFwiOlwiXCIsZi5lbnZNYXA/XCIjZGVmaW5lIFVTRV9FTlZNQVBcIjpcIlwiLGYuZW52TWFwP1wiI2RlZmluZSBcIituOlwiXCIsZi5lbnZNYXA/XCIjZGVmaW5lIFwiK3U6XCJcIixmLmVudk1hcD9cIiNkZWZpbmUgXCIrcjpcIlwiLGYubGlnaHRNYXA/XCIjZGVmaW5lIFVTRV9MSUdIVE1BUFwiOlwiXCIsZi5hb01hcD9cIiNkZWZpbmUgVVNFX0FPTUFQXCI6XCJcIixmLmVtaXNzaXZlTWFwP1wiI2RlZmluZSBVU0VfRU1JU1NJVkVNQVBcIjpcIlwiLGYuYnVtcE1hcD9cIiNkZWZpbmUgVVNFX0JVTVBNQVBcIjpcIlwiLGYubm9ybWFsTWFwP1wiI2RlZmluZSBVU0VfTk9STUFMTUFQXCI6XCJcIixmLnNwZWN1bGFyTWFwP1wiI2RlZmluZSBVU0VfU1BFQ1VMQVJNQVBcIjpcIlwiLGYucm91Z2huZXNzTWFwP1wiI2RlZmluZSBVU0VfUk9VR0hORVNTTUFQXCI6XG5cIlwiLGYubWV0YWxuZXNzTWFwP1wiI2RlZmluZSBVU0VfTUVUQUxORVNTTUFQXCI6XCJcIixmLmFscGhhTWFwP1wiI2RlZmluZSBVU0VfQUxQSEFNQVBcIjpcIlwiLGYudmVydGV4Q29sb3JzP1wiI2RlZmluZSBVU0VfQ09MT1JcIjpcIlwiLGYuZ3JhZGllbnRNYXA/XCIjZGVmaW5lIFVTRV9HUkFESUVOVE1BUFwiOlwiXCIsZi5mbGF0U2hhZGluZz9cIiNkZWZpbmUgRkxBVF9TSEFERURcIjpcIlwiLGYuZG91YmxlU2lkZWQ/XCIjZGVmaW5lIERPVUJMRV9TSURFRFwiOlwiXCIsZi5mbGlwU2lkZWQ/XCIjZGVmaW5lIEZMSVBfU0lERURcIjpcIlwiLFwiI2RlZmluZSBOVU1fQ0xJUFBJTkdfUExBTkVTIFwiK2YubnVtQ2xpcHBpbmdQbGFuZXMsXCIjZGVmaW5lIFVOSU9OX0NMSVBQSU5HX1BMQU5FUyBcIisoZi5udW1DbGlwcGluZ1BsYW5lcy1mLm51bUNsaXBJbnRlcnNlY3Rpb24pLGYuc2hhZG93TWFwRW5hYmxlZD9cIiNkZWZpbmUgVVNFX1NIQURPV01BUFwiOlwiXCIsZi5zaGFkb3dNYXBFbmFibGVkP1wiI2RlZmluZSBcIitxOlwiXCIsZi5wcmVtdWx0aXBsaWVkQWxwaGE/XG5cIiNkZWZpbmUgUFJFTVVMVElQTElFRF9BTFBIQVwiOlwiXCIsZi5waHlzaWNhbGx5Q29ycmVjdExpZ2h0cz9cIiNkZWZpbmUgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1wiOlwiXCIsZi5sb2dhcml0aG1pY0RlcHRoQnVmZmVyP1wiI2RlZmluZSBVU0VfTE9HREVQVEhCVUZcIjpcIlwiLGYubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciYmYi5nZXQoXCJFWFRfZnJhZ19kZXB0aFwiKT9cIiNkZWZpbmUgVVNFX0xPR0RFUFRIQlVGX0VYVFwiOlwiXCIsZi5lbnZNYXAmJmIuZ2V0KFwiRVhUX3NoYWRlcl90ZXh0dXJlX2xvZFwiKT9cIiNkZWZpbmUgVEVYVFVSRV9MT0RfRVhUXCI6XCJcIixcInVuaWZvcm0gbWF0NCB2aWV3TWF0cml4O1wiLFwidW5pZm9ybSB2ZWMzIGNhbWVyYVBvc2l0aW9uO1wiLDAhPT1mLnRvbmVNYXBwaW5nP1wiI2RlZmluZSBUT05FX01BUFBJTkdcIjpcIlwiLDAhPT1mLnRvbmVNYXBwaW5nP1IudG9uZW1hcHBpbmdfcGFyc19mcmFnbWVudDpcIlwiLDAhPT1mLnRvbmVNYXBwaW5nP3VnKFwidG9uZU1hcHBpbmdcIixmLnRvbmVNYXBwaW5nKTpcblwiXCIsZi5kaXRoZXJpbmc/XCIjZGVmaW5lIERJVEhFUklOR1wiOlwiXCIsZi5vdXRwdXRFbmNvZGluZ3x8Zi5tYXBFbmNvZGluZ3x8Zi5lbnZNYXBFbmNvZGluZ3x8Zi5lbWlzc2l2ZU1hcEVuY29kaW5nP1IuZW5jb2RpbmdzX3BhcnNfZnJhZ21lbnQ6XCJcIixmLm1hcEVuY29kaW5nP1lkKFwibWFwVGV4ZWxUb0xpbmVhclwiLGYubWFwRW5jb2RpbmcpOlwiXCIsZi5lbnZNYXBFbmNvZGluZz9ZZChcImVudk1hcFRleGVsVG9MaW5lYXJcIixmLmVudk1hcEVuY29kaW5nKTpcIlwiLGYuZW1pc3NpdmVNYXBFbmNvZGluZz9ZZChcImVtaXNzaXZlTWFwVGV4ZWxUb0xpbmVhclwiLGYuZW1pc3NpdmVNYXBFbmNvZGluZyk6XCJcIixmLm91dHB1dEVuY29kaW5nP3RnKFwibGluZWFyVG9PdXRwdXRUZXhlbFwiLGYub3V0cHV0RW5jb2RpbmcpOlwiXCIsZi5kZXB0aFBhY2tpbmc/XCIjZGVmaW5lIERFUFRIX1BBQ0tJTkcgXCIrZC5kZXB0aFBhY2tpbmc6XCJcIixcIlxcblwiXS5maWx0ZXIoQmMpLmpvaW4oXCJcXG5cIikpO2s9WmQoayk7az1ZZShrLGYpO1xubT1aZChtKTttPVllKG0sZik7ZC5pc1NoYWRlck1hdGVyaWFsfHwoaz1aZShrKSxtPVplKG0pKTttPWIrbTtrPVdlKGcsZy5WRVJURVhfU0hBREVSLGgrayk7bT1XZShnLGcuRlJBR01FTlRfU0hBREVSLG0pO2cuYXR0YWNoU2hhZGVyKHosayk7Zy5hdHRhY2hTaGFkZXIoeixtKTt2b2lkIDAhPT1kLmluZGV4MEF0dHJpYnV0ZU5hbWU/Zy5iaW5kQXR0cmliTG9jYXRpb24oeiwwLGQuaW5kZXgwQXR0cmlidXRlTmFtZSk6ITA9PT1mLm1vcnBoVGFyZ2V0cyYmZy5iaW5kQXR0cmliTG9jYXRpb24oeiwwLFwicG9zaXRpb25cIik7Zy5saW5rUHJvZ3JhbSh6KTtmPWcuZ2V0UHJvZ3JhbUluZm9Mb2coeik7ZT1nLmdldFNoYWRlckluZm9Mb2coayk7cT1nLmdldFNoYWRlckluZm9Mb2cobSk7dT1uPSEwO2lmKCExPT09Zy5nZXRQcm9ncmFtUGFyYW1ldGVyKHosZy5MSU5LX1NUQVRVUykpbj0hMSxjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xQcm9ncmFtOiBzaGFkZXIgZXJyb3I6IFwiLGcuZ2V0RXJyb3IoKSxcblwiZ2wuVkFMSURBVEVfU1RBVFVTXCIsZy5nZXRQcm9ncmFtUGFyYW1ldGVyKHosZy5WQUxJREFURV9TVEFUVVMpLFwiZ2wuZ2V0UHJvZ3JhbUluZm9Mb2dcIixmLGUscSk7ZWxzZSBpZihcIlwiIT09Ziljb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFByb2dyYW06IGdsLmdldFByb2dyYW1JbmZvTG9nKClcIixmKTtlbHNlIGlmKFwiXCI9PT1lfHxcIlwiPT09cSl1PSExO3UmJih0aGlzLmRpYWdub3N0aWNzPXtydW5uYWJsZTpuLG1hdGVyaWFsOmQscHJvZ3JhbUxvZzpmLHZlcnRleFNoYWRlcjp7bG9nOmUscHJlZml4Omh9LGZyYWdtZW50U2hhZGVyOntsb2c6cSxwcmVmaXg6Yn19KTtnLmRlbGV0ZVNoYWRlcihrKTtnLmRlbGV0ZVNoYWRlcihtKTt2YXIgeTt0aGlzLmdldFVuaWZvcm1zPWZ1bmN0aW9uKCl7dm9pZCAwPT09eSYmKHk9bmV3IG1iKGcseixhKSk7cmV0dXJuIHl9O3ZhciBJO3RoaXMuZ2V0QXR0cmlidXRlcz1mdW5jdGlvbigpe2lmKHZvaWQgMD09PUkpe2Zvcih2YXIgYT17fSxiPWcuZ2V0UHJvZ3JhbVBhcmFtZXRlcih6LFxuZy5BQ1RJVkVfQVRUUklCVVRFUyksYz0wO2M8YjtjKyspe3ZhciBkPWcuZ2V0QWN0aXZlQXR0cmliKHosYykubmFtZTthW2RdPWcuZ2V0QXR0cmliTG9jYXRpb24oeixkKX1JPWF9cmV0dXJuIEl9O3RoaXMuZGVzdHJveT1mdW5jdGlvbigpe2cuZGVsZXRlUHJvZ3JhbSh6KTt0aGlzLnByb2dyYW09dm9pZCAwfTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHt1bmlmb3Jtczp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xQcm9ncmFtOiAudW5pZm9ybXMgaXMgbm93IC5nZXRVbmlmb3JtcygpLlwiKTtyZXR1cm4gdGhpcy5nZXRVbmlmb3JtcygpfX0sYXR0cmlidXRlczp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xQcm9ncmFtOiAuYXR0cmlidXRlcyBpcyBub3cgLmdldEF0dHJpYnV0ZXMoKS5cIik7cmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlcygpfX19KTt0aGlzLmlkPXlnKys7dGhpcy5jb2RlPWM7dGhpcy51c2VkVGltZXM9MTtcbnRoaXMucHJvZ3JhbT16O3RoaXMudmVydGV4U2hhZGVyPWs7dGhpcy5mcmFnbWVudFNoYWRlcj1tO3JldHVybiB0aGlzfWZ1bmN0aW9uIHpnKGEsYixjKXtmdW5jdGlvbiBkKGEsYil7aWYoYSlhLmlzVGV4dHVyZT9jPWEuZW5jb2Rpbmc6YS5pc1dlYkdMUmVuZGVyVGFyZ2V0JiYoY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xQcm9ncmFtcy5nZXRUZXh0dXJlRW5jb2RpbmdGcm9tTWFwOiBkb24ndCB1c2UgcmVuZGVyIHRhcmdldHMgYXMgdGV4dHVyZXMuIFVzZSB0aGVpciAudGV4dHVyZSBwcm9wZXJ0eSBpbnN0ZWFkLlwiKSxjPWEudGV4dHVyZS5lbmNvZGluZyk7ZWxzZSB2YXIgYz0zRTM7M0UzPT09YyYmYiYmKGM9MzAwNyk7cmV0dXJuIGN9dmFyIGU9W10sZj17TWVzaERlcHRoTWF0ZXJpYWw6XCJkZXB0aFwiLE1lc2hEaXN0YW5jZU1hdGVyaWFsOlwiZGlzdGFuY2VSR0JBXCIsTWVzaE5vcm1hbE1hdGVyaWFsOlwibm9ybWFsXCIsTWVzaEJhc2ljTWF0ZXJpYWw6XCJiYXNpY1wiLE1lc2hMYW1iZXJ0TWF0ZXJpYWw6XCJsYW1iZXJ0XCIsXG5NZXNoUGhvbmdNYXRlcmlhbDpcInBob25nXCIsTWVzaFRvb25NYXRlcmlhbDpcInBob25nXCIsTWVzaFN0YW5kYXJkTWF0ZXJpYWw6XCJwaHlzaWNhbFwiLE1lc2hQaHlzaWNhbE1hdGVyaWFsOlwicGh5c2ljYWxcIixMaW5lQmFzaWNNYXRlcmlhbDpcImJhc2ljXCIsTGluZURhc2hlZE1hdGVyaWFsOlwiZGFzaGVkXCIsUG9pbnRzTWF0ZXJpYWw6XCJwb2ludHNcIixTaGFkb3dNYXRlcmlhbDpcInNoYWRvd1wifSxnPVwicHJlY2lzaW9uIHN1cHBvcnRzVmVydGV4VGV4dHVyZXMgbWFwIG1hcEVuY29kaW5nIGVudk1hcCBlbnZNYXBNb2RlIGVudk1hcEVuY29kaW5nIGxpZ2h0TWFwIGFvTWFwIGVtaXNzaXZlTWFwIGVtaXNzaXZlTWFwRW5jb2RpbmcgYnVtcE1hcCBub3JtYWxNYXAgZGlzcGxhY2VtZW50TWFwIHNwZWN1bGFyTWFwIHJvdWdobmVzc01hcCBtZXRhbG5lc3NNYXAgZ3JhZGllbnRNYXAgYWxwaGFNYXAgY29tYmluZSB2ZXJ0ZXhDb2xvcnMgZm9nIHVzZUZvZyBmb2dFeHAgZmxhdFNoYWRpbmcgc2l6ZUF0dGVudWF0aW9uIGxvZ2FyaXRobWljRGVwdGhCdWZmZXIgc2tpbm5pbmcgbWF4Qm9uZXMgdXNlVmVydGV4VGV4dHVyZSBtb3JwaFRhcmdldHMgbW9ycGhOb3JtYWxzIG1heE1vcnBoVGFyZ2V0cyBtYXhNb3JwaE5vcm1hbHMgcHJlbXVsdGlwbGllZEFscGhhIG51bURpckxpZ2h0cyBudW1Qb2ludExpZ2h0cyBudW1TcG90TGlnaHRzIG51bUhlbWlMaWdodHMgbnVtUmVjdEFyZWFMaWdodHMgc2hhZG93TWFwRW5hYmxlZCBzaGFkb3dNYXBUeXBlIHRvbmVNYXBwaW5nIHBoeXNpY2FsbHlDb3JyZWN0TGlnaHRzIGFscGhhVGVzdCBkb3VibGVTaWRlZCBmbGlwU2lkZWQgbnVtQ2xpcHBpbmdQbGFuZXMgbnVtQ2xpcEludGVyc2VjdGlvbiBkZXB0aFBhY2tpbmcgZGl0aGVyaW5nXCIuc3BsaXQoXCIgXCIpO1xudGhpcy5nZXRQYXJhbWV0ZXJzPWZ1bmN0aW9uKGIsZSxnLHEsbix1LHIpe3ZhciBoPWZbYi50eXBlXTtpZihyLmlzU2tpbm5lZE1lc2gpe3ZhciBrPXIuc2tlbGV0b24uYm9uZXM7aWYoYy5mbG9hdFZlcnRleFRleHR1cmVzKWs9MTAyNDtlbHNle3ZhciBtPU1hdGgubWluKE1hdGguZmxvb3IoKGMubWF4VmVydGV4VW5pZm9ybXMtMjApLzQpLGsubGVuZ3RoKTttPGsubGVuZ3RoPyhjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBTa2VsZXRvbiBoYXMgXCIray5sZW5ndGgrXCIgYm9uZXMuIFRoaXMgR1BVIHN1cHBvcnRzIFwiK20rXCIuXCIpLGs9MCk6az1tfX1lbHNlIGs9MDttPWMucHJlY2lzaW9uO251bGwhPT1iLnByZWNpc2lvbiYmKG09Yy5nZXRNYXhQcmVjaXNpb24oYi5wcmVjaXNpb24pLG0hPT1iLnByZWNpc2lvbiYmY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xQcm9ncmFtLmdldFBhcmFtZXRlcnM6XCIsYi5wcmVjaXNpb24sXCJub3Qgc3VwcG9ydGVkLCB1c2luZ1wiLG0sXCJpbnN0ZWFkLlwiKSk7XG52YXIgbD1hLmdldFJlbmRlclRhcmdldCgpO3JldHVybntzaGFkZXJJRDpoLHByZWNpc2lvbjptLHN1cHBvcnRzVmVydGV4VGV4dHVyZXM6Yy52ZXJ0ZXhUZXh0dXJlcyxvdXRwdXRFbmNvZGluZzpkKGw/bC50ZXh0dXJlOm51bGwsYS5nYW1tYU91dHB1dCksbWFwOiEhYi5tYXAsbWFwRW5jb2Rpbmc6ZChiLm1hcCxhLmdhbW1hSW5wdXQpLGVudk1hcDohIWIuZW52TWFwLGVudk1hcE1vZGU6Yi5lbnZNYXAmJmIuZW52TWFwLm1hcHBpbmcsZW52TWFwRW5jb2Rpbmc6ZChiLmVudk1hcCxhLmdhbW1hSW5wdXQpLGVudk1hcEN1YmVVVjohIWIuZW52TWFwJiYoMzA2PT09Yi5lbnZNYXAubWFwcGluZ3x8MzA3PT09Yi5lbnZNYXAubWFwcGluZyksbGlnaHRNYXA6ISFiLmxpZ2h0TWFwLGFvTWFwOiEhYi5hb01hcCxlbWlzc2l2ZU1hcDohIWIuZW1pc3NpdmVNYXAsZW1pc3NpdmVNYXBFbmNvZGluZzpkKGIuZW1pc3NpdmVNYXAsYS5nYW1tYUlucHV0KSxidW1wTWFwOiEhYi5idW1wTWFwLG5vcm1hbE1hcDohIWIubm9ybWFsTWFwLFxuZGlzcGxhY2VtZW50TWFwOiEhYi5kaXNwbGFjZW1lbnRNYXAscm91Z2huZXNzTWFwOiEhYi5yb3VnaG5lc3NNYXAsbWV0YWxuZXNzTWFwOiEhYi5tZXRhbG5lc3NNYXAsc3BlY3VsYXJNYXA6ISFiLnNwZWN1bGFyTWFwLGFscGhhTWFwOiEhYi5hbHBoYU1hcCxncmFkaWVudE1hcDohIWIuZ3JhZGllbnRNYXAsY29tYmluZTpiLmNvbWJpbmUsdmVydGV4Q29sb3JzOmIudmVydGV4Q29sb3JzLGZvZzohIXEsdXNlRm9nOmIuZm9nLGZvZ0V4cDpxJiZxLmlzRm9nRXhwMixmbGF0U2hhZGluZzpiLmZsYXRTaGFkaW5nLHNpemVBdHRlbnVhdGlvbjpiLnNpemVBdHRlbnVhdGlvbixsb2dhcml0aG1pY0RlcHRoQnVmZmVyOmMubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcixza2lubmluZzpiLnNraW5uaW5nJiYwPGssbWF4Qm9uZXM6ayx1c2VWZXJ0ZXhUZXh0dXJlOmMuZmxvYXRWZXJ0ZXhUZXh0dXJlcyxtb3JwaFRhcmdldHM6Yi5tb3JwaFRhcmdldHMsbW9ycGhOb3JtYWxzOmIubW9ycGhOb3JtYWxzLFxubWF4TW9ycGhUYXJnZXRzOmEubWF4TW9ycGhUYXJnZXRzLG1heE1vcnBoTm9ybWFsczphLm1heE1vcnBoTm9ybWFscyxudW1EaXJMaWdodHM6ZS5kaXJlY3Rpb25hbC5sZW5ndGgsbnVtUG9pbnRMaWdodHM6ZS5wb2ludC5sZW5ndGgsbnVtU3BvdExpZ2h0czplLnNwb3QubGVuZ3RoLG51bVJlY3RBcmVhTGlnaHRzOmUucmVjdEFyZWEubGVuZ3RoLG51bUhlbWlMaWdodHM6ZS5oZW1pLmxlbmd0aCxudW1DbGlwcGluZ1BsYW5lczpuLG51bUNsaXBJbnRlcnNlY3Rpb246dSxkaXRoZXJpbmc6Yi5kaXRoZXJpbmcsc2hhZG93TWFwRW5hYmxlZDphLnNoYWRvd01hcC5lbmFibGVkJiZyLnJlY2VpdmVTaGFkb3cmJjA8Zy5sZW5ndGgsc2hhZG93TWFwVHlwZTphLnNoYWRvd01hcC50eXBlLHRvbmVNYXBwaW5nOmEudG9uZU1hcHBpbmcscGh5c2ljYWxseUNvcnJlY3RMaWdodHM6YS5waHlzaWNhbGx5Q29ycmVjdExpZ2h0cyxwcmVtdWx0aXBsaWVkQWxwaGE6Yi5wcmVtdWx0aXBsaWVkQWxwaGEsXG5hbHBoYVRlc3Q6Yi5hbHBoYVRlc3QsZG91YmxlU2lkZWQ6Mj09PWIuc2lkZSxmbGlwU2lkZWQ6MT09PWIuc2lkZSxkZXB0aFBhY2tpbmc6dm9pZCAwIT09Yi5kZXB0aFBhY2tpbmc/Yi5kZXB0aFBhY2tpbmc6ITF9fTt0aGlzLmdldFByb2dyYW1Db2RlPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9W107Yy5zaGFkZXJJRD9kLnB1c2goYy5zaGFkZXJJRCk6KGQucHVzaChiLmZyYWdtZW50U2hhZGVyKSxkLnB1c2goYi52ZXJ0ZXhTaGFkZXIpKTtpZih2b2lkIDAhPT1iLmRlZmluZXMpZm9yKHZhciBlIGluIGIuZGVmaW5lcylkLnB1c2goZSksZC5wdXNoKGIuZGVmaW5lc1tlXSk7Zm9yKGU9MDtlPGcubGVuZ3RoO2UrKylkLnB1c2goY1tnW2VdXSk7ZC5wdXNoKGIub25CZWZvcmVDb21waWxlLnRvU3RyaW5nKCkpO2QucHVzaChhLmdhbW1hT3V0cHV0KTtyZXR1cm4gZC5qb2luKCl9O3RoaXMuYWNxdWlyZVByb2dyYW09ZnVuY3Rpb24oYyxkLGYsZyl7Zm9yKHZhciBoLGs9MCxtPWUubGVuZ3RoO2s8XG5tO2srKyl7dmFyIHE9ZVtrXTtpZihxLmNvZGU9PT1nKXtoPXE7KytoLnVzZWRUaW1lczticmVha319dm9pZCAwPT09aCYmKGg9bmV3IHhnKGEsYixnLGMsZCxmKSxlLnB1c2goaCkpO3JldHVybiBofTt0aGlzLnJlbGVhc2VQcm9ncmFtPWZ1bmN0aW9uKGEpe2lmKDA9PT0tLWEudXNlZFRpbWVzKXt2YXIgYj1lLmluZGV4T2YoYSk7ZVtiXT1lW2UubGVuZ3RoLTFdO2UucG9wKCk7YS5kZXN0cm95KCl9fTt0aGlzLnByb2dyYW1zPWV9ZnVuY3Rpb24gQWcoYSxiLGMsZCxlLGYsZyl7ZnVuY3Rpb24gaChhLGIpe2lmKGEud2lkdGg+Ynx8YS5oZWlnaHQ+Yil7Yi89TWF0aC5tYXgoYS53aWR0aCxhLmhlaWdodCk7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiY2FudmFzXCIpO2Mud2lkdGg9TWF0aC5mbG9vcihhLndpZHRoKmIpO2MuaGVpZ2h0PU1hdGguZmxvb3IoYS5oZWlnaHQqYik7Yy5nZXRDb250ZXh0KFwiMmRcIikuZHJhd0ltYWdlKGEsXG4wLDAsYS53aWR0aCxhLmhlaWdodCwwLDAsYy53aWR0aCxjLmhlaWdodCk7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogaW1hZ2UgaXMgdG9vIGJpZyAoXCIrYS53aWR0aCtcInhcIithLmhlaWdodCtcIikuIFJlc2l6ZWQgdG8gXCIrYy53aWR0aCtcInhcIitjLmhlaWdodCxhKTtyZXR1cm4gY31yZXR1cm4gYX1mdW5jdGlvbiBrKGEpe3JldHVybiBRLmlzUG93ZXJPZlR3byhhLndpZHRoKSYmUS5pc1Bvd2VyT2ZUd28oYS5oZWlnaHQpfWZ1bmN0aW9uIG0oYSxiKXtyZXR1cm4gYS5nZW5lcmF0ZU1pcG1hcHMmJmImJjEwMDMhPT1hLm1pbkZpbHRlciYmMTAwNiE9PWEubWluRmlsdGVyfWZ1bmN0aW9uIHEoYil7cmV0dXJuIDEwMDM9PT1ifHwxMDA0PT09Ynx8MTAwNT09PWI/YS5ORUFSRVNUOmEuTElORUFSfWZ1bmN0aW9uIG4oYil7Yj1iLnRhcmdldDtiLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsbik7YTp7dmFyIGM9ZC5nZXQoYik7aWYoYi5pbWFnZSYmYy5fX2ltYWdlX193ZWJnbFRleHR1cmVDdWJlKWEuZGVsZXRlVGV4dHVyZShjLl9faW1hZ2VfX3dlYmdsVGV4dHVyZUN1YmUpO1xuZWxzZXtpZih2b2lkIDA9PT1jLl9fd2ViZ2xJbml0KWJyZWFrIGE7YS5kZWxldGVUZXh0dXJlKGMuX193ZWJnbFRleHR1cmUpfWQucmVtb3ZlKGIpfWIuaXNWaWRlb1RleHR1cmUmJmRlbGV0ZSB5W2IuaWRdO2cudGV4dHVyZXMtLX1mdW5jdGlvbiB1KGIpe2I9Yi50YXJnZXQ7Yi5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLHUpO3ZhciBjPWQuZ2V0KGIpLGU9ZC5nZXQoYi50ZXh0dXJlKTtpZihiKXt2b2lkIDAhPT1lLl9fd2ViZ2xUZXh0dXJlJiZhLmRlbGV0ZVRleHR1cmUoZS5fX3dlYmdsVGV4dHVyZSk7Yi5kZXB0aFRleHR1cmUmJmIuZGVwdGhUZXh0dXJlLmRpc3Bvc2UoKTtpZihiLmlzV2ViR0xSZW5kZXJUYXJnZXRDdWJlKWZvcihlPTA7Nj5lO2UrKylhLmRlbGV0ZUZyYW1lYnVmZmVyKGMuX193ZWJnbEZyYW1lYnVmZmVyW2VdKSxjLl9fd2ViZ2xEZXB0aGJ1ZmZlciYmYS5kZWxldGVSZW5kZXJidWZmZXIoYy5fX3dlYmdsRGVwdGhidWZmZXJbZV0pO2Vsc2UgYS5kZWxldGVGcmFtZWJ1ZmZlcihjLl9fd2ViZ2xGcmFtZWJ1ZmZlciksXG5jLl9fd2ViZ2xEZXB0aGJ1ZmZlciYmYS5kZWxldGVSZW5kZXJidWZmZXIoYy5fX3dlYmdsRGVwdGhidWZmZXIpO2QucmVtb3ZlKGIudGV4dHVyZSk7ZC5yZW1vdmUoYil9Zy50ZXh0dXJlcy0tfWZ1bmN0aW9uIHIoYixxKXt2YXIgdT1kLmdldChiKTtpZigwPGIudmVyc2lvbiYmdS5fX3ZlcnNpb24hPT1iLnZlcnNpb24pe3ZhciByPWIuaW1hZ2U7aWYodm9pZCAwPT09ciljb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBUZXh0dXJlIG1hcmtlZCBmb3IgdXBkYXRlIGJ1dCBpbWFnZSBpcyB1bmRlZmluZWRcIixiKTtlbHNlIGlmKCExPT09ci5jb21wbGV0ZSljb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBUZXh0dXJlIG1hcmtlZCBmb3IgdXBkYXRlIGJ1dCBpbWFnZSBpcyBpbmNvbXBsZXRlXCIsYik7ZWxzZXt2b2lkIDA9PT11Ll9fd2ViZ2xJbml0JiYodS5fX3dlYmdsSW5pdD0hMCxiLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsbiksdS5fX3dlYmdsVGV4dHVyZT1cbmEuY3JlYXRlVGV4dHVyZSgpLGIuaXNWaWRlb1RleHR1cmUmJih5W2IuaWRdPWIpLGcudGV4dHVyZXMrKyk7Yy5hY3RpdmVUZXh0dXJlKGEuVEVYVFVSRTArcSk7Yy5iaW5kVGV4dHVyZShhLlRFWFRVUkVfMkQsdS5fX3dlYmdsVGV4dHVyZSk7YS5waXhlbFN0b3JlaShhLlVOUEFDS19GTElQX1lfV0VCR0wsYi5mbGlwWSk7YS5waXhlbFN0b3JlaShhLlVOUEFDS19QUkVNVUxUSVBMWV9BTFBIQV9XRUJHTCxiLnByZW11bHRpcGx5QWxwaGEpO2EucGl4ZWxTdG9yZWkoYS5VTlBBQ0tfQUxJR05NRU5ULGIudW5wYWNrQWxpZ25tZW50KTt2YXIgbD1oKGIuaW1hZ2UsZS5tYXhUZXh0dXJlU2l6ZSk7KDEwMDEhPT1iLndyYXBTfHwxMDAxIT09Yi53cmFwVHx8MTAwMyE9PWIubWluRmlsdGVyJiYxMDA2IT09Yi5taW5GaWx0ZXIpJiYhMT09PWsobCkmJihxPWwscSBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnR8fHEgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudHx8cSBpbnN0YW5jZW9mIEltYWdlQml0bWFwP1xuKHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiY2FudmFzXCIpLHIud2lkdGg9US5mbG9vclBvd2VyT2ZUd28ocS53aWR0aCksci5oZWlnaHQ9US5mbG9vclBvd2VyT2ZUd28ocS5oZWlnaHQpLHIuZ2V0Q29udGV4dChcIjJkXCIpLmRyYXdJbWFnZShxLDAsMCxyLndpZHRoLHIuaGVpZ2h0KSxjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBpbWFnZSBpcyBub3QgcG93ZXIgb2YgdHdvIChcIitxLndpZHRoK1wieFwiK3EuaGVpZ2h0K1wiKS4gUmVzaXplZCB0byBcIityLndpZHRoK1wieFwiK3IuaGVpZ2h0LHEpLGw9cik6bD1xKTtxPWsobCk7dmFyIHI9Zi5jb252ZXJ0KGIuZm9ybWF0KSx2PWYuY29udmVydChiLnR5cGUpO3QoYS5URVhUVVJFXzJELGIscSk7dmFyIHA9Yi5taXBtYXBzO2lmKGIuaXNEZXB0aFRleHR1cmUpe3A9YS5ERVBUSF9DT01QT05FTlQ7aWYoMTAxNT09PWIudHlwZSl7aWYoIXopdGhyb3cgRXJyb3IoXCJGbG9hdCBEZXB0aCBUZXh0dXJlIG9ubHkgc3VwcG9ydGVkIGluIFdlYkdMMi4wXCIpO1xucD1hLkRFUFRIX0NPTVBPTkVOVDMyRn1lbHNlIHomJihwPWEuREVQVEhfQ09NUE9ORU5UMTYpOzEwMjY9PT1iLmZvcm1hdCYmcD09PWEuREVQVEhfQ09NUE9ORU5UJiYxMDEyIT09Yi50eXBlJiYxMDE0IT09Yi50eXBlJiYoY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogVXNlIFVuc2lnbmVkU2hvcnRUeXBlIG9yIFVuc2lnbmVkSW50VHlwZSBmb3IgRGVwdGhGb3JtYXQgRGVwdGhUZXh0dXJlLlwiKSxiLnR5cGU9MTAxMix2PWYuY29udmVydChiLnR5cGUpKTsxMDI3PT09Yi5mb3JtYXQmJihwPWEuREVQVEhfU1RFTkNJTCwxMDIwIT09Yi50eXBlJiYoY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogVXNlIFVuc2lnbmVkSW50MjQ4VHlwZSBmb3IgRGVwdGhTdGVuY2lsRm9ybWF0IERlcHRoVGV4dHVyZS5cIiksYi50eXBlPTEwMjAsdj1mLmNvbnZlcnQoYi50eXBlKSkpO2MudGV4SW1hZ2UyRChhLlRFWFRVUkVfMkQsMCxwLGwud2lkdGgsbC5oZWlnaHQsMCxyLFxudixudWxsKX1lbHNlIGlmKGIuaXNEYXRhVGV4dHVyZSlpZigwPHAubGVuZ3RoJiZxKXtmb3IodmFyIEE9MCx3PXAubGVuZ3RoO0E8dztBKyspbD1wW0FdLGMudGV4SW1hZ2UyRChhLlRFWFRVUkVfMkQsQSxyLGwud2lkdGgsbC5oZWlnaHQsMCxyLHYsbC5kYXRhKTtiLmdlbmVyYXRlTWlwbWFwcz0hMX1lbHNlIGMudGV4SW1hZ2UyRChhLlRFWFRVUkVfMkQsMCxyLGwud2lkdGgsbC5oZWlnaHQsMCxyLHYsbC5kYXRhKTtlbHNlIGlmKGIuaXNDb21wcmVzc2VkVGV4dHVyZSlmb3IoQT0wLHc9cC5sZW5ndGg7QTx3O0ErKylsPXBbQV0sMTAyMyE9PWIuZm9ybWF0JiYxMDIyIT09Yi5mb3JtYXQ/LTE8Yy5nZXRDb21wcmVzc2VkVGV4dHVyZUZvcm1hdHMoKS5pbmRleE9mKHIpP2MuY29tcHJlc3NlZFRleEltYWdlMkQoYS5URVhUVVJFXzJELEEscixsLndpZHRoLGwuaGVpZ2h0LDAsbC5kYXRhKTpjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBBdHRlbXB0IHRvIGxvYWQgdW5zdXBwb3J0ZWQgY29tcHJlc3NlZCB0ZXh0dXJlIGZvcm1hdCBpbiAudXBsb2FkVGV4dHVyZSgpXCIpOlxuYy50ZXhJbWFnZTJEKGEuVEVYVFVSRV8yRCxBLHIsbC53aWR0aCxsLmhlaWdodCwwLHIsdixsLmRhdGEpO2Vsc2UgaWYoMDxwLmxlbmd0aCYmcSl7QT0wO2Zvcih3PXAubGVuZ3RoO0E8dztBKyspbD1wW0FdLGMudGV4SW1hZ2UyRChhLlRFWFRVUkVfMkQsQSxyLHIsdixsKTtiLmdlbmVyYXRlTWlwbWFwcz0hMX1lbHNlIGMudGV4SW1hZ2UyRChhLlRFWFRVUkVfMkQsMCxyLHIsdixsKTttKGIscSkmJmEuZ2VuZXJhdGVNaXBtYXAoYS5URVhUVVJFXzJEKTt1Ll9fdmVyc2lvbj1iLnZlcnNpb247aWYoYi5vblVwZGF0ZSliLm9uVXBkYXRlKGIpO3JldHVybn19Yy5hY3RpdmVUZXh0dXJlKGEuVEVYVFVSRTArcSk7Yy5iaW5kVGV4dHVyZShhLlRFWFRVUkVfMkQsdS5fX3dlYmdsVGV4dHVyZSl9ZnVuY3Rpb24gdChjLGcsaCl7aD8oYS50ZXhQYXJhbWV0ZXJpKGMsYS5URVhUVVJFX1dSQVBfUyxmLmNvbnZlcnQoZy53cmFwUykpLGEudGV4UGFyYW1ldGVyaShjLGEuVEVYVFVSRV9XUkFQX1QsXG5mLmNvbnZlcnQoZy53cmFwVCkpLGEudGV4UGFyYW1ldGVyaShjLGEuVEVYVFVSRV9NQUdfRklMVEVSLGYuY29udmVydChnLm1hZ0ZpbHRlcikpLGEudGV4UGFyYW1ldGVyaShjLGEuVEVYVFVSRV9NSU5fRklMVEVSLGYuY29udmVydChnLm1pbkZpbHRlcikpKTooYS50ZXhQYXJhbWV0ZXJpKGMsYS5URVhUVVJFX1dSQVBfUyxhLkNMQU1QX1RPX0VER0UpLGEudGV4UGFyYW1ldGVyaShjLGEuVEVYVFVSRV9XUkFQX1QsYS5DTEFNUF9UT19FREdFKSwxMDAxPT09Zy53cmFwUyYmMTAwMT09PWcud3JhcFR8fGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFRleHR1cmUgaXMgbm90IHBvd2VyIG9mIHR3by4gVGV4dHVyZS53cmFwUyBhbmQgVGV4dHVyZS53cmFwVCBzaG91bGQgYmUgc2V0IHRvIFRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmcuXCIsZyksYS50ZXhQYXJhbWV0ZXJpKGMsYS5URVhUVVJFX01BR19GSUxURVIscShnLm1hZ0ZpbHRlcikpLGEudGV4UGFyYW1ldGVyaShjLFxuYS5URVhUVVJFX01JTl9GSUxURVIscShnLm1pbkZpbHRlcikpLDEwMDMhPT1nLm1pbkZpbHRlciYmMTAwNiE9PWcubWluRmlsdGVyJiZjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBUZXh0dXJlIGlzIG5vdCBwb3dlciBvZiB0d28uIFRleHR1cmUubWluRmlsdGVyIHNob3VsZCBiZSBzZXQgdG8gVEhSRUUuTmVhcmVzdEZpbHRlciBvciBUSFJFRS5MaW5lYXJGaWx0ZXIuXCIsZykpOyEoaD1iLmdldChcIkVYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKSl8fDEwMTU9PT1nLnR5cGUmJm51bGw9PT1iLmdldChcIk9FU190ZXh0dXJlX2Zsb2F0X2xpbmVhclwiKXx8MTAxNj09PWcudHlwZSYmbnVsbD09PWIuZ2V0KFwiT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXJcIil8fCEoMTxnLmFuaXNvdHJvcHl8fGQuZ2V0KGcpLl9fY3VycmVudEFuaXNvdHJvcHkpfHwoYS50ZXhQYXJhbWV0ZXJmKGMsaC5URVhUVVJFX01BWF9BTklTT1RST1BZX0VYVCxNYXRoLm1pbihnLmFuaXNvdHJvcHksXG5lLmdldE1heEFuaXNvdHJvcHkoKSkpLGQuZ2V0KGcpLl9fY3VycmVudEFuaXNvdHJvcHk9Zy5hbmlzb3Ryb3B5KX1mdW5jdGlvbiBsKGIsZSxnLGgpe3ZhciBrPWYuY29udmVydChlLnRleHR1cmUuZm9ybWF0KSxtPWYuY29udmVydChlLnRleHR1cmUudHlwZSk7Yy50ZXhJbWFnZTJEKGgsMCxrLGUud2lkdGgsZS5oZWlnaHQsMCxrLG0sbnVsbCk7YS5iaW5kRnJhbWVidWZmZXIoYS5GUkFNRUJVRkZFUixiKTthLmZyYW1lYnVmZmVyVGV4dHVyZTJEKGEuRlJBTUVCVUZGRVIsZyxoLGQuZ2V0KGUudGV4dHVyZSkuX193ZWJnbFRleHR1cmUsMCk7YS5iaW5kRnJhbWVidWZmZXIoYS5GUkFNRUJVRkZFUixudWxsKX1mdW5jdGlvbiBwKGIsYyl7YS5iaW5kUmVuZGVyYnVmZmVyKGEuUkVOREVSQlVGRkVSLGIpO2MuZGVwdGhCdWZmZXImJiFjLnN0ZW5jaWxCdWZmZXI/KGEucmVuZGVyYnVmZmVyU3RvcmFnZShhLlJFTkRFUkJVRkZFUixhLkRFUFRIX0NPTVBPTkVOVDE2LGMud2lkdGgsYy5oZWlnaHQpLFxuYS5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihhLkZSQU1FQlVGRkVSLGEuREVQVEhfQVRUQUNITUVOVCxhLlJFTkRFUkJVRkZFUixiKSk6Yy5kZXB0aEJ1ZmZlciYmYy5zdGVuY2lsQnVmZmVyPyhhLnJlbmRlcmJ1ZmZlclN0b3JhZ2UoYS5SRU5ERVJCVUZGRVIsYS5ERVBUSF9TVEVOQ0lMLGMud2lkdGgsYy5oZWlnaHQpLGEuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoYS5GUkFNRUJVRkZFUixhLkRFUFRIX1NURU5DSUxfQVRUQUNITUVOVCxhLlJFTkRFUkJVRkZFUixiKSk6YS5yZW5kZXJidWZmZXJTdG9yYWdlKGEuUkVOREVSQlVGRkVSLGEuUkdCQTQsYy53aWR0aCxjLmhlaWdodCk7YS5iaW5kUmVuZGVyYnVmZmVyKGEuUkVOREVSQlVGRkVSLG51bGwpfXZhciB6PVwidW5kZWZpbmVkXCIhPT10eXBlb2YgV2ViR0wyUmVuZGVyaW5nQ29udGV4dCYmYSBpbnN0YW5jZW9mIHdpbmRvdy5XZWJHTDJSZW5kZXJpbmdDb250ZXh0LHk9e307dGhpcy5zZXRUZXh0dXJlMkQ9cjt0aGlzLnNldFRleHR1cmVDdWJlPVxuZnVuY3Rpb24oYixxKXt2YXIgdT1kLmdldChiKTtpZig2PT09Yi5pbWFnZS5sZW5ndGgpaWYoMDxiLnZlcnNpb24mJnUuX192ZXJzaW9uIT09Yi52ZXJzaW9uKXt1Ll9faW1hZ2VfX3dlYmdsVGV4dHVyZUN1YmV8fChiLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsbiksdS5fX2ltYWdlX193ZWJnbFRleHR1cmVDdWJlPWEuY3JlYXRlVGV4dHVyZSgpLGcudGV4dHVyZXMrKyk7Yy5hY3RpdmVUZXh0dXJlKGEuVEVYVFVSRTArcSk7Yy5iaW5kVGV4dHVyZShhLlRFWFRVUkVfQ1VCRV9NQVAsdS5fX2ltYWdlX193ZWJnbFRleHR1cmVDdWJlKTthLnBpeGVsU3RvcmVpKGEuVU5QQUNLX0ZMSVBfWV9XRUJHTCxiLmZsaXBZKTtxPWImJmIuaXNDb21wcmVzc2VkVGV4dHVyZTtmb3IodmFyIHI9Yi5pbWFnZVswXSYmYi5pbWFnZVswXS5pc0RhdGFUZXh0dXJlLGw9W10sdj0wOzY+djt2KyspbFt2XT1xfHxyP3I/Yi5pbWFnZVt2XS5pbWFnZTpiLmltYWdlW3ZdOmgoYi5pbWFnZVt2XSxlLm1heEN1YmVtYXBTaXplKTtcbnZhciBwPWsobFswXSksdz1mLmNvbnZlcnQoYi5mb3JtYXQpLEE9Zi5jb252ZXJ0KGIudHlwZSk7dChhLlRFWFRVUkVfQ1VCRV9NQVAsYixwKTtmb3Iodj0wOzY+djt2KyspaWYocSlmb3IodmFyIHksST1sW3ZdLm1pcG1hcHMsej0wLHg9SS5sZW5ndGg7ejx4O3orKyl5PUlbel0sMTAyMyE9PWIuZm9ybWF0JiYxMDIyIT09Yi5mb3JtYXQ/LTE8Yy5nZXRDb21wcmVzc2VkVGV4dHVyZUZvcm1hdHMoKS5pbmRleE9mKHcpP2MuY29tcHJlc3NlZFRleEltYWdlMkQoYS5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1grdix6LHcseS53aWR0aCx5LmhlaWdodCwwLHkuZGF0YSk6Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogQXR0ZW1wdCB0byBsb2FkIHVuc3VwcG9ydGVkIGNvbXByZXNzZWQgdGV4dHVyZSBmb3JtYXQgaW4gLnNldFRleHR1cmVDdWJlKClcIik6Yy50ZXhJbWFnZTJEKGEuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YK3Yseix3LHkud2lkdGgseS5oZWlnaHQsXG4wLHcsQSx5LmRhdGEpO2Vsc2Ugcj9jLnRleEltYWdlMkQoYS5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1grdiwwLHcsbFt2XS53aWR0aCxsW3ZdLmhlaWdodCwwLHcsQSxsW3ZdLmRhdGEpOmMudGV4SW1hZ2UyRChhLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCt2LDAsdyx3LEEsbFt2XSk7bShiLHApJiZhLmdlbmVyYXRlTWlwbWFwKGEuVEVYVFVSRV9DVUJFX01BUCk7dS5fX3ZlcnNpb249Yi52ZXJzaW9uO2lmKGIub25VcGRhdGUpYi5vblVwZGF0ZShiKX1lbHNlIGMuYWN0aXZlVGV4dHVyZShhLlRFWFRVUkUwK3EpLGMuYmluZFRleHR1cmUoYS5URVhUVVJFX0NVQkVfTUFQLHUuX19pbWFnZV9fd2ViZ2xUZXh0dXJlQ3ViZSl9O3RoaXMuc2V0VGV4dHVyZUN1YmVEeW5hbWljPWZ1bmN0aW9uKGIsZSl7Yy5hY3RpdmVUZXh0dXJlKGEuVEVYVFVSRTArZSk7Yy5iaW5kVGV4dHVyZShhLlRFWFRVUkVfQ1VCRV9NQVAsZC5nZXQoYikuX193ZWJnbFRleHR1cmUpfTt0aGlzLnNldHVwUmVuZGVyVGFyZ2V0PVxuZnVuY3Rpb24oYil7dmFyIGU9ZC5nZXQoYiksZj1kLmdldChiLnRleHR1cmUpO2IuYWRkRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIix1KTtmLl9fd2ViZ2xUZXh0dXJlPWEuY3JlYXRlVGV4dHVyZSgpO2cudGV4dHVyZXMrKzt2YXIgaD0hMD09PWIuaXNXZWJHTFJlbmRlclRhcmdldEN1YmUsbj1rKGIpO2lmKGgpe2UuX193ZWJnbEZyYW1lYnVmZmVyPVtdO2Zvcih2YXIgcT0wOzY+cTtxKyspZS5fX3dlYmdsRnJhbWVidWZmZXJbcV09YS5jcmVhdGVGcmFtZWJ1ZmZlcigpfWVsc2UgZS5fX3dlYmdsRnJhbWVidWZmZXI9YS5jcmVhdGVGcmFtZWJ1ZmZlcigpO2lmKGgpe2MuYmluZFRleHR1cmUoYS5URVhUVVJFX0NVQkVfTUFQLGYuX193ZWJnbFRleHR1cmUpO3QoYS5URVhUVVJFX0NVQkVfTUFQLGIudGV4dHVyZSxuKTtmb3IocT0wOzY+cTtxKyspbChlLl9fd2ViZ2xGcmFtZWJ1ZmZlcltxXSxiLGEuQ09MT1JfQVRUQUNITUVOVDAsYS5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1grcSk7XG5tKGIudGV4dHVyZSxuKSYmYS5nZW5lcmF0ZU1pcG1hcChhLlRFWFRVUkVfQ1VCRV9NQVApO2MuYmluZFRleHR1cmUoYS5URVhUVVJFX0NVQkVfTUFQLG51bGwpfWVsc2UgYy5iaW5kVGV4dHVyZShhLlRFWFRVUkVfMkQsZi5fX3dlYmdsVGV4dHVyZSksdChhLlRFWFRVUkVfMkQsYi50ZXh0dXJlLG4pLGwoZS5fX3dlYmdsRnJhbWVidWZmZXIsYixhLkNPTE9SX0FUVEFDSE1FTlQwLGEuVEVYVFVSRV8yRCksbShiLnRleHR1cmUsbikmJmEuZ2VuZXJhdGVNaXBtYXAoYS5URVhUVVJFXzJEKSxjLmJpbmRUZXh0dXJlKGEuVEVYVFVSRV8yRCxudWxsKTtpZihiLmRlcHRoQnVmZmVyKXtlPWQuZ2V0KGIpO2Y9ITA9PT1iLmlzV2ViR0xSZW5kZXJUYXJnZXRDdWJlO2lmKGIuZGVwdGhUZXh0dXJlKXtpZihmKXRocm93IEVycm9yKFwidGFyZ2V0LmRlcHRoVGV4dHVyZSBub3Qgc3VwcG9ydGVkIGluIEN1YmUgcmVuZGVyIHRhcmdldHNcIik7aWYoYiYmYi5pc1dlYkdMUmVuZGVyVGFyZ2V0Q3ViZSl0aHJvdyBFcnJvcihcIkRlcHRoIFRleHR1cmUgd2l0aCBjdWJlIHJlbmRlciB0YXJnZXRzIGlzIG5vdCBzdXBwb3J0ZWRcIik7XG5hLmJpbmRGcmFtZWJ1ZmZlcihhLkZSQU1FQlVGRkVSLGUuX193ZWJnbEZyYW1lYnVmZmVyKTtpZighYi5kZXB0aFRleHR1cmV8fCFiLmRlcHRoVGV4dHVyZS5pc0RlcHRoVGV4dHVyZSl0aHJvdyBFcnJvcihcInJlbmRlclRhcmdldC5kZXB0aFRleHR1cmUgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBUSFJFRS5EZXB0aFRleHR1cmVcIik7ZC5nZXQoYi5kZXB0aFRleHR1cmUpLl9fd2ViZ2xUZXh0dXJlJiZiLmRlcHRoVGV4dHVyZS5pbWFnZS53aWR0aD09PWIud2lkdGgmJmIuZGVwdGhUZXh0dXJlLmltYWdlLmhlaWdodD09PWIuaGVpZ2h0fHwoYi5kZXB0aFRleHR1cmUuaW1hZ2Uud2lkdGg9Yi53aWR0aCxiLmRlcHRoVGV4dHVyZS5pbWFnZS5oZWlnaHQ9Yi5oZWlnaHQsYi5kZXB0aFRleHR1cmUubmVlZHNVcGRhdGU9ITApO3IoYi5kZXB0aFRleHR1cmUsMCk7ZT1kLmdldChiLmRlcHRoVGV4dHVyZSkuX193ZWJnbFRleHR1cmU7aWYoMTAyNj09PWIuZGVwdGhUZXh0dXJlLmZvcm1hdClhLmZyYW1lYnVmZmVyVGV4dHVyZTJEKGEuRlJBTUVCVUZGRVIsXG5hLkRFUFRIX0FUVEFDSE1FTlQsYS5URVhUVVJFXzJELGUsMCk7ZWxzZSBpZigxMDI3PT09Yi5kZXB0aFRleHR1cmUuZm9ybWF0KWEuZnJhbWVidWZmZXJUZXh0dXJlMkQoYS5GUkFNRUJVRkZFUixhLkRFUFRIX1NURU5DSUxfQVRUQUNITUVOVCxhLlRFWFRVUkVfMkQsZSwwKTtlbHNlIHRocm93IEVycm9yKFwiVW5rbm93biBkZXB0aFRleHR1cmUgZm9ybWF0XCIpO31lbHNlIGlmKGYpZm9yKGUuX193ZWJnbERlcHRoYnVmZmVyPVtdLGY9MDs2PmY7ZisrKWEuYmluZEZyYW1lYnVmZmVyKGEuRlJBTUVCVUZGRVIsZS5fX3dlYmdsRnJhbWVidWZmZXJbZl0pLGUuX193ZWJnbERlcHRoYnVmZmVyW2ZdPWEuY3JlYXRlUmVuZGVyYnVmZmVyKCkscChlLl9fd2ViZ2xEZXB0aGJ1ZmZlcltmXSxiKTtlbHNlIGEuYmluZEZyYW1lYnVmZmVyKGEuRlJBTUVCVUZGRVIsZS5fX3dlYmdsRnJhbWVidWZmZXIpLGUuX193ZWJnbERlcHRoYnVmZmVyPWEuY3JlYXRlUmVuZGVyYnVmZmVyKCkscChlLl9fd2ViZ2xEZXB0aGJ1ZmZlcixcbmIpO2EuYmluZEZyYW1lYnVmZmVyKGEuRlJBTUVCVUZGRVIsbnVsbCl9fTt0aGlzLnVwZGF0ZVJlbmRlclRhcmdldE1pcG1hcD1mdW5jdGlvbihiKXt2YXIgZT1iLnRleHR1cmUsZj1rKGIpO20oZSxmKSYmKGI9Yi5pc1dlYkdMUmVuZGVyVGFyZ2V0Q3ViZT9hLlRFWFRVUkVfQ1VCRV9NQVA6YS5URVhUVVJFXzJELGU9ZC5nZXQoZSkuX193ZWJnbFRleHR1cmUsYy5iaW5kVGV4dHVyZShiLGUpLGEuZ2VuZXJhdGVNaXBtYXAoYiksYy5iaW5kVGV4dHVyZShiLG51bGwpKX07dGhpcy51cGRhdGVWaWRlb1RleHR1cmVzPWZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIHkpeVthXS51cGRhdGUoKX19ZnVuY3Rpb24gQmcoKXt2YXIgYT17fTtyZXR1cm57Z2V0OmZ1bmN0aW9uKGIpe2I9Yi51dWlkO3ZhciBjPWFbYl07dm9pZCAwPT09YyYmKGM9e30sYVtiXT1jKTtyZXR1cm4gY30scmVtb3ZlOmZ1bmN0aW9uKGIpe2RlbGV0ZSBhW2IudXVpZF19LGNsZWFyOmZ1bmN0aW9uKCl7YT17fX19fWZ1bmN0aW9uIENnKGEsXG5iLGMpe2Z1bmN0aW9uIGQoYixjLGQpe3ZhciBlPW5ldyBVaW50OEFycmF5KDQpLGY9YS5jcmVhdGVUZXh0dXJlKCk7YS5iaW5kVGV4dHVyZShiLGYpO2EudGV4UGFyYW1ldGVyaShiLGEuVEVYVFVSRV9NSU5fRklMVEVSLGEuTkVBUkVTVCk7YS50ZXhQYXJhbWV0ZXJpKGIsYS5URVhUVVJFX01BR19GSUxURVIsYS5ORUFSRVNUKTtmb3IoYj0wO2I8ZDtiKyspYS50ZXhJbWFnZTJEKGMrYiwwLGEuUkdCQSwxLDEsMCxhLlJHQkEsYS5VTlNJR05FRF9CWVRFLGUpO3JldHVybiBmfWZ1bmN0aW9uIGUoYil7ITAhPT15W2JdJiYoYS5lbmFibGUoYikseVtiXT0hMCl9ZnVuY3Rpb24gZihiKXshMSE9PXlbYl0mJihhLmRpc2FibGUoYikseVtiXT0hMSl9ZnVuY3Rpb24gZyhiLGQsZyxoLGssbSxxLG4pezAhPT1iP2UoYS5CTEVORCk6ZihhLkJMRU5EKTtpZig1IT09Yil7aWYoYiE9PUp8fG4hPT1sYSlzd2l0Y2goYil7Y2FzZSAyOm4/KGEuYmxlbmRFcXVhdGlvblNlcGFyYXRlKGEuRlVOQ19BREQsXG5hLkZVTkNfQUREKSxhLmJsZW5kRnVuY1NlcGFyYXRlKGEuT05FLGEuT05FLGEuT05FLGEuT05FKSk6KGEuYmxlbmRFcXVhdGlvbihhLkZVTkNfQUREKSxhLmJsZW5kRnVuYyhhLlNSQ19BTFBIQSxhLk9ORSkpO2JyZWFrO2Nhc2UgMzpuPyhhLmJsZW5kRXF1YXRpb25TZXBhcmF0ZShhLkZVTkNfQURELGEuRlVOQ19BREQpLGEuYmxlbmRGdW5jU2VwYXJhdGUoYS5aRVJPLGEuWkVSTyxhLk9ORV9NSU5VU19TUkNfQ09MT1IsYS5PTkVfTUlOVVNfU1JDX0FMUEhBKSk6KGEuYmxlbmRFcXVhdGlvbihhLkZVTkNfQUREKSxhLmJsZW5kRnVuYyhhLlpFUk8sYS5PTkVfTUlOVVNfU1JDX0NPTE9SKSk7YnJlYWs7Y2FzZSA0Om4/KGEuYmxlbmRFcXVhdGlvblNlcGFyYXRlKGEuRlVOQ19BREQsYS5GVU5DX0FERCksYS5ibGVuZEZ1bmNTZXBhcmF0ZShhLlpFUk8sYS5TUkNfQ09MT1IsYS5aRVJPLGEuU1JDX0FMUEhBKSk6KGEuYmxlbmRFcXVhdGlvbihhLkZVTkNfQUREKSxhLmJsZW5kRnVuYyhhLlpFUk8sXG5hLlNSQ19DT0xPUikpO2JyZWFrO2RlZmF1bHQ6bj8oYS5ibGVuZEVxdWF0aW9uU2VwYXJhdGUoYS5GVU5DX0FERCxhLkZVTkNfQUREKSxhLmJsZW5kRnVuY1NlcGFyYXRlKGEuT05FLGEuT05FX01JTlVTX1NSQ19BTFBIQSxhLk9ORSxhLk9ORV9NSU5VU19TUkNfQUxQSEEpKTooYS5ibGVuZEVxdWF0aW9uU2VwYXJhdGUoYS5GVU5DX0FERCxhLkZVTkNfQUREKSxhLmJsZW5kRnVuY1NlcGFyYXRlKGEuU1JDX0FMUEhBLGEuT05FX01JTlVTX1NSQ19BTFBIQSxhLk9ORSxhLk9ORV9NSU5VU19TUkNfQUxQSEEpKX1IPUU9Qz1EPUI9eD1udWxsfWVsc2V7az1rfHxkO209bXx8ZztxPXF8fGg7aWYoZCE9PXh8fGshPT1DKWEuYmxlbmRFcXVhdGlvblNlcGFyYXRlKGMuY29udmVydChkKSxjLmNvbnZlcnQoaykpLHg9ZCxDPWs7aWYoZyE9PUJ8fGghPT1EfHxtIT09RXx8cSE9PUgpYS5ibGVuZEZ1bmNTZXBhcmF0ZShjLmNvbnZlcnQoZyksYy5jb252ZXJ0KGgpLGMuY29udmVydChtKSxjLmNvbnZlcnQocSkpLFxuQj1nLEQ9aCxFPW0sSD1xfUo9YjtsYT1ufWZ1bmN0aW9uIGgoYil7UyE9PWImJihiP2EuZnJvbnRGYWNlKGEuQ1cpOmEuZnJvbnRGYWNlKGEuQ0NXKSxTPWIpfWZ1bmN0aW9uIGsoYil7MCE9PWI/KGUoYS5DVUxMX0ZBQ0UpLGIhPT1LJiYoMT09PWI/YS5jdWxsRmFjZShhLkJBQ0spOjI9PT1iP2EuY3VsbEZhY2UoYS5GUk9OVCk6YS5jdWxsRmFjZShhLkZST05UX0FORF9CQUNLKSkpOmYoYS5DVUxMX0ZBQ0UpO0s9Yn1mdW5jdGlvbiBtKGIsYyxkKXtpZihiKXtpZihlKGEuUE9MWUdPTl9PRkZTRVRfRklMTCksTCE9PWN8fE8hPT1kKWEucG9seWdvbk9mZnNldChjLGQpLEw9YyxPPWR9ZWxzZSBmKGEuUE9MWUdPTl9PRkZTRVRfRklMTCl9ZnVuY3Rpb24gcShiKXt2b2lkIDA9PT1iJiYoYj1hLlRFWFRVUkUwK1EtMSk7TSE9PWImJihhLmFjdGl2ZVRleHR1cmUoYiksTT1iKX12YXIgbj1uZXcgZnVuY3Rpb24oKXt2YXIgYj0hMSxjPW5ldyBhYSxkPW51bGwsZT1uZXcgYWEoMCwwLDAsMCk7XG5yZXR1cm57c2V0TWFzazpmdW5jdGlvbihjKXtkPT09Y3x8Ynx8KGEuY29sb3JNYXNrKGMsYyxjLGMpLGQ9Yyl9LHNldExvY2tlZDpmdW5jdGlvbihhKXtiPWF9LHNldENsZWFyOmZ1bmN0aW9uKGIsZCxmLGcsaCl7ITA9PT1oJiYoYio9ZyxkKj1nLGYqPWcpO2Muc2V0KGIsZCxmLGcpOyExPT09ZS5lcXVhbHMoYykmJihhLmNsZWFyQ29sb3IoYixkLGYsZyksZS5jb3B5KGMpKX0scmVzZXQ6ZnVuY3Rpb24oKXtiPSExO2Q9bnVsbDtlLnNldCgtMSwwLDAsMCl9fX0sdT1uZXcgZnVuY3Rpb24oKXt2YXIgYj0hMSxjPW51bGwsZD1udWxsLGc9bnVsbDtyZXR1cm57c2V0VGVzdDpmdW5jdGlvbihiKXtiP2UoYS5ERVBUSF9URVNUKTpmKGEuREVQVEhfVEVTVCl9LHNldE1hc2s6ZnVuY3Rpb24oZCl7Yz09PWR8fGJ8fChhLmRlcHRoTWFzayhkKSxjPWQpfSxzZXRGdW5jOmZ1bmN0aW9uKGIpe2lmKGQhPT1iKXtpZihiKXN3aXRjaChiKXtjYXNlIDA6YS5kZXB0aEZ1bmMoYS5ORVZFUik7YnJlYWs7XG5jYXNlIDE6YS5kZXB0aEZ1bmMoYS5BTFdBWVMpO2JyZWFrO2Nhc2UgMjphLmRlcHRoRnVuYyhhLkxFU1MpO2JyZWFrO2Nhc2UgMzphLmRlcHRoRnVuYyhhLkxFUVVBTCk7YnJlYWs7Y2FzZSA0OmEuZGVwdGhGdW5jKGEuRVFVQUwpO2JyZWFrO2Nhc2UgNTphLmRlcHRoRnVuYyhhLkdFUVVBTCk7YnJlYWs7Y2FzZSA2OmEuZGVwdGhGdW5jKGEuR1JFQVRFUik7YnJlYWs7Y2FzZSA3OmEuZGVwdGhGdW5jKGEuTk9URVFVQUwpO2JyZWFrO2RlZmF1bHQ6YS5kZXB0aEZ1bmMoYS5MRVFVQUwpfWVsc2UgYS5kZXB0aEZ1bmMoYS5MRVFVQUwpO2Q9Yn19LHNldExvY2tlZDpmdW5jdGlvbihhKXtiPWF9LHNldENsZWFyOmZ1bmN0aW9uKGIpe2chPT1iJiYoYS5jbGVhckRlcHRoKGIpLGc9Yil9LHJlc2V0OmZ1bmN0aW9uKCl7Yj0hMTtnPWQ9Yz1udWxsfX19LHI9bmV3IGZ1bmN0aW9uKCl7dmFyIGI9ITEsYz1udWxsLGQ9bnVsbCxnPW51bGwsaD1udWxsLGs9bnVsbCxtPW51bGwsbj1udWxsLHE9bnVsbDtcbnJldHVybntzZXRUZXN0OmZ1bmN0aW9uKGIpe2I/ZShhLlNURU5DSUxfVEVTVCk6ZihhLlNURU5DSUxfVEVTVCl9LHNldE1hc2s6ZnVuY3Rpb24oZCl7Yz09PWR8fGJ8fChhLnN0ZW5jaWxNYXNrKGQpLGM9ZCl9LHNldEZ1bmM6ZnVuY3Rpb24oYixjLGUpe2lmKGQhPT1ifHxnIT09Y3x8aCE9PWUpYS5zdGVuY2lsRnVuYyhiLGMsZSksZD1iLGc9YyxoPWV9LHNldE9wOmZ1bmN0aW9uKGIsYyxkKXtpZihrIT09Ynx8bSE9PWN8fG4hPT1kKWEuc3RlbmNpbE9wKGIsYyxkKSxrPWIsbT1jLG49ZH0sc2V0TG9ja2VkOmZ1bmN0aW9uKGEpe2I9YX0sc2V0Q2xlYXI6ZnVuY3Rpb24oYil7cSE9PWImJihhLmNsZWFyU3RlbmNpbChiKSxxPWIpfSxyZXNldDpmdW5jdGlvbigpe2I9ITE7cT1uPW09az1oPWc9ZD1jPW51bGx9fX0sbD1hLmdldFBhcmFtZXRlcihhLk1BWF9WRVJURVhfQVRUUklCUyksdj1uZXcgVWludDhBcnJheShsKSxwPW5ldyBVaW50OEFycmF5KGwpLHo9bmV3IFVpbnQ4QXJyYXkobCksXG55PXt9LEk9bnVsbCxBPW51bGwsSj1udWxsLHg9bnVsbCxCPW51bGwsRD1udWxsLEM9bnVsbCxFPW51bGwsSD1udWxsLGxhPSExLFM9bnVsbCxLPW51bGwsTj1udWxsLEw9bnVsbCxPPW51bGwsUT1hLmdldFBhcmFtZXRlcihhLk1BWF9DT01CSU5FRF9URVhUVVJFX0lNQUdFX1VOSVRTKSxsPXBhcnNlRmxvYXQoL15XZWJHTFxcIChbMC05XSkvLmV4ZWMoYS5nZXRQYXJhbWV0ZXIoYS5WRVJTSU9OKSlbMV0pLFY9MTw9cGFyc2VGbG9hdChsKSxNPW51bGwsUD17fSxSPW5ldyBhYSxHPW5ldyBhYSxZPXt9O1lbYS5URVhUVVJFXzJEXT1kKGEuVEVYVFVSRV8yRCxhLlRFWFRVUkVfMkQsMSk7WVthLlRFWFRVUkVfQ1VCRV9NQVBdPWQoYS5URVhUVVJFX0NVQkVfTUFQLGEuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YLDYpO24uc2V0Q2xlYXIoMCwwLDAsMSk7dS5zZXRDbGVhcigxKTtyLnNldENsZWFyKDApO2UoYS5ERVBUSF9URVNUKTt1LnNldEZ1bmMoMyk7aCghMSk7aygxKTtlKGEuQ1VMTF9GQUNFKTtcbmUoYS5CTEVORCk7ZygxKTtyZXR1cm57YnVmZmVyczp7Y29sb3I6bixkZXB0aDp1LHN0ZW5jaWw6cn0saW5pdEF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPXYubGVuZ3RoO2E8YjthKyspdlthXT0wfSxlbmFibGVBdHRyaWJ1dGU6ZnVuY3Rpb24oYyl7dltjXT0xOzA9PT1wW2NdJiYoYS5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShjKSxwW2NdPTEpOzAhPT16W2NdJiYoYi5nZXQoXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpLnZlcnRleEF0dHJpYkRpdmlzb3JBTkdMRShjLDApLHpbY109MCl9LGVuYWJsZUF0dHJpYnV0ZUFuZERpdmlzb3I6ZnVuY3Rpb24oYyxkKXt2W2NdPTE7MD09PXBbY10mJihhLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGMpLHBbY109MSk7eltjXSE9PWQmJihiLmdldChcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIikudmVydGV4QXR0cmliRGl2aXNvckFOR0xFKGMsZCkseltjXT1kKX0sZGlzYWJsZVVudXNlZEF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXtmb3IodmFyIGI9XG4wLGM9cC5sZW5ndGg7YiE9PWM7KytiKXBbYl0hPT12W2JdJiYoYS5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoYikscFtiXT0wKX0sZW5hYmxlOmUsZGlzYWJsZTpmLGdldENvbXByZXNzZWRUZXh0dXJlRm9ybWF0czpmdW5jdGlvbigpe2lmKG51bGw9PT1JJiYoST1bXSxiLmdldChcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0Y1wiKXx8Yi5nZXQoXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKXx8Yi5nZXQoXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfZXRjMVwiKSkpZm9yKHZhciBjPWEuZ2V0UGFyYW1ldGVyKGEuQ09NUFJFU1NFRF9URVhUVVJFX0ZPUk1BVFMpLGQ9MDtkPGMubGVuZ3RoO2QrKylJLnB1c2goY1tkXSk7cmV0dXJuIEl9LHVzZVByb2dyYW06ZnVuY3Rpb24oYil7cmV0dXJuIEEhPT1iPyhhLnVzZVByb2dyYW0oYiksQT1iLCEwKTohMX0sc2V0QmxlbmRpbmc6ZyxzZXRNYXRlcmlhbDpmdW5jdGlvbihiLGMpezI9PT1iLnNpZGU/ZihhLkNVTExfRkFDRSk6XG5lKGEuQ1VMTF9GQUNFKTt2YXIgZD0xPT09Yi5zaWRlO2MmJihkPSFkKTtoKGQpOyEwPT09Yi50cmFuc3BhcmVudD9nKGIuYmxlbmRpbmcsYi5ibGVuZEVxdWF0aW9uLGIuYmxlbmRTcmMsYi5ibGVuZERzdCxiLmJsZW5kRXF1YXRpb25BbHBoYSxiLmJsZW5kU3JjQWxwaGEsYi5ibGVuZERzdEFscGhhLGIucHJlbXVsdGlwbGllZEFscGhhKTpnKDApO3Uuc2V0RnVuYyhiLmRlcHRoRnVuYyk7dS5zZXRUZXN0KGIuZGVwdGhUZXN0KTt1LnNldE1hc2soYi5kZXB0aFdyaXRlKTtuLnNldE1hc2soYi5jb2xvcldyaXRlKTttKGIucG9seWdvbk9mZnNldCxiLnBvbHlnb25PZmZzZXRGYWN0b3IsYi5wb2x5Z29uT2Zmc2V0VW5pdHMpfSxzZXRGbGlwU2lkZWQ6aCxzZXRDdWxsRmFjZTprLHNldExpbmVXaWR0aDpmdW5jdGlvbihiKXtiIT09TiYmKFYmJmEubGluZVdpZHRoKGIpLE49Yil9LHNldFBvbHlnb25PZmZzZXQ6bSxzZXRTY2lzc29yVGVzdDpmdW5jdGlvbihiKXtiP2UoYS5TQ0lTU09SX1RFU1QpOlxuZihhLlNDSVNTT1JfVEVTVCl9LGFjdGl2ZVRleHR1cmU6cSxiaW5kVGV4dHVyZTpmdW5jdGlvbihiLGMpe251bGw9PT1NJiZxKCk7dmFyIGQ9UFtNXTt2b2lkIDA9PT1kJiYoZD17dHlwZTp2b2lkIDAsdGV4dHVyZTp2b2lkIDB9LFBbTV09ZCk7aWYoZC50eXBlIT09Ynx8ZC50ZXh0dXJlIT09YylhLmJpbmRUZXh0dXJlKGIsY3x8WVtiXSksZC50eXBlPWIsZC50ZXh0dXJlPWN9LGNvbXByZXNzZWRUZXhJbWFnZTJEOmZ1bmN0aW9uKCl7dHJ5e2EuY29tcHJlc3NlZFRleEltYWdlMkQuYXBwbHkoYSxhcmd1bWVudHMpfWNhdGNoKGVhKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xTdGF0ZTpcIixlYSl9fSx0ZXhJbWFnZTJEOmZ1bmN0aW9uKCl7dHJ5e2EudGV4SW1hZ2UyRC5hcHBseShhLGFyZ3VtZW50cyl9Y2F0Y2goZWEpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFN0YXRlOlwiLGVhKX19LHNjaXNzb3I6ZnVuY3Rpb24oYil7ITE9PT1SLmVxdWFscyhiKSYmKGEuc2Npc3NvcihiLngsXG5iLnksYi56LGIudyksUi5jb3B5KGIpKX0sdmlld3BvcnQ6ZnVuY3Rpb24oYil7ITE9PT1HLmVxdWFscyhiKSYmKGEudmlld3BvcnQoYi54LGIueSxiLnosYi53KSxHLmNvcHkoYikpfSxyZXNldDpmdW5jdGlvbigpe2Zvcih2YXIgYj0wO2I8cC5sZW5ndGg7YisrKTE9PT1wW2JdJiYoYS5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoYikscFtiXT0wKTt5PXt9O009ST1udWxsO1A9e307Sz1TPUo9QT1udWxsO24ucmVzZXQoKTt1LnJlc2V0KCk7ci5yZXNldCgpfX19ZnVuY3Rpb24gRGcoYSxiLGMpe2Z1bmN0aW9uIGQoYil7aWYoXCJoaWdocFwiPT09Yil7aWYoMDxhLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChhLlZFUlRFWF9TSEFERVIsYS5ISUdIX0ZMT0FUKS5wcmVjaXNpb24mJjA8YS5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoYS5GUkFHTUVOVF9TSEFERVIsYS5ISUdIX0ZMT0FUKS5wcmVjaXNpb24pcmV0dXJuXCJoaWdocFwiO2I9XCJtZWRpdW1wXCJ9cmV0dXJuXCJtZWRpdW1wXCI9PT1iJiZcbjA8YS5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoYS5WRVJURVhfU0hBREVSLGEuTUVESVVNX0ZMT0FUKS5wcmVjaXNpb24mJjA8YS5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoYS5GUkFHTUVOVF9TSEFERVIsYS5NRURJVU1fRkxPQVQpLnByZWNpc2lvbj9cIm1lZGl1bXBcIjpcImxvd3BcIn12YXIgZSxmPXZvaWQgMCE9PWMucHJlY2lzaW9uP2MucHJlY2lzaW9uOlwiaGlnaHBcIixnPWQoZik7ZyE9PWYmJihjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOlwiLGYsXCJub3Qgc3VwcG9ydGVkLCB1c2luZ1wiLGcsXCJpbnN0ZWFkLlwiKSxmPWcpO2M9ITA9PT1jLmxvZ2FyaXRobWljRGVwdGhCdWZmZXI7dmFyIGc9YS5nZXRQYXJhbWV0ZXIoYS5NQVhfVEVYVFVSRV9JTUFHRV9VTklUUyksaD1hLmdldFBhcmFtZXRlcihhLk1BWF9WRVJURVhfVEVYVFVSRV9JTUFHRV9VTklUUyksaz1hLmdldFBhcmFtZXRlcihhLk1BWF9URVhUVVJFX1NJWkUpLG09YS5nZXRQYXJhbWV0ZXIoYS5NQVhfQ1VCRV9NQVBfVEVYVFVSRV9TSVpFKSxcbnE9YS5nZXRQYXJhbWV0ZXIoYS5NQVhfVkVSVEVYX0FUVFJJQlMpLG49YS5nZXRQYXJhbWV0ZXIoYS5NQVhfVkVSVEVYX1VOSUZPUk1fVkVDVE9SUyksdT1hLmdldFBhcmFtZXRlcihhLk1BWF9WQVJZSU5HX1ZFQ1RPUlMpLHI9YS5nZXRQYXJhbWV0ZXIoYS5NQVhfRlJBR01FTlRfVU5JRk9STV9WRUNUT1JTKSxsPTA8aCx2PSEhYi5nZXQoXCJPRVNfdGV4dHVyZV9mbG9hdFwiKTtyZXR1cm57Z2V0TWF4QW5pc290cm9weTpmdW5jdGlvbigpe2lmKHZvaWQgMCE9PWUpcmV0dXJuIGU7dmFyIGM9Yi5nZXQoXCJFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIik7cmV0dXJuIGU9bnVsbCE9PWM/YS5nZXRQYXJhbWV0ZXIoYy5NQVhfVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQpOjB9LGdldE1heFByZWNpc2lvbjpkLHByZWNpc2lvbjpmLGxvZ2FyaXRobWljRGVwdGhCdWZmZXI6YyxtYXhUZXh0dXJlczpnLG1heFZlcnRleFRleHR1cmVzOmgsbWF4VGV4dHVyZVNpemU6ayxtYXhDdWJlbWFwU2l6ZTptLFxubWF4QXR0cmlidXRlczpxLG1heFZlcnRleFVuaWZvcm1zOm4sbWF4VmFyeWluZ3M6dSxtYXhGcmFnbWVudFVuaWZvcm1zOnIsdmVydGV4VGV4dHVyZXM6bCxmbG9hdEZyYWdtZW50VGV4dHVyZXM6dixmbG9hdFZlcnRleFRleHR1cmVzOmwmJnZ9fWZ1bmN0aW9uIGJhKGEsYixjLGQpe1RhLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUGVyc3BlY3RpdmVDYW1lcmFcIjt0aGlzLmZvdj12b2lkIDAhPT1hP2E6NTA7dGhpcy56b29tPTE7dGhpcy5uZWFyPXZvaWQgMCE9PWM/YzouMTt0aGlzLmZhcj12b2lkIDAhPT1kP2Q6MkUzO3RoaXMuZm9jdXM9MTA7dGhpcy5hc3BlY3Q9dm9pZCAwIT09Yj9iOjE7dGhpcy52aWV3PW51bGw7dGhpcy5maWxtR2F1Z2U9MzU7dGhpcy5maWxtT2Zmc2V0PTA7dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9ZnVuY3Rpb24gdWQoYSl7YmEuY2FsbCh0aGlzKTt0aGlzLmNhbWVyYXM9YXx8W119ZnVuY3Rpb24gYmUoYSl7ZnVuY3Rpb24gYigpe2lmKG51bGwhPT1cbmQmJmQuaXNQcmVzZW50aW5nKXt2YXIgYj1kLmdldEV5ZVBhcmFtZXRlcnMoXCJsZWZ0XCIpLGU9Yi5yZW5kZXJXaWR0aCxiPWIucmVuZGVySGVpZ2h0O249YS5nZXRQaXhlbFJhdGlvKCk7cT1hLmdldFNpemUoKTthLnNldERyYXdpbmdCdWZmZXJTaXplKDIqZSxiLDEpfWVsc2UgYy5lbmFibGVkJiZhLnNldERyYXdpbmdCdWZmZXJTaXplKHEud2lkdGgscS5oZWlnaHQsbil9dmFyIGM9dGhpcyxkPW51bGwsZT1udWxsLGY9bnVsbDtcInVuZGVmaW5lZFwiIT09dHlwZW9mIHdpbmRvdyYmXCJWUkZyYW1lRGF0YVwiaW4gd2luZG93JiYoZT1uZXcgd2luZG93LlZSRnJhbWVEYXRhKTt2YXIgZz1uZXcgTyxoPW5ldyBiYTtoLmJvdW5kcz1uZXcgYWEoMCwwLC41LDEpO2gubGF5ZXJzLmVuYWJsZSgxKTt2YXIgaz1uZXcgYmE7ay5ib3VuZHM9bmV3IGFhKC41LDAsLjUsMSk7ay5sYXllcnMuZW5hYmxlKDIpO3ZhciBtPW5ldyB1ZChbaCxrXSk7bS5sYXllcnMuZW5hYmxlKDEpO20ubGF5ZXJzLmVuYWJsZSgyKTtcbnZhciBxLG47XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiB3aW5kb3cmJndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidnJkaXNwbGF5cHJlc2VudGNoYW5nZVwiLGIsITEpO3RoaXMuZW5hYmxlZD0hMTt0aGlzLmdldERldmljZT1mdW5jdGlvbigpe3JldHVybiBkfTt0aGlzLnNldERldmljZT1mdW5jdGlvbihhKXt2b2lkIDAhPT1hJiYoZD1hKX07dGhpcy5zZXRQb3NlVGFyZ2V0PWZ1bmN0aW9uKGEpe3ZvaWQgMCE9PWEmJihmPWEpfTt0aGlzLmdldENhbWVyYT1mdW5jdGlvbihhKXtpZihudWxsPT09ZClyZXR1cm4gYTtkLmRlcHRoTmVhcj1hLm5lYXI7ZC5kZXB0aEZhcj1hLmZhcjtkLmdldEZyYW1lRGF0YShlKTt2YXIgYj1lLnBvc2UsYz1udWxsIT09Zj9mOmE7bnVsbCE9PWIucG9zaXRpb24/Yy5wb3NpdGlvbi5mcm9tQXJyYXkoYi5wb3NpdGlvbik6Yy5wb3NpdGlvbi5zZXQoMCwwLDApO251bGwhPT1iLm9yaWVudGF0aW9uJiZjLnF1YXRlcm5pb24uZnJvbUFycmF5KGIub3JpZW50YXRpb24pO1xuYy51cGRhdGVNYXRyaXhXb3JsZCgpO2lmKCExPT09ZC5pc1ByZXNlbnRpbmcpcmV0dXJuIGE7aC5uZWFyPWEubmVhcjtrLm5lYXI9YS5uZWFyO2guZmFyPWEuZmFyO2suZmFyPWEuZmFyO20ubWF0cml4V29ybGQuY29weShhLm1hdHJpeFdvcmxkKTttLm1hdHJpeFdvcmxkSW52ZXJzZS5jb3B5KGEubWF0cml4V29ybGRJbnZlcnNlKTtoLm1hdHJpeFdvcmxkSW52ZXJzZS5mcm9tQXJyYXkoZS5sZWZ0Vmlld01hdHJpeCk7ay5tYXRyaXhXb3JsZEludmVyc2UuZnJvbUFycmF5KGUucmlnaHRWaWV3TWF0cml4KTthPWMucGFyZW50O251bGwhPT1hJiYoZy5nZXRJbnZlcnNlKGEubWF0cml4V29ybGQpLGgubWF0cml4V29ybGRJbnZlcnNlLm11bHRpcGx5KGcpLGsubWF0cml4V29ybGRJbnZlcnNlLm11bHRpcGx5KGcpKTtoLm1hdHJpeFdvcmxkLmdldEludmVyc2UoaC5tYXRyaXhXb3JsZEludmVyc2UpO2subWF0cml4V29ybGQuZ2V0SW52ZXJzZShrLm1hdHJpeFdvcmxkSW52ZXJzZSk7aC5wcm9qZWN0aW9uTWF0cml4LmZyb21BcnJheShlLmxlZnRQcm9qZWN0aW9uTWF0cml4KTtcbmsucHJvamVjdGlvbk1hdHJpeC5mcm9tQXJyYXkoZS5yaWdodFByb2plY3Rpb25NYXRyaXgpO20ucHJvamVjdGlvbk1hdHJpeC5jb3B5KGgucHJvamVjdGlvbk1hdHJpeCk7YT1kLmdldExheWVycygpO2EubGVuZ3RoJiYoYT1hWzBdLG51bGwhPT1hLmxlZnRCb3VuZHMmJjQ9PT1hLmxlZnRCb3VuZHMubGVuZ3RoJiZoLmJvdW5kcy5mcm9tQXJyYXkoYS5sZWZ0Qm91bmRzKSxudWxsIT09YS5yaWdodEJvdW5kcyYmND09PWEucmlnaHRCb3VuZHMubGVuZ3RoJiZrLmJvdW5kcy5mcm9tQXJyYXkoYS5yaWdodEJvdW5kcykpO3JldHVybiBtfTt0aGlzLnN1Ym1pdEZyYW1lPWZ1bmN0aW9uKCl7ZCYmZC5pc1ByZXNlbnRpbmcmJmQuc3VibWl0RnJhbWUoKX07dGhpcy5kaXNwb3NlPWZ1bmN0aW9uKCl7XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiB3aW5kb3cmJndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwidnJkaXNwbGF5cHJlc2VudGNoYW5nZVwiLGIpfX1mdW5jdGlvbiBFZyhhKXt2YXIgYj17fTtcbnJldHVybntnZXQ6ZnVuY3Rpb24oYyl7aWYodm9pZCAwIT09YltjXSlyZXR1cm4gYltjXTtzd2l0Y2goYyl7Y2FzZSBcIldFQkdMX2RlcHRoX3RleHR1cmVcIjp2YXIgZD1hLmdldEV4dGVuc2lvbihcIldFQkdMX2RlcHRoX3RleHR1cmVcIil8fGEuZ2V0RXh0ZW5zaW9uKFwiTU9aX1dFQkdMX2RlcHRoX3RleHR1cmVcIil8fGEuZ2V0RXh0ZW5zaW9uKFwiV0VCS0lUX1dFQkdMX2RlcHRoX3RleHR1cmVcIik7YnJlYWs7Y2FzZSBcIkVYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiOmQ9YS5nZXRFeHRlbnNpb24oXCJFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIil8fGEuZ2V0RXh0ZW5zaW9uKFwiTU9aX0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKXx8YS5nZXRFeHRlbnNpb24oXCJXRUJLSVRfRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXCIpO2JyZWFrO2Nhc2UgXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiOmQ9YS5nZXRFeHRlbnNpb24oXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKXx8XG5hLmdldEV4dGVuc2lvbihcIk1PWl9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKXx8YS5nZXRFeHRlbnNpb24oXCJXRUJLSVRfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIik7YnJlYWs7Y2FzZSBcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0Y1wiOmQ9YS5nZXRFeHRlbnNpb24oXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGNcIil8fGEuZ2V0RXh0ZW5zaW9uKFwiV0VCS0lUX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0Y1wiKTticmVhaztjYXNlIFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YzFcIjpkPWEuZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YzFcIik7YnJlYWs7ZGVmYXVsdDpkPWEuZ2V0RXh0ZW5zaW9uKGMpfW51bGw9PT1kJiZjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBcIitjK1wiIGV4dGVuc2lvbiBub3Qgc3VwcG9ydGVkLlwiKTtyZXR1cm4gYltjXT1kfX19ZnVuY3Rpb24gRmcoKXtmdW5jdGlvbiBhKCl7bS52YWx1ZSE9PVxuZCYmKG0udmFsdWU9ZCxtLm5lZWRzVXBkYXRlPTA8ZSk7Yy5udW1QbGFuZXM9ZTtjLm51bUludGVyc2VjdGlvbj0wfWZ1bmN0aW9uIGIoYSxiLGQsZSl7dmFyIGY9bnVsbCE9PWE/YS5sZW5ndGg6MCxnPW51bGw7aWYoMCE9PWYpe2c9bS52YWx1ZTtpZighMCE9PWV8fG51bGw9PT1nKXtlPWQrNCpmO2I9Yi5tYXRyaXhXb3JsZEludmVyc2U7ay5nZXROb3JtYWxNYXRyaXgoYik7aWYobnVsbD09PWd8fGcubGVuZ3RoPGUpZz1uZXcgRmxvYXQzMkFycmF5KGUpO2ZvcihlPTA7ZSE9PWY7KytlLGQrPTQpaC5jb3B5KGFbZV0pLmFwcGx5TWF0cml4NChiLGspLGgubm9ybWFsLnRvQXJyYXkoZyxkKSxnW2QrM109aC5jb25zdGFudH1tLnZhbHVlPWc7bS5uZWVkc1VwZGF0ZT0hMH1jLm51bVBsYW5lcz1mO3JldHVybiBnfXZhciBjPXRoaXMsZD1udWxsLGU9MCxmPSExLGc9ITEsaD1uZXcgRWEsaz1uZXcgbWEsbT17dmFsdWU6bnVsbCxuZWVkc1VwZGF0ZTohMX07dGhpcy51bmlmb3JtPW07dGhpcy5udW1JbnRlcnNlY3Rpb249XG50aGlzLm51bVBsYW5lcz0wO3RoaXMuaW5pdD1mdW5jdGlvbihhLGMsZyl7dmFyIGg9MCE9PWEubGVuZ3RofHxjfHwwIT09ZXx8ZjtmPWM7ZD1iKGEsZywwKTtlPWEubGVuZ3RoO3JldHVybiBofTt0aGlzLmJlZ2luU2hhZG93cz1mdW5jdGlvbigpe2c9ITA7YihudWxsKX07dGhpcy5lbmRTaGFkb3dzPWZ1bmN0aW9uKCl7Zz0hMTthKCl9O3RoaXMuc2V0U3RhdGU9ZnVuY3Rpb24oYyxoLGssbCx0LHYpe2lmKCFmfHxudWxsPT09Y3x8MD09PWMubGVuZ3RofHxnJiYhaylnP2IobnVsbCk6YSgpO2Vsc2V7az1nPzA6ZTt2YXIgbj00KmsscT10LmNsaXBwaW5nU3RhdGV8fG51bGw7bS52YWx1ZT1xO3E9YihjLGwsbix2KTtmb3IoYz0wO2MhPT1uOysrYylxW2NdPWRbY107dC5jbGlwcGluZ1N0YXRlPXE7dGhpcy5udW1JbnRlcnNlY3Rpb249aD90aGlzLm51bVBsYW5lczowO3RoaXMubnVtUGxhbmVzKz1rfX19ZnVuY3Rpb24gYWYoYSxiKXtyZXR1cm57Y29udmVydDpmdW5jdGlvbihjKXtpZigxRTM9PT1cbmMpcmV0dXJuIGEuUkVQRUFUO2lmKDEwMDE9PT1jKXJldHVybiBhLkNMQU1QX1RPX0VER0U7aWYoMTAwMj09PWMpcmV0dXJuIGEuTUlSUk9SRURfUkVQRUFUO2lmKDEwMDM9PT1jKXJldHVybiBhLk5FQVJFU1Q7aWYoMTAwND09PWMpcmV0dXJuIGEuTkVBUkVTVF9NSVBNQVBfTkVBUkVTVDtpZigxMDA1PT09YylyZXR1cm4gYS5ORUFSRVNUX01JUE1BUF9MSU5FQVI7aWYoMTAwNj09PWMpcmV0dXJuIGEuTElORUFSO2lmKDEwMDc9PT1jKXJldHVybiBhLkxJTkVBUl9NSVBNQVBfTkVBUkVTVDtpZigxMDA4PT09YylyZXR1cm4gYS5MSU5FQVJfTUlQTUFQX0xJTkVBUjtpZigxMDA5PT09YylyZXR1cm4gYS5VTlNJR05FRF9CWVRFO2lmKDEwMTc9PT1jKXJldHVybiBhLlVOU0lHTkVEX1NIT1JUXzRfNF80XzQ7aWYoMTAxOD09PWMpcmV0dXJuIGEuVU5TSUdORURfU0hPUlRfNV81XzVfMTtpZigxMDE5PT09YylyZXR1cm4gYS5VTlNJR05FRF9TSE9SVF81XzZfNTtpZigxMDEwPT09YylyZXR1cm4gYS5CWVRFO1xuaWYoMTAxMT09PWMpcmV0dXJuIGEuU0hPUlQ7aWYoMTAxMj09PWMpcmV0dXJuIGEuVU5TSUdORURfU0hPUlQ7aWYoMTAxMz09PWMpcmV0dXJuIGEuSU5UO2lmKDEwMTQ9PT1jKXJldHVybiBhLlVOU0lHTkVEX0lOVDtpZigxMDE1PT09YylyZXR1cm4gYS5GTE9BVDtpZigxMDE2PT09Yyl7dmFyIGQ9Yi5nZXQoXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0XCIpO2lmKG51bGwhPT1kKXJldHVybiBkLkhBTEZfRkxPQVRfT0VTfWlmKDEwMjE9PT1jKXJldHVybiBhLkFMUEhBO2lmKDEwMjI9PT1jKXJldHVybiBhLlJHQjtpZigxMDIzPT09YylyZXR1cm4gYS5SR0JBO2lmKDEwMjQ9PT1jKXJldHVybiBhLkxVTUlOQU5DRTtpZigxMDI1PT09YylyZXR1cm4gYS5MVU1JTkFOQ0VfQUxQSEE7aWYoMTAyNj09PWMpcmV0dXJuIGEuREVQVEhfQ09NUE9ORU5UO2lmKDEwMjc9PT1jKXJldHVybiBhLkRFUFRIX1NURU5DSUw7aWYoMTAwPT09YylyZXR1cm4gYS5GVU5DX0FERDtpZigxMDE9PT1jKXJldHVybiBhLkZVTkNfU1VCVFJBQ1Q7XG5pZigxMDI9PT1jKXJldHVybiBhLkZVTkNfUkVWRVJTRV9TVUJUUkFDVDtpZigyMDA9PT1jKXJldHVybiBhLlpFUk87aWYoMjAxPT09YylyZXR1cm4gYS5PTkU7aWYoMjAyPT09YylyZXR1cm4gYS5TUkNfQ09MT1I7aWYoMjAzPT09YylyZXR1cm4gYS5PTkVfTUlOVVNfU1JDX0NPTE9SO2lmKDIwND09PWMpcmV0dXJuIGEuU1JDX0FMUEhBO2lmKDIwNT09PWMpcmV0dXJuIGEuT05FX01JTlVTX1NSQ19BTFBIQTtpZigyMDY9PT1jKXJldHVybiBhLkRTVF9BTFBIQTtpZigyMDc9PT1jKXJldHVybiBhLk9ORV9NSU5VU19EU1RfQUxQSEE7aWYoMjA4PT09YylyZXR1cm4gYS5EU1RfQ09MT1I7aWYoMjA5PT09YylyZXR1cm4gYS5PTkVfTUlOVVNfRFNUX0NPTE9SO2lmKDIxMD09PWMpcmV0dXJuIGEuU1JDX0FMUEhBX1NBVFVSQVRFO2lmKDIwMDE9PT1jfHwyMDAyPT09Y3x8MjAwMz09PWN8fDIwMDQ9PT1jKWlmKGQ9Yi5nZXQoXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKSxudWxsIT09XG5kKXtpZigyMDAxPT09YylyZXR1cm4gZC5DT01QUkVTU0VEX1JHQl9TM1RDX0RYVDFfRVhUO2lmKDIwMDI9PT1jKXJldHVybiBkLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDFfRVhUO2lmKDIwMDM9PT1jKXJldHVybiBkLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDNfRVhUO2lmKDIwMDQ9PT1jKXJldHVybiBkLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDVfRVhUfWlmKDIxMDA9PT1jfHwyMTAxPT09Y3x8MjEwMj09PWN8fDIxMDM9PT1jKWlmKGQ9Yi5nZXQoXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGNcIiksbnVsbCE9PWQpe2lmKDIxMDA9PT1jKXJldHVybiBkLkNPTVBSRVNTRURfUkdCX1BWUlRDXzRCUFBWMV9JTUc7aWYoMjEwMT09PWMpcmV0dXJuIGQuQ09NUFJFU1NFRF9SR0JfUFZSVENfMkJQUFYxX0lNRztpZigyMTAyPT09YylyZXR1cm4gZC5DT01QUkVTU0VEX1JHQkFfUFZSVENfNEJQUFYxX0lNRztpZigyMTAzPT09YylyZXR1cm4gZC5DT01QUkVTU0VEX1JHQkFfUFZSVENfMkJQUFYxX0lNR31pZigyMTUxPT09XG5jJiYoZD1iLmdldChcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9ldGMxXCIpLG51bGwhPT1kKSlyZXR1cm4gZC5DT01QUkVTU0VEX1JHQl9FVEMxX1dFQkdMO2lmKDEwMz09PWN8fDEwND09PWMpaWYoZD1iLmdldChcIkVYVF9ibGVuZF9taW5tYXhcIiksbnVsbCE9PWQpe2lmKDEwMz09PWMpcmV0dXJuIGQuTUlOX0VYVDtpZigxMDQ9PT1jKXJldHVybiBkLk1BWF9FWFR9cmV0dXJuIDEwMjA9PT1jJiYoZD1iLmdldChcIldFQkdMX2RlcHRoX3RleHR1cmVcIiksbnVsbCE9PWQpP2QuVU5TSUdORURfSU5UXzI0XzhfV0VCR0w6MH19fWZ1bmN0aW9uIGNlKGEpe2Z1bmN0aW9uIGIoKXtpYT1uZXcgRWcoRik7aWEuZ2V0KFwiV0VCR0xfZGVwdGhfdGV4dHVyZVwiKTtpYS5nZXQoXCJPRVNfdGV4dHVyZV9mbG9hdFwiKTtpYS5nZXQoXCJPRVNfdGV4dHVyZV9mbG9hdF9saW5lYXJcIik7aWEuZ2V0KFwiT0VTX3RleHR1cmVfaGFsZl9mbG9hdFwiKTtpYS5nZXQoXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhclwiKTtcbmlhLmdldChcIk9FU19zdGFuZGFyZF9kZXJpdmF0aXZlc1wiKTtpYS5nZXQoXCJPRVNfZWxlbWVudF9pbmRleF91aW50XCIpO2lhLmdldChcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIik7cGE9bmV3IGFmKEYsaWEpO1Q9bmV3IERnKEYsaWEsYSk7Wj1uZXcgQ2coRixpYSxwYSk7Wi5zY2lzc29yKFguY29weShmYSkubXVsdGlwbHlTY2FsYXIod2EpKTtaLnZpZXdwb3J0KG5iLmNvcHkoZGEpLm11bHRpcGx5U2NhbGFyKHdhKSk7Y2E9bmV3IEJnO2dhPW5ldyBBZyhGLGlhLFosY2EsVCxwYSxoYSk7cWE9bmV3IGJnKEYpO3JhPW5ldyBvZyhGLHFhLGhhKTt0YT1uZXcgcmcocmEsYmEpO3hhPW5ldyBsZyhGKTttYT1uZXcgemcoUyxpYSxUKTt1YT1uZXcgcWc7c2E9bmV3IGpnO2phPW5ldyBmZyhTLFoscmEsSik7eWE9bmV3IG5nKEYsaWEsYmEpO3phPW5ldyBtZyhGLGlhLGJhKTtBYT1uZXcgWmYoUyxGLFosZ2EsVCk7QmE9bmV3ICRmKFMsRixaLGdhLFQpO1MuaW5mby5wcm9ncmFtcz1tYS5wcm9ncmFtcztcblMuY29udGV4dD1GO1MuY2FwYWJpbGl0aWVzPVQ7Uy5leHRlbnNpb25zPWlhO1MucHJvcGVydGllcz1jYTtTLnJlbmRlckxpc3RzPXNhO1Muc3RhdGU9Wn1mdW5jdGlvbiBjKGEpe2EucHJldmVudERlZmF1bHQoKTtjb25zb2xlLmxvZyhcIlRIUkVFLldlYkdMUmVuZGVyZXI6IENvbnRleHQgTG9zdC5cIik7TD0hMH1mdW5jdGlvbiBkKCl7Y29uc29sZS5sb2coXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBDb250ZXh0IFJlc3RvcmVkLlwiKTtMPSExO2IoKX1mdW5jdGlvbiBlKGEpe2E9YS50YXJnZXQ7YS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLGUpO2YoYSk7Y2EucmVtb3ZlKGEpfWZ1bmN0aW9uIGYoYSl7dmFyIGI9Y2EuZ2V0KGEpLnByb2dyYW07YS5wcm9ncmFtPXZvaWQgMDt2b2lkIDAhPT1iJiZtYS5yZWxlYXNlUHJvZ3JhbShiKX1mdW5jdGlvbiBnKGEsYixjKXthLnJlbmRlcihmdW5jdGlvbihhKXtTLnJlbmRlckJ1ZmZlckltbWVkaWF0ZShhLGIsYyl9KX1mdW5jdGlvbiBoKGEpe251bGwhPT1cbkNhJiZDYShhKTsoYT1rYS5nZXREZXZpY2UoKSkmJmEuaXNQcmVzZW50aW5nP2EucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGgpOndpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoaCl9ZnVuY3Rpb24gayhhLGIsYyl7aWYoITEhPT1hLnZpc2libGUpe2lmKGEubGF5ZXJzLnRlc3QoYi5sYXllcnMpKWlmKGEuaXNMaWdodClELnB1c2goYSksYS5jYXN0U2hhZG93JiZDLnB1c2goYSk7ZWxzZSBpZihhLmlzU3ByaXRlKWEuZnJ1c3R1bUN1bGxlZCYmISRkLmludGVyc2VjdHNTcHJpdGUoYSl8fEgucHVzaChhKTtlbHNlIGlmKGEuaXNMZW5zRmxhcmUpbGEucHVzaChhKTtlbHNlIGlmKGEuaXNJbW1lZGlhdGVSZW5kZXJPYmplY3QpYyYmT2Iuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGEubWF0cml4V29ybGQpLmFwcGx5TWF0cml4NCh0ZCksRS5wdXNoKGEsbnVsbCxhLm1hdGVyaWFsLE9iLnosbnVsbCk7ZWxzZSBpZihhLmlzTWVzaHx8YS5pc0xpbmV8fGEuaXNQb2ludHMpaWYoYS5pc1NraW5uZWRNZXNoJiZcbmEuc2tlbGV0b24udXBkYXRlKCksIWEuZnJ1c3R1bUN1bGxlZHx8JGQuaW50ZXJzZWN0c09iamVjdChhKSl7YyYmT2Iuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGEubWF0cml4V29ybGQpLmFwcGx5TWF0cml4NCh0ZCk7dmFyIGQ9dGEudXBkYXRlKGEpLGU9YS5tYXRlcmlhbDtpZihBcnJheS5pc0FycmF5KGUpKWZvcih2YXIgZj1kLmdyb3VwcyxnPTAsaD1mLmxlbmd0aDtnPGg7ZysrKXt2YXIgbT1mW2ddLG49ZVttLm1hdGVyaWFsSW5kZXhdO24mJm4udmlzaWJsZSYmRS5wdXNoKGEsZCxuLE9iLnosbSl9ZWxzZSBlLnZpc2libGUmJkUucHVzaChhLGQsZSxPYi56LG51bGwpfWE9YS5jaGlsZHJlbjtnPTA7Zm9yKGg9YS5sZW5ndGg7ZzxoO2crKylrKGFbZ10sYixjKX19ZnVuY3Rpb24gbShhLGIsYyxkKXtmb3IodmFyIGU9MCxmPWEubGVuZ3RoO2U8ZjtlKyspe3ZhciBnPWFbZV0saD1nLm9iamVjdCxrPWcuZ2VvbWV0cnksbT12b2lkIDA9PT1kP2cubWF0ZXJpYWw6ZCxnPWcuZ3JvdXA7aWYoYy5pc0FycmF5Q2FtZXJhKXtXPVxuYztmb3IodmFyIG49Yy5jYW1lcmFzLHU9MCxsPW4ubGVuZ3RoO3U8bDt1Kyspe3ZhciByPW5bdV07aWYoaC5sYXllcnMudGVzdChyLmxheWVycykpe3ZhciB0PXIuYm91bmRzO1oudmlld3BvcnQobmIuc2V0KHQueCplYSx0LnkqVSx0LnoqZWEsdC53KlUpLm11bHRpcGx5U2NhbGFyKHdhKSk7cShoLGIscixrLG0sZyl9fX1lbHNlIFc9bnVsbCxxKGgsYixjLGssbSxnKX19ZnVuY3Rpb24gcShhLGIsYyxkLGUsZil7YS5vbkJlZm9yZVJlbmRlcihTLGIsYyxkLGUsZik7YS5tb2RlbFZpZXdNYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhjLm1hdHJpeFdvcmxkSW52ZXJzZSxhLm1hdHJpeFdvcmxkKTthLm5vcm1hbE1hdHJpeC5nZXROb3JtYWxNYXRyaXgoYS5tb2RlbFZpZXdNYXRyaXgpO2lmKGEuaXNJbW1lZGlhdGVSZW5kZXJPYmplY3Qpe3ZhciBoPWEuaXNNZXNoJiYwPmEubWF0cml4V29ybGQuZGV0ZXJtaW5hbnQoKTtaLnNldE1hdGVyaWFsKGUsaCk7aD11KGMsYi5mb2csZSxhKTtSPVwiXCI7XG5nKGEsaCxlKX1lbHNlIFMucmVuZGVyQnVmZmVyRGlyZWN0KGMsYi5mb2csZCxlLGEsZik7YS5vbkFmdGVyUmVuZGVyKFMsYixjLGQsZSxmKX1mdW5jdGlvbiBuKGEsYixjKXt2YXIgZD1jYS5nZXQoYSk7Yz1tYS5nZXRQYXJhbWV0ZXJzKGEsdWEuc3RhdGUsQyxiLEphLm51bVBsYW5lcyxKYS5udW1JbnRlcnNlY3Rpb24sYyk7dmFyIGc9bWEuZ2V0UHJvZ3JhbUNvZGUoYSxjKSxoPWQucHJvZ3JhbSxrPSEwO2lmKHZvaWQgMD09PWgpYS5hZGRFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLGUpO2Vsc2UgaWYoaC5jb2RlIT09ZylmKGEpO2Vsc2V7aWYodm9pZCAwIT09Yy5zaGFkZXJJRClyZXR1cm47az0hMX1rJiYoYy5zaGFkZXJJRD8oaD10YltjLnNoYWRlcklEXSxkLnNoYWRlcj17bmFtZTphLnR5cGUsdW5pZm9ybXM6R2EuY2xvbmUoaC51bmlmb3JtcyksdmVydGV4U2hhZGVyOmgudmVydGV4U2hhZGVyLGZyYWdtZW50U2hhZGVyOmguZnJhZ21lbnRTaGFkZXJ9KTpkLnNoYWRlcj17bmFtZTphLnR5cGUsXG51bmlmb3JtczphLnVuaWZvcm1zLHZlcnRleFNoYWRlcjphLnZlcnRleFNoYWRlcixmcmFnbWVudFNoYWRlcjphLmZyYWdtZW50U2hhZGVyfSxhLm9uQmVmb3JlQ29tcGlsZShkLnNoYWRlciksaD1tYS5hY3F1aXJlUHJvZ3JhbShhLGQuc2hhZGVyLGMsZyksZC5wcm9ncmFtPWgsYS5wcm9ncmFtPWgpO2M9aC5nZXRBdHRyaWJ1dGVzKCk7aWYoYS5tb3JwaFRhcmdldHMpZm9yKGc9YS5udW1TdXBwb3J0ZWRNb3JwaFRhcmdldHM9MDtnPFMubWF4TW9ycGhUYXJnZXRzO2crKykwPD1jW1wibW9ycGhUYXJnZXRcIitnXSYmYS5udW1TdXBwb3J0ZWRNb3JwaFRhcmdldHMrKztpZihhLm1vcnBoTm9ybWFscylmb3IoZz1hLm51bVN1cHBvcnRlZE1vcnBoTm9ybWFscz0wO2c8Uy5tYXhNb3JwaE5vcm1hbHM7ZysrKTA8PWNbXCJtb3JwaE5vcm1hbFwiK2ddJiZhLm51bVN1cHBvcnRlZE1vcnBoTm9ybWFscysrO2M9ZC5zaGFkZXIudW5pZm9ybXM7aWYoIWEuaXNTaGFkZXJNYXRlcmlhbCYmIWEuaXNSYXdTaGFkZXJNYXRlcmlhbHx8XG4hMD09PWEuY2xpcHBpbmcpZC5udW1DbGlwcGluZ1BsYW5lcz1KYS5udW1QbGFuZXMsZC5udW1JbnRlcnNlY3Rpb249SmEubnVtSW50ZXJzZWN0aW9uLGMuY2xpcHBpbmdQbGFuZXM9SmEudW5pZm9ybTtkLmZvZz1iO2QubGlnaHRzSGFzaD11YS5zdGF0ZS5oYXNoO2EubGlnaHRzJiYoYy5hbWJpZW50TGlnaHRDb2xvci52YWx1ZT11YS5zdGF0ZS5hbWJpZW50LGMuZGlyZWN0aW9uYWxMaWdodHMudmFsdWU9dWEuc3RhdGUuZGlyZWN0aW9uYWwsYy5zcG90TGlnaHRzLnZhbHVlPXVhLnN0YXRlLnNwb3QsYy5yZWN0QXJlYUxpZ2h0cy52YWx1ZT11YS5zdGF0ZS5yZWN0QXJlYSxjLnBvaW50TGlnaHRzLnZhbHVlPXVhLnN0YXRlLnBvaW50LGMuaGVtaXNwaGVyZUxpZ2h0cy52YWx1ZT11YS5zdGF0ZS5oZW1pLGMuZGlyZWN0aW9uYWxTaGFkb3dNYXAudmFsdWU9dWEuc3RhdGUuZGlyZWN0aW9uYWxTaGFkb3dNYXAsYy5kaXJlY3Rpb25hbFNoYWRvd01hdHJpeC52YWx1ZT11YS5zdGF0ZS5kaXJlY3Rpb25hbFNoYWRvd01hdHJpeCxcbmMuc3BvdFNoYWRvd01hcC52YWx1ZT11YS5zdGF0ZS5zcG90U2hhZG93TWFwLGMuc3BvdFNoYWRvd01hdHJpeC52YWx1ZT11YS5zdGF0ZS5zcG90U2hhZG93TWF0cml4LGMucG9pbnRTaGFkb3dNYXAudmFsdWU9dWEuc3RhdGUucG9pbnRTaGFkb3dNYXAsYy5wb2ludFNoYWRvd01hdHJpeC52YWx1ZT11YS5zdGF0ZS5wb2ludFNoYWRvd01hdHJpeCk7YT1kLnByb2dyYW0uZ2V0VW5pZm9ybXMoKTthPW1iLnNlcVdpdGhWYWx1ZShhLnNlcSxjKTtkLnVuaWZvcm1zTGlzdD1hfWZ1bmN0aW9uIHUoYSxiLGMsZCl7WT0wO3ZhciBlPWNhLmdldChjKTtzZCYmKGFlfHxhIT09VikmJkphLnNldFN0YXRlKGMuY2xpcHBpbmdQbGFuZXMsYy5jbGlwSW50ZXJzZWN0aW9uLGMuY2xpcFNoYWRvd3MsYSxlLGE9PT1WJiZjLmlkPT09UCk7ITE9PT1jLm5lZWRzVXBkYXRlJiYodm9pZCAwPT09ZS5wcm9ncmFtP2MubmVlZHNVcGRhdGU9ITA6Yy5mb2cmJmUuZm9nIT09Yj9jLm5lZWRzVXBkYXRlPSEwOmMubGlnaHRzJiZcbmUubGlnaHRzSGFzaCE9PXVhLnN0YXRlLmhhc2g/Yy5uZWVkc1VwZGF0ZT0hMDp2b2lkIDA9PT1lLm51bUNsaXBwaW5nUGxhbmVzfHxlLm51bUNsaXBwaW5nUGxhbmVzPT09SmEubnVtUGxhbmVzJiZlLm51bUludGVyc2VjdGlvbj09PUphLm51bUludGVyc2VjdGlvbnx8KGMubmVlZHNVcGRhdGU9ITApKTtjLm5lZWRzVXBkYXRlJiYobihjLGIsZCksYy5uZWVkc1VwZGF0ZT0hMSk7dmFyIGY9ITEsZz0hMSxoPSExLGs9ZS5wcm9ncmFtLG09ay5nZXRVbmlmb3JtcygpLHE9ZS5zaGFkZXIudW5pZm9ybXM7Wi51c2VQcm9ncmFtKGsucHJvZ3JhbSkmJihoPWc9Zj0hMCk7Yy5pZCE9PVAmJihQPWMuaWQsZz0hMCk7aWYoZnx8YSE9PVYpe20uc2V0VmFsdWUoRixcInByb2plY3Rpb25NYXRyaXhcIixhLnByb2plY3Rpb25NYXRyaXgpO1QubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciYmbS5zZXRWYWx1ZShGLFwibG9nRGVwdGhCdWZGQ1wiLDIvKE1hdGgubG9nKGEuZmFyKzEpL01hdGguTE4yKSk7ViE9PShXfHxcbmEpJiYoVj1XfHxhLGg9Zz0hMCk7aWYoYy5pc1NoYWRlck1hdGVyaWFsfHxjLmlzTWVzaFBob25nTWF0ZXJpYWx8fGMuaXNNZXNoU3RhbmRhcmRNYXRlcmlhbHx8Yy5lbnZNYXApZj1tLm1hcC5jYW1lcmFQb3NpdGlvbix2b2lkIDAhPT1mJiZmLnNldFZhbHVlKEYsT2Iuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGEubWF0cml4V29ybGQpKTsoYy5pc01lc2hQaG9uZ01hdGVyaWFsfHxjLmlzTWVzaExhbWJlcnRNYXRlcmlhbHx8Yy5pc01lc2hCYXNpY01hdGVyaWFsfHxjLmlzTWVzaFN0YW5kYXJkTWF0ZXJpYWx8fGMuaXNTaGFkZXJNYXRlcmlhbHx8Yy5za2lubmluZykmJm0uc2V0VmFsdWUoRixcInZpZXdNYXRyaXhcIixhLm1hdHJpeFdvcmxkSW52ZXJzZSl9aWYoYy5za2lubmluZyYmKG0uc2V0T3B0aW9uYWwoRixkLFwiYmluZE1hdHJpeFwiKSxtLnNldE9wdGlvbmFsKEYsZCxcImJpbmRNYXRyaXhJbnZlcnNlXCIpLGE9ZC5za2VsZXRvbikpaWYoZj1hLmJvbmVzLFQuZmxvYXRWZXJ0ZXhUZXh0dXJlcyl7aWYodm9pZCAwPT09XG5hLmJvbmVUZXh0dXJlKXt2YXIgZj1NYXRoLnNxcnQoNCpmLmxlbmd0aCksZj1RLmNlaWxQb3dlck9mVHdvKGYpLGY9TWF0aC5tYXgoZiw0KSx1PW5ldyBGbG9hdDMyQXJyYXkoZipmKjQpO3Uuc2V0KGEuYm9uZU1hdHJpY2VzKTt2YXIgcj1uZXcgbGIodSxmLGYsMTAyMywxMDE1KTthLmJvbmVNYXRyaWNlcz11O2EuYm9uZVRleHR1cmU9cjthLmJvbmVUZXh0dXJlU2l6ZT1mfW0uc2V0VmFsdWUoRixcImJvbmVUZXh0dXJlXCIsYS5ib25lVGV4dHVyZSk7bS5zZXRWYWx1ZShGLFwiYm9uZVRleHR1cmVTaXplXCIsYS5ib25lVGV4dHVyZVNpemUpfWVsc2UgbS5zZXRPcHRpb25hbChGLGEsXCJib25lTWF0cmljZXNcIik7ZyYmKG0uc2V0VmFsdWUoRixcInRvbmVNYXBwaW5nRXhwb3N1cmVcIixTLnRvbmVNYXBwaW5nRXhwb3N1cmUpLG0uc2V0VmFsdWUoRixcInRvbmVNYXBwaW5nV2hpdGVQb2ludFwiLFMudG9uZU1hcHBpbmdXaGl0ZVBvaW50KSxjLmxpZ2h0cyYmKGc9aCxxLmFtYmllbnRMaWdodENvbG9yLm5lZWRzVXBkYXRlPVxuZyxxLmRpcmVjdGlvbmFsTGlnaHRzLm5lZWRzVXBkYXRlPWcscS5wb2ludExpZ2h0cy5uZWVkc1VwZGF0ZT1nLHEuc3BvdExpZ2h0cy5uZWVkc1VwZGF0ZT1nLHEucmVjdEFyZWFMaWdodHMubmVlZHNVcGRhdGU9ZyxxLmhlbWlzcGhlcmVMaWdodHMubmVlZHNVcGRhdGU9ZyksYiYmYy5mb2cmJihxLmZvZ0NvbG9yLnZhbHVlPWIuY29sb3IsYi5pc0ZvZz8ocS5mb2dOZWFyLnZhbHVlPWIubmVhcixxLmZvZ0Zhci52YWx1ZT1iLmZhcik6Yi5pc0ZvZ0V4cDImJihxLmZvZ0RlbnNpdHkudmFsdWU9Yi5kZW5zaXR5KSksYy5pc01lc2hCYXNpY01hdGVyaWFsP2wocSxjKTpjLmlzTWVzaExhbWJlcnRNYXRlcmlhbD8obChxLGMpLGMuZW1pc3NpdmVNYXAmJihxLmVtaXNzaXZlTWFwLnZhbHVlPWMuZW1pc3NpdmVNYXApKTpjLmlzTWVzaFBob25nTWF0ZXJpYWw/KGwocSxjKSxjLmlzTWVzaFRvb25NYXRlcmlhbD8odChxLGMpLGMuZ3JhZGllbnRNYXAmJihxLmdyYWRpZW50TWFwLnZhbHVlPWMuZ3JhZGllbnRNYXApKTpcbnQocSxjKSk6Yy5pc01lc2hTdGFuZGFyZE1hdGVyaWFsPyhsKHEsYyksYy5pc01lc2hQaHlzaWNhbE1hdGVyaWFsJiYocS5jbGVhckNvYXQudmFsdWU9Yy5jbGVhckNvYXQscS5jbGVhckNvYXRSb3VnaG5lc3MudmFsdWU9Yy5jbGVhckNvYXRSb3VnaG5lc3MpLHEucm91Z2huZXNzLnZhbHVlPWMucm91Z2huZXNzLHEubWV0YWxuZXNzLnZhbHVlPWMubWV0YWxuZXNzLGMucm91Z2huZXNzTWFwJiYocS5yb3VnaG5lc3NNYXAudmFsdWU9Yy5yb3VnaG5lc3NNYXApLGMubWV0YWxuZXNzTWFwJiYocS5tZXRhbG5lc3NNYXAudmFsdWU9Yy5tZXRhbG5lc3NNYXApLGMuZW1pc3NpdmVNYXAmJihxLmVtaXNzaXZlTWFwLnZhbHVlPWMuZW1pc3NpdmVNYXApLGMuYnVtcE1hcCYmKHEuYnVtcE1hcC52YWx1ZT1jLmJ1bXBNYXAscS5idW1wU2NhbGUudmFsdWU9Yy5idW1wU2NhbGUpLGMubm9ybWFsTWFwJiYocS5ub3JtYWxNYXAudmFsdWU9Yy5ub3JtYWxNYXAscS5ub3JtYWxTY2FsZS52YWx1ZS5jb3B5KGMubm9ybWFsU2NhbGUpKSxcbmMuZGlzcGxhY2VtZW50TWFwJiYocS5kaXNwbGFjZW1lbnRNYXAudmFsdWU9Yy5kaXNwbGFjZW1lbnRNYXAscS5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT1jLmRpc3BsYWNlbWVudFNjYWxlLHEuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT1jLmRpc3BsYWNlbWVudEJpYXMpLGMuZW52TWFwJiYocS5lbnZNYXBJbnRlbnNpdHkudmFsdWU9Yy5lbnZNYXBJbnRlbnNpdHkpKTpjLmlzTWVzaERlcHRoTWF0ZXJpYWw/KGwocSxjKSxjLmRpc3BsYWNlbWVudE1hcCYmKHEuZGlzcGxhY2VtZW50TWFwLnZhbHVlPWMuZGlzcGxhY2VtZW50TWFwLHEuZGlzcGxhY2VtZW50U2NhbGUudmFsdWU9Yy5kaXNwbGFjZW1lbnRTY2FsZSxxLmRpc3BsYWNlbWVudEJpYXMudmFsdWU9Yy5kaXNwbGFjZW1lbnRCaWFzKSk6Yy5pc01lc2hEaXN0YW5jZU1hdGVyaWFsPyhsKHEsYyksYy5kaXNwbGFjZW1lbnRNYXAmJihxLmRpc3BsYWNlbWVudE1hcC52YWx1ZT1jLmRpc3BsYWNlbWVudE1hcCxxLmRpc3BsYWNlbWVudFNjYWxlLnZhbHVlPVxuYy5kaXNwbGFjZW1lbnRTY2FsZSxxLmRpc3BsYWNlbWVudEJpYXMudmFsdWU9Yy5kaXNwbGFjZW1lbnRCaWFzKSxxLnJlZmVyZW5jZVBvc2l0aW9uLnZhbHVlLmNvcHkoYy5yZWZlcmVuY2VQb3NpdGlvbikscS5uZWFyRGlzdGFuY2UudmFsdWU9Yy5uZWFyRGlzdGFuY2UscS5mYXJEaXN0YW5jZS52YWx1ZT1jLmZhckRpc3RhbmNlKTpjLmlzTWVzaE5vcm1hbE1hdGVyaWFsPyhsKHEsYyksYy5idW1wTWFwJiYocS5idW1wTWFwLnZhbHVlPWMuYnVtcE1hcCxxLmJ1bXBTY2FsZS52YWx1ZT1jLmJ1bXBTY2FsZSksYy5ub3JtYWxNYXAmJihxLm5vcm1hbE1hcC52YWx1ZT1jLm5vcm1hbE1hcCxxLm5vcm1hbFNjYWxlLnZhbHVlLmNvcHkoYy5ub3JtYWxTY2FsZSkpLGMuZGlzcGxhY2VtZW50TWFwJiYocS5kaXNwbGFjZW1lbnRNYXAudmFsdWU9Yy5kaXNwbGFjZW1lbnRNYXAscS5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT1jLmRpc3BsYWNlbWVudFNjYWxlLHEuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT1cbmMuZGlzcGxhY2VtZW50QmlhcykpOmMuaXNMaW5lQmFzaWNNYXRlcmlhbD8ocS5kaWZmdXNlLnZhbHVlPWMuY29sb3IscS5vcGFjaXR5LnZhbHVlPWMub3BhY2l0eSxjLmlzTGluZURhc2hlZE1hdGVyaWFsJiYocS5kYXNoU2l6ZS52YWx1ZT1jLmRhc2hTaXplLHEudG90YWxTaXplLnZhbHVlPWMuZGFzaFNpemUrYy5nYXBTaXplLHEuc2NhbGUudmFsdWU9Yy5zY2FsZSkpOmMuaXNQb2ludHNNYXRlcmlhbD8ocS5kaWZmdXNlLnZhbHVlPWMuY29sb3IscS5vcGFjaXR5LnZhbHVlPWMub3BhY2l0eSxxLnNpemUudmFsdWU9Yy5zaXplKndhLHEuc2NhbGUudmFsdWU9LjUqVSxxLm1hcC52YWx1ZT1jLm1hcCxudWxsIT09Yy5tYXAmJighMD09PWMubWFwLm1hdHJpeEF1dG9VcGRhdGUmJihiPWMubWFwLm9mZnNldCxnPWMubWFwLnJlcGVhdCxoPWMubWFwLmNlbnRlcixjLm1hcC5tYXRyaXguc2V0VXZUcmFuc2Zvcm0oYi54LGIueSxnLngsZy55LGMubWFwLnJvdGF0aW9uLGgueCxoLnkpKSxxLnV2VHJhbnNmb3JtLnZhbHVlLmNvcHkoYy5tYXAubWF0cml4KSkpOlxuYy5pc1NoYWRvd01hdGVyaWFsJiYocS5jb2xvci52YWx1ZT1jLmNvbG9yLHEub3BhY2l0eS52YWx1ZT1jLm9wYWNpdHkpLHZvaWQgMCE9PXEubHRjTWF0JiYocS5sdGNNYXQudmFsdWU9Sy5MVENfTUFUX1RFWFRVUkUpLHZvaWQgMCE9PXEubHRjTWFnJiYocS5sdGNNYWcudmFsdWU9Sy5MVENfTUFHX1RFWFRVUkUpLG1iLnVwbG9hZChGLGUudW5pZm9ybXNMaXN0LHEsUykpO20uc2V0VmFsdWUoRixcIm1vZGVsVmlld01hdHJpeFwiLGQubW9kZWxWaWV3TWF0cml4KTttLnNldFZhbHVlKEYsXCJub3JtYWxNYXRyaXhcIixkLm5vcm1hbE1hdHJpeCk7bS5zZXRWYWx1ZShGLFwibW9kZWxNYXRyaXhcIixkLm1hdHJpeFdvcmxkKTtyZXR1cm4ga31mdW5jdGlvbiBsKGEsYil7YS5vcGFjaXR5LnZhbHVlPWIub3BhY2l0eTtiLmNvbG9yJiYoYS5kaWZmdXNlLnZhbHVlPWIuY29sb3IpO2IuZW1pc3NpdmUmJmEuZW1pc3NpdmUudmFsdWUuY29weShiLmVtaXNzaXZlKS5tdWx0aXBseVNjYWxhcihiLmVtaXNzaXZlSW50ZW5zaXR5KTtcbmIubWFwJiYoYS5tYXAudmFsdWU9Yi5tYXApO2IuYWxwaGFNYXAmJihhLmFscGhhTWFwLnZhbHVlPWIuYWxwaGFNYXApO2Iuc3BlY3VsYXJNYXAmJihhLnNwZWN1bGFyTWFwLnZhbHVlPWIuc3BlY3VsYXJNYXApO2IuZW52TWFwJiYoYS5lbnZNYXAudmFsdWU9Yi5lbnZNYXAsYS5mbGlwRW52TWFwLnZhbHVlPWIuZW52TWFwJiZiLmVudk1hcC5pc0N1YmVUZXh0dXJlPy0xOjEsYS5yZWZsZWN0aXZpdHkudmFsdWU9Yi5yZWZsZWN0aXZpdHksYS5yZWZyYWN0aW9uUmF0aW8udmFsdWU9Yi5yZWZyYWN0aW9uUmF0aW8pO2IubGlnaHRNYXAmJihhLmxpZ2h0TWFwLnZhbHVlPWIubGlnaHRNYXAsYS5saWdodE1hcEludGVuc2l0eS52YWx1ZT1iLmxpZ2h0TWFwSW50ZW5zaXR5KTtiLmFvTWFwJiYoYS5hb01hcC52YWx1ZT1iLmFvTWFwLGEuYW9NYXBJbnRlbnNpdHkudmFsdWU9Yi5hb01hcEludGVuc2l0eSk7aWYoYi5tYXApdmFyIGM9Yi5tYXA7ZWxzZSBiLnNwZWN1bGFyTWFwP2M9Yi5zcGVjdWxhck1hcDpcbmIuZGlzcGxhY2VtZW50TWFwP2M9Yi5kaXNwbGFjZW1lbnRNYXA6Yi5ub3JtYWxNYXA/Yz1iLm5vcm1hbE1hcDpiLmJ1bXBNYXA/Yz1iLmJ1bXBNYXA6Yi5yb3VnaG5lc3NNYXA/Yz1iLnJvdWdobmVzc01hcDpiLm1ldGFsbmVzc01hcD9jPWIubWV0YWxuZXNzTWFwOmIuYWxwaGFNYXA/Yz1iLmFscGhhTWFwOmIuZW1pc3NpdmVNYXAmJihjPWIuZW1pc3NpdmVNYXApO2lmKHZvaWQgMCE9PWMpe2MuaXNXZWJHTFJlbmRlclRhcmdldCYmKGM9Yy50ZXh0dXJlKTtpZighMD09PWMubWF0cml4QXV0b1VwZGF0ZSl7Yj1jLm9mZnNldDt2YXIgZD1jLnJlcGVhdCxlPWMuY2VudGVyO2MubWF0cml4LnNldFV2VHJhbnNmb3JtKGIueCxiLnksZC54LGQueSxjLnJvdGF0aW9uLGUueCxlLnkpfWEudXZUcmFuc2Zvcm0udmFsdWUuY29weShjLm1hdHJpeCl9fWZ1bmN0aW9uIHQoYSxiKXthLnNwZWN1bGFyLnZhbHVlPWIuc3BlY3VsYXI7YS5zaGluaW5lc3MudmFsdWU9TWF0aC5tYXgoYi5zaGluaW5lc3MsXG4xRS00KTtiLmVtaXNzaXZlTWFwJiYoYS5lbWlzc2l2ZU1hcC52YWx1ZT1iLmVtaXNzaXZlTWFwKTtiLmJ1bXBNYXAmJihhLmJ1bXBNYXAudmFsdWU9Yi5idW1wTWFwLGEuYnVtcFNjYWxlLnZhbHVlPWIuYnVtcFNjYWxlKTtiLm5vcm1hbE1hcCYmKGEubm9ybWFsTWFwLnZhbHVlPWIubm9ybWFsTWFwLGEubm9ybWFsU2NhbGUudmFsdWUuY29weShiLm5vcm1hbFNjYWxlKSk7Yi5kaXNwbGFjZW1lbnRNYXAmJihhLmRpc3BsYWNlbWVudE1hcC52YWx1ZT1iLmRpc3BsYWNlbWVudE1hcCxhLmRpc3BsYWNlbWVudFNjYWxlLnZhbHVlPWIuZGlzcGxhY2VtZW50U2NhbGUsYS5kaXNwbGFjZW1lbnRCaWFzLnZhbHVlPWIuZGlzcGxhY2VtZW50Qmlhcyl9Y29uc29sZS5sb2coXCJUSFJFRS5XZWJHTFJlbmRlcmVyXCIsXCI4OVwiKTthPWF8fHt9O3ZhciB2PXZvaWQgMCE9PWEuY2FudmFzP2EuY2FudmFzOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIixcblwiY2FudmFzXCIpLHc9dm9pZCAwIT09YS5jb250ZXh0P2EuY29udGV4dDpudWxsLHo9dm9pZCAwIT09YS5hbHBoYT9hLmFscGhhOiExLHk9dm9pZCAwIT09YS5kZXB0aD9hLmRlcHRoOiEwLEk9dm9pZCAwIT09YS5zdGVuY2lsP2Euc3RlbmNpbDohMCxBPXZvaWQgMCE9PWEuYW50aWFsaWFzP2EuYW50aWFsaWFzOiExLEo9dm9pZCAwIT09YS5wcmVtdWx0aXBsaWVkQWxwaGE/YS5wcmVtdWx0aXBsaWVkQWxwaGE6ITAseD12b2lkIDAhPT1hLnByZXNlcnZlRHJhd2luZ0J1ZmZlcj9hLnByZXNlcnZlRHJhd2luZ0J1ZmZlcjohMSxCPXZvaWQgMCE9PWEucG93ZXJQcmVmZXJlbmNlP2EucG93ZXJQcmVmZXJlbmNlOlwiZGVmYXVsdFwiLEQ9W10sQz1bXSxFPW51bGwsSD1bXSxsYT1bXTt0aGlzLmRvbUVsZW1lbnQ9djt0aGlzLmNvbnRleHQ9bnVsbDt0aGlzLnNvcnRPYmplY3RzPXRoaXMuYXV0b0NsZWFyU3RlbmNpbD10aGlzLmF1dG9DbGVhckRlcHRoPXRoaXMuYXV0b0NsZWFyQ29sb3I9dGhpcy5hdXRvQ2xlYXI9XG4hMDt0aGlzLmNsaXBwaW5nUGxhbmVzPVtdO3RoaXMubG9jYWxDbGlwcGluZ0VuYWJsZWQ9ITE7dGhpcy5nYW1tYUZhY3Rvcj0yO3RoaXMucGh5c2ljYWxseUNvcnJlY3RMaWdodHM9dGhpcy5nYW1tYU91dHB1dD10aGlzLmdhbW1hSW5wdXQ9ITE7dGhpcy50b25lTWFwcGluZ1doaXRlUG9pbnQ9dGhpcy50b25lTWFwcGluZ0V4cG9zdXJlPXRoaXMudG9uZU1hcHBpbmc9MTt0aGlzLm1heE1vcnBoVGFyZ2V0cz04O3RoaXMubWF4TW9ycGhOb3JtYWxzPTQ7dmFyIFM9dGhpcyxMPSExLE49bnVsbCxNPW51bGwsUD0tMSxSPVwiXCIsVj1udWxsLFc9bnVsbCxuYj1uZXcgYWEsWD1uZXcgYWEsRz1udWxsLFk9MCxlYT12LndpZHRoLFU9di5oZWlnaHQsd2E9MSxkYT1uZXcgYWEoMCwwLGVhLFUpLGZhPW5ldyBhYSgwLDAsZWEsVSksJGU9ITEsJGQ9bmV3IHJkLEphPW5ldyBGZyxzZD0hMSxhZT0hMSx0ZD1uZXcgTyxPYj1uZXcgcCxoYT17Z2VvbWV0cmllczowLHRleHR1cmVzOjB9LGJhPXtmcmFtZTowLFxuY2FsbHM6MCx2ZXJ0aWNlczowLGZhY2VzOjAscG9pbnRzOjB9O3RoaXMuaW5mbz17cmVuZGVyOmJhLG1lbW9yeTpoYSxwcm9ncmFtczpudWxsfTt0cnl7ej17YWxwaGE6eixkZXB0aDp5LHN0ZW5jaWw6SSxhbnRpYWxpYXM6QSxwcmVtdWx0aXBsaWVkQWxwaGE6SixwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6eCxwb3dlclByZWZlcmVuY2U6Qn07di5hZGRFdmVudExpc3RlbmVyKFwid2ViZ2xjb250ZXh0bG9zdFwiLGMsITEpO3YuYWRkRXZlbnRMaXN0ZW5lcihcIndlYmdsY29udGV4dHJlc3RvcmVkXCIsZCwhMSk7dmFyIEY9d3x8di5nZXRDb250ZXh0KFwid2ViZ2xcIix6KXx8di5nZXRDb250ZXh0KFwiZXhwZXJpbWVudGFsLXdlYmdsXCIseik7aWYobnVsbD09PUYpe2lmKG51bGwhPT12LmdldENvbnRleHQoXCJ3ZWJnbFwiKSl0aHJvdyBFcnJvcihcIkVycm9yIGNyZWF0aW5nIFdlYkdMIGNvbnRleHQgd2l0aCB5b3VyIHNlbGVjdGVkIGF0dHJpYnV0ZXMuXCIpO3Rocm93IEVycm9yKFwiRXJyb3IgY3JlYXRpbmcgV2ViR0wgY29udGV4dC5cIik7XG59dm9pZCAwPT09Ri5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQmJihGLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdD1mdW5jdGlvbigpe3JldHVybntyYW5nZU1pbjoxLHJhbmdlTWF4OjEscHJlY2lzaW9uOjF9fSl9Y2F0Y2goR2cpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBcIitHZy5tZXNzYWdlKX12YXIgaWEsVCxaLGNhLGdhLHFhLHJhLHRhLHVhLG1hLHNhLGphLHhhLHlhLHphLEFhLEJhLHBhO2IoKTt2YXIga2E9bmV3IGJlKFMpO3RoaXMudnI9a2E7dmFyIEVhPW5ldyBVZShTLHRhLFQubWF4VGV4dHVyZVNpemUpO3RoaXMuc2hhZG93TWFwPUVhO3RoaXMuZ2V0Q29udGV4dD1mdW5jdGlvbigpe3JldHVybiBGfTt0aGlzLmdldENvbnRleHRBdHRyaWJ1dGVzPWZ1bmN0aW9uKCl7cmV0dXJuIEYuZ2V0Q29udGV4dEF0dHJpYnV0ZXMoKX07dGhpcy5mb3JjZUNvbnRleHRMb3NzPWZ1bmN0aW9uKCl7dmFyIGE9aWEuZ2V0KFwiV0VCR0xfbG9zZV9jb250ZXh0XCIpO2EmJlxuYS5sb3NlQ29udGV4dCgpfTt0aGlzLmZvcmNlQ29udGV4dFJlc3RvcmU9ZnVuY3Rpb24oKXt2YXIgYT1pYS5nZXQoXCJXRUJHTF9sb3NlX2NvbnRleHRcIik7YSYmYS5yZXN0b3JlQ29udGV4dCgpfTt0aGlzLmdldFBpeGVsUmF0aW89ZnVuY3Rpb24oKXtyZXR1cm4gd2F9O3RoaXMuc2V0UGl4ZWxSYXRpbz1mdW5jdGlvbihhKXt2b2lkIDAhPT1hJiYod2E9YSx0aGlzLnNldFNpemUoZWEsVSwhMSkpfTt0aGlzLmdldFNpemU9ZnVuY3Rpb24oKXtyZXR1cm57d2lkdGg6ZWEsaGVpZ2h0OlV9fTt0aGlzLnNldFNpemU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWthLmdldERldmljZSgpO2QmJmQuaXNQcmVzZW50aW5nP2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IENhbid0IGNoYW5nZSBzaXplIHdoaWxlIFZSIGRldmljZSBpcyBwcmVzZW50aW5nLlwiKTooZWE9YSxVPWIsdi53aWR0aD1hKndhLHYuaGVpZ2h0PWIqd2EsITEhPT1jJiYodi5zdHlsZS53aWR0aD1hK1wicHhcIix2LnN0eWxlLmhlaWdodD1cbmIrXCJweFwiKSx0aGlzLnNldFZpZXdwb3J0KDAsMCxhLGIpKX07dGhpcy5nZXREcmF3aW5nQnVmZmVyU2l6ZT1mdW5jdGlvbigpe3JldHVybnt3aWR0aDplYSp3YSxoZWlnaHQ6VSp3YX19O3RoaXMuc2V0RHJhd2luZ0J1ZmZlclNpemU9ZnVuY3Rpb24oYSxiLGMpe2VhPWE7VT1iO3dhPWM7di53aWR0aD1hKmM7di5oZWlnaHQ9YipjO3RoaXMuc2V0Vmlld3BvcnQoMCwwLGEsYil9O3RoaXMuc2V0Vmlld3BvcnQ9ZnVuY3Rpb24oYSxiLGMsZCl7ZGEuc2V0KGEsVS1iLWQsYyxkKTtaLnZpZXdwb3J0KG5iLmNvcHkoZGEpLm11bHRpcGx5U2NhbGFyKHdhKSl9O3RoaXMuc2V0U2Npc3Nvcj1mdW5jdGlvbihhLGIsYyxkKXtmYS5zZXQoYSxVLWItZCxjLGQpO1ouc2Npc3NvcihYLmNvcHkoZmEpLm11bHRpcGx5U2NhbGFyKHdhKSl9O3RoaXMuc2V0U2Npc3NvclRlc3Q9ZnVuY3Rpb24oYSl7Wi5zZXRTY2lzc29yVGVzdCgkZT1hKX07dGhpcy5nZXRDbGVhckNvbG9yPWZ1bmN0aW9uKCl7cmV0dXJuIGphLmdldENsZWFyQ29sb3IoKX07XG50aGlzLnNldENsZWFyQ29sb3I9ZnVuY3Rpb24oKXtqYS5zZXRDbGVhckNvbG9yLmFwcGx5KGphLGFyZ3VtZW50cyl9O3RoaXMuZ2V0Q2xlYXJBbHBoYT1mdW5jdGlvbigpe3JldHVybiBqYS5nZXRDbGVhckFscGhhKCl9O3RoaXMuc2V0Q2xlYXJBbHBoYT1mdW5jdGlvbigpe2phLnNldENsZWFyQWxwaGEuYXBwbHkoamEsYXJndW1lbnRzKX07dGhpcy5jbGVhcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9MDtpZih2b2lkIDA9PT1hfHxhKWR8PUYuQ09MT1JfQlVGRkVSX0JJVDtpZih2b2lkIDA9PT1ifHxiKWR8PUYuREVQVEhfQlVGRkVSX0JJVDtpZih2b2lkIDA9PT1jfHxjKWR8PUYuU1RFTkNJTF9CVUZGRVJfQklUO0YuY2xlYXIoZCl9O3RoaXMuY2xlYXJDb2xvcj1mdW5jdGlvbigpe3RoaXMuY2xlYXIoITAsITEsITEpfTt0aGlzLmNsZWFyRGVwdGg9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKCExLCEwLCExKX07dGhpcy5jbGVhclN0ZW5jaWw9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKCExLCExLFxuITApfTt0aGlzLmNsZWFyVGFyZ2V0PWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuc2V0UmVuZGVyVGFyZ2V0KGEpO3RoaXMuY2xlYXIoYixjLGQpfTt0aGlzLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ3ZWJnbGNvbnRleHRsb3N0XCIsYywhMSk7di5yZW1vdmVFdmVudExpc3RlbmVyKFwid2ViZ2xjb250ZXh0cmVzdG9yZWRcIixkLCExKTtzYS5kaXNwb3NlKCk7a2EuZGlzcG9zZSgpfTt0aGlzLnJlbmRlckJ1ZmZlckltbWVkaWF0ZT1mdW5jdGlvbihhLGIsYyl7Wi5pbml0QXR0cmlidXRlcygpO3ZhciBkPWNhLmdldChhKTthLmhhc1Bvc2l0aW9ucyYmIWQucG9zaXRpb24mJihkLnBvc2l0aW9uPUYuY3JlYXRlQnVmZmVyKCkpO2EuaGFzTm9ybWFscyYmIWQubm9ybWFsJiYoZC5ub3JtYWw9Ri5jcmVhdGVCdWZmZXIoKSk7YS5oYXNVdnMmJiFkLnV2JiYoZC51dj1GLmNyZWF0ZUJ1ZmZlcigpKTthLmhhc0NvbG9ycyYmIWQuY29sb3ImJihkLmNvbG9yPUYuY3JlYXRlQnVmZmVyKCkpO1xuYj1iLmdldEF0dHJpYnV0ZXMoKTthLmhhc1Bvc2l0aW9ucyYmKEYuYmluZEJ1ZmZlcihGLkFSUkFZX0JVRkZFUixkLnBvc2l0aW9uKSxGLmJ1ZmZlckRhdGEoRi5BUlJBWV9CVUZGRVIsYS5wb3NpdGlvbkFycmF5LEYuRFlOQU1JQ19EUkFXKSxaLmVuYWJsZUF0dHJpYnV0ZShiLnBvc2l0aW9uKSxGLnZlcnRleEF0dHJpYlBvaW50ZXIoYi5wb3NpdGlvbiwzLEYuRkxPQVQsITEsMCwwKSk7aWYoYS5oYXNOb3JtYWxzKXtGLmJpbmRCdWZmZXIoRi5BUlJBWV9CVUZGRVIsZC5ub3JtYWwpO2lmKCFjLmlzTWVzaFBob25nTWF0ZXJpYWwmJiFjLmlzTWVzaFN0YW5kYXJkTWF0ZXJpYWwmJiFjLmlzTWVzaE5vcm1hbE1hdGVyaWFsJiYhMD09PWMuZmxhdFNoYWRpbmcpZm9yKHZhciBlPTAsZj0zKmEuY291bnQ7ZTxmO2UrPTkpe3ZhciBnPWEubm9ybWFsQXJyYXksaD0oZ1tlKzBdK2dbZSszXStnW2UrNl0pLzMsaz0oZ1tlKzFdK2dbZSs0XStnW2UrN10pLzMsbT0oZ1tlKzJdK2dbZSs1XStnW2UrXG44XSkvMztnW2UrMF09aDtnW2UrMV09aztnW2UrMl09bTtnW2UrM109aDtnW2UrNF09aztnW2UrNV09bTtnW2UrNl09aDtnW2UrN109aztnW2UrOF09bX1GLmJ1ZmZlckRhdGEoRi5BUlJBWV9CVUZGRVIsYS5ub3JtYWxBcnJheSxGLkRZTkFNSUNfRFJBVyk7Wi5lbmFibGVBdHRyaWJ1dGUoYi5ub3JtYWwpO0YudmVydGV4QXR0cmliUG9pbnRlcihiLm5vcm1hbCwzLEYuRkxPQVQsITEsMCwwKX1hLmhhc1V2cyYmYy5tYXAmJihGLmJpbmRCdWZmZXIoRi5BUlJBWV9CVUZGRVIsZC51diksRi5idWZmZXJEYXRhKEYuQVJSQVlfQlVGRkVSLGEudXZBcnJheSxGLkRZTkFNSUNfRFJBVyksWi5lbmFibGVBdHRyaWJ1dGUoYi51diksRi52ZXJ0ZXhBdHRyaWJQb2ludGVyKGIudXYsMixGLkZMT0FULCExLDAsMCkpO2EuaGFzQ29sb3JzJiYwIT09Yy52ZXJ0ZXhDb2xvcnMmJihGLmJpbmRCdWZmZXIoRi5BUlJBWV9CVUZGRVIsZC5jb2xvciksRi5idWZmZXJEYXRhKEYuQVJSQVlfQlVGRkVSLGEuY29sb3JBcnJheSxcbkYuRFlOQU1JQ19EUkFXKSxaLmVuYWJsZUF0dHJpYnV0ZShiLmNvbG9yKSxGLnZlcnRleEF0dHJpYlBvaW50ZXIoYi5jb2xvciwzLEYuRkxPQVQsITEsMCwwKSk7Wi5kaXNhYmxlVW51c2VkQXR0cmlidXRlcygpO0YuZHJhd0FycmF5cyhGLlRSSUFOR0xFUywwLGEuY291bnQpO2EuY291bnQ9MH07dGhpcy5yZW5kZXJCdWZmZXJEaXJlY3Q9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPWUuaXNNZXNoJiYwPmUubWF0cml4V29ybGQuZGV0ZXJtaW5hbnQoKTtaLnNldE1hdGVyaWFsKGQsZyk7dmFyIGg9dShhLGIsZCxlKTthPWMuaWQrXCJfXCIraC5pZCtcIl9cIisoITA9PT1kLndpcmVmcmFtZSk7dmFyIGs9ITE7YSE9PVImJihSPWEsaz0hMCk7ZS5tb3JwaFRhcmdldEluZmx1ZW5jZXMmJih4YS51cGRhdGUoZSxjLGQsaCksaz0hMCk7dmFyIGc9Yy5pbmRleCxtPWMuYXR0cmlidXRlcy5wb3NpdGlvbjtiPTE7ITA9PT1kLndpcmVmcmFtZSYmKGc9cmEuZ2V0V2lyZWZyYW1lQXR0cmlidXRlKGMpLFxuYj0yKTthPXlhO2lmKG51bGwhPT1nKXt2YXIgcT1xYS5nZXQoZyk7YT16YTthLnNldEluZGV4KHEpfWlmKGspe2s9dm9pZCAwO2lmKGMmJmMuaXNJbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSYmbnVsbD09PWlhLmdldChcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIikpY29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMUmVuZGVyZXIuc2V0dXBWZXJ0ZXhBdHRyaWJ1dGVzOiB1c2luZyBUSFJFRS5JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSBidXQgaGFyZHdhcmUgZG9lcyBub3Qgc3VwcG9ydCBleHRlbnNpb24gQU5HTEVfaW5zdGFuY2VkX2FycmF5cy5cIik7ZWxzZXt2b2lkIDA9PT1rJiYoaz0wKTtaLmluaXRBdHRyaWJ1dGVzKCk7dmFyIG49Yy5hdHRyaWJ1dGVzLGg9aC5nZXRBdHRyaWJ1dGVzKCksbD1kLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXM7Zm9yKEogaW4gaCl7dmFyIHI9aFtKXTtpZigwPD1yKXt2YXIgdD1uW0pdO2lmKHZvaWQgMCE9PXQpe3ZhciB2PXQubm9ybWFsaXplZCxwPXQuaXRlbVNpemUsXG53PXFhLmdldCh0KTtpZih2b2lkIDAhPT13KXt2YXIgQT13LmJ1ZmZlcix5PXcudHlwZSx3PXcuYnl0ZXNQZXJFbGVtZW50O2lmKHQuaXNJbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZSl7dmFyIHo9dC5kYXRhLEk9ei5zdHJpZGUsdD10Lm9mZnNldDt6JiZ6LmlzSW5zdGFuY2VkSW50ZXJsZWF2ZWRCdWZmZXI/KFouZW5hYmxlQXR0cmlidXRlQW5kRGl2aXNvcihyLHoubWVzaFBlckF0dHJpYnV0ZSksdm9pZCAwPT09Yy5tYXhJbnN0YW5jZWRDb3VudCYmKGMubWF4SW5zdGFuY2VkQ291bnQ9ei5tZXNoUGVyQXR0cmlidXRlKnouY291bnQpKTpaLmVuYWJsZUF0dHJpYnV0ZShyKTtGLmJpbmRCdWZmZXIoRi5BUlJBWV9CVUZGRVIsQSk7Ri52ZXJ0ZXhBdHRyaWJQb2ludGVyKHIscCx5LHYsSSp3LChrKkkrdCkqdyl9ZWxzZSB0LmlzSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlPyhaLmVuYWJsZUF0dHJpYnV0ZUFuZERpdmlzb3Iocix0Lm1lc2hQZXJBdHRyaWJ1dGUpLHZvaWQgMD09PWMubWF4SW5zdGFuY2VkQ291bnQmJlxuKGMubWF4SW5zdGFuY2VkQ291bnQ9dC5tZXNoUGVyQXR0cmlidXRlKnQuY291bnQpKTpaLmVuYWJsZUF0dHJpYnV0ZShyKSxGLmJpbmRCdWZmZXIoRi5BUlJBWV9CVUZGRVIsQSksRi52ZXJ0ZXhBdHRyaWJQb2ludGVyKHIscCx5LHYsMCxrKnAqdyl9fWVsc2UgaWYodm9pZCAwIT09bCYmKHY9bFtKXSx2b2lkIDAhPT12KSlzd2l0Y2godi5sZW5ndGgpe2Nhc2UgMjpGLnZlcnRleEF0dHJpYjJmdihyLHYpO2JyZWFrO2Nhc2UgMzpGLnZlcnRleEF0dHJpYjNmdihyLHYpO2JyZWFrO2Nhc2UgNDpGLnZlcnRleEF0dHJpYjRmdihyLHYpO2JyZWFrO2RlZmF1bHQ6Ri52ZXJ0ZXhBdHRyaWIxZnYocix2KX19fVouZGlzYWJsZVVudXNlZEF0dHJpYnV0ZXMoKX1udWxsIT09ZyYmRi5iaW5kQnVmZmVyKEYuRUxFTUVOVF9BUlJBWV9CVUZGRVIscS5idWZmZXIpfXE9MDtudWxsIT09Zz9xPWcuY291bnQ6dm9pZCAwIT09bSYmKHE9bS5jb3VudCk7Zz1jLmRyYXdSYW5nZS5zdGFydCpiO209bnVsbCE9PVxuZj9mLnN0YXJ0KmI6MDt2YXIgSj1NYXRoLm1heChnLG0pO2Y9TWF0aC5tYXgoMCxNYXRoLm1pbihxLGcrYy5kcmF3UmFuZ2UuY291bnQqYixtKyhudWxsIT09Zj9mLmNvdW50KmI6SW5maW5pdHkpKS0xLUorMSk7aWYoMCE9PWYpe2lmKGUuaXNNZXNoKWlmKCEwPT09ZC53aXJlZnJhbWUpWi5zZXRMaW5lV2lkdGgoZC53aXJlZnJhbWVMaW5ld2lkdGgqKG51bGw9PT1OP3dhOjEpKSxhLnNldE1vZGUoRi5MSU5FUyk7ZWxzZSBzd2l0Y2goZS5kcmF3TW9kZSl7Y2FzZSAwOmEuc2V0TW9kZShGLlRSSUFOR0xFUyk7YnJlYWs7Y2FzZSAxOmEuc2V0TW9kZShGLlRSSUFOR0xFX1NUUklQKTticmVhaztjYXNlIDI6YS5zZXRNb2RlKEYuVFJJQU5HTEVfRkFOKX1lbHNlIGUuaXNMaW5lPyhkPWQubGluZXdpZHRoLHZvaWQgMD09PWQmJihkPTEpLFouc2V0TGluZVdpZHRoKGQqKG51bGw9PT1OP3dhOjEpKSxlLmlzTGluZVNlZ21lbnRzP2Euc2V0TW9kZShGLkxJTkVTKTplLmlzTGluZUxvb3A/YS5zZXRNb2RlKEYuTElORV9MT09QKTpcbmEuc2V0TW9kZShGLkxJTkVfU1RSSVApKTplLmlzUG9pbnRzJiZhLnNldE1vZGUoRi5QT0lOVFMpO2MmJmMuaXNJbnN0YW5jZWRCdWZmZXJHZW9tZXRyeT8wPGMubWF4SW5zdGFuY2VkQ291bnQmJmEucmVuZGVySW5zdGFuY2VzKGMsSixmKTphLnJlbmRlcihKLGYpfX07dGhpcy5jb21waWxlPWZ1bmN0aW9uKGEsYil7RC5sZW5ndGg9MDtDLmxlbmd0aD0wO2EudHJhdmVyc2UoZnVuY3Rpb24oYSl7YS5pc0xpZ2h0JiYoRC5wdXNoKGEpLGEuY2FzdFNoYWRvdyYmQy5wdXNoKGEpKX0pO3VhLnNldHVwKEQsQyxiKTthLnRyYXZlcnNlKGZ1bmN0aW9uKGIpe2lmKGIubWF0ZXJpYWwpaWYoQXJyYXkuaXNBcnJheShiLm1hdGVyaWFsKSlmb3IodmFyIGM9MDtjPGIubWF0ZXJpYWwubGVuZ3RoO2MrKyluKGIubWF0ZXJpYWxbY10sYS5mb2csYik7ZWxzZSBuKGIubWF0ZXJpYWwsYS5mb2csYil9KX07dmFyIEZhPSExLENhPW51bGw7dGhpcy5hbmltYXRlPWZ1bmN0aW9uKGEpe0NhPWE7RmF8fCgoYT1cbmthLmdldERldmljZSgpKSYmYS5pc1ByZXNlbnRpbmc/YS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoaCk6d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShoKSxGYT0hMCl9O3RoaXMucmVuZGVyPWZ1bmN0aW9uKGEsYixjLGQpe2lmKCFifHwhYi5pc0NhbWVyYSljb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5yZW5kZXI6IGNhbWVyYSBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuQ2FtZXJhLlwiKTtlbHNlIGlmKCFMKXtSPVwiXCI7UD0tMTtWPW51bGw7ITA9PT1hLmF1dG9VcGRhdGUmJmEudXBkYXRlTWF0cml4V29ybGQoKTtudWxsPT09Yi5wYXJlbnQmJmIudXBkYXRlTWF0cml4V29ybGQoKTtrYS5lbmFibGVkJiYoYj1rYS5nZXRDYW1lcmEoYikpO3RkLm11bHRpcGx5TWF0cmljZXMoYi5wcm9qZWN0aW9uTWF0cml4LGIubWF0cml4V29ybGRJbnZlcnNlKTskZC5zZXRGcm9tTWF0cml4KHRkKTtELmxlbmd0aD0wO0MubGVuZ3RoPTA7SC5sZW5ndGg9MDtsYS5sZW5ndGg9XG4wO2FlPXRoaXMubG9jYWxDbGlwcGluZ0VuYWJsZWQ7c2Q9SmEuaW5pdCh0aGlzLmNsaXBwaW5nUGxhbmVzLGFlLGIpO0U9c2EuZ2V0KGEsYik7RS5pbml0KCk7ayhhLGIsUy5zb3J0T2JqZWN0cyk7ITA9PT1TLnNvcnRPYmplY3RzJiZFLnNvcnQoKTtnYS51cGRhdGVWaWRlb1RleHR1cmVzKCk7c2QmJkphLmJlZ2luU2hhZG93cygpO0VhLnJlbmRlcihDLGEsYik7dWEuc2V0dXAoRCxDLGIpO3NkJiZKYS5lbmRTaGFkb3dzKCk7YmEuZnJhbWUrKztiYS5jYWxscz0wO2JhLnZlcnRpY2VzPTA7YmEuZmFjZXM9MDtiYS5wb2ludHM9MDt2b2lkIDA9PT1jJiYoYz1udWxsKTt0aGlzLnNldFJlbmRlclRhcmdldChjKTtqYS5yZW5kZXIoRSxhLGIsZCk7ZD1FLm9wYXF1ZTt2YXIgZT1FLnRyYW5zcGFyZW50O2lmKGEub3ZlcnJpZGVNYXRlcmlhbCl7dmFyIGY9YS5vdmVycmlkZU1hdGVyaWFsO2QubGVuZ3RoJiZtKGQsYSxiLGYpO2UubGVuZ3RoJiZtKGUsYSxiLGYpfWVsc2UgZC5sZW5ndGgmJm0oZCxcbmEsYiksZS5sZW5ndGgmJm0oZSxhLGIpO0JhLnJlbmRlcihILGEsYik7QWEucmVuZGVyKGxhLGEsYixuYik7YyYmZ2EudXBkYXRlUmVuZGVyVGFyZ2V0TWlwbWFwKGMpO1ouYnVmZmVycy5kZXB0aC5zZXRUZXN0KCEwKTtaLmJ1ZmZlcnMuZGVwdGguc2V0TWFzayghMCk7Wi5idWZmZXJzLmNvbG9yLnNldE1hc2soITApO1ouc2V0UG9seWdvbk9mZnNldCghMSk7a2EuZW5hYmxlZCYma2Euc3VibWl0RnJhbWUoKX19O3RoaXMuc2V0RmFjZUN1bGxpbmc9ZnVuY3Rpb24oYSxiKXtaLnNldEN1bGxGYWNlKGEpO1ouc2V0RmxpcFNpZGVkKDA9PT1iKX07dGhpcy5hbGxvY1RleHR1cmVVbml0PWZ1bmN0aW9uKCl7dmFyIGE9WTthPj1ULm1heFRleHR1cmVzJiZjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBUcnlpbmcgdG8gdXNlIFwiK2ErXCIgdGV4dHVyZSB1bml0cyB3aGlsZSB0aGlzIEdQVSBzdXBwb3J0cyBvbmx5IFwiK1QubWF4VGV4dHVyZXMpO1krPTE7cmV0dXJuIGF9O3RoaXMuc2V0VGV4dHVyZTJEPVxuZnVuY3Rpb24oKXt2YXIgYT0hMTtyZXR1cm4gZnVuY3Rpb24oYixjKXtiJiZiLmlzV2ViR0xSZW5kZXJUYXJnZXQmJihhfHwoY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5zZXRUZXh0dXJlMkQ6IGRvbid0IHVzZSByZW5kZXIgdGFyZ2V0cyBhcyB0ZXh0dXJlcy4gVXNlIHRoZWlyIC50ZXh0dXJlIHByb3BlcnR5IGluc3RlYWQuXCIpLGE9ITApLGI9Yi50ZXh0dXJlKTtnYS5zZXRUZXh0dXJlMkQoYixjKX19KCk7dGhpcy5zZXRUZXh0dXJlPWZ1bmN0aW9uKCl7dmFyIGE9ITE7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7YXx8KGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zZXRUZXh0dXJlIGlzIGRlcHJlY2F0ZWQsIHVzZSBzZXRUZXh0dXJlMkQgaW5zdGVhZC5cIiksYT0hMCk7Z2Euc2V0VGV4dHVyZTJEKGIsYyl9fSgpO3RoaXMuc2V0VGV4dHVyZUN1YmU9ZnVuY3Rpb24oKXt2YXIgYT0hMTtyZXR1cm4gZnVuY3Rpb24oYixjKXtiJiZiLmlzV2ViR0xSZW5kZXJUYXJnZXRDdWJlJiZcbihhfHwoY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5zZXRUZXh0dXJlQ3ViZTogZG9uJ3QgdXNlIGN1YmUgcmVuZGVyIHRhcmdldHMgYXMgdGV4dHVyZXMuIFVzZSB0aGVpciAudGV4dHVyZSBwcm9wZXJ0eSBpbnN0ZWFkLlwiKSxhPSEwKSxiPWIudGV4dHVyZSk7YiYmYi5pc0N1YmVUZXh0dXJlfHxBcnJheS5pc0FycmF5KGIuaW1hZ2UpJiY2PT09Yi5pbWFnZS5sZW5ndGg/Z2Euc2V0VGV4dHVyZUN1YmUoYixjKTpnYS5zZXRUZXh0dXJlQ3ViZUR5bmFtaWMoYixjKX19KCk7dGhpcy5nZXRSZW5kZXJUYXJnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gTn07dGhpcy5zZXRSZW5kZXJUYXJnZXQ9ZnVuY3Rpb24oYSl7KE49YSkmJnZvaWQgMD09PWNhLmdldChhKS5fX3dlYmdsRnJhbWVidWZmZXImJmdhLnNldHVwUmVuZGVyVGFyZ2V0KGEpO3ZhciBiPW51bGwsYz0hMTthPyhiPWNhLmdldChhKS5fX3dlYmdsRnJhbWVidWZmZXIsYS5pc1dlYkdMUmVuZGVyVGFyZ2V0Q3ViZSYmKGI9XG5iW2EuYWN0aXZlQ3ViZUZhY2VdLGM9ITApLG5iLmNvcHkoYS52aWV3cG9ydCksWC5jb3B5KGEuc2Npc3NvciksRz1hLnNjaXNzb3JUZXN0KToobmIuY29weShkYSkubXVsdGlwbHlTY2FsYXIod2EpLFguY29weShmYSkubXVsdGlwbHlTY2FsYXIod2EpLEc9JGUpO00hPT1iJiYoRi5iaW5kRnJhbWVidWZmZXIoRi5GUkFNRUJVRkZFUixiKSxNPWIpO1oudmlld3BvcnQobmIpO1ouc2Npc3NvcihYKTtaLnNldFNjaXNzb3JUZXN0KEcpO2MmJihjPWNhLmdldChhLnRleHR1cmUpLEYuZnJhbWVidWZmZXJUZXh0dXJlMkQoRi5GUkFNRUJVRkZFUixGLkNPTE9SX0FUVEFDSE1FTlQwLEYuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YK2EuYWN0aXZlQ3ViZUZhY2UsYy5fX3dlYmdsVGV4dHVyZSxhLmFjdGl2ZU1pcE1hcExldmVsKSl9O3RoaXMucmVhZFJlbmRlclRhcmdldFBpeGVscz1mdW5jdGlvbihhLGIsYyxkLGUsZil7aWYoYSYmYS5pc1dlYkdMUmVuZGVyVGFyZ2V0KXt2YXIgZz1jYS5nZXQoYSkuX193ZWJnbEZyYW1lYnVmZmVyO1xuaWYoZyl7dmFyIGg9ITE7ZyE9PU0mJihGLmJpbmRGcmFtZWJ1ZmZlcihGLkZSQU1FQlVGRkVSLGcpLGg9ITApO3RyeXt2YXIgaz1hLnRleHR1cmUsbT1rLmZvcm1hdCxxPWsudHlwZTsxMDIzIT09bSYmcGEuY29udmVydChtKSE9PUYuZ2V0UGFyYW1ldGVyKEYuSU1QTEVNRU5UQVRJT05fQ09MT1JfUkVBRF9GT1JNQVQpP2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM6IHJlbmRlclRhcmdldCBpcyBub3QgaW4gUkdCQSBvciBpbXBsZW1lbnRhdGlvbiBkZWZpbmVkIGZvcm1hdC5cIik6MTAwOT09PXF8fHBhLmNvbnZlcnQocSk9PT1GLmdldFBhcmFtZXRlcihGLklNUExFTUVOVEFUSU9OX0NPTE9SX1JFQURfVFlQRSl8fDEwMTU9PT1xJiYoaWEuZ2V0KFwiT0VTX3RleHR1cmVfZmxvYXRcIil8fGlhLmdldChcIldFQkdMX2NvbG9yX2J1ZmZlcl9mbG9hdFwiKSl8fDEwMTY9PT1xJiZpYS5nZXQoXCJFWFRfY29sb3JfYnVmZmVyX2hhbGZfZmxvYXRcIik/XG5GLmNoZWNrRnJhbWVidWZmZXJTdGF0dXMoRi5GUkFNRUJVRkZFUik9PT1GLkZSQU1FQlVGRkVSX0NPTVBMRVRFPzA8PWImJmI8PWEud2lkdGgtZCYmMDw9YyYmYzw9YS5oZWlnaHQtZSYmRi5yZWFkUGl4ZWxzKGIsYyxkLGUscGEuY29udmVydChtKSxwYS5jb252ZXJ0KHEpLGYpOmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM6IHJlYWRQaXhlbHMgZnJvbSByZW5kZXJUYXJnZXQgZmFpbGVkLiBGcmFtZWJ1ZmZlciBub3QgY29tcGxldGUuXCIpOmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM6IHJlbmRlclRhcmdldCBpcyBub3QgaW4gVW5zaWduZWRCeXRlVHlwZSBvciBpbXBsZW1lbnRhdGlvbiBkZWZpbmVkIHR5cGUuXCIpfWZpbmFsbHl7aCYmRi5iaW5kRnJhbWVidWZmZXIoRi5GUkFNRUJVRkZFUixNKX19fWVsc2UgY29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMUmVuZGVyZXIucmVhZFJlbmRlclRhcmdldFBpeGVsczogcmVuZGVyVGFyZ2V0IGlzIG5vdCBUSFJFRS5XZWJHTFJlbmRlclRhcmdldC5cIil9fVxuZnVuY3Rpb24gUGIoYSxiKXt0aGlzLm5hbWU9XCJcIjt0aGlzLmNvbG9yPW5ldyBIKGEpO3RoaXMuZGVuc2l0eT12b2lkIDAhPT1iP2I6Mi41RS00fWZ1bmN0aW9uIFFiKGEsYixjKXt0aGlzLm5hbWU9XCJcIjt0aGlzLmNvbG9yPW5ldyBIKGEpO3RoaXMubmVhcj12b2lkIDAhPT1iP2I6MTt0aGlzLmZhcj12b2lkIDAhPT1jP2M6MUUzfWZ1bmN0aW9uIHZkKCl7eC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNjZW5lXCI7dGhpcy5vdmVycmlkZU1hdGVyaWFsPXRoaXMuZm9nPXRoaXMuYmFja2dyb3VuZD1udWxsO3RoaXMuYXV0b1VwZGF0ZT0hMH1mdW5jdGlvbiBkZShhLGIsYyxkLGUpe3guY2FsbCh0aGlzKTt0aGlzLmxlbnNGbGFyZXM9W107dGhpcy5wb3NpdGlvblNjcmVlbj1uZXcgcDt0aGlzLmN1c3RvbVVwZGF0ZUNhbGxiYWNrPXZvaWQgMDt2b2lkIDAhPT1hJiZ0aGlzLmFkZChhLGIsYyxkLGUpfWZ1bmN0aW9uIGhiKGEpe1AuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJTcHJpdGVNYXRlcmlhbFwiO1xudGhpcy5jb2xvcj1uZXcgSCgxNjc3NzIxNSk7dGhpcy5tYXA9bnVsbDt0aGlzLnJvdGF0aW9uPTA7dGhpcy5saWdodHM9dGhpcy5mb2c9ITE7dGhpcy5zZXRWYWx1ZXMoYSl9ZnVuY3Rpb24gQ2MoYSl7eC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNwcml0ZVwiO3RoaXMubWF0ZXJpYWw9dm9pZCAwIT09YT9hOm5ldyBoYn1mdW5jdGlvbiBEYygpe3guY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJMT0RcIjtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHtsZXZlbHM6e2VudW1lcmFibGU6ITAsdmFsdWU6W119fSl9ZnVuY3Rpb24gRWMoYSxiKXthPWF8fFtdO3RoaXMuYm9uZXM9YS5zbGljZSgwKTt0aGlzLmJvbmVNYXRyaWNlcz1uZXcgRmxvYXQzMkFycmF5KDE2KnRoaXMuYm9uZXMubGVuZ3RoKTtpZih2b2lkIDA9PT1iKXRoaXMuY2FsY3VsYXRlSW52ZXJzZXMoKTtlbHNlIGlmKHRoaXMuYm9uZXMubGVuZ3RoPT09Yi5sZW5ndGgpdGhpcy5ib25lSW52ZXJzZXM9Yi5zbGljZSgwKTtlbHNlIGZvcihjb25zb2xlLndhcm4oXCJUSFJFRS5Ta2VsZXRvbiBib25lSW52ZXJzZXMgaXMgdGhlIHdyb25nIGxlbmd0aC5cIiksXG50aGlzLmJvbmVJbnZlcnNlcz1bXSxhPTAsYj10aGlzLmJvbmVzLmxlbmd0aDthPGI7YSsrKXRoaXMuYm9uZUludmVyc2VzLnB1c2gobmV3IE8pfWZ1bmN0aW9uIHdkKCl7eC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkJvbmVcIn1mdW5jdGlvbiB4ZChhLGIpe3JhLmNhbGwodGhpcyxhLGIpO3RoaXMudHlwZT1cIlNraW5uZWRNZXNoXCI7dGhpcy5iaW5kTW9kZT1cImF0dGFjaGVkXCI7dGhpcy5iaW5kTWF0cml4PW5ldyBPO3RoaXMuYmluZE1hdHJpeEludmVyc2U9bmV3IE87YT10aGlzLmluaXRCb25lcygpO2E9bmV3IEVjKGEpO3RoaXMuYmluZChhLHRoaXMubWF0cml4V29ybGQpO3RoaXMubm9ybWFsaXplU2tpbldlaWdodHMoKX1mdW5jdGlvbiBXKGEpe1AuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJMaW5lQmFzaWNNYXRlcmlhbFwiO3RoaXMuY29sb3I9bmV3IEgoMTY3NzcyMTUpO3RoaXMubGluZXdpZHRoPTE7dGhpcy5saW5lam9pbj10aGlzLmxpbmVjYXA9XCJyb3VuZFwiO3RoaXMubGlnaHRzPSExO1xudGhpcy5zZXRWYWx1ZXMoYSl9ZnVuY3Rpb24gc2EoYSxiLGMpe2lmKDE9PT1jKXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5MaW5lOiBwYXJhbWV0ZXIgVEhSRUUuTGluZVBpZWNlcyBubyBsb25nZXIgc3VwcG9ydGVkLiBDcmVhdGVkIFRIUkVFLkxpbmVTZWdtZW50cyBpbnN0ZWFkLlwiKSxuZXcgWChhLGIpO3guY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJMaW5lXCI7dGhpcy5nZW9tZXRyeT12b2lkIDAhPT1hP2E6bmV3IEU7dGhpcy5tYXRlcmlhbD12b2lkIDAhPT1iP2I6bmV3IFcoe2NvbG9yOjE2Nzc3MjE1Kk1hdGgucmFuZG9tKCl9KX1mdW5jdGlvbiBYKGEsYil7c2EuY2FsbCh0aGlzLGEsYik7dGhpcy50eXBlPVwiTGluZVNlZ21lbnRzXCJ9ZnVuY3Rpb24geWQoYSxiKXtzYS5jYWxsKHRoaXMsYSxiKTt0aGlzLnR5cGU9XCJMaW5lTG9vcFwifWZ1bmN0aW9uIEthKGEpe1AuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJQb2ludHNNYXRlcmlhbFwiO3RoaXMuY29sb3I9bmV3IEgoMTY3NzcyMTUpO1xudGhpcy5tYXA9bnVsbDt0aGlzLnNpemU9MTt0aGlzLnNpemVBdHRlbnVhdGlvbj0hMDt0aGlzLmxpZ2h0cz0hMTt0aGlzLnNldFZhbHVlcyhhKX1mdW5jdGlvbiBSYihhLGIpe3guY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJQb2ludHNcIjt0aGlzLmdlb21ldHJ5PXZvaWQgMCE9PWE/YTpuZXcgRTt0aGlzLm1hdGVyaWFsPXZvaWQgMCE9PWI/YjpuZXcgS2Eoe2NvbG9yOjE2Nzc3MjE1Kk1hdGgucmFuZG9tKCl9KX1mdW5jdGlvbiBGYygpe3guY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJHcm91cFwifWZ1bmN0aW9uIGVlKGEsYixjLGQsZSxmLGcsaCxrKXtmdW5jdGlvbiBtKCl7YS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZGVkZGF0YVwiLG0sITEpO3EubmVlZHNVcGRhdGU9ITB9VS5jYWxsKHRoaXMsYSxiLGMsZCxlLGYsZyxoLGspO3RoaXMuZ2VuZXJhdGVNaXBtYXBzPSExO3ZhciBxPXRoaXM7YS5hZGRFdmVudExpc3RlbmVyKFwibG9hZGVkZGF0YVwiLG0sITEpfWZ1bmN0aW9uIFNiKGEsYixjLGQsXG5lLGYsZyxoLGssbSxxLG4pe1UuY2FsbCh0aGlzLG51bGwsZixnLGgsayxtLGQsZSxxLG4pO3RoaXMuaW1hZ2U9e3dpZHRoOmIsaGVpZ2h0OmN9O3RoaXMubWlwbWFwcz1hO3RoaXMuZ2VuZXJhdGVNaXBtYXBzPXRoaXMuZmxpcFk9ITF9ZnVuY3Rpb24gR2MoYSxiLGMsZCxlLGYsZyxoLGssbSl7bT12b2lkIDAhPT1tP206MTAyNjtpZigxMDI2IT09bSYmMTAyNyE9PW0pdGhyb3cgRXJyb3IoXCJEZXB0aFRleHR1cmUgZm9ybWF0IG11c3QgYmUgZWl0aGVyIFRIUkVFLkRlcHRoRm9ybWF0IG9yIFRIUkVFLkRlcHRoU3RlbmNpbEZvcm1hdFwiKTt2b2lkIDA9PT1jJiYxMDI2PT09bSYmKGM9MTAxMik7dm9pZCAwPT09YyYmMTAyNz09PW0mJihjPTEwMjApO1UuY2FsbCh0aGlzLG51bGwsZCxlLGYsZyxoLG0sYyxrKTt0aGlzLmltYWdlPXt3aWR0aDphLGhlaWdodDpifTt0aGlzLm1hZ0ZpbHRlcj12b2lkIDAhPT1nP2c6MTAwMzt0aGlzLm1pbkZpbHRlcj12b2lkIDAhPT1oP2g6MTAwMzt0aGlzLmdlbmVyYXRlTWlwbWFwcz1cbnRoaXMuZmxpcFk9ITF9ZnVuY3Rpb24gVGIoYSl7RS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIldpcmVmcmFtZUdlb21ldHJ5XCI7dmFyIGI9W10sYyxkLGUsZj1bMCwwXSxnPXt9LGg9W1wiYVwiLFwiYlwiLFwiY1wiXTtpZihhJiZhLmlzR2VvbWV0cnkpe3ZhciBrPWEuZmFjZXM7dmFyIG09MDtmb3IoZD1rLmxlbmd0aDttPGQ7bSsrKXt2YXIgcT1rW21dO2ZvcihjPTA7Mz5jO2MrKyl7dmFyIG49cVtoW2NdXTt2YXIgdT1xW2hbKGMrMSklM11dO2ZbMF09TWF0aC5taW4obix1KTtmWzFdPU1hdGgubWF4KG4sdSk7bj1mWzBdK1wiLFwiK2ZbMV07dm9pZCAwPT09Z1tuXSYmKGdbbl09e2luZGV4MTpmWzBdLGluZGV4MjpmWzFdfSl9fWZvcihuIGluIGcpbT1nW25dLGg9YS52ZXJ0aWNlc1ttLmluZGV4MV0sYi5wdXNoKGgueCxoLnksaC56KSxoPWEudmVydGljZXNbbS5pbmRleDJdLGIucHVzaChoLngsaC55LGgueil9ZWxzZSBpZihhJiZhLmlzQnVmZmVyR2VvbWV0cnkpe3ZhciBoPW5ldyBwO2lmKG51bGwhPT1cbmEuaW5kZXgpe2s9YS5hdHRyaWJ1dGVzLnBvc2l0aW9uO3E9YS5pbmRleDt2YXIgbD1hLmdyb3VwczswPT09bC5sZW5ndGgmJihsPVt7c3RhcnQ6MCxjb3VudDpxLmNvdW50LG1hdGVyaWFsSW5kZXg6MH1dKTthPTA7Zm9yKGU9bC5sZW5ndGg7YTxlOysrYSlmb3IobT1sW2FdLGM9bS5zdGFydCxkPW0uY291bnQsbT1jLGQ9YytkO208ZDttKz0zKWZvcihjPTA7Mz5jO2MrKyluPXEuZ2V0WChtK2MpLHU9cS5nZXRYKG0rKGMrMSklMyksZlswXT1NYXRoLm1pbihuLHUpLGZbMV09TWF0aC5tYXgobix1KSxuPWZbMF0rXCIsXCIrZlsxXSx2b2lkIDA9PT1nW25dJiYoZ1tuXT17aW5kZXgxOmZbMF0saW5kZXgyOmZbMV19KTtmb3IobiBpbiBnKW09Z1tuXSxoLmZyb21CdWZmZXJBdHRyaWJ1dGUoayxtLmluZGV4MSksYi5wdXNoKGgueCxoLnksaC56KSxoLmZyb21CdWZmZXJBdHRyaWJ1dGUoayxtLmluZGV4MiksYi5wdXNoKGgueCxoLnksaC56KX1lbHNlIGZvcihrPWEuYXR0cmlidXRlcy5wb3NpdGlvbixcbm09MCxkPWsuY291bnQvMzttPGQ7bSsrKWZvcihjPTA7Mz5jO2MrKylnPTMqbStjLGguZnJvbUJ1ZmZlckF0dHJpYnV0ZShrLGcpLGIucHVzaChoLngsaC55LGgueiksZz0zKm0rKGMrMSklMyxoLmZyb21CdWZmZXJBdHRyaWJ1dGUoayxnKSxiLnB1c2goaC54LGgueSxoLnopfXRoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihiLDMpKX1mdW5jdGlvbiBIYyhhLGIsYyl7TC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlBhcmFtZXRyaWNHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17ZnVuYzphLHNsaWNlczpiLHN0YWNrczpjfTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgVWIoYSxiLGMpKTt0aGlzLm1lcmdlVmVydGljZXMoKX1mdW5jdGlvbiBVYihhLGIsYyl7RS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlBhcmFtZXRyaWNCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17ZnVuYzphLHNsaWNlczpiLHN0YWNrczpjfTt2YXIgZD1bXSxlPVtdLGY9W10sZz1bXSxoPVxubmV3IHAsaz1uZXcgcCxtPW5ldyBwLHE9bmV3IHAsbj1uZXcgcCx1LGwsdD1iKzE7Zm9yKHU9MDt1PD1jO3UrKyl7dmFyIHY9dS9jO2ZvcihsPTA7bDw9YjtsKyspe3ZhciB3PWwvYixrPWEodyx2LGspO2UucHVzaChrLngsay55LGsueik7MDw9dy0xRS01PyhtPWEody0xRS01LHYsbSkscS5zdWJWZWN0b3JzKGssbSkpOihtPWEodysxRS01LHYsbSkscS5zdWJWZWN0b3JzKG0saykpOzA8PXYtMUUtNT8obT1hKHcsdi0xRS01LG0pLG4uc3ViVmVjdG9ycyhrLG0pKToobT1hKHcsdisxRS01LG0pLG4uc3ViVmVjdG9ycyhtLGspKTtoLmNyb3NzVmVjdG9ycyhxLG4pLm5vcm1hbGl6ZSgpO2YucHVzaChoLngsaC55LGgueik7Zy5wdXNoKHcsdil9fWZvcih1PTA7dTxjO3UrKylmb3IobD0wO2w8YjtsKyspYT11KnQrbCsxLGg9KHUrMSkqdCtsKzEsaz0odSsxKSp0K2wsZC5wdXNoKHUqdCtsLGEsayksZC5wdXNoKGEsaCxrKTt0aGlzLnNldEluZGV4KGQpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixcbm5ldyBCKGUsMykpO3RoaXMuYWRkQXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IEIoZiwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBCKGcsMikpfWZ1bmN0aW9uIEljKGEsYixjLGQpe0wuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJQb2x5aGVkcm9uR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3ZlcnRpY2VzOmEsaW5kaWNlczpiLHJhZGl1czpjLGRldGFpbDpkfTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgamEoYSxiLGMsZCkpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIGphKGEsYixjLGQpe2Z1bmN0aW9uIGUoYSl7aC5wdXNoKGEueCxhLnksYS56KX1mdW5jdGlvbiBmKGIsYyl7Yio9MztjLng9YVtiKzBdO2MueT1hW2IrMV07Yy56PWFbYisyXX1mdW5jdGlvbiBnKGEsYixjLGQpezA+ZCYmMT09PWEueCYmKGtbYl09YS54LTEpOzA9PT1jLngmJjA9PT1jLnomJihrW2JdPWQvMi9NYXRoLlBJKy41KX1FLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUG9seWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCI7XG50aGlzLnBhcmFtZXRlcnM9e3ZlcnRpY2VzOmEsaW5kaWNlczpiLHJhZGl1czpjLGRldGFpbDpkfTtjPWN8fDE7ZD1kfHwwO3ZhciBoPVtdLGs9W107KGZ1bmN0aW9uKGEpe2Zvcih2YXIgYz1uZXcgcCxkPW5ldyBwLGc9bmV3IHAsaD0wO2g8Yi5sZW5ndGg7aCs9Myl7ZihiW2grMF0sYyk7ZihiW2grMV0sZCk7ZihiW2grMl0sZyk7dmFyIGssbSxsPWMsej1kLHk9ZyxJPU1hdGgucG93KDIsYSksQT1bXTtmb3IobT0wO208PUk7bSsrKXtBW21dPVtdO3ZhciBKPWwuY2xvbmUoKS5sZXJwKHksbS9JKSx4PXouY2xvbmUoKS5sZXJwKHksbS9JKSxCPUktbTtmb3Ioaz0wO2s8PUI7aysrKUFbbV1ba109MD09PWsmJm09PT1JP0o6Si5jbG9uZSgpLmxlcnAoeCxrL0IpfWZvcihtPTA7bTxJO20rKylmb3Ioaz0wO2s8MiooSS1tKS0xO2srKylsPU1hdGguZmxvb3Ioay8yKSwwPT09ayUyPyhlKEFbbV1bbCsxXSksZShBW20rMV1bbF0pLGUoQVttXVtsXSkpOihlKEFbbV1bbCsxXSksZShBW20rMV1bbCtcbjFdKSxlKEFbbSsxXVtsXSkpfX0pKGQpOyhmdW5jdGlvbihhKXtmb3IodmFyIGI9bmV3IHAsYz0wO2M8aC5sZW5ndGg7Yys9MyliLng9aFtjKzBdLGIueT1oW2MrMV0sYi56PWhbYysyXSxiLm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKGEpLGhbYyswXT1iLngsaFtjKzFdPWIueSxoW2MrMl09Yi56fSkoYyk7KGZ1bmN0aW9uKCl7Zm9yKHZhciBhPW5ldyBwLGI9MDtiPGgubGVuZ3RoO2IrPTMpYS54PWhbYiswXSxhLnk9aFtiKzFdLGEuej1oW2IrMl0say5wdXNoKE1hdGguYXRhbjIoYS56LC1hLngpLzIvTWF0aC5QSSsuNSwxLShNYXRoLmF0YW4yKC1hLnksTWF0aC5zcXJ0KGEueCphLngrYS56KmEueikpL01hdGguUEkrLjUpKTtmb3IodmFyIGE9bmV3IHAsYj1uZXcgcCxjPW5ldyBwLGQ9bmV3IHAsZT1uZXcgRCxmPW5ldyBELGw9bmV3IEQsdz0wLHo9MDt3PGgubGVuZ3RoO3crPTkseis9Nil7YS5zZXQoaFt3KzBdLGhbdysxXSxoW3crMl0pO2Iuc2V0KGhbdyszXSxoW3crNF0saFt3K1xuNV0pO2Muc2V0KGhbdys2XSxoW3crN10saFt3KzhdKTtlLnNldChrW3orMF0sa1t6KzFdKTtmLnNldChrW3orMl0sa1t6KzNdKTtsLnNldChrW3orNF0sa1t6KzVdKTtkLmNvcHkoYSkuYWRkKGIpLmFkZChjKS5kaXZpZGVTY2FsYXIoMyk7dmFyIHk9TWF0aC5hdGFuMihkLnosLWQueCk7ZyhlLHorMCxhLHkpO2coZix6KzIsYix5KTtnKGwseis0LGMseSl9Zm9yKGE9MDthPGsubGVuZ3RoO2ErPTYpYj1rW2ErMF0sYz1rW2ErMl0sZD1rW2ErNF0sZT1NYXRoLm1pbihiLGMsZCksLjk8TWF0aC5tYXgoYixjLGQpJiYuMT5lJiYoLjI+YiYmKGtbYSswXSs9MSksLjI+YyYmKGtbYSsyXSs9MSksLjI+ZCYmKGtbYSs0XSs9MSkpfSkoKTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIoaCwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgQihoLnNsaWNlKCksMykpO3RoaXMuYWRkQXR0cmlidXRlKFwidXZcIixuZXcgQihrLDIpKTswPT09ZD90aGlzLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk6XG50aGlzLm5vcm1hbGl6ZU5vcm1hbHMoKX1mdW5jdGlvbiBKYyhhLGIpe0wuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJUZXRyYWhlZHJvbkdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSxkZXRhaWw6Yn07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IFZiKGEsYikpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIFZiKGEsYil7amEuY2FsbCh0aGlzLFsxLDEsMSwtMSwtMSwxLC0xLDEsLTEsMSwtMSwtMV0sWzIsMSwwLDAsMywyLDEsMywwLDIsMywxXSxhLGIpO3RoaXMudHlwZT1cIlRldHJhaGVkcm9uQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLGRldGFpbDpifX1mdW5jdGlvbiBLYyhhLGIpe0wuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJPY3RhaGVkcm9uR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLGRldGFpbDpifTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgdWIoYSxiKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9XG5mdW5jdGlvbiB1YihhLGIpe2phLmNhbGwodGhpcyxbMSwwLDAsLTEsMCwwLDAsMSwwLDAsLTEsMCwwLDAsMSwwLDAsLTFdLFswLDIsNCwwLDQsMywwLDMsNSwwLDUsMiwxLDIsNSwxLDUsMywxLDMsNCwxLDQsMl0sYSxiKTt0aGlzLnR5cGU9XCJPY3RhaGVkcm9uQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLGRldGFpbDpifX1mdW5jdGlvbiBMYyhhLGIpe0wuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJJY29zYWhlZHJvbkdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSxkZXRhaWw6Yn07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IFdiKGEsYikpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIFdiKGEsYil7dmFyIGM9KDErTWF0aC5zcXJ0KDUpKS8yO2phLmNhbGwodGhpcyxbLTEsYywwLDEsYywwLC0xLC1jLDAsMSwtYywwLDAsLTEsYywwLDEsYywwLC0xLC1jLDAsMSwtYyxjLDAsLTEsYywwLDEsLWMsMCwtMSwtYywwLDFdLFswLDExLFxuNSwwLDUsMSwwLDEsNywwLDcsMTAsMCwxMCwxMSwxLDUsOSw1LDExLDQsMTEsMTAsMiwxMCw3LDYsNywxLDgsMyw5LDQsMyw0LDIsMywyLDYsMyw2LDgsMyw4LDksNCw5LDUsMiw0LDExLDYsMiwxMCw4LDYsNyw5LDgsMV0sYSxiKTt0aGlzLnR5cGU9XCJJY29zYWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSxkZXRhaWw6Yn19ZnVuY3Rpb24gTWMoYSxiKXtMLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiRG9kZWNhaGVkcm9uR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLGRldGFpbDpifTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgWGIoYSxiKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gWGIoYSxiKXt2YXIgYz0oMStNYXRoLnNxcnQoNSkpLzIsZD0xL2M7amEuY2FsbCh0aGlzLFstMSwtMSwtMSwtMSwtMSwxLC0xLDEsLTEsLTEsMSwxLDEsLTEsLTEsMSwtMSwxLDEsMSwtMSwxLDEsMSwwLC1kLC1jLDAsLWQsYywwLFxuZCwtYywwLGQsYywtZCwtYywwLC1kLGMsMCxkLC1jLDAsZCxjLDAsLWMsMCwtZCxjLDAsLWQsLWMsMCxkLGMsMCxkXSxbMywxMSw3LDMsNywxNSwzLDE1LDEzLDcsMTksMTcsNywxNyw2LDcsNiwxNSwxNyw0LDgsMTcsOCwxMCwxNywxMCw2LDgsMCwxNiw4LDE2LDIsOCwyLDEwLDAsMTIsMSwwLDEsMTgsMCwxOCwxNiw2LDEwLDIsNiwyLDEzLDYsMTMsMTUsMiwxNiwxOCwyLDE4LDMsMiwzLDEzLDE4LDEsOSwxOCw5LDExLDE4LDExLDMsNCwxNCwxMiw0LDEyLDAsNCwwLDgsMTEsOSw1LDExLDUsMTksMTEsMTksNywxOSw1LDE0LDE5LDE0LDQsMTksNCwxNywxLDEyLDE0LDEsMTQsNSwxLDUsOV0sYSxiKTt0aGlzLnR5cGU9XCJEb2RlY2FoZWRyb25CdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsZGV0YWlsOmJ9fWZ1bmN0aW9uIE5jKGEsYixjLGQsZSxmKXtMLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiVHViZUdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtwYXRoOmEsXG50dWJ1bGFyU2VnbWVudHM6YixyYWRpdXM6YyxyYWRpYWxTZWdtZW50czpkLGNsb3NlZDplfTt2b2lkIDAhPT1mJiZjb25zb2xlLndhcm4oXCJUSFJFRS5UdWJlR2VvbWV0cnk6IHRhcGVyIGhhcyBiZWVuIHJlbW92ZWQuXCIpO2E9bmV3IFliKGEsYixjLGQsZSk7dGhpcy50YW5nZW50cz1hLnRhbmdlbnRzO3RoaXMubm9ybWFscz1hLm5vcm1hbHM7dGhpcy5iaW5vcm1hbHM9YS5iaW5vcm1hbHM7dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkoYSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gWWIoYSxiLGMsZCxlKXtmdW5jdGlvbiBmKGUpe3E9YS5nZXRQb2ludEF0KGUvYixxKTt2YXIgZj1nLm5vcm1hbHNbZV07ZT1nLmJpbm9ybWFsc1tlXTtmb3IobD0wO2w8PWQ7bCsrKXt2YXIgbT1sL2QqTWF0aC5QSSoyLG49TWF0aC5zaW4obSksbT0tTWF0aC5jb3MobSk7ay54PW0qZi54K24qZS54O2sueT1tKmYueStuKmUueTtrLno9bSpmLnorbiplLno7ay5ub3JtYWxpemUoKTt0LnB1c2goay54LFxuay55LGsueik7aC54PXEueCtjKmsueDtoLnk9cS55K2Mqay55O2guej1xLnorYyprLno7ci5wdXNoKGgueCxoLnksaC56KX19RS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlR1YmVCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cGF0aDphLHR1YnVsYXJTZWdtZW50czpiLHJhZGl1czpjLHJhZGlhbFNlZ21lbnRzOmQsY2xvc2VkOmV9O2I9Ynx8NjQ7Yz1jfHwxO2Q9ZHx8ODtlPWV8fCExO3ZhciBnPWEuY29tcHV0ZUZyZW5ldEZyYW1lcyhiLGUpO3RoaXMudGFuZ2VudHM9Zy50YW5nZW50czt0aGlzLm5vcm1hbHM9Zy5ub3JtYWxzO3RoaXMuYmlub3JtYWxzPWcuYmlub3JtYWxzO3ZhciBoPW5ldyBwLGs9bmV3IHAsbT1uZXcgRCxxPW5ldyBwLG4sbCxyPVtdLHQ9W10sdj1bXSx3PVtdO2ZvcihuPTA7bjxiO24rKylmKG4pO2YoITE9PT1lP2I6MCk7Zm9yKG49MDtuPD1iO24rKylmb3IobD0wO2w8PWQ7bCsrKW0ueD1uL2IsbS55PWwvZCx2LnB1c2gobS54LG0ueSk7KGZ1bmN0aW9uKCl7Zm9yKGw9XG4xO2w8PWI7bCsrKWZvcihuPTE7bjw9ZDtuKyspe3ZhciBhPShkKzEpKmwrKG4tMSksYz0oZCsxKSpsK24sZT0oZCsxKSoobC0xKStuO3cucHVzaCgoZCsxKSoobC0xKSsobi0xKSxhLGUpO3cucHVzaChhLGMsZSl9fSkoKTt0aGlzLnNldEluZGV4KHcpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihyLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBCKHQsMykpO3RoaXMuYWRkQXR0cmlidXRlKFwidXZcIixuZXcgQih2LDIpKX1mdW5jdGlvbiBPYyhhLGIsYyxkLGUsZixnKXtMLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiVG9ydXNLbm90R2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLHR1YmU6Yix0dWJ1bGFyU2VnbWVudHM6YyxyYWRpYWxTZWdtZW50czpkLHA6ZSxxOmZ9O3ZvaWQgMCE9PWcmJmNvbnNvbGUud2FybihcIlRIUkVFLlRvcnVzS25vdEdlb21ldHJ5OiBoZWlnaHRTY2FsZSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLnNjYWxlKCB4LCB5LCB6ICkgaW5zdGVhZC5cIik7XG50aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgWmIoYSxiLGMsZCxlLGYpKTt0aGlzLm1lcmdlVmVydGljZXMoKX1mdW5jdGlvbiBaYihhLGIsYyxkLGUsZil7ZnVuY3Rpb24gZyhhLGIsYyxkLGUpe3ZhciBmPU1hdGguc2luKGEpO2I9Yy9iKmE7Yz1NYXRoLmNvcyhiKTtlLng9ZCooMitjKSouNSpNYXRoLmNvcyhhKTtlLnk9ZCooMitjKSpmKi41O2Uuej1kKk1hdGguc2luKGIpKi41fUUuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJUb3J1c0tub3RCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsdHViZTpiLHR1YnVsYXJTZWdtZW50czpjLHJhZGlhbFNlZ21lbnRzOmQscDplLHE6Zn07YT1hfHwxO2I9Ynx8LjQ7Yz1NYXRoLmZsb29yKGMpfHw2NDtkPU1hdGguZmxvb3IoZCl8fDg7ZT1lfHwyO2Y9Znx8Mzt2YXIgaD1bXSxrPVtdLG09W10scT1bXSxuLGw9bmV3IHAscj1uZXcgcCx0PW5ldyBwLHY9bmV3IHAsdz1uZXcgcCx6PW5ldyBwLHk9bmV3IHA7Zm9yKG49MDtuPD1cbmM7KytuKXt2YXIgST1uL2MqZSpNYXRoLlBJKjI7ZyhJLGUsZixhLHQpO2coSSsuMDEsZSxmLGEsdik7ei5zdWJWZWN0b3JzKHYsdCk7eS5hZGRWZWN0b3JzKHYsdCk7dy5jcm9zc1ZlY3RvcnMoeix5KTt5LmNyb3NzVmVjdG9ycyh3LHopO3cubm9ybWFsaXplKCk7eS5ub3JtYWxpemUoKTtmb3IoST0wO0k8PWQ7KytJKXt2YXIgQT1JL2QqTWF0aC5QSSoyLEo9LWIqTWF0aC5jb3MoQSksQT1iKk1hdGguc2luKEEpO2wueD10LngrKEoqeS54K0Eqdy54KTtsLnk9dC55KyhKKnkueStBKncueSk7bC56PXQueisoSip5LnorQSp3LnopO2sucHVzaChsLngsbC55LGwueik7ci5zdWJWZWN0b3JzKGwsdCkubm9ybWFsaXplKCk7bS5wdXNoKHIueCxyLnksci56KTtxLnB1c2gobi9jKTtxLnB1c2goSS9kKX19Zm9yKEk9MTtJPD1jO0krKylmb3Iobj0xO248PWQ7bisrKWE9KGQrMSkqSSsobi0xKSxiPShkKzEpKkkrbixlPShkKzEpKihJLTEpK24saC5wdXNoKChkKzEpKihJLTEpKyhuLTEpLGEsZSksXG5oLnB1c2goYSxiLGUpO3RoaXMuc2V0SW5kZXgoaCk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKGssMykpO3RoaXMuYWRkQXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IEIobSwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBCKHEsMikpfWZ1bmN0aW9uIFBjKGEsYixjLGQsZSl7TC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlRvcnVzR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLHR1YmU6YixyYWRpYWxTZWdtZW50czpjLHR1YnVsYXJTZWdtZW50czpkLGFyYzplfTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgJGIoYSxiLGMsZCxlKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gJGIoYSxiLGMsZCxlKXtFLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiVG9ydXNCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsdHViZTpiLHJhZGlhbFNlZ21lbnRzOmMsdHVidWxhclNlZ21lbnRzOmQsYXJjOmV9O2E9YXx8MTtiPWJ8fFxuLjQ7Yz1NYXRoLmZsb29yKGMpfHw4O2Q9TWF0aC5mbG9vcihkKXx8NjtlPWV8fDIqTWF0aC5QSTt2YXIgZj1bXSxnPVtdLGg9W10saz1bXSxtPW5ldyBwLHE9bmV3IHAsbj1uZXcgcCxsLHI7Zm9yKGw9MDtsPD1jO2wrKylmb3Iocj0wO3I8PWQ7cisrKXt2YXIgdD1yL2QqZSx2PWwvYypNYXRoLlBJKjI7cS54PShhK2IqTWF0aC5jb3ModikpKk1hdGguY29zKHQpO3EueT0oYStiKk1hdGguY29zKHYpKSpNYXRoLnNpbih0KTtxLno9YipNYXRoLnNpbih2KTtnLnB1c2gocS54LHEueSxxLnopO20ueD1hKk1hdGguY29zKHQpO20ueT1hKk1hdGguc2luKHQpO24uc3ViVmVjdG9ycyhxLG0pLm5vcm1hbGl6ZSgpO2gucHVzaChuLngsbi55LG4ueik7ay5wdXNoKHIvZCk7ay5wdXNoKGwvYyl9Zm9yKGw9MTtsPD1jO2wrKylmb3Iocj0xO3I8PWQ7cisrKWE9KGQrMSkqKGwtMSkrci0xLGI9KGQrMSkqKGwtMSkrcixlPShkKzEpKmwrcixmLnB1c2goKGQrMSkqbCtyLTEsYSxlKSxmLnB1c2goYSxiLFxuZSk7dGhpcy5zZXRJbmRleChmKTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIoZywzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgQihoLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsbmV3IEIoaywyKSl9ZnVuY3Rpb24gYmYoYSxiLGMsZCxlKXtmb3IodmFyIGYsZz0wLGg9YixrPWMtZDtoPGM7aCs9ZClnKz0oYVtrXS1hW2hdKSooYVtoKzFdK2FbaysxXSksaz1oO2lmKGU9PT0wPGcpZm9yKGU9YjtlPGM7ZSs9ZClmPWNmKGUsYVtlXSxhW2UrMV0sZik7ZWxzZSBmb3IoZT1jLWQ7ZT49YjtlLT1kKWY9Y2YoZSxhW2VdLGFbZSsxXSxmKTtmJiZ2YihmLGYubmV4dCkmJihRYyhmKSxmPWYubmV4dCk7cmV0dXJuIGZ9ZnVuY3Rpb24gUmMoYSxiKXtpZighYSlyZXR1cm4gYTtifHwoYj1hKTtkb3t2YXIgYz0hMTtpZihhLnN0ZWluZXJ8fCF2YihhLGEubmV4dCkmJjAhPT10YShhLnByZXYsYSxhLm5leHQpKWE9YS5uZXh0O2Vsc2V7UWMoYSk7YT1iPWEucHJldjtcbmlmKGE9PT1hLm5leHQpYnJlYWs7Yz0hMH19d2hpbGUoY3x8YSE9PWIpO3JldHVybiBifWZ1bmN0aW9uIFNjKGEsYixjLGQsZSxmLGcpe2lmKGEpe2lmKCFnJiZmKXt2YXIgaD1hLGs9aDtkbyBudWxsPT09ay56JiYoay56PWZlKGsueCxrLnksZCxlLGYpKSxrLnByZXZaPWsucHJldixrPWsubmV4dFo9ay5uZXh0O3doaWxlKGshPT1oKTtrLnByZXZaLm5leHRaPW51bGw7ay5wcmV2Wj1udWxsO3ZhciBoPWssbSxxLG4sbCxyPTE7ZG97az1oO3ZhciB0PWg9bnVsbDtmb3IocT0wO2s7KXtxKys7dmFyIHA9aztmb3IobT1uPTA7bTxyJiYobisrLHA9cC5uZXh0WixwKTttKyspO2ZvcihsPXI7MDxufHwwPGwmJnA7KTAhPT1uJiYoMD09PWx8fCFwfHxrLno8PXAueik/KG09ayxrPWsubmV4dFosbi0tKToobT1wLHA9cC5uZXh0WixsLS0pLHQ/dC5uZXh0Wj1tOmg9bSxtLnByZXZaPXQsdD1tO2s9cH10Lm5leHRaPW51bGw7cio9Mn13aGlsZSgxPHEpfWZvcihoPWE7YS5wcmV2IT09YS5uZXh0Oyl7az1cbmEucHJldjtwPWEubmV4dDtpZihmKWE6e3Q9YTtsPWQ7dmFyIHc9ZSx6PWY7cT10LnByZXY7bj10O3I9dC5uZXh0O2lmKDA8PXRhKHEsbixyKSl0PSExO2Vsc2V7dmFyIHk9cS54Pm4ueD9xLng+ci54P3EueDpyLng6bi54PnIueD9uLng6ci54LEk9cS55Pm4ueT9xLnk+ci55P3EueTpyLnk6bi55PnIueT9uLnk6ci55O209ZmUocS54PG4ueD9xLng8ci54P3EueDpyLng6bi54PHIueD9uLng6ci54LHEueTxuLnk/cS55PHIueT9xLnk6ci55Om4ueTxyLnk/bi55OnIueSxsLHcseik7bD1mZSh5LEksbCx3LHopO2Zvcih3PXQubmV4dFo7dyYmdy56PD1sOyl7aWYodyE9PXQucHJldiYmdyE9PXQubmV4dCYmemQocS54LHEueSxuLngsbi55LHIueCxyLnksdy54LHcueSkmJjA8PXRhKHcucHJldix3LHcubmV4dCkpe3Q9ITE7YnJlYWsgYX13PXcubmV4dFp9Zm9yKHc9dC5wcmV2Wjt3JiZ3Lno+PW07KXtpZih3IT09dC5wcmV2JiZ3IT09dC5uZXh0JiZ6ZChxLngscS55LG4ueCxuLnksci54LFxuci55LHcueCx3LnkpJiYwPD10YSh3LnByZXYsdyx3Lm5leHQpKXt0PSExO2JyZWFrIGF9dz13LnByZXZafXQ9ITB9fWVsc2UgYTppZih0PWEscT10LnByZXYsbj10LHI9dC5uZXh0LDA8PXRhKHEsbixyKSl0PSExO2Vsc2V7Zm9yKG09dC5uZXh0Lm5leHQ7bSE9PXQucHJldjspe2lmKHpkKHEueCxxLnksbi54LG4ueSxyLngsci55LG0ueCxtLnkpJiYwPD10YShtLnByZXYsbSxtLm5leHQpKXt0PSExO2JyZWFrIGF9bT1tLm5leHR9dD0hMH1pZih0KWIucHVzaChrLmkvYyksYi5wdXNoKGEuaS9jKSxiLnB1c2gocC5pL2MpLFFjKGEpLGg9YT1wLm5leHQ7ZWxzZSBpZihhPXAsYT09PWgpe2lmKCFnKVNjKFJjKGEpLGIsYyxkLGUsZiwxKTtlbHNlIGlmKDE9PT1nKXtnPWI7aD1jO2s9YTtkbyBwPWsucHJldix0PWsubmV4dC5uZXh0LCF2YihwLHQpJiZkZihwLGssay5uZXh0LHQpJiZUYyhwLHQpJiZUYyh0LHApJiYoZy5wdXNoKHAuaS9oKSxnLnB1c2goay5pL2gpLGcucHVzaCh0LmkvaCksXG5RYyhrKSxRYyhrLm5leHQpLGs9YT10KSxrPWsubmV4dDt3aGlsZShrIT09YSk7YT1rO1NjKGEsYixjLGQsZSxmLDIpfWVsc2UgaWYoMj09PWcpYTp7Zz1hO2Rve2ZvcihoPWcubmV4dC5uZXh0O2ghPT1nLnByZXY7KXtpZihrPWcuaSE9PWguaSl7az1nO3A9aDtpZih0PWsubmV4dC5pIT09cC5pJiZrLnByZXYuaSE9PXAuaSl7Yjp7dD1rO2Rve2lmKHQuaSE9PWsuaSYmdC5uZXh0LmkhPT1rLmkmJnQuaSE9PXAuaSYmdC5uZXh0LmkhPT1wLmkmJmRmKHQsdC5uZXh0LGsscCkpe3Q9ITA7YnJlYWsgYn10PXQubmV4dH13aGlsZSh0IT09ayk7dD0hMX10PSF0fWlmKHQ9dCYmVGMoayxwKSYmVGMocCxrKSl7dD1rO3E9ITE7bj0oay54K3AueCkvMjtwPShrLnkrcC55KS8yO2RvIHQueT5wIT09dC5uZXh0Lnk+cCYmdC5uZXh0LnkhPT10LnkmJm48KHQubmV4dC54LXQueCkqKHAtdC55KS8odC5uZXh0LnktdC55KSt0LngmJihxPSFxKSx0PXQubmV4dDt3aGlsZSh0IT09ayk7dD1xfWs9dH1pZihrKXthPVxuZWYoZyxoKTtnPVJjKGcsZy5uZXh0KTthPVJjKGEsYS5uZXh0KTtTYyhnLGIsYyxkLGUsZik7U2MoYSxiLGMsZCxlLGYpO2JyZWFrIGF9aD1oLm5leHR9Zz1nLm5leHR9d2hpbGUoZyE9PWEpfWJyZWFrfX19fWZ1bmN0aW9uIEhnKGEsYil7cmV0dXJuIGEueC1iLnh9ZnVuY3Rpb24gSWcoYSxiKXt2YXIgYz1iLGQ9YS54LGU9YS55LGY9LUluZmluaXR5O2Rve2lmKGU8PWMueSYmZT49Yy5uZXh0LnkmJmMubmV4dC55IT09Yy55KXt2YXIgZz1jLngrKGUtYy55KSooYy5uZXh0LngtYy54KS8oYy5uZXh0LnktYy55KTtpZihnPD1kJiZnPmYpe2Y9ZztpZihnPT09ZCl7aWYoZT09PWMueSlyZXR1cm4gYztpZihlPT09Yy5uZXh0LnkpcmV0dXJuIGMubmV4dH12YXIgaD1jLng8Yy5uZXh0Lng/YzpjLm5leHR9fWM9Yy5uZXh0fXdoaWxlKGMhPT1iKTtpZighaClyZXR1cm4gbnVsbDtpZihkPT09ZilyZXR1cm4gaC5wcmV2O2I9aDtmb3IodmFyIGc9aC54LGs9aC55LG09SW5maW5pdHkscSxjPWgubmV4dDtjIT09XG5iOylkPj1jLngmJmMueD49ZyYmZCE9PWMueCYmemQoZTxrP2Q6ZixlLGcsayxlPGs/ZjpkLGUsYy54LGMueSkmJihxPU1hdGguYWJzKGUtYy55KS8oZC1jLngpLChxPG18fHE9PT1tJiZjLng+aC54KSYmVGMoYyxhKSYmKGg9YyxtPXEpKSxjPWMubmV4dDtyZXR1cm4gaH1mdW5jdGlvbiBmZShhLGIsYyxkLGUpe2E9MzI3NjcqKGEtYykqZTtiPTMyNzY3KihiLWQpKmU7YT0oYXxhPDw4KSYxNjcxMTkzNTthPShhfGE8PDQpJjI1MjY0NTEzNTthPShhfGE8PDIpJjg1ODk5MzQ1OTtiPShifGI8PDgpJjE2NzExOTM1O2I9KGJ8Yjw8NCkmMjUyNjQ1MTM1O2I9KGJ8Yjw8MikmODU4OTkzNDU5O3JldHVybihhfGE8PDEpJjE0MzE2NTU3NjV8KChifGI8PDEpJjE0MzE2NTU3NjUpPDwxfWZ1bmN0aW9uIEpnKGEpe3ZhciBiPWEsYz1hO2RvIGIueDxjLngmJihjPWIpLGI9Yi5uZXh0O3doaWxlKGIhPT1hKTtyZXR1cm4gY31mdW5jdGlvbiB6ZChhLGIsYyxkLGUsZixnLGgpe3JldHVybiAwPD0oZS1cbmcpKihiLWgpLShhLWcpKihmLWgpJiYwPD0oYS1nKSooZC1oKS0oYy1nKSooYi1oKSYmMDw9KGMtZykqKGYtaCktKGUtZykqKGQtaCl9ZnVuY3Rpb24gdGEoYSxiLGMpe3JldHVybihiLnktYS55KSooYy54LWIueCktKGIueC1hLngpKihjLnktYi55KX1mdW5jdGlvbiB2YihhLGIpe3JldHVybiBhLng9PT1iLngmJmEueT09PWIueX1mdW5jdGlvbiBkZihhLGIsYyxkKXtyZXR1cm4gdmIoYSxiKSYmdmIoYyxkKXx8dmIoYSxkKSYmdmIoYyxiKT8hMDowPHRhKGEsYixjKSE9PTA8dGEoYSxiLGQpJiYwPHRhKGMsZCxhKSE9PTA8dGEoYyxkLGIpfWZ1bmN0aW9uIFRjKGEsYil7cmV0dXJuIDA+dGEoYS5wcmV2LGEsYS5uZXh0KT8wPD10YShhLGIsYS5uZXh0KSYmMDw9dGEoYSxhLnByZXYsYik6MD50YShhLGIsYS5wcmV2KXx8MD50YShhLGEubmV4dCxiKX1mdW5jdGlvbiBlZihhLGIpe3ZhciBjPW5ldyBnZShhLmksYS54LGEueSksZD1uZXcgZ2UoYi5pLGIueCxiLnkpLGU9YS5uZXh0LGY9Yi5wcmV2O1xuYS5uZXh0PWI7Yi5wcmV2PWE7Yy5uZXh0PWU7ZS5wcmV2PWM7ZC5uZXh0PWM7Yy5wcmV2PWQ7Zi5uZXh0PWQ7ZC5wcmV2PWY7cmV0dXJuIGR9ZnVuY3Rpb24gY2YoYSxiLGMsZCl7YT1uZXcgZ2UoYSxiLGMpO2Q/KGEubmV4dD1kLm5leHQsYS5wcmV2PWQsZC5uZXh0LnByZXY9YSxkLm5leHQ9YSk6KGEucHJldj1hLGEubmV4dD1hKTtyZXR1cm4gYX1mdW5jdGlvbiBRYyhhKXthLm5leHQucHJldj1hLnByZXY7YS5wcmV2Lm5leHQ9YS5uZXh0O2EucHJldlomJihhLnByZXZaLm5leHRaPWEubmV4dFopO2EubmV4dFomJihhLm5leHRaLnByZXZaPWEucHJldlopfWZ1bmN0aW9uIGdlKGEsYixjKXt0aGlzLmk9YTt0aGlzLng9Yjt0aGlzLnk9Yzt0aGlzLm5leHRaPXRoaXMucHJldlo9dGhpcy56PXRoaXMubmV4dD10aGlzLnByZXY9bnVsbDt0aGlzLnN0ZWluZXI9ITF9ZnVuY3Rpb24gaWIoYSxiKXtMLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiRXh0cnVkZUdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPVxue3NoYXBlczphLG9wdGlvbnM6Yn07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IExhKGEsYikpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIExhKGEsYil7XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBhJiYoRS5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIkV4dHJ1ZGVCdWZmZXJHZW9tZXRyeVwiLGE9QXJyYXkuaXNBcnJheShhKT9hOlthXSx0aGlzLmFkZFNoYXBlTGlzdChhLGIpLHRoaXMuY29tcHV0ZVZlcnRleE5vcm1hbHMoKSl9ZnVuY3Rpb24gVWMoYSxiKXtMLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiVGV4dEdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXt0ZXh0OmEscGFyYW1ldGVyczpifTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgYWMoYSxiKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gYWMoYSxiKXtiPWJ8fHt9O3ZhciBjPWIuZm9udDtpZighY3x8IWMuaXNGb250KXJldHVybiBjb25zb2xlLmVycm9yKFwiVEhSRUUuVGV4dEdlb21ldHJ5OiBmb250IHBhcmFtZXRlciBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuRm9udC5cIiksXG5uZXcgTDthPWMuZ2VuZXJhdGVTaGFwZXMoYSxiLnNpemUsYi5jdXJ2ZVNlZ21lbnRzKTtiLmFtb3VudD12b2lkIDAhPT1iLmhlaWdodD9iLmhlaWdodDo1MDt2b2lkIDA9PT1iLmJldmVsVGhpY2tuZXNzJiYoYi5iZXZlbFRoaWNrbmVzcz0xMCk7dm9pZCAwPT09Yi5iZXZlbFNpemUmJihiLmJldmVsU2l6ZT04KTt2b2lkIDA9PT1iLmJldmVsRW5hYmxlZCYmKGIuYmV2ZWxFbmFibGVkPSExKTtMYS5jYWxsKHRoaXMsYSxiKTt0aGlzLnR5cGU9XCJUZXh0QnVmZmVyR2VvbWV0cnlcIn1mdW5jdGlvbiBWYyhhLGIsYyxkLGUsZixnKXtMLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiU3BoZXJlR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLHdpZHRoU2VnbWVudHM6YixoZWlnaHRTZWdtZW50czpjLHBoaVN0YXJ0OmQscGhpTGVuZ3RoOmUsdGhldGFTdGFydDpmLHRoZXRhTGVuZ3RoOmd9O3RoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyB3YihhLGIsYyxkLGUsZixnKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9XG5mdW5jdGlvbiB3YihhLGIsYyxkLGUsZixnKXtFLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiU3BoZXJlQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLHdpZHRoU2VnbWVudHM6YixoZWlnaHRTZWdtZW50czpjLHBoaVN0YXJ0OmQscGhpTGVuZ3RoOmUsdGhldGFTdGFydDpmLHRoZXRhTGVuZ3RoOmd9O2E9YXx8MTtiPU1hdGgubWF4KDMsTWF0aC5mbG9vcihiKXx8OCk7Yz1NYXRoLm1heCgyLE1hdGguZmxvb3IoYyl8fDYpO2Q9dm9pZCAwIT09ZD9kOjA7ZT12b2lkIDAhPT1lP2U6MipNYXRoLlBJO2Y9dm9pZCAwIT09Zj9mOjA7Zz12b2lkIDAhPT1nP2c6TWF0aC5QSTt2YXIgaD1mK2csayxtLHE9MCxuPVtdLGw9bmV3IHAscj1uZXcgcCx0PVtdLHY9W10sdz1bXSx6PVtdO2ZvcihtPTA7bTw9YzttKyspe3ZhciB5PVtdLEk9bS9jO2ZvcihrPTA7azw9YjtrKyspe3ZhciBBPWsvYjtsLng9LWEqTWF0aC5jb3MoZCtBKmUpKk1hdGguc2luKGYrSSpnKTtsLnk9YSpNYXRoLmNvcyhmK1xuSSpnKTtsLno9YSpNYXRoLnNpbihkK0EqZSkqTWF0aC5zaW4oZitJKmcpO3YucHVzaChsLngsbC55LGwueik7ci5zZXQobC54LGwueSxsLnopLm5vcm1hbGl6ZSgpO3cucHVzaChyLngsci55LHIueik7ei5wdXNoKEEsMS1JKTt5LnB1c2gocSsrKX1uLnB1c2goeSl9Zm9yKG09MDttPGM7bSsrKWZvcihrPTA7azxiO2srKylhPW5bbV1baysxXSxkPW5bbV1ba10sZT1uW20rMV1ba10sZz1uW20rMV1baysxXSwoMCE9PW18fDA8ZikmJnQucHVzaChhLGQsZyksKG0hPT1jLTF8fGg8TWF0aC5QSSkmJnQucHVzaChkLGUsZyk7dGhpcy5zZXRJbmRleCh0KTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIodiwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgQih3LDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsbmV3IEIoeiwyKSl9ZnVuY3Rpb24gV2MoYSxiLGMsZCxlLGYpe0wuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJSaW5nR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9XG57aW5uZXJSYWRpdXM6YSxvdXRlclJhZGl1czpiLHRoZXRhU2VnbWVudHM6YyxwaGlTZWdtZW50czpkLHRoZXRhU3RhcnQ6ZSx0aGV0YUxlbmd0aDpmfTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgYmMoYSxiLGMsZCxlLGYpKTt0aGlzLm1lcmdlVmVydGljZXMoKX1mdW5jdGlvbiBiYyhhLGIsYyxkLGUsZil7RS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlJpbmdCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17aW5uZXJSYWRpdXM6YSxvdXRlclJhZGl1czpiLHRoZXRhU2VnbWVudHM6YyxwaGlTZWdtZW50czpkLHRoZXRhU3RhcnQ6ZSx0aGV0YUxlbmd0aDpmfTthPWF8fC41O2I9Ynx8MTtlPXZvaWQgMCE9PWU/ZTowO2Y9dm9pZCAwIT09Zj9mOjIqTWF0aC5QSTtjPXZvaWQgMCE9PWM/TWF0aC5tYXgoMyxjKTo4O2Q9dm9pZCAwIT09ZD9NYXRoLm1heCgxLGQpOjE7dmFyIGc9W10saD1bXSxrPVtdLG09W10scT1hLG49KGItYSkvZCxsPW5ldyBwLHI9bmV3IEQsdCx2O2Zvcih0PVxuMDt0PD1kO3QrKyl7Zm9yKHY9MDt2PD1jO3YrKylhPWUrdi9jKmYsbC54PXEqTWF0aC5jb3MoYSksbC55PXEqTWF0aC5zaW4oYSksaC5wdXNoKGwueCxsLnksbC56KSxrLnB1c2goMCwwLDEpLHIueD0obC54L2IrMSkvMixyLnk9KGwueS9iKzEpLzIsbS5wdXNoKHIueCxyLnkpO3ErPW59Zm9yKHQ9MDt0PGQ7dCsrKWZvcihiPXQqKGMrMSksdj0wO3Y8Yzt2KyspYT12K2IsZT1hK2MrMSxmPWErYysyLHE9YSsxLGcucHVzaChhLGUscSksZy5wdXNoKGUsZixxKTt0aGlzLnNldEluZGV4KGcpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihoLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBCKGssMykpO3RoaXMuYWRkQXR0cmlidXRlKFwidXZcIixuZXcgQihtLDIpKX1mdW5jdGlvbiBYYyhhLGIsYyxkKXtMLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTGF0aGVHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cG9pbnRzOmEsc2VnbWVudHM6YixwaGlTdGFydDpjLHBoaUxlbmd0aDpkfTtcbnRoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBjYyhhLGIsYyxkKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gY2MoYSxiLGMsZCl7RS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkxhdGhlQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3BvaW50czphLHNlZ21lbnRzOmIscGhpU3RhcnQ6YyxwaGlMZW5ndGg6ZH07Yj1NYXRoLmZsb29yKGIpfHwxMjtjPWN8fDA7ZD1kfHwyKk1hdGguUEk7ZD1RLmNsYW1wKGQsMCwyKk1hdGguUEkpO3ZhciBlPVtdLGY9W10sZz1bXSxoPTEvYixrPW5ldyBwLG09bmV3IEQscTtmb3IocT0wO3E8PWI7cSsrKXt2YXIgbj1jK3EqaCpkO3ZhciBsPU1hdGguc2luKG4pLHI9TWF0aC5jb3Mobik7Zm9yKG49MDtuPD1hLmxlbmd0aC0xO24rKylrLng9YVtuXS54Kmwsay55PWFbbl0ueSxrLno9YVtuXS54KnIsZi5wdXNoKGsueCxrLnksay56KSxtLng9cS9iLG0ueT1uLyhhLmxlbmd0aC0xKSxnLnB1c2gobS54LG0ueSl9Zm9yKHE9MDtxPGI7cSsrKWZvcihuPVxuMDtuPGEubGVuZ3RoLTE7bisrKWM9bitxKmEubGVuZ3RoLGg9YythLmxlbmd0aCxrPWMrYS5sZW5ndGgrMSxtPWMrMSxlLnB1c2goYyxoLG0pLGUucHVzaChoLGssbSk7dGhpcy5zZXRJbmRleChlKTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIoZiwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBCKGcsMikpO3RoaXMuY29tcHV0ZVZlcnRleE5vcm1hbHMoKTtpZihkPT09MipNYXRoLlBJKWZvcihkPXRoaXMuYXR0cmlidXRlcy5ub3JtYWwuYXJyYXksZT1uZXcgcCxmPW5ldyBwLGc9bmV3IHAsYz1iKmEubGVuZ3RoKjMsbj1xPTA7cTxhLmxlbmd0aDtxKyssbis9MyllLng9ZFtuKzBdLGUueT1kW24rMV0sZS56PWRbbisyXSxmLng9ZFtjK24rMF0sZi55PWRbYytuKzFdLGYuej1kW2MrbisyXSxnLmFkZFZlY3RvcnMoZSxmKS5ub3JtYWxpemUoKSxkW24rMF09ZFtjK24rMF09Zy54LGRbbisxXT1kW2MrbisxXT1nLnksZFtuKzJdPWRbYytuKzJdPWcuen1mdW5jdGlvbiB4YihhLFxuYil7TC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNoYXBlR2VvbWV0cnlcIjtcIm9iamVjdFwiPT09dHlwZW9mIGImJihjb25zb2xlLndhcm4oXCJUSFJFRS5TaGFwZUdlb21ldHJ5OiBPcHRpb25zIHBhcmFtZXRlciBoYXMgYmVlbiByZW1vdmVkLlwiKSxiPWIuY3VydmVTZWdtZW50cyk7dGhpcy5wYXJhbWV0ZXJzPXtzaGFwZXM6YSxjdXJ2ZVNlZ21lbnRzOmJ9O3RoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyB5YihhLGIpKTt0aGlzLm1lcmdlVmVydGljZXMoKX1mdW5jdGlvbiB5YihhLGIpe2Z1bmN0aW9uIGMoYSl7dmFyIGMsaD1lLmxlbmd0aC8zO2E9YS5leHRyYWN0UG9pbnRzKGIpO3ZhciBtPWEuc2hhcGUscT1hLmhvbGVzO2lmKCExPT09JGEuaXNDbG9ja1dpc2UobSkpZm9yKG09bS5yZXZlcnNlKCksYT0wLGM9cS5sZW5ndGg7YTxjO2ErKyl7dmFyIGw9cVthXTshMD09PSRhLmlzQ2xvY2tXaXNlKGwpJiYocVthXT1sLnJldmVyc2UoKSl9dmFyIHA9JGEudHJpYW5ndWxhdGVTaGFwZShtLFxucSk7YT0wO2ZvcihjPXEubGVuZ3RoO2E8YzthKyspbD1xW2FdLG09bS5jb25jYXQobCk7YT0wO2ZvcihjPW0ubGVuZ3RoO2E8YzthKyspbD1tW2FdLGUucHVzaChsLngsbC55LDApLGYucHVzaCgwLDAsMSksZy5wdXNoKGwueCxsLnkpO2E9MDtmb3IoYz1wLmxlbmd0aDthPGM7YSsrKW09cFthXSxkLnB1c2gobVswXStoLG1bMV0raCxtWzJdK2gpLGsrPTN9RS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNoYXBlQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3NoYXBlczphLGN1cnZlU2VnbWVudHM6Yn07Yj1ifHwxMjt2YXIgZD1bXSxlPVtdLGY9W10sZz1bXSxoPTAsaz0wO2lmKCExPT09QXJyYXkuaXNBcnJheShhKSljKGEpO2Vsc2UgZm9yKHZhciBtPTA7bTxhLmxlbmd0aDttKyspYyhhW21dKSx0aGlzLmFkZEdyb3VwKGgsayxtKSxoKz1rLGs9MDt0aGlzLnNldEluZGV4KGQpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihlLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLFxubmV3IEIoZiwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBCKGcsMikpfWZ1bmN0aW9uIGZmKGEsYil7Yi5zaGFwZXM9W107aWYoQXJyYXkuaXNBcnJheShhKSlmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspYi5zaGFwZXMucHVzaChhW2NdLnV1aWQpO2Vsc2UgYi5zaGFwZXMucHVzaChhLnV1aWQpO3JldHVybiBifWZ1bmN0aW9uIGRjKGEsYil7RS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkVkZ2VzR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3RocmVzaG9sZEFuZ2xlOmJ9O3ZhciBjPVtdO2I9TWF0aC5jb3MoUS5ERUcyUkFEKih2b2lkIDAhPT1iP2I6MSkpO3ZhciBkPVswLDBdLGU9e30sZj1bXCJhXCIsXCJiXCIsXCJjXCJdO2lmKGEuaXNCdWZmZXJHZW9tZXRyeSl7dmFyIGc9bmV3IEw7Zy5mcm9tQnVmZmVyR2VvbWV0cnkoYSl9ZWxzZSBnPWEuY2xvbmUoKTtnLm1lcmdlVmVydGljZXMoKTtnLmNvbXB1dGVGYWNlTm9ybWFscygpO2E9Zy52ZXJ0aWNlcztnPWcuZmFjZXM7Zm9yKHZhciBoPVxuMCxrPWcubGVuZ3RoO2g8aztoKyspZm9yKHZhciBtPWdbaF0scT0wOzM+cTtxKyspe3ZhciBuPW1bZltxXV07dmFyIGw9bVtmWyhxKzEpJTNdXTtkWzBdPU1hdGgubWluKG4sbCk7ZFsxXT1NYXRoLm1heChuLGwpO249ZFswXStcIixcIitkWzFdO3ZvaWQgMD09PWVbbl0/ZVtuXT17aW5kZXgxOmRbMF0saW5kZXgyOmRbMV0sZmFjZTE6aCxmYWNlMjp2b2lkIDB9OmVbbl0uZmFjZTI9aH1mb3IobiBpbiBlKWlmKGQ9ZVtuXSx2b2lkIDA9PT1kLmZhY2UyfHxnW2QuZmFjZTFdLm5vcm1hbC5kb3QoZ1tkLmZhY2UyXS5ub3JtYWwpPD1iKWY9YVtkLmluZGV4MV0sYy5wdXNoKGYueCxmLnksZi56KSxmPWFbZC5pbmRleDJdLGMucHVzaChmLngsZi55LGYueik7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKGMsMykpfWZ1bmN0aW9uIHpiKGEsYixjLGQsZSxmLGcsaCl7TC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkN5bGluZGVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1c1RvcDphLFxucmFkaXVzQm90dG9tOmIsaGVpZ2h0OmMscmFkaWFsU2VnbWVudHM6ZCxoZWlnaHRTZWdtZW50czplLG9wZW5FbmRlZDpmLHRoZXRhU3RhcnQ6Zyx0aGV0YUxlbmd0aDpofTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgYWIoYSxiLGMsZCxlLGYsZyxoKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gYWIoYSxiLGMsZCxlLGYsZyxoKXtmdW5jdGlvbiBrKGMpe3ZhciBlLGY9bmV3IEQsaz1uZXcgcCx1PTAsdj0hMD09PWM/YTpiLHk9ITA9PT1jPzE6LTE7dmFyIHg9dDtmb3IoZT0xO2U8PWQ7ZSsrKW4ucHVzaCgwLHcqeSwwKSxsLnB1c2goMCx5LDApLHIucHVzaCguNSwuNSksdCsrO3ZhciBCPXQ7Zm9yKGU9MDtlPD1kO2UrKyl7dmFyIEM9ZS9kKmgrZyxFPU1hdGguY29zKEMpLEM9TWF0aC5zaW4oQyk7ay54PXYqQztrLnk9dyp5O2suej12KkU7bi5wdXNoKGsueCxrLnksay56KTtsLnB1c2goMCx5LDApO2YueD0uNSpFKy41O2YueT0uNSpDKnkrLjU7ci5wdXNoKGYueCxmLnkpO1xudCsrfWZvcihlPTA7ZTxkO2UrKylmPXgrZSxrPUIrZSwhMD09PWM/cS5wdXNoKGssaysxLGYpOnEucHVzaChrKzEsayxmKSx1Kz0zO20uYWRkR3JvdXAoeix1LCEwPT09Yz8xOjIpO3orPXV9RS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkN5bGluZGVyQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1c1RvcDphLHJhZGl1c0JvdHRvbTpiLGhlaWdodDpjLHJhZGlhbFNlZ21lbnRzOmQsaGVpZ2h0U2VnbWVudHM6ZSxvcGVuRW5kZWQ6Zix0aGV0YVN0YXJ0OmcsdGhldGFMZW5ndGg6aH07dmFyIG09dGhpczthPXZvaWQgMCE9PWE/YToxO2I9dm9pZCAwIT09Yj9iOjE7Yz1jfHwxO2Q9TWF0aC5mbG9vcihkKXx8ODtlPU1hdGguZmxvb3IoZSl8fDE7Zj12b2lkIDAhPT1mP2Y6ITE7Zz12b2lkIDAhPT1nP2c6MDtoPXZvaWQgMCE9PWg/aDoyKk1hdGguUEk7dmFyIHE9W10sbj1bXSxsPVtdLHI9W10sdD0wLHY9W10sdz1jLzIsej0wOyhmdW5jdGlvbigpe3ZhciBmLGssdT1uZXcgcCxcbko9bmV3IHAseD0wLEI9KGItYSkvYztmb3Ioaz0wO2s8PWU7aysrKXt2YXIgRD1bXSxDPWsvZSxFPUMqKGItYSkrYTtmb3IoZj0wO2Y8PWQ7ZisrKXt2YXIgSD1mL2QsSz1IKmgrZyxTPU1hdGguc2luKEspLEs9TWF0aC5jb3MoSyk7Si54PUUqUztKLnk9LUMqYyt3O0ouej1FKks7bi5wdXNoKEoueCxKLnksSi56KTt1LnNldChTLEIsSykubm9ybWFsaXplKCk7bC5wdXNoKHUueCx1LnksdS56KTtyLnB1c2goSCwxLUMpO0QucHVzaCh0KyspfXYucHVzaChEKX1mb3IoZj0wO2Y8ZDtmKyspZm9yKGs9MDtrPGU7aysrKXU9dltrKzFdW2ZdLEo9dltrKzFdW2YrMV0sQj12W2tdW2YrMV0scS5wdXNoKHZba11bZl0sdSxCKSxxLnB1c2godSxKLEIpLHgrPTY7bS5hZGRHcm91cCh6LHgsMCk7eis9eH0pKCk7ITE9PT1mJiYoMDxhJiZrKCEwKSwwPGImJmsoITEpKTt0aGlzLnNldEluZGV4KHEpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihuLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLFxubmV3IEIobCwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBCKHIsMikpfWZ1bmN0aW9uIFljKGEsYixjLGQsZSxmLGcpe3piLmNhbGwodGhpcywwLGEsYixjLGQsZSxmLGcpO3RoaXMudHlwZT1cIkNvbmVHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsaGVpZ2h0OmIscmFkaWFsU2VnbWVudHM6YyxoZWlnaHRTZWdtZW50czpkLG9wZW5FbmRlZDplLHRoZXRhU3RhcnQ6Zix0aGV0YUxlbmd0aDpnfX1mdW5jdGlvbiBaYyhhLGIsYyxkLGUsZixnKXthYi5jYWxsKHRoaXMsMCxhLGIsYyxkLGUsZixnKTt0aGlzLnR5cGU9XCJDb25lQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLGhlaWdodDpiLHJhZGlhbFNlZ21lbnRzOmMsaGVpZ2h0U2VnbWVudHM6ZCxvcGVuRW5kZWQ6ZSx0aGV0YVN0YXJ0OmYsdGhldGFMZW5ndGg6Z319ZnVuY3Rpb24gJGMoYSxiLGMsZCl7TC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkNpcmNsZUdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPVxue3JhZGl1czphLHNlZ21lbnRzOmIsdGhldGFTdGFydDpjLHRoZXRhTGVuZ3RoOmR9O3RoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBlYyhhLGIsYyxkKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gZWMoYSxiLGMsZCl7RS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkNpcmNsZUJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSxzZWdtZW50czpiLHRoZXRhU3RhcnQ6Yyx0aGV0YUxlbmd0aDpkfTthPWF8fDE7Yj12b2lkIDAhPT1iP01hdGgubWF4KDMsYik6ODtjPXZvaWQgMCE9PWM/YzowO2Q9dm9pZCAwIT09ZD9kOjIqTWF0aC5QSTt2YXIgZT1bXSxmPVtdLGc9W10saD1bXSxrLG09bmV3IHAscT1uZXcgRDtmLnB1c2goMCwwLDApO2cucHVzaCgwLDAsMSk7aC5wdXNoKC41LC41KTt2YXIgbj0wO2ZvcihrPTM7bjw9YjtuKyssays9Myl7dmFyIGw9YytuL2IqZDttLng9YSpNYXRoLmNvcyhsKTttLnk9YSpNYXRoLnNpbihsKTtmLnB1c2gobS54LG0ueSxcbm0ueik7Zy5wdXNoKDAsMCwxKTtxLng9KGZba10vYSsxKS8yO3EueT0oZltrKzFdL2ErMSkvMjtoLnB1c2gocS54LHEueSl9Zm9yKGs9MTtrPD1iO2srKyllLnB1c2goayxrKzEsMCk7dGhpcy5zZXRJbmRleChlKTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIoZiwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgQihnLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsbmV3IEIoaCwyKSl9ZnVuY3Rpb24gZmMoYSl7UC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNoYWRvd01hdGVyaWFsXCI7dGhpcy5jb2xvcj1uZXcgSCgwKTt0aGlzLm9wYWNpdHk9MTt0aGlzLnRyYW5zcGFyZW50PXRoaXMubGlnaHRzPSEwO3RoaXMuc2V0VmFsdWVzKGEpfWZ1bmN0aW9uIGdjKGEpe0ZhLmNhbGwodGhpcyxhKTt0aGlzLnR5cGU9XCJSYXdTaGFkZXJNYXRlcmlhbFwifWZ1bmN0aW9uIFVhKGEpe1AuY2FsbCh0aGlzKTt0aGlzLmRlZmluZXM9e1NUQU5EQVJEOlwiXCJ9O3RoaXMudHlwZT1cblwiTWVzaFN0YW5kYXJkTWF0ZXJpYWxcIjt0aGlzLmNvbG9yPW5ldyBIKDE2Nzc3MjE1KTt0aGlzLm1ldGFsbmVzcz10aGlzLnJvdWdobmVzcz0uNTt0aGlzLmxpZ2h0TWFwPXRoaXMubWFwPW51bGw7dGhpcy5saWdodE1hcEludGVuc2l0eT0xO3RoaXMuYW9NYXA9bnVsbDt0aGlzLmFvTWFwSW50ZW5zaXR5PTE7dGhpcy5lbWlzc2l2ZT1uZXcgSCgwKTt0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PTE7dGhpcy5idW1wTWFwPXRoaXMuZW1pc3NpdmVNYXA9bnVsbDt0aGlzLmJ1bXBTY2FsZT0xO3RoaXMubm9ybWFsTWFwPW51bGw7dGhpcy5ub3JtYWxTY2FsZT1uZXcgRCgxLDEpO3RoaXMuZGlzcGxhY2VtZW50TWFwPW51bGw7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT0xO3RoaXMuZGlzcGxhY2VtZW50Qmlhcz0wO3RoaXMuZW52TWFwPXRoaXMuYWxwaGFNYXA9dGhpcy5tZXRhbG5lc3NNYXA9dGhpcy5yb3VnaG5lc3NNYXA9bnVsbDt0aGlzLmVudk1hcEludGVuc2l0eT0xO3RoaXMucmVmcmFjdGlvblJhdGlvPVxuLjk4O3RoaXMud2lyZWZyYW1lPSExO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy53aXJlZnJhbWVMaW5lam9pbj10aGlzLndpcmVmcmFtZUxpbmVjYXA9XCJyb3VuZFwiO3RoaXMubW9ycGhOb3JtYWxzPXRoaXMubW9ycGhUYXJnZXRzPXRoaXMuc2tpbm5pbmc9ITE7dGhpcy5zZXRWYWx1ZXMoYSl9ZnVuY3Rpb24gQWIoYSl7VWEuY2FsbCh0aGlzKTt0aGlzLmRlZmluZXM9e1BIWVNJQ0FMOlwiXCJ9O3RoaXMudHlwZT1cIk1lc2hQaHlzaWNhbE1hdGVyaWFsXCI7dGhpcy5yZWZsZWN0aXZpdHk9LjU7dGhpcy5jbGVhckNvYXRSb3VnaG5lc3M9dGhpcy5jbGVhckNvYXQ9MDt0aGlzLnNldFZhbHVlcyhhKX1mdW5jdGlvbiBNYShhKXtQLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTWVzaFBob25nTWF0ZXJpYWxcIjt0aGlzLmNvbG9yPW5ldyBIKDE2Nzc3MjE1KTt0aGlzLnNwZWN1bGFyPW5ldyBIKDExMTg0ODEpO3RoaXMuc2hpbmluZXNzPTMwO3RoaXMubGlnaHRNYXA9dGhpcy5tYXA9bnVsbDtcbnRoaXMubGlnaHRNYXBJbnRlbnNpdHk9MTt0aGlzLmFvTWFwPW51bGw7dGhpcy5hb01hcEludGVuc2l0eT0xO3RoaXMuZW1pc3NpdmU9bmV3IEgoMCk7dGhpcy5lbWlzc2l2ZUludGVuc2l0eT0xO3RoaXMuYnVtcE1hcD10aGlzLmVtaXNzaXZlTWFwPW51bGw7dGhpcy5idW1wU2NhbGU9MTt0aGlzLm5vcm1hbE1hcD1udWxsO3RoaXMubm9ybWFsU2NhbGU9bmV3IEQoMSwxKTt0aGlzLmRpc3BsYWNlbWVudE1hcD1udWxsO3RoaXMuZGlzcGxhY2VtZW50U2NhbGU9MTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9MDt0aGlzLmVudk1hcD10aGlzLmFscGhhTWFwPXRoaXMuc3BlY3VsYXJNYXA9bnVsbDt0aGlzLmNvbWJpbmU9MDt0aGlzLnJlZmxlY3Rpdml0eT0xO3RoaXMucmVmcmFjdGlvblJhdGlvPS45ODt0aGlzLndpcmVmcmFtZT0hMTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMud2lyZWZyYW1lTGluZWpvaW49dGhpcy53aXJlZnJhbWVMaW5lY2FwPVwicm91bmRcIjt0aGlzLm1vcnBoTm9ybWFscz1cbnRoaXMubW9ycGhUYXJnZXRzPXRoaXMuc2tpbm5pbmc9ITE7dGhpcy5zZXRWYWx1ZXMoYSl9ZnVuY3Rpb24gQmIoYSl7TWEuY2FsbCh0aGlzKTt0aGlzLmRlZmluZXM9e1RPT046XCJcIn07dGhpcy50eXBlPVwiTWVzaFRvb25NYXRlcmlhbFwiO3RoaXMuZ3JhZGllbnRNYXA9bnVsbDt0aGlzLnNldFZhbHVlcyhhKX1mdW5jdGlvbiBDYihhKXtQLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTWVzaE5vcm1hbE1hdGVyaWFsXCI7dGhpcy5idW1wTWFwPW51bGw7dGhpcy5idW1wU2NhbGU9MTt0aGlzLm5vcm1hbE1hcD1udWxsO3RoaXMubm9ybWFsU2NhbGU9bmV3IEQoMSwxKTt0aGlzLmRpc3BsYWNlbWVudE1hcD1udWxsO3RoaXMuZGlzcGxhY2VtZW50U2NhbGU9MTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9MDt0aGlzLndpcmVmcmFtZT0hMTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMubW9ycGhOb3JtYWxzPXRoaXMubW9ycGhUYXJnZXRzPXRoaXMuc2tpbm5pbmc9dGhpcy5saWdodHM9dGhpcy5mb2c9XG4hMTt0aGlzLnNldFZhbHVlcyhhKX1mdW5jdGlvbiBEYihhKXtQLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTWVzaExhbWJlcnRNYXRlcmlhbFwiO3RoaXMuY29sb3I9bmV3IEgoMTY3NzcyMTUpO3RoaXMubGlnaHRNYXA9dGhpcy5tYXA9bnVsbDt0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PTE7dGhpcy5hb01hcD1udWxsO3RoaXMuYW9NYXBJbnRlbnNpdHk9MTt0aGlzLmVtaXNzaXZlPW5ldyBIKDApO3RoaXMuZW1pc3NpdmVJbnRlbnNpdHk9MTt0aGlzLmVudk1hcD10aGlzLmFscGhhTWFwPXRoaXMuc3BlY3VsYXJNYXA9dGhpcy5lbWlzc2l2ZU1hcD1udWxsO3RoaXMuY29tYmluZT0wO3RoaXMucmVmbGVjdGl2aXR5PTE7dGhpcy5yZWZyYWN0aW9uUmF0aW89Ljk4O3RoaXMud2lyZWZyYW1lPSExO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy53aXJlZnJhbWVMaW5lam9pbj10aGlzLndpcmVmcmFtZUxpbmVjYXA9XCJyb3VuZFwiO3RoaXMubW9ycGhOb3JtYWxzPXRoaXMubW9ycGhUYXJnZXRzPVxudGhpcy5za2lubmluZz0hMTt0aGlzLnNldFZhbHVlcyhhKX1mdW5jdGlvbiBFYihhKXtXLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTGluZURhc2hlZE1hdGVyaWFsXCI7dGhpcy5zY2FsZT0xO3RoaXMuZGFzaFNpemU9Mzt0aGlzLmdhcFNpemU9MTt0aGlzLnNldFZhbHVlcyhhKX1mdW5jdGlvbiBoZShhLGIsYyl7dmFyIGQ9dGhpcyxlPSExLGY9MCxnPTAsaD12b2lkIDA7dGhpcy5vblN0YXJ0PXZvaWQgMDt0aGlzLm9uTG9hZD1hO3RoaXMub25Qcm9ncmVzcz1iO3RoaXMub25FcnJvcj1jO3RoaXMuaXRlbVN0YXJ0PWZ1bmN0aW9uKGEpe2crKztpZighMT09PWUmJnZvaWQgMCE9PWQub25TdGFydClkLm9uU3RhcnQoYSxmLGcpO2U9ITB9O3RoaXMuaXRlbUVuZD1mdW5jdGlvbihhKXtmKys7aWYodm9pZCAwIT09ZC5vblByb2dyZXNzKWQub25Qcm9ncmVzcyhhLGYsZyk7aWYoZj09PWcmJihlPSExLHZvaWQgMCE9PWQub25Mb2FkKSlkLm9uTG9hZCgpfTt0aGlzLml0ZW1FcnJvcj1mdW5jdGlvbihhKXtpZih2b2lkIDAhPT1cbmQub25FcnJvcilkLm9uRXJyb3IoYSl9O3RoaXMucmVzb2x2ZVVSTD1mdW5jdGlvbihhKXtyZXR1cm4gaD9oKGEpOmF9O3RoaXMuc2V0VVJMTW9kaWZpZXI9ZnVuY3Rpb24oYSl7aD1hO3JldHVybiB0aGlzfX1mdW5jdGlvbiBOYShhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOnhhfWZ1bmN0aW9uIGdmKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6eGE7dGhpcy5fcGFyc2VyPW51bGx9ZnVuY3Rpb24gaWUoYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTp4YTt0aGlzLl9wYXJzZXI9bnVsbH1mdW5jdGlvbiBhZChhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOnhhfWZ1bmN0aW9uIGplKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6eGF9ZnVuY3Rpb24gQWQoYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTp4YX1mdW5jdGlvbiBDKCl7dGhpcy50eXBlPVwiQ3VydmVcIjt0aGlzLmFyY0xlbmd0aERpdmlzaW9ucz0yMDB9ZnVuY3Rpb24gQmEoYSxiLGMsZCxlLGYsXG5nLGgpe0MuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJFbGxpcHNlQ3VydmVcIjt0aGlzLmFYPWF8fDA7dGhpcy5hWT1ifHwwO3RoaXMueFJhZGl1cz1jfHwxO3RoaXMueVJhZGl1cz1kfHwxO3RoaXMuYVN0YXJ0QW5nbGU9ZXx8MDt0aGlzLmFFbmRBbmdsZT1mfHwyKk1hdGguUEk7dGhpcy5hQ2xvY2t3aXNlPWd8fCExO3RoaXMuYVJvdGF0aW9uPWh8fDB9ZnVuY3Rpb24gaGMoYSxiLGMsZCxlLGYpe0JhLmNhbGwodGhpcyxhLGIsYyxjLGQsZSxmKTt0aGlzLnR5cGU9XCJBcmNDdXJ2ZVwifWZ1bmN0aW9uIGtlKCl7dmFyIGE9MCxiPTAsYz0wLGQ9MDtyZXR1cm57aW5pdENhdG11bGxSb206ZnVuY3Rpb24oZSxmLGcsaCxrKXtlPWsqKGctZSk7aD1rKihoLWYpO2E9ZjtiPWU7Yz0tMypmKzMqZy0yKmUtaDtkPTIqZi0yKmcrZStofSxpbml0Tm9udW5pZm9ybUNhdG11bGxSb206ZnVuY3Rpb24oZSxmLGcsaCxrLG0scSl7ZT0oKGYtZSkvay0oZy1lKS8oayttKSsoZy1mKS9tKSptO2g9KChnLWYpL20tXG4oaC1mKS8obStxKSsoaC1nKS9xKSptO2E9ZjtiPWU7Yz0tMypmKzMqZy0yKmUtaDtkPTIqZi0yKmcrZStofSxjYWxjOmZ1bmN0aW9uKGUpe3ZhciBmPWUqZTtyZXR1cm4gYStiKmUrYypmK2QqZiplfX19ZnVuY3Rpb24gY2EoYSxiLGMsZCl7Qy5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkNhdG11bGxSb21DdXJ2ZTNcIjt0aGlzLnBvaW50cz1hfHxbXTt0aGlzLmNsb3NlZD1ifHwhMTt0aGlzLmN1cnZlVHlwZT1jfHxcImNlbnRyaXBldGFsXCI7dGhpcy50ZW5zaW9uPWR8fC41fWZ1bmN0aW9uIGhmKGEsYixjLGQsZSl7Yj0uNSooZC1iKTtlPS41KihlLWMpO3ZhciBmPWEqYTtyZXR1cm4oMipjLTIqZCtiK2UpKmEqZisoLTMqYyszKmQtMipiLWUpKmYrYiphK2N9ZnVuY3Rpb24gYmQoYSxiLGMsZCl7dmFyIGU9MS1hO3JldHVybiBlKmUqYisyKigxLWEpKmEqYythKmEqZH1mdW5jdGlvbiBjZChhLGIsYyxkLGUpe3ZhciBmPTEtYSxnPTEtYTtyZXR1cm4gZipmKmYqYiszKmcqZyphKmMrMyooMS1hKSpcbmEqYSpkK2EqYSphKmV9ZnVuY3Rpb24gT2EoYSxiLGMsZCl7Qy5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkN1YmljQmV6aWVyQ3VydmVcIjt0aGlzLnYwPWF8fG5ldyBEO3RoaXMudjE9Ynx8bmV3IEQ7dGhpcy52Mj1jfHxuZXcgRDt0aGlzLnYzPWR8fG5ldyBEfWZ1bmN0aW9uIFZhKGEsYixjLGQpe0MuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJDdWJpY0JlemllckN1cnZlM1wiO3RoaXMudjA9YXx8bmV3IHA7dGhpcy52MT1ifHxuZXcgcDt0aGlzLnYyPWN8fG5ldyBwO3RoaXMudjM9ZHx8bmV3IHB9ZnVuY3Rpb24geWEoYSxiKXtDLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTGluZUN1cnZlXCI7dGhpcy52MT1hfHxuZXcgRDt0aGlzLnYyPWJ8fG5ldyBEfWZ1bmN0aW9uIFBhKGEsYil7Qy5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkxpbmVDdXJ2ZTNcIjt0aGlzLnYxPWF8fG5ldyBwO3RoaXMudjI9Ynx8bmV3IHB9ZnVuY3Rpb24gUWEoYSxiLGMpe0MuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJRdWFkcmF0aWNCZXppZXJDdXJ2ZVwiO1xudGhpcy52MD1hfHxuZXcgRDt0aGlzLnYxPWJ8fG5ldyBEO3RoaXMudjI9Y3x8bmV3IER9ZnVuY3Rpb24gV2EoYSxiLGMpe0MuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJRdWFkcmF0aWNCZXppZXJDdXJ2ZTNcIjt0aGlzLnYwPWF8fG5ldyBwO3RoaXMudjE9Ynx8bmV3IHA7dGhpcy52Mj1jfHxuZXcgcH1mdW5jdGlvbiBSYShhKXtDLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiU3BsaW5lQ3VydmVcIjt0aGlzLnBvaW50cz1hfHxbXX1mdW5jdGlvbiBiYigpe0MuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJDdXJ2ZVBhdGhcIjt0aGlzLmN1cnZlcz1bXTt0aGlzLmF1dG9DbG9zZT0hMX1mdW5jdGlvbiBTYShhKXtiYi5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlBhdGhcIjt0aGlzLmN1cnJlbnRQb2ludD1uZXcgRDthJiZ0aGlzLnNldEZyb21Qb2ludHMoYSl9ZnVuY3Rpb24gamIoYSl7U2EuY2FsbCh0aGlzLGEpO3RoaXMudXVpZD1RLmdlbmVyYXRlVVVJRCgpO3RoaXMudHlwZT1cIlNoYXBlXCI7dGhpcy5ob2xlcz1cbltdfWZ1bmN0aW9uIGRhKGEsYil7eC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkxpZ2h0XCI7dGhpcy5jb2xvcj1uZXcgSChhKTt0aGlzLmludGVuc2l0eT12b2lkIDAhPT1iP2I6MTt0aGlzLnJlY2VpdmVTaGFkb3c9dm9pZCAwfWZ1bmN0aW9uIEJkKGEsYixjKXtkYS5jYWxsKHRoaXMsYSxjKTt0aGlzLnR5cGU9XCJIZW1pc3BoZXJlTGlnaHRcIjt0aGlzLmNhc3RTaGFkb3c9dm9pZCAwO3RoaXMucG9zaXRpb24uY29weSh4LkRlZmF1bHRVcCk7dGhpcy51cGRhdGVNYXRyaXgoKTt0aGlzLmdyb3VuZENvbG9yPW5ldyBIKGIpfWZ1bmN0aW9uIEZiKGEpe3RoaXMuY2FtZXJhPWE7dGhpcy5iaWFzPTA7dGhpcy5yYWRpdXM9MTt0aGlzLm1hcFNpemU9bmV3IEQoNTEyLDUxMik7dGhpcy5tYXA9bnVsbDt0aGlzLm1hdHJpeD1uZXcgT31mdW5jdGlvbiBDZCgpe0ZiLmNhbGwodGhpcyxuZXcgYmEoNTAsMSwuNSw1MDApKX1mdW5jdGlvbiBEZChhLGIsYyxkLGUsZil7ZGEuY2FsbCh0aGlzLGEsYik7dGhpcy50eXBlPVxuXCJTcG90TGlnaHRcIjt0aGlzLnBvc2l0aW9uLmNvcHkoeC5EZWZhdWx0VXApO3RoaXMudXBkYXRlTWF0cml4KCk7dGhpcy50YXJnZXQ9bmV3IHg7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJwb3dlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnRlbnNpdHkqTWF0aC5QSX0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMuaW50ZW5zaXR5PWEvTWF0aC5QSX19KTt0aGlzLmRpc3RhbmNlPXZvaWQgMCE9PWM/YzowO3RoaXMuYW5nbGU9dm9pZCAwIT09ZD9kOk1hdGguUEkvMzt0aGlzLnBlbnVtYnJhPXZvaWQgMCE9PWU/ZTowO3RoaXMuZGVjYXk9dm9pZCAwIT09Zj9mOjE7dGhpcy5zaGFkb3c9bmV3IENkfWZ1bmN0aW9uIEVkKGEsYixjLGQpe2RhLmNhbGwodGhpcyxhLGIpO3RoaXMudHlwZT1cIlBvaW50TGlnaHRcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInBvd2VyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiA0KnRoaXMuaW50ZW5zaXR5Kk1hdGguUEl9LHNldDpmdW5jdGlvbihhKXt0aGlzLmludGVuc2l0eT1cbmEvKDQqTWF0aC5QSSl9fSk7dGhpcy5kaXN0YW5jZT12b2lkIDAhPT1jP2M6MDt0aGlzLmRlY2F5PXZvaWQgMCE9PWQ/ZDoxO3RoaXMuc2hhZG93PW5ldyBGYihuZXcgYmEoOTAsMSwuNSw1MDApKX1mdW5jdGlvbiBGZCgpe0ZiLmNhbGwodGhpcyxuZXcgTGIoLTUsNSw1LC01LC41LDUwMCkpfWZ1bmN0aW9uIEdkKGEsYil7ZGEuY2FsbCh0aGlzLGEsYik7dGhpcy50eXBlPVwiRGlyZWN0aW9uYWxMaWdodFwiO3RoaXMucG9zaXRpb24uY29weSh4LkRlZmF1bHRVcCk7dGhpcy51cGRhdGVNYXRyaXgoKTt0aGlzLnRhcmdldD1uZXcgeDt0aGlzLnNoYWRvdz1uZXcgRmR9ZnVuY3Rpb24gSGQoYSxiKXtkYS5jYWxsKHRoaXMsYSxiKTt0aGlzLnR5cGU9XCJBbWJpZW50TGlnaHRcIjt0aGlzLmNhc3RTaGFkb3c9dm9pZCAwfWZ1bmN0aW9uIElkKGEsYixjLGQpe2RhLmNhbGwodGhpcyxhLGIpO3RoaXMudHlwZT1cIlJlY3RBcmVhTGlnaHRcIjt0aGlzLnBvc2l0aW9uLnNldCgwLDEsMCk7dGhpcy51cGRhdGVNYXRyaXgoKTtcbnRoaXMud2lkdGg9dm9pZCAwIT09Yz9jOjEwO3RoaXMuaGVpZ2h0PXZvaWQgMCE9PWQ/ZDoxMH1mdW5jdGlvbiBKZChhLGIsYyxkKXtULmNhbGwodGhpcyxhLGIsYyxkKX1mdW5jdGlvbiBLZChhLGIsYyl7VC5jYWxsKHRoaXMsYSxiLGMpfWZ1bmN0aW9uIHBhKGEsYixjLGQpe3RoaXMucGFyYW1ldGVyUG9zaXRpb25zPWE7dGhpcy5fY2FjaGVkSW5kZXg9MDt0aGlzLnJlc3VsdEJ1ZmZlcj12b2lkIDAhPT1kP2Q6bmV3IGIuY29uc3RydWN0b3IoYyk7dGhpcy5zYW1wbGVWYWx1ZXM9Yjt0aGlzLnZhbHVlU2l6ZT1jfWZ1bmN0aW9uIExkKGEsYixjLGQpe3BhLmNhbGwodGhpcyxhLGIsYyxkKX1mdW5jdGlvbiBkZChhLGIsYyxkKXtULmNhbGwodGhpcyxhLGIsYyxkKX1mdW5jdGlvbiBNZChhLGIsYyxkKXtULmNhbGwodGhpcyxhLGIsYyxkKX1mdW5jdGlvbiBpYyhhLGIsYyxkKXtULmNhbGwodGhpcyxhLGIsYyxkKX1mdW5jdGlvbiBOZChhLGIsYyxkKXtwYS5jYWxsKHRoaXMsYSxiLGMsZCk7XG50aGlzLl9vZmZzZXROZXh0PXRoaXMuX3dlaWdodE5leHQ9dGhpcy5fb2Zmc2V0UHJldj10aGlzLl93ZWlnaHRQcmV2PS0wfWZ1bmN0aW9uIGVkKGEsYixjLGQpe3BhLmNhbGwodGhpcyxhLGIsYyxkKX1mdW5jdGlvbiBPZChhLGIsYyxkKXtwYS5jYWxsKHRoaXMsYSxiLGMsZCl9ZnVuY3Rpb24gVChhLGIsYyxkKXtpZih2b2lkIDA9PT1hKXRocm93IEVycm9yKFwiVEhSRUUuS2V5ZnJhbWVUcmFjazogdHJhY2sgbmFtZSBpcyB1bmRlZmluZWRcIik7aWYodm9pZCAwPT09Ynx8MD09PWIubGVuZ3RoKXRocm93IEVycm9yKFwiVEhSRUUuS2V5ZnJhbWVUcmFjazogbm8ga2V5ZnJhbWVzIGluIHRyYWNrIG5hbWVkIFwiK2EpO3RoaXMubmFtZT1hO3RoaXMudGltZXM9Z2EuY29udmVydEFycmF5KGIsdGhpcy5UaW1lQnVmZmVyVHlwZSk7dGhpcy52YWx1ZXM9Z2EuY29udmVydEFycmF5KGMsdGhpcy5WYWx1ZUJ1ZmZlclR5cGUpO3RoaXMuc2V0SW50ZXJwb2xhdGlvbihkfHx0aGlzLkRlZmF1bHRJbnRlcnBvbGF0aW9uKTtcbnRoaXMudmFsaWRhdGUoKTt0aGlzLm9wdGltaXplKCl9ZnVuY3Rpb24gamMoYSxiLGMsZCl7VC5jYWxsKHRoaXMsYSxiLGMsZCl9ZnVuY3Rpb24gQ2EoYSxiLGMpe3RoaXMubmFtZT1hO3RoaXMudHJhY2tzPWM7dGhpcy5kdXJhdGlvbj12b2lkIDAhPT1iP2I6LTE7dGhpcy51dWlkPVEuZ2VuZXJhdGVVVUlEKCk7MD50aGlzLmR1cmF0aW9uJiZ0aGlzLnJlc2V0RHVyYXRpb24oKTt0aGlzLm9wdGltaXplKCl9ZnVuY3Rpb24gUGQoYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTp4YTt0aGlzLnRleHR1cmVzPXt9fWZ1bmN0aW9uIGxlKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6eGF9ZnVuY3Rpb24ga2MoKXt0aGlzLm9uTG9hZFN0YXJ0PWZ1bmN0aW9uKCl7fTt0aGlzLm9uTG9hZFByb2dyZXNzPWZ1bmN0aW9uKCl7fTt0aGlzLm9uTG9hZENvbXBsZXRlPWZ1bmN0aW9uKCl7fX1mdW5jdGlvbiBtZShhKXtcImJvb2xlYW5cIj09PXR5cGVvZiBhJiYoY29uc29sZS53YXJuKFwiVEhSRUUuSlNPTkxvYWRlcjogc2hvd1N0YXR1cyBwYXJhbWV0ZXIgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIGNvbnN0cnVjdG9yLlwiKSxcbmE9dm9pZCAwKTt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOnhhO3RoaXMud2l0aENyZWRlbnRpYWxzPSExfWZ1bmN0aW9uIGpmKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6eGE7dGhpcy50ZXh0dXJlUGF0aD1cIlwifWZ1bmN0aW9uIG5lKGEpe1widW5kZWZpbmVkXCI9PT10eXBlb2YgY3JlYXRlSW1hZ2VCaXRtYXAmJmNvbnNvbGUud2FybihcIlRIUkVFLkltYWdlQml0bWFwTG9hZGVyOiBjcmVhdGVJbWFnZUJpdG1hcCgpIG5vdCBzdXBwb3J0ZWQuXCIpO1widW5kZWZpbmVkXCI9PT10eXBlb2YgZmV0Y2gmJmNvbnNvbGUud2FybihcIlRIUkVFLkltYWdlQml0bWFwTG9hZGVyOiBmZXRjaCgpIG5vdCBzdXBwb3J0ZWQuXCIpO3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6eGE7dGhpcy5vcHRpb25zPXZvaWQgMH1mdW5jdGlvbiBvZSgpe3RoaXMudHlwZT1cIlNoYXBlUGF0aFwiO3RoaXMuc3ViUGF0aHM9W107dGhpcy5jdXJyZW50UGF0aD1udWxsfWZ1bmN0aW9uIHBlKGEpe3RoaXMudHlwZT1cIkZvbnRcIjtcbnRoaXMuZGF0YT1hfWZ1bmN0aW9uIGtmKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6eGF9ZnVuY3Rpb24gcWUoYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTp4YX1mdW5jdGlvbiBsZigpe3RoaXMudHlwZT1cIlN0ZXJlb0NhbWVyYVwiO3RoaXMuYXNwZWN0PTE7dGhpcy5leWVTZXA9LjA2NDt0aGlzLmNhbWVyYUw9bmV3IGJhO3RoaXMuY2FtZXJhTC5sYXllcnMuZW5hYmxlKDEpO3RoaXMuY2FtZXJhTC5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMuY2FtZXJhUj1uZXcgYmE7dGhpcy5jYW1lcmFSLmxheWVycy5lbmFibGUoMik7dGhpcy5jYW1lcmFSLm1hdHJpeEF1dG9VcGRhdGU9ITF9ZnVuY3Rpb24gZmQoYSxiLGMpe3guY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJDdWJlQ2FtZXJhXCI7dmFyIGQ9bmV3IGJhKDkwLDEsYSxiKTtkLnVwLnNldCgwLC0xLDApO2QubG9va0F0KG5ldyBwKDEsMCwwKSk7dGhpcy5hZGQoZCk7dmFyIGU9bmV3IGJhKDkwLDEsYSxiKTtlLnVwLnNldCgwLC0xLFxuMCk7ZS5sb29rQXQobmV3IHAoLTEsMCwwKSk7dGhpcy5hZGQoZSk7dmFyIGY9bmV3IGJhKDkwLDEsYSxiKTtmLnVwLnNldCgwLDAsMSk7Zi5sb29rQXQobmV3IHAoMCwxLDApKTt0aGlzLmFkZChmKTt2YXIgZz1uZXcgYmEoOTAsMSxhLGIpO2cudXAuc2V0KDAsMCwtMSk7Zy5sb29rQXQobmV3IHAoMCwtMSwwKSk7dGhpcy5hZGQoZyk7dmFyIGg9bmV3IGJhKDkwLDEsYSxiKTtoLnVwLnNldCgwLC0xLDApO2gubG9va0F0KG5ldyBwKDAsMCwxKSk7dGhpcy5hZGQoaCk7dmFyIGs9bmV3IGJhKDkwLDEsYSxiKTtrLnVwLnNldCgwLC0xLDApO2subG9va0F0KG5ldyBwKDAsMCwtMSkpO3RoaXMuYWRkKGspO3RoaXMucmVuZGVyVGFyZ2V0PW5ldyBKYihjLGMse2Zvcm1hdDoxMDIyLG1hZ0ZpbHRlcjoxMDA2LG1pbkZpbHRlcjoxMDA2fSk7dGhpcy5yZW5kZXJUYXJnZXQudGV4dHVyZS5uYW1lPVwiQ3ViZUNhbWVyYVwiO3RoaXMudXBkYXRlPWZ1bmN0aW9uKGEsYil7bnVsbD09PXRoaXMucGFyZW50JiZcbnRoaXMudXBkYXRlTWF0cml4V29ybGQoKTt2YXIgYz10aGlzLnJlbmRlclRhcmdldCxtPWMudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM7Yy50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcz0hMTtjLmFjdGl2ZUN1YmVGYWNlPTA7YS5yZW5kZXIoYixkLGMpO2MuYWN0aXZlQ3ViZUZhY2U9MTthLnJlbmRlcihiLGUsYyk7Yy5hY3RpdmVDdWJlRmFjZT0yO2EucmVuZGVyKGIsZixjKTtjLmFjdGl2ZUN1YmVGYWNlPTM7YS5yZW5kZXIoYixnLGMpO2MuYWN0aXZlQ3ViZUZhY2U9NDthLnJlbmRlcihiLGgsYyk7Yy50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcz1tO2MuYWN0aXZlQ3ViZUZhY2U9NTthLnJlbmRlcihiLGssYyk7YS5zZXRSZW5kZXJUYXJnZXQobnVsbCl9O3RoaXMuY2xlYXI9ZnVuY3Rpb24oYSxiLGMsZCl7Zm9yKHZhciBlPXRoaXMucmVuZGVyVGFyZ2V0LGY9MDs2PmY7ZisrKWUuYWN0aXZlQ3ViZUZhY2U9ZixhLnNldFJlbmRlclRhcmdldChlKSxhLmNsZWFyKGIsYyxkKTthLnNldFJlbmRlclRhcmdldChudWxsKX19XG5mdW5jdGlvbiByZSgpe3guY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJBdWRpb0xpc3RlbmVyXCI7dGhpcy5jb250ZXh0PXNlLmdldENvbnRleHQoKTt0aGlzLmdhaW49dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKTt0aGlzLmdhaW4uY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pO3RoaXMuZmlsdGVyPW51bGx9ZnVuY3Rpb24gbGMoYSl7eC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkF1ZGlvXCI7dGhpcy5jb250ZXh0PWEuY29udGV4dDt0aGlzLmdhaW49dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKTt0aGlzLmdhaW4uY29ubmVjdChhLmdldElucHV0KCkpO3RoaXMuYXV0b3BsYXk9ITE7dGhpcy5idWZmZXI9bnVsbDt0aGlzLmxvb3A9ITE7dGhpcy5vZmZzZXQ9dGhpcy5zdGFydFRpbWU9MDt0aGlzLnBsYXliYWNrUmF0ZT0xO3RoaXMuaXNQbGF5aW5nPSExO3RoaXMuaGFzUGxheWJhY2tDb250cm9sPSEwO3RoaXMuc291cmNlVHlwZT1cImVtcHR5XCI7dGhpcy5maWx0ZXJzPVtdfWZ1bmN0aW9uIHRlKGEpe2xjLmNhbGwodGhpcyxcbmEpO3RoaXMucGFubmVyPXRoaXMuY29udGV4dC5jcmVhdGVQYW5uZXIoKTt0aGlzLnBhbm5lci5jb25uZWN0KHRoaXMuZ2Fpbil9ZnVuY3Rpb24gdWUoYSxiKXt0aGlzLmFuYWx5c2VyPWEuY29udGV4dC5jcmVhdGVBbmFseXNlcigpO3RoaXMuYW5hbHlzZXIuZmZ0U2l6ZT12b2lkIDAhPT1iP2I6MjA0ODt0aGlzLmRhdGE9bmV3IFVpbnQ4QXJyYXkodGhpcy5hbmFseXNlci5mcmVxdWVuY3lCaW5Db3VudCk7YS5nZXRPdXRwdXQoKS5jb25uZWN0KHRoaXMuYW5hbHlzZXIpfWZ1bmN0aW9uIHZlKGEsYixjKXt0aGlzLmJpbmRpbmc9YTt0aGlzLnZhbHVlU2l6ZT1jO2E9RmxvYXQ2NEFycmF5O3N3aXRjaChiKXtjYXNlIFwicXVhdGVybmlvblwiOmI9dGhpcy5fc2xlcnA7YnJlYWs7Y2FzZSBcInN0cmluZ1wiOmNhc2UgXCJib29sXCI6YT1BcnJheTtiPXRoaXMuX3NlbGVjdDticmVhaztkZWZhdWx0OmI9dGhpcy5fbGVycH10aGlzLmJ1ZmZlcj1uZXcgYSg0KmMpO3RoaXMuX21peEJ1ZmZlclJlZ2lvbj1cbmI7dGhpcy5yZWZlcmVuY2VDb3VudD10aGlzLnVzZUNvdW50PXRoaXMuY3VtdWxhdGl2ZVdlaWdodD0wfWZ1bmN0aW9uIG1mKGEsYixjKXtjPWN8fHFhLnBhcnNlVHJhY2tOYW1lKGIpO3RoaXMuX3RhcmdldEdyb3VwPWE7dGhpcy5fYmluZGluZ3M9YS5zdWJzY3JpYmVfKGIsYyl9ZnVuY3Rpb24gcWEoYSxiLGMpe3RoaXMucGF0aD1iO3RoaXMucGFyc2VkUGF0aD1jfHxxYS5wYXJzZVRyYWNrTmFtZShiKTt0aGlzLm5vZGU9cWEuZmluZE5vZGUoYSx0aGlzLnBhcnNlZFBhdGgubm9kZU5hbWUpfHxhO3RoaXMucm9vdE5vZGU9YX1mdW5jdGlvbiBuZigpe3RoaXMudXVpZD1RLmdlbmVyYXRlVVVJRCgpO3RoaXMuX29iamVjdHM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTt0aGlzLm5DYWNoZWRPYmplY3RzXz0wO3ZhciBhPXt9O3RoaXMuX2luZGljZXNCeVVVSUQ9YTtmb3IodmFyIGI9MCxjPWFyZ3VtZW50cy5sZW5ndGg7YiE9PWM7KytiKWFbYXJndW1lbnRzW2JdLnV1aWRdPVxuYjt0aGlzLl9wYXRocz1bXTt0aGlzLl9wYXJzZWRQYXRocz1bXTt0aGlzLl9iaW5kaW5ncz1bXTt0aGlzLl9iaW5kaW5nc0luZGljZXNCeVBhdGg9e307dmFyIGQ9dGhpczt0aGlzLnN0YXRzPXtvYmplY3RzOntnZXQgdG90YWwoKXtyZXR1cm4gZC5fb2JqZWN0cy5sZW5ndGh9LGdldCBpblVzZSgpe3JldHVybiB0aGlzLnRvdGFsLWQubkNhY2hlZE9iamVjdHNffX0sZ2V0IGJpbmRpbmdzUGVyT2JqZWN0KCl7cmV0dXJuIGQuX2JpbmRpbmdzLmxlbmd0aH19fWZ1bmN0aW9uIG9mKGEsYixjKXt0aGlzLl9taXhlcj1hO3RoaXMuX2NsaXA9Yjt0aGlzLl9sb2NhbFJvb3Q9Y3x8bnVsbDthPWIudHJhY2tzO2I9YS5sZW5ndGg7Yz1BcnJheShiKTtmb3IodmFyIGQ9e2VuZGluZ1N0YXJ0OjI0MDAsZW5kaW5nRW5kOjI0MDB9LGU9MDtlIT09YjsrK2Upe3ZhciBmPWFbZV0uY3JlYXRlSW50ZXJwb2xhbnQobnVsbCk7Y1tlXT1mO2Yuc2V0dGluZ3M9ZH10aGlzLl9pbnRlcnBvbGFudFNldHRpbmdzPVxuZDt0aGlzLl9pbnRlcnBvbGFudHM9Yzt0aGlzLl9wcm9wZXJ0eUJpbmRpbmdzPUFycmF5KGIpO3RoaXMuX3dlaWdodEludGVycG9sYW50PXRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50PXRoaXMuX2J5Q2xpcENhY2hlSW5kZXg9dGhpcy5fY2FjaGVJbmRleD1udWxsO3RoaXMubG9vcD0yMjAxO3RoaXMuX2xvb3BDb3VudD0tMTt0aGlzLl9zdGFydFRpbWU9bnVsbDt0aGlzLnRpbWU9MDt0aGlzLl9lZmZlY3RpdmVXZWlnaHQ9dGhpcy53ZWlnaHQ9dGhpcy5fZWZmZWN0aXZlVGltZVNjYWxlPXRoaXMudGltZVNjYWxlPTE7dGhpcy5yZXBldGl0aW9ucz1JbmZpbml0eTt0aGlzLnBhdXNlZD0hMTt0aGlzLmVuYWJsZWQ9ITA7dGhpcy5jbGFtcFdoZW5GaW5pc2hlZD0hMTt0aGlzLnplcm9TbG9wZUF0RW5kPXRoaXMuemVyb1Nsb3BlQXRTdGFydD0hMH1mdW5jdGlvbiB3ZShhKXt0aGlzLl9yb290PWE7dGhpcy5faW5pdE1lbW9yeU1hbmFnZXIoKTt0aGlzLnRpbWU9dGhpcy5fYWNjdUluZGV4PVxuMDt0aGlzLnRpbWVTY2FsZT0xfWZ1bmN0aW9uIFFkKGEsYil7XCJzdHJpbmdcIj09PXR5cGVvZiBhJiYoY29uc29sZS53YXJuKFwiVEhSRUUuVW5pZm9ybTogVHlwZSBwYXJhbWV0ZXIgaXMgbm8gbG9uZ2VyIG5lZWRlZC5cIiksYT1iKTt0aGlzLnZhbHVlPWF9ZnVuY3Rpb24geGUoKXtFLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnlcIjt0aGlzLm1heEluc3RhbmNlZENvdW50PXZvaWQgMH1mdW5jdGlvbiB5ZShhLGIsYyxkKXt0aGlzLnV1aWQ9US5nZW5lcmF0ZVVVSUQoKTt0aGlzLmRhdGE9YTt0aGlzLml0ZW1TaXplPWI7dGhpcy5vZmZzZXQ9Yzt0aGlzLm5vcm1hbGl6ZWQ9ITA9PT1kfWZ1bmN0aW9uIG1jKGEsYil7dGhpcy51dWlkPVEuZ2VuZXJhdGVVVUlEKCk7dGhpcy5hcnJheT1hO3RoaXMuc3RyaWRlPWI7dGhpcy5jb3VudD12b2lkIDAhPT1hP2EubGVuZ3RoL2I6MDt0aGlzLmR5bmFtaWM9ITE7dGhpcy51cGRhdGVSYW5nZT17b2Zmc2V0OjAsY291bnQ6LTF9O1xudGhpcy5vblVwbG9hZENhbGxiYWNrPWZ1bmN0aW9uKCl7fTt0aGlzLnZlcnNpb249MH1mdW5jdGlvbiB6ZShhLGIsYyl7bWMuY2FsbCh0aGlzLGEsYik7dGhpcy5tZXNoUGVyQXR0cmlidXRlPWN8fDF9ZnVuY3Rpb24gQWUoYSxiLGMpe00uY2FsbCh0aGlzLGEsYik7dGhpcy5tZXNoUGVyQXR0cmlidXRlPWN8fDF9ZnVuY3Rpb24gcGYoYSxiLGMsZCl7dGhpcy5yYXk9bmV3IHNiKGEsYik7dGhpcy5uZWFyPWN8fDA7dGhpcy5mYXI9ZHx8SW5maW5pdHk7dGhpcy5wYXJhbXM9e01lc2g6e30sTGluZTp7fSxMT0Q6e30sUG9pbnRzOnt0aHJlc2hvbGQ6MX0sU3ByaXRlOnt9fTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLnBhcmFtcyx7UG9pbnRDbG91ZDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuUmF5Y2FzdGVyOiBwYXJhbXMuUG9pbnRDbG91ZCBoYXMgYmVlbiByZW5hbWVkIHRvIHBhcmFtcy5Qb2ludHMuXCIpO3JldHVybiB0aGlzLlBvaW50c319fSl9ZnVuY3Rpb24gcWYoYSxcbmIpe3JldHVybiBhLmRpc3RhbmNlLWIuZGlzdGFuY2V9ZnVuY3Rpb24gQmUoYSxiLGMsZCl7aWYoITEhPT1hLnZpc2libGUmJihhLnJheWNhc3QoYixjKSwhMD09PWQpKXthPWEuY2hpbGRyZW47ZD0wO2Zvcih2YXIgZT1hLmxlbmd0aDtkPGU7ZCsrKUJlKGFbZF0sYixjLCEwKX19ZnVuY3Rpb24gcmYoYSl7dGhpcy5hdXRvU3RhcnQ9dm9pZCAwIT09YT9hOiEwO3RoaXMuZWxhcHNlZFRpbWU9dGhpcy5vbGRUaW1lPXRoaXMuc3RhcnRUaW1lPTA7dGhpcy5ydW5uaW5nPSExfWZ1bmN0aW9uIHNmKGEsYixjKXt0aGlzLnJhZGl1cz12b2lkIDAhPT1hP2E6MTt0aGlzLnBoaT12b2lkIDAhPT1iP2I6MDt0aGlzLnRoZXRhPXZvaWQgMCE9PWM/YzowO3JldHVybiB0aGlzfWZ1bmN0aW9uIHRmKGEsYixjKXt0aGlzLnJhZGl1cz12b2lkIDAhPT1hP2E6MTt0aGlzLnRoZXRhPXZvaWQgMCE9PWI/YjowO3RoaXMueT12b2lkIDAhPT1jP2M6MDtyZXR1cm4gdGhpc31mdW5jdGlvbiBnZChhKXt4LmNhbGwodGhpcyk7XG50aGlzLm1hdGVyaWFsPWE7dGhpcy5yZW5kZXI9ZnVuY3Rpb24oKXt9fWZ1bmN0aW9uIGhkKGEsYixjLGQpe3RoaXMub2JqZWN0PWE7dGhpcy5zaXplPXZvaWQgMCE9PWI/YjoxO2E9dm9pZCAwIT09Yz9jOjE2NzExNjgwO2Q9dm9pZCAwIT09ZD9kOjE7Yj0wOyhjPXRoaXMub2JqZWN0Lmdlb21ldHJ5KSYmYy5pc0dlb21ldHJ5P2I9MypjLmZhY2VzLmxlbmd0aDpjJiZjLmlzQnVmZmVyR2VvbWV0cnkmJihiPWMuYXR0cmlidXRlcy5ub3JtYWwuY291bnQpO2M9bmV3IEU7Yj1uZXcgQig2KmIsMyk7Yy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLGIpO1guY2FsbCh0aGlzLGMsbmV3IFcoe2NvbG9yOmEsbGluZXdpZHRoOmR9KSk7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMudXBkYXRlKCl9ZnVuY3Rpb24gbmMoYSxiKXt4LmNhbGwodGhpcyk7dGhpcy5saWdodD1hO3RoaXMubGlnaHQudXBkYXRlTWF0cml4V29ybGQoKTt0aGlzLm1hdHJpeD1hLm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT1cbiExO3RoaXMuY29sb3I9YjthPW5ldyBFO2I9WzAsMCwwLDAsMCwxLDAsMCwwLDEsMCwxLDAsMCwwLC0xLDAsMSwwLDAsMCwwLDEsMSwwLDAsMCwwLC0xLDFdO2Zvcih2YXIgYz0wLGQ9MTszMj5jO2MrKyxkKyspe3ZhciBlPWMvMzIqTWF0aC5QSSoyLGY9ZC8zMipNYXRoLlBJKjI7Yi5wdXNoKE1hdGguY29zKGUpLE1hdGguc2luKGUpLDEsTWF0aC5jb3MoZiksTWF0aC5zaW4oZiksMSl9YS5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKGIsMykpO2I9bmV3IFcoe2ZvZzohMX0pO3RoaXMuY29uZT1uZXcgWChhLGIpO3RoaXMuYWRkKHRoaXMuY29uZSk7dGhpcy51cGRhdGUoKX1mdW5jdGlvbiB1ZihhKXt2YXIgYj1bXTthJiZhLmlzQm9uZSYmYi5wdXNoKGEpO2Zvcih2YXIgYz0wO2M8YS5jaGlsZHJlbi5sZW5ndGg7YysrKWIucHVzaC5hcHBseShiLHVmKGEuY2hpbGRyZW5bY10pKTtyZXR1cm4gYn1mdW5jdGlvbiBvYyhhKXtmb3IodmFyIGI9dWYoYSksYz1uZXcgRSxkPVtdLGU9XG5bXSxmPW5ldyBIKDAsMCwxKSxnPW5ldyBIKDAsMSwwKSxoPTA7aDxiLmxlbmd0aDtoKyspe3ZhciBrPWJbaF07ay5wYXJlbnQmJmsucGFyZW50LmlzQm9uZSYmKGQucHVzaCgwLDAsMCksZC5wdXNoKDAsMCwwKSxlLnB1c2goZi5yLGYuZyxmLmIpLGUucHVzaChnLnIsZy5nLGcuYikpfWMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihkLDMpKTtjLmFkZEF0dHJpYnV0ZShcImNvbG9yXCIsbmV3IEIoZSwzKSk7ZD1uZXcgVyh7dmVydGV4Q29sb3JzOjIsZGVwdGhUZXN0OiExLGRlcHRoV3JpdGU6ITEsdHJhbnNwYXJlbnQ6ITB9KTtYLmNhbGwodGhpcyxjLGQpO3RoaXMucm9vdD1hO3RoaXMuYm9uZXM9Yjt0aGlzLm1hdHJpeD1hLm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMX1mdW5jdGlvbiBwYyhhLGIsYyl7dGhpcy5saWdodD1hO3RoaXMubGlnaHQudXBkYXRlTWF0cml4V29ybGQoKTt0aGlzLmNvbG9yPWM7YT1uZXcgd2IoYiw0LDIpO2I9bmV3IEFhKHt3aXJlZnJhbWU6ITAsXG5mb2c6ITF9KTtyYS5jYWxsKHRoaXMsYSxiKTt0aGlzLm1hdHJpeD10aGlzLmxpZ2h0Lm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLnVwZGF0ZSgpfWZ1bmN0aW9uIHFjKGEsYil7eC5jYWxsKHRoaXMpO3RoaXMubGlnaHQ9YTt0aGlzLmxpZ2h0LnVwZGF0ZU1hdHJpeFdvcmxkKCk7dGhpcy5tYXRyaXg9YS5tYXRyaXhXb3JsZDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5jb2xvcj1iO2E9bmV3IFcoe2ZvZzohMX0pO2I9bmV3IEU7Yi5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBNKG5ldyBGbG9hdDMyQXJyYXkoMTUpLDMpKTt0aGlzLmxpbmU9bmV3IHNhKGIsYSk7dGhpcy5hZGQodGhpcy5saW5lKTt0aGlzLnVwZGF0ZSgpfWZ1bmN0aW9uIHJjKGEsYixjKXt4LmNhbGwodGhpcyk7dGhpcy5saWdodD1hO3RoaXMubGlnaHQudXBkYXRlTWF0cml4V29ybGQoKTt0aGlzLm1hdHJpeD1hLm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT1cbiExO3RoaXMuY29sb3I9YzthPW5ldyB1YihiKTthLnJvdGF0ZVkoLjUqTWF0aC5QSSk7dGhpcy5tYXRlcmlhbD1uZXcgQWEoe3dpcmVmcmFtZTohMCxmb2c6ITF9KTt2b2lkIDA9PT10aGlzLmNvbG9yJiYodGhpcy5tYXRlcmlhbC52ZXJ0ZXhDb2xvcnM9Mik7Yj1hLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpO2I9bmV3IEZsb2F0MzJBcnJheSgzKmIuY291bnQpO2EuYWRkQXR0cmlidXRlKFwiY29sb3JcIixuZXcgTShiLDMpKTt0aGlzLmFkZChuZXcgcmEoYSx0aGlzLm1hdGVyaWFsKSk7dGhpcy51cGRhdGUoKX1mdW5jdGlvbiBpZChhLGIsYyxkKXthPWF8fDEwO2I9Ynx8MTA7Yz1uZXcgSCh2b2lkIDAhPT1jP2M6NDQ3MzkyNCk7ZD1uZXcgSCh2b2lkIDAhPT1kP2Q6ODk0Nzg0OCk7dmFyIGU9Yi8yLGY9YS9iLGc9YS8yO2E9W107Zm9yKHZhciBoPVtdLGs9MCxtPTAscT0tZztrPD1iO2srKyxxKz1mKXthLnB1c2goLWcsMCxxLGcsMCxxKTthLnB1c2gocSwwLC1nLHEsMCxnKTt2YXIgbj1cbms9PT1lP2M6ZDtuLnRvQXJyYXkoaCxtKTttKz0zO24udG9BcnJheShoLG0pO20rPTM7bi50b0FycmF5KGgsbSk7bSs9MztuLnRvQXJyYXkoaCxtKTttKz0zfWI9bmV3IEU7Yi5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKGEsMykpO2IuYWRkQXR0cmlidXRlKFwiY29sb3JcIixuZXcgQihoLDMpKTtjPW5ldyBXKHt2ZXJ0ZXhDb2xvcnM6Mn0pO1guY2FsbCh0aGlzLGIsYyl9ZnVuY3Rpb24gUmQoYSxiLGMsZCxlLGYpe2E9YXx8MTA7Yj1ifHwxNjtjPWN8fDg7ZD1kfHw2NDtlPW5ldyBIKHZvaWQgMCE9PWU/ZTo0NDczOTI0KTtmPW5ldyBIKHZvaWQgMCE9PWY/Zjo4OTQ3ODQ4KTt2YXIgZz1bXSxoPVtdLGs7Zm9yKGs9MDtrPD1iO2srKyl7dmFyIG09ay9iKjIqTWF0aC5QSTt2YXIgcT1NYXRoLnNpbihtKSphO209TWF0aC5jb3MobSkqYTtnLnB1c2goMCwwLDApO2cucHVzaChxLDAsbSk7dmFyIG49ayYxP2U6ZjtoLnB1c2gobi5yLG4uZyxuLmIpO2gucHVzaChuLnIsbi5nLG4uYil9Zm9yKGs9XG4wO2s8PWM7aysrKXtuPWsmMT9lOmY7dmFyIGw9YS1hL2Mqaztmb3IoYj0wO2I8ZDtiKyspbT1iL2QqMipNYXRoLlBJLHE9TWF0aC5zaW4obSkqbCxtPU1hdGguY29zKG0pKmwsZy5wdXNoKHEsMCxtKSxoLnB1c2gobi5yLG4uZyxuLmIpLG09KGIrMSkvZCoyKk1hdGguUEkscT1NYXRoLnNpbihtKSpsLG09TWF0aC5jb3MobSkqbCxnLnB1c2gocSwwLG0pLGgucHVzaChuLnIsbi5nLG4uYil9YT1uZXcgRTthLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIoZywzKSk7YS5hZGRBdHRyaWJ1dGUoXCJjb2xvclwiLG5ldyBCKGgsMykpO2c9bmV3IFcoe3ZlcnRleENvbG9yczoyfSk7WC5jYWxsKHRoaXMsYSxnKX1mdW5jdGlvbiBqZChhLGIsYyxkKXt0aGlzLm9iamVjdD1hO3RoaXMuc2l6ZT12b2lkIDAhPT1iP2I6MTthPXZvaWQgMCE9PWM/YzoxNjc3Njk2MDtkPXZvaWQgMCE9PWQ/ZDoxO2I9MDsoYz10aGlzLm9iamVjdC5nZW9tZXRyeSkmJmMuaXNHZW9tZXRyeT9iPWMuZmFjZXMubGVuZ3RoOlxuY29uc29sZS53YXJuKFwiVEhSRUUuRmFjZU5vcm1hbHNIZWxwZXI6IG9ubHkgVEhSRUUuR2VvbWV0cnkgaXMgc3VwcG9ydGVkLiBVc2UgVEhSRUUuVmVydGV4Tm9ybWFsc0hlbHBlciwgaW5zdGVhZC5cIik7Yz1uZXcgRTtiPW5ldyBCKDYqYiwzKTtjLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsYik7WC5jYWxsKHRoaXMsYyxuZXcgVyh7Y29sb3I6YSxsaW5ld2lkdGg6ZH0pKTt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy51cGRhdGUoKX1mdW5jdGlvbiBzYyhhLGIsYyl7eC5jYWxsKHRoaXMpO3RoaXMubGlnaHQ9YTt0aGlzLmxpZ2h0LnVwZGF0ZU1hdHJpeFdvcmxkKCk7dGhpcy5tYXRyaXg9YS5tYXRyaXhXb3JsZDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5jb2xvcj1jO3ZvaWQgMD09PWImJihiPTEpO2E9bmV3IEU7YS5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKFstYixiLDAsYixiLDAsYiwtYiwwLC1iLC1iLDAsLWIsYiwwXSwzKSk7Yj1uZXcgVyh7Zm9nOiExfSk7XG50aGlzLmxpZ2h0UGxhbmU9bmV3IHNhKGEsYik7dGhpcy5hZGQodGhpcy5saWdodFBsYW5lKTthPW5ldyBFO2EuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihbMCwwLDAsMCwwLDFdLDMpKTt0aGlzLnRhcmdldExpbmU9bmV3IHNhKGEsYik7dGhpcy5hZGQodGhpcy50YXJnZXRMaW5lKTt0aGlzLnVwZGF0ZSgpfWZ1bmN0aW9uIGtkKGEpe2Z1bmN0aW9uIGIoYSxiLGQpe2MoYSxkKTtjKGIsZCl9ZnVuY3Rpb24gYyhhLGIpe2YucHVzaCgwLDAsMCk7Zy5wdXNoKGIucixiLmcsYi5iKTt2b2lkIDA9PT1oW2FdJiYoaFthXT1bXSk7aFthXS5wdXNoKGYubGVuZ3RoLzMtMSl9dmFyIGQ9bmV3IEUsZT1uZXcgVyh7Y29sb3I6MTY3NzcyMTUsdmVydGV4Q29sb3JzOjF9KSxmPVtdLGc9W10saD17fSxrPW5ldyBIKDE2NzU1MjAwKSxtPW5ldyBIKDE2NzExNjgwKSxxPW5ldyBIKDQzNzc1KSxsPW5ldyBIKDE2Nzc3MjE1KSx1PW5ldyBIKDMzNTU0NDMpO2IoXCJuMVwiLFwibjJcIixrKTtiKFwibjJcIixcblwibjRcIixrKTtiKFwibjRcIixcIm4zXCIsayk7YihcIm4zXCIsXCJuMVwiLGspO2IoXCJmMVwiLFwiZjJcIixrKTtiKFwiZjJcIixcImY0XCIsayk7YihcImY0XCIsXCJmM1wiLGspO2IoXCJmM1wiLFwiZjFcIixrKTtiKFwibjFcIixcImYxXCIsayk7YihcIm4yXCIsXCJmMlwiLGspO2IoXCJuM1wiLFwiZjNcIixrKTtiKFwibjRcIixcImY0XCIsayk7YihcInBcIixcIm4xXCIsbSk7YihcInBcIixcIm4yXCIsbSk7YihcInBcIixcIm4zXCIsbSk7YihcInBcIixcIm40XCIsbSk7YihcInUxXCIsXCJ1MlwiLHEpO2IoXCJ1MlwiLFwidTNcIixxKTtiKFwidTNcIixcInUxXCIscSk7YihcImNcIixcInRcIixsKTtiKFwicFwiLFwiY1wiLHUpO2IoXCJjbjFcIixcImNuMlwiLHUpO2IoXCJjbjNcIixcImNuNFwiLHUpO2IoXCJjZjFcIixcImNmMlwiLHUpO2IoXCJjZjNcIixcImNmNFwiLHUpO2QuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihmLDMpKTtkLmFkZEF0dHJpYnV0ZShcImNvbG9yXCIsbmV3IEIoZywzKSk7WC5jYWxsKHRoaXMsZCxlKTt0aGlzLmNhbWVyYT1hO3RoaXMuY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgmJnRoaXMuY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcbnRoaXMubWF0cml4PWEubWF0cml4V29ybGQ7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMucG9pbnRNYXA9aDt0aGlzLnVwZGF0ZSgpfWZ1bmN0aW9uIEdiKGEsYil7dGhpcy5vYmplY3Q9YTt2b2lkIDA9PT1iJiYoYj0xNjc3Njk2MCk7YT1uZXcgVWludDE2QXJyYXkoWzAsMSwxLDIsMiwzLDMsMCw0LDUsNSw2LDYsNyw3LDQsMCw0LDEsNSwyLDYsMyw3XSk7dmFyIGM9bmV3IEZsb2F0MzJBcnJheSgyNCksZD1uZXcgRTtkLnNldEluZGV4KG5ldyBNKGEsMSkpO2QuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTShjLDMpKTtYLmNhbGwodGhpcyxkLG5ldyBXKHtjb2xvcjpifSkpO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLnVwZGF0ZSgpfWZ1bmN0aW9uIGxkKGEsYil7dGhpcy50eXBlPVwiQm94M0hlbHBlclwiO3RoaXMuYm94PWE7YT12b2lkIDAhPT1iP2I6MTY3NzY5NjA7Yj1uZXcgVWludDE2QXJyYXkoWzAsMSwxLDIsMiwzLDMsMCw0LDUsNSw2LDYsNyw3LDQsMCxcbjQsMSw1LDIsNiwzLDddKTt2YXIgYz1uZXcgRTtjLnNldEluZGV4KG5ldyBNKGIsMSkpO2MuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihbMSwxLDEsLTEsMSwxLC0xLC0xLDEsMSwtMSwxLDEsMSwtMSwtMSwxLC0xLC0xLC0xLC0xLDEsLTEsLTFdLDMpKTtYLmNhbGwodGhpcyxjLG5ldyBXKHtjb2xvcjphfSkpO3RoaXMuZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCl9ZnVuY3Rpb24gbWQoYSxiLGMpe3RoaXMudHlwZT1cIlBsYW5lSGVscGVyXCI7dGhpcy5wbGFuZT1hO3RoaXMuc2l6ZT12b2lkIDA9PT1iPzE6YjthPXZvaWQgMCE9PWM/YzoxNjc3Njk2MDtiPW5ldyBFO2IuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihbMSwtMSwxLC0xLDEsMSwtMSwtMSwxLDEsMSwxLC0xLDEsMSwtMSwtMSwxLDEsLTEsMSwxLDEsMSwwLDAsMSwwLDAsMF0sMykpO2IuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7c2EuY2FsbCh0aGlzLGIsbmV3IFcoe2NvbG9yOmF9KSk7Yj1uZXcgRTtcbmIuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihbMSwxLDEsLTEsMSwxLC0xLC0xLDEsMSwxLDEsLTEsLTEsMSwxLC0xLDFdLDMpKTtiLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO3RoaXMuYWRkKG5ldyByYShiLG5ldyBBYSh7Y29sb3I6YSxvcGFjaXR5Oi4yLHRyYW5zcGFyZW50OiEwLGRlcHRoV3JpdGU6ITF9KSkpfWZ1bmN0aW9uIEhiKGEsYixjLGQsZSxmKXt4LmNhbGwodGhpcyk7dm9pZCAwPT09ZCYmKGQ9MTY3NzY5NjApO3ZvaWQgMD09PWMmJihjPTEpO3ZvaWQgMD09PWUmJihlPS4yKmMpO3ZvaWQgMD09PWYmJihmPS4yKmUpO3ZvaWQgMD09PVNkJiYoU2Q9bmV3IEUsU2QuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihbMCwwLDAsMCwxLDBdLDMpKSxDZT1uZXcgYWIoMCwuNSwxLDUsMSksQ2UudHJhbnNsYXRlKDAsLS41LDApKTt0aGlzLnBvc2l0aW9uLmNvcHkoYik7dGhpcy5saW5lPW5ldyBzYShTZCxuZXcgVyh7Y29sb3I6ZH0pKTt0aGlzLmxpbmUubWF0cml4QXV0b1VwZGF0ZT1cbiExO3RoaXMuYWRkKHRoaXMubGluZSk7dGhpcy5jb25lPW5ldyByYShDZSxuZXcgQWEoe2NvbG9yOmR9KSk7dGhpcy5jb25lLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5hZGQodGhpcy5jb25lKTt0aGlzLnNldERpcmVjdGlvbihhKTt0aGlzLnNldExlbmd0aChjLGUsZil9ZnVuY3Rpb24gbmQoYSl7YT1hfHwxO3ZhciBiPVswLDAsMCxhLDAsMCwwLDAsMCwwLGEsMCwwLDAsMCwwLDAsYV07YT1uZXcgRTthLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIoYiwzKSk7YS5hZGRBdHRyaWJ1dGUoXCJjb2xvclwiLG5ldyBCKFsxLDAsMCwxLC42LDAsMCwxLDAsLjYsMSwwLDAsMCwxLDAsLjYsMV0sMykpO2I9bmV3IFcoe3ZlcnRleENvbG9yczoyfSk7WC5jYWxsKHRoaXMsYSxiKX1mdW5jdGlvbiB2ZihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5DbG9zZWRTcGxpbmVDdXJ2ZTMgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIFRIUkVFLkNhdG11bGxSb21DdXJ2ZTMgaW5zdGVhZC5cIik7Y2EuY2FsbCh0aGlzLFxuYSk7dGhpcy50eXBlPVwiY2F0bXVsbHJvbVwiO3RoaXMuY2xvc2VkPSEwfWZ1bmN0aW9uIHdmKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlNwbGluZUN1cnZlMyBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgVEhSRUUuQ2F0bXVsbFJvbUN1cnZlMyBpbnN0ZWFkLlwiKTtjYS5jYWxsKHRoaXMsYSk7dGhpcy50eXBlPVwiY2F0bXVsbHJvbVwifWZ1bmN0aW9uIERlKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlNwbGluZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuQ2F0bXVsbFJvbUN1cnZlMyBpbnN0ZWFkLlwiKTtjYS5jYWxsKHRoaXMsYSk7dGhpcy50eXBlPVwiY2F0bXVsbHJvbVwifXZvaWQgMD09PU51bWJlci5FUFNJTE9OJiYoTnVtYmVyLkVQU0lMT049TWF0aC5wb3coMiwtNTIpKTt2b2lkIDA9PT1OdW1iZXIuaXNJbnRlZ2VyJiYoTnVtYmVyLmlzSW50ZWdlcj1mdW5jdGlvbihhKXtyZXR1cm5cIm51bWJlclwiPT09dHlwZW9mIGEmJmlzRmluaXRlKGEpJiZNYXRoLmZsb29yKGEpPT09YX0pO3ZvaWQgMD09PVxuTWF0aC5zaWduJiYoTWF0aC5zaWduPWZ1bmN0aW9uKGEpe3JldHVybiAwPmE/LTE6MDxhPzE6K2F9KTshMT09PVwibmFtZVwiaW4gRnVuY3Rpb24ucHJvdG90eXBlJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLFwibmFtZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b1N0cmluZygpLm1hdGNoKC9eXFxzKmZ1bmN0aW9uXFxzKihbXlxcKFxcc10qKS8pWzFdfX0pO3ZvaWQgMD09PU9iamVjdC5hc3NpZ24mJmZ1bmN0aW9uKCl7T2JqZWN0LmFzc2lnbj1mdW5jdGlvbihhKXtpZih2b2lkIDA9PT1hfHxudWxsPT09YSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0XCIpO2Zvcih2YXIgYj1PYmplY3QoYSksYz0xO2M8YXJndW1lbnRzLmxlbmd0aDtjKyspe3ZhciBkPWFyZ3VtZW50c1tjXTtpZih2b2lkIDAhPT1kJiZudWxsIT09ZClmb3IodmFyIGUgaW4gZClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZCxcbmUpJiYoYltlXT1kW2VdKX1yZXR1cm4gYn19KCk7T2JqZWN0LmFzc2lnbih6YS5wcm90b3R5cGUse2FkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT10aGlzLl9saXN0ZW5lcnMmJih0aGlzLl9saXN0ZW5lcnM9e30pO3ZhciBjPXRoaXMuX2xpc3RlbmVyczt2b2lkIDA9PT1jW2FdJiYoY1thXT1bXSk7LTE9PT1jW2FdLmluZGV4T2YoYikmJmNbYV0ucHVzaChiKX0saGFzRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMD09PXRoaXMuX2xpc3RlbmVycylyZXR1cm4hMTt2YXIgYz10aGlzLl9saXN0ZW5lcnM7cmV0dXJuIHZvaWQgMCE9PWNbYV0mJi0xIT09Y1thXS5pbmRleE9mKGIpfSxyZW1vdmVFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYil7dm9pZCAwIT09dGhpcy5fbGlzdGVuZXJzJiYoYT10aGlzLl9saXN0ZW5lcnNbYV0sdm9pZCAwIT09YSYmKGI9YS5pbmRleE9mKGIpLC0xIT09YiYmYS5zcGxpY2UoYiwxKSkpfSxkaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEpe2lmKHZvaWQgMCE9PVxudGhpcy5fbGlzdGVuZXJzKXt2YXIgYj10aGlzLl9saXN0ZW5lcnNbYS50eXBlXTtpZih2b2lkIDAhPT1iKXthLnRhcmdldD10aGlzO2Zvcih2YXIgYj1iLnNsaWNlKDApLGM9MCxkPWIubGVuZ3RoO2M8ZDtjKyspYltjXS5jYWxsKHRoaXMsYSl9fX19KTt2YXIgUT17REVHMlJBRDpNYXRoLlBJLzE4MCxSQUQyREVHOjE4MC9NYXRoLlBJLGdlbmVyYXRlVVVJRDpmdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPTA7MjU2PmI7YisrKWFbYl09KDE2PmI/XCIwXCI6XCJcIikrYi50b1N0cmluZygxNikudG9VcHBlckNhc2UoKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYj00Mjk0OTY3Mjk1Kk1hdGgucmFuZG9tKCl8MCxkPTQyOTQ5NjcyOTUqTWF0aC5yYW5kb20oKXwwLGU9NDI5NDk2NzI5NSpNYXRoLnJhbmRvbSgpfDAsZj00Mjk0OTY3Mjk1Kk1hdGgucmFuZG9tKCl8MDtyZXR1cm4gYVtiJjI1NV0rYVtiPj44JjI1NV0rYVtiPj4xNiYyNTVdK2FbYj4+MjQmMjU1XStcIi1cIithW2QmMjU1XSthW2Q+PjgmXG4yNTVdK1wiLVwiK2FbZD4+MTYmMTV8NjRdK2FbZD4+MjQmMjU1XStcIi1cIithW2UmNjN8MTI4XSthW2U+PjgmMjU1XStcIi1cIithW2U+PjE2JjI1NV0rYVtlPj4yNCYyNTVdK2FbZiYyNTVdK2FbZj4+OCYyNTVdK2FbZj4+MTYmMjU1XSthW2Y+PjI0JjI1NV19fSgpLGNsYW1wOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTWF0aC5tYXgoYixNYXRoLm1pbihjLGEpKX0sZXVjbGlkZWFuTW9kdWxvOmZ1bmN0aW9uKGEsYil7cmV0dXJuKGElYitiKSVifSxtYXBMaW5lYXI6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gZCsoYS1iKSooZS1kKS8oYy1iKX0sbGVycDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuKDEtYykqYStjKmJ9LHNtb290aHN0ZXA6ZnVuY3Rpb24oYSxiLGMpe2lmKGE8PWIpcmV0dXJuIDA7aWYoYT49YylyZXR1cm4gMTthPShhLWIpLyhjLWIpO3JldHVybiBhKmEqKDMtMiphKX0sc21vb3RoZXJzdGVwOmZ1bmN0aW9uKGEsYixjKXtpZihhPD1iKXJldHVybiAwO2lmKGE+PWMpcmV0dXJuIDE7XG5hPShhLWIpLyhjLWIpO3JldHVybiBhKmEqYSooYSooNiphLTE1KSsxMCl9LHJhbmRJbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYStNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKGItYSsxKSl9LHJhbmRGbG9hdDpmdW5jdGlvbihhLGIpe3JldHVybiBhK01hdGgucmFuZG9tKCkqKGItYSl9LHJhbmRGbG9hdFNwcmVhZDpmdW5jdGlvbihhKXtyZXR1cm4gYSooLjUtTWF0aC5yYW5kb20oKSl9LGRlZ1RvUmFkOmZ1bmN0aW9uKGEpe3JldHVybiBhKlEuREVHMlJBRH0scmFkVG9EZWc6ZnVuY3Rpb24oYSl7cmV0dXJuIGEqUS5SQUQyREVHfSxpc1Bvd2VyT2ZUd286ZnVuY3Rpb24oYSl7cmV0dXJuIDA9PT0oYSZhLTEpJiYwIT09YX0sY2VpbFBvd2VyT2ZUd286ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGgucG93KDIsTWF0aC5jZWlsKE1hdGgubG9nKGEpL01hdGguTE4yKSl9LGZsb29yUG93ZXJPZlR3bzpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5wb3coMixNYXRoLmZsb29yKE1hdGgubG9nKGEpL1xuTWF0aC5MTjIpKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEQucHJvdG90eXBlLHt3aWR0aDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueH0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMueD1hfX0saGVpZ2h0OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy55fSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy55PWF9fX0pO09iamVjdC5hc3NpZ24oRC5wcm90b3R5cGUse2lzVmVjdG9yMjohMCxzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLng9YTt0aGlzLnk9YjtyZXR1cm4gdGhpc30sc2V0U2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMueT10aGlzLng9YTtyZXR1cm4gdGhpc30sc2V0WDpmdW5jdGlvbihhKXt0aGlzLng9YTtyZXR1cm4gdGhpc30sc2V0WTpmdW5jdGlvbihhKXt0aGlzLnk9YTtyZXR1cm4gdGhpc30sc2V0Q29tcG9uZW50OmZ1bmN0aW9uKGEsYil7c3dpdGNoKGEpe2Nhc2UgMDp0aGlzLng9YjticmVhaztjYXNlIDE6dGhpcy55PWI7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrXG5hKTt9cmV0dXJuIHRoaXN9LGdldENvbXBvbmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYSl7Y2FzZSAwOnJldHVybiB0aGlzLng7Y2FzZSAxOnJldHVybiB0aGlzLnk7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrYSk7fX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy54LHRoaXMueSl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy54PWEueDt0aGlzLnk9YS55O3JldHVybiB0aGlzfSxhZGQ6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1iKXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IyOiAuYWRkKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuYWRkVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuYWRkVmVjdG9ycyhhLGIpO3RoaXMueCs9YS54O3RoaXMueSs9YS55O3JldHVybiB0aGlzfSxhZGRTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy54Kz1hO3RoaXMueSs9YTtyZXR1cm4gdGhpc30sXG5hZGRWZWN0b3JzOmZ1bmN0aW9uKGEsYil7dGhpcy54PWEueCtiLng7dGhpcy55PWEueStiLnk7cmV0dXJuIHRoaXN9LGFkZFNjYWxlZFZlY3RvcjpmdW5jdGlvbihhLGIpe3RoaXMueCs9YS54KmI7dGhpcy55Kz1hLnkqYjtyZXR1cm4gdGhpc30sc3ViOmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YilyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMjogLnN1YigpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLnN1YlZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLnN1YlZlY3RvcnMoYSxiKTt0aGlzLngtPWEueDt0aGlzLnktPWEueTtyZXR1cm4gdGhpc30sc3ViU2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMueC09YTt0aGlzLnktPWE7cmV0dXJuIHRoaXN9LHN1YlZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLng9YS54LWIueDt0aGlzLnk9YS55LWIueTtyZXR1cm4gdGhpc30sbXVsdGlwbHk6ZnVuY3Rpb24oYSl7dGhpcy54Kj1hLng7dGhpcy55Kj1cbmEueTtyZXR1cm4gdGhpc30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy54Kj1hO3RoaXMueSo9YTtyZXR1cm4gdGhpc30sZGl2aWRlOmZ1bmN0aW9uKGEpe3RoaXMueC89YS54O3RoaXMueS89YS55O3JldHVybiB0aGlzfSxkaXZpZGVTY2FsYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoMS9hKX0sYXBwbHlNYXRyaXgzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueCxjPXRoaXMueTthPWEuZWxlbWVudHM7dGhpcy54PWFbMF0qYithWzNdKmMrYVs2XTt0aGlzLnk9YVsxXSpiK2FbNF0qYythWzddO3JldHVybiB0aGlzfSxtaW46ZnVuY3Rpb24oYSl7dGhpcy54PU1hdGgubWluKHRoaXMueCxhLngpO3RoaXMueT1NYXRoLm1pbih0aGlzLnksYS55KTtyZXR1cm4gdGhpc30sbWF4OmZ1bmN0aW9uKGEpe3RoaXMueD1NYXRoLm1heCh0aGlzLngsYS54KTt0aGlzLnk9TWF0aC5tYXgodGhpcy55LGEueSk7cmV0dXJuIHRoaXN9LGNsYW1wOmZ1bmN0aW9uKGEsXG5iKXt0aGlzLng9TWF0aC5tYXgoYS54LE1hdGgubWluKGIueCx0aGlzLngpKTt0aGlzLnk9TWF0aC5tYXgoYS55LE1hdGgubWluKGIueSx0aGlzLnkpKTtyZXR1cm4gdGhpc30sY2xhbXBTY2FsYXI6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgRCxiPW5ldyBEO3JldHVybiBmdW5jdGlvbihjLGQpe2Euc2V0KGMsYyk7Yi5zZXQoZCxkKTtyZXR1cm4gdGhpcy5jbGFtcChhLGIpfX0oKSxjbGFtcExlbmd0aDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMubGVuZ3RoKCk7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKGN8fDEpLm11bHRpcGx5U2NhbGFyKE1hdGgubWF4KGEsTWF0aC5taW4oYixjKSkpfSxmbG9vcjpmdW5jdGlvbigpe3RoaXMueD1NYXRoLmZsb29yKHRoaXMueCk7dGhpcy55PU1hdGguZmxvb3IodGhpcy55KTtyZXR1cm4gdGhpc30sY2VpbDpmdW5jdGlvbigpe3RoaXMueD1NYXRoLmNlaWwodGhpcy54KTt0aGlzLnk9TWF0aC5jZWlsKHRoaXMueSk7cmV0dXJuIHRoaXN9LHJvdW5kOmZ1bmN0aW9uKCl7dGhpcy54PVxuTWF0aC5yb3VuZCh0aGlzLngpO3RoaXMueT1NYXRoLnJvdW5kKHRoaXMueSk7cmV0dXJuIHRoaXN9LHJvdW5kVG9aZXJvOmZ1bmN0aW9uKCl7dGhpcy54PTA+dGhpcy54P01hdGguY2VpbCh0aGlzLngpOk1hdGguZmxvb3IodGhpcy54KTt0aGlzLnk9MD50aGlzLnk/TWF0aC5jZWlsKHRoaXMueSk6TWF0aC5mbG9vcih0aGlzLnkpO3JldHVybiB0aGlzfSxuZWdhdGU6ZnVuY3Rpb24oKXt0aGlzLng9LXRoaXMueDt0aGlzLnk9LXRoaXMueTtyZXR1cm4gdGhpc30sZG90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLngqYS54K3RoaXMueSphLnl9LGxlbmd0aFNxOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueX0sbGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkpfSxtYW5oYXR0YW5MZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5hYnModGhpcy54KStNYXRoLmFicyh0aGlzLnkpfSxub3JtYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIodGhpcy5sZW5ndGgoKXx8XG4xKX0sYW5nbGU6ZnVuY3Rpb24oKXt2YXIgYT1NYXRoLmF0YW4yKHRoaXMueSx0aGlzLngpOzA+YSYmKGErPTIqTWF0aC5QSSk7cmV0dXJuIGF9LGRpc3RhbmNlVG86ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGguc3FydCh0aGlzLmRpc3RhbmNlVG9TcXVhcmVkKGEpKX0sZGlzdGFuY2VUb1NxdWFyZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy54LWEueDthPXRoaXMueS1hLnk7cmV0dXJuIGIqYithKmF9LG1hbmhhdHRhbkRpc3RhbmNlVG86ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGguYWJzKHRoaXMueC1hLngpK01hdGguYWJzKHRoaXMueS1hLnkpfSxzZXRMZW5ndGg6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIoYSl9LGxlcnA6ZnVuY3Rpb24oYSxiKXt0aGlzLngrPShhLngtdGhpcy54KSpiO3RoaXMueSs9KGEueS10aGlzLnkpKmI7cmV0dXJuIHRoaXN9LGxlcnBWZWN0b3JzOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5zdWJWZWN0b3JzKGIsXG5hKS5tdWx0aXBseVNjYWxhcihjKS5hZGQoYSl9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS54PT09dGhpcy54JiZhLnk9PT10aGlzLnl9LGZyb21BcnJheTpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPTApO3RoaXMueD1hW2JdO3RoaXMueT1hW2IrMV07cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1hJiYoYT1bXSk7dm9pZCAwPT09YiYmKGI9MCk7YVtiXT10aGlzLng7YVtiKzFdPXRoaXMueTtyZXR1cm4gYX0sZnJvbUJ1ZmZlckF0dHJpYnV0ZTpmdW5jdGlvbihhLGIsYyl7dm9pZCAwIT09YyYmY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMjogb2Zmc2V0IGhhcyBiZWVuIHJlbW92ZWQgZnJvbSAuZnJvbUJ1ZmZlckF0dHJpYnV0ZSgpLlwiKTt0aGlzLng9YS5nZXRYKGIpO3RoaXMueT1hLmdldFkoYik7cmV0dXJuIHRoaXN9LHJvdGF0ZUFyb3VuZDpmdW5jdGlvbihhLGIpe3ZhciBjPU1hdGguY29zKGIpO2I9TWF0aC5zaW4oYik7dmFyIGQ9XG50aGlzLngtYS54LGU9dGhpcy55LWEueTt0aGlzLng9ZCpjLWUqYithLng7dGhpcy55PWQqYitlKmMrYS55O3JldHVybiB0aGlzfX0pO09iamVjdC5hc3NpZ24oTy5wcm90b3R5cGUse2lzTWF0cml4NDohMCxzZXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoLGssbSxxLGwsdSxyLHQscCl7dmFyIG49dGhpcy5lbGVtZW50cztuWzBdPWE7bls0XT1iO25bOF09YztuWzEyXT1kO25bMV09ZTtuWzVdPWY7bls5XT1nO25bMTNdPWg7blsyXT1rO25bNl09bTtuWzEwXT1xO25bMTRdPWw7blszXT11O25bN109cjtuWzExXT10O25bMTVdPXA7cmV0dXJuIHRoaXN9LGlkZW50aXR5OmZ1bmN0aW9uKCl7dGhpcy5zZXQoMSwwLDAsMCwwLDEsMCwwLDAsMCwxLDAsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBPKS5mcm9tQXJyYXkodGhpcy5lbGVtZW50cyl9LGNvcHk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50czthPWEuZWxlbWVudHM7YlswXT1cbmFbMF07YlsxXT1hWzFdO2JbMl09YVsyXTtiWzNdPWFbM107Yls0XT1hWzRdO2JbNV09YVs1XTtiWzZdPWFbNl07Yls3XT1hWzddO2JbOF09YVs4XTtiWzldPWFbOV07YlsxMF09YVsxMF07YlsxMV09YVsxMV07YlsxMl09YVsxMl07YlsxM109YVsxM107YlsxNF09YVsxNF07YlsxNV09YVsxNV07cmV0dXJuIHRoaXN9LGNvcHlQb3NpdGlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnRzO2E9YS5lbGVtZW50cztiWzEyXT1hWzEyXTtiWzEzXT1hWzEzXTtiWzE0XT1hWzE0XTtyZXR1cm4gdGhpc30sZXh0cmFjdEJhc2lzOmZ1bmN0aW9uKGEsYixjKXthLnNldEZyb21NYXRyaXhDb2x1bW4odGhpcywwKTtiLnNldEZyb21NYXRyaXhDb2x1bW4odGhpcywxKTtjLnNldEZyb21NYXRyaXhDb2x1bW4odGhpcywyKTtyZXR1cm4gdGhpc30sbWFrZUJhc2lzOmZ1bmN0aW9uKGEsYixjKXt0aGlzLnNldChhLngsYi54LGMueCwwLGEueSxiLnksYy55LDAsYS56LGIueixjLnosMCwwLDAsMCxcbjEpO3JldHVybiB0aGlzfSxleHRyYWN0Um90YXRpb246ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5lbGVtZW50cyxkPWIuZWxlbWVudHMsZT0xL2Euc2V0RnJvbU1hdHJpeENvbHVtbihiLDApLmxlbmd0aCgpLGY9MS9hLnNldEZyb21NYXRyaXhDb2x1bW4oYiwxKS5sZW5ndGgoKTtiPTEvYS5zZXRGcm9tTWF0cml4Q29sdW1uKGIsMikubGVuZ3RoKCk7Y1swXT1kWzBdKmU7Y1sxXT1kWzFdKmU7Y1syXT1kWzJdKmU7Y1s0XT1kWzRdKmY7Y1s1XT1kWzVdKmY7Y1s2XT1kWzZdKmY7Y1s4XT1kWzhdKmI7Y1s5XT1kWzldKmI7Y1sxMF09ZFsxMF0qYjtyZXR1cm4gdGhpc319KCksbWFrZVJvdGF0aW9uRnJvbUV1bGVyOmZ1bmN0aW9uKGEpe2EmJmEuaXNFdWxlcnx8Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDQ6IC5tYWtlUm90YXRpb25Gcm9tRXVsZXIoKSBub3cgZXhwZWN0cyBhIEV1bGVyIHJvdGF0aW9uIHJhdGhlciB0aGFuIGEgVmVjdG9yMyBhbmQgb3JkZXIuXCIpO1xudmFyIGI9dGhpcy5lbGVtZW50cyxjPWEueCxkPWEueSxlPWEueixmPU1hdGguY29zKGMpLGM9TWF0aC5zaW4oYyksZz1NYXRoLmNvcyhkKSxkPU1hdGguc2luKGQpLGg9TWF0aC5jb3MoZSksZT1NYXRoLnNpbihlKTtpZihcIlhZWlwiPT09YS5vcmRlcil7dmFyIGs9ZipoO3ZhciBtPWYqZTt2YXIgcT1jKmg7YT1jKmU7YlswXT1nKmg7Yls0XT0tZyplO2JbOF09ZDtiWzFdPW0rcSpkO2JbNV09ay1hKmQ7Yls5XT0tYypnO2JbMl09YS1rKmQ7Yls2XT1xK20qZDtiWzEwXT1mKmd9ZWxzZVwiWVhaXCI9PT1hLm9yZGVyPyhrPWcqaCxtPWcqZSxxPWQqaCxhPWQqZSxiWzBdPWsrYSpjLGJbNF09cSpjLW0sYls4XT1mKmQsYlsxXT1mKmUsYls1XT1mKmgsYls5XT0tYyxiWzJdPW0qYy1xLGJbNl09YStrKmMsYlsxMF09ZipnKTpcIlpYWVwiPT09YS5vcmRlcj8oaz1nKmgsbT1nKmUscT1kKmgsYT1kKmUsYlswXT1rLWEqYyxiWzRdPS1mKmUsYls4XT1xK20qYyxiWzFdPW0rcSpjLGJbNV09ZipoLGJbOV09XG5hLWsqYyxiWzJdPS1mKmQsYls2XT1jLGJbMTBdPWYqZyk6XCJaWVhcIj09PWEub3JkZXI/KGs9ZipoLG09ZiplLHE9YypoLGE9YyplLGJbMF09ZypoLGJbNF09cSpkLW0sYls4XT1rKmQrYSxiWzFdPWcqZSxiWzVdPWEqZCtrLGJbOV09bSpkLXEsYlsyXT0tZCxiWzZdPWMqZyxiWzEwXT1mKmcpOlwiWVpYXCI9PT1hLm9yZGVyPyhrPWYqZyxtPWYqZCxxPWMqZyxhPWMqZCxiWzBdPWcqaCxiWzRdPWEtayplLGJbOF09cSplK20sYlsxXT1lLGJbNV09ZipoLGJbOV09LWMqaCxiWzJdPS1kKmgsYls2XT1tKmUrcSxiWzEwXT1rLWEqZSk6XCJYWllcIj09PWEub3JkZXImJihrPWYqZyxtPWYqZCxxPWMqZyxhPWMqZCxiWzBdPWcqaCxiWzRdPS1lLGJbOF09ZCpoLGJbMV09ayplK2EsYls1XT1mKmgsYls5XT1tKmUtcSxiWzJdPXEqZS1tLGJbNl09YypoLGJbMTBdPWEqZStrKTtiWzNdPTA7Yls3XT0wO2JbMTFdPTA7YlsxMl09MDtiWzEzXT0wO2JbMTRdPTA7YlsxNV09MTtyZXR1cm4gdGhpc30sbWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb246ZnVuY3Rpb24oYSl7dmFyIGI9XG50aGlzLmVsZW1lbnRzLGM9YS5feCxkPWEuX3ksZT1hLl96LGY9YS5fdyxnPWMrYyxoPWQrZCxrPWUrZTthPWMqZzt2YXIgbT1jKmgsYz1jKmsscT1kKmgsZD1kKmssZT1lKmssZz1mKmcsaD1mKmgsZj1mKms7YlswXT0xLShxK2UpO2JbNF09bS1mO2JbOF09YytoO2JbMV09bStmO2JbNV09MS0oYStlKTtiWzldPWQtZztiWzJdPWMtaDtiWzZdPWQrZztiWzEwXT0xLShhK3EpO2JbM109MDtiWzddPTA7YlsxMV09MDtiWzEyXT0wO2JbMTNdPTA7YlsxNF09MDtiWzE1XT0xO3JldHVybiB0aGlzfSxsb29rQXQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBwLGM9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGQsZSxmKXt2YXIgZz10aGlzLmVsZW1lbnRzO2Muc3ViVmVjdG9ycyhkLGUpOzA9PT1jLmxlbmd0aFNxKCkmJihjLno9MSk7Yy5ub3JtYWxpemUoKTthLmNyb3NzVmVjdG9ycyhmLGMpOzA9PT1hLmxlbmd0aFNxKCkmJigxPT09TWF0aC5hYnMoZi56KT9jLngrPTFFLTQ6Yy56Kz0xRS00LFxuYy5ub3JtYWxpemUoKSxhLmNyb3NzVmVjdG9ycyhmLGMpKTthLm5vcm1hbGl6ZSgpO2IuY3Jvc3NWZWN0b3JzKGMsYSk7Z1swXT1hLng7Z1s0XT1iLng7Z1s4XT1jLng7Z1sxXT1hLnk7Z1s1XT1iLnk7Z1s5XT1jLnk7Z1syXT1hLno7Z1s2XT1iLno7Z1sxMF09Yy56O3JldHVybiB0aGlzfX0oKSxtdWx0aXBseTpmdW5jdGlvbihhLGIpe3JldHVybiB2b2lkIDAhPT1iPyhjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAubXVsdGlwbHkoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5tdWx0aXBseU1hdHJpY2VzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5tdWx0aXBseU1hdHJpY2VzKGEsYikpOnRoaXMubXVsdGlwbHlNYXRyaWNlcyh0aGlzLGEpfSxwcmVtdWx0aXBseTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tdWx0aXBseU1hdHJpY2VzKGEsdGhpcyl9LG11bHRpcGx5TWF0cmljZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmVsZW1lbnRzLGQ9Yi5lbGVtZW50cztcbmI9dGhpcy5lbGVtZW50czthPWNbMF07dmFyIGU9Y1s0XSxmPWNbOF0sZz1jWzEyXSxoPWNbMV0saz1jWzVdLG09Y1s5XSxxPWNbMTNdLG49Y1syXSxsPWNbNl0scj1jWzEwXSx0PWNbMTRdLHA9Y1szXSx3PWNbN10sej1jWzExXSxjPWNbMTVdLHk9ZFswXSxJPWRbNF0sQT1kWzhdLEo9ZFsxMl0seD1kWzFdLEI9ZFs1XSxEPWRbOV0sQz1kWzEzXSxFPWRbMl0sSD1kWzZdLEs9ZFsxMF0sUz1kWzE0XSxMPWRbM10sTj1kWzddLE09ZFsxMV0sZD1kWzE1XTtiWzBdPWEqeStlKngrZipFK2cqTDtiWzRdPWEqSStlKkIrZipIK2cqTjtiWzhdPWEqQStlKkQrZipLK2cqTTtiWzEyXT1hKkorZSpDK2YqUytnKmQ7YlsxXT1oKnkrayp4K20qRStxKkw7Yls1XT1oKkkraypCK20qSCtxKk47Yls5XT1oKkEraypEK20qSytxKk07YlsxM109aCpKK2sqQyttKlMrcSpkO2JbMl09bip5K2wqeCtyKkUrdCpMO2JbNl09bipJK2wqQityKkgrdCpOO2JbMTBdPW4qQStsKkQrcipLK3QqTTtiWzE0XT1uKkorbCpcbkMrcipTK3QqZDtiWzNdPXAqeSt3KngreipFK2MqTDtiWzddPXAqSSt3KkIreipIK2MqTjtiWzExXT1wKkErdypEK3oqSytjKk07YlsxNV09cCpKK3cqQyt6KlMrYypkO3JldHVybiB0aGlzfSxtdWx0aXBseVNjYWxhcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnRzO2JbMF0qPWE7Yls0XSo9YTtiWzhdKj1hO2JbMTJdKj1hO2JbMV0qPWE7Yls1XSo9YTtiWzldKj1hO2JbMTNdKj1hO2JbMl0qPWE7Yls2XSo9YTtiWzEwXSo9YTtiWzE0XSo9YTtiWzNdKj1hO2JbN10qPWE7YlsxMV0qPWE7YlsxNV0qPWE7cmV0dXJuIHRoaXN9LGFwcGx5VG9CdWZmZXJBdHRyaWJ1dGU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYil7Zm9yKHZhciBjPTAsZD1iLmNvdW50O2M8ZDtjKyspYS54PWIuZ2V0WChjKSxhLnk9Yi5nZXRZKGMpLGEuej1iLmdldFooYyksYS5hcHBseU1hdHJpeDQodGhpcyksYi5zZXRYWVooYyxhLngsYS55LGEueik7cmV0dXJuIGJ9fSgpLGRldGVybWluYW50OmZ1bmN0aW9uKCl7dmFyIGE9XG50aGlzLmVsZW1lbnRzLGI9YVswXSxjPWFbNF0sZD1hWzhdLGU9YVsxMl0sZj1hWzFdLGc9YVs1XSxoPWFbOV0saz1hWzEzXSxtPWFbMl0scT1hWzZdLG49YVsxMF0sbD1hWzE0XTtyZXR1cm4gYVszXSooK2UqaCpxLWQqaypxLWUqZypuK2MqaypuK2QqZypsLWMqaCpsKSthWzddKigrYipoKmwtYiprKm4rZSpmKm4tZCpmKmwrZCprKm0tZSpoKm0pK2FbMTFdKigrYiprKnEtYipnKmwtZSpmKnErYypmKmwrZSpnKm0tYyprKm0pK2FbMTVdKigtZCpnKm0tYipoKnErYipnKm4rZCpmKnEtYypmKm4rYypoKm0pfSx0cmFuc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnRzO3ZhciBiPWFbMV07YVsxXT1hWzRdO2FbNF09YjtiPWFbMl07YVsyXT1hWzhdO2FbOF09YjtiPWFbNl07YVs2XT1hWzldO2FbOV09YjtiPWFbM107YVszXT1hWzEyXTthWzEyXT1iO2I9YVs3XTthWzddPWFbMTNdO2FbMTNdPWI7Yj1hWzExXTthWzExXT1hWzE0XTthWzE0XT1iO3JldHVybiB0aGlzfSxzZXRQb3NpdGlvbjpmdW5jdGlvbihhKXt2YXIgYj1cbnRoaXMuZWxlbWVudHM7YlsxMl09YS54O2JbMTNdPWEueTtiWzE0XT1hLno7cmV0dXJuIHRoaXN9LGdldEludmVyc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmVsZW1lbnRzLGQ9YS5lbGVtZW50czthPWRbMF07dmFyIGU9ZFsxXSxmPWRbMl0sZz1kWzNdLGg9ZFs0XSxrPWRbNV0sbT1kWzZdLHE9ZFs3XSxsPWRbOF0sdT1kWzldLHI9ZFsxMF0sdD1kWzExXSxwPWRbMTJdLHc9ZFsxM10sej1kWzE0XSxkPWRbMTVdLHk9dSp6KnEtdypyKnErdyptKnQtayp6KnQtdSptKmQraypyKmQseD1wKnIqcS1sKnoqcS1wKm0qdCtoKnoqdCtsKm0qZC1oKnIqZCxBPWwqdypxLXAqdSpxK3Aqayp0LWgqdyp0LWwqaypkK2gqdSpkLEo9cCp1Km0tbCp3Km0tcCprKnIraCp3KnIrbCprKnotaCp1KnosQj1hKnkrZSp4K2YqQStnKko7aWYoMD09PUIpe2lmKCEwPT09Yil0aHJvdyBFcnJvcihcIlRIUkVFLk1hdHJpeDQ6IC5nZXRJbnZlcnNlKCkgY2FuJ3QgaW52ZXJ0IG1hdHJpeCwgZGV0ZXJtaW5hbnQgaXMgMFwiKTtcbmNvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5nZXRJbnZlcnNlKCkgY2FuJ3QgaW52ZXJ0IG1hdHJpeCwgZGV0ZXJtaW5hbnQgaXMgMFwiKTtyZXR1cm4gdGhpcy5pZGVudGl0eSgpfWI9MS9CO2NbMF09eSpiO2NbMV09KHcqcipnLXUqeipnLXcqZip0K2Uqeip0K3UqZipkLWUqcipkKSpiO2NbMl09KGsqeipnLXcqbSpnK3cqZipxLWUqeipxLWsqZipkK2UqbSpkKSpiO2NbM109KHUqbSpnLWsqcipnLXUqZipxK2UqcipxK2sqZip0LWUqbSp0KSpiO2NbNF09eCpiO2NbNV09KGwqeipnLXAqcipnK3AqZip0LWEqeip0LWwqZipkK2EqcipkKSpiO2NbNl09KHAqbSpnLWgqeipnLXAqZipxK2EqeipxK2gqZipkLWEqbSpkKSpiO2NbN109KGgqcipnLWwqbSpnK2wqZipxLWEqcipxLWgqZip0K2EqbSp0KSpiO2NbOF09QSpiO2NbOV09KHAqdSpnLWwqdypnLXAqZSp0K2Eqdyp0K2wqZSpkLWEqdSpkKSpiO2NbMTBdPShoKncqZy1wKmsqZytwKmUqcS1hKncqcS1oKmUqZCthKmsqZCkqYjtjWzExXT1cbihsKmsqZy1oKnUqZy1sKmUqcSthKnUqcStoKmUqdC1hKmsqdCkqYjtjWzEyXT1KKmI7Y1sxM109KGwqdypmLXAqdSpmK3AqZSpyLWEqdypyLWwqZSp6K2EqdSp6KSpiO2NbMTRdPShwKmsqZi1oKncqZi1wKmUqbSthKncqbStoKmUqei1hKmsqeikqYjtjWzE1XT0oaCp1KmYtbCprKmYrbCplKm0tYSp1Km0taCplKnIrYSprKnIpKmI7cmV0dXJuIHRoaXN9LHNjYWxlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHMsYz1hLngsZD1hLnk7YT1hLno7YlswXSo9YztiWzRdKj1kO2JbOF0qPWE7YlsxXSo9YztiWzVdKj1kO2JbOV0qPWE7YlsyXSo9YztiWzZdKj1kO2JbMTBdKj1hO2JbM10qPWM7Yls3XSo9ZDtiWzExXSo9YTtyZXR1cm4gdGhpc30sZ2V0TWF4U2NhbGVPbkF4aXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnRzO3JldHVybiBNYXRoLnNxcnQoTWF0aC5tYXgoYVswXSphWzBdK2FbMV0qYVsxXSthWzJdKmFbMl0sYVs0XSphWzRdK2FbNV0qYVs1XSthWzZdKmFbNl0sXG5hWzhdKmFbOF0rYVs5XSphWzldK2FbMTBdKmFbMTBdKSl9LG1ha2VUcmFuc2xhdGlvbjpmdW5jdGlvbihhLGIsYyl7dGhpcy5zZXQoMSwwLDAsYSwwLDEsMCxiLDAsMCwxLGMsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LG1ha2VSb3RhdGlvblg6ZnVuY3Rpb24oYSl7dmFyIGI9TWF0aC5jb3MoYSk7YT1NYXRoLnNpbihhKTt0aGlzLnNldCgxLDAsMCwwLDAsYiwtYSwwLDAsYSxiLDAsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LG1ha2VSb3RhdGlvblk6ZnVuY3Rpb24oYSl7dmFyIGI9TWF0aC5jb3MoYSk7YT1NYXRoLnNpbihhKTt0aGlzLnNldChiLDAsYSwwLDAsMSwwLDAsLWEsMCxiLDAsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LG1ha2VSb3RhdGlvblo6ZnVuY3Rpb24oYSl7dmFyIGI9TWF0aC5jb3MoYSk7YT1NYXRoLnNpbihhKTt0aGlzLnNldChiLC1hLDAsMCxhLGIsMCwwLDAsMCwxLDAsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LG1ha2VSb3RhdGlvbkF4aXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1cbk1hdGguY29zKGIpO2I9TWF0aC5zaW4oYik7dmFyIGQ9MS1jLGU9YS54LGY9YS55O2E9YS56O3ZhciBnPWQqZSxoPWQqZjt0aGlzLnNldChnKmUrYyxnKmYtYiphLGcqYStiKmYsMCxnKmYrYiphLGgqZitjLGgqYS1iKmUsMCxnKmEtYipmLGgqYStiKmUsZCphKmErYywwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxtYWtlU2NhbGU6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuc2V0KGEsMCwwLDAsMCxiLDAsMCwwLDAsYywwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxtYWtlU2hlYXI6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuc2V0KDEsYixjLDAsYSwxLGMsMCxhLGIsMSwwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxjb21wb3NlOmZ1bmN0aW9uKGEsYixjKXt0aGlzLm1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKGIpO3RoaXMuc2NhbGUoYyk7dGhpcy5zZXRQb3NpdGlvbihhKTtyZXR1cm4gdGhpc30sZGVjb21wb3NlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAsYj1uZXcgTztyZXR1cm4gZnVuY3Rpb24oYyxcbmQsZSl7dmFyIGY9dGhpcy5lbGVtZW50cyxnPWEuc2V0KGZbMF0sZlsxXSxmWzJdKS5sZW5ndGgoKSxoPWEuc2V0KGZbNF0sZls1XSxmWzZdKS5sZW5ndGgoKSxrPWEuc2V0KGZbOF0sZls5XSxmWzEwXSkubGVuZ3RoKCk7MD50aGlzLmRldGVybWluYW50KCkmJihnPS1nKTtjLng9ZlsxMl07Yy55PWZbMTNdO2Muej1mWzE0XTtiLmNvcHkodGhpcyk7Yz0xL2c7dmFyIGY9MS9oLG09MS9rO2IuZWxlbWVudHNbMF0qPWM7Yi5lbGVtZW50c1sxXSo9YztiLmVsZW1lbnRzWzJdKj1jO2IuZWxlbWVudHNbNF0qPWY7Yi5lbGVtZW50c1s1XSo9ZjtiLmVsZW1lbnRzWzZdKj1mO2IuZWxlbWVudHNbOF0qPW07Yi5lbGVtZW50c1s5XSo9bTtiLmVsZW1lbnRzWzEwXSo9bTtkLnNldEZyb21Sb3RhdGlvbk1hdHJpeChiKTtlLng9ZztlLnk9aDtlLno9aztyZXR1cm4gdGhpc319KCksbWFrZVBlcnNwZWN0aXZlOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2b2lkIDA9PT1mJiZjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAubWFrZVBlcnNwZWN0aXZlKCkgaGFzIGJlZW4gcmVkZWZpbmVkIGFuZCBoYXMgYSBuZXcgc2lnbmF0dXJlLiBQbGVhc2UgY2hlY2sgdGhlIGRvY3MuXCIpO1xudmFyIGc9dGhpcy5lbGVtZW50cztnWzBdPTIqZS8oYi1hKTtnWzRdPTA7Z1s4XT0oYithKS8oYi1hKTtnWzEyXT0wO2dbMV09MDtnWzVdPTIqZS8oYy1kKTtnWzldPShjK2QpLyhjLWQpO2dbMTNdPTA7Z1syXT0wO2dbNl09MDtnWzEwXT0tKGYrZSkvKGYtZSk7Z1sxNF09LTIqZiplLyhmLWUpO2dbM109MDtnWzddPTA7Z1sxMV09LTE7Z1sxNV09MDtyZXR1cm4gdGhpc30sbWFrZU9ydGhvZ3JhcGhpYzpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9dGhpcy5lbGVtZW50cyxoPTEvKGItYSksaz0xLyhjLWQpLG09MS8oZi1lKTtnWzBdPTIqaDtnWzRdPTA7Z1s4XT0wO2dbMTJdPS0oKGIrYSkqaCk7Z1sxXT0wO2dbNV09MiprO2dbOV09MDtnWzEzXT0tKChjK2QpKmspO2dbMl09MDtnWzZdPTA7Z1sxMF09LTIqbTtnWzE0XT0tKChmK2UpKm0pO2dbM109MDtnWzddPTA7Z1sxMV09MDtnWzE1XT0xO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50cztcbmE9YS5lbGVtZW50cztmb3IodmFyIGM9MDsxNj5jO2MrKylpZihiW2NdIT09YVtjXSlyZXR1cm4hMTtyZXR1cm4hMH0sZnJvbUFycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9MCk7Zm9yKHZhciBjPTA7MTY+YztjKyspdGhpcy5lbGVtZW50c1tjXT1hW2MrYl07cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1hJiYoYT1bXSk7dm9pZCAwPT09YiYmKGI9MCk7dmFyIGM9dGhpcy5lbGVtZW50czthW2JdPWNbMF07YVtiKzFdPWNbMV07YVtiKzJdPWNbMl07YVtiKzNdPWNbM107YVtiKzRdPWNbNF07YVtiKzVdPWNbNV07YVtiKzZdPWNbNl07YVtiKzddPWNbN107YVtiKzhdPWNbOF07YVtiKzldPWNbOV07YVtiKzEwXT1jWzEwXTthW2IrMTFdPWNbMTFdO2FbYisxMl09Y1sxMl07YVtiKzEzXT1jWzEzXTthW2IrMTRdPWNbMTRdO2FbYisxNV09Y1sxNV07cmV0dXJuIGF9fSk7T2JqZWN0LmFzc2lnbihoYSx7c2xlcnA6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGMuY29weShhKS5zbGVycChiLFxuZCl9LHNsZXJwRmxhdDpmdW5jdGlvbihhLGIsYyxkLGUsZixnKXt2YXIgaD1jW2QrMF0saz1jW2QrMV0sbT1jW2QrMl07Yz1jW2QrM107ZD1lW2YrMF07dmFyIHE9ZVtmKzFdLGw9ZVtmKzJdO2U9ZVtmKzNdO2lmKGMhPT1lfHxoIT09ZHx8ayE9PXF8fG0hPT1sKXtmPTEtZzt2YXIgdT1oKmQraypxK20qbCtjKmUscj0wPD11PzE6LTEscD0xLXUqdTtwPk51bWJlci5FUFNJTE9OJiYocD1NYXRoLnNxcnQocCksdT1NYXRoLmF0YW4yKHAsdSpyKSxmPU1hdGguc2luKGYqdSkvcCxnPU1hdGguc2luKGcqdSkvcCk7cio9ZztoPWgqZitkKnI7az1rKmYrcSpyO209bSpmK2wqcjtjPWMqZitlKnI7Zj09PTEtZyYmKGc9MS9NYXRoLnNxcnQoaCpoK2sqayttKm0rYypjKSxoKj1nLGsqPWcsbSo9ZyxjKj1nKX1hW2JdPWg7YVtiKzFdPWs7YVtiKzJdPW07YVtiKzNdPWN9fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoaGEucHJvdG90eXBlLHt4OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5feH0sXG5zZXQ6ZnVuY3Rpb24oYSl7dGhpcy5feD1hO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpfX0seTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3l9LHNldDpmdW5jdGlvbihhKXt0aGlzLl95PWE7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCl9fSx6OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fen0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMuX3o9YTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKX19LHc6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93fSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5fdz1hO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpfX19KTtPYmplY3QuYXNzaWduKGhhLnByb3RvdHlwZSx7c2V0OmZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuX3g9YTt0aGlzLl95PWI7dGhpcy5fej1jO3RoaXMuX3c9ZDt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5feCx0aGlzLl95LHRoaXMuX3osXG50aGlzLl93KX0sY29weTpmdW5jdGlvbihhKXt0aGlzLl94PWEueDt0aGlzLl95PWEueTt0aGlzLl96PWEuejt0aGlzLl93PWEudzt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sc2V0RnJvbUV1bGVyOmZ1bmN0aW9uKGEsYil7aWYoIWF8fCFhLmlzRXVsZXIpdGhyb3cgRXJyb3IoXCJUSFJFRS5RdWF0ZXJuaW9uOiAuc2V0RnJvbUV1bGVyKCkgbm93IGV4cGVjdHMgYW4gRXVsZXIgcm90YXRpb24gcmF0aGVyIHRoYW4gYSBWZWN0b3IzIGFuZCBvcmRlci5cIik7dmFyIGM9YS5feCxkPWEuX3ksZT1hLl96O2E9YS5vcmRlcjt2YXIgZj1NYXRoLmNvcyxnPU1hdGguc2luLGg9ZihjLzIpLGs9ZihkLzIpLGY9ZihlLzIpLGM9ZyhjLzIpLGQ9ZyhkLzIpLGU9ZyhlLzIpO1wiWFlaXCI9PT1hPyh0aGlzLl94PWMqaypmK2gqZCplLHRoaXMuX3k9aCpkKmYtYyprKmUsdGhpcy5fej1oKmsqZStjKmQqZix0aGlzLl93PWgqaypmLWMqZCplKTpcIllYWlwiPT09YT8odGhpcy5feD1jKmsqZitcbmgqZCplLHRoaXMuX3k9aCpkKmYtYyprKmUsdGhpcy5fej1oKmsqZS1jKmQqZix0aGlzLl93PWgqaypmK2MqZCplKTpcIlpYWVwiPT09YT8odGhpcy5feD1jKmsqZi1oKmQqZSx0aGlzLl95PWgqZCpmK2MqayplLHRoaXMuX3o9aCprKmUrYypkKmYsdGhpcy5fdz1oKmsqZi1jKmQqZSk6XCJaWVhcIj09PWE/KHRoaXMuX3g9YyprKmYtaCpkKmUsdGhpcy5feT1oKmQqZitjKmsqZSx0aGlzLl96PWgqayplLWMqZCpmLHRoaXMuX3c9aCprKmYrYypkKmUpOlwiWVpYXCI9PT1hPyh0aGlzLl94PWMqaypmK2gqZCplLHRoaXMuX3k9aCpkKmYrYyprKmUsdGhpcy5fej1oKmsqZS1jKmQqZix0aGlzLl93PWgqaypmLWMqZCplKTpcIlhaWVwiPT09YSYmKHRoaXMuX3g9YyprKmYtaCpkKmUsdGhpcy5feT1oKmQqZi1jKmsqZSx0aGlzLl96PWgqayplK2MqZCpmLHRoaXMuX3c9aCprKmYrYypkKmUpO2lmKCExIT09Yil0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sc2V0RnJvbUF4aXNBbmdsZTpmdW5jdGlvbihhLFxuYil7Yi89Mjt2YXIgYz1NYXRoLnNpbihiKTt0aGlzLl94PWEueCpjO3RoaXMuX3k9YS55KmM7dGhpcy5fej1hLnoqYzt0aGlzLl93PU1hdGguY29zKGIpO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSxzZXRGcm9tUm90YXRpb25NYXRyaXg6ZnVuY3Rpb24oYSl7dmFyIGI9YS5lbGVtZW50cyxjPWJbMF07YT1iWzRdO3ZhciBkPWJbOF0sZT1iWzFdLGY9Yls1XSxnPWJbOV0saD1iWzJdLGs9Yls2XSxiPWJbMTBdLG09YytmK2I7MDxtPyhjPS41L01hdGguc3FydChtKzEpLHRoaXMuX3c9LjI1L2MsdGhpcy5feD0oay1nKSpjLHRoaXMuX3k9KGQtaCkqYyx0aGlzLl96PShlLWEpKmMpOmM+ZiYmYz5iPyhjPTIqTWF0aC5zcXJ0KDErYy1mLWIpLHRoaXMuX3c9KGstZykvYyx0aGlzLl94PS4yNSpjLHRoaXMuX3k9KGErZSkvYyx0aGlzLl96PShkK2gpL2MpOmY+Yj8oYz0yKk1hdGguc3FydCgxK2YtYy1iKSx0aGlzLl93PShkLWgpL2MsdGhpcy5feD0oYStlKS9jLHRoaXMuX3k9XG4uMjUqYyx0aGlzLl96PShnK2spL2MpOihjPTIqTWF0aC5zcXJ0KDErYi1jLWYpLHRoaXMuX3c9KGUtYSkvYyx0aGlzLl94PShkK2gpL2MsdGhpcy5feT0oZytrKS9jLHRoaXMuX3o9LjI1KmMpO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSxzZXRGcm9tVW5pdFZlY3RvcnM6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiO3JldHVybiBmdW5jdGlvbihjLGQpe3ZvaWQgMD09PWEmJihhPW5ldyBwKTtiPWMuZG90KGQpKzE7MUUtNj5iPyhiPTAsTWF0aC5hYnMoYy54KT5NYXRoLmFicyhjLnopP2Euc2V0KC1jLnksYy54LDApOmEuc2V0KDAsLWMueixjLnkpKTphLmNyb3NzVmVjdG9ycyhjLGQpO3RoaXMuX3g9YS54O3RoaXMuX3k9YS55O3RoaXMuX3o9YS56O3RoaXMuX3c9YjtyZXR1cm4gdGhpcy5ub3JtYWxpemUoKX19KCksaW52ZXJzZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbmp1Z2F0ZSgpLm5vcm1hbGl6ZSgpfSxjb25qdWdhdGU6ZnVuY3Rpb24oKXt0aGlzLl94Kj1cbi0xO3RoaXMuX3kqPS0xO3RoaXMuX3oqPS0xO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSxkb3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX3gqYS5feCt0aGlzLl95KmEuX3krdGhpcy5feiphLl96K3RoaXMuX3cqYS5fd30sbGVuZ3RoU3E6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5feCp0aGlzLl94K3RoaXMuX3kqdGhpcy5feSt0aGlzLl96KnRoaXMuX3ordGhpcy5fdyp0aGlzLl93fSxsZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuX3gqdGhpcy5feCt0aGlzLl95KnRoaXMuX3krdGhpcy5feip0aGlzLl96K3RoaXMuX3cqdGhpcy5fdyl9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMubGVuZ3RoKCk7MD09PWE/KHRoaXMuX3o9dGhpcy5feT10aGlzLl94PTAsdGhpcy5fdz0xKTooYT0xL2EsdGhpcy5feCo9YSx0aGlzLl95Kj1hLHRoaXMuX3oqPWEsdGhpcy5fdyo9YSk7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LFxubXVsdGlwbHk6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdm9pZCAwIT09Yj8oY29uc29sZS53YXJuKFwiVEhSRUUuUXVhdGVybmlvbjogLm11bHRpcGx5KCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAubXVsdGlwbHlRdWF0ZXJuaW9ucyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMubXVsdGlwbHlRdWF0ZXJuaW9ucyhhLGIpKTp0aGlzLm11bHRpcGx5UXVhdGVybmlvbnModGhpcyxhKX0scHJlbXVsdGlwbHk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubXVsdGlwbHlRdWF0ZXJuaW9ucyhhLHRoaXMpfSxtdWx0aXBseVF1YXRlcm5pb25zOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5feCxkPWEuX3ksZT1hLl96O2E9YS5fdzt2YXIgZj1iLl94LGc9Yi5feSxoPWIuX3o7Yj1iLl93O3RoaXMuX3g9YypiK2EqZitkKmgtZSpnO3RoaXMuX3k9ZCpiK2EqZytlKmYtYypoO3RoaXMuX3o9ZSpiK2EqaCtjKmctZCpmO3RoaXMuX3c9YSpiLWMqZi1kKmctZSpoO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO1xucmV0dXJuIHRoaXN9LHNsZXJwOmZ1bmN0aW9uKGEsYil7aWYoMD09PWIpcmV0dXJuIHRoaXM7aWYoMT09PWIpcmV0dXJuIHRoaXMuY29weShhKTt2YXIgYz10aGlzLl94LGQ9dGhpcy5feSxlPXRoaXMuX3osZj10aGlzLl93LGc9ZiphLl93K2MqYS5feCtkKmEuX3krZSphLl96OzA+Zz8odGhpcy5fdz0tYS5fdyx0aGlzLl94PS1hLl94LHRoaXMuX3k9LWEuX3ksdGhpcy5fej0tYS5feixnPS1nKTp0aGlzLmNvcHkoYSk7aWYoMTw9ZylyZXR1cm4gdGhpcy5fdz1mLHRoaXMuX3g9Yyx0aGlzLl95PWQsdGhpcy5fej1lLHRoaXM7YT1NYXRoLnNxcnQoMS1nKmcpO2lmKC4wMDE+TWF0aC5hYnMoYSkpcmV0dXJuIHRoaXMuX3c9LjUqKGYrdGhpcy5fdyksdGhpcy5feD0uNSooYyt0aGlzLl94KSx0aGlzLl95PS41KihkK3RoaXMuX3kpLHRoaXMuX3o9LjUqKGUrdGhpcy5feiksdGhpczt2YXIgaD1NYXRoLmF0YW4yKGEsZyksZz1NYXRoLnNpbigoMS1iKSpoKS9hO2I9TWF0aC5zaW4oYipoKS9hO1xudGhpcy5fdz1mKmcrdGhpcy5fdypiO3RoaXMuX3g9YypnK3RoaXMuX3gqYjt0aGlzLl95PWQqZyt0aGlzLl95KmI7dGhpcy5fej1lKmcrdGhpcy5feipiO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuX3g9PT10aGlzLl94JiZhLl95PT09dGhpcy5feSYmYS5fej09PXRoaXMuX3omJmEuX3c9PT10aGlzLl93fSxmcm9tQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0wKTt0aGlzLl94PWFbYl07dGhpcy5feT1hW2IrMV07dGhpcy5fej1hW2IrMl07dGhpcy5fdz1hW2IrM107dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1hJiYoYT1bXSk7dm9pZCAwPT09YiYmKGI9MCk7YVtiXT10aGlzLl94O2FbYisxXT10aGlzLl95O2FbYisyXT10aGlzLl96O2FbYiszXT10aGlzLl93O3JldHVybiBhfSxvbkNoYW5nZTpmdW5jdGlvbihhKXt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2s9XG5hO3JldHVybiB0aGlzfSxvbkNoYW5nZUNhbGxiYWNrOmZ1bmN0aW9uKCl7fX0pO09iamVjdC5hc3NpZ24ocC5wcm90b3R5cGUse2lzVmVjdG9yMzohMCxzZXQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMueD1hO3RoaXMueT1iO3RoaXMuej1jO3JldHVybiB0aGlzfSxzZXRTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy56PXRoaXMueT10aGlzLng9YTtyZXR1cm4gdGhpc30sc2V0WDpmdW5jdGlvbihhKXt0aGlzLng9YTtyZXR1cm4gdGhpc30sc2V0WTpmdW5jdGlvbihhKXt0aGlzLnk9YTtyZXR1cm4gdGhpc30sc2V0WjpmdW5jdGlvbihhKXt0aGlzLno9YTtyZXR1cm4gdGhpc30sc2V0Q29tcG9uZW50OmZ1bmN0aW9uKGEsYil7c3dpdGNoKGEpe2Nhc2UgMDp0aGlzLng9YjticmVhaztjYXNlIDE6dGhpcy55PWI7YnJlYWs7Y2FzZSAyOnRoaXMuej1iO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK2EpO31yZXR1cm4gdGhpc30sZ2V0Q29tcG9uZW50OmZ1bmN0aW9uKGEpe3N3aXRjaChhKXtjYXNlIDA6cmV0dXJuIHRoaXMueDtcbmNhc2UgMTpyZXR1cm4gdGhpcy55O2Nhc2UgMjpyZXR1cm4gdGhpcy56O2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK2EpO319LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMueCx0aGlzLnksdGhpcy56KX0sY29weTpmdW5jdGlvbihhKXt0aGlzLng9YS54O3RoaXMueT1hLnk7dGhpcy56PWEuejtyZXR1cm4gdGhpc30sYWRkOmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YilyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmFkZCgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmFkZFZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLmFkZFZlY3RvcnMoYSxiKTt0aGlzLngrPWEueDt0aGlzLnkrPWEueTt0aGlzLnorPWEuejtyZXR1cm4gdGhpc30sYWRkU2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMueCs9YTt0aGlzLnkrPWE7dGhpcy56Kz1hO3JldHVybiB0aGlzfSxcbmFkZFZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLng9YS54K2IueDt0aGlzLnk9YS55K2IueTt0aGlzLno9YS56K2IuejtyZXR1cm4gdGhpc30sYWRkU2NhbGVkVmVjdG9yOmZ1bmN0aW9uKGEsYil7dGhpcy54Kz1hLngqYjt0aGlzLnkrPWEueSpiO3RoaXMueis9YS56KmI7cmV0dXJuIHRoaXN9LHN1YjpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5zdWIoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5zdWJWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5zdWJWZWN0b3JzKGEsYik7dGhpcy54LT1hLng7dGhpcy55LT1hLnk7dGhpcy56LT1hLno7cmV0dXJuIHRoaXN9LHN1YlNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLngtPWE7dGhpcy55LT1hO3RoaXMuei09YTtyZXR1cm4gdGhpc30sc3ViVmVjdG9yczpmdW5jdGlvbihhLGIpe3RoaXMueD1hLngtYi54O3RoaXMueT1hLnktYi55O3RoaXMuej1cbmEuei1iLno7cmV0dXJuIHRoaXN9LG11bHRpcGx5OmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YilyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLm11bHRpcGx5KCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAubXVsdGlwbHlWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5tdWx0aXBseVZlY3RvcnMoYSxiKTt0aGlzLngqPWEueDt0aGlzLnkqPWEueTt0aGlzLnoqPWEuejtyZXR1cm4gdGhpc30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy54Kj1hO3RoaXMueSo9YTt0aGlzLnoqPWE7cmV0dXJuIHRoaXN9LG11bHRpcGx5VmVjdG9yczpmdW5jdGlvbihhLGIpe3RoaXMueD1hLngqYi54O3RoaXMueT1hLnkqYi55O3RoaXMuej1hLnoqYi56O3JldHVybiB0aGlzfSxhcHBseUV1bGVyOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IGhhO3JldHVybiBmdW5jdGlvbihiKXtiJiZiLmlzRXVsZXJ8fGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5WZWN0b3IzOiAuYXBwbHlFdWxlcigpIG5vdyBleHBlY3RzIGFuIEV1bGVyIHJvdGF0aW9uIHJhdGhlciB0aGFuIGEgVmVjdG9yMyBhbmQgb3JkZXIuXCIpO1xucmV0dXJuIHRoaXMuYXBwbHlRdWF0ZXJuaW9uKGEuc2V0RnJvbUV1bGVyKGIpKX19KCksYXBwbHlBeGlzQW5nbGU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgaGE7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7cmV0dXJuIHRoaXMuYXBwbHlRdWF0ZXJuaW9uKGEuc2V0RnJvbUF4aXNBbmdsZShiLGMpKX19KCksYXBwbHlNYXRyaXgzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueCxjPXRoaXMueSxkPXRoaXMuejthPWEuZWxlbWVudHM7dGhpcy54PWFbMF0qYithWzNdKmMrYVs2XSpkO3RoaXMueT1hWzFdKmIrYVs0XSpjK2FbN10qZDt0aGlzLno9YVsyXSpiK2FbNV0qYythWzhdKmQ7cmV0dXJuIHRoaXN9LGFwcGx5TWF0cml4NDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLngsYz10aGlzLnksZD10aGlzLno7YT1hLmVsZW1lbnRzO3ZhciBlPTEvKGFbM10qYithWzddKmMrYVsxMV0qZCthWzE1XSk7dGhpcy54PShhWzBdKmIrYVs0XSpjK2FbOF0qZCthWzEyXSkqZTt0aGlzLnk9KGFbMV0qYithWzVdKmMrXG5hWzldKmQrYVsxM10pKmU7dGhpcy56PShhWzJdKmIrYVs2XSpjK2FbMTBdKmQrYVsxNF0pKmU7cmV0dXJuIHRoaXN9LGFwcGx5UXVhdGVybmlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLngsYz10aGlzLnksZD10aGlzLnosZT1hLngsZj1hLnksZz1hLno7YT1hLnc7dmFyIGg9YSpiK2YqZC1nKmMsaz1hKmMrZypiLWUqZCxtPWEqZCtlKmMtZipiLGI9LWUqYi1mKmMtZypkO3RoaXMueD1oKmErYiotZStrKi1nLW0qLWY7dGhpcy55PWsqYStiKi1mK20qLWUtaCotZzt0aGlzLno9bSphK2IqLWcraCotZi1rKi1lO3JldHVybiB0aGlzfSxwcm9qZWN0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE87cmV0dXJuIGZ1bmN0aW9uKGIpe2EubXVsdGlwbHlNYXRyaWNlcyhiLnByb2plY3Rpb25NYXRyaXgsYS5nZXRJbnZlcnNlKGIubWF0cml4V29ybGQpKTtyZXR1cm4gdGhpcy5hcHBseU1hdHJpeDQoYSl9fSgpLHVucHJvamVjdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBPO3JldHVybiBmdW5jdGlvbihiKXthLm11bHRpcGx5TWF0cmljZXMoYi5tYXRyaXhXb3JsZCxcbmEuZ2V0SW52ZXJzZShiLnByb2plY3Rpb25NYXRyaXgpKTtyZXR1cm4gdGhpcy5hcHBseU1hdHJpeDQoYSl9fSgpLHRyYW5zZm9ybURpcmVjdGlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLngsYz10aGlzLnksZD10aGlzLno7YT1hLmVsZW1lbnRzO3RoaXMueD1hWzBdKmIrYVs0XSpjK2FbOF0qZDt0aGlzLnk9YVsxXSpiK2FbNV0qYythWzldKmQ7dGhpcy56PWFbMl0qYithWzZdKmMrYVsxMF0qZDtyZXR1cm4gdGhpcy5ub3JtYWxpemUoKX0sZGl2aWRlOmZ1bmN0aW9uKGEpe3RoaXMueC89YS54O3RoaXMueS89YS55O3RoaXMuei89YS56O3JldHVybiB0aGlzfSxkaXZpZGVTY2FsYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoMS9hKX0sbWluOmZ1bmN0aW9uKGEpe3RoaXMueD1NYXRoLm1pbih0aGlzLngsYS54KTt0aGlzLnk9TWF0aC5taW4odGhpcy55LGEueSk7dGhpcy56PU1hdGgubWluKHRoaXMueixhLnopO3JldHVybiB0aGlzfSxtYXg6ZnVuY3Rpb24oYSl7dGhpcy54PVxuTWF0aC5tYXgodGhpcy54LGEueCk7dGhpcy55PU1hdGgubWF4KHRoaXMueSxhLnkpO3RoaXMuej1NYXRoLm1heCh0aGlzLnosYS56KTtyZXR1cm4gdGhpc30sY2xhbXA6ZnVuY3Rpb24oYSxiKXt0aGlzLng9TWF0aC5tYXgoYS54LE1hdGgubWluKGIueCx0aGlzLngpKTt0aGlzLnk9TWF0aC5tYXgoYS55LE1hdGgubWluKGIueSx0aGlzLnkpKTt0aGlzLno9TWF0aC5tYXgoYS56LE1hdGgubWluKGIueix0aGlzLnopKTtyZXR1cm4gdGhpc30sY2xhbXBTY2FsYXI6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBwO3JldHVybiBmdW5jdGlvbihjLGQpe2Euc2V0KGMsYyxjKTtiLnNldChkLGQsZCk7cmV0dXJuIHRoaXMuY2xhbXAoYSxiKX19KCksY2xhbXBMZW5ndGg6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmxlbmd0aCgpO3JldHVybiB0aGlzLmRpdmlkZVNjYWxhcihjfHwxKS5tdWx0aXBseVNjYWxhcihNYXRoLm1heChhLE1hdGgubWluKGIsYykpKX0sZmxvb3I6ZnVuY3Rpb24oKXt0aGlzLng9XG5NYXRoLmZsb29yKHRoaXMueCk7dGhpcy55PU1hdGguZmxvb3IodGhpcy55KTt0aGlzLno9TWF0aC5mbG9vcih0aGlzLnopO3JldHVybiB0aGlzfSxjZWlsOmZ1bmN0aW9uKCl7dGhpcy54PU1hdGguY2VpbCh0aGlzLngpO3RoaXMueT1NYXRoLmNlaWwodGhpcy55KTt0aGlzLno9TWF0aC5jZWlsKHRoaXMueik7cmV0dXJuIHRoaXN9LHJvdW5kOmZ1bmN0aW9uKCl7dGhpcy54PU1hdGgucm91bmQodGhpcy54KTt0aGlzLnk9TWF0aC5yb3VuZCh0aGlzLnkpO3RoaXMuej1NYXRoLnJvdW5kKHRoaXMueik7cmV0dXJuIHRoaXN9LHJvdW5kVG9aZXJvOmZ1bmN0aW9uKCl7dGhpcy54PTA+dGhpcy54P01hdGguY2VpbCh0aGlzLngpOk1hdGguZmxvb3IodGhpcy54KTt0aGlzLnk9MD50aGlzLnk/TWF0aC5jZWlsKHRoaXMueSk6TWF0aC5mbG9vcih0aGlzLnkpO3RoaXMuej0wPnRoaXMuej9NYXRoLmNlaWwodGhpcy56KTpNYXRoLmZsb29yKHRoaXMueik7cmV0dXJuIHRoaXN9LG5lZ2F0ZTpmdW5jdGlvbigpe3RoaXMueD1cbi10aGlzLng7dGhpcy55PS10aGlzLnk7dGhpcy56PS10aGlzLno7cmV0dXJuIHRoaXN9LGRvdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy54KmEueCt0aGlzLnkqYS55K3RoaXMueiphLnp9LGxlbmd0aFNxOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSt0aGlzLnoqdGhpcy56fSxsZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSt0aGlzLnoqdGhpcy56KX0sbWFuaGF0dGFuTGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguYWJzKHRoaXMueCkrTWF0aC5hYnModGhpcy55KStNYXRoLmFicyh0aGlzLnopfSxub3JtYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIodGhpcy5sZW5ndGgoKXx8MSl9LHNldExlbmd0aDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcihhKX0sbGVycDpmdW5jdGlvbihhLGIpe3RoaXMueCs9KGEueC1cbnRoaXMueCkqYjt0aGlzLnkrPShhLnktdGhpcy55KSpiO3RoaXMueis9KGEuei10aGlzLnopKmI7cmV0dXJuIHRoaXN9LGxlcnBWZWN0b3JzOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5zdWJWZWN0b3JzKGIsYSkubXVsdGlwbHlTY2FsYXIoYykuYWRkKGEpfSxjcm9zczpmdW5jdGlvbihhLGIpe3JldHVybiB2b2lkIDAhPT1iPyhjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuY3Jvc3MoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5jcm9zc1ZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLmNyb3NzVmVjdG9ycyhhLGIpKTp0aGlzLmNyb3NzVmVjdG9ycyh0aGlzLGEpfSxjcm9zc1ZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLngsZD1hLnk7YT1hLno7dmFyIGU9Yi54LGY9Yi55O2I9Yi56O3RoaXMueD1kKmItYSpmO3RoaXMueT1hKmUtYypiO3RoaXMuej1jKmYtZCplO3JldHVybiB0aGlzfSxwcm9qZWN0T25WZWN0b3I6ZnVuY3Rpb24oYSl7dmFyIGI9XG5hLmRvdCh0aGlzKS9hLmxlbmd0aFNxKCk7cmV0dXJuIHRoaXMuY29weShhKS5tdWx0aXBseVNjYWxhcihiKX0scHJvamVjdE9uUGxhbmU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYil7YS5jb3B5KHRoaXMpLnByb2plY3RPblZlY3RvcihiKTtyZXR1cm4gdGhpcy5zdWIoYSl9fSgpLHJlZmxlY3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuc3ViKGEuY29weShiKS5tdWx0aXBseVNjYWxhcigyKnRoaXMuZG90KGIpKSl9fSgpLGFuZ2xlVG86ZnVuY3Rpb24oYSl7YT10aGlzLmRvdChhKS9NYXRoLnNxcnQodGhpcy5sZW5ndGhTcSgpKmEubGVuZ3RoU3EoKSk7cmV0dXJuIE1hdGguYWNvcyhRLmNsYW1wKGEsLTEsMSkpfSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLnNxcnQodGhpcy5kaXN0YW5jZVRvU3F1YXJlZChhKSl9LGRpc3RhbmNlVG9TcXVhcmVkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueC1cbmEueCxjPXRoaXMueS1hLnk7YT10aGlzLnotYS56O3JldHVybiBiKmIrYypjK2EqYX0sbWFuaGF0dGFuRGlzdGFuY2VUbzpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5hYnModGhpcy54LWEueCkrTWF0aC5hYnModGhpcy55LWEueSkrTWF0aC5hYnModGhpcy56LWEueil9LHNldEZyb21TcGhlcmljYWw6ZnVuY3Rpb24oYSl7dmFyIGI9TWF0aC5zaW4oYS5waGkpKmEucmFkaXVzO3RoaXMueD1iKk1hdGguc2luKGEudGhldGEpO3RoaXMueT1NYXRoLmNvcyhhLnBoaSkqYS5yYWRpdXM7dGhpcy56PWIqTWF0aC5jb3MoYS50aGV0YSk7cmV0dXJuIHRoaXN9LHNldEZyb21DeWxpbmRyaWNhbDpmdW5jdGlvbihhKXt0aGlzLng9YS5yYWRpdXMqTWF0aC5zaW4oYS50aGV0YSk7dGhpcy55PWEueTt0aGlzLno9YS5yYWRpdXMqTWF0aC5jb3MoYS50aGV0YSk7cmV0dXJuIHRoaXN9LHNldEZyb21NYXRyaXhQb3NpdGlvbjpmdW5jdGlvbihhKXthPWEuZWxlbWVudHM7dGhpcy54PWFbMTJdO3RoaXMueT1cbmFbMTNdO3RoaXMuej1hWzE0XTtyZXR1cm4gdGhpc30sc2V0RnJvbU1hdHJpeFNjYWxlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2V0RnJvbU1hdHJpeENvbHVtbihhLDApLmxlbmd0aCgpLGM9dGhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKGEsMSkubGVuZ3RoKCk7YT10aGlzLnNldEZyb21NYXRyaXhDb2x1bW4oYSwyKS5sZW5ndGgoKTt0aGlzLng9Yjt0aGlzLnk9Yzt0aGlzLno9YTtyZXR1cm4gdGhpc30sc2V0RnJvbU1hdHJpeENvbHVtbjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmZyb21BcnJheShhLmVsZW1lbnRzLDQqYil9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS54PT09dGhpcy54JiZhLnk9PT10aGlzLnkmJmEuej09PXRoaXMuen0sZnJvbUFycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9MCk7dGhpcy54PWFbYl07dGhpcy55PWFbYisxXTt0aGlzLno9YVtiKzJdO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YSYmKGE9XG5bXSk7dm9pZCAwPT09YiYmKGI9MCk7YVtiXT10aGlzLng7YVtiKzFdPXRoaXMueTthW2IrMl09dGhpcy56O3JldHVybiBhfSxmcm9tQnVmZmVyQXR0cmlidXRlOmZ1bmN0aW9uKGEsYixjKXt2b2lkIDAhPT1jJiZjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiBvZmZzZXQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIC5mcm9tQnVmZmVyQXR0cmlidXRlKCkuXCIpO3RoaXMueD1hLmdldFgoYik7dGhpcy55PWEuZ2V0WShiKTt0aGlzLno9YS5nZXRaKGIpO3JldHVybiB0aGlzfX0pO09iamVjdC5hc3NpZ24obWEucHJvdG90eXBlLHtpc01hdHJpeDM6ITAsc2V0OmZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxrKXt2YXIgbT10aGlzLmVsZW1lbnRzO21bMF09YTttWzFdPWQ7bVsyXT1nO21bM109YjttWzRdPWU7bVs1XT1oO21bNl09YzttWzddPWY7bVs4XT1rO3JldHVybiB0aGlzfSxpZGVudGl0eTpmdW5jdGlvbigpe3RoaXMuc2V0KDEsMCwwLDAsMSwwLDAsMCwxKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmZyb21BcnJheSh0aGlzLmVsZW1lbnRzKX0sXG5jb3B5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHM7YT1hLmVsZW1lbnRzO2JbMF09YVswXTtiWzFdPWFbMV07YlsyXT1hWzJdO2JbM109YVszXTtiWzRdPWFbNF07Yls1XT1hWzVdO2JbNl09YVs2XTtiWzddPWFbN107Yls4XT1hWzhdO3JldHVybiB0aGlzfSxzZXRGcm9tTWF0cml4NDpmdW5jdGlvbihhKXthPWEuZWxlbWVudHM7dGhpcy5zZXQoYVswXSxhWzRdLGFbOF0sYVsxXSxhWzVdLGFbOV0sYVsyXSxhWzZdLGFbMTBdKTtyZXR1cm4gdGhpc30sYXBwbHlUb0J1ZmZlckF0dHJpYnV0ZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBwO3JldHVybiBmdW5jdGlvbihiKXtmb3IodmFyIGM9MCxkPWIuY291bnQ7YzxkO2MrKylhLng9Yi5nZXRYKGMpLGEueT1iLmdldFkoYyksYS56PWIuZ2V0WihjKSxhLmFwcGx5TWF0cml4Myh0aGlzKSxiLnNldFhZWihjLGEueCxhLnksYS56KTtyZXR1cm4gYn19KCksbXVsdGlwbHk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubXVsdGlwbHlNYXRyaWNlcyh0aGlzLFxuYSl9LHByZW11bHRpcGx5OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm11bHRpcGx5TWF0cmljZXMoYSx0aGlzKX0sbXVsdGlwbHlNYXRyaWNlczpmdW5jdGlvbihhLGIpe3ZhciBjPWEuZWxlbWVudHMsZD1iLmVsZW1lbnRzO2I9dGhpcy5lbGVtZW50czthPWNbMF07dmFyIGU9Y1szXSxmPWNbNl0sZz1jWzFdLGg9Y1s0XSxrPWNbN10sbT1jWzJdLHE9Y1s1XSxjPWNbOF0sbD1kWzBdLHA9ZFszXSxyPWRbNl0sdD1kWzFdLHY9ZFs0XSx3PWRbN10sej1kWzJdLHk9ZFs1XSxkPWRbOF07YlswXT1hKmwrZSp0K2YqejtiWzNdPWEqcCtlKnYrZip5O2JbNl09YSpyK2UqdytmKmQ7YlsxXT1nKmwraCp0K2sqejtiWzRdPWcqcCtoKnYrayp5O2JbN109ZypyK2gqdytrKmQ7YlsyXT1tKmwrcSp0K2MqejtiWzVdPW0qcCtxKnYrYyp5O2JbOF09bSpyK3EqdytjKmQ7cmV0dXJuIHRoaXN9LG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHM7YlswXSo9YTtiWzNdKj1hO1xuYls2XSo9YTtiWzFdKj1hO2JbNF0qPWE7Yls3XSo9YTtiWzJdKj1hO2JbNV0qPWE7Yls4XSo9YTtyZXR1cm4gdGhpc30sZGV0ZXJtaW5hbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnRzLGI9YVswXSxjPWFbMV0sZD1hWzJdLGU9YVszXSxmPWFbNF0sZz1hWzVdLGg9YVs2XSxrPWFbN10sYT1hWzhdO3JldHVybiBiKmYqYS1iKmcqay1jKmUqYStjKmcqaCtkKmUqay1kKmYqaH0sZ2V0SW52ZXJzZTpmdW5jdGlvbihhLGIpe2EmJmEuaXNNYXRyaXg0JiZjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4MzogLmdldEludmVyc2UoKSBubyBsb25nZXIgdGFrZXMgYSBNYXRyaXg0IGFyZ3VtZW50LlwiKTt2YXIgYz1hLmVsZW1lbnRzO2E9dGhpcy5lbGVtZW50czt2YXIgZD1jWzBdLGU9Y1sxXSxmPWNbMl0sZz1jWzNdLGg9Y1s0XSxrPWNbNV0sbT1jWzZdLHE9Y1s3XSxjPWNbOF0sbD1jKmgtaypxLHA9ayptLWMqZyxyPXEqZy1oKm0sdD1kKmwrZSpwK2YqcjtpZigwPT09dCl7aWYoITA9PT1cbmIpdGhyb3cgRXJyb3IoXCJUSFJFRS5NYXRyaXgzOiAuZ2V0SW52ZXJzZSgpIGNhbid0IGludmVydCBtYXRyaXgsIGRldGVybWluYW50IGlzIDBcIik7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4MzogLmdldEludmVyc2UoKSBjYW4ndCBpbnZlcnQgbWF0cml4LCBkZXRlcm1pbmFudCBpcyAwXCIpO3JldHVybiB0aGlzLmlkZW50aXR5KCl9Yj0xL3Q7YVswXT1sKmI7YVsxXT0oZipxLWMqZSkqYjthWzJdPShrKmUtZipoKSpiO2FbM109cCpiO2FbNF09KGMqZC1mKm0pKmI7YVs1XT0oZipnLWsqZCkqYjthWzZdPXIqYjthWzddPShlKm0tcSpkKSpiO2FbOF09KGgqZC1lKmcpKmI7cmV0dXJuIHRoaXN9LHRyYW5zcG9zZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWxlbWVudHM7dmFyIGI9YVsxXTthWzFdPWFbM107YVszXT1iO2I9YVsyXTthWzJdPWFbNl07YVs2XT1iO2I9YVs1XTthWzVdPWFbN107YVs3XT1iO3JldHVybiB0aGlzfSxnZXROb3JtYWxNYXRyaXg6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc2V0RnJvbU1hdHJpeDQoYSkuZ2V0SW52ZXJzZSh0aGlzKS50cmFuc3Bvc2UoKX0sXG50cmFuc3Bvc2VJbnRvQXJyYXk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50czthWzBdPWJbMF07YVsxXT1iWzNdO2FbMl09Yls2XTthWzNdPWJbMV07YVs0XT1iWzRdO2FbNV09Yls3XTthWzZdPWJbMl07YVs3XT1iWzVdO2FbOF09Yls4XTtyZXR1cm4gdGhpc30sc2V0VXZUcmFuc2Zvcm06ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dmFyIGg9TWF0aC5jb3MoZSk7ZT1NYXRoLnNpbihlKTt0aGlzLnNldChjKmgsYyplLC1jKihoKmYrZSpnKStmK2EsLWQqZSxkKmgsLWQqKC1lKmYraCpnKStnK2IsMCwwLDEpfSxzY2FsZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZWxlbWVudHM7Y1swXSo9YTtjWzNdKj1hO2NbNl0qPWE7Y1sxXSo9YjtjWzRdKj1iO2NbN10qPWI7cmV0dXJuIHRoaXN9LHJvdGF0ZTpmdW5jdGlvbihhKXt2YXIgYj1NYXRoLmNvcyhhKTthPU1hdGguc2luKGEpO3ZhciBjPXRoaXMuZWxlbWVudHMsZD1jWzBdLGU9Y1szXSxmPWNbNl0sZz1jWzFdLGg9Y1s0XSxcbms9Y1s3XTtjWzBdPWIqZCthKmc7Y1szXT1iKmUrYSpoO2NbNl09YipmK2EqaztjWzFdPS1hKmQrYipnO2NbNF09LWEqZStiKmg7Y1s3XT0tYSpmK2IqaztyZXR1cm4gdGhpc30sdHJhbnNsYXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5lbGVtZW50cztjWzBdKz1hKmNbMl07Y1szXSs9YSpjWzVdO2NbNl0rPWEqY1s4XTtjWzFdKz1iKmNbMl07Y1s0XSs9YipjWzVdO2NbN10rPWIqY1s4XTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHM7YT1hLmVsZW1lbnRzO2Zvcih2YXIgYz0wOzk+YztjKyspaWYoYltjXSE9PWFbY10pcmV0dXJuITE7cmV0dXJuITB9LGZyb21BcnJheTpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPTApO2Zvcih2YXIgYz0wOzk+YztjKyspdGhpcy5lbGVtZW50c1tjXT1hW2MrYl07cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1hJiYoYT1bXSk7dm9pZCAwPT09YiYmKGI9MCk7dmFyIGM9XG50aGlzLmVsZW1lbnRzO2FbYl09Y1swXTthW2IrMV09Y1sxXTthW2IrMl09Y1syXTthW2IrM109Y1szXTthW2IrNF09Y1s0XTthW2IrNV09Y1s1XTthW2IrNl09Y1s2XTthW2IrN109Y1s3XTthW2IrOF09Y1s4XTtyZXR1cm4gYX19KTt2YXIgQWY9MDtVLkRFRkFVTFRfSU1BR0U9dm9pZCAwO1UuREVGQVVMVF9NQVBQSU5HPTMwMDtVLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoemEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VSxpc1RleHR1cmU6ITAsY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5uYW1lPWEubmFtZTt0aGlzLmltYWdlPWEuaW1hZ2U7dGhpcy5taXBtYXBzPWEubWlwbWFwcy5zbGljZSgwKTt0aGlzLm1hcHBpbmc9YS5tYXBwaW5nO3RoaXMud3JhcFM9YS53cmFwUzt0aGlzLndyYXBUPWEud3JhcFQ7dGhpcy5tYWdGaWx0ZXI9YS5tYWdGaWx0ZXI7dGhpcy5taW5GaWx0ZXI9XG5hLm1pbkZpbHRlcjt0aGlzLmFuaXNvdHJvcHk9YS5hbmlzb3Ryb3B5O3RoaXMuZm9ybWF0PWEuZm9ybWF0O3RoaXMudHlwZT1hLnR5cGU7dGhpcy5vZmZzZXQuY29weShhLm9mZnNldCk7dGhpcy5yZXBlYXQuY29weShhLnJlcGVhdCk7dGhpcy5jZW50ZXIuY29weShhLmNlbnRlcik7dGhpcy5yb3RhdGlvbj1hLnJvdGF0aW9uO3RoaXMubWF0cml4QXV0b1VwZGF0ZT1hLm1hdHJpeEF1dG9VcGRhdGU7dGhpcy5tYXRyaXguY29weShhLm1hdHJpeCk7dGhpcy5nZW5lcmF0ZU1pcG1hcHM9YS5nZW5lcmF0ZU1pcG1hcHM7dGhpcy5wcmVtdWx0aXBseUFscGhhPWEucHJlbXVsdGlwbHlBbHBoYTt0aGlzLmZsaXBZPWEuZmxpcFk7dGhpcy51bnBhY2tBbGlnbm1lbnQ9YS51bnBhY2tBbGlnbm1lbnQ7dGhpcy5lbmNvZGluZz1hLmVuY29kaW5nO3JldHVybiB0aGlzfSx0b0pTT046ZnVuY3Rpb24oYSl7dmFyIGI9dm9pZCAwPT09YXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhO2lmKCFiJiZ2b2lkIDAhPT1cbmEudGV4dHVyZXNbdGhpcy51dWlkXSlyZXR1cm4gYS50ZXh0dXJlc1t0aGlzLnV1aWRdO3ZhciBjPXttZXRhZGF0YTp7dmVyc2lvbjo0LjUsdHlwZTpcIlRleHR1cmVcIixnZW5lcmF0b3I6XCJUZXh0dXJlLnRvSlNPTlwifSx1dWlkOnRoaXMudXVpZCxuYW1lOnRoaXMubmFtZSxtYXBwaW5nOnRoaXMubWFwcGluZyxyZXBlYXQ6W3RoaXMucmVwZWF0LngsdGhpcy5yZXBlYXQueV0sb2Zmc2V0Olt0aGlzLm9mZnNldC54LHRoaXMub2Zmc2V0LnldLGNlbnRlcjpbdGhpcy5jZW50ZXIueCx0aGlzLmNlbnRlci55XSxyb3RhdGlvbjp0aGlzLnJvdGF0aW9uLHdyYXA6W3RoaXMud3JhcFMsdGhpcy53cmFwVF0sbWluRmlsdGVyOnRoaXMubWluRmlsdGVyLG1hZ0ZpbHRlcjp0aGlzLm1hZ0ZpbHRlcixhbmlzb3Ryb3B5OnRoaXMuYW5pc290cm9weSxmbGlwWTp0aGlzLmZsaXBZfTtpZih2b2lkIDAhPT10aGlzLmltYWdlKXt2YXIgZD10aGlzLmltYWdlO3ZvaWQgMD09PWQudXVpZCYmKGQudXVpZD1RLmdlbmVyYXRlVVVJRCgpKTtcbmlmKCFiJiZ2b2lkIDA9PT1hLmltYWdlc1tkLnV1aWRdKXt2YXIgZT1hLmltYWdlcyxmPWQudXVpZCxnPWQudXVpZDtpZihkIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpdmFyIGg9ZDtlbHNle2g9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiY2FudmFzXCIpO2gud2lkdGg9ZC53aWR0aDtoLmhlaWdodD1kLmhlaWdodDt2YXIgaz1oLmdldENvbnRleHQoXCIyZFwiKTtkIGluc3RhbmNlb2YgSW1hZ2VEYXRhP2sucHV0SW1hZ2VEYXRhKGQsMCwwKTprLmRyYXdJbWFnZShkLDAsMCxkLndpZHRoLGQuaGVpZ2h0KX1oPTIwNDg8aC53aWR0aHx8MjA0ODxoLmhlaWdodD9oLnRvRGF0YVVSTChcImltYWdlL2pwZWdcIiwuNik6aC50b0RhdGFVUkwoXCJpbWFnZS9wbmdcIik7ZVtmXT17dXVpZDpnLHVybDpofX1jLmltYWdlPWQudXVpZH1ifHwoYS50ZXh0dXJlc1t0aGlzLnV1aWRdPWMpO3JldHVybiBjfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9LFxudHJhbnNmb3JtVXY6ZnVuY3Rpb24oYSl7aWYoMzAwPT09dGhpcy5tYXBwaW5nKXthLmFwcGx5TWF0cml4Myh0aGlzLm1hdHJpeCk7aWYoMD5hLnh8fDE8YS54KXN3aXRjaCh0aGlzLndyYXBTKXtjYXNlIDFFMzphLngtPU1hdGguZmxvb3IoYS54KTticmVhaztjYXNlIDEwMDE6YS54PTA+YS54PzA6MTticmVhaztjYXNlIDEwMDI6YS54PTE9PT1NYXRoLmFicyhNYXRoLmZsb29yKGEueCklMik/TWF0aC5jZWlsKGEueCktYS54OmEueC1NYXRoLmZsb29yKGEueCl9aWYoMD5hLnl8fDE8YS55KXN3aXRjaCh0aGlzLndyYXBUKXtjYXNlIDFFMzphLnktPU1hdGguZmxvb3IoYS55KTticmVhaztjYXNlIDEwMDE6YS55PTA+YS55PzA6MTticmVhaztjYXNlIDEwMDI6YS55PTE9PT1NYXRoLmFicyhNYXRoLmZsb29yKGEueSklMik/TWF0aC5jZWlsKGEueSktYS55OmEueS1NYXRoLmZsb29yKGEueSl9dGhpcy5mbGlwWSYmKGEueT0xLWEueSl9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShVLnByb3RvdHlwZSxcblwibmVlZHNVcGRhdGVcIix7c2V0OmZ1bmN0aW9uKGEpeyEwPT09YSYmdGhpcy52ZXJzaW9uKyt9fSk7T2JqZWN0LmFzc2lnbihhYS5wcm90b3R5cGUse2lzVmVjdG9yNDohMCxzZXQ6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy54PWE7dGhpcy55PWI7dGhpcy56PWM7dGhpcy53PWQ7cmV0dXJuIHRoaXN9LHNldFNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLnc9dGhpcy56PXRoaXMueT10aGlzLng9YTtyZXR1cm4gdGhpc30sc2V0WDpmdW5jdGlvbihhKXt0aGlzLng9YTtyZXR1cm4gdGhpc30sc2V0WTpmdW5jdGlvbihhKXt0aGlzLnk9YTtyZXR1cm4gdGhpc30sc2V0WjpmdW5jdGlvbihhKXt0aGlzLno9YTtyZXR1cm4gdGhpc30sc2V0VzpmdW5jdGlvbihhKXt0aGlzLnc9YTtyZXR1cm4gdGhpc30sc2V0Q29tcG9uZW50OmZ1bmN0aW9uKGEsYil7c3dpdGNoKGEpe2Nhc2UgMDp0aGlzLng9YjticmVhaztjYXNlIDE6dGhpcy55PWI7YnJlYWs7Y2FzZSAyOnRoaXMuej1iO2JyZWFrO2Nhc2UgMzp0aGlzLnc9XG5iO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK2EpO31yZXR1cm4gdGhpc30sZ2V0Q29tcG9uZW50OmZ1bmN0aW9uKGEpe3N3aXRjaChhKXtjYXNlIDA6cmV0dXJuIHRoaXMueDtjYXNlIDE6cmV0dXJuIHRoaXMueTtjYXNlIDI6cmV0dXJuIHRoaXMuejtjYXNlIDM6cmV0dXJuIHRoaXMudztkZWZhdWx0OnRocm93IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIithKTt9fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLngsdGhpcy55LHRoaXMueix0aGlzLncpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMueD1hLng7dGhpcy55PWEueTt0aGlzLno9YS56O3RoaXMudz12b2lkIDAhPT1hLnc/YS53OjE7cmV0dXJuIHRoaXN9LGFkZDpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjQ6IC5hZGQoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5hZGRWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksXG50aGlzLmFkZFZlY3RvcnMoYSxiKTt0aGlzLngrPWEueDt0aGlzLnkrPWEueTt0aGlzLnorPWEuejt0aGlzLncrPWEudztyZXR1cm4gdGhpc30sYWRkU2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMueCs9YTt0aGlzLnkrPWE7dGhpcy56Kz1hO3RoaXMudys9YTtyZXR1cm4gdGhpc30sYWRkVmVjdG9yczpmdW5jdGlvbihhLGIpe3RoaXMueD1hLngrYi54O3RoaXMueT1hLnkrYi55O3RoaXMuej1hLnorYi56O3RoaXMudz1hLncrYi53O3JldHVybiB0aGlzfSxhZGRTY2FsZWRWZWN0b3I6ZnVuY3Rpb24oYSxiKXt0aGlzLngrPWEueCpiO3RoaXMueSs9YS55KmI7dGhpcy56Kz1hLnoqYjt0aGlzLncrPWEudypiO3JldHVybiB0aGlzfSxzdWI6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1iKXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3I0OiAuc3ViKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuc3ViVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuc3ViVmVjdG9ycyhhLFxuYik7dGhpcy54LT1hLng7dGhpcy55LT1hLnk7dGhpcy56LT1hLno7dGhpcy53LT1hLnc7cmV0dXJuIHRoaXN9LHN1YlNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLngtPWE7dGhpcy55LT1hO3RoaXMuei09YTt0aGlzLnctPWE7cmV0dXJuIHRoaXN9LHN1YlZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLng9YS54LWIueDt0aGlzLnk9YS55LWIueTt0aGlzLno9YS56LWIuejt0aGlzLnc9YS53LWIudztyZXR1cm4gdGhpc30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy54Kj1hO3RoaXMueSo9YTt0aGlzLnoqPWE7dGhpcy53Kj1hO3JldHVybiB0aGlzfSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy54LGM9dGhpcy55LGQ9dGhpcy56LGU9dGhpcy53O2E9YS5lbGVtZW50czt0aGlzLng9YVswXSpiK2FbNF0qYythWzhdKmQrYVsxMl0qZTt0aGlzLnk9YVsxXSpiK2FbNV0qYythWzldKmQrYVsxM10qZTt0aGlzLno9YVsyXSpiK2FbNl0qYythWzEwXSpkK2FbMTRdKlxuZTt0aGlzLnc9YVszXSpiK2FbN10qYythWzExXSpkK2FbMTVdKmU7cmV0dXJuIHRoaXN9LGRpdmlkZVNjYWxhcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tdWx0aXBseVNjYWxhcigxL2EpfSxzZXRBeGlzQW5nbGVGcm9tUXVhdGVybmlvbjpmdW5jdGlvbihhKXt0aGlzLnc9MipNYXRoLmFjb3MoYS53KTt2YXIgYj1NYXRoLnNxcnQoMS1hLncqYS53KTsxRS00PmI/KHRoaXMueD0xLHRoaXMuej10aGlzLnk9MCk6KHRoaXMueD1hLngvYix0aGlzLnk9YS55L2IsdGhpcy56PWEuei9iKTtyZXR1cm4gdGhpc30sc2V0QXhpc0FuZ2xlRnJvbVJvdGF0aW9uTWF0cml4OmZ1bmN0aW9uKGEpe2E9YS5lbGVtZW50czt2YXIgYj1hWzBdO3ZhciBjPWFbNF07dmFyIGQ9YVs4XSxlPWFbMV0sZj1hWzVdLGc9YVs5XTt2YXIgaD1hWzJdO3ZhciBrPWFbNl07dmFyIG09YVsxMF07aWYoLjAxPk1hdGguYWJzKGMtZSkmJi4wMT5NYXRoLmFicyhkLWgpJiYuMDE+TWF0aC5hYnMoZy1rKSl7aWYoLjE+TWF0aC5hYnMoYytcbmUpJiYuMT5NYXRoLmFicyhkK2gpJiYuMT5NYXRoLmFicyhnK2spJiYuMT5NYXRoLmFicyhiK2YrbS0zKSlyZXR1cm4gdGhpcy5zZXQoMSwwLDAsMCksdGhpczthPU1hdGguUEk7Yj0oYisxKS8yO2Y9KGYrMSkvMjttPShtKzEpLzI7Yz0oYytlKS80O2Q9KGQraCkvNDtnPShnK2spLzQ7Yj5mJiZiPm0/LjAxPmI/KGs9MCxjPWg9LjcwNzEwNjc4MSk6KGs9TWF0aC5zcXJ0KGIpLGg9Yy9rLGM9ZC9rKTpmPm0/LjAxPmY/KGs9LjcwNzEwNjc4MSxoPTAsYz0uNzA3MTA2NzgxKTooaD1NYXRoLnNxcnQoZiksaz1jL2gsYz1nL2gpOi4wMT5tPyhoPWs9LjcwNzEwNjc4MSxjPTApOihjPU1hdGguc3FydChtKSxrPWQvYyxoPWcvYyk7dGhpcy5zZXQoayxoLGMsYSk7cmV0dXJuIHRoaXN9YT1NYXRoLnNxcnQoKGstZykqKGstZykrKGQtaCkqKGQtaCkrKGUtYykqKGUtYykpOy4wMDE+TWF0aC5hYnMoYSkmJihhPTEpO3RoaXMueD0oay1nKS9hO3RoaXMueT0oZC1oKS9hO3RoaXMuej0oZS1jKS9hO1xudGhpcy53PU1hdGguYWNvcygoYitmK20tMSkvMik7cmV0dXJuIHRoaXN9LG1pbjpmdW5jdGlvbihhKXt0aGlzLng9TWF0aC5taW4odGhpcy54LGEueCk7dGhpcy55PU1hdGgubWluKHRoaXMueSxhLnkpO3RoaXMuej1NYXRoLm1pbih0aGlzLnosYS56KTt0aGlzLnc9TWF0aC5taW4odGhpcy53LGEudyk7cmV0dXJuIHRoaXN9LG1heDpmdW5jdGlvbihhKXt0aGlzLng9TWF0aC5tYXgodGhpcy54LGEueCk7dGhpcy55PU1hdGgubWF4KHRoaXMueSxhLnkpO3RoaXMuej1NYXRoLm1heCh0aGlzLnosYS56KTt0aGlzLnc9TWF0aC5tYXgodGhpcy53LGEudyk7cmV0dXJuIHRoaXN9LGNsYW1wOmZ1bmN0aW9uKGEsYil7dGhpcy54PU1hdGgubWF4KGEueCxNYXRoLm1pbihiLngsdGhpcy54KSk7dGhpcy55PU1hdGgubWF4KGEueSxNYXRoLm1pbihiLnksdGhpcy55KSk7dGhpcy56PU1hdGgubWF4KGEueixNYXRoLm1pbihiLnosdGhpcy56KSk7dGhpcy53PU1hdGgubWF4KGEudyxNYXRoLm1pbihiLncsXG50aGlzLncpKTtyZXR1cm4gdGhpc30sY2xhbXBTY2FsYXI6ZnVuY3Rpb24oKXt2YXIgYSxiO3JldHVybiBmdW5jdGlvbihjLGQpe3ZvaWQgMD09PWEmJihhPW5ldyBhYSxiPW5ldyBhYSk7YS5zZXQoYyxjLGMsYyk7Yi5zZXQoZCxkLGQsZCk7cmV0dXJuIHRoaXMuY2xhbXAoYSxiKX19KCksY2xhbXBMZW5ndGg6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmxlbmd0aCgpO3JldHVybiB0aGlzLmRpdmlkZVNjYWxhcihjfHwxKS5tdWx0aXBseVNjYWxhcihNYXRoLm1heChhLE1hdGgubWluKGIsYykpKX0sZmxvb3I6ZnVuY3Rpb24oKXt0aGlzLng9TWF0aC5mbG9vcih0aGlzLngpO3RoaXMueT1NYXRoLmZsb29yKHRoaXMueSk7dGhpcy56PU1hdGguZmxvb3IodGhpcy56KTt0aGlzLnc9TWF0aC5mbG9vcih0aGlzLncpO3JldHVybiB0aGlzfSxjZWlsOmZ1bmN0aW9uKCl7dGhpcy54PU1hdGguY2VpbCh0aGlzLngpO3RoaXMueT1NYXRoLmNlaWwodGhpcy55KTt0aGlzLno9TWF0aC5jZWlsKHRoaXMueik7XG50aGlzLnc9TWF0aC5jZWlsKHRoaXMudyk7cmV0dXJuIHRoaXN9LHJvdW5kOmZ1bmN0aW9uKCl7dGhpcy54PU1hdGgucm91bmQodGhpcy54KTt0aGlzLnk9TWF0aC5yb3VuZCh0aGlzLnkpO3RoaXMuej1NYXRoLnJvdW5kKHRoaXMueik7dGhpcy53PU1hdGgucm91bmQodGhpcy53KTtyZXR1cm4gdGhpc30scm91bmRUb1plcm86ZnVuY3Rpb24oKXt0aGlzLng9MD50aGlzLng/TWF0aC5jZWlsKHRoaXMueCk6TWF0aC5mbG9vcih0aGlzLngpO3RoaXMueT0wPnRoaXMueT9NYXRoLmNlaWwodGhpcy55KTpNYXRoLmZsb29yKHRoaXMueSk7dGhpcy56PTA+dGhpcy56P01hdGguY2VpbCh0aGlzLnopOk1hdGguZmxvb3IodGhpcy56KTt0aGlzLnc9MD50aGlzLnc/TWF0aC5jZWlsKHRoaXMudyk6TWF0aC5mbG9vcih0aGlzLncpO3JldHVybiB0aGlzfSxuZWdhdGU6ZnVuY3Rpb24oKXt0aGlzLng9LXRoaXMueDt0aGlzLnk9LXRoaXMueTt0aGlzLno9LXRoaXMuejt0aGlzLnc9LXRoaXMudztyZXR1cm4gdGhpc30sXG5kb3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMueCphLngrdGhpcy55KmEueSt0aGlzLnoqYS56K3RoaXMudyphLnd9LGxlbmd0aFNxOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSt0aGlzLnoqdGhpcy56K3RoaXMudyp0aGlzLnd9LGxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBNYXRoLnNxcnQodGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55K3RoaXMueip0aGlzLnordGhpcy53KnRoaXMudyl9LG1hbmhhdHRhbkxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBNYXRoLmFicyh0aGlzLngpK01hdGguYWJzKHRoaXMueSkrTWF0aC5hYnModGhpcy56KStNYXRoLmFicyh0aGlzLncpfSxub3JtYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIodGhpcy5sZW5ndGgoKXx8MSl9LHNldExlbmd0aDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcihhKX0sbGVycDpmdW5jdGlvbihhLGIpe3RoaXMueCs9XG4oYS54LXRoaXMueCkqYjt0aGlzLnkrPShhLnktdGhpcy55KSpiO3RoaXMueis9KGEuei10aGlzLnopKmI7dGhpcy53Kz0oYS53LXRoaXMudykqYjtyZXR1cm4gdGhpc30sbGVycFZlY3RvcnM6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLnN1YlZlY3RvcnMoYixhKS5tdWx0aXBseVNjYWxhcihjKS5hZGQoYSl9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS54PT09dGhpcy54JiZhLnk9PT10aGlzLnkmJmEuej09PXRoaXMueiYmYS53PT09dGhpcy53fSxmcm9tQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0wKTt0aGlzLng9YVtiXTt0aGlzLnk9YVtiKzFdO3RoaXMuej1hW2IrMl07dGhpcy53PWFbYiszXTtyZXR1cm4gdGhpc30sdG9BcnJheTpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWEmJihhPVtdKTt2b2lkIDA9PT1iJiYoYj0wKTthW2JdPXRoaXMueDthW2IrMV09dGhpcy55O2FbYisyXT10aGlzLno7YVtiKzNdPXRoaXMudztyZXR1cm4gYX0sZnJvbUJ1ZmZlckF0dHJpYnV0ZTpmdW5jdGlvbihhLFxuYixjKXt2b2lkIDAhPT1jJiZjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3I0OiBvZmZzZXQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIC5mcm9tQnVmZmVyQXR0cmlidXRlKCkuXCIpO3RoaXMueD1hLmdldFgoYik7dGhpcy55PWEuZ2V0WShiKTt0aGlzLno9YS5nZXRaKGIpO3RoaXMudz1hLmdldFcoYik7cmV0dXJuIHRoaXN9fSk7a2IucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh6YS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjprYixpc1dlYkdMUmVuZGVyVGFyZ2V0OiEwLHNldFNpemU6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLndpZHRoIT09YXx8dGhpcy5oZWlnaHQhPT1iKXRoaXMud2lkdGg9YSx0aGlzLmhlaWdodD1iLHRoaXMuZGlzcG9zZSgpO3RoaXMudmlld3BvcnQuc2V0KDAsMCxhLGIpO3RoaXMuc2Npc3Nvci5zZXQoMCwwLGEsYil9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMud2lkdGg9XG5hLndpZHRoO3RoaXMuaGVpZ2h0PWEuaGVpZ2h0O3RoaXMudmlld3BvcnQuY29weShhLnZpZXdwb3J0KTt0aGlzLnRleHR1cmU9YS50ZXh0dXJlLmNsb25lKCk7dGhpcy5kZXB0aEJ1ZmZlcj1hLmRlcHRoQnVmZmVyO3RoaXMuc3RlbmNpbEJ1ZmZlcj1hLnN0ZW5jaWxCdWZmZXI7dGhpcy5kZXB0aFRleHR1cmU9YS5kZXB0aFRleHR1cmU7cmV0dXJuIHRoaXN9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJkaXNwb3NlXCJ9KX19KTtKYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShrYi5wcm90b3R5cGUpO0piLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1KYjtKYi5wcm90b3R5cGUuaXNXZWJHTFJlbmRlclRhcmdldEN1YmU9ITA7bGIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVS5wcm90b3R5cGUpO2xiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1sYjtsYi5wcm90b3R5cGUuaXNEYXRhVGV4dHVyZT0hMDtkYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShVLnByb3RvdHlwZSk7XG5kYi5wcm90b3R5cGUuY29uc3RydWN0b3I9ZGI7ZGIucHJvdG90eXBlLmlzQ3ViZVRleHR1cmU9ITA7T2JqZWN0LmRlZmluZVByb3BlcnR5KGRiLnByb3RvdHlwZSxcImltYWdlc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbWFnZX0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMuaW1hZ2U9YX19KTt2YXIgTmU9bmV3IFUsT2U9bmV3IGRiLEllPVtdLEtlPVtdLE1lPW5ldyBGbG9hdDMyQXJyYXkoMTYpLExlPW5ldyBGbG9hdDMyQXJyYXkoOSk7U2UucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMuc2VxLGQ9MCxlPWMubGVuZ3RoO2QhPT1lOysrZCl7dmFyIGY9Y1tkXTtmLnNldFZhbHVlKGEsYltmLmlkXSl9fTt2YXIgVmQ9LyhbXFx3XFxkX10rKShcXF0pPyhcXFt8XFwuKT8vZzttYi5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24oYSxiLGMpe2I9dGhpcy5tYXBbYl07dm9pZCAwIT09YiYmYi5zZXRWYWx1ZShhLGMsdGhpcy5yZW5kZXJlcil9O21iLnByb3RvdHlwZS5zZXRPcHRpb25hbD1cbmZ1bmN0aW9uKGEsYixjKXtiPWJbY107dm9pZCAwIT09YiYmdGhpcy5zZXRWYWx1ZShhLGMsYil9O21iLnVwbG9hZD1mdW5jdGlvbihhLGIsYyxkKXtmb3IodmFyIGU9MCxmPWIubGVuZ3RoO2UhPT1mOysrZSl7dmFyIGc9YltlXSxoPWNbZy5pZF07ITEhPT1oLm5lZWRzVXBkYXRlJiZnLnNldFZhbHVlKGEsaC52YWx1ZSxkKX19O21iLnNlcVdpdGhWYWx1ZT1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXSxkPTAsZT1hLmxlbmd0aDtkIT09ZTsrK2Qpe3ZhciBmPWFbZF07Zi5pZCBpbiBiJiZjLnB1c2goZil9cmV0dXJuIGN9O3ZhciBLZz17YWxpY2VibHVlOjE1NzkyMzgzLGFudGlxdWV3aGl0ZToxNjQ0NDM3NSxhcXVhOjY1NTM1LGFxdWFtYXJpbmU6ODM4ODU2NCxhenVyZToxNTc5NDE3NSxiZWlnZToxNjExOTI2MCxiaXNxdWU6MTY3NzAyNDQsYmxhY2s6MCxibGFuY2hlZGFsbW9uZDoxNjc3MjA0NSxibHVlOjI1NSxibHVldmlvbGV0OjkwNTUyMDIsYnJvd246MTA4MjQyMzQsYnVybHl3b29kOjE0NTk2MjMxLFxuY2FkZXRibHVlOjYyNjY1MjgsY2hhcnRyZXVzZTo4Mzg4MzUyLGNob2NvbGF0ZToxMzc4OTQ3MCxjb3JhbDoxNjc0NDI3Mixjb3JuZmxvd2VyYmx1ZTo2NTkxOTgxLGNvcm5zaWxrOjE2Nzc1Mzg4LGNyaW1zb246MTQ0MjMxMDAsY3lhbjo2NTUzNSxkYXJrYmx1ZToxMzksZGFya2N5YW46MzU3MjMsZGFya2dvbGRlbnJvZDoxMjA5MjkzOSxkYXJrZ3JheToxMTExOTAxNyxkYXJrZ3JlZW46MjU2MDAsZGFya2dyZXk6MTExMTkwMTcsZGFya2toYWtpOjEyNDMzMjU5LGRhcmttYWdlbnRhOjkxMDk2NDMsZGFya29saXZlZ3JlZW46NTU5Nzk5OSxkYXJrb3JhbmdlOjE2NzQ3NTIwLGRhcmtvcmNoaWQ6MTAwNDAwMTIsZGFya3JlZDo5MTA5NTA0LGRhcmtzYWxtb246MTUzMDg0MTAsZGFya3NlYWdyZWVuOjk0MTk5MTksZGFya3NsYXRlYmx1ZTo0NzM0MzQ3LGRhcmtzbGF0ZWdyYXk6MzEwMDQ5NSxkYXJrc2xhdGVncmV5OjMxMDA0OTUsZGFya3R1cnF1b2lzZTo1Mjk0NSxkYXJrdmlvbGV0Ojk2OTk1MzksXG5kZWVwcGluazoxNjcxNjk0NyxkZWVwc2t5Ymx1ZTo0OTE1MSxkaW1ncmF5OjY5MDgyNjUsZGltZ3JleTo2OTA4MjY1LGRvZGdlcmJsdWU6MjAwMzE5OSxmaXJlYnJpY2s6MTE2NzQxNDYsZmxvcmFsd2hpdGU6MTY3NzU5MjAsZm9yZXN0Z3JlZW46MjI2Mzg0MixmdWNoc2lhOjE2NzExOTM1LGdhaW5zYm9ybzoxNDQ3NDQ2MCxnaG9zdHdoaXRlOjE2MzE2NjcxLGdvbGQ6MTY3NjY3MjAsZ29sZGVucm9kOjE0MzI5MTIwLGdyYXk6ODQyMTUwNCxncmVlbjozMjc2OCxncmVlbnllbGxvdzoxMTQwMzA1NSxncmV5Ojg0MjE1MDQsaG9uZXlkZXc6MTU3OTQxNjAsaG90cGluazoxNjczODc0MCxpbmRpYW5yZWQ6MTM0NTg1MjQsaW5kaWdvOjQ5MTUzMzAsaXZvcnk6MTY3NzcyMDAsa2hha2k6MTU3ODc2NjAsbGF2ZW5kZXI6MTUxMzI0MTAsbGF2ZW5kZXJibHVzaDoxNjc3MzM2NSxsYXduZ3JlZW46ODE5MDk3NixsZW1vbmNoaWZmb246MTY3NzU4ODUsbGlnaHRibHVlOjExMzkzMjU0LGxpZ2h0Y29yYWw6MTU3NjE1MzYsXG5saWdodGN5YW46MTQ3NDU1OTksbGlnaHRnb2xkZW5yb2R5ZWxsb3c6MTY0NDgyMTAsbGlnaHRncmF5OjEzODgyMzIzLGxpZ2h0Z3JlZW46OTQ5ODI1NixsaWdodGdyZXk6MTM4ODIzMjMsbGlnaHRwaW5rOjE2NzU4NDY1LGxpZ2h0c2FsbW9uOjE2NzUyNzYyLGxpZ2h0c2VhZ3JlZW46MjE0Mjg5MCxsaWdodHNreWJsdWU6ODkwMDM0NixsaWdodHNsYXRlZ3JheTo3ODMzNzUzLGxpZ2h0c2xhdGVncmV5Ojc4MzM3NTMsbGlnaHRzdGVlbGJsdWU6MTE1ODQ3MzQsbGlnaHR5ZWxsb3c6MTY3NzcxODQsbGltZTo2NTI4MCxsaW1lZ3JlZW46MzMyOTMzMCxsaW5lbjoxNjQ0NTY3MCxtYWdlbnRhOjE2NzExOTM1LG1hcm9vbjo4Mzg4NjA4LG1lZGl1bWFxdWFtYXJpbmU6NjczNzMyMixtZWRpdW1ibHVlOjIwNSxtZWRpdW1vcmNoaWQ6MTIyMTE2NjcsbWVkaXVtcHVycGxlOjk2NjI2ODMsbWVkaXVtc2VhZ3JlZW46Mzk3ODA5NyxtZWRpdW1zbGF0ZWJsdWU6ODA4Nzc5MCxtZWRpdW1zcHJpbmdncmVlbjo2NDE1NCxcbm1lZGl1bXR1cnF1b2lzZTo0NzcyMzAwLG1lZGl1bXZpb2xldHJlZDoxMzA0NzE3MyxtaWRuaWdodGJsdWU6MTY0NDkxMixtaW50Y3JlYW06MTYxMjE4NTAsbWlzdHlyb3NlOjE2NzcwMjczLG1vY2Nhc2luOjE2NzcwMjI5LG5hdmFqb3doaXRlOjE2NzY4Njg1LG5hdnk6MTI4LG9sZGxhY2U6MTY2NDM1NTgsb2xpdmU6ODQyMTM3NixvbGl2ZWRyYWI6NzA0ODczOSxvcmFuZ2U6MTY3NTM5MjAsb3JhbmdlcmVkOjE2NzI5MzQ0LG9yY2hpZDoxNDMxNTczNCxwYWxlZ29sZGVucm9kOjE1NjU3MTMwLHBhbGVncmVlbjoxMDAyNTg4MCxwYWxldHVycXVvaXNlOjExNTI5OTY2LHBhbGV2aW9sZXRyZWQ6MTQzODEyMDMscGFwYXlhd2hpcDoxNjc3MzA3NyxwZWFjaHB1ZmY6MTY3Njc2NzMscGVydToxMzQ2ODk5MSxwaW5rOjE2NzYxMDM1LHBsdW06MTQ1MjQ2MzcscG93ZGVyYmx1ZToxMTU5MTkxMCxwdXJwbGU6ODM4ODczNixyZWJlY2NhcHVycGxlOjY2OTc4ODEscmVkOjE2NzExNjgwLHJvc3licm93bjoxMjM1NzUxOSxcbnJveWFsYmx1ZTo0Mjg2OTQ1LHNhZGRsZWJyb3duOjkxMjcxODcsc2FsbW9uOjE2NDE2ODgyLHNhbmR5YnJvd246MTYwMzI4NjQsc2VhZ3JlZW46MzA1MDMyNyxzZWFzaGVsbDoxNjc3NDYzOCxzaWVubmE6MTA1MDY3OTcsc2lsdmVyOjEyNjMyMjU2LHNreWJsdWU6ODkwMDMzMSxzbGF0ZWJsdWU6Njk3MDA2MSxzbGF0ZWdyYXk6NzM3Mjk0NCxzbGF0ZWdyZXk6NzM3Mjk0NCxzbm93OjE2Nzc1OTMwLHNwcmluZ2dyZWVuOjY1NDA3LHN0ZWVsYmx1ZTo0NjIwOTgwLHRhbjoxMzgwODc4MCx0ZWFsOjMyODk2LHRoaXN0bGU6MTQyMDQ4ODgsdG9tYXRvOjE2NzM3MDk1LHR1cnF1b2lzZTo0MjUxODU2LHZpb2xldDoxNTYzMTA4Nix3aGVhdDoxNjExMzMzMSx3aGl0ZToxNjc3NzIxNSx3aGl0ZXNtb2tlOjE2MTE5Mjg1LHllbGxvdzoxNjc3Njk2MCx5ZWxsb3dncmVlbjoxMDE0NTA3NH07T2JqZWN0LmFzc2lnbihILnByb3RvdHlwZSx7aXNDb2xvcjohMCxyOjEsZzoxLGI6MSxzZXQ6ZnVuY3Rpb24oYSl7YSYmXG5hLmlzQ29sb3I/dGhpcy5jb3B5KGEpOlwibnVtYmVyXCI9PT10eXBlb2YgYT90aGlzLnNldEhleChhKTpcInN0cmluZ1wiPT09dHlwZW9mIGEmJnRoaXMuc2V0U3R5bGUoYSk7cmV0dXJuIHRoaXN9LHNldFNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLmI9dGhpcy5nPXRoaXMucj1hO3JldHVybiB0aGlzfSxzZXRIZXg6ZnVuY3Rpb24oYSl7YT1NYXRoLmZsb29yKGEpO3RoaXMucj0oYT4+MTYmMjU1KS8yNTU7dGhpcy5nPShhPj44JjI1NSkvMjU1O3RoaXMuYj0oYSYyNTUpLzI1NTtyZXR1cm4gdGhpc30sc2V0UkdCOmZ1bmN0aW9uKGEsYixjKXt0aGlzLnI9YTt0aGlzLmc9Yjt0aGlzLmI9YztyZXR1cm4gdGhpc30sc2V0SFNMOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGMsZCl7MD5kJiYoZCs9MSk7MTxkJiYtLWQ7cmV0dXJuIGQ8MS82P2ErNiooYy1hKSpkOi41PmQ/YzpkPDIvMz9hKzYqKGMtYSkqKDIvMy1kKTphfXJldHVybiBmdW5jdGlvbihiLGMsZCl7Yj1RLmV1Y2xpZGVhbk1vZHVsbyhiLFxuMSk7Yz1RLmNsYW1wKGMsMCwxKTtkPVEuY2xhbXAoZCwwLDEpOzA9PT1jP3RoaXMucj10aGlzLmc9dGhpcy5iPWQ6KGM9LjU+PWQ/ZCooMStjKTpkK2MtZCpjLGQ9MipkLWMsdGhpcy5yPWEoZCxjLGIrMS8zKSx0aGlzLmc9YShkLGMsYiksdGhpcy5iPWEoZCxjLGItMS8zKSk7cmV0dXJuIHRoaXN9fSgpLHNldFN0eWxlOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYil7dm9pZCAwIT09YiYmMT5wYXJzZUZsb2F0KGIpJiZjb25zb2xlLndhcm4oXCJUSFJFRS5Db2xvcjogQWxwaGEgY29tcG9uZW50IG9mIFwiK2ErXCIgd2lsbCBiZSBpZ25vcmVkLlwiKX12YXIgYztpZihjPS9eKCg/OnJnYnxoc2wpYT8pXFwoXFxzKihbXlxcKV0qKVxcKS8uZXhlYyhhKSl7dmFyIGQ9Y1syXTtzd2l0Y2goY1sxXSl7Y2FzZSBcInJnYlwiOmNhc2UgXCJyZ2JhXCI6aWYoYz0vXihcXGQrKVxccyosXFxzKihcXGQrKVxccyosXFxzKihcXGQrKVxccyooLFxccyooWzAtOV0qXFwuP1swLTldKylcXHMqKT8kLy5leGVjKGQpKXJldHVybiB0aGlzLnI9TWF0aC5taW4oMjU1LFxucGFyc2VJbnQoY1sxXSwxMCkpLzI1NSx0aGlzLmc9TWF0aC5taW4oMjU1LHBhcnNlSW50KGNbMl0sMTApKS8yNTUsdGhpcy5iPU1hdGgubWluKDI1NSxwYXJzZUludChjWzNdLDEwKSkvMjU1LGIoY1s1XSksdGhpcztpZihjPS9eKFxcZCspXFwlXFxzKixcXHMqKFxcZCspXFwlXFxzKixcXHMqKFxcZCspXFwlXFxzKigsXFxzKihbMC05XSpcXC4/WzAtOV0rKVxccyopPyQvLmV4ZWMoZCkpcmV0dXJuIHRoaXMucj1NYXRoLm1pbigxMDAscGFyc2VJbnQoY1sxXSwxMCkpLzEwMCx0aGlzLmc9TWF0aC5taW4oMTAwLHBhcnNlSW50KGNbMl0sMTApKS8xMDAsdGhpcy5iPU1hdGgubWluKDEwMCxwYXJzZUludChjWzNdLDEwKSkvMTAwLGIoY1s1XSksdGhpczticmVhaztjYXNlIFwiaHNsXCI6Y2FzZSBcImhzbGFcIjppZihjPS9eKFswLTldKlxcLj9bMC05XSspXFxzKixcXHMqKFxcZCspXFwlXFxzKixcXHMqKFxcZCspXFwlXFxzKigsXFxzKihbMC05XSpcXC4/WzAtOV0rKVxccyopPyQvLmV4ZWMoZCkpe3ZhciBkPXBhcnNlRmxvYXQoY1sxXSkvMzYwLFxuZT1wYXJzZUludChjWzJdLDEwKS8xMDAsZj1wYXJzZUludChjWzNdLDEwKS8xMDA7YihjWzVdKTtyZXR1cm4gdGhpcy5zZXRIU0woZCxlLGYpfX19ZWxzZSBpZihjPS9eXFwjKFtBLUZhLWYwLTldKykkLy5leGVjKGEpKXtjPWNbMV07ZD1jLmxlbmd0aDtpZigzPT09ZClyZXR1cm4gdGhpcy5yPXBhcnNlSW50KGMuY2hhckF0KDApK2MuY2hhckF0KDApLDE2KS8yNTUsdGhpcy5nPXBhcnNlSW50KGMuY2hhckF0KDEpK2MuY2hhckF0KDEpLDE2KS8yNTUsdGhpcy5iPXBhcnNlSW50KGMuY2hhckF0KDIpK2MuY2hhckF0KDIpLDE2KS8yNTUsdGhpcztpZig2PT09ZClyZXR1cm4gdGhpcy5yPXBhcnNlSW50KGMuY2hhckF0KDApK2MuY2hhckF0KDEpLDE2KS8yNTUsdGhpcy5nPXBhcnNlSW50KGMuY2hhckF0KDIpK2MuY2hhckF0KDMpLDE2KS8yNTUsdGhpcy5iPXBhcnNlSW50KGMuY2hhckF0KDQpK2MuY2hhckF0KDUpLDE2KS8yNTUsdGhpc31hJiYwPGEubGVuZ3RoJiYoYz1LZ1thXSx2b2lkIDAhPT1cbmM/dGhpcy5zZXRIZXgoYyk6Y29uc29sZS53YXJuKFwiVEhSRUUuQ29sb3I6IFVua25vd24gY29sb3IgXCIrYSkpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnIsdGhpcy5nLHRoaXMuYil9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5yPWEucjt0aGlzLmc9YS5nO3RoaXMuYj1hLmI7cmV0dXJuIHRoaXN9LGNvcHlHYW1tYVRvTGluZWFyOmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9Mik7dGhpcy5yPU1hdGgucG93KGEucixiKTt0aGlzLmc9TWF0aC5wb3coYS5nLGIpO3RoaXMuYj1NYXRoLnBvdyhhLmIsYik7cmV0dXJuIHRoaXN9LGNvcHlMaW5lYXJUb0dhbW1hOmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9Mik7Yj0wPGI/MS9iOjE7dGhpcy5yPU1hdGgucG93KGEucixiKTt0aGlzLmc9TWF0aC5wb3coYS5nLGIpO3RoaXMuYj1NYXRoLnBvdyhhLmIsYik7cmV0dXJuIHRoaXN9LGNvbnZlcnRHYW1tYVRvTGluZWFyOmZ1bmN0aW9uKCl7dmFyIGE9XG50aGlzLnIsYj10aGlzLmcsYz10aGlzLmI7dGhpcy5yPWEqYTt0aGlzLmc9YipiO3RoaXMuYj1jKmM7cmV0dXJuIHRoaXN9LGNvbnZlcnRMaW5lYXJUb0dhbW1hOmZ1bmN0aW9uKCl7dGhpcy5yPU1hdGguc3FydCh0aGlzLnIpO3RoaXMuZz1NYXRoLnNxcnQodGhpcy5nKTt0aGlzLmI9TWF0aC5zcXJ0KHRoaXMuYik7cmV0dXJuIHRoaXN9LGdldEhleDpmdW5jdGlvbigpe3JldHVybiAyNTUqdGhpcy5yPDwxNl4yNTUqdGhpcy5nPDw4XjI1NSp0aGlzLmI8PDB9LGdldEhleFN0cmluZzpmdW5jdGlvbigpe3JldHVybihcIjAwMDAwMFwiK3RoaXMuZ2V0SGV4KCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNil9LGdldEhTTDpmdW5jdGlvbihhKXthPWF8fHtoOjAsczowLGw6MH07dmFyIGI9dGhpcy5yLGM9dGhpcy5nLGQ9dGhpcy5iLGU9TWF0aC5tYXgoYixjLGQpLGY9TWF0aC5taW4oYixjLGQpLGcsaD0oZitlKS8yO2lmKGY9PT1lKWY9Zz0wO2Vsc2V7dmFyIGs9ZS1mLGY9LjU+PWg/ay8oZStmKTpcbmsvKDItZS1mKTtzd2l0Y2goZSl7Y2FzZSBiOmc9KGMtZCkvaysoYzxkPzY6MCk7YnJlYWs7Y2FzZSBjOmc9KGQtYikvaysyO2JyZWFrO2Nhc2UgZDpnPShiLWMpL2srNH1nLz02fWEuaD1nO2Eucz1mO2EubD1oO3JldHVybiBhfSxnZXRTdHlsZTpmdW5jdGlvbigpe3JldHVyblwicmdiKFwiKygyNTUqdGhpcy5yfDApK1wiLFwiKygyNTUqdGhpcy5nfDApK1wiLFwiKygyNTUqdGhpcy5ifDApK1wiKVwifSxvZmZzZXRIU0w6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZ2V0SFNMKCk7ZC5oKz1hO2Qucys9YjtkLmwrPWM7dGhpcy5zZXRIU0woZC5oLGQucyxkLmwpO3JldHVybiB0aGlzfSxhZGQ6ZnVuY3Rpb24oYSl7dGhpcy5yKz1hLnI7dGhpcy5nKz1hLmc7dGhpcy5iKz1hLmI7cmV0dXJuIHRoaXN9LGFkZENvbG9yczpmdW5jdGlvbihhLGIpe3RoaXMucj1hLnIrYi5yO3RoaXMuZz1hLmcrYi5nO3RoaXMuYj1hLmIrYi5iO3JldHVybiB0aGlzfSxhZGRTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy5yKz1cbmE7dGhpcy5nKz1hO3RoaXMuYis9YTtyZXR1cm4gdGhpc30sc3ViOmZ1bmN0aW9uKGEpe3RoaXMucj1NYXRoLm1heCgwLHRoaXMuci1hLnIpO3RoaXMuZz1NYXRoLm1heCgwLHRoaXMuZy1hLmcpO3RoaXMuYj1NYXRoLm1heCgwLHRoaXMuYi1hLmIpO3JldHVybiB0aGlzfSxtdWx0aXBseTpmdW5jdGlvbihhKXt0aGlzLnIqPWEucjt0aGlzLmcqPWEuZzt0aGlzLmIqPWEuYjtyZXR1cm4gdGhpc30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy5yKj1hO3RoaXMuZyo9YTt0aGlzLmIqPWE7cmV0dXJuIHRoaXN9LGxlcnA6ZnVuY3Rpb24oYSxiKXt0aGlzLnIrPShhLnItdGhpcy5yKSpiO3RoaXMuZys9KGEuZy10aGlzLmcpKmI7dGhpcy5iKz0oYS5iLXRoaXMuYikqYjtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLnI9PT10aGlzLnImJmEuZz09PXRoaXMuZyYmYS5iPT09dGhpcy5ifSxmcm9tQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj1cbjApO3RoaXMucj1hW2JdO3RoaXMuZz1hW2IrMV07dGhpcy5iPWFbYisyXTtyZXR1cm4gdGhpc30sdG9BcnJheTpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWEmJihhPVtdKTt2b2lkIDA9PT1iJiYoYj0wKTthW2JdPXRoaXMucjthW2IrMV09dGhpcy5nO2FbYisyXT10aGlzLmI7cmV0dXJuIGF9LHRvSlNPTjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEhleCgpfX0pO3ZhciBLPXtjb21tb246e2RpZmZ1c2U6e3ZhbHVlOm5ldyBIKDE1NjU4NzM0KX0sb3BhY2l0eTp7dmFsdWU6MX0sbWFwOnt2YWx1ZTpudWxsfSx1dlRyYW5zZm9ybTp7dmFsdWU6bmV3IG1hfSxhbHBoYU1hcDp7dmFsdWU6bnVsbH19LHNwZWN1bGFybWFwOntzcGVjdWxhck1hcDp7dmFsdWU6bnVsbH19LGVudm1hcDp7ZW52TWFwOnt2YWx1ZTpudWxsfSxmbGlwRW52TWFwOnt2YWx1ZTotMX0scmVmbGVjdGl2aXR5Ont2YWx1ZToxfSxyZWZyYWN0aW9uUmF0aW86e3ZhbHVlOi45OH19LGFvbWFwOnthb01hcDp7dmFsdWU6bnVsbH0sXG5hb01hcEludGVuc2l0eTp7dmFsdWU6MX19LGxpZ2h0bWFwOntsaWdodE1hcDp7dmFsdWU6bnVsbH0sbGlnaHRNYXBJbnRlbnNpdHk6e3ZhbHVlOjF9fSxlbWlzc2l2ZW1hcDp7ZW1pc3NpdmVNYXA6e3ZhbHVlOm51bGx9fSxidW1wbWFwOntidW1wTWFwOnt2YWx1ZTpudWxsfSxidW1wU2NhbGU6e3ZhbHVlOjF9fSxub3JtYWxtYXA6e25vcm1hbE1hcDp7dmFsdWU6bnVsbH0sbm9ybWFsU2NhbGU6e3ZhbHVlOm5ldyBEKDEsMSl9fSxkaXNwbGFjZW1lbnRtYXA6e2Rpc3BsYWNlbWVudE1hcDp7dmFsdWU6bnVsbH0sZGlzcGxhY2VtZW50U2NhbGU6e3ZhbHVlOjF9LGRpc3BsYWNlbWVudEJpYXM6e3ZhbHVlOjB9fSxyb3VnaG5lc3NtYXA6e3JvdWdobmVzc01hcDp7dmFsdWU6bnVsbH19LG1ldGFsbmVzc21hcDp7bWV0YWxuZXNzTWFwOnt2YWx1ZTpudWxsfX0sZ3JhZGllbnRtYXA6e2dyYWRpZW50TWFwOnt2YWx1ZTpudWxsfX0sZm9nOntmb2dEZW5zaXR5Ont2YWx1ZToyLjVFLTR9LGZvZ05lYXI6e3ZhbHVlOjF9LFxuZm9nRmFyOnt2YWx1ZToyRTN9LGZvZ0NvbG9yOnt2YWx1ZTpuZXcgSCgxNjc3NzIxNSl9fSxsaWdodHM6e2FtYmllbnRMaWdodENvbG9yOnt2YWx1ZTpbXX0sZGlyZWN0aW9uYWxMaWdodHM6e3ZhbHVlOltdLHByb3BlcnRpZXM6e2RpcmVjdGlvbjp7fSxjb2xvcjp7fSxzaGFkb3c6e30sc2hhZG93Qmlhczp7fSxzaGFkb3dSYWRpdXM6e30sc2hhZG93TWFwU2l6ZTp7fX19LGRpcmVjdGlvbmFsU2hhZG93TWFwOnt2YWx1ZTpbXX0sZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXg6e3ZhbHVlOltdfSxzcG90TGlnaHRzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntjb2xvcjp7fSxwb3NpdGlvbjp7fSxkaXJlY3Rpb246e30sZGlzdGFuY2U6e30sY29uZUNvczp7fSxwZW51bWJyYUNvczp7fSxkZWNheTp7fSxzaGFkb3c6e30sc2hhZG93Qmlhczp7fSxzaGFkb3dSYWRpdXM6e30sc2hhZG93TWFwU2l6ZTp7fX19LHNwb3RTaGFkb3dNYXA6e3ZhbHVlOltdfSxzcG90U2hhZG93TWF0cml4Ont2YWx1ZTpbXX0sXG5wb2ludExpZ2h0czp7dmFsdWU6W10scHJvcGVydGllczp7Y29sb3I6e30scG9zaXRpb246e30sZGVjYXk6e30sZGlzdGFuY2U6e30sc2hhZG93Ont9LHNoYWRvd0JpYXM6e30sc2hhZG93UmFkaXVzOnt9LHNoYWRvd01hcFNpemU6e30sc2hhZG93Q2FtZXJhTmVhcjp7fSxzaGFkb3dDYW1lcmFGYXI6e319fSxwb2ludFNoYWRvd01hcDp7dmFsdWU6W119LHBvaW50U2hhZG93TWF0cml4Ont2YWx1ZTpbXX0saGVtaXNwaGVyZUxpZ2h0czp7dmFsdWU6W10scHJvcGVydGllczp7ZGlyZWN0aW9uOnt9LHNreUNvbG9yOnt9LGdyb3VuZENvbG9yOnt9fX0scmVjdEFyZWFMaWdodHM6e3ZhbHVlOltdLHByb3BlcnRpZXM6e2NvbG9yOnt9LHBvc2l0aW9uOnt9LHdpZHRoOnt9LGhlaWdodDp7fX19fSxwb2ludHM6e2RpZmZ1c2U6e3ZhbHVlOm5ldyBIKDE1NjU4NzM0KX0sb3BhY2l0eTp7dmFsdWU6MX0sc2l6ZTp7dmFsdWU6MX0sc2NhbGU6e3ZhbHVlOjF9LG1hcDp7dmFsdWU6bnVsbH0sdXZUcmFuc2Zvcm06e3ZhbHVlOm5ldyBtYX19fSxcbkdhPXttZXJnZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9e30sYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZD10aGlzLmNsb25lKGFbY10pLGU7Zm9yKGUgaW4gZCliW2VdPWRbZV19cmV0dXJuIGJ9LGNsb25lOmZ1bmN0aW9uKGEpe3ZhciBiPXt9LGM7Zm9yKGMgaW4gYSl7YltjXT17fTtmb3IodmFyIGQgaW4gYVtjXSl7dmFyIGU9YVtjXVtkXTtlJiYoZS5pc0NvbG9yfHxlLmlzTWF0cml4M3x8ZS5pc01hdHJpeDR8fGUuaXNWZWN0b3IyfHxlLmlzVmVjdG9yM3x8ZS5pc1ZlY3RvcjR8fGUuaXNUZXh0dXJlKT9iW2NdW2RdPWUuY2xvbmUoKTpBcnJheS5pc0FycmF5KGUpP2JbY11bZF09ZS5zbGljZSgpOmJbY11bZF09ZX19cmV0dXJuIGJ9fSxSPXthbHBoYW1hcF9mcmFnbWVudDpcIiNpZmRlZiBVU0VfQUxQSEFNQVBcXG5cXHRkaWZmdXNlQ29sb3IuYSAqPSB0ZXh0dXJlMkQoIGFscGhhTWFwLCB2VXYgKS5nO1xcbiNlbmRpZlxcblwiLGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0FMUEhBTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgYWxwaGFNYXA7XFxuI2VuZGlmXFxuXCIsXG5hbHBoYXRlc3RfZnJhZ21lbnQ6XCIjaWZkZWYgQUxQSEFURVNUXFxuXFx0aWYgKCBkaWZmdXNlQ29sb3IuYSA8IEFMUEhBVEVTVCApIGRpc2NhcmQ7XFxuI2VuZGlmXFxuXCIsYW9tYXBfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0FPTUFQXFxuXFx0ZmxvYXQgYW1iaWVudE9jY2x1c2lvbiA9ICggdGV4dHVyZTJEKCBhb01hcCwgdlV2MiApLnIgLSAxLjAgKSAqIGFvTWFwSW50ZW5zaXR5ICsgMS4wO1xcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSAqPSBhbWJpZW50T2NjbHVzaW9uO1xcblxcdCNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQICkgJiYgZGVmaW5lZCggUEhZU0lDQUwgKVxcblxcdFxcdGZsb2F0IGRvdE5WID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBnZW9tZXRyeS52aWV3RGlyICkgKTtcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyICo9IGNvbXB1dGVTcGVjdWxhck9jY2x1c2lvbiggZG90TlYsIGFtYmllbnRPY2NsdXNpb24sIG1hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzICk7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCIsXG5hb21hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9BT01BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGFvTWFwO1xcblxcdHVuaWZvcm0gZmxvYXQgYW9NYXBJbnRlbnNpdHk7XFxuI2VuZGlmXCIsYmVnaW5fdmVydGV4OlwiXFxudmVjMyB0cmFuc2Zvcm1lZCA9IHZlYzMoIHBvc2l0aW9uICk7XFxuXCIsYmVnaW5ub3JtYWxfdmVydGV4OlwiXFxudmVjMyBvYmplY3ROb3JtYWwgPSB2ZWMzKCBub3JtYWwgKTtcXG5cIixic2RmczpcImZsb2F0IHB1bmN0dWFsTGlnaHRJbnRlbnNpdHlUb0lycmFkaWFuY2VGYWN0b3IoIGNvbnN0IGluIGZsb2F0IGxpZ2h0RGlzdGFuY2UsIGNvbnN0IGluIGZsb2F0IGN1dG9mZkRpc3RhbmNlLCBjb25zdCBpbiBmbG9hdCBkZWNheUV4cG9uZW50ICkge1xcblxcdGlmKCBkZWNheUV4cG9uZW50ID4gMC4wICkge1xcbiNpZiBkZWZpbmVkICggUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUUyApXFxuXFx0XFx0ZmxvYXQgZGlzdGFuY2VGYWxsb2ZmID0gMS4wIC8gbWF4KCBwb3coIGxpZ2h0RGlzdGFuY2UsIGRlY2F5RXhwb25lbnQgKSwgMC4wMSApO1xcblxcdFxcdGZsb2F0IG1heERpc3RhbmNlQ3V0b2ZmRmFjdG9yID0gcG93Miggc2F0dXJhdGUoIDEuMCAtIHBvdzQoIGxpZ2h0RGlzdGFuY2UgLyBjdXRvZmZEaXN0YW5jZSApICkgKTtcXG5cXHRcXHRyZXR1cm4gZGlzdGFuY2VGYWxsb2ZmICogbWF4RGlzdGFuY2VDdXRvZmZGYWN0b3I7XFxuI2Vsc2VcXG5cXHRcXHRyZXR1cm4gcG93KCBzYXR1cmF0ZSggLWxpZ2h0RGlzdGFuY2UgLyBjdXRvZmZEaXN0YW5jZSArIDEuMCApLCBkZWNheUV4cG9uZW50ICk7XFxuI2VuZGlmXFxuXFx0fVxcblxcdHJldHVybiAxLjA7XFxufVxcbnZlYzMgQlJERl9EaWZmdXNlX0xhbWJlcnQoIGNvbnN0IGluIHZlYzMgZGlmZnVzZUNvbG9yICkge1xcblxcdHJldHVybiBSRUNJUFJPQ0FMX1BJICogZGlmZnVzZUNvbG9yO1xcbn1cXG52ZWMzIEZfU2NobGljayggY29uc3QgaW4gdmVjMyBzcGVjdWxhckNvbG9yLCBjb25zdCBpbiBmbG9hdCBkb3RMSCApIHtcXG5cXHRmbG9hdCBmcmVzbmVsID0gZXhwMiggKCAtNS41NTQ3MyAqIGRvdExIIC0gNi45ODMxNiApICogZG90TEggKTtcXG5cXHRyZXR1cm4gKCAxLjAgLSBzcGVjdWxhckNvbG9yICkgKiBmcmVzbmVsICsgc3BlY3VsYXJDb2xvcjtcXG59XFxuZmxvYXQgR19HR1hfU21pdGgoIGNvbnN0IGluIGZsb2F0IGFscGhhLCBjb25zdCBpbiBmbG9hdCBkb3ROTCwgY29uc3QgaW4gZmxvYXQgZG90TlYgKSB7XFxuXFx0ZmxvYXQgYTIgPSBwb3cyKCBhbHBoYSApO1xcblxcdGZsb2F0IGdsID0gZG90TkwgKyBzcXJ0KCBhMiArICggMS4wIC0gYTIgKSAqIHBvdzIoIGRvdE5MICkgKTtcXG5cXHRmbG9hdCBndiA9IGRvdE5WICsgc3FydCggYTIgKyAoIDEuMCAtIGEyICkgKiBwb3cyKCBkb3ROViApICk7XFxuXFx0cmV0dXJuIDEuMCAvICggZ2wgKiBndiApO1xcbn1cXG5mbG9hdCBHX0dHWF9TbWl0aENvcnJlbGF0ZWQoIGNvbnN0IGluIGZsb2F0IGFscGhhLCBjb25zdCBpbiBmbG9hdCBkb3ROTCwgY29uc3QgaW4gZmxvYXQgZG90TlYgKSB7XFxuXFx0ZmxvYXQgYTIgPSBwb3cyKCBhbHBoYSApO1xcblxcdGZsb2F0IGd2ID0gZG90TkwgKiBzcXJ0KCBhMiArICggMS4wIC0gYTIgKSAqIHBvdzIoIGRvdE5WICkgKTtcXG5cXHRmbG9hdCBnbCA9IGRvdE5WICogc3FydCggYTIgKyAoIDEuMCAtIGEyICkgKiBwb3cyKCBkb3ROTCApICk7XFxuXFx0cmV0dXJuIDAuNSAvIG1heCggZ3YgKyBnbCwgRVBTSUxPTiApO1xcbn1cXG5mbG9hdCBEX0dHWCggY29uc3QgaW4gZmxvYXQgYWxwaGEsIGNvbnN0IGluIGZsb2F0IGRvdE5IICkge1xcblxcdGZsb2F0IGEyID0gcG93MiggYWxwaGEgKTtcXG5cXHRmbG9hdCBkZW5vbSA9IHBvdzIoIGRvdE5IICkgKiAoIGEyIC0gMS4wICkgKyAxLjA7XFxuXFx0cmV0dXJuIFJFQ0lQUk9DQUxfUEkgKiBhMiAvIHBvdzIoIGRlbm9tICk7XFxufVxcbnZlYzMgQlJERl9TcGVjdWxhcl9HR1goIGNvbnN0IGluIEluY2lkZW50TGlnaHQgaW5jaWRlbnRMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gdmVjMyBzcGVjdWxhckNvbG9yLCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MgKSB7XFxuXFx0ZmxvYXQgYWxwaGEgPSBwb3cyKCByb3VnaG5lc3MgKTtcXG5cXHR2ZWMzIGhhbGZEaXIgPSBub3JtYWxpemUoIGluY2lkZW50TGlnaHQuZGlyZWN0aW9uICsgZ2VvbWV0cnkudmlld0RpciApO1xcblxcdGZsb2F0IGRvdE5MID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBpbmNpZGVudExpZ2h0LmRpcmVjdGlvbiApICk7XFxuXFx0ZmxvYXQgZG90TlYgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGdlb21ldHJ5LnZpZXdEaXIgKSApO1xcblxcdGZsb2F0IGRvdE5IID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBoYWxmRGlyICkgKTtcXG5cXHRmbG9hdCBkb3RMSCA9IHNhdHVyYXRlKCBkb3QoIGluY2lkZW50TGlnaHQuZGlyZWN0aW9uLCBoYWxmRGlyICkgKTtcXG5cXHR2ZWMzIEYgPSBGX1NjaGxpY2soIHNwZWN1bGFyQ29sb3IsIGRvdExIICk7XFxuXFx0ZmxvYXQgRyA9IEdfR0dYX1NtaXRoQ29ycmVsYXRlZCggYWxwaGEsIGRvdE5MLCBkb3ROViApO1xcblxcdGZsb2F0IEQgPSBEX0dHWCggYWxwaGEsIGRvdE5IICk7XFxuXFx0cmV0dXJuIEYgKiAoIEcgKiBEICk7XFxufVxcbnZlYzIgTFRDX1V2KCBjb25zdCBpbiB2ZWMzIE4sIGNvbnN0IGluIHZlYzMgViwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzICkge1xcblxcdGNvbnN0IGZsb2F0IExVVF9TSVpFICA9IDY0LjA7XFxuXFx0Y29uc3QgZmxvYXQgTFVUX1NDQUxFID0gKCBMVVRfU0laRSAtIDEuMCApIC8gTFVUX1NJWkU7XFxuXFx0Y29uc3QgZmxvYXQgTFVUX0JJQVMgID0gMC41IC8gTFVUX1NJWkU7XFxuXFx0ZmxvYXQgdGhldGEgPSBhY29zKCBkb3QoIE4sIFYgKSApO1xcblxcdHZlYzIgdXYgPSB2ZWMyKFxcblxcdFxcdHNxcnQoIHNhdHVyYXRlKCByb3VnaG5lc3MgKSApLFxcblxcdFxcdHNhdHVyYXRlKCB0aGV0YSAvICggMC41ICogUEkgKSApICk7XFxuXFx0dXYgPSB1diAqIExVVF9TQ0FMRSArIExVVF9CSUFTO1xcblxcdHJldHVybiB1djtcXG59XFxuZmxvYXQgTFRDX0NsaXBwZWRTcGhlcmVGb3JtRmFjdG9yKCBjb25zdCBpbiB2ZWMzIGYgKSB7XFxuXFx0ZmxvYXQgbCA9IGxlbmd0aCggZiApO1xcblxcdHJldHVybiBtYXgoICggbCAqIGwgKyBmLnogKSAvICggbCArIDEuMCApLCAwLjAgKTtcXG59XFxudmVjMyBMVENfRWRnZVZlY3RvckZvcm1GYWN0b3IoIGNvbnN0IGluIHZlYzMgdjEsIGNvbnN0IGluIHZlYzMgdjIgKSB7XFxuXFx0ZmxvYXQgeCA9IGRvdCggdjEsIHYyICk7XFxuXFx0ZmxvYXQgeSA9IGFicyggeCApO1xcblxcdGZsb2F0IGEgPSAwLjg2MjY3ICsgKDAuNDk3ODggKyAwLjAxNDM2ICogeSApICogeTtcXG5cXHRmbG9hdCBiID0gMy40NTA2OCArICg0LjE4ODE0ICsgeSkgKiB5O1xcblxcdGZsb2F0IHYgPSBhIC8gYjtcXG5cXHRmbG9hdCB0aGV0YV9zaW50aGV0YSA9ICh4ID4gMC4wKSA/IHYgOiAwLjUgKiBpbnZlcnNlc3FydCggMS4wIC0geCAqIHggKSAtIHY7XFxuXFx0cmV0dXJuIGNyb3NzKCB2MSwgdjIgKSAqIHRoZXRhX3NpbnRoZXRhO1xcbn1cXG52ZWMzIExUQ19FdmFsdWF0ZSggY29uc3QgaW4gdmVjMyBOLCBjb25zdCBpbiB2ZWMzIFYsIGNvbnN0IGluIHZlYzMgUCwgY29uc3QgaW4gbWF0MyBtSW52LCBjb25zdCBpbiB2ZWMzIHJlY3RDb29yZHNbIDQgXSApIHtcXG5cXHR2ZWMzIHYxID0gcmVjdENvb3Jkc1sgMSBdIC0gcmVjdENvb3Jkc1sgMCBdO1xcblxcdHZlYzMgdjIgPSByZWN0Q29vcmRzWyAzIF0gLSByZWN0Q29vcmRzWyAwIF07XFxuXFx0dmVjMyBsaWdodE5vcm1hbCA9IGNyb3NzKCB2MSwgdjIgKTtcXG5cXHRpZiggZG90KCBsaWdodE5vcm1hbCwgUCAtIHJlY3RDb29yZHNbIDAgXSApIDwgMC4wICkgcmV0dXJuIHZlYzMoIDAuMCApO1xcblxcdHZlYzMgVDEsIFQyO1xcblxcdFQxID0gbm9ybWFsaXplKCBWIC0gTiAqIGRvdCggViwgTiApICk7XFxuXFx0VDIgPSAtIGNyb3NzKCBOLCBUMSApO1xcblxcdG1hdDMgbWF0ID0gbUludiAqIHRyYW5zcG9zZU1hdDMoIG1hdDMoIFQxLCBUMiwgTiApICk7XFxuXFx0dmVjMyBjb29yZHNbIDQgXTtcXG5cXHRjb29yZHNbIDAgXSA9IG1hdCAqICggcmVjdENvb3Jkc1sgMCBdIC0gUCApO1xcblxcdGNvb3Jkc1sgMSBdID0gbWF0ICogKCByZWN0Q29vcmRzWyAxIF0gLSBQICk7XFxuXFx0Y29vcmRzWyAyIF0gPSBtYXQgKiAoIHJlY3RDb29yZHNbIDIgXSAtIFAgKTtcXG5cXHRjb29yZHNbIDMgXSA9IG1hdCAqICggcmVjdENvb3Jkc1sgMyBdIC0gUCApO1xcblxcdGNvb3Jkc1sgMCBdID0gbm9ybWFsaXplKCBjb29yZHNbIDAgXSApO1xcblxcdGNvb3Jkc1sgMSBdID0gbm9ybWFsaXplKCBjb29yZHNbIDEgXSApO1xcblxcdGNvb3Jkc1sgMiBdID0gbm9ybWFsaXplKCBjb29yZHNbIDIgXSApO1xcblxcdGNvb3Jkc1sgMyBdID0gbm9ybWFsaXplKCBjb29yZHNbIDMgXSApO1xcblxcdHZlYzMgdmVjdG9yRm9ybUZhY3RvciA9IHZlYzMoIDAuMCApO1xcblxcdHZlY3RvckZvcm1GYWN0b3IgKz0gTFRDX0VkZ2VWZWN0b3JGb3JtRmFjdG9yKCBjb29yZHNbIDAgXSwgY29vcmRzWyAxIF0gKTtcXG5cXHR2ZWN0b3JGb3JtRmFjdG9yICs9IExUQ19FZGdlVmVjdG9yRm9ybUZhY3RvciggY29vcmRzWyAxIF0sIGNvb3Jkc1sgMiBdICk7XFxuXFx0dmVjdG9yRm9ybUZhY3RvciArPSBMVENfRWRnZVZlY3RvckZvcm1GYWN0b3IoIGNvb3Jkc1sgMiBdLCBjb29yZHNbIDMgXSApO1xcblxcdHZlY3RvckZvcm1GYWN0b3IgKz0gTFRDX0VkZ2VWZWN0b3JGb3JtRmFjdG9yKCBjb29yZHNbIDMgXSwgY29vcmRzWyAwIF0gKTtcXG5cXHR2ZWMzIHJlc3VsdCA9IHZlYzMoIExUQ19DbGlwcGVkU3BoZXJlRm9ybUZhY3RvciggdmVjdG9yRm9ybUZhY3RvciApICk7XFxuXFx0cmV0dXJuIHJlc3VsdDtcXG59XFxudmVjMyBCUkRGX1NwZWN1bGFyX0dHWF9FbnZpcm9ubWVudCggY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gdmVjMyBzcGVjdWxhckNvbG9yLCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MgKSB7XFxuXFx0ZmxvYXQgZG90TlYgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGdlb21ldHJ5LnZpZXdEaXIgKSApO1xcblxcdGNvbnN0IHZlYzQgYzAgPSB2ZWM0KCAtIDEsIC0gMC4wMjc1LCAtIDAuNTcyLCAwLjAyMiApO1xcblxcdGNvbnN0IHZlYzQgYzEgPSB2ZWM0KCAxLCAwLjA0MjUsIDEuMDQsIC0gMC4wNCApO1xcblxcdHZlYzQgciA9IHJvdWdobmVzcyAqIGMwICsgYzE7XFxuXFx0ZmxvYXQgYTAwNCA9IG1pbiggci54ICogci54LCBleHAyKCAtIDkuMjggKiBkb3ROViApICkgKiByLnggKyByLnk7XFxuXFx0dmVjMiBBQiA9IHZlYzIoIC0xLjA0LCAxLjA0ICkgKiBhMDA0ICsgci56dztcXG5cXHRyZXR1cm4gc3BlY3VsYXJDb2xvciAqIEFCLnggKyBBQi55O1xcbn1cXG5mbG9hdCBHX0JsaW5uUGhvbmdfSW1wbGljaXQoICkge1xcblxcdHJldHVybiAwLjI1O1xcbn1cXG5mbG9hdCBEX0JsaW5uUGhvbmcoIGNvbnN0IGluIGZsb2F0IHNoaW5pbmVzcywgY29uc3QgaW4gZmxvYXQgZG90TkggKSB7XFxuXFx0cmV0dXJuIFJFQ0lQUk9DQUxfUEkgKiAoIHNoaW5pbmVzcyAqIDAuNSArIDEuMCApICogcG93KCBkb3ROSCwgc2hpbmluZXNzICk7XFxufVxcbnZlYzMgQlJERl9TcGVjdWxhcl9CbGlublBob25nKCBjb25zdCBpbiBJbmNpZGVudExpZ2h0IGluY2lkZW50TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIHZlYzMgc3BlY3VsYXJDb2xvciwgY29uc3QgaW4gZmxvYXQgc2hpbmluZXNzICkge1xcblxcdHZlYzMgaGFsZkRpciA9IG5vcm1hbGl6ZSggaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24gKyBnZW9tZXRyeS52aWV3RGlyICk7XFxuXFx0ZmxvYXQgZG90TkggPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGhhbGZEaXIgKSApO1xcblxcdGZsb2F0IGRvdExIID0gc2F0dXJhdGUoIGRvdCggaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24sIGhhbGZEaXIgKSApO1xcblxcdHZlYzMgRiA9IEZfU2NobGljayggc3BlY3VsYXJDb2xvciwgZG90TEggKTtcXG5cXHRmbG9hdCBHID0gR19CbGlublBob25nX0ltcGxpY2l0KCApO1xcblxcdGZsb2F0IEQgPSBEX0JsaW5uUGhvbmcoIHNoaW5pbmVzcywgZG90TkggKTtcXG5cXHRyZXR1cm4gRiAqICggRyAqIEQgKTtcXG59XFxuZmxvYXQgR0dYUm91Z2huZXNzVG9CbGlubkV4cG9uZW50KCBjb25zdCBpbiBmbG9hdCBnZ3hSb3VnaG5lc3MgKSB7XFxuXFx0cmV0dXJuICggMi4wIC8gcG93MiggZ2d4Um91Z2huZXNzICsgMC4wMDAxICkgLSAyLjAgKTtcXG59XFxuZmxvYXQgQmxpbm5FeHBvbmVudFRvR0dYUm91Z2huZXNzKCBjb25zdCBpbiBmbG9hdCBibGlubkV4cG9uZW50ICkge1xcblxcdHJldHVybiBzcXJ0KCAyLjAgLyAoIGJsaW5uRXhwb25lbnQgKyAyLjAgKSApO1xcbn1cXG5cIixcbmJ1bXBtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfQlVNUE1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGJ1bXBNYXA7XFxuXFx0dW5pZm9ybSBmbG9hdCBidW1wU2NhbGU7XFxuXFx0dmVjMiBkSGR4eV9md2QoKSB7XFxuXFx0XFx0dmVjMiBkU1RkeCA9IGRGZHgoIHZVdiApO1xcblxcdFxcdHZlYzIgZFNUZHkgPSBkRmR5KCB2VXYgKTtcXG5cXHRcXHRmbG9hdCBIbGwgPSBidW1wU2NhbGUgKiB0ZXh0dXJlMkQoIGJ1bXBNYXAsIHZVdiApLng7XFxuXFx0XFx0ZmxvYXQgZEJ4ID0gYnVtcFNjYWxlICogdGV4dHVyZTJEKCBidW1wTWFwLCB2VXYgKyBkU1RkeCApLnggLSBIbGw7XFxuXFx0XFx0ZmxvYXQgZEJ5ID0gYnVtcFNjYWxlICogdGV4dHVyZTJEKCBidW1wTWFwLCB2VXYgKyBkU1RkeSApLnggLSBIbGw7XFxuXFx0XFx0cmV0dXJuIHZlYzIoIGRCeCwgZEJ5ICk7XFxuXFx0fVxcblxcdHZlYzMgcGVydHVyYk5vcm1hbEFyYiggdmVjMyBzdXJmX3BvcywgdmVjMyBzdXJmX25vcm0sIHZlYzIgZEhkeHkgKSB7XFxuXFx0XFx0dmVjMyB2U2lnbWFYID0gdmVjMyggZEZkeCggc3VyZl9wb3MueCApLCBkRmR4KCBzdXJmX3Bvcy55ICksIGRGZHgoIHN1cmZfcG9zLnogKSApO1xcblxcdFxcdHZlYzMgdlNpZ21hWSA9IHZlYzMoIGRGZHkoIHN1cmZfcG9zLnggKSwgZEZkeSggc3VyZl9wb3MueSApLCBkRmR5KCBzdXJmX3Bvcy56ICkgKTtcXG5cXHRcXHR2ZWMzIHZOID0gc3VyZl9ub3JtO1xcblxcdFxcdHZlYzMgUjEgPSBjcm9zcyggdlNpZ21hWSwgdk4gKTtcXG5cXHRcXHR2ZWMzIFIyID0gY3Jvc3MoIHZOLCB2U2lnbWFYICk7XFxuXFx0XFx0ZmxvYXQgZkRldCA9IGRvdCggdlNpZ21hWCwgUjEgKTtcXG5cXHRcXHR2ZWMzIHZHcmFkID0gc2lnbiggZkRldCApICogKCBkSGR4eS54ICogUjEgKyBkSGR4eS55ICogUjIgKTtcXG5cXHRcXHRyZXR1cm4gbm9ybWFsaXplKCBhYnMoIGZEZXQgKSAqIHN1cmZfbm9ybSAtIHZHcmFkICk7XFxuXFx0fVxcbiNlbmRpZlxcblwiLFxuY2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50OlwiI2lmIE5VTV9DTElQUElOR19QTEFORVMgPiAwXFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgVU5JT05fQ0xJUFBJTkdfUExBTkVTOyArKyBpICkge1xcblxcdFxcdHZlYzQgcGxhbmUgPSBjbGlwcGluZ1BsYW5lc1sgaSBdO1xcblxcdFxcdGlmICggZG90KCB2Vmlld1Bvc2l0aW9uLCBwbGFuZS54eXogKSA+IHBsYW5lLncgKSBkaXNjYXJkO1xcblxcdH1cXG5cXHRcXHRcXG5cXHQjaWYgVU5JT05fQ0xJUFBJTkdfUExBTkVTIDwgTlVNX0NMSVBQSU5HX1BMQU5FU1xcblxcdFxcdGJvb2wgY2xpcHBlZCA9IHRydWU7XFxuXFx0XFx0Zm9yICggaW50IGkgPSBVTklPTl9DTElQUElOR19QTEFORVM7IGkgPCBOVU1fQ0xJUFBJTkdfUExBTkVTOyArKyBpICkge1xcblxcdFxcdFxcdHZlYzQgcGxhbmUgPSBjbGlwcGluZ1BsYW5lc1sgaSBdO1xcblxcdFxcdFxcdGNsaXBwZWQgPSAoIGRvdCggdlZpZXdQb3NpdGlvbiwgcGxhbmUueHl6ICkgPiBwbGFuZS53ICkgJiYgY2xpcHBlZDtcXG5cXHRcXHR9XFxuXFx0XFx0aWYgKCBjbGlwcGVkICkgZGlzY2FyZDtcXG5cXHRcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIixcbmNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50OlwiI2lmIE5VTV9DTElQUElOR19QTEFORVMgPiAwXFxuXFx0I2lmICEgZGVmaW5lZCggUEhZU0lDQUwgKSAmJiAhIGRlZmluZWQoIFBIT05HIClcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG5cXHQjZW5kaWZcXG5cXHR1bmlmb3JtIHZlYzQgY2xpcHBpbmdQbGFuZXNbIE5VTV9DTElQUElOR19QTEFORVMgXTtcXG4jZW5kaWZcXG5cIixjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg6XCIjaWYgTlVNX0NMSVBQSU5HX1BMQU5FUyA+IDAgJiYgISBkZWZpbmVkKCBQSFlTSUNBTCApICYmICEgZGVmaW5lZCggUEhPTkcgKVxcblxcdHZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNlbmRpZlxcblwiLGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg6XCIjaWYgTlVNX0NMSVBQSU5HX1BMQU5FUyA+IDAgJiYgISBkZWZpbmVkKCBQSFlTSUNBTCApICYmICEgZGVmaW5lZCggUEhPTkcgKVxcblxcdHZWaWV3UG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xcbiNlbmRpZlxcblwiLFxuY29sb3JfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0NPTE9SXFxuXFx0ZGlmZnVzZUNvbG9yLnJnYiAqPSB2Q29sb3I7XFxuI2VuZGlmXCIsY29sb3JfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfQ09MT1JcXG5cXHR2YXJ5aW5nIHZlYzMgdkNvbG9yO1xcbiNlbmRpZlxcblwiLGNvbG9yX3BhcnNfdmVydGV4OlwiI2lmZGVmIFVTRV9DT0xPUlxcblxcdHZhcnlpbmcgdmVjMyB2Q29sb3I7XFxuI2VuZGlmXCIsY29sb3JfdmVydGV4OlwiI2lmZGVmIFVTRV9DT0xPUlxcblxcdHZDb2xvci54eXogPSBjb2xvci54eXo7XFxuI2VuZGlmXCIsY29tbW9uOlwiI2RlZmluZSBQSSAzLjE0MTU5MjY1MzU5XFxuI2RlZmluZSBQSTIgNi4yODMxODUzMDcxOFxcbiNkZWZpbmUgUElfSEFMRiAxLjU3MDc5NjMyNjc5NDlcXG4jZGVmaW5lIFJFQ0lQUk9DQUxfUEkgMC4zMTgzMDk4ODYxOFxcbiNkZWZpbmUgUkVDSVBST0NBTF9QSTIgMC4xNTkxNTQ5NFxcbiNkZWZpbmUgTE9HMiAxLjQ0MjY5NVxcbiNkZWZpbmUgRVBTSUxPTiAxZS02XFxuI2RlZmluZSBzYXR1cmF0ZShhKSBjbGFtcCggYSwgMC4wLCAxLjAgKVxcbiNkZWZpbmUgd2hpdGVDb21wbGltZW50KGEpICggMS4wIC0gc2F0dXJhdGUoIGEgKSApXFxuZmxvYXQgcG93MiggY29uc3QgaW4gZmxvYXQgeCApIHsgcmV0dXJuIHgqeDsgfVxcbmZsb2F0IHBvdzMoIGNvbnN0IGluIGZsb2F0IHggKSB7IHJldHVybiB4KngqeDsgfVxcbmZsb2F0IHBvdzQoIGNvbnN0IGluIGZsb2F0IHggKSB7IGZsb2F0IHgyID0geCp4OyByZXR1cm4geDIqeDI7IH1cXG5mbG9hdCBhdmVyYWdlKCBjb25zdCBpbiB2ZWMzIGNvbG9yICkgeyByZXR1cm4gZG90KCBjb2xvciwgdmVjMyggMC4zMzMzICkgKTsgfVxcbmhpZ2hwIGZsb2F0IHJhbmQoIGNvbnN0IGluIHZlYzIgdXYgKSB7XFxuXFx0Y29uc3QgaGlnaHAgZmxvYXQgYSA9IDEyLjk4OTgsIGIgPSA3OC4yMzMsIGMgPSA0Mzc1OC41NDUzO1xcblxcdGhpZ2hwIGZsb2F0IGR0ID0gZG90KCB1di54eSwgdmVjMiggYSxiICkgKSwgc24gPSBtb2QoIGR0LCBQSSApO1xcblxcdHJldHVybiBmcmFjdChzaW4oc24pICogYyk7XFxufVxcbnN0cnVjdCBJbmNpZGVudExpZ2h0IHtcXG5cXHR2ZWMzIGNvbG9yO1xcblxcdHZlYzMgZGlyZWN0aW9uO1xcblxcdGJvb2wgdmlzaWJsZTtcXG59O1xcbnN0cnVjdCBSZWZsZWN0ZWRMaWdodCB7XFxuXFx0dmVjMyBkaXJlY3REaWZmdXNlO1xcblxcdHZlYzMgZGlyZWN0U3BlY3VsYXI7XFxuXFx0dmVjMyBpbmRpcmVjdERpZmZ1c2U7XFxuXFx0dmVjMyBpbmRpcmVjdFNwZWN1bGFyO1xcbn07XFxuc3RydWN0IEdlb21ldHJpY0NvbnRleHQge1xcblxcdHZlYzMgcG9zaXRpb247XFxuXFx0dmVjMyBub3JtYWw7XFxuXFx0dmVjMyB2aWV3RGlyO1xcbn07XFxudmVjMyB0cmFuc2Zvcm1EaXJlY3Rpb24oIGluIHZlYzMgZGlyLCBpbiBtYXQ0IG1hdHJpeCApIHtcXG5cXHRyZXR1cm4gbm9ybWFsaXplKCAoIG1hdHJpeCAqIHZlYzQoIGRpciwgMC4wICkgKS54eXogKTtcXG59XFxudmVjMyBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCBpbiB2ZWMzIGRpciwgaW4gbWF0NCBtYXRyaXggKSB7XFxuXFx0cmV0dXJuIG5vcm1hbGl6ZSggKCB2ZWM0KCBkaXIsIDAuMCApICogbWF0cml4ICkueHl6ICk7XFxufVxcbnZlYzMgcHJvamVjdE9uUGxhbmUoaW4gdmVjMyBwb2ludCwgaW4gdmVjMyBwb2ludE9uUGxhbmUsIGluIHZlYzMgcGxhbmVOb3JtYWwgKSB7XFxuXFx0ZmxvYXQgZGlzdGFuY2UgPSBkb3QoIHBsYW5lTm9ybWFsLCBwb2ludCAtIHBvaW50T25QbGFuZSApO1xcblxcdHJldHVybiAtIGRpc3RhbmNlICogcGxhbmVOb3JtYWwgKyBwb2ludDtcXG59XFxuZmxvYXQgc2lkZU9mUGxhbmUoIGluIHZlYzMgcG9pbnQsIGluIHZlYzMgcG9pbnRPblBsYW5lLCBpbiB2ZWMzIHBsYW5lTm9ybWFsICkge1xcblxcdHJldHVybiBzaWduKCBkb3QoIHBvaW50IC0gcG9pbnRPblBsYW5lLCBwbGFuZU5vcm1hbCApICk7XFxufVxcbnZlYzMgbGluZVBsYW5lSW50ZXJzZWN0KCBpbiB2ZWMzIHBvaW50T25MaW5lLCBpbiB2ZWMzIGxpbmVEaXJlY3Rpb24sIGluIHZlYzMgcG9pbnRPblBsYW5lLCBpbiB2ZWMzIHBsYW5lTm9ybWFsICkge1xcblxcdHJldHVybiBsaW5lRGlyZWN0aW9uICogKCBkb3QoIHBsYW5lTm9ybWFsLCBwb2ludE9uUGxhbmUgLSBwb2ludE9uTGluZSApIC8gZG90KCBwbGFuZU5vcm1hbCwgbGluZURpcmVjdGlvbiApICkgKyBwb2ludE9uTGluZTtcXG59XFxubWF0MyB0cmFuc3Bvc2VNYXQzKCBjb25zdCBpbiBtYXQzIG0gKSB7XFxuXFx0bWF0MyB0bXA7XFxuXFx0dG1wWyAwIF0gPSB2ZWMzKCBtWyAwIF0ueCwgbVsgMSBdLngsIG1bIDIgXS54ICk7XFxuXFx0dG1wWyAxIF0gPSB2ZWMzKCBtWyAwIF0ueSwgbVsgMSBdLnksIG1bIDIgXS55ICk7XFxuXFx0dG1wWyAyIF0gPSB2ZWMzKCBtWyAwIF0ueiwgbVsgMSBdLnosIG1bIDIgXS56ICk7XFxuXFx0cmV0dXJuIHRtcDtcXG59XFxuZmxvYXQgbGluZWFyVG9SZWxhdGl2ZUx1bWluYW5jZSggY29uc3QgaW4gdmVjMyBjb2xvciApIHtcXG5cXHR2ZWMzIHdlaWdodHMgPSB2ZWMzKCAwLjIxMjYsIDAuNzE1MiwgMC4wNzIyICk7XFxuXFx0cmV0dXJuIGRvdCggd2VpZ2h0cywgY29sb3IucmdiICk7XFxufVxcblwiLFxuY3ViZV91dl9yZWZsZWN0aW9uX2ZyYWdtZW50OlwiI2lmZGVmIEVOVk1BUF9UWVBFX0NVQkVfVVZcXG4jZGVmaW5lIGN1YmVVVl90ZXh0dXJlU2l6ZSAoMTAyNC4wKVxcbmludCBnZXRGYWNlRnJvbURpcmVjdGlvbih2ZWMzIGRpcmVjdGlvbikge1xcblxcdHZlYzMgYWJzRGlyZWN0aW9uID0gYWJzKGRpcmVjdGlvbik7XFxuXFx0aW50IGZhY2UgPSAtMTtcXG5cXHRpZiggYWJzRGlyZWN0aW9uLnggPiBhYnNEaXJlY3Rpb24ueiApIHtcXG5cXHRcXHRpZihhYnNEaXJlY3Rpb24ueCA+IGFic0RpcmVjdGlvbi55IClcXG5cXHRcXHRcXHRmYWNlID0gZGlyZWN0aW9uLnggPiAwLjAgPyAwIDogMztcXG5cXHRcXHRlbHNlXFxuXFx0XFx0XFx0ZmFjZSA9IGRpcmVjdGlvbi55ID4gMC4wID8gMSA6IDQ7XFxuXFx0fVxcblxcdGVsc2Uge1xcblxcdFxcdGlmKGFic0RpcmVjdGlvbi56ID4gYWJzRGlyZWN0aW9uLnkgKVxcblxcdFxcdFxcdGZhY2UgPSBkaXJlY3Rpb24ueiA+IDAuMCA/IDIgOiA1O1xcblxcdFxcdGVsc2VcXG5cXHRcXHRcXHRmYWNlID0gZGlyZWN0aW9uLnkgPiAwLjAgPyAxIDogNDtcXG5cXHR9XFxuXFx0cmV0dXJuIGZhY2U7XFxufVxcbiNkZWZpbmUgY3ViZVVWX21heExvZHMxICAobG9nMihjdWJlVVZfdGV4dHVyZVNpemUqMC4yNSkgLSAxLjApXFxuI2RlZmluZSBjdWJlVVZfcmFuZ2VDbGFtcCAoZXhwMigoNi4wIC0gMS4wKSAqIDIuMCkpXFxudmVjMiBNaXBMZXZlbEluZm8oIHZlYzMgdmVjLCBmbG9hdCByb3VnaG5lc3NMZXZlbCwgZmxvYXQgcm91Z2huZXNzICkge1xcblxcdGZsb2F0IHNjYWxlID0gZXhwMihjdWJlVVZfbWF4TG9kczEgLSByb3VnaG5lc3NMZXZlbCk7XFxuXFx0ZmxvYXQgZHhSb3VnaG5lc3MgPSBkRmR4KHJvdWdobmVzcyk7XFxuXFx0ZmxvYXQgZHlSb3VnaG5lc3MgPSBkRmR5KHJvdWdobmVzcyk7XFxuXFx0dmVjMyBkeCA9IGRGZHgoIHZlYyAqIHNjYWxlICogZHhSb3VnaG5lc3MgKTtcXG5cXHR2ZWMzIGR5ID0gZEZkeSggdmVjICogc2NhbGUgKiBkeVJvdWdobmVzcyApO1xcblxcdGZsb2F0IGQgPSBtYXgoIGRvdCggZHgsIGR4ICksIGRvdCggZHksIGR5ICkgKTtcXG5cXHRkID0gY2xhbXAoZCwgMS4wLCBjdWJlVVZfcmFuZ2VDbGFtcCk7XFxuXFx0ZmxvYXQgbWlwTGV2ZWwgPSAwLjUgKiBsb2cyKGQpO1xcblxcdHJldHVybiB2ZWMyKGZsb29yKG1pcExldmVsKSwgZnJhY3QobWlwTGV2ZWwpKTtcXG59XFxuI2RlZmluZSBjdWJlVVZfbWF4TG9kczIgKGxvZzIoY3ViZVVWX3RleHR1cmVTaXplKjAuMjUpIC0gMi4wKVxcbiNkZWZpbmUgY3ViZVVWX3JjcFRleHR1cmVTaXplICgxLjAgLyBjdWJlVVZfdGV4dHVyZVNpemUpXFxudmVjMiBnZXRDdWJlVVYodmVjMyBkaXJlY3Rpb24sIGZsb2F0IHJvdWdobmVzc0xldmVsLCBmbG9hdCBtaXBMZXZlbCkge1xcblxcdG1pcExldmVsID0gcm91Z2huZXNzTGV2ZWwgPiBjdWJlVVZfbWF4TG9kczIgLSAzLjAgPyAwLjAgOiBtaXBMZXZlbDtcXG5cXHRmbG9hdCBhID0gMTYuMCAqIGN1YmVVVl9yY3BUZXh0dXJlU2l6ZTtcXG5cXHR2ZWMyIGV4cDJfcGFja2VkID0gZXhwMiggdmVjMiggcm91Z2huZXNzTGV2ZWwsIG1pcExldmVsICkgKTtcXG5cXHR2ZWMyIHJjcF9leHAyX3BhY2tlZCA9IHZlYzIoIDEuMCApIC8gZXhwMl9wYWNrZWQ7XFxuXFx0ZmxvYXQgcG93U2NhbGUgPSBleHAyX3BhY2tlZC54ICogZXhwMl9wYWNrZWQueTtcXG5cXHRmbG9hdCBzY2FsZSA9IHJjcF9leHAyX3BhY2tlZC54ICogcmNwX2V4cDJfcGFja2VkLnkgKiAwLjI1O1xcblxcdGZsb2F0IG1pcE9mZnNldCA9IDAuNzUqKDEuMCAtIHJjcF9leHAyX3BhY2tlZC55KSAqIHJjcF9leHAyX3BhY2tlZC54O1xcblxcdGJvb2wgYlJlcyA9IG1pcExldmVsID09IDAuMDtcXG5cXHRzY2FsZSA9ICBiUmVzICYmIChzY2FsZSA8IGEpID8gYSA6IHNjYWxlO1xcblxcdHZlYzMgcjtcXG5cXHR2ZWMyIG9mZnNldDtcXG5cXHRpbnQgZmFjZSA9IGdldEZhY2VGcm9tRGlyZWN0aW9uKGRpcmVjdGlvbik7XFxuXFx0ZmxvYXQgcmNwUG93U2NhbGUgPSAxLjAgLyBwb3dTY2FsZTtcXG5cXHRpZiggZmFjZSA9PSAwKSB7XFxuXFx0XFx0ciA9IHZlYzMoZGlyZWN0aW9uLngsIC1kaXJlY3Rpb24ueiwgZGlyZWN0aW9uLnkpO1xcblxcdFxcdG9mZnNldCA9IHZlYzIoMC4wK21pcE9mZnNldCwwLjc1ICogcmNwUG93U2NhbGUpO1xcblxcdFxcdG9mZnNldC55ID0gYlJlcyAmJiAob2Zmc2V0LnkgPCAyLjAqYSkgPyBhIDogb2Zmc2V0Lnk7XFxuXFx0fVxcblxcdGVsc2UgaWYoIGZhY2UgPT0gMSkge1xcblxcdFxcdHIgPSB2ZWMzKGRpcmVjdGlvbi55LCBkaXJlY3Rpb24ueCwgZGlyZWN0aW9uLnopO1xcblxcdFxcdG9mZnNldCA9IHZlYzIoc2NhbGUrbWlwT2Zmc2V0LCAwLjc1ICogcmNwUG93U2NhbGUpO1xcblxcdFxcdG9mZnNldC55ID0gYlJlcyAmJiAob2Zmc2V0LnkgPCAyLjAqYSkgPyBhIDogb2Zmc2V0Lnk7XFxuXFx0fVxcblxcdGVsc2UgaWYoIGZhY2UgPT0gMikge1xcblxcdFxcdHIgPSB2ZWMzKGRpcmVjdGlvbi56LCBkaXJlY3Rpb24ueCwgZGlyZWN0aW9uLnkpO1xcblxcdFxcdG9mZnNldCA9IHZlYzIoMi4wKnNjYWxlK21pcE9mZnNldCwgMC43NSAqIHJjcFBvd1NjYWxlKTtcXG5cXHRcXHRvZmZzZXQueSA9IGJSZXMgJiYgKG9mZnNldC55IDwgMi4wKmEpID8gYSA6IG9mZnNldC55O1xcblxcdH1cXG5cXHRlbHNlIGlmKCBmYWNlID09IDMpIHtcXG5cXHRcXHRyID0gdmVjMyhkaXJlY3Rpb24ueCwgZGlyZWN0aW9uLnosIGRpcmVjdGlvbi55KTtcXG5cXHRcXHRvZmZzZXQgPSB2ZWMyKDAuMCttaXBPZmZzZXQsMC41ICogcmNwUG93U2NhbGUpO1xcblxcdFxcdG9mZnNldC55ID0gYlJlcyAmJiAob2Zmc2V0LnkgPCAyLjAqYSkgPyAwLjAgOiBvZmZzZXQueTtcXG5cXHR9XFxuXFx0ZWxzZSBpZiggZmFjZSA9PSA0KSB7XFxuXFx0XFx0ciA9IHZlYzMoZGlyZWN0aW9uLnksIGRpcmVjdGlvbi54LCAtZGlyZWN0aW9uLnopO1xcblxcdFxcdG9mZnNldCA9IHZlYzIoc2NhbGUrbWlwT2Zmc2V0LCAwLjUgKiByY3BQb3dTY2FsZSk7XFxuXFx0XFx0b2Zmc2V0LnkgPSBiUmVzICYmIChvZmZzZXQueSA8IDIuMCphKSA/IDAuMCA6IG9mZnNldC55O1xcblxcdH1cXG5cXHRlbHNlIHtcXG5cXHRcXHRyID0gdmVjMyhkaXJlY3Rpb24ueiwgLWRpcmVjdGlvbi54LCBkaXJlY3Rpb24ueSk7XFxuXFx0XFx0b2Zmc2V0ID0gdmVjMigyLjAqc2NhbGUrbWlwT2Zmc2V0LCAwLjUgKiByY3BQb3dTY2FsZSk7XFxuXFx0XFx0b2Zmc2V0LnkgPSBiUmVzICYmIChvZmZzZXQueSA8IDIuMCphKSA/IDAuMCA6IG9mZnNldC55O1xcblxcdH1cXG5cXHRyID0gbm9ybWFsaXplKHIpO1xcblxcdGZsb2F0IHRleGVsT2Zmc2V0ID0gMC41ICogY3ViZVVWX3JjcFRleHR1cmVTaXplO1xcblxcdHZlYzIgcyA9ICggci55eiAvIGFicyggci54ICkgKyB2ZWMyKCAxLjAgKSApICogMC41O1xcblxcdHZlYzIgYmFzZSA9IG9mZnNldCArIHZlYzIoIHRleGVsT2Zmc2V0ICk7XFxuXFx0cmV0dXJuIGJhc2UgKyBzICogKCBzY2FsZSAtIDIuMCAqIHRleGVsT2Zmc2V0ICk7XFxufVxcbiNkZWZpbmUgY3ViZVVWX21heExvZHMzIChsb2cyKGN1YmVVVl90ZXh0dXJlU2l6ZSowLjI1KSAtIDMuMClcXG52ZWM0IHRleHR1cmVDdWJlVVYodmVjMyByZWZsZWN0ZWREaXJlY3Rpb24sIGZsb2F0IHJvdWdobmVzcyApIHtcXG5cXHRmbG9hdCByb3VnaG5lc3NWYWwgPSByb3VnaG5lc3MqIGN1YmVVVl9tYXhMb2RzMztcXG5cXHRmbG9hdCByMSA9IGZsb29yKHJvdWdobmVzc1ZhbCk7XFxuXFx0ZmxvYXQgcjIgPSByMSArIDEuMDtcXG5cXHRmbG9hdCB0ID0gZnJhY3Qocm91Z2huZXNzVmFsKTtcXG5cXHR2ZWMyIG1pcEluZm8gPSBNaXBMZXZlbEluZm8ocmVmbGVjdGVkRGlyZWN0aW9uLCByMSwgcm91Z2huZXNzKTtcXG5cXHRmbG9hdCBzID0gbWlwSW5mby55O1xcblxcdGZsb2F0IGxldmVsMCA9IG1pcEluZm8ueDtcXG5cXHRmbG9hdCBsZXZlbDEgPSBsZXZlbDAgKyAxLjA7XFxuXFx0bGV2ZWwxID0gbGV2ZWwxID4gNS4wID8gNS4wIDogbGV2ZWwxO1xcblxcdGxldmVsMCArPSBtaW4oIGZsb29yKCBzICsgMC41ICksIDUuMCApO1xcblxcdHZlYzIgdXZfMTAgPSBnZXRDdWJlVVYocmVmbGVjdGVkRGlyZWN0aW9uLCByMSwgbGV2ZWwwKTtcXG5cXHR2ZWM0IGNvbG9yMTAgPSBlbnZNYXBUZXhlbFRvTGluZWFyKHRleHR1cmUyRChlbnZNYXAsIHV2XzEwKSk7XFxuXFx0dmVjMiB1dl8yMCA9IGdldEN1YmVVVihyZWZsZWN0ZWREaXJlY3Rpb24sIHIyLCBsZXZlbDApO1xcblxcdHZlYzQgY29sb3IyMCA9IGVudk1hcFRleGVsVG9MaW5lYXIodGV4dHVyZTJEKGVudk1hcCwgdXZfMjApKTtcXG5cXHR2ZWM0IHJlc3VsdCA9IG1peChjb2xvcjEwLCBjb2xvcjIwLCB0KTtcXG5cXHRyZXR1cm4gdmVjNChyZXN1bHQucmdiLCAxLjApO1xcbn1cXG4jZW5kaWZcXG5cIixcbmRlZmF1bHRub3JtYWxfdmVydGV4OlwidmVjMyB0cmFuc2Zvcm1lZE5vcm1hbCA9IG5vcm1hbE1hdHJpeCAqIG9iamVjdE5vcm1hbDtcXG4jaWZkZWYgRkxJUF9TSURFRFxcblxcdHRyYW5zZm9ybWVkTm9ybWFsID0gLSB0cmFuc2Zvcm1lZE5vcm1hbDtcXG4jZW5kaWZcXG5cIixkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg6XCIjaWZkZWYgVVNFX0RJU1BMQUNFTUVOVE1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGRpc3BsYWNlbWVudE1hcDtcXG5cXHR1bmlmb3JtIGZsb2F0IGRpc3BsYWNlbWVudFNjYWxlO1xcblxcdHVuaWZvcm0gZmxvYXQgZGlzcGxhY2VtZW50QmlhcztcXG4jZW5kaWZcXG5cIixkaXNwbGFjZW1lbnRtYXBfdmVydGV4OlwiI2lmZGVmIFVTRV9ESVNQTEFDRU1FTlRNQVBcXG5cXHR0cmFuc2Zvcm1lZCArPSBub3JtYWxpemUoIG9iamVjdE5vcm1hbCApICogKCB0ZXh0dXJlMkQoIGRpc3BsYWNlbWVudE1hcCwgdXYgKS54ICogZGlzcGxhY2VtZW50U2NhbGUgKyBkaXNwbGFjZW1lbnRCaWFzICk7XFxuI2VuZGlmXFxuXCIsXG5lbWlzc2l2ZW1hcF9mcmFnbWVudDpcIiNpZmRlZiBVU0VfRU1JU1NJVkVNQVBcXG5cXHR2ZWM0IGVtaXNzaXZlQ29sb3IgPSB0ZXh0dXJlMkQoIGVtaXNzaXZlTWFwLCB2VXYgKTtcXG5cXHRlbWlzc2l2ZUNvbG9yLnJnYiA9IGVtaXNzaXZlTWFwVGV4ZWxUb0xpbmVhciggZW1pc3NpdmVDb2xvciApLnJnYjtcXG5cXHR0b3RhbEVtaXNzaXZlUmFkaWFuY2UgKj0gZW1pc3NpdmVDb2xvci5yZ2I7XFxuI2VuZGlmXFxuXCIsZW1pc3NpdmVtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfRU1JU1NJVkVNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBlbWlzc2l2ZU1hcDtcXG4jZW5kaWZcXG5cIixlbmNvZGluZ3NfZnJhZ21lbnQ6XCIgIGdsX0ZyYWdDb2xvciA9IGxpbmVhclRvT3V0cHV0VGV4ZWwoIGdsX0ZyYWdDb2xvciApO1xcblwiLGVuY29kaW5nc19wYXJzX2ZyYWdtZW50OlwiXFxudmVjNCBMaW5lYXJUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSApIHtcXG5cXHRyZXR1cm4gdmFsdWU7XFxufVxcbnZlYzQgR2FtbWFUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgZ2FtbWFGYWN0b3IgKSB7XFxuXFx0cmV0dXJuIHZlYzQoIHBvdyggdmFsdWUueHl6LCB2ZWMzKCBnYW1tYUZhY3RvciApICksIHZhbHVlLncgKTtcXG59XFxudmVjNCBMaW5lYXJUb0dhbW1hKCBpbiB2ZWM0IHZhbHVlLCBpbiBmbG9hdCBnYW1tYUZhY3RvciApIHtcXG5cXHRyZXR1cm4gdmVjNCggcG93KCB2YWx1ZS54eXosIHZlYzMoIDEuMCAvIGdhbW1hRmFjdG9yICkgKSwgdmFsdWUudyApO1xcbn1cXG52ZWM0IHNSR0JUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSApIHtcXG5cXHRyZXR1cm4gdmVjNCggbWl4KCBwb3coIHZhbHVlLnJnYiAqIDAuOTQ3ODY3Mjk4NiArIHZlYzMoIDAuMDUyMTMyNzAxNCApLCB2ZWMzKCAyLjQgKSApLCB2YWx1ZS5yZ2IgKiAwLjA3NzM5OTM4MDgsIHZlYzMoIGxlc3NUaGFuRXF1YWwoIHZhbHVlLnJnYiwgdmVjMyggMC4wNDA0NSApICkgKSApLCB2YWx1ZS53ICk7XFxufVxcbnZlYzQgTGluZWFyVG9zUkdCKCBpbiB2ZWM0IHZhbHVlICkge1xcblxcdHJldHVybiB2ZWM0KCBtaXgoIHBvdyggdmFsdWUucmdiLCB2ZWMzKCAwLjQxNjY2ICkgKSAqIDEuMDU1IC0gdmVjMyggMC4wNTUgKSwgdmFsdWUucmdiICogMTIuOTIsIHZlYzMoIGxlc3NUaGFuRXF1YWwoIHZhbHVlLnJnYiwgdmVjMyggMC4wMDMxMzA4ICkgKSApICksIHZhbHVlLncgKTtcXG59XFxudmVjNCBSR0JFVG9MaW5lYXIoIGluIHZlYzQgdmFsdWUgKSB7XFxuXFx0cmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAqIGV4cDIoIHZhbHVlLmEgKiAyNTUuMCAtIDEyOC4wICksIDEuMCApO1xcbn1cXG52ZWM0IExpbmVhclRvUkdCRSggaW4gdmVjNCB2YWx1ZSApIHtcXG5cXHRmbG9hdCBtYXhDb21wb25lbnQgPSBtYXgoIG1heCggdmFsdWUuciwgdmFsdWUuZyApLCB2YWx1ZS5iICk7XFxuXFx0ZmxvYXQgZkV4cCA9IGNsYW1wKCBjZWlsKCBsb2cyKCBtYXhDb21wb25lbnQgKSApLCAtMTI4LjAsIDEyNy4wICk7XFxuXFx0cmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAvIGV4cDIoIGZFeHAgKSwgKCBmRXhwICsgMTI4LjAgKSAvIDI1NS4wICk7XFxufVxcbnZlYzQgUkdCTVRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlLCBpbiBmbG9hdCBtYXhSYW5nZSApIHtcXG5cXHRyZXR1cm4gdmVjNCggdmFsdWUueHl6ICogdmFsdWUudyAqIG1heFJhbmdlLCAxLjAgKTtcXG59XFxudmVjNCBMaW5lYXJUb1JHQk0oIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IG1heFJhbmdlICkge1xcblxcdGZsb2F0IG1heFJHQiA9IG1heCggdmFsdWUueCwgbWF4KCB2YWx1ZS5nLCB2YWx1ZS5iICkgKTtcXG5cXHRmbG9hdCBNICAgICAgPSBjbGFtcCggbWF4UkdCIC8gbWF4UmFuZ2UsIDAuMCwgMS4wICk7XFxuXFx0TSAgICAgICAgICAgID0gY2VpbCggTSAqIDI1NS4wICkgLyAyNTUuMDtcXG5cXHRyZXR1cm4gdmVjNCggdmFsdWUucmdiIC8gKCBNICogbWF4UmFuZ2UgKSwgTSApO1xcbn1cXG52ZWM0IFJHQkRUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgbWF4UmFuZ2UgKSB7XFxuXFx0cmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAqICggKCBtYXhSYW5nZSAvIDI1NS4wICkgLyB2YWx1ZS5hICksIDEuMCApO1xcbn1cXG52ZWM0IExpbmVhclRvUkdCRCggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgbWF4UmFuZ2UgKSB7XFxuXFx0ZmxvYXQgbWF4UkdCID0gbWF4KCB2YWx1ZS54LCBtYXgoIHZhbHVlLmcsIHZhbHVlLmIgKSApO1xcblxcdGZsb2F0IEQgICAgICA9IG1heCggbWF4UmFuZ2UgLyBtYXhSR0IsIDEuMCApO1xcblxcdEQgICAgICAgICAgICA9IG1pbiggZmxvb3IoIEQgKSAvIDI1NS4wLCAxLjAgKTtcXG5cXHRyZXR1cm4gdmVjNCggdmFsdWUucmdiICogKCBEICogKCAyNTUuMCAvIG1heFJhbmdlICkgKSwgRCApO1xcbn1cXG5jb25zdCBtYXQzIGNMb2dMdXZNID0gbWF0MyggMC4yMjA5LCAwLjMzOTAsIDAuNDE4NCwgMC4xMTM4LCAwLjY3ODAsIDAuNzMxOSwgMC4wMTAyLCAwLjExMzAsIDAuMjk2OSApO1xcbnZlYzQgTGluZWFyVG9Mb2dMdXYoIGluIHZlYzQgdmFsdWUgKSAge1xcblxcdHZlYzMgWHBfWV9YWVpwID0gdmFsdWUucmdiICogY0xvZ0x1dk07XFxuXFx0WHBfWV9YWVpwID0gbWF4KFhwX1lfWFlacCwgdmVjMygxZS02LCAxZS02LCAxZS02KSk7XFxuXFx0dmVjNCB2UmVzdWx0O1xcblxcdHZSZXN1bHQueHkgPSBYcF9ZX1hZWnAueHkgLyBYcF9ZX1hZWnAuejtcXG5cXHRmbG9hdCBMZSA9IDIuMCAqIGxvZzIoWHBfWV9YWVpwLnkpICsgMTI3LjA7XFxuXFx0dlJlc3VsdC53ID0gZnJhY3QoTGUpO1xcblxcdHZSZXN1bHQueiA9IChMZSAtIChmbG9vcih2UmVzdWx0LncqMjU1LjApKS8yNTUuMCkvMjU1LjA7XFxuXFx0cmV0dXJuIHZSZXN1bHQ7XFxufVxcbmNvbnN0IG1hdDMgY0xvZ0x1dkludmVyc2VNID0gbWF0MyggNi4wMDE0LCAtMi43MDA4LCAtMS43OTk2LCAtMS4zMzIwLCAzLjEwMjksIC01Ljc3MjEsIDAuMzAwOCwgLTEuMDg4MiwgNS42MjY4ICk7XFxudmVjNCBMb2dMdXZUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSApIHtcXG5cXHRmbG9hdCBMZSA9IHZhbHVlLnogKiAyNTUuMCArIHZhbHVlLnc7XFxuXFx0dmVjMyBYcF9ZX1hZWnA7XFxuXFx0WHBfWV9YWVpwLnkgPSBleHAyKChMZSAtIDEyNy4wKSAvIDIuMCk7XFxuXFx0WHBfWV9YWVpwLnogPSBYcF9ZX1hZWnAueSAvIHZhbHVlLnk7XFxuXFx0WHBfWV9YWVpwLnggPSB2YWx1ZS54ICogWHBfWV9YWVpwLno7XFxuXFx0dmVjMyB2UkdCID0gWHBfWV9YWVpwLnJnYiAqIGNMb2dMdXZJbnZlcnNlTTtcXG5cXHRyZXR1cm4gdmVjNCggbWF4KHZSR0IsIDAuMCksIDEuMCApO1xcbn1cXG5cIixcbmVudm1hcF9mcmFnbWVudDpcIiNpZmRlZiBVU0VfRU5WTUFQXFxuXFx0I2lmIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFBIT05HIClcXG5cXHRcXHR2ZWMzIGNhbWVyYVRvVmVydGV4ID0gbm9ybWFsaXplKCB2V29ybGRQb3NpdGlvbiAtIGNhbWVyYVBvc2l0aW9uICk7XFxuXFx0XFx0dmVjMyB3b3JsZE5vcm1hbCA9IGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIG5vcm1hbCwgdmlld01hdHJpeCApO1xcblxcdFxcdCNpZmRlZiBFTlZNQVBfTU9ERV9SRUZMRUNUSU9OXFxuXFx0XFx0XFx0dmVjMyByZWZsZWN0VmVjID0gcmVmbGVjdCggY2FtZXJhVG9WZXJ0ZXgsIHdvcmxkTm9ybWFsICk7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHR2ZWMzIHJlZmxlY3RWZWMgPSByZWZyYWN0KCBjYW1lcmFUb1ZlcnRleCwgd29ybGROb3JtYWwsIHJlZnJhY3Rpb25SYXRpbyApO1xcblxcdFxcdCNlbmRpZlxcblxcdCNlbHNlXFxuXFx0XFx0dmVjMyByZWZsZWN0VmVjID0gdlJlZmxlY3Q7XFxuXFx0I2VuZGlmXFxuXFx0I2lmZGVmIEVOVk1BUF9UWVBFX0NVQkVcXG5cXHRcXHR2ZWM0IGVudkNvbG9yID0gdGV4dHVyZUN1YmUoIGVudk1hcCwgdmVjMyggZmxpcEVudk1hcCAqIHJlZmxlY3RWZWMueCwgcmVmbGVjdFZlYy55eiApICk7XFxuXFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfRVFVSVJFQyApXFxuXFx0XFx0dmVjMiBzYW1wbGVVVjtcXG5cXHRcXHRyZWZsZWN0VmVjID0gbm9ybWFsaXplKCByZWZsZWN0VmVjICk7XFxuXFx0XFx0c2FtcGxlVVYueSA9IGFzaW4oIGNsYW1wKCByZWZsZWN0VmVjLnksIC0gMS4wLCAxLjAgKSApICogUkVDSVBST0NBTF9QSSArIDAuNTtcXG5cXHRcXHRzYW1wbGVVVi54ID0gYXRhbiggcmVmbGVjdFZlYy56LCByZWZsZWN0VmVjLnggKSAqIFJFQ0lQUk9DQUxfUEkyICsgMC41O1xcblxcdFxcdHZlYzQgZW52Q29sb3IgPSB0ZXh0dXJlMkQoIGVudk1hcCwgc2FtcGxlVVYgKTtcXG5cXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfVFlQRV9TUEhFUkUgKVxcblxcdFxcdHJlZmxlY3RWZWMgPSBub3JtYWxpemUoIHJlZmxlY3RWZWMgKTtcXG5cXHRcXHR2ZWMzIHJlZmxlY3RWaWV3ID0gbm9ybWFsaXplKCAoIHZpZXdNYXRyaXggKiB2ZWM0KCByZWZsZWN0VmVjLCAwLjAgKSApLnh5eiArIHZlYzMoIDAuMCwgMC4wLCAxLjAgKSApO1xcblxcdFxcdHZlYzQgZW52Q29sb3IgPSB0ZXh0dXJlMkQoIGVudk1hcCwgcmVmbGVjdFZpZXcueHkgKiAwLjUgKyAwLjUgKTtcXG5cXHQjZWxzZVxcblxcdFxcdHZlYzQgZW52Q29sb3IgPSB2ZWM0KCAwLjAgKTtcXG5cXHQjZW5kaWZcXG5cXHRlbnZDb2xvciA9IGVudk1hcFRleGVsVG9MaW5lYXIoIGVudkNvbG9yICk7XFxuXFx0I2lmZGVmIEVOVk1BUF9CTEVORElOR19NVUxUSVBMWVxcblxcdFxcdG91dGdvaW5nTGlnaHQgPSBtaXgoIG91dGdvaW5nTGlnaHQsIG91dGdvaW5nTGlnaHQgKiBlbnZDb2xvci54eXosIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHkgKTtcXG5cXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfQkxFTkRJTkdfTUlYIClcXG5cXHRcXHRvdXRnb2luZ0xpZ2h0ID0gbWl4KCBvdXRnb2luZ0xpZ2h0LCBlbnZDb2xvci54eXosIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHkgKTtcXG5cXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfQkxFTkRJTkdfQUREIClcXG5cXHRcXHRvdXRnb2luZ0xpZ2h0ICs9IGVudkNvbG9yLnh5eiAqIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHk7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCIsXG5lbnZtYXBfcGFyc19mcmFnbWVudDpcIiNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQICkgfHwgZGVmaW5lZCggUEhZU0lDQUwgKVxcblxcdHVuaWZvcm0gZmxvYXQgcmVmbGVjdGl2aXR5O1xcblxcdHVuaWZvcm0gZmxvYXQgZW52TWFwSW50ZW5zaXR5O1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfRU5WTUFQXFxuXFx0I2lmICEgZGVmaW5lZCggUEhZU0lDQUwgKSAmJiAoIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFBIT05HICkgKVxcblxcdFxcdHZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG5cXHQjZW5kaWZcXG5cXHQjaWZkZWYgRU5WTUFQX1RZUEVfQ1VCRVxcblxcdFxcdHVuaWZvcm0gc2FtcGxlckN1YmUgZW52TWFwO1xcblxcdCNlbHNlXFxuXFx0XFx0dW5pZm9ybSBzYW1wbGVyMkQgZW52TWFwO1xcblxcdCNlbmRpZlxcblxcdHVuaWZvcm0gZmxvYXQgZmxpcEVudk1hcDtcXG5cXHQjaWYgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTk9STUFMTUFQICkgfHwgZGVmaW5lZCggUEhPTkcgKSB8fCBkZWZpbmVkKCBQSFlTSUNBTCApXFxuXFx0XFx0dW5pZm9ybSBmbG9hdCByZWZyYWN0aW9uUmF0aW87XFxuXFx0I2Vsc2VcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdlJlZmxlY3Q7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCIsXG5lbnZtYXBfcGFyc192ZXJ0ZXg6XCIjaWZkZWYgVVNFX0VOVk1BUFxcblxcdCNpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBQSE9ORyApXFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcblxcdCNlbHNlXFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZSZWZsZWN0O1xcblxcdFxcdHVuaWZvcm0gZmxvYXQgcmVmcmFjdGlvblJhdGlvO1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiLGVudm1hcF92ZXJ0ZXg6XCIjaWZkZWYgVVNFX0VOVk1BUFxcblxcdCNpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBQSE9ORyApXFxuXFx0XFx0dldvcmxkUG9zaXRpb24gPSB3b3JsZFBvc2l0aW9uLnh5ejtcXG5cXHQjZWxzZVxcblxcdFxcdHZlYzMgY2FtZXJhVG9WZXJ0ZXggPSBub3JtYWxpemUoIHdvcmxkUG9zaXRpb24ueHl6IC0gY2FtZXJhUG9zaXRpb24gKTtcXG5cXHRcXHR2ZWMzIHdvcmxkTm9ybWFsID0gaW52ZXJzZVRyYW5zZm9ybURpcmVjdGlvbiggdHJhbnNmb3JtZWROb3JtYWwsIHZpZXdNYXRyaXggKTtcXG5cXHRcXHQjaWZkZWYgRU5WTUFQX01PREVfUkVGTEVDVElPTlxcblxcdFxcdFxcdHZSZWZsZWN0ID0gcmVmbGVjdCggY2FtZXJhVG9WZXJ0ZXgsIHdvcmxkTm9ybWFsICk7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHR2UmVmbGVjdCA9IHJlZnJhY3QoIGNhbWVyYVRvVmVydGV4LCB3b3JsZE5vcm1hbCwgcmVmcmFjdGlvblJhdGlvICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCIsXG5mb2dfdmVydGV4OlwiXFxuI2lmZGVmIFVTRV9GT0dcXG5mb2dEZXB0aCA9IC1tdlBvc2l0aW9uLno7XFxuI2VuZGlmXCIsZm9nX3BhcnNfdmVydGV4OlwiI2lmZGVmIFVTRV9GT0dcXG4gIHZhcnlpbmcgZmxvYXQgZm9nRGVwdGg7XFxuI2VuZGlmXFxuXCIsZm9nX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9GT0dcXG5cXHQjaWZkZWYgRk9HX0VYUDJcXG5cXHRcXHRmbG9hdCBmb2dGYWN0b3IgPSB3aGl0ZUNvbXBsaW1lbnQoIGV4cDIoIC0gZm9nRGVuc2l0eSAqIGZvZ0RlbnNpdHkgKiBmb2dEZXB0aCAqIGZvZ0RlcHRoICogTE9HMiApICk7XFxuXFx0I2Vsc2VcXG5cXHRcXHRmbG9hdCBmb2dGYWN0b3IgPSBzbW9vdGhzdGVwKCBmb2dOZWFyLCBmb2dGYXIsIGZvZ0RlcHRoICk7XFxuXFx0I2VuZGlmXFxuXFx0Z2xfRnJhZ0NvbG9yLnJnYiA9IG1peCggZ2xfRnJhZ0NvbG9yLnJnYiwgZm9nQ29sb3IsIGZvZ0ZhY3RvciApO1xcbiNlbmRpZlxcblwiLGZvZ19wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9GT0dcXG5cXHR1bmlmb3JtIHZlYzMgZm9nQ29sb3I7XFxuXFx0dmFyeWluZyBmbG9hdCBmb2dEZXB0aDtcXG5cXHQjaWZkZWYgRk9HX0VYUDJcXG5cXHRcXHR1bmlmb3JtIGZsb2F0IGZvZ0RlbnNpdHk7XFxuXFx0I2Vsc2VcXG5cXHRcXHR1bmlmb3JtIGZsb2F0IGZvZ05lYXI7XFxuXFx0XFx0dW5pZm9ybSBmbG9hdCBmb2dGYXI7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCIsXG5ncmFkaWVudG1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFRPT05cXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBncmFkaWVudE1hcDtcXG5cXHR2ZWMzIGdldEdyYWRpZW50SXJyYWRpYW5jZSggdmVjMyBub3JtYWwsIHZlYzMgbGlnaHREaXJlY3Rpb24gKSB7XFxuXFx0XFx0ZmxvYXQgZG90TkwgPSBkb3QoIG5vcm1hbCwgbGlnaHREaXJlY3Rpb24gKTtcXG5cXHRcXHR2ZWMyIGNvb3JkID0gdmVjMiggZG90TkwgKiAwLjUgKyAwLjUsIDAuMCApO1xcblxcdFxcdCNpZmRlZiBVU0VfR1JBRElFTlRNQVBcXG5cXHRcXHRcXHRyZXR1cm4gdGV4dHVyZTJEKCBncmFkaWVudE1hcCwgY29vcmQgKS5yZ2I7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRyZXR1cm4gKCBjb29yZC54IDwgMC43ICkgPyB2ZWMzKCAwLjcgKSA6IHZlYzMoIDEuMCApO1xcblxcdFxcdCNlbmRpZlxcblxcdH1cXG4jZW5kaWZcXG5cIixsaWdodG1hcF9mcmFnbWVudDpcIiNpZmRlZiBVU0VfTElHSFRNQVBcXG5cXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gUEkgKiB0ZXh0dXJlMkQoIGxpZ2h0TWFwLCB2VXYyICkueHl6ICogbGlnaHRNYXBJbnRlbnNpdHk7XFxuI2VuZGlmXFxuXCIsXG5saWdodG1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9MSUdIVE1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGxpZ2h0TWFwO1xcblxcdHVuaWZvcm0gZmxvYXQgbGlnaHRNYXBJbnRlbnNpdHk7XFxuI2VuZGlmXCIsbGlnaHRzX2xhbWJlcnRfdmVydGV4OlwidmVjMyBkaWZmdXNlID0gdmVjMyggMS4wICk7XFxuR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeTtcXG5nZW9tZXRyeS5wb3NpdGlvbiA9IG12UG9zaXRpb24ueHl6O1xcbmdlb21ldHJ5Lm5vcm1hbCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWROb3JtYWwgKTtcXG5nZW9tZXRyeS52aWV3RGlyID0gbm9ybWFsaXplKCAtbXZQb3NpdGlvbi54eXogKTtcXG5HZW9tZXRyaWNDb250ZXh0IGJhY2tHZW9tZXRyeTtcXG5iYWNrR2VvbWV0cnkucG9zaXRpb24gPSBnZW9tZXRyeS5wb3NpdGlvbjtcXG5iYWNrR2VvbWV0cnkubm9ybWFsID0gLWdlb21ldHJ5Lm5vcm1hbDtcXG5iYWNrR2VvbWV0cnkudmlld0RpciA9IGdlb21ldHJ5LnZpZXdEaXI7XFxudkxpZ2h0RnJvbnQgPSB2ZWMzKCAwLjAgKTtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0dkxpZ2h0QmFjayA9IHZlYzMoIDAuMCApO1xcbiNlbmRpZlxcbkluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQ7XFxuZmxvYXQgZG90Tkw7XFxudmVjMyBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XFxuI2lmIE5VTV9QT0lOVF9MSUdIVFMgPiAwXFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1BPSU5UX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRnZXRQb2ludERpcmVjdExpZ2h0SXJyYWRpYW5jZSggcG9pbnRMaWdodHNbIGkgXSwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XFxuXFx0XFx0ZG90TkwgPSBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICk7XFxuXFx0XFx0ZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlID0gUEkgKiBkaXJlY3RMaWdodC5jb2xvcjtcXG5cXHRcXHR2TGlnaHRGcm9udCArPSBzYXR1cmF0ZSggZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cXHRcXHQjaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0XFx0XFx0dkxpZ2h0QmFjayArPSBzYXR1cmF0ZSggLWRvdE5MICkgKiBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XFxuXFx0XFx0I2VuZGlmXFxuXFx0fVxcbiNlbmRpZlxcbiNpZiBOVU1fU1BPVF9MSUdIVFMgPiAwXFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1NQT1RfTElHSFRTOyBpICsrICkge1xcblxcdFxcdGdldFNwb3REaXJlY3RMaWdodElycmFkaWFuY2UoIHNwb3RMaWdodHNbIGkgXSwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XFxuXFx0XFx0ZG90TkwgPSBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICk7XFxuXFx0XFx0ZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlID0gUEkgKiBkaXJlY3RMaWdodC5jb2xvcjtcXG5cXHRcXHR2TGlnaHRGcm9udCArPSBzYXR1cmF0ZSggZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cXHRcXHQjaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0XFx0XFx0dkxpZ2h0QmFjayArPSBzYXR1cmF0ZSggLWRvdE5MICkgKiBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XFxuXFx0XFx0I2VuZGlmXFxuXFx0fVxcbiNlbmRpZlxcbiNpZiBOVU1fRElSX0xJR0hUUyA+IDBcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fRElSX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRnZXREaXJlY3Rpb25hbERpcmVjdExpZ2h0SXJyYWRpYW5jZSggZGlyZWN0aW9uYWxMaWdodHNbIGkgXSwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XFxuXFx0XFx0ZG90TkwgPSBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICk7XFxuXFx0XFx0ZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlID0gUEkgKiBkaXJlY3RMaWdodC5jb2xvcjtcXG5cXHRcXHR2TGlnaHRGcm9udCArPSBzYXR1cmF0ZSggZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cXHRcXHQjaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0XFx0XFx0dkxpZ2h0QmFjayArPSBzYXR1cmF0ZSggLWRvdE5MICkgKiBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XFxuXFx0XFx0I2VuZGlmXFxuXFx0fVxcbiNlbmRpZlxcbiNpZiBOVU1fSEVNSV9MSUdIVFMgPiAwXFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0hFTUlfTElHSFRTOyBpICsrICkge1xcblxcdFxcdHZMaWdodEZyb250ICs9IGdldEhlbWlzcGhlcmVMaWdodElycmFkaWFuY2UoIGhlbWlzcGhlcmVMaWdodHNbIGkgXSwgZ2VvbWV0cnkgKTtcXG5cXHRcXHQjaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0XFx0XFx0dkxpZ2h0QmFjayArPSBnZXRIZW1pc3BoZXJlTGlnaHRJcnJhZGlhbmNlKCBoZW1pc3BoZXJlTGlnaHRzWyBpIF0sIGJhY2tHZW9tZXRyeSApO1xcblxcdFxcdCNlbmRpZlxcblxcdH1cXG4jZW5kaWZcXG5cIixcbmxpZ2h0c19wYXJzOlwidW5pZm9ybSB2ZWMzIGFtYmllbnRMaWdodENvbG9yO1xcbnZlYzMgZ2V0QW1iaWVudExpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gdmVjMyBhbWJpZW50TGlnaHRDb2xvciApIHtcXG5cXHR2ZWMzIGlycmFkaWFuY2UgPSBhbWJpZW50TGlnaHRDb2xvcjtcXG5cXHQjaWZuZGVmIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcXG5cXHRcXHRpcnJhZGlhbmNlICo9IFBJO1xcblxcdCNlbmRpZlxcblxcdHJldHVybiBpcnJhZGlhbmNlO1xcbn1cXG4jaWYgTlVNX0RJUl9MSUdIVFMgPiAwXFxuXFx0c3RydWN0IERpcmVjdGlvbmFsTGlnaHQge1xcblxcdFxcdHZlYzMgZGlyZWN0aW9uO1xcblxcdFxcdHZlYzMgY29sb3I7XFxuXFx0XFx0aW50IHNoYWRvdztcXG5cXHRcXHRmbG9hdCBzaGFkb3dCaWFzO1xcblxcdFxcdGZsb2F0IHNoYWRvd1JhZGl1cztcXG5cXHRcXHR2ZWMyIHNoYWRvd01hcFNpemU7XFxuXFx0fTtcXG5cXHR1bmlmb3JtIERpcmVjdGlvbmFsTGlnaHQgZGlyZWN0aW9uYWxMaWdodHNbIE5VTV9ESVJfTElHSFRTIF07XFxuXFx0dm9pZCBnZXREaXJlY3Rpb25hbERpcmVjdExpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gRGlyZWN0aW9uYWxMaWdodCBkaXJlY3Rpb25hbExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBvdXQgSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodCApIHtcXG5cXHRcXHRkaXJlY3RMaWdodC5jb2xvciA9IGRpcmVjdGlvbmFsTGlnaHQuY29sb3I7XFxuXFx0XFx0ZGlyZWN0TGlnaHQuZGlyZWN0aW9uID0gZGlyZWN0aW9uYWxMaWdodC5kaXJlY3Rpb247XFxuXFx0XFx0ZGlyZWN0TGlnaHQudmlzaWJsZSA9IHRydWU7XFxuXFx0fVxcbiNlbmRpZlxcbiNpZiBOVU1fUE9JTlRfTElHSFRTID4gMFxcblxcdHN0cnVjdCBQb2ludExpZ2h0IHtcXG5cXHRcXHR2ZWMzIHBvc2l0aW9uO1xcblxcdFxcdHZlYzMgY29sb3I7XFxuXFx0XFx0ZmxvYXQgZGlzdGFuY2U7XFxuXFx0XFx0ZmxvYXQgZGVjYXk7XFxuXFx0XFx0aW50IHNoYWRvdztcXG5cXHRcXHRmbG9hdCBzaGFkb3dCaWFzO1xcblxcdFxcdGZsb2F0IHNoYWRvd1JhZGl1cztcXG5cXHRcXHR2ZWMyIHNoYWRvd01hcFNpemU7XFxuXFx0XFx0ZmxvYXQgc2hhZG93Q2FtZXJhTmVhcjtcXG5cXHRcXHRmbG9hdCBzaGFkb3dDYW1lcmFGYXI7XFxuXFx0fTtcXG5cXHR1bmlmb3JtIFBvaW50TGlnaHQgcG9pbnRMaWdodHNbIE5VTV9QT0lOVF9MSUdIVFMgXTtcXG5cXHR2b2lkIGdldFBvaW50RGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBjb25zdCBpbiBQb2ludExpZ2h0IHBvaW50TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIG91dCBJbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0ICkge1xcblxcdFxcdHZlYzMgbFZlY3RvciA9IHBvaW50TGlnaHQucG9zaXRpb24gLSBnZW9tZXRyeS5wb3NpdGlvbjtcXG5cXHRcXHRkaXJlY3RMaWdodC5kaXJlY3Rpb24gPSBub3JtYWxpemUoIGxWZWN0b3IgKTtcXG5cXHRcXHRmbG9hdCBsaWdodERpc3RhbmNlID0gbGVuZ3RoKCBsVmVjdG9yICk7XFxuXFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgPSBwb2ludExpZ2h0LmNvbG9yO1xcblxcdFxcdGRpcmVjdExpZ2h0LmNvbG9yICo9IHB1bmN0dWFsTGlnaHRJbnRlbnNpdHlUb0lycmFkaWFuY2VGYWN0b3IoIGxpZ2h0RGlzdGFuY2UsIHBvaW50TGlnaHQuZGlzdGFuY2UsIHBvaW50TGlnaHQuZGVjYXkgKTtcXG5cXHRcXHRkaXJlY3RMaWdodC52aXNpYmxlID0gKCBkaXJlY3RMaWdodC5jb2xvciAhPSB2ZWMzKCAwLjAgKSApO1xcblxcdH1cXG4jZW5kaWZcXG4jaWYgTlVNX1NQT1RfTElHSFRTID4gMFxcblxcdHN0cnVjdCBTcG90TGlnaHQge1xcblxcdFxcdHZlYzMgcG9zaXRpb247XFxuXFx0XFx0dmVjMyBkaXJlY3Rpb247XFxuXFx0XFx0dmVjMyBjb2xvcjtcXG5cXHRcXHRmbG9hdCBkaXN0YW5jZTtcXG5cXHRcXHRmbG9hdCBkZWNheTtcXG5cXHRcXHRmbG9hdCBjb25lQ29zO1xcblxcdFxcdGZsb2F0IHBlbnVtYnJhQ29zO1xcblxcdFxcdGludCBzaGFkb3c7XFxuXFx0XFx0ZmxvYXQgc2hhZG93QmlhcztcXG5cXHRcXHRmbG9hdCBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0dmVjMiBzaGFkb3dNYXBTaXplO1xcblxcdH07XFxuXFx0dW5pZm9ybSBTcG90TGlnaHQgc3BvdExpZ2h0c1sgTlVNX1NQT1RfTElHSFRTIF07XFxuXFx0dm9pZCBnZXRTcG90RGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBjb25zdCBpbiBTcG90TGlnaHQgc3BvdExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBvdXQgSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodCAgKSB7XFxuXFx0XFx0dmVjMyBsVmVjdG9yID0gc3BvdExpZ2h0LnBvc2l0aW9uIC0gZ2VvbWV0cnkucG9zaXRpb247XFxuXFx0XFx0ZGlyZWN0TGlnaHQuZGlyZWN0aW9uID0gbm9ybWFsaXplKCBsVmVjdG9yICk7XFxuXFx0XFx0ZmxvYXQgbGlnaHREaXN0YW5jZSA9IGxlbmd0aCggbFZlY3RvciApO1xcblxcdFxcdGZsb2F0IGFuZ2xlQ29zID0gZG90KCBkaXJlY3RMaWdodC5kaXJlY3Rpb24sIHNwb3RMaWdodC5kaXJlY3Rpb24gKTtcXG5cXHRcXHRpZiAoIGFuZ2xlQ29zID4gc3BvdExpZ2h0LmNvbmVDb3MgKSB7XFxuXFx0XFx0XFx0ZmxvYXQgc3BvdEVmZmVjdCA9IHNtb290aHN0ZXAoIHNwb3RMaWdodC5jb25lQ29zLCBzcG90TGlnaHQucGVudW1icmFDb3MsIGFuZ2xlQ29zICk7XFxuXFx0XFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgPSBzcG90TGlnaHQuY29sb3I7XFxuXFx0XFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgKj0gc3BvdEVmZmVjdCAqIHB1bmN0dWFsTGlnaHRJbnRlbnNpdHlUb0lycmFkaWFuY2VGYWN0b3IoIGxpZ2h0RGlzdGFuY2UsIHNwb3RMaWdodC5kaXN0YW5jZSwgc3BvdExpZ2h0LmRlY2F5ICk7XFxuXFx0XFx0XFx0ZGlyZWN0TGlnaHQudmlzaWJsZSA9IHRydWU7XFxuXFx0XFx0fSBlbHNlIHtcXG5cXHRcXHRcXHRkaXJlY3RMaWdodC5jb2xvciA9IHZlYzMoIDAuMCApO1xcblxcdFxcdFxcdGRpcmVjdExpZ2h0LnZpc2libGUgPSBmYWxzZTtcXG5cXHRcXHR9XFxuXFx0fVxcbiNlbmRpZlxcbiNpZiBOVU1fUkVDVF9BUkVBX0xJR0hUUyA+IDBcXG5cXHRzdHJ1Y3QgUmVjdEFyZWFMaWdodCB7XFxuXFx0XFx0dmVjMyBjb2xvcjtcXG5cXHRcXHR2ZWMzIHBvc2l0aW9uO1xcblxcdFxcdHZlYzMgaGFsZldpZHRoO1xcblxcdFxcdHZlYzMgaGFsZkhlaWdodDtcXG5cXHR9O1xcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGx0Y01hdDtcXHR1bmlmb3JtIHNhbXBsZXIyRCBsdGNNYWc7XFxuXFx0dW5pZm9ybSBSZWN0QXJlYUxpZ2h0IHJlY3RBcmVhTGlnaHRzWyBOVU1fUkVDVF9BUkVBX0xJR0hUUyBdO1xcbiNlbmRpZlxcbiNpZiBOVU1fSEVNSV9MSUdIVFMgPiAwXFxuXFx0c3RydWN0IEhlbWlzcGhlcmVMaWdodCB7XFxuXFx0XFx0dmVjMyBkaXJlY3Rpb247XFxuXFx0XFx0dmVjMyBza3lDb2xvcjtcXG5cXHRcXHR2ZWMzIGdyb3VuZENvbG9yO1xcblxcdH07XFxuXFx0dW5pZm9ybSBIZW1pc3BoZXJlTGlnaHQgaGVtaXNwaGVyZUxpZ2h0c1sgTlVNX0hFTUlfTElHSFRTIF07XFxuXFx0dmVjMyBnZXRIZW1pc3BoZXJlTGlnaHRJcnJhZGlhbmNlKCBjb25zdCBpbiBIZW1pc3BoZXJlTGlnaHQgaGVtaUxpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5ICkge1xcblxcdFxcdGZsb2F0IGRvdE5MID0gZG90KCBnZW9tZXRyeS5ub3JtYWwsIGhlbWlMaWdodC5kaXJlY3Rpb24gKTtcXG5cXHRcXHRmbG9hdCBoZW1pRGlmZnVzZVdlaWdodCA9IDAuNSAqIGRvdE5MICsgMC41O1xcblxcdFxcdHZlYzMgaXJyYWRpYW5jZSA9IG1peCggaGVtaUxpZ2h0Lmdyb3VuZENvbG9yLCBoZW1pTGlnaHQuc2t5Q29sb3IsIGhlbWlEaWZmdXNlV2VpZ2h0ICk7XFxuXFx0XFx0I2lmbmRlZiBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTXFxuXFx0XFx0XFx0aXJyYWRpYW5jZSAqPSBQSTtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHRyZXR1cm4gaXJyYWRpYW5jZTtcXG5cXHR9XFxuI2VuZGlmXFxuI2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSAmJiBkZWZpbmVkKCBQSFlTSUNBTCApXFxuXFx0dmVjMyBnZXRMaWdodFByb2JlSW5kaXJlY3RJcnJhZGlhbmNlKCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBpbnQgbWF4TUlQTGV2ZWwgKSB7XFxuXFx0XFx0dmVjMyB3b3JsZE5vcm1hbCA9IGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIGdlb21ldHJ5Lm5vcm1hbCwgdmlld01hdHJpeCApO1xcblxcdFxcdCNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFXFxuXFx0XFx0XFx0dmVjMyBxdWVyeVZlYyA9IHZlYzMoIGZsaXBFbnZNYXAgKiB3b3JsZE5vcm1hbC54LCB3b3JsZE5vcm1hbC55eiApO1xcblxcdFxcdFxcdCNpZmRlZiBURVhUVVJFX0xPRF9FWFRcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmVMb2RFWFQoIGVudk1hcCwgcXVlcnlWZWMsIGZsb2F0KCBtYXhNSVBMZXZlbCApICk7XFxuXFx0XFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmUoIGVudk1hcCwgcXVlcnlWZWMsIGZsb2F0KCBtYXhNSVBMZXZlbCApICk7XFxuXFx0XFx0XFx0I2VuZGlmXFxuXFx0XFx0XFx0ZW52TWFwQ29sb3IucmdiID0gZW52TWFwVGV4ZWxUb0xpbmVhciggZW52TWFwQ29sb3IgKS5yZ2I7XFxuXFx0XFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfQ1VCRV9VViApXFxuXFx0XFx0XFx0dmVjMyBxdWVyeVZlYyA9IHZlYzMoIGZsaXBFbnZNYXAgKiB3b3JsZE5vcm1hbC54LCB3b3JsZE5vcm1hbC55eiApO1xcblxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlQ3ViZVVWKCBxdWVyeVZlYywgMS4wICk7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdmVjNCggMC4wICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0cmV0dXJuIFBJICogZW52TWFwQ29sb3IucmdiICogZW52TWFwSW50ZW5zaXR5O1xcblxcdH1cXG5cXHRmbG9hdCBnZXRTcGVjdWxhck1JUExldmVsKCBjb25zdCBpbiBmbG9hdCBibGlublNoaW5pbmVzc0V4cG9uZW50LCBjb25zdCBpbiBpbnQgbWF4TUlQTGV2ZWwgKSB7XFxuXFx0XFx0ZmxvYXQgbWF4TUlQTGV2ZWxTY2FsYXIgPSBmbG9hdCggbWF4TUlQTGV2ZWwgKTtcXG5cXHRcXHRmbG9hdCBkZXNpcmVkTUlQTGV2ZWwgPSBtYXhNSVBMZXZlbFNjYWxhciArIDAuNzkyNDggLSAwLjUgKiBsb2cyKCBwb3cyKCBibGlublNoaW5pbmVzc0V4cG9uZW50ICkgKyAxLjAgKTtcXG5cXHRcXHRyZXR1cm4gY2xhbXAoIGRlc2lyZWRNSVBMZXZlbCwgMC4wLCBtYXhNSVBMZXZlbFNjYWxhciApO1xcblxcdH1cXG5cXHR2ZWMzIGdldExpZ2h0UHJvYmVJbmRpcmVjdFJhZGlhbmNlKCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBmbG9hdCBibGlublNoaW5pbmVzc0V4cG9uZW50LCBjb25zdCBpbiBpbnQgbWF4TUlQTGV2ZWwgKSB7XFxuXFx0XFx0I2lmZGVmIEVOVk1BUF9NT0RFX1JFRkxFQ1RJT05cXG5cXHRcXHRcXHR2ZWMzIHJlZmxlY3RWZWMgPSByZWZsZWN0KCAtZ2VvbWV0cnkudmlld0RpciwgZ2VvbWV0cnkubm9ybWFsICk7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHR2ZWMzIHJlZmxlY3RWZWMgPSByZWZyYWN0KCAtZ2VvbWV0cnkudmlld0RpciwgZ2VvbWV0cnkubm9ybWFsLCByZWZyYWN0aW9uUmF0aW8gKTtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHRyZWZsZWN0VmVjID0gaW52ZXJzZVRyYW5zZm9ybURpcmVjdGlvbiggcmVmbGVjdFZlYywgdmlld01hdHJpeCApO1xcblxcdFxcdGZsb2F0IHNwZWN1bGFyTUlQTGV2ZWwgPSBnZXRTcGVjdWxhck1JUExldmVsKCBibGlublNoaW5pbmVzc0V4cG9uZW50LCBtYXhNSVBMZXZlbCApO1xcblxcdFxcdCNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFXFxuXFx0XFx0XFx0dmVjMyBxdWVyeVJlZmxlY3RWZWMgPSB2ZWMzKCBmbGlwRW52TWFwICogcmVmbGVjdFZlYy54LCByZWZsZWN0VmVjLnl6ICk7XFxuXFx0XFx0XFx0I2lmZGVmIFRFWFRVUkVfTE9EX0VYVFxcblxcdFxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlQ3ViZUxvZEVYVCggZW52TWFwLCBxdWVyeVJlZmxlY3RWZWMsIHNwZWN1bGFyTUlQTGV2ZWwgKTtcXG5cXHRcXHRcXHQjZWxzZVxcblxcdFxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlQ3ViZSggZW52TWFwLCBxdWVyeVJlZmxlY3RWZWMsIHNwZWN1bGFyTUlQTGV2ZWwgKTtcXG5cXHRcXHRcXHQjZW5kaWZcXG5cXHRcXHRcXHRlbnZNYXBDb2xvci5yZ2IgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCBlbnZNYXBDb2xvciApLnJnYjtcXG5cXHRcXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfVFlQRV9DVUJFX1VWIClcXG5cXHRcXHRcXHR2ZWMzIHF1ZXJ5UmVmbGVjdFZlYyA9IHZlYzMoIGZsaXBFbnZNYXAgKiByZWZsZWN0VmVjLngsIHJlZmxlY3RWZWMueXogKTtcXG5cXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmVVVihxdWVyeVJlZmxlY3RWZWMsIEJsaW5uRXhwb25lbnRUb0dHWFJvdWdobmVzcyhibGlublNoaW5pbmVzc0V4cG9uZW50KSk7XFxuXFx0XFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfRVFVSVJFQyApXFxuXFx0XFx0XFx0dmVjMiBzYW1wbGVVVjtcXG5cXHRcXHRcXHRzYW1wbGVVVi55ID0gYXNpbiggY2xhbXAoIHJlZmxlY3RWZWMueSwgLSAxLjAsIDEuMCApICkgKiBSRUNJUFJPQ0FMX1BJICsgMC41O1xcblxcdFxcdFxcdHNhbXBsZVVWLnggPSBhdGFuKCByZWZsZWN0VmVjLnosIHJlZmxlY3RWZWMueCApICogUkVDSVBST0NBTF9QSTIgKyAwLjU7XFxuXFx0XFx0XFx0I2lmZGVmIFRFWFRVUkVfTE9EX0VYVFxcblxcdFxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlMkRMb2RFWFQoIGVudk1hcCwgc2FtcGxlVVYsIHNwZWN1bGFyTUlQTGV2ZWwgKTtcXG5cXHRcXHRcXHQjZWxzZVxcblxcdFxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlMkQoIGVudk1hcCwgc2FtcGxlVVYsIHNwZWN1bGFyTUlQTGV2ZWwgKTtcXG5cXHRcXHRcXHQjZW5kaWZcXG5cXHRcXHRcXHRlbnZNYXBDb2xvci5yZ2IgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCBlbnZNYXBDb2xvciApLnJnYjtcXG5cXHRcXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfVFlQRV9TUEhFUkUgKVxcblxcdFxcdFxcdHZlYzMgcmVmbGVjdFZpZXcgPSBub3JtYWxpemUoICggdmlld01hdHJpeCAqIHZlYzQoIHJlZmxlY3RWZWMsIDAuMCApICkueHl6ICsgdmVjMyggMC4wLDAuMCwxLjAgKSApO1xcblxcdFxcdFxcdCNpZmRlZiBURVhUVVJFX0xPRF9FWFRcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZTJETG9kRVhUKCBlbnZNYXAsIHJlZmxlY3RWaWV3Lnh5ICogMC41ICsgMC41LCBzcGVjdWxhck1JUExldmVsICk7XFxuXFx0XFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZTJEKCBlbnZNYXAsIHJlZmxlY3RWaWV3Lnh5ICogMC41ICsgMC41LCBzcGVjdWxhck1JUExldmVsICk7XFxuXFx0XFx0XFx0I2VuZGlmXFxuXFx0XFx0XFx0ZW52TWFwQ29sb3IucmdiID0gZW52TWFwVGV4ZWxUb0xpbmVhciggZW52TWFwQ29sb3IgKS5yZ2I7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0cmV0dXJuIGVudk1hcENvbG9yLnJnYiAqIGVudk1hcEludGVuc2l0eTtcXG5cXHR9XFxuI2VuZGlmXFxuXCIsXG5saWdodHNfcGhvbmdfZnJhZ21lbnQ6XCJCbGlublBob25nTWF0ZXJpYWwgbWF0ZXJpYWw7XFxubWF0ZXJpYWwuZGlmZnVzZUNvbG9yID0gZGlmZnVzZUNvbG9yLnJnYjtcXG5tYXRlcmlhbC5zcGVjdWxhckNvbG9yID0gc3BlY3VsYXI7XFxubWF0ZXJpYWwuc3BlY3VsYXJTaGluaW5lc3MgPSBzaGluaW5lc3M7XFxubWF0ZXJpYWwuc3BlY3VsYXJTdHJlbmd0aCA9IHNwZWN1bGFyU3RyZW5ndGg7XFxuXCIsbGlnaHRzX3Bob25nX3BhcnNfZnJhZ21lbnQ6XCJ2YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuc3RydWN0IEJsaW5uUGhvbmdNYXRlcmlhbCB7XFxuXFx0dmVjM1xcdGRpZmZ1c2VDb2xvcjtcXG5cXHR2ZWMzXFx0c3BlY3VsYXJDb2xvcjtcXG5cXHRmbG9hdFxcdHNwZWN1bGFyU2hpbmluZXNzO1xcblxcdGZsb2F0XFx0c3BlY3VsYXJTdHJlbmd0aDtcXG59O1xcbnZvaWQgUkVfRGlyZWN0X0JsaW5uUGhvbmcoIGNvbnN0IGluIEluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIEJsaW5uUGhvbmdNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XFxuXFx0I2lmZGVmIFRPT05cXG5cXHRcXHR2ZWMzIGlycmFkaWFuY2UgPSBnZXRHcmFkaWVudElycmFkaWFuY2UoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICkgKiBkaXJlY3RMaWdodC5jb2xvcjtcXG5cXHQjZWxzZVxcblxcdFxcdGZsb2F0IGRvdE5MID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKSApO1xcblxcdFxcdHZlYzMgaXJyYWRpYW5jZSA9IGRvdE5MICogZGlyZWN0TGlnaHQuY29sb3I7XFxuXFx0I2VuZGlmXFxuXFx0I2lmbmRlZiBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTXFxuXFx0XFx0aXJyYWRpYW5jZSAqPSBQSTtcXG5cXHQjZW5kaWZcXG5cXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICs9IGlycmFkaWFuY2UgKiBCUkRGX0RpZmZ1c2VfTGFtYmVydCggbWF0ZXJpYWwuZGlmZnVzZUNvbG9yICk7XFxuXFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKz0gaXJyYWRpYW5jZSAqIEJSREZfU3BlY3VsYXJfQmxpbm5QaG9uZyggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbC5zcGVjdWxhckNvbG9yLCBtYXRlcmlhbC5zcGVjdWxhclNoaW5pbmVzcyApICogbWF0ZXJpYWwuc3BlY3VsYXJTdHJlbmd0aDtcXG59XFxudm9pZCBSRV9JbmRpcmVjdERpZmZ1c2VfQmxpbm5QaG9uZyggY29uc3QgaW4gdmVjMyBpcnJhZGlhbmNlLCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBCbGlublBob25nTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSBpcnJhZGlhbmNlICogQlJERl9EaWZmdXNlX0xhbWJlcnQoIG1hdGVyaWFsLmRpZmZ1c2VDb2xvciApO1xcbn1cXG4jZGVmaW5lIFJFX0RpcmVjdFxcdFxcdFxcdFxcdFJFX0RpcmVjdF9CbGlublBob25nXFxuI2RlZmluZSBSRV9JbmRpcmVjdERpZmZ1c2VcXHRcXHRSRV9JbmRpcmVjdERpZmZ1c2VfQmxpbm5QaG9uZ1xcbiNkZWZpbmUgTWF0ZXJpYWxfTGlnaHRQcm9iZUxPRCggbWF0ZXJpYWwgKVxcdCgwKVxcblwiLFxubGlnaHRzX3BoeXNpY2FsX2ZyYWdtZW50OlwiUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbDtcXG5tYXRlcmlhbC5kaWZmdXNlQ29sb3IgPSBkaWZmdXNlQ29sb3IucmdiICogKCAxLjAgLSBtZXRhbG5lc3NGYWN0b3IgKTtcXG5tYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyA9IGNsYW1wKCByb3VnaG5lc3NGYWN0b3IsIDAuMDQsIDEuMCApO1xcbiNpZmRlZiBTVEFOREFSRFxcblxcdG1hdGVyaWFsLnNwZWN1bGFyQ29sb3IgPSBtaXgoIHZlYzMoIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKSwgZGlmZnVzZUNvbG9yLnJnYiwgbWV0YWxuZXNzRmFjdG9yICk7XFxuI2Vsc2VcXG5cXHRtYXRlcmlhbC5zcGVjdWxhckNvbG9yID0gbWl4KCB2ZWMzKCBNQVhJTVVNX1NQRUNVTEFSX0NPRUZGSUNJRU5UICogcG93MiggcmVmbGVjdGl2aXR5ICkgKSwgZGlmZnVzZUNvbG9yLnJnYiwgbWV0YWxuZXNzRmFjdG9yICk7XFxuXFx0bWF0ZXJpYWwuY2xlYXJDb2F0ID0gc2F0dXJhdGUoIGNsZWFyQ29hdCApO1xcdG1hdGVyaWFsLmNsZWFyQ29hdFJvdWdobmVzcyA9IGNsYW1wKCBjbGVhckNvYXRSb3VnaG5lc3MsIDAuMDQsIDEuMCApO1xcbiNlbmRpZlxcblwiLFxubGlnaHRzX3BoeXNpY2FsX3BhcnNfZnJhZ21lbnQ6XCJzdHJ1Y3QgUGh5c2ljYWxNYXRlcmlhbCB7XFxuXFx0dmVjM1xcdGRpZmZ1c2VDb2xvcjtcXG5cXHRmbG9hdFxcdHNwZWN1bGFyUm91Z2huZXNzO1xcblxcdHZlYzNcXHRzcGVjdWxhckNvbG9yO1xcblxcdCNpZm5kZWYgU1RBTkRBUkRcXG5cXHRcXHRmbG9hdCBjbGVhckNvYXQ7XFxuXFx0XFx0ZmxvYXQgY2xlYXJDb2F0Um91Z2huZXNzO1xcblxcdCNlbmRpZlxcbn07XFxuI2RlZmluZSBNQVhJTVVNX1NQRUNVTEFSX0NPRUZGSUNJRU5UIDAuMTZcXG4jZGVmaW5lIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgMC4wNFxcbmZsb2F0IGNsZWFyQ29hdERIUkFwcHJveCggY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzLCBjb25zdCBpbiBmbG9hdCBkb3ROTCApIHtcXG5cXHRyZXR1cm4gREVGQVVMVF9TUEVDVUxBUl9DT0VGRklDSUVOVCArICggMS4wIC0gREVGQVVMVF9TUEVDVUxBUl9DT0VGRklDSUVOVCApICogKCBwb3coIDEuMCAtIGRvdE5MLCA1LjAgKSAqIHBvdyggMS4wIC0gcm91Z2huZXNzLCAyLjAgKSApO1xcbn1cXG4jaWYgTlVNX1JFQ1RfQVJFQV9MSUdIVFMgPiAwXFxuXFx0dm9pZCBSRV9EaXJlY3RfUmVjdEFyZWFfUGh5c2ljYWwoIGNvbnN0IGluIFJlY3RBcmVhTGlnaHQgcmVjdEFyZWFMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XFxuXFx0XFx0dmVjMyBub3JtYWwgPSBnZW9tZXRyeS5ub3JtYWw7XFxuXFx0XFx0dmVjMyB2aWV3RGlyID0gZ2VvbWV0cnkudmlld0RpcjtcXG5cXHRcXHR2ZWMzIHBvc2l0aW9uID0gZ2VvbWV0cnkucG9zaXRpb247XFxuXFx0XFx0dmVjMyBsaWdodFBvcyA9IHJlY3RBcmVhTGlnaHQucG9zaXRpb247XFxuXFx0XFx0dmVjMyBoYWxmV2lkdGggPSByZWN0QXJlYUxpZ2h0LmhhbGZXaWR0aDtcXG5cXHRcXHR2ZWMzIGhhbGZIZWlnaHQgPSByZWN0QXJlYUxpZ2h0LmhhbGZIZWlnaHQ7XFxuXFx0XFx0dmVjMyBsaWdodENvbG9yID0gcmVjdEFyZWFMaWdodC5jb2xvcjtcXG5cXHRcXHRmbG9hdCByb3VnaG5lc3MgPSBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcztcXG5cXHRcXHR2ZWMzIHJlY3RDb29yZHNbIDQgXTtcXG5cXHRcXHRyZWN0Q29vcmRzWyAwIF0gPSBsaWdodFBvcyAtIGhhbGZXaWR0aCAtIGhhbGZIZWlnaHQ7XFx0XFx0cmVjdENvb3Jkc1sgMSBdID0gbGlnaHRQb3MgKyBoYWxmV2lkdGggLSBoYWxmSGVpZ2h0O1xcblxcdFxcdHJlY3RDb29yZHNbIDIgXSA9IGxpZ2h0UG9zICsgaGFsZldpZHRoICsgaGFsZkhlaWdodDtcXG5cXHRcXHRyZWN0Q29vcmRzWyAzIF0gPSBsaWdodFBvcyAtIGhhbGZXaWR0aCArIGhhbGZIZWlnaHQ7XFxuXFx0XFx0dmVjMiB1diA9IExUQ19Vdiggbm9ybWFsLCB2aWV3RGlyLCByb3VnaG5lc3MgKTtcXG5cXHRcXHRmbG9hdCBub3JtID0gdGV4dHVyZTJEKCBsdGNNYWcsIHV2ICkuYTtcXG5cXHRcXHR2ZWM0IHQgPSB0ZXh0dXJlMkQoIGx0Y01hdCwgdXYgKTtcXG5cXHRcXHRtYXQzIG1JbnYgPSBtYXQzKFxcblxcdFxcdFxcdHZlYzMoICAgMSwgICAwLCB0LnkgKSxcXG5cXHRcXHRcXHR2ZWMzKCAgIDAsIHQueiwgICAwICksXFxuXFx0XFx0XFx0dmVjMyggdC53LCAgIDAsIHQueCApXFxuXFx0XFx0KTtcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciArPSBsaWdodENvbG9yICogbWF0ZXJpYWwuc3BlY3VsYXJDb2xvciAqIG5vcm0gKiBMVENfRXZhbHVhdGUoIG5vcm1hbCwgdmlld0RpciwgcG9zaXRpb24sIG1JbnYsIHJlY3RDb29yZHMgKTtcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICs9IGxpZ2h0Q29sb3IgKiBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKiBMVENfRXZhbHVhdGUoIG5vcm1hbCwgdmlld0RpciwgcG9zaXRpb24sIG1hdDMoIDEgKSwgcmVjdENvb3JkcyApO1xcblxcdH1cXG4jZW5kaWZcXG52b2lkIFJFX0RpcmVjdF9QaHlzaWNhbCggY29uc3QgaW4gSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XFxuXFx0ZmxvYXQgZG90TkwgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiApICk7XFxuXFx0dmVjMyBpcnJhZGlhbmNlID0gZG90TkwgKiBkaXJlY3RMaWdodC5jb2xvcjtcXG5cXHQjaWZuZGVmIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcXG5cXHRcXHRpcnJhZGlhbmNlICo9IFBJO1xcblxcdCNlbmRpZlxcblxcdCNpZm5kZWYgU1RBTkRBUkRcXG5cXHRcXHRmbG9hdCBjbGVhckNvYXRESFIgPSBtYXRlcmlhbC5jbGVhckNvYXQgKiBjbGVhckNvYXRESFJBcHByb3goIG1hdGVyaWFsLmNsZWFyQ29hdFJvdWdobmVzcywgZG90TkwgKTtcXG5cXHQjZWxzZVxcblxcdFxcdGZsb2F0IGNsZWFyQ29hdERIUiA9IDAuMDtcXG5cXHQjZW5kaWZcXG5cXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciArPSAoIDEuMCAtIGNsZWFyQ29hdERIUiApICogaXJyYWRpYW5jZSAqIEJSREZfU3BlY3VsYXJfR0dYKCBkaXJlY3RMaWdodCwgZ2VvbWV0cnksIG1hdGVyaWFsLnNwZWN1bGFyQ29sb3IsIG1hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzICk7XFxuXFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArPSAoIDEuMCAtIGNsZWFyQ29hdERIUiApICogaXJyYWRpYW5jZSAqIEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKTtcXG5cXHQjaWZuZGVmIFNUQU5EQVJEXFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKz0gaXJyYWRpYW5jZSAqIG1hdGVyaWFsLmNsZWFyQ29hdCAqIEJSREZfU3BlY3VsYXJfR0dYKCBkaXJlY3RMaWdodCwgZ2VvbWV0cnksIHZlYzMoIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKSwgbWF0ZXJpYWwuY2xlYXJDb2F0Um91Z2huZXNzICk7XFxuXFx0I2VuZGlmXFxufVxcbnZvaWQgUkVfSW5kaXJlY3REaWZmdXNlX1BoeXNpY2FsKCBjb25zdCBpbiB2ZWMzIGlycmFkaWFuY2UsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIFBoeXNpY2FsTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSBpcnJhZGlhbmNlICogQlJERl9EaWZmdXNlX0xhbWJlcnQoIG1hdGVyaWFsLmRpZmZ1c2VDb2xvciApO1xcbn1cXG52b2lkIFJFX0luZGlyZWN0U3BlY3VsYXJfUGh5c2ljYWwoIGNvbnN0IGluIHZlYzMgcmFkaWFuY2UsIGNvbnN0IGluIHZlYzMgY2xlYXJDb2F0UmFkaWFuY2UsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIFBoeXNpY2FsTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xcblxcdCNpZm5kZWYgU1RBTkRBUkRcXG5cXHRcXHRmbG9hdCBkb3ROViA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZ2VvbWV0cnkudmlld0RpciApICk7XFxuXFx0XFx0ZmxvYXQgZG90TkwgPSBkb3ROVjtcXG5cXHRcXHRmbG9hdCBjbGVhckNvYXRESFIgPSBtYXRlcmlhbC5jbGVhckNvYXQgKiBjbGVhckNvYXRESFJBcHByb3goIG1hdGVyaWFsLmNsZWFyQ29hdFJvdWdobmVzcywgZG90TkwgKTtcXG5cXHQjZWxzZVxcblxcdFxcdGZsb2F0IGNsZWFyQ29hdERIUiA9IDAuMDtcXG5cXHQjZW5kaWZcXG5cXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyICs9ICggMS4wIC0gY2xlYXJDb2F0REhSICkgKiByYWRpYW5jZSAqIEJSREZfU3BlY3VsYXJfR0dYX0Vudmlyb25tZW50KCBnZW9tZXRyeSwgbWF0ZXJpYWwuc3BlY3VsYXJDb2xvciwgbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MgKTtcXG5cXHQjaWZuZGVmIFNUQU5EQVJEXFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3RTcGVjdWxhciArPSBjbGVhckNvYXRSYWRpYW5jZSAqIG1hdGVyaWFsLmNsZWFyQ29hdCAqIEJSREZfU3BlY3VsYXJfR0dYX0Vudmlyb25tZW50KCBnZW9tZXRyeSwgdmVjMyggREVGQVVMVF9TUEVDVUxBUl9DT0VGRklDSUVOVCApLCBtYXRlcmlhbC5jbGVhckNvYXRSb3VnaG5lc3MgKTtcXG5cXHQjZW5kaWZcXG59XFxuI2RlZmluZSBSRV9EaXJlY3RcXHRcXHRcXHRcXHRSRV9EaXJlY3RfUGh5c2ljYWxcXG4jZGVmaW5lIFJFX0RpcmVjdF9SZWN0QXJlYVxcdFxcdFJFX0RpcmVjdF9SZWN0QXJlYV9QaHlzaWNhbFxcbiNkZWZpbmUgUkVfSW5kaXJlY3REaWZmdXNlXFx0XFx0UkVfSW5kaXJlY3REaWZmdXNlX1BoeXNpY2FsXFxuI2RlZmluZSBSRV9JbmRpcmVjdFNwZWN1bGFyXFx0XFx0UkVfSW5kaXJlY3RTcGVjdWxhcl9QaHlzaWNhbFxcbiNkZWZpbmUgTWF0ZXJpYWxfQmxpbm5TaGluaW5lc3NFeHBvbmVudCggbWF0ZXJpYWwgKSAgIEdHWFJvdWdobmVzc1RvQmxpbm5FeHBvbmVudCggbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MgKVxcbiNkZWZpbmUgTWF0ZXJpYWxfQ2xlYXJDb2F0X0JsaW5uU2hpbmluZXNzRXhwb25lbnQoIG1hdGVyaWFsICkgICBHR1hSb3VnaG5lc3NUb0JsaW5uRXhwb25lbnQoIG1hdGVyaWFsLmNsZWFyQ29hdFJvdWdobmVzcyApXFxuZmxvYXQgY29tcHV0ZVNwZWN1bGFyT2NjbHVzaW9uKCBjb25zdCBpbiBmbG9hdCBkb3ROViwgY29uc3QgaW4gZmxvYXQgYW1iaWVudE9jY2x1c2lvbiwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzICkge1xcblxcdHJldHVybiBzYXR1cmF0ZSggcG93KCBkb3ROViArIGFtYmllbnRPY2NsdXNpb24sIGV4cDIoIC0gMTYuMCAqIHJvdWdobmVzcyAtIDEuMCApICkgLSAxLjAgKyBhbWJpZW50T2NjbHVzaW9uICk7XFxufVxcblwiLFxubGlnaHRzX3RlbXBsYXRlOlwiXFxuR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeTtcXG5nZW9tZXRyeS5wb3NpdGlvbiA9IC0gdlZpZXdQb3NpdGlvbjtcXG5nZW9tZXRyeS5ub3JtYWwgPSBub3JtYWw7XFxuZ2VvbWV0cnkudmlld0RpciA9IG5vcm1hbGl6ZSggdlZpZXdQb3NpdGlvbiApO1xcbkluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQ7XFxuI2lmICggTlVNX1BPSU5UX0xJR0hUUyA+IDAgKSAmJiBkZWZpbmVkKCBSRV9EaXJlY3QgKVxcblxcdFBvaW50TGlnaHQgcG9pbnRMaWdodDtcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fUE9JTlRfTElHSFRTOyBpICsrICkge1xcblxcdFxcdHBvaW50TGlnaHQgPSBwb2ludExpZ2h0c1sgaSBdO1xcblxcdFxcdGdldFBvaW50RGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBwb2ludExpZ2h0LCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cXHRcXHQjaWZkZWYgVVNFX1NIQURPV01BUFxcblxcdFxcdGRpcmVjdExpZ2h0LmNvbG9yICo9IGFsbCggYnZlYzIoIHBvaW50TGlnaHQuc2hhZG93LCBkaXJlY3RMaWdodC52aXNpYmxlICkgKSA/IGdldFBvaW50U2hhZG93KCBwb2ludFNoYWRvd01hcFsgaSBdLCBwb2ludExpZ2h0LnNoYWRvd01hcFNpemUsIHBvaW50TGlnaHQuc2hhZG93QmlhcywgcG9pbnRMaWdodC5zaGFkb3dSYWRpdXMsIHZQb2ludFNoYWRvd0Nvb3JkWyBpIF0sIHBvaW50TGlnaHQuc2hhZG93Q2FtZXJhTmVhciwgcG9pbnRMaWdodC5zaGFkb3dDYW1lcmFGYXIgKSA6IDEuMDtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHRSRV9EaXJlY3QoIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwsIHJlZmxlY3RlZExpZ2h0ICk7XFxuXFx0fVxcbiNlbmRpZlxcbiNpZiAoIE5VTV9TUE9UX0xJR0hUUyA+IDAgKSAmJiBkZWZpbmVkKCBSRV9EaXJlY3QgKVxcblxcdFNwb3RMaWdodCBzcG90TGlnaHQ7XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1NQT1RfTElHSFRTOyBpICsrICkge1xcblxcdFxcdHNwb3RMaWdodCA9IHNwb3RMaWdodHNbIGkgXTtcXG5cXHRcXHRnZXRTcG90RGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBzcG90TGlnaHQsIGdlb21ldHJ5LCBkaXJlY3RMaWdodCApO1xcblxcdFxcdCNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgKj0gYWxsKCBidmVjMiggc3BvdExpZ2h0LnNoYWRvdywgZGlyZWN0TGlnaHQudmlzaWJsZSApICkgPyBnZXRTaGFkb3coIHNwb3RTaGFkb3dNYXBbIGkgXSwgc3BvdExpZ2h0LnNoYWRvd01hcFNpemUsIHNwb3RMaWdodC5zaGFkb3dCaWFzLCBzcG90TGlnaHQuc2hhZG93UmFkaXVzLCB2U3BvdFNoYWRvd0Nvb3JkWyBpIF0gKSA6IDEuMDtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHRSRV9EaXJlY3QoIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwsIHJlZmxlY3RlZExpZ2h0ICk7XFxuXFx0fVxcbiNlbmRpZlxcbiNpZiAoIE5VTV9ESVJfTElHSFRTID4gMCApICYmIGRlZmluZWQoIFJFX0RpcmVjdCApXFxuXFx0RGlyZWN0aW9uYWxMaWdodCBkaXJlY3Rpb25hbExpZ2h0O1xcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9ESVJfTElHSFRTOyBpICsrICkge1xcblxcdFxcdGRpcmVjdGlvbmFsTGlnaHQgPSBkaXJlY3Rpb25hbExpZ2h0c1sgaSBdO1xcblxcdFxcdGdldERpcmVjdGlvbmFsRGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBkaXJlY3Rpb25hbExpZ2h0LCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cXHRcXHQjaWZkZWYgVVNFX1NIQURPV01BUFxcblxcdFxcdGRpcmVjdExpZ2h0LmNvbG9yICo9IGFsbCggYnZlYzIoIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93LCBkaXJlY3RMaWdodC52aXNpYmxlICkgKSA/IGdldFNoYWRvdyggZGlyZWN0aW9uYWxTaGFkb3dNYXBbIGkgXSwgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3dNYXBTaXplLCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvd0JpYXMsIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93UmFkaXVzLCB2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgaSBdICkgOiAxLjA7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0UkVfRGlyZWN0KCBkaXJlY3RMaWdodCwgZ2VvbWV0cnksIG1hdGVyaWFsLCByZWZsZWN0ZWRMaWdodCApO1xcblxcdH1cXG4jZW5kaWZcXG4jaWYgKCBOVU1fUkVDVF9BUkVBX0xJR0hUUyA+IDAgKSAmJiBkZWZpbmVkKCBSRV9EaXJlY3RfUmVjdEFyZWEgKVxcblxcdFJlY3RBcmVhTGlnaHQgcmVjdEFyZWFMaWdodDtcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fUkVDVF9BUkVBX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRyZWN0QXJlYUxpZ2h0ID0gcmVjdEFyZWFMaWdodHNbIGkgXTtcXG5cXHRcXHRSRV9EaXJlY3RfUmVjdEFyZWEoIHJlY3RBcmVhTGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG5cXHR9XFxuI2VuZGlmXFxuI2lmIGRlZmluZWQoIFJFX0luZGlyZWN0RGlmZnVzZSApXFxuXFx0dmVjMyBpcnJhZGlhbmNlID0gZ2V0QW1iaWVudExpZ2h0SXJyYWRpYW5jZSggYW1iaWVudExpZ2h0Q29sb3IgKTtcXG5cXHQjaWZkZWYgVVNFX0xJR0hUTUFQXFxuXFx0XFx0dmVjMyBsaWdodE1hcElycmFkaWFuY2UgPSB0ZXh0dXJlMkQoIGxpZ2h0TWFwLCB2VXYyICkueHl6ICogbGlnaHRNYXBJbnRlbnNpdHk7XFxuXFx0XFx0I2lmbmRlZiBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTXFxuXFx0XFx0XFx0bGlnaHRNYXBJcnJhZGlhbmNlICo9IFBJO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdGlycmFkaWFuY2UgKz0gbGlnaHRNYXBJcnJhZGlhbmNlO1xcblxcdCNlbmRpZlxcblxcdCNpZiAoIE5VTV9IRU1JX0xJR0hUUyA+IDAgKVxcblxcdFxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9IRU1JX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRcXHRpcnJhZGlhbmNlICs9IGdldEhlbWlzcGhlcmVMaWdodElycmFkaWFuY2UoIGhlbWlzcGhlcmVMaWdodHNbIGkgXSwgZ2VvbWV0cnkgKTtcXG5cXHRcXHR9XFxuXFx0I2VuZGlmXFxuXFx0I2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSAmJiBkZWZpbmVkKCBQSFlTSUNBTCApICYmIGRlZmluZWQoIEVOVk1BUF9UWVBFX0NVQkVfVVYgKVxcblxcdFxcdGlycmFkaWFuY2UgKz0gZ2V0TGlnaHRQcm9iZUluZGlyZWN0SXJyYWRpYW5jZSggZ2VvbWV0cnksIDggKTtcXG5cXHQjZW5kaWZcXG5cXHRSRV9JbmRpcmVjdERpZmZ1c2UoIGlycmFkaWFuY2UsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG4jZW5kaWZcXG4jaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApICYmIGRlZmluZWQoIFJFX0luZGlyZWN0U3BlY3VsYXIgKVxcblxcdHZlYzMgcmFkaWFuY2UgPSBnZXRMaWdodFByb2JlSW5kaXJlY3RSYWRpYW5jZSggZ2VvbWV0cnksIE1hdGVyaWFsX0JsaW5uU2hpbmluZXNzRXhwb25lbnQoIG1hdGVyaWFsICksIDggKTtcXG5cXHQjaWZuZGVmIFNUQU5EQVJEXFxuXFx0XFx0dmVjMyBjbGVhckNvYXRSYWRpYW5jZSA9IGdldExpZ2h0UHJvYmVJbmRpcmVjdFJhZGlhbmNlKCBnZW9tZXRyeSwgTWF0ZXJpYWxfQ2xlYXJDb2F0X0JsaW5uU2hpbmluZXNzRXhwb25lbnQoIG1hdGVyaWFsICksIDggKTtcXG5cXHQjZWxzZVxcblxcdFxcdHZlYzMgY2xlYXJDb2F0UmFkaWFuY2UgPSB2ZWMzKCAwLjAgKTtcXG5cXHQjZW5kaWZcXG5cXHRSRV9JbmRpcmVjdFNwZWN1bGFyKCByYWRpYW5jZSwgY2xlYXJDb2F0UmFkaWFuY2UsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG4jZW5kaWZcXG5cIixcbmxvZ2RlcHRoYnVmX2ZyYWdtZW50OlwiI2lmIGRlZmluZWQoIFVTRV9MT0dERVBUSEJVRiApICYmIGRlZmluZWQoIFVTRV9MT0dERVBUSEJVRl9FWFQgKVxcblxcdGdsX0ZyYWdEZXB0aEVYVCA9IGxvZzIoIHZGcmFnRGVwdGggKSAqIGxvZ0RlcHRoQnVmRkMgKiAwLjU7XFxuI2VuZGlmXCIsbG9nZGVwdGhidWZfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfTE9HREVQVEhCVUZcXG5cXHR1bmlmb3JtIGZsb2F0IGxvZ0RlcHRoQnVmRkM7XFxuXFx0I2lmZGVmIFVTRV9MT0dERVBUSEJVRl9FWFRcXG5cXHRcXHR2YXJ5aW5nIGZsb2F0IHZGcmFnRGVwdGg7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCIsbG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg6XCIjaWZkZWYgVVNFX0xPR0RFUFRIQlVGXFxuXFx0I2lmZGVmIFVTRV9MT0dERVBUSEJVRl9FWFRcXG5cXHRcXHR2YXJ5aW5nIGZsb2F0IHZGcmFnRGVwdGg7XFxuXFx0I2VuZGlmXFxuXFx0dW5pZm9ybSBmbG9hdCBsb2dEZXB0aEJ1ZkZDO1xcbiNlbmRpZlwiLGxvZ2RlcHRoYnVmX3ZlcnRleDpcIiNpZmRlZiBVU0VfTE9HREVQVEhCVUZcXG5cXHQjaWZkZWYgVVNFX0xPR0RFUFRIQlVGX0VYVFxcblxcdFxcdHZGcmFnRGVwdGggPSAxLjAgKyBnbF9Qb3NpdGlvbi53O1xcblxcdCNlbHNlXFxuXFx0XFx0Z2xfUG9zaXRpb24ueiA9IGxvZzIoIG1heCggRVBTSUxPTiwgZ2xfUG9zaXRpb24udyArIDEuMCApICkgKiBsb2dEZXB0aEJ1ZkZDIC0gMS4wO1xcblxcdFxcdGdsX1Bvc2l0aW9uLnogKj0gZ2xfUG9zaXRpb24udztcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIixcbm1hcF9mcmFnbWVudDpcIiNpZmRlZiBVU0VfTUFQXFxuXFx0dmVjNCB0ZXhlbENvbG9yID0gdGV4dHVyZTJEKCBtYXAsIHZVdiApO1xcblxcdHRleGVsQ29sb3IgPSBtYXBUZXhlbFRvTGluZWFyKCB0ZXhlbENvbG9yICk7XFxuXFx0ZGlmZnVzZUNvbG9yICo9IHRleGVsQ29sb3I7XFxuI2VuZGlmXFxuXCIsbWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX01BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIG1hcDtcXG4jZW5kaWZcXG5cIixtYXBfcGFydGljbGVfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX01BUFxcblxcdHZlYzIgdXYgPSAoIHV2VHJhbnNmb3JtICogdmVjMyggZ2xfUG9pbnRDb29yZC54LCAxLjAgLSBnbF9Qb2ludENvb3JkLnksIDEgKSApLnh5O1xcblxcdHZlYzQgbWFwVGV4ZWwgPSB0ZXh0dXJlMkQoIG1hcCwgdXYgKTtcXG5cXHRkaWZmdXNlQ29sb3IgKj0gbWFwVGV4ZWxUb0xpbmVhciggbWFwVGV4ZWwgKTtcXG4jZW5kaWZcXG5cIixtYXBfcGFydGljbGVfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfTUFQXFxuXFx0dW5pZm9ybSBtYXQzIHV2VHJhbnNmb3JtO1xcblxcdHVuaWZvcm0gc2FtcGxlcjJEIG1hcDtcXG4jZW5kaWZcXG5cIixcbm1ldGFsbmVzc21hcF9mcmFnbWVudDpcImZsb2F0IG1ldGFsbmVzc0ZhY3RvciA9IG1ldGFsbmVzcztcXG4jaWZkZWYgVVNFX01FVEFMTkVTU01BUFxcblxcdHZlYzQgdGV4ZWxNZXRhbG5lc3MgPSB0ZXh0dXJlMkQoIG1ldGFsbmVzc01hcCwgdlV2ICk7XFxuXFx0bWV0YWxuZXNzRmFjdG9yICo9IHRleGVsTWV0YWxuZXNzLmI7XFxuI2VuZGlmXFxuXCIsbWV0YWxuZXNzbWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX01FVEFMTkVTU01BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIG1ldGFsbmVzc01hcDtcXG4jZW5kaWZcIixtb3JwaG5vcm1hbF92ZXJ0ZXg6XCIjaWZkZWYgVVNFX01PUlBITk9STUFMU1xcblxcdG9iamVjdE5vcm1hbCArPSAoIG1vcnBoTm9ybWFsMCAtIG5vcm1hbCApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAwIF07XFxuXFx0b2JqZWN0Tm9ybWFsICs9ICggbW9ycGhOb3JtYWwxIC0gbm9ybWFsICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDEgXTtcXG5cXHRvYmplY3ROb3JtYWwgKz0gKCBtb3JwaE5vcm1hbDIgLSBub3JtYWwgKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMiBdO1xcblxcdG9iamVjdE5vcm1hbCArPSAoIG1vcnBoTm9ybWFsMyAtIG5vcm1hbCApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAzIF07XFxuI2VuZGlmXFxuXCIsXG5tb3JwaHRhcmdldF9wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfTU9SUEhUQVJHRVRTXFxuXFx0I2lmbmRlZiBVU0VfTU9SUEhOT1JNQUxTXFxuXFx0dW5pZm9ybSBmbG9hdCBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDggXTtcXG5cXHQjZWxzZVxcblxcdHVuaWZvcm0gZmxvYXQgbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA0IF07XFxuXFx0I2VuZGlmXFxuI2VuZGlmXCIsbW9ycGh0YXJnZXRfdmVydGV4OlwiI2lmZGVmIFVTRV9NT1JQSFRBUkdFVFNcXG5cXHR0cmFuc2Zvcm1lZCArPSAoIG1vcnBoVGFyZ2V0MCAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDAgXTtcXG5cXHR0cmFuc2Zvcm1lZCArPSAoIG1vcnBoVGFyZ2V0MSAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDEgXTtcXG5cXHR0cmFuc2Zvcm1lZCArPSAoIG1vcnBoVGFyZ2V0MiAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDIgXTtcXG5cXHR0cmFuc2Zvcm1lZCArPSAoIG1vcnBoVGFyZ2V0MyAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDMgXTtcXG5cXHQjaWZuZGVmIFVTRV9NT1JQSE5PUk1BTFNcXG5cXHR0cmFuc2Zvcm1lZCArPSAoIG1vcnBoVGFyZ2V0NCAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDQgXTtcXG5cXHR0cmFuc2Zvcm1lZCArPSAoIG1vcnBoVGFyZ2V0NSAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDUgXTtcXG5cXHR0cmFuc2Zvcm1lZCArPSAoIG1vcnBoVGFyZ2V0NiAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDYgXTtcXG5cXHR0cmFuc2Zvcm1lZCArPSAoIG1vcnBoVGFyZ2V0NyAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDcgXTtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIixcbm5vcm1hbF9mcmFnbWVudDpcIiNpZmRlZiBGTEFUX1NIQURFRFxcblxcdHZlYzMgZmR4ID0gdmVjMyggZEZkeCggdlZpZXdQb3NpdGlvbi54ICksIGRGZHgoIHZWaWV3UG9zaXRpb24ueSApLCBkRmR4KCB2Vmlld1Bvc2l0aW9uLnogKSApO1xcblxcdHZlYzMgZmR5ID0gdmVjMyggZEZkeSggdlZpZXdQb3NpdGlvbi54ICksIGRGZHkoIHZWaWV3UG9zaXRpb24ueSApLCBkRmR5KCB2Vmlld1Bvc2l0aW9uLnogKSApO1xcblxcdHZlYzMgbm9ybWFsID0gbm9ybWFsaXplKCBjcm9zcyggZmR4LCBmZHkgKSApO1xcbiNlbHNlXFxuXFx0dmVjMyBub3JtYWwgPSBub3JtYWxpemUoIHZOb3JtYWwgKTtcXG5cXHQjaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0XFx0bm9ybWFsID0gbm9ybWFsICogKCBmbG9hdCggZ2xfRnJvbnRGYWNpbmcgKSAqIDIuMCAtIDEuMCApO1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcbiNpZmRlZiBVU0VfTk9STUFMTUFQXFxuXFx0bm9ybWFsID0gcGVydHVyYk5vcm1hbDJBcmIoIC12Vmlld1Bvc2l0aW9uLCBub3JtYWwgKTtcXG4jZWxpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApXFxuXFx0bm9ybWFsID0gcGVydHVyYk5vcm1hbEFyYiggLXZWaWV3UG9zaXRpb24sIG5vcm1hbCwgZEhkeHlfZndkKCkgKTtcXG4jZW5kaWZcXG5cIixcbm5vcm1hbG1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9OT1JNQUxNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBub3JtYWxNYXA7XFxuXFx0dW5pZm9ybSB2ZWMyIG5vcm1hbFNjYWxlO1xcblxcdHZlYzMgcGVydHVyYk5vcm1hbDJBcmIoIHZlYzMgZXllX3BvcywgdmVjMyBzdXJmX25vcm0gKSB7XFxuXFx0XFx0dmVjMyBxMCA9IHZlYzMoIGRGZHgoIGV5ZV9wb3MueCApLCBkRmR4KCBleWVfcG9zLnkgKSwgZEZkeCggZXllX3Bvcy56ICkgKTtcXG5cXHRcXHR2ZWMzIHExID0gdmVjMyggZEZkeSggZXllX3Bvcy54ICksIGRGZHkoIGV5ZV9wb3MueSApLCBkRmR5KCBleWVfcG9zLnogKSApO1xcblxcdFxcdHZlYzIgc3QwID0gZEZkeCggdlV2LnN0ICk7XFxuXFx0XFx0dmVjMiBzdDEgPSBkRmR5KCB2VXYuc3QgKTtcXG5cXHRcXHR2ZWMzIFMgPSBub3JtYWxpemUoIHEwICogc3QxLnQgLSBxMSAqIHN0MC50ICk7XFxuXFx0XFx0dmVjMyBUID0gbm9ybWFsaXplKCAtcTAgKiBzdDEucyArIHExICogc3QwLnMgKTtcXG5cXHRcXHR2ZWMzIE4gPSBub3JtYWxpemUoIHN1cmZfbm9ybSApO1xcblxcdFxcdHZlYzMgbWFwTiA9IHRleHR1cmUyRCggbm9ybWFsTWFwLCB2VXYgKS54eXogKiAyLjAgLSAxLjA7XFxuXFx0XFx0bWFwTi54eSA9IG5vcm1hbFNjYWxlICogbWFwTi54eTtcXG5cXHRcXHRtYXQzIHRzbiA9IG1hdDMoIFMsIFQsIE4gKTtcXG5cXHRcXHRyZXR1cm4gbm9ybWFsaXplKCB0c24gKiBtYXBOICk7XFxuXFx0fVxcbiNlbmRpZlxcblwiLFxucGFja2luZzpcInZlYzMgcGFja05vcm1hbFRvUkdCKCBjb25zdCBpbiB2ZWMzIG5vcm1hbCApIHtcXG5cXHRyZXR1cm4gbm9ybWFsaXplKCBub3JtYWwgKSAqIDAuNSArIDAuNTtcXG59XFxudmVjMyB1bnBhY2tSR0JUb05vcm1hbCggY29uc3QgaW4gdmVjMyByZ2IgKSB7XFxuXFx0cmV0dXJuIDIuMCAqIHJnYi54eXogLSAxLjA7XFxufVxcbmNvbnN0IGZsb2F0IFBhY2tVcHNjYWxlID0gMjU2LiAvIDI1NS47Y29uc3QgZmxvYXQgVW5wYWNrRG93bnNjYWxlID0gMjU1LiAvIDI1Ni47XFxuY29uc3QgdmVjMyBQYWNrRmFjdG9ycyA9IHZlYzMoIDI1Ni4gKiAyNTYuICogMjU2LiwgMjU2LiAqIDI1Ni4sICAyNTYuICk7XFxuY29uc3QgdmVjNCBVbnBhY2tGYWN0b3JzID0gVW5wYWNrRG93bnNjYWxlIC8gdmVjNCggUGFja0ZhY3RvcnMsIDEuICk7XFxuY29uc3QgZmxvYXQgU2hpZnRSaWdodDggPSAxLiAvIDI1Ni47XFxudmVjNCBwYWNrRGVwdGhUb1JHQkEoIGNvbnN0IGluIGZsb2F0IHYgKSB7XFxuXFx0dmVjNCByID0gdmVjNCggZnJhY3QoIHYgKiBQYWNrRmFjdG9ycyApLCB2ICk7XFxuXFx0ci55encgLT0gci54eXogKiBTaGlmdFJpZ2h0ODtcXHRyZXR1cm4gciAqIFBhY2tVcHNjYWxlO1xcbn1cXG5mbG9hdCB1bnBhY2tSR0JBVG9EZXB0aCggY29uc3QgaW4gdmVjNCB2ICkge1xcblxcdHJldHVybiBkb3QoIHYsIFVucGFja0ZhY3RvcnMgKTtcXG59XFxuZmxvYXQgdmlld1pUb09ydGhvZ3JhcGhpY0RlcHRoKCBjb25zdCBpbiBmbG9hdCB2aWV3WiwgY29uc3QgaW4gZmxvYXQgbmVhciwgY29uc3QgaW4gZmxvYXQgZmFyICkge1xcblxcdHJldHVybiAoIHZpZXdaICsgbmVhciApIC8gKCBuZWFyIC0gZmFyICk7XFxufVxcbmZsb2F0IG9ydGhvZ3JhcGhpY0RlcHRoVG9WaWV3WiggY29uc3QgaW4gZmxvYXQgbGluZWFyQ2xpcFosIGNvbnN0IGluIGZsb2F0IG5lYXIsIGNvbnN0IGluIGZsb2F0IGZhciApIHtcXG5cXHRyZXR1cm4gbGluZWFyQ2xpcFogKiAoIG5lYXIgLSBmYXIgKSAtIG5lYXI7XFxufVxcbmZsb2F0IHZpZXdaVG9QZXJzcGVjdGl2ZURlcHRoKCBjb25zdCBpbiBmbG9hdCB2aWV3WiwgY29uc3QgaW4gZmxvYXQgbmVhciwgY29uc3QgaW4gZmxvYXQgZmFyICkge1xcblxcdHJldHVybiAoKCBuZWFyICsgdmlld1ogKSAqIGZhciApIC8gKCggZmFyIC0gbmVhciApICogdmlld1ogKTtcXG59XFxuZmxvYXQgcGVyc3BlY3RpdmVEZXB0aFRvVmlld1ooIGNvbnN0IGluIGZsb2F0IGludkNsaXBaLCBjb25zdCBpbiBmbG9hdCBuZWFyLCBjb25zdCBpbiBmbG9hdCBmYXIgKSB7XFxuXFx0cmV0dXJuICggbmVhciAqIGZhciApIC8gKCAoIGZhciAtIG5lYXIgKSAqIGludkNsaXBaIC0gZmFyICk7XFxufVxcblwiLFxucHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudDpcIiNpZmRlZiBQUkVNVUxUSVBMSUVEX0FMUEhBXFxuXFx0Z2xfRnJhZ0NvbG9yLnJnYiAqPSBnbF9GcmFnQ29sb3IuYTtcXG4jZW5kaWZcXG5cIixwcm9qZWN0X3ZlcnRleDpcInZlYzQgbXZQb3NpdGlvbiA9IG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHRyYW5zZm9ybWVkLCAxLjAgKTtcXG5nbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtdlBvc2l0aW9uO1xcblwiLGRpdGhlcmluZ19mcmFnbWVudDpcIiNpZiBkZWZpbmVkKCBESVRIRVJJTkcgKVxcbiAgZ2xfRnJhZ0NvbG9yLnJnYiA9IGRpdGhlcmluZyggZ2xfRnJhZ0NvbG9yLnJnYiApO1xcbiNlbmRpZlxcblwiLGRpdGhlcmluZ19wYXJzX2ZyYWdtZW50OlwiI2lmIGRlZmluZWQoIERJVEhFUklORyApXFxuXFx0dmVjMyBkaXRoZXJpbmcoIHZlYzMgY29sb3IgKSB7XFxuXFx0XFx0ZmxvYXQgZ3JpZF9wb3NpdGlvbiA9IHJhbmQoIGdsX0ZyYWdDb29yZC54eSApO1xcblxcdFxcdHZlYzMgZGl0aGVyX3NoaWZ0X1JHQiA9IHZlYzMoIDAuMjUgLyAyNTUuMCwgLTAuMjUgLyAyNTUuMCwgMC4yNSAvIDI1NS4wICk7XFxuXFx0XFx0ZGl0aGVyX3NoaWZ0X1JHQiA9IG1peCggMi4wICogZGl0aGVyX3NoaWZ0X1JHQiwgLTIuMCAqIGRpdGhlcl9zaGlmdF9SR0IsIGdyaWRfcG9zaXRpb24gKTtcXG5cXHRcXHRyZXR1cm4gY29sb3IgKyBkaXRoZXJfc2hpZnRfUkdCO1xcblxcdH1cXG4jZW5kaWZcXG5cIixcbnJvdWdobmVzc21hcF9mcmFnbWVudDpcImZsb2F0IHJvdWdobmVzc0ZhY3RvciA9IHJvdWdobmVzcztcXG4jaWZkZWYgVVNFX1JPVUdITkVTU01BUFxcblxcdHZlYzQgdGV4ZWxSb3VnaG5lc3MgPSB0ZXh0dXJlMkQoIHJvdWdobmVzc01hcCwgdlV2ICk7XFxuXFx0cm91Z2huZXNzRmFjdG9yICo9IHRleGVsUm91Z2huZXNzLmc7XFxuI2VuZGlmXFxuXCIscm91Z2huZXNzbWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX1JPVUdITkVTU01BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIHJvdWdobmVzc01hcDtcXG4jZW5kaWZcIixzaGFkb3dtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0I2lmIE5VTV9ESVJfTElHSFRTID4gMFxcblxcdFxcdHVuaWZvcm0gc2FtcGxlcjJEIGRpcmVjdGlvbmFsU2hhZG93TWFwWyBOVU1fRElSX0xJR0hUUyBdO1xcblxcdFxcdHZhcnlpbmcgdmVjNCB2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgTlVNX0RJUl9MSUdIVFMgXTtcXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1NQT1RfTElHSFRTID4gMFxcblxcdFxcdHVuaWZvcm0gc2FtcGxlcjJEIHNwb3RTaGFkb3dNYXBbIE5VTV9TUE9UX0xJR0hUUyBdO1xcblxcdFxcdHZhcnlpbmcgdmVjNCB2U3BvdFNoYWRvd0Nvb3JkWyBOVU1fU1BPVF9MSUdIVFMgXTtcXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1BPSU5UX0xJR0hUUyA+IDBcXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXIyRCBwb2ludFNoYWRvd01hcFsgTlVNX1BPSU5UX0xJR0hUUyBdO1xcblxcdFxcdHZhcnlpbmcgdmVjNCB2UG9pbnRTaGFkb3dDb29yZFsgTlVNX1BPSU5UX0xJR0hUUyBdO1xcblxcdCNlbmRpZlxcblxcdGZsb2F0IHRleHR1cmUyRENvbXBhcmUoIHNhbXBsZXIyRCBkZXB0aHMsIHZlYzIgdXYsIGZsb2F0IGNvbXBhcmUgKSB7XFxuXFx0XFx0cmV0dXJuIHN0ZXAoIGNvbXBhcmUsIHVucGFja1JHQkFUb0RlcHRoKCB0ZXh0dXJlMkQoIGRlcHRocywgdXYgKSApICk7XFxuXFx0fVxcblxcdGZsb2F0IHRleHR1cmUyRFNoYWRvd0xlcnAoIHNhbXBsZXIyRCBkZXB0aHMsIHZlYzIgc2l6ZSwgdmVjMiB1diwgZmxvYXQgY29tcGFyZSApIHtcXG5cXHRcXHRjb25zdCB2ZWMyIG9mZnNldCA9IHZlYzIoIDAuMCwgMS4wICk7XFxuXFx0XFx0dmVjMiB0ZXhlbFNpemUgPSB2ZWMyKCAxLjAgKSAvIHNpemU7XFxuXFx0XFx0dmVjMiBjZW50cm9pZFVWID0gZmxvb3IoIHV2ICogc2l6ZSArIDAuNSApIC8gc2l6ZTtcXG5cXHRcXHRmbG9hdCBsYiA9IHRleHR1cmUyRENvbXBhcmUoIGRlcHRocywgY2VudHJvaWRVViArIHRleGVsU2l6ZSAqIG9mZnNldC54eCwgY29tcGFyZSApO1xcblxcdFxcdGZsb2F0IGx0ID0gdGV4dHVyZTJEQ29tcGFyZSggZGVwdGhzLCBjZW50cm9pZFVWICsgdGV4ZWxTaXplICogb2Zmc2V0Lnh5LCBjb21wYXJlICk7XFxuXFx0XFx0ZmxvYXQgcmIgPSB0ZXh0dXJlMkRDb21wYXJlKCBkZXB0aHMsIGNlbnRyb2lkVVYgKyB0ZXhlbFNpemUgKiBvZmZzZXQueXgsIGNvbXBhcmUgKTtcXG5cXHRcXHRmbG9hdCBydCA9IHRleHR1cmUyRENvbXBhcmUoIGRlcHRocywgY2VudHJvaWRVViArIHRleGVsU2l6ZSAqIG9mZnNldC55eSwgY29tcGFyZSApO1xcblxcdFxcdHZlYzIgZiA9IGZyYWN0KCB1diAqIHNpemUgKyAwLjUgKTtcXG5cXHRcXHRmbG9hdCBhID0gbWl4KCBsYiwgbHQsIGYueSApO1xcblxcdFxcdGZsb2F0IGIgPSBtaXgoIHJiLCBydCwgZi55ICk7XFxuXFx0XFx0ZmxvYXQgYyA9IG1peCggYSwgYiwgZi54ICk7XFxuXFx0XFx0cmV0dXJuIGM7XFxuXFx0fVxcblxcdGZsb2F0IGdldFNoYWRvdyggc2FtcGxlcjJEIHNoYWRvd01hcCwgdmVjMiBzaGFkb3dNYXBTaXplLCBmbG9hdCBzaGFkb3dCaWFzLCBmbG9hdCBzaGFkb3dSYWRpdXMsIHZlYzQgc2hhZG93Q29vcmQgKSB7XFxuXFx0XFx0ZmxvYXQgc2hhZG93ID0gMS4wO1xcblxcdFxcdHNoYWRvd0Nvb3JkLnh5eiAvPSBzaGFkb3dDb29yZC53O1xcblxcdFxcdHNoYWRvd0Nvb3JkLnogKz0gc2hhZG93QmlhcztcXG5cXHRcXHRidmVjNCBpbkZydXN0dW1WZWMgPSBidmVjNCAoIHNoYWRvd0Nvb3JkLnggPj0gMC4wLCBzaGFkb3dDb29yZC54IDw9IDEuMCwgc2hhZG93Q29vcmQueSA+PSAwLjAsIHNoYWRvd0Nvb3JkLnkgPD0gMS4wICk7XFxuXFx0XFx0Ym9vbCBpbkZydXN0dW0gPSBhbGwoIGluRnJ1c3R1bVZlYyApO1xcblxcdFxcdGJ2ZWMyIGZydXN0dW1UZXN0VmVjID0gYnZlYzIoIGluRnJ1c3R1bSwgc2hhZG93Q29vcmQueiA8PSAxLjAgKTtcXG5cXHRcXHRib29sIGZydXN0dW1UZXN0ID0gYWxsKCBmcnVzdHVtVGVzdFZlYyApO1xcblxcdFxcdGlmICggZnJ1c3R1bVRlc3QgKSB7XFxuXFx0XFx0I2lmIGRlZmluZWQoIFNIQURPV01BUF9UWVBFX1BDRiApXFxuXFx0XFx0XFx0dmVjMiB0ZXhlbFNpemUgPSB2ZWMyKCAxLjAgKSAvIHNoYWRvd01hcFNpemU7XFxuXFx0XFx0XFx0ZmxvYXQgZHgwID0gLSB0ZXhlbFNpemUueCAqIHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHRmbG9hdCBkeTAgPSAtIHRleGVsU2l6ZS55ICogc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdGZsb2F0IGR4MSA9ICsgdGV4ZWxTaXplLnggKiBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0XFx0ZmxvYXQgZHkxID0gKyB0ZXhlbFNpemUueSAqIHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHRzaGFkb3cgPSAoXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIDAuMCwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgMC4wICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCAwLjAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCBkeTEgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggMC4wLCBkeTEgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCBkeTEgKSwgc2hhZG93Q29vcmQueiApXFxuXFx0XFx0XFx0KSAqICggMS4wIC8gOS4wICk7XFxuXFx0XFx0I2VsaWYgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfUENGX1NPRlQgKVxcblxcdFxcdFxcdHZlYzIgdGV4ZWxTaXplID0gdmVjMiggMS4wICkgLyBzaGFkb3dNYXBTaXplO1xcblxcdFxcdFxcdGZsb2F0IGR4MCA9IC0gdGV4ZWxTaXplLnggKiBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0XFx0ZmxvYXQgZHkwID0gLSB0ZXhlbFNpemUueSAqIHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHRmbG9hdCBkeDEgPSArIHRleGVsU2l6ZS54ICogc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdGZsb2F0IGR5MSA9ICsgdGV4ZWxTaXplLnkgKiBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0XFx0c2hhZG93ID0gKFxcblxcdFxcdFxcdFxcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIGR5MCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCAwLjAsIGR5MCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDEsIGR5MCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIDAuMCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEU2hhZG93TGVycCggc2hhZG93TWFwLCBzaGFkb3dNYXBTaXplLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgMC4wICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEU2hhZG93TGVycCggc2hhZG93TWFwLCBzaGFkb3dNYXBTaXplLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgZHkxICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEU2hhZG93TGVycCggc2hhZG93TWFwLCBzaGFkb3dNYXBTaXplLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIDAuMCwgZHkxICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEU2hhZG93TGVycCggc2hhZG93TWFwLCBzaGFkb3dNYXBTaXplLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgZHkxICksIHNoYWRvd0Nvb3JkLnogKVxcblxcdFxcdFxcdCkgKiAoIDEuMCAvIDkuMCApO1xcblxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0c2hhZG93ID0gdGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSwgc2hhZG93Q29vcmQueiApO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdH1cXG5cXHRcXHRyZXR1cm4gc2hhZG93O1xcblxcdH1cXG5cXHR2ZWMyIGN1YmVUb1VWKCB2ZWMzIHYsIGZsb2F0IHRleGVsU2l6ZVkgKSB7XFxuXFx0XFx0dmVjMyBhYnNWID0gYWJzKCB2ICk7XFxuXFx0XFx0ZmxvYXQgc2NhbGVUb0N1YmUgPSAxLjAgLyBtYXgoIGFic1YueCwgbWF4KCBhYnNWLnksIGFic1YueiApICk7XFxuXFx0XFx0YWJzViAqPSBzY2FsZVRvQ3ViZTtcXG5cXHRcXHR2ICo9IHNjYWxlVG9DdWJlICogKCAxLjAgLSAyLjAgKiB0ZXhlbFNpemVZICk7XFxuXFx0XFx0dmVjMiBwbGFuYXIgPSB2Lnh5O1xcblxcdFxcdGZsb2F0IGFsbW9zdEFUZXhlbCA9IDEuNSAqIHRleGVsU2l6ZVk7XFxuXFx0XFx0ZmxvYXQgYWxtb3N0T25lID0gMS4wIC0gYWxtb3N0QVRleGVsO1xcblxcdFxcdGlmICggYWJzVi56ID49IGFsbW9zdE9uZSApIHtcXG5cXHRcXHRcXHRpZiAoIHYueiA+IDAuMCApXFxuXFx0XFx0XFx0XFx0cGxhbmFyLnggPSA0LjAgLSB2Lng7XFxuXFx0XFx0fSBlbHNlIGlmICggYWJzVi54ID49IGFsbW9zdE9uZSApIHtcXG5cXHRcXHRcXHRmbG9hdCBzaWduWCA9IHNpZ24oIHYueCApO1xcblxcdFxcdFxcdHBsYW5hci54ID0gdi56ICogc2lnblggKyAyLjAgKiBzaWduWDtcXG5cXHRcXHR9IGVsc2UgaWYgKCBhYnNWLnkgPj0gYWxtb3N0T25lICkge1xcblxcdFxcdFxcdGZsb2F0IHNpZ25ZID0gc2lnbiggdi55ICk7XFxuXFx0XFx0XFx0cGxhbmFyLnggPSB2LnggKyAyLjAgKiBzaWduWSArIDIuMDtcXG5cXHRcXHRcXHRwbGFuYXIueSA9IHYueiAqIHNpZ25ZIC0gMi4wO1xcblxcdFxcdH1cXG5cXHRcXHRyZXR1cm4gdmVjMiggMC4xMjUsIDAuMjUgKSAqIHBsYW5hciArIHZlYzIoIDAuMzc1LCAwLjc1ICk7XFxuXFx0fVxcblxcdGZsb2F0IGdldFBvaW50U2hhZG93KCBzYW1wbGVyMkQgc2hhZG93TWFwLCB2ZWMyIHNoYWRvd01hcFNpemUsIGZsb2F0IHNoYWRvd0JpYXMsIGZsb2F0IHNoYWRvd1JhZGl1cywgdmVjNCBzaGFkb3dDb29yZCwgZmxvYXQgc2hhZG93Q2FtZXJhTmVhciwgZmxvYXQgc2hhZG93Q2FtZXJhRmFyICkge1xcblxcdFxcdHZlYzIgdGV4ZWxTaXplID0gdmVjMiggMS4wICkgLyAoIHNoYWRvd01hcFNpemUgKiB2ZWMyKCA0LjAsIDIuMCApICk7XFxuXFx0XFx0dmVjMyBsaWdodFRvUG9zaXRpb24gPSBzaGFkb3dDb29yZC54eXo7XFxuXFx0XFx0ZmxvYXQgZHAgPSAoIGxlbmd0aCggbGlnaHRUb1Bvc2l0aW9uICkgLSBzaGFkb3dDYW1lcmFOZWFyICkgLyAoIHNoYWRvd0NhbWVyYUZhciAtIHNoYWRvd0NhbWVyYU5lYXIgKTtcXHRcXHRkcCArPSBzaGFkb3dCaWFzO1xcblxcdFxcdHZlYzMgYmQzRCA9IG5vcm1hbGl6ZSggbGlnaHRUb1Bvc2l0aW9uICk7XFxuXFx0XFx0I2lmIGRlZmluZWQoIFNIQURPV01BUF9UWVBFX1BDRiApIHx8IGRlZmluZWQoIFNIQURPV01BUF9UWVBFX1BDRl9TT0ZUIClcXG5cXHRcXHRcXHR2ZWMyIG9mZnNldCA9IHZlYzIoIC0gMSwgMSApICogc2hhZG93UmFkaXVzICogdGV4ZWxTaXplLnk7XFxuXFx0XFx0XFx0cmV0dXJuIChcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnh5eSwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC55eXksIHRleGVsU2l6ZS55ICksIGRwICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueHl4LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnl5eCwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC54eHksIHRleGVsU2l6ZS55ICksIGRwICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueXh5LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnh4eCwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC55eHgsIHRleGVsU2l6ZS55ICksIGRwIClcXG5cXHRcXHRcXHQpICogKCAxLjAgLyA5LjAgKTtcXG5cXHRcXHQjZWxzZVxcblxcdFxcdFxcdHJldHVybiB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNELCB0ZXhlbFNpemUueSApLCBkcCApO1xcblxcdFxcdCNlbmRpZlxcblxcdH1cXG4jZW5kaWZcXG5cIixcbnNoYWRvd21hcF9wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0I2lmIE5VTV9ESVJfTElHSFRTID4gMFxcblxcdFxcdHVuaWZvcm0gbWF0NCBkaXJlY3Rpb25hbFNoYWRvd01hdHJpeFsgTlVNX0RJUl9MSUdIVFMgXTtcXG5cXHRcXHR2YXJ5aW5nIHZlYzQgdkRpcmVjdGlvbmFsU2hhZG93Q29vcmRbIE5VTV9ESVJfTElHSFRTIF07XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcXG5cXHRcXHR1bmlmb3JtIG1hdDQgc3BvdFNoYWRvd01hdHJpeFsgTlVNX1NQT1RfTElHSFRTIF07XFxuXFx0XFx0dmFyeWluZyB2ZWM0IHZTcG90U2hhZG93Q29vcmRbIE5VTV9TUE9UX0xJR0hUUyBdO1xcblxcdCNlbmRpZlxcblxcdCNpZiBOVU1fUE9JTlRfTElHSFRTID4gMFxcblxcdFxcdHVuaWZvcm0gbWF0NCBwb2ludFNoYWRvd01hdHJpeFsgTlVNX1BPSU5UX0xJR0hUUyBdO1xcblxcdFxcdHZhcnlpbmcgdmVjNCB2UG9pbnRTaGFkb3dDb29yZFsgTlVNX1BPSU5UX0xJR0hUUyBdO1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiLFxuc2hhZG93bWFwX3ZlcnRleDpcIiNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0I2lmIE5VTV9ESVJfTElHSFRTID4gMFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9ESVJfTElHSFRTOyBpICsrICkge1xcblxcdFxcdHZEaXJlY3Rpb25hbFNoYWRvd0Nvb3JkWyBpIF0gPSBkaXJlY3Rpb25hbFNoYWRvd01hdHJpeFsgaSBdICogd29ybGRQb3NpdGlvbjtcXG5cXHR9XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fU1BPVF9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0dlNwb3RTaGFkb3dDb29yZFsgaSBdID0gc3BvdFNoYWRvd01hdHJpeFsgaSBdICogd29ybGRQb3NpdGlvbjtcXG5cXHR9XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9QT0lOVF9MSUdIVFMgPiAwXFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1BPSU5UX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHR2UG9pbnRTaGFkb3dDb29yZFsgaSBdID0gcG9pbnRTaGFkb3dNYXRyaXhbIGkgXSAqIHdvcmxkUG9zaXRpb247XFxuXFx0fVxcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiLFxuc2hhZG93bWFza19wYXJzX2ZyYWdtZW50OlwiZmxvYXQgZ2V0U2hhZG93TWFzaygpIHtcXG5cXHRmbG9hdCBzaGFkb3cgPSAxLjA7XFxuXFx0I2lmZGVmIFVTRV9TSEFET1dNQVBcXG5cXHQjaWYgTlVNX0RJUl9MSUdIVFMgPiAwXFxuXFx0RGlyZWN0aW9uYWxMaWdodCBkaXJlY3Rpb25hbExpZ2h0O1xcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9ESVJfTElHSFRTOyBpICsrICkge1xcblxcdFxcdGRpcmVjdGlvbmFsTGlnaHQgPSBkaXJlY3Rpb25hbExpZ2h0c1sgaSBdO1xcblxcdFxcdHNoYWRvdyAqPSBib29sKCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvdyApID8gZ2V0U2hhZG93KCBkaXJlY3Rpb25hbFNoYWRvd01hcFsgaSBdLCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvd01hcFNpemUsIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93QmlhcywgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3dSYWRpdXMsIHZEaXJlY3Rpb25hbFNoYWRvd0Nvb3JkWyBpIF0gKSA6IDEuMDtcXG5cXHR9XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcXG5cXHRTcG90TGlnaHQgc3BvdExpZ2h0O1xcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9TUE9UX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRzcG90TGlnaHQgPSBzcG90TGlnaHRzWyBpIF07XFxuXFx0XFx0c2hhZG93ICo9IGJvb2woIHNwb3RMaWdodC5zaGFkb3cgKSA/IGdldFNoYWRvdyggc3BvdFNoYWRvd01hcFsgaSBdLCBzcG90TGlnaHQuc2hhZG93TWFwU2l6ZSwgc3BvdExpZ2h0LnNoYWRvd0JpYXMsIHNwb3RMaWdodC5zaGFkb3dSYWRpdXMsIHZTcG90U2hhZG93Q29vcmRbIGkgXSApIDogMS4wO1xcblxcdH1cXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1BPSU5UX0xJR0hUUyA+IDBcXG5cXHRQb2ludExpZ2h0IHBvaW50TGlnaHQ7XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1BPSU5UX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRwb2ludExpZ2h0ID0gcG9pbnRMaWdodHNbIGkgXTtcXG5cXHRcXHRzaGFkb3cgKj0gYm9vbCggcG9pbnRMaWdodC5zaGFkb3cgKSA/IGdldFBvaW50U2hhZG93KCBwb2ludFNoYWRvd01hcFsgaSBdLCBwb2ludExpZ2h0LnNoYWRvd01hcFNpemUsIHBvaW50TGlnaHQuc2hhZG93QmlhcywgcG9pbnRMaWdodC5zaGFkb3dSYWRpdXMsIHZQb2ludFNoYWRvd0Nvb3JkWyBpIF0sIHBvaW50TGlnaHQuc2hhZG93Q2FtZXJhTmVhciwgcG9pbnRMaWdodC5zaGFkb3dDYW1lcmFGYXIgKSA6IDEuMDtcXG5cXHR9XFxuXFx0I2VuZGlmXFxuXFx0I2VuZGlmXFxuXFx0cmV0dXJuIHNoYWRvdztcXG59XFxuXCIsXG5za2luYmFzZV92ZXJ0ZXg6XCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxuXFx0bWF0NCBib25lTWF0WCA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC54ICk7XFxuXFx0bWF0NCBib25lTWF0WSA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC55ICk7XFxuXFx0bWF0NCBib25lTWF0WiA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC56ICk7XFxuXFx0bWF0NCBib25lTWF0VyA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC53ICk7XFxuI2VuZGlmXCIsc2tpbm5pbmdfcGFyc192ZXJ0ZXg6XCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxuXFx0dW5pZm9ybSBtYXQ0IGJpbmRNYXRyaXg7XFxuXFx0dW5pZm9ybSBtYXQ0IGJpbmRNYXRyaXhJbnZlcnNlO1xcblxcdCNpZmRlZiBCT05FX1RFWFRVUkVcXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXIyRCBib25lVGV4dHVyZTtcXG5cXHRcXHR1bmlmb3JtIGludCBib25lVGV4dHVyZVNpemU7XFxuXFx0XFx0bWF0NCBnZXRCb25lTWF0cml4KCBjb25zdCBpbiBmbG9hdCBpICkge1xcblxcdFxcdFxcdGZsb2F0IGogPSBpICogNC4wO1xcblxcdFxcdFxcdGZsb2F0IHggPSBtb2QoIGosIGZsb2F0KCBib25lVGV4dHVyZVNpemUgKSApO1xcblxcdFxcdFxcdGZsb2F0IHkgPSBmbG9vciggaiAvIGZsb2F0KCBib25lVGV4dHVyZVNpemUgKSApO1xcblxcdFxcdFxcdGZsb2F0IGR4ID0gMS4wIC8gZmxvYXQoIGJvbmVUZXh0dXJlU2l6ZSApO1xcblxcdFxcdFxcdGZsb2F0IGR5ID0gMS4wIC8gZmxvYXQoIGJvbmVUZXh0dXJlU2l6ZSApO1xcblxcdFxcdFxcdHkgPSBkeSAqICggeSArIDAuNSApO1xcblxcdFxcdFxcdHZlYzQgdjEgPSB0ZXh0dXJlMkQoIGJvbmVUZXh0dXJlLCB2ZWMyKCBkeCAqICggeCArIDAuNSApLCB5ICkgKTtcXG5cXHRcXHRcXHR2ZWM0IHYyID0gdGV4dHVyZTJEKCBib25lVGV4dHVyZSwgdmVjMiggZHggKiAoIHggKyAxLjUgKSwgeSApICk7XFxuXFx0XFx0XFx0dmVjNCB2MyA9IHRleHR1cmUyRCggYm9uZVRleHR1cmUsIHZlYzIoIGR4ICogKCB4ICsgMi41ICksIHkgKSApO1xcblxcdFxcdFxcdHZlYzQgdjQgPSB0ZXh0dXJlMkQoIGJvbmVUZXh0dXJlLCB2ZWMyKCBkeCAqICggeCArIDMuNSApLCB5ICkgKTtcXG5cXHRcXHRcXHRtYXQ0IGJvbmUgPSBtYXQ0KCB2MSwgdjIsIHYzLCB2NCApO1xcblxcdFxcdFxcdHJldHVybiBib25lO1xcblxcdFxcdH1cXG5cXHQjZWxzZVxcblxcdFxcdHVuaWZvcm0gbWF0NCBib25lTWF0cmljZXNbIE1BWF9CT05FUyBdO1xcblxcdFxcdG1hdDQgZ2V0Qm9uZU1hdHJpeCggY29uc3QgaW4gZmxvYXQgaSApIHtcXG5cXHRcXHRcXHRtYXQ0IGJvbmUgPSBib25lTWF0cmljZXNbIGludChpKSBdO1xcblxcdFxcdFxcdHJldHVybiBib25lO1xcblxcdFxcdH1cXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIixcbnNraW5uaW5nX3ZlcnRleDpcIiNpZmRlZiBVU0VfU0tJTk5JTkdcXG5cXHR2ZWM0IHNraW5WZXJ0ZXggPSBiaW5kTWF0cml4ICogdmVjNCggdHJhbnNmb3JtZWQsIDEuMCApO1xcblxcdHZlYzQgc2tpbm5lZCA9IHZlYzQoIDAuMCApO1xcblxcdHNraW5uZWQgKz0gYm9uZU1hdFggKiBza2luVmVydGV4ICogc2tpbldlaWdodC54O1xcblxcdHNraW5uZWQgKz0gYm9uZU1hdFkgKiBza2luVmVydGV4ICogc2tpbldlaWdodC55O1xcblxcdHNraW5uZWQgKz0gYm9uZU1hdFogKiBza2luVmVydGV4ICogc2tpbldlaWdodC56O1xcblxcdHNraW5uZWQgKz0gYm9uZU1hdFcgKiBza2luVmVydGV4ICogc2tpbldlaWdodC53O1xcblxcdHRyYW5zZm9ybWVkID0gKCBiaW5kTWF0cml4SW52ZXJzZSAqIHNraW5uZWQgKS54eXo7XFxuI2VuZGlmXFxuXCIsc2tpbm5vcm1hbF92ZXJ0ZXg6XCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxuXFx0bWF0NCBza2luTWF0cml4ID0gbWF0NCggMC4wICk7XFxuXFx0c2tpbk1hdHJpeCArPSBza2luV2VpZ2h0LnggKiBib25lTWF0WDtcXG5cXHRza2luTWF0cml4ICs9IHNraW5XZWlnaHQueSAqIGJvbmVNYXRZO1xcblxcdHNraW5NYXRyaXggKz0gc2tpbldlaWdodC56ICogYm9uZU1hdFo7XFxuXFx0c2tpbk1hdHJpeCArPSBza2luV2VpZ2h0LncgKiBib25lTWF0VztcXG5cXHRza2luTWF0cml4ICA9IGJpbmRNYXRyaXhJbnZlcnNlICogc2tpbk1hdHJpeCAqIGJpbmRNYXRyaXg7XFxuXFx0b2JqZWN0Tm9ybWFsID0gdmVjNCggc2tpbk1hdHJpeCAqIHZlYzQoIG9iamVjdE5vcm1hbCwgMC4wICkgKS54eXo7XFxuI2VuZGlmXFxuXCIsXG5zcGVjdWxhcm1hcF9mcmFnbWVudDpcImZsb2F0IHNwZWN1bGFyU3RyZW5ndGg7XFxuI2lmZGVmIFVTRV9TUEVDVUxBUk1BUFxcblxcdHZlYzQgdGV4ZWxTcGVjdWxhciA9IHRleHR1cmUyRCggc3BlY3VsYXJNYXAsIHZVdiApO1xcblxcdHNwZWN1bGFyU3RyZW5ndGggPSB0ZXhlbFNwZWN1bGFyLnI7XFxuI2Vsc2VcXG5cXHRzcGVjdWxhclN0cmVuZ3RoID0gMS4wO1xcbiNlbmRpZlwiLHNwZWN1bGFybWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX1NQRUNVTEFSTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgc3BlY3VsYXJNYXA7XFxuI2VuZGlmXCIsdG9uZW1hcHBpbmdfZnJhZ21lbnQ6XCIjaWYgZGVmaW5lZCggVE9ORV9NQVBQSU5HIClcXG4gIGdsX0ZyYWdDb2xvci5yZ2IgPSB0b25lTWFwcGluZyggZ2xfRnJhZ0NvbG9yLnJnYiApO1xcbiNlbmRpZlxcblwiLHRvbmVtYXBwaW5nX3BhcnNfZnJhZ21lbnQ6XCIjaWZuZGVmIHNhdHVyYXRlXFxuXFx0I2RlZmluZSBzYXR1cmF0ZShhKSBjbGFtcCggYSwgMC4wLCAxLjAgKVxcbiNlbmRpZlxcbnVuaWZvcm0gZmxvYXQgdG9uZU1hcHBpbmdFeHBvc3VyZTtcXG51bmlmb3JtIGZsb2F0IHRvbmVNYXBwaW5nV2hpdGVQb2ludDtcXG52ZWMzIExpbmVhclRvbmVNYXBwaW5nKCB2ZWMzIGNvbG9yICkge1xcblxcdHJldHVybiB0b25lTWFwcGluZ0V4cG9zdXJlICogY29sb3I7XFxufVxcbnZlYzMgUmVpbmhhcmRUb25lTWFwcGluZyggdmVjMyBjb2xvciApIHtcXG5cXHRjb2xvciAqPSB0b25lTWFwcGluZ0V4cG9zdXJlO1xcblxcdHJldHVybiBzYXR1cmF0ZSggY29sb3IgLyAoIHZlYzMoIDEuMCApICsgY29sb3IgKSApO1xcbn1cXG4jZGVmaW5lIFVuY2hhcnRlZDJIZWxwZXIoIHggKSBtYXgoICggKCB4ICogKCAwLjE1ICogeCArIDAuMTAgKiAwLjUwICkgKyAwLjIwICogMC4wMiApIC8gKCB4ICogKCAwLjE1ICogeCArIDAuNTAgKSArIDAuMjAgKiAwLjMwICkgKSAtIDAuMDIgLyAwLjMwLCB2ZWMzKCAwLjAgKSApXFxudmVjMyBVbmNoYXJ0ZWQyVG9uZU1hcHBpbmcoIHZlYzMgY29sb3IgKSB7XFxuXFx0Y29sb3IgKj0gdG9uZU1hcHBpbmdFeHBvc3VyZTtcXG5cXHRyZXR1cm4gc2F0dXJhdGUoIFVuY2hhcnRlZDJIZWxwZXIoIGNvbG9yICkgLyBVbmNoYXJ0ZWQySGVscGVyKCB2ZWMzKCB0b25lTWFwcGluZ1doaXRlUG9pbnQgKSApICk7XFxufVxcbnZlYzMgT3B0aW1pemVkQ2luZW9uVG9uZU1hcHBpbmcoIHZlYzMgY29sb3IgKSB7XFxuXFx0Y29sb3IgKj0gdG9uZU1hcHBpbmdFeHBvc3VyZTtcXG5cXHRjb2xvciA9IG1heCggdmVjMyggMC4wICksIGNvbG9yIC0gMC4wMDQgKTtcXG5cXHRyZXR1cm4gcG93KCAoIGNvbG9yICogKCA2LjIgKiBjb2xvciArIDAuNSApICkgLyAoIGNvbG9yICogKCA2LjIgKiBjb2xvciArIDEuNyApICsgMC4wNiApLCB2ZWMzKCAyLjIgKSApO1xcbn1cXG5cIixcbnV2X3BhcnNfZnJhZ21lbnQ6XCIjaWYgZGVmaW5lZCggVVNFX01BUCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFVTRV9TUEVDVUxBUk1BUCApIHx8IGRlZmluZWQoIFVTRV9BTFBIQU1BUCApIHx8IGRlZmluZWQoIFVTRV9FTUlTU0lWRU1BUCApIHx8IGRlZmluZWQoIFVTRV9ST1VHSE5FU1NNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTUVUQUxORVNTTUFQIClcXG5cXHR2YXJ5aW5nIHZlYzIgdlV2O1xcbiNlbmRpZlwiLHV2X3BhcnNfdmVydGV4OlwiI2lmIGRlZmluZWQoIFVTRV9NQVAgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBVU0VfU1BFQ1VMQVJNQVAgKSB8fCBkZWZpbmVkKCBVU0VfQUxQSEFNQVAgKSB8fCBkZWZpbmVkKCBVU0VfRU1JU1NJVkVNQVAgKSB8fCBkZWZpbmVkKCBVU0VfUk9VR0hORVNTTUFQICkgfHwgZGVmaW5lZCggVVNFX01FVEFMTkVTU01BUCApXFxuXFx0dmFyeWluZyB2ZWMyIHZVdjtcXG5cXHR1bmlmb3JtIG1hdDMgdXZUcmFuc2Zvcm07XFxuI2VuZGlmXFxuXCIsXG51dl92ZXJ0ZXg6XCIjaWYgZGVmaW5lZCggVVNFX01BUCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFVTRV9TUEVDVUxBUk1BUCApIHx8IGRlZmluZWQoIFVTRV9BTFBIQU1BUCApIHx8IGRlZmluZWQoIFVTRV9FTUlTU0lWRU1BUCApIHx8IGRlZmluZWQoIFVTRV9ST1VHSE5FU1NNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTUVUQUxORVNTTUFQIClcXG5cXHR2VXYgPSAoIHV2VHJhbnNmb3JtICogdmVjMyggdXYsIDEgKSApLnh5O1xcbiNlbmRpZlwiLHV2Ml9wYXJzX2ZyYWdtZW50OlwiI2lmIGRlZmluZWQoIFVTRV9MSUdIVE1BUCApIHx8IGRlZmluZWQoIFVTRV9BT01BUCApXFxuXFx0dmFyeWluZyB2ZWMyIHZVdjI7XFxuI2VuZGlmXCIsdXYyX3BhcnNfdmVydGV4OlwiI2lmIGRlZmluZWQoIFVTRV9MSUdIVE1BUCApIHx8IGRlZmluZWQoIFVTRV9BT01BUCApXFxuXFx0YXR0cmlidXRlIHZlYzIgdXYyO1xcblxcdHZhcnlpbmcgdmVjMiB2VXYyO1xcbiNlbmRpZlwiLFxudXYyX3ZlcnRleDpcIiNpZiBkZWZpbmVkKCBVU0VfTElHSFRNQVAgKSB8fCBkZWZpbmVkKCBVU0VfQU9NQVAgKVxcblxcdHZVdjIgPSB1djI7XFxuI2VuZGlmXCIsd29ybGRwb3NfdmVydGV4OlwiI2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSB8fCBkZWZpbmVkKCBESVNUQU5DRSApIHx8IGRlZmluZWQgKCBVU0VfU0hBRE9XTUFQIClcXG5cXHR2ZWM0IHdvcmxkUG9zaXRpb24gPSBtb2RlbE1hdHJpeCAqIHZlYzQoIHRyYW5zZm9ybWVkLCAxLjAgKTtcXG4jZW5kaWZcXG5cIixjdWJlX2ZyYWc6XCJ1bmlmb3JtIHNhbXBsZXJDdWJlIHRDdWJlO1xcbnVuaWZvcm0gZmxvYXQgdEZsaXA7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG52b2lkIG1haW4oKSB7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdGV4dHVyZUN1YmUoIHRDdWJlLCB2ZWMzKCB0RmxpcCAqIHZXb3JsZFBvc2l0aW9uLngsIHZXb3JsZFBvc2l0aW9uLnl6ICkgKTtcXG5cXHRnbF9GcmFnQ29sb3IuYSAqPSBvcGFjaXR5O1xcbn1cXG5cIixcbmN1YmVfdmVydDpcInZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbnZvaWQgbWFpbigpIHtcXG5cXHR2V29ybGRQb3NpdGlvbiA9IHRyYW5zZm9ybURpcmVjdGlvbiggcG9zaXRpb24sIG1vZGVsTWF0cml4ICk7XFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0Z2xfUG9zaXRpb24ueiA9IGdsX1Bvc2l0aW9uLnc7XFxufVxcblwiLGRlcHRoX2ZyYWc6XCIjaWYgREVQVEhfUEFDS0lORyA9PSAzMjAwXFxuXFx0dW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIDEuMCApO1xcblxcdCNpZiBERVBUSF9QQUNLSU5HID09IDMyMDBcXG5cXHRcXHRkaWZmdXNlQ29sb3IuYSA9IG9wYWNpdHk7XFxuXFx0I2VuZGlmXFxuXFx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2lmIERFUFRIX1BBQ0tJTkcgPT0gMzIwMFxcblxcdFxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIHZlYzMoIGdsX0ZyYWdDb29yZC56ICksIG9wYWNpdHkgKTtcXG5cXHQjZWxpZiBERVBUSF9QQUNLSU5HID09IDMyMDFcXG5cXHRcXHRnbF9GcmFnQ29sb3IgPSBwYWNrRGVwdGhUb1JHQkEoIGdsX0ZyYWdDb29yZC56ICk7XFxuXFx0I2VuZGlmXFxufVxcblwiLFxuZGVwdGhfdmVydDpcIiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxcblxcdCNpZmRlZiBVU0VfRElTUExBQ0VNRU5UTUFQXFxuXFx0XFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHRcXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdFxcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjZW5kaWZcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG59XFxuXCIsXG5kaXN0YW5jZVJHQkFfZnJhZzpcIiNkZWZpbmUgRElTVEFOQ0VcXG51bmlmb3JtIHZlYzMgcmVmZXJlbmNlUG9zaXRpb247XFxudW5pZm9ybSBmbG9hdCBuZWFyRGlzdGFuY2U7XFxudW5pZm9ybSBmbG9hdCBmYXJEaXN0YW5jZTtcXG52YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbiAoKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIDEuMCApO1xcblxcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XFxuXFx0ZmxvYXQgZGlzdCA9IGxlbmd0aCggdldvcmxkUG9zaXRpb24gLSByZWZlcmVuY2VQb3NpdGlvbiApO1xcblxcdGRpc3QgPSAoIGRpc3QgLSBuZWFyRGlzdGFuY2UgKSAvICggZmFyRGlzdGFuY2UgLSBuZWFyRGlzdGFuY2UgKTtcXG5cXHRkaXN0ID0gc2F0dXJhdGUoIGRpc3QgKTtcXG5cXHRnbF9GcmFnQ29sb3IgPSBwYWNrRGVwdGhUb1JHQkEoIGRpc3QgKTtcXG59XFxuXCIsXG5kaXN0YW5jZVJHQkFfdmVydDpcIiNkZWZpbmUgRElTVEFOQ0VcXG52YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cXG5cXHQjaWZkZWYgVVNFX0RJU1BMQUNFTUVOVE1BUFxcblxcdFxcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0XFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cXHRcXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2VuZGlmXFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0dldvcmxkUG9zaXRpb24gPSB3b3JsZFBvc2l0aW9uLnh5ejtcXG59XFxuXCIsXG5lcXVpcmVjdF9mcmFnOlwidW5pZm9ybSBzYW1wbGVyMkQgdEVxdWlyZWN0O1xcbnZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbnZvaWQgbWFpbigpIHtcXG5cXHR2ZWMzIGRpcmVjdGlvbiA9IG5vcm1hbGl6ZSggdldvcmxkUG9zaXRpb24gKTtcXG5cXHR2ZWMyIHNhbXBsZVVWO1xcblxcdHNhbXBsZVVWLnkgPSBhc2luKCBjbGFtcCggZGlyZWN0aW9uLnksIC0gMS4wLCAxLjAgKSApICogUkVDSVBST0NBTF9QSSArIDAuNTtcXG5cXHRzYW1wbGVVVi54ID0gYXRhbiggZGlyZWN0aW9uLnosIGRpcmVjdGlvbi54ICkgKiBSRUNJUFJPQ0FMX1BJMiArIDAuNTtcXG5cXHRnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQoIHRFcXVpcmVjdCwgc2FtcGxlVVYgKTtcXG59XFxuXCIsZXF1aXJlY3RfdmVydDpcInZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbnZvaWQgbWFpbigpIHtcXG5cXHR2V29ybGRQb3NpdGlvbiA9IHRyYW5zZm9ybURpcmVjdGlvbiggcG9zaXRpb24sIG1vZGVsTWF0cml4ICk7XFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxufVxcblwiLFxubGluZWRhc2hlZF9mcmFnOlwidW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnVuaWZvcm0gZmxvYXQgZGFzaFNpemU7XFxudW5pZm9ybSBmbG9hdCB0b3RhbFNpemU7XFxudmFyeWluZyBmbG9hdCB2TGluZURpc3RhbmNlO1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHRpZiAoIG1vZCggdkxpbmVEaXN0YW5jZSwgdG90YWxTaXplICkgPiBkYXNoU2l6ZSApIHtcXG5cXHRcXHRkaXNjYXJkO1xcblxcdH1cXG5cXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSB2ZWMzKCAwLjAgKTtcXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxcblxcdG91dGdvaW5nTGlnaHQgPSBkaWZmdXNlQ29sb3IucmdiO1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG59XFxuXCIsXG5saW5lZGFzaGVkX3ZlcnQ6XCJ1bmlmb3JtIGZsb2F0IHNjYWxlO1xcbmF0dHJpYnV0ZSBmbG9hdCBsaW5lRGlzdGFuY2U7XFxudmFyeWluZyBmbG9hdCB2TGluZURpc3RhbmNlO1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXFx0dkxpbmVEaXN0YW5jZSA9IHNjYWxlICogbGluZURpc3RhbmNlO1xcblxcdHZlYzQgbXZQb3NpdGlvbiA9IG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcXG5cXHRnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtdlBvc2l0aW9uO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XFxufVxcblwiLFxubWVzaGJhc2ljX2ZyYWc6XCJ1bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YW9tYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bGlnaHRtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHNwZWN1bGFybWFwX2ZyYWdtZW50PlxcblxcdFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ID0gUmVmbGVjdGVkTGlnaHQoIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApICk7XFxuXFx0I2lmZGVmIFVTRV9MSUdIVE1BUFxcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSB0ZXh0dXJlMkQoIGxpZ2h0TWFwLCB2VXYyICkueHl6ICogbGlnaHRNYXBJbnRlbnNpdHk7XFxuXFx0I2Vsc2VcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gdmVjMyggMS4wICk7XFxuXFx0I2VuZGlmXFxuXFx0I2luY2x1ZGUgPGFvbWFwX2ZyYWdtZW50PlxcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSAqPSBkaWZmdXNlQ29sb3IucmdiO1xcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZTtcXG5cXHQjaW5jbHVkZSA8ZW52bWFwX2ZyYWdtZW50PlxcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG59XFxuXCIsXG5tZXNoYmFzaWNfdmVydDpcIiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDx1djJfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx1djJfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cXG5cXHQjaWZkZWYgVVNFX0VOVk1BUFxcblxcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRlZmF1bHRub3JtYWxfdmVydGV4PlxcblxcdCNlbmRpZlxcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGVudm1hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XFxufVxcblwiLFxubWVzaGxhbWJlcnRfZnJhZzpcInVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gdmVjMyBlbWlzc2l2ZTtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudmFyeWluZyB2ZWMzIHZMaWdodEZyb250O1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG5cXHR2YXJ5aW5nIHZlYzMgdkxpZ2h0QmFjaztcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxwYWNraW5nPlxcbiNpbmNsdWRlIDxkaXRoZXJpbmdfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhb21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsaWdodG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnNkZnM+XFxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzPlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNoYWRvd21hc2tfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0UmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgPSBSZWZsZWN0ZWRMaWdodCggdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICkgKTtcXG5cXHR2ZWMzIHRvdGFsRW1pc3NpdmVSYWRpYW5jZSA9IGVtaXNzaXZlO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8c3BlY3VsYXJtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVtaXNzaXZlbWFwX2ZyYWdtZW50PlxcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSA9IGdldEFtYmllbnRMaWdodElycmFkaWFuY2UoIGFtYmllbnRMaWdodENvbG9yICk7XFxuXFx0I2luY2x1ZGUgPGxpZ2h0bWFwX2ZyYWdtZW50PlxcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSAqPSBCUkRGX0RpZmZ1c2VfTGFtYmVydCggZGlmZnVzZUNvbG9yLnJnYiApO1xcblxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlID0gKCBnbF9Gcm9udEZhY2luZyApID8gdkxpZ2h0RnJvbnQgOiB2TGlnaHRCYWNrO1xcblxcdCNlbHNlXFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSA9IHZMaWdodEZyb250O1xcblxcdCNlbmRpZlxcblxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKj0gQlJERl9EaWZmdXNlX0xhbWJlcnQoIGRpZmZ1c2VDb2xvci5yZ2IgKSAqIGdldFNoYWRvd01hc2soKTtcXG5cXHQjaW5jbHVkZSA8YW9tYXBfZnJhZ21lbnQ+XFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gcmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArIHRvdGFsRW1pc3NpdmVSYWRpYW5jZTtcXG5cXHQjaW5jbHVkZSA8ZW52bWFwX2ZyYWdtZW50PlxcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZGl0aGVyaW5nX2ZyYWdtZW50Plxcbn1cXG5cIixcbm1lc2hsYW1iZXJ0X3ZlcnQ6XCIjZGVmaW5lIExBTUJFUlRcXG52YXJ5aW5nIHZlYzMgdkxpZ2h0RnJvbnQ7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcblxcdHZhcnlpbmcgdmVjMyB2TGlnaHRCYWNrO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDx1djJfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8YnNkZnM+XFxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8dXYyX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZW52bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX2xhbWJlcnRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxzaGFkb3dtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxmb2dfdmVydGV4Plxcbn1cXG5cIixcbm1lc2hwaG9uZ19mcmFnOlwiI2RlZmluZSBQSE9OR1xcbnVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gdmVjMyBlbWlzc2l2ZTtcXG51bmlmb3JtIHZlYzMgc3BlY3VsYXI7XFxudW5pZm9ybSBmbG9hdCBzaGluaW5lc3M7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPGRpdGhlcmluZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1djJfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFvbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVtaXNzaXZlbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxncmFkaWVudG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnNkZnM+XFxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzPlxcbiNpbmNsdWRlIDxsaWdodHNfcGhvbmdfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGJ1bXBtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bm9ybWFsbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNwZWN1bGFybWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1xcblxcdFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ID0gUmVmbGVjdGVkTGlnaHQoIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApICk7XFxuXFx0dmVjMyB0b3RhbEVtaXNzaXZlUmFkaWFuY2UgPSBlbWlzc2l2ZTtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHNwZWN1bGFybWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVtaXNzaXZlbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxsaWdodHNfcGhvbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGxpZ2h0c190ZW1wbGF0ZT5cXG5cXHQjaW5jbHVkZSA8YW9tYXBfZnJhZ21lbnQ+XFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gcmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICsgcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3RTcGVjdWxhciArIHRvdGFsRW1pc3NpdmVSYWRpYW5jZTtcXG5cXHQjaW5jbHVkZSA8ZW52bWFwX2ZyYWdtZW50PlxcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZGl0aGVyaW5nX2ZyYWdtZW50Plxcbn1cXG5cIixcbm1lc2hwaG9uZ192ZXJ0OlwiI2RlZmluZSBQSE9OR1xcbnZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHV2Ml92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRlZmF1bHRub3JtYWxfdmVydGV4PlxcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2Tm9ybWFsID0gbm9ybWFsaXplKCB0cmFuc2Zvcm1lZE5vcm1hbCApO1xcbiNlbmRpZlxcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdHZWaWV3UG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xcblxcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGVudm1hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XFxufVxcblwiLFxubWVzaHBoeXNpY2FsX2ZyYWc6XCIjZGVmaW5lIFBIWVNJQ0FMXFxudW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSB2ZWMzIGVtaXNzaXZlO1xcbnVuaWZvcm0gZmxvYXQgcm91Z2huZXNzO1xcbnVuaWZvcm0gZmxvYXQgbWV0YWxuZXNzO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaWZuZGVmIFNUQU5EQVJEXFxuXFx0dW5pZm9ybSBmbG9hdCBjbGVhckNvYXQ7XFxuXFx0dW5pZm9ybSBmbG9hdCBjbGVhckNvYXRSb3VnaG5lc3M7XFxuI2VuZGlmXFxudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPGRpdGhlcmluZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1djJfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFvbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVtaXNzaXZlbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnNkZnM+XFxuI2luY2x1ZGUgPGN1YmVfdXZfcmVmbGVjdGlvbl9mcmFnbWVudD5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnM+XFxuI2luY2x1ZGUgPGxpZ2h0c19waHlzaWNhbF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnVtcG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxub3JtYWxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8cm91Z2huZXNzbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1ldGFsbmVzc21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHRSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCA9IFJlZmxlY3RlZExpZ2h0KCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSApO1xcblxcdHZlYzMgdG90YWxFbWlzc2l2ZVJhZGlhbmNlID0gZW1pc3NpdmU7XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxyb3VnaG5lc3NtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG1ldGFsbmVzc21hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bm9ybWFsX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX3BoeXNpY2FsX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxsaWdodHNfdGVtcGxhdGU+XFxuXFx0I2luY2x1ZGUgPGFvbWFwX2ZyYWdtZW50PlxcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKyB0b3RhbEVtaXNzaXZlUmFkaWFuY2U7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggb3V0Z29pbmdMaWdodCwgZGlmZnVzZUNvbG9yLmEgKTtcXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxkaXRoZXJpbmdfZnJhZ21lbnQ+XFxufVxcblwiLFxubWVzaHBoeXNpY2FsX3ZlcnQ6XCIjZGVmaW5lIFBIWVNJQ0FMXFxudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDx1djJfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHV2Ml92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRlZmF1bHRub3JtYWxfdmVydGV4PlxcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2Tm9ybWFsID0gbm9ybWFsaXplKCB0cmFuc2Zvcm1lZE5vcm1hbCApO1xcbiNlbmRpZlxcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdHZWaWV3UG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xcblxcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XFxufVxcblwiLFxubm9ybWFsX2ZyYWc6XCIjZGVmaW5lIE5PUk1BTFxcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaWYgZGVmaW5lZCggRkxBVF9TSEFERUQgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKVxcblxcdHZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNlbmRpZlxcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jZW5kaWZcXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnVtcG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxub3JtYWxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnQ+XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggcGFja05vcm1hbFRvUkdCKCBub3JtYWwgKSwgb3BhY2l0eSApO1xcbn1cXG5cIixcbm5vcm1hbF92ZXJ0OlwiI2RlZmluZSBOT1JNQUxcXG4jaWYgZGVmaW5lZCggRkxBVF9TSEFERUQgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKVxcblxcdHZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNlbmRpZlxcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jZW5kaWZcXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRlZmF1bHRub3JtYWxfdmVydGV4PlxcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2Tm9ybWFsID0gbm9ybWFsaXplKCB0cmFuc2Zvcm1lZE5vcm1hbCApO1xcbiNlbmRpZlxcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcbiNpZiBkZWZpbmVkKCBGTEFUX1NIQURFRCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApXFxuXFx0dlZpZXdQb3NpdGlvbiA9IC0gbXZQb3NpdGlvbi54eXo7XFxuI2VuZGlmXFxufVxcblwiLFxucG9pbnRzX2ZyYWc6XCJ1bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnRpY2xlX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gdmVjMyggMC4wICk7XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxtYXBfcGFydGljbGVfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XFxuXFx0b3V0Z29pbmdMaWdodCA9IGRpZmZ1c2VDb2xvci5yZ2I7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggb3V0Z29pbmdMaWdodCwgZGlmZnVzZUNvbG9yLmEgKTtcXG5cXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50Plxcbn1cXG5cIixcbnBvaW50c192ZXJ0OlwidW5pZm9ybSBmbG9hdCBzaXplO1xcbnVuaWZvcm0gZmxvYXQgc2NhbGU7XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpZmRlZiBVU0VfU0laRUFUVEVOVUFUSU9OXFxuXFx0XFx0Z2xfUG9pbnRTaXplID0gc2l6ZSAqICggc2NhbGUgLyAtIG12UG9zaXRpb24ueiApO1xcblxcdCNlbHNlXFxuXFx0XFx0Z2xfUG9pbnRTaXplID0gc2l6ZTtcXG5cXHQjZW5kaWZcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XFxufVxcblwiLFxuc2hhZG93X2ZyYWc6XCJ1bmlmb3JtIHZlYzMgY29sb3I7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnM+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXNrX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIGNvbG9yLCBvcGFjaXR5ICogKCAxLjAgLSBnZXRTaGFkb3dNYXNrKCkgKSApO1xcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxufVxcblwiLHNoYWRvd192ZXJ0OlwiI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxzaGFkb3dtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxmb2dfdmVydGV4Plxcbn1cXG5cIn0sXG50Yj17YmFzaWM6e3VuaWZvcm1zOkdhLm1lcmdlKFtLLmNvbW1vbixLLnNwZWN1bGFybWFwLEsuZW52bWFwLEsuYW9tYXAsSy5saWdodG1hcCxLLmZvZ10pLHZlcnRleFNoYWRlcjpSLm1lc2hiYXNpY192ZXJ0LGZyYWdtZW50U2hhZGVyOlIubWVzaGJhc2ljX2ZyYWd9LGxhbWJlcnQ6e3VuaWZvcm1zOkdhLm1lcmdlKFtLLmNvbW1vbixLLnNwZWN1bGFybWFwLEsuZW52bWFwLEsuYW9tYXAsSy5saWdodG1hcCxLLmVtaXNzaXZlbWFwLEsuZm9nLEsubGlnaHRzLHtlbWlzc2l2ZTp7dmFsdWU6bmV3IEgoMCl9fV0pLHZlcnRleFNoYWRlcjpSLm1lc2hsYW1iZXJ0X3ZlcnQsZnJhZ21lbnRTaGFkZXI6Ui5tZXNobGFtYmVydF9mcmFnfSxwaG9uZzp7dW5pZm9ybXM6R2EubWVyZ2UoW0suY29tbW9uLEsuc3BlY3VsYXJtYXAsSy5lbnZtYXAsSy5hb21hcCxLLmxpZ2h0bWFwLEsuZW1pc3NpdmVtYXAsSy5idW1wbWFwLEsubm9ybWFsbWFwLEsuZGlzcGxhY2VtZW50bWFwLEsuZ3JhZGllbnRtYXAsXG5LLmZvZyxLLmxpZ2h0cyx7ZW1pc3NpdmU6e3ZhbHVlOm5ldyBIKDApfSxzcGVjdWxhcjp7dmFsdWU6bmV3IEgoMTExODQ4MSl9LHNoaW5pbmVzczp7dmFsdWU6MzB9fV0pLHZlcnRleFNoYWRlcjpSLm1lc2hwaG9uZ192ZXJ0LGZyYWdtZW50U2hhZGVyOlIubWVzaHBob25nX2ZyYWd9LHN0YW5kYXJkOnt1bmlmb3JtczpHYS5tZXJnZShbSy5jb21tb24sSy5lbnZtYXAsSy5hb21hcCxLLmxpZ2h0bWFwLEsuZW1pc3NpdmVtYXAsSy5idW1wbWFwLEsubm9ybWFsbWFwLEsuZGlzcGxhY2VtZW50bWFwLEsucm91Z2huZXNzbWFwLEsubWV0YWxuZXNzbWFwLEsuZm9nLEsubGlnaHRzLHtlbWlzc2l2ZTp7dmFsdWU6bmV3IEgoMCl9LHJvdWdobmVzczp7dmFsdWU6LjV9LG1ldGFsbmVzczp7dmFsdWU6LjV9LGVudk1hcEludGVuc2l0eTp7dmFsdWU6MX19XSksdmVydGV4U2hhZGVyOlIubWVzaHBoeXNpY2FsX3ZlcnQsZnJhZ21lbnRTaGFkZXI6Ui5tZXNocGh5c2ljYWxfZnJhZ30scG9pbnRzOnt1bmlmb3JtczpHYS5tZXJnZShbSy5wb2ludHMsXG5LLmZvZ10pLHZlcnRleFNoYWRlcjpSLnBvaW50c192ZXJ0LGZyYWdtZW50U2hhZGVyOlIucG9pbnRzX2ZyYWd9LGRhc2hlZDp7dW5pZm9ybXM6R2EubWVyZ2UoW0suY29tbW9uLEsuZm9nLHtzY2FsZTp7dmFsdWU6MX0sZGFzaFNpemU6e3ZhbHVlOjF9LHRvdGFsU2l6ZTp7dmFsdWU6Mn19XSksdmVydGV4U2hhZGVyOlIubGluZWRhc2hlZF92ZXJ0LGZyYWdtZW50U2hhZGVyOlIubGluZWRhc2hlZF9mcmFnfSxkZXB0aDp7dW5pZm9ybXM6R2EubWVyZ2UoW0suY29tbW9uLEsuZGlzcGxhY2VtZW50bWFwXSksdmVydGV4U2hhZGVyOlIuZGVwdGhfdmVydCxmcmFnbWVudFNoYWRlcjpSLmRlcHRoX2ZyYWd9LG5vcm1hbDp7dW5pZm9ybXM6R2EubWVyZ2UoW0suY29tbW9uLEsuYnVtcG1hcCxLLm5vcm1hbG1hcCxLLmRpc3BsYWNlbWVudG1hcCx7b3BhY2l0eTp7dmFsdWU6MX19XSksdmVydGV4U2hhZGVyOlIubm9ybWFsX3ZlcnQsZnJhZ21lbnRTaGFkZXI6Ui5ub3JtYWxfZnJhZ30sY3ViZTp7dW5pZm9ybXM6e3RDdWJlOnt2YWx1ZTpudWxsfSxcbnRGbGlwOnt2YWx1ZTotMX0sb3BhY2l0eTp7dmFsdWU6MX19LHZlcnRleFNoYWRlcjpSLmN1YmVfdmVydCxmcmFnbWVudFNoYWRlcjpSLmN1YmVfZnJhZ30sZXF1aXJlY3Q6e3VuaWZvcm1zOnt0RXF1aXJlY3Q6e3ZhbHVlOm51bGx9fSx2ZXJ0ZXhTaGFkZXI6Ui5lcXVpcmVjdF92ZXJ0LGZyYWdtZW50U2hhZGVyOlIuZXF1aXJlY3RfZnJhZ30sZGlzdGFuY2VSR0JBOnt1bmlmb3JtczpHYS5tZXJnZShbSy5jb21tb24sSy5kaXNwbGFjZW1lbnRtYXAse3JlZmVyZW5jZVBvc2l0aW9uOnt2YWx1ZTpuZXcgcH0sbmVhckRpc3RhbmNlOnt2YWx1ZToxfSxmYXJEaXN0YW5jZTp7dmFsdWU6MUUzfX1dKSx2ZXJ0ZXhTaGFkZXI6Ui5kaXN0YW5jZVJHQkFfdmVydCxmcmFnbWVudFNoYWRlcjpSLmRpc3RhbmNlUkdCQV9mcmFnfSxzaGFkb3c6e3VuaWZvcm1zOkdhLm1lcmdlKFtLLmxpZ2h0cyxLLmZvZyx7Y29sb3I6e3ZhbHVlOm5ldyBIKDApfSxvcGFjaXR5Ont2YWx1ZToxfX1dKSx2ZXJ0ZXhTaGFkZXI6Ui5zaGFkb3dfdmVydCxcbmZyYWdtZW50U2hhZGVyOlIuc2hhZG93X2ZyYWd9fTt0Yi5waHlzaWNhbD17dW5pZm9ybXM6R2EubWVyZ2UoW3RiLnN0YW5kYXJkLnVuaWZvcm1zLHtjbGVhckNvYXQ6e3ZhbHVlOjB9LGNsZWFyQ29hdFJvdWdobmVzczp7dmFsdWU6MH19XSksdmVydGV4U2hhZGVyOlIubWVzaHBoeXNpY2FsX3ZlcnQsZnJhZ21lbnRTaGFkZXI6Ui5tZXNocGh5c2ljYWxfZnJhZ307T2JqZWN0LmFzc2lnbihvZC5wcm90b3R5cGUse3NldDpmdW5jdGlvbihhLGIpe3RoaXMubWluLmNvcHkoYSk7dGhpcy5tYXguY29weShiKTtyZXR1cm4gdGhpc30sc2V0RnJvbVBvaW50czpmdW5jdGlvbihhKXt0aGlzLm1ha2VFbXB0eSgpO2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl0aGlzLmV4cGFuZEJ5UG9pbnQoYVtiXSk7cmV0dXJuIHRoaXN9LHNldEZyb21DZW50ZXJBbmRTaXplOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IEQ7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7Yz1hLmNvcHkoYykubXVsdGlwbHlTY2FsYXIoLjUpO1xudGhpcy5taW4uY29weShiKS5zdWIoYyk7dGhpcy5tYXguY29weShiKS5hZGQoYyk7cmV0dXJuIHRoaXN9fSgpLGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMubWluLmNvcHkoYS5taW4pO3RoaXMubWF4LmNvcHkoYS5tYXgpO3JldHVybiB0aGlzfSxtYWtlRW1wdHk6ZnVuY3Rpb24oKXt0aGlzLm1pbi54PXRoaXMubWluLnk9SW5maW5pdHk7dGhpcy5tYXgueD10aGlzLm1heC55PS1JbmZpbml0eTtyZXR1cm4gdGhpc30saXNFbXB0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1heC54PHRoaXMubWluLnh8fHRoaXMubWF4Lnk8dGhpcy5taW4ueX0sZ2V0Q2VudGVyOmZ1bmN0aW9uKGEpe2E9YXx8bmV3IEQ7cmV0dXJuIHRoaXMuaXNFbXB0eSgpP2Euc2V0KDAsMCk6YS5hZGRWZWN0b3JzKHRoaXMubWluLHRoaXMubWF4KS5tdWx0aXBseVNjYWxhciguNSl9LGdldFNpemU6ZnVuY3Rpb24oYSl7YT1cbmF8fG5ldyBEO3JldHVybiB0aGlzLmlzRW1wdHkoKT9hLnNldCgwLDApOmEuc3ViVmVjdG9ycyh0aGlzLm1heCx0aGlzLm1pbil9LGV4cGFuZEJ5UG9pbnQ6ZnVuY3Rpb24oYSl7dGhpcy5taW4ubWluKGEpO3RoaXMubWF4Lm1heChhKTtyZXR1cm4gdGhpc30sZXhwYW5kQnlWZWN0b3I6ZnVuY3Rpb24oYSl7dGhpcy5taW4uc3ViKGEpO3RoaXMubWF4LmFkZChhKTtyZXR1cm4gdGhpc30sZXhwYW5kQnlTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy5taW4uYWRkU2NhbGFyKC1hKTt0aGlzLm1heC5hZGRTY2FsYXIoYSk7cmV0dXJuIHRoaXN9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEueDx0aGlzLm1pbi54fHxhLng+dGhpcy5tYXgueHx8YS55PHRoaXMubWluLnl8fGEueT50aGlzLm1heC55PyExOiEwfSxjb250YWluc0JveDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5taW4ueDw9YS5taW4ueCYmYS5tYXgueDw9dGhpcy5tYXgueCYmdGhpcy5taW4ueTw9YS5taW4ueSYmYS5tYXgueTw9XG50aGlzLm1heC55fSxnZXRQYXJhbWV0ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYnx8bmV3IEQpLnNldCgoYS54LXRoaXMubWluLngpLyh0aGlzLm1heC54LXRoaXMubWluLngpLChhLnktdGhpcy5taW4ueSkvKHRoaXMubWF4LnktdGhpcy5taW4ueSkpfSxpbnRlcnNlY3RzQm94OmZ1bmN0aW9uKGEpe3JldHVybiBhLm1heC54PHRoaXMubWluLnh8fGEubWluLng+dGhpcy5tYXgueHx8YS5tYXgueTx0aGlzLm1pbi55fHxhLm1pbi55PnRoaXMubWF4Lnk/ITE6ITB9LGNsYW1wUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYnx8bmV3IEQpLmNvcHkoYSkuY2xhbXAodGhpcy5taW4sdGhpcy5tYXgpfSxkaXN0YW5jZVRvUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgRDtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGEuY29weShiKS5jbGFtcCh0aGlzLm1pbix0aGlzLm1heCkuc3ViKGIpLmxlbmd0aCgpfX0oKSxpbnRlcnNlY3Q6ZnVuY3Rpb24oYSl7dGhpcy5taW4ubWF4KGEubWluKTtcbnRoaXMubWF4Lm1pbihhLm1heCk7cmV0dXJuIHRoaXN9LHVuaW9uOmZ1bmN0aW9uKGEpe3RoaXMubWluLm1pbihhLm1pbik7dGhpcy5tYXgubWF4KGEubWF4KTtyZXR1cm4gdGhpc30sdHJhbnNsYXRlOmZ1bmN0aW9uKGEpe3RoaXMubWluLmFkZChhKTt0aGlzLm1heC5hZGQoYSk7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5taW4uZXF1YWxzKHRoaXMubWluKSYmYS5tYXguZXF1YWxzKHRoaXMubWF4KX19KTt0Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShVLnByb3RvdHlwZSk7dGMucHJvdG90eXBlLmNvbnN0cnVjdG9yPXRjO3ZhciBhZz0wO1AucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh6YS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpQLGlzTWF0ZXJpYWw6ITAsb25CZWZvcmVDb21waWxlOmZ1bmN0aW9uKCl7fSxzZXRWYWx1ZXM6ZnVuY3Rpb24oYSl7aWYodm9pZCAwIT09YSlmb3IodmFyIGIgaW4gYSl7dmFyIGM9YVtiXTtpZih2b2lkIDA9PT1cbmMpY29uc29sZS53YXJuKFwiVEhSRUUuTWF0ZXJpYWw6ICdcIitiK1wiJyBwYXJhbWV0ZXIgaXMgdW5kZWZpbmVkLlwiKTtlbHNlIGlmKFwic2hhZGluZ1wiPT09Yiljb25zb2xlLndhcm4oXCJUSFJFRS5cIit0aGlzLnR5cGUrXCI6IC5zaGFkaW5nIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB0aGUgYm9vbGVhbiAuZmxhdFNoYWRpbmcgaW5zdGVhZC5cIiksdGhpcy5mbGF0U2hhZGluZz0xPT09Yz8hMDohMTtlbHNle3ZhciBkPXRoaXNbYl07dm9pZCAwPT09ZD9jb25zb2xlLndhcm4oXCJUSFJFRS5cIit0aGlzLnR5cGUrXCI6ICdcIitiK1wiJyBpcyBub3QgYSBwcm9wZXJ0eSBvZiB0aGlzIG1hdGVyaWFsLlwiKTpkJiZkLmlzQ29sb3I/ZC5zZXQoYyk6ZCYmZC5pc1ZlY3RvcjMmJmMmJmMuaXNWZWN0b3IzP2QuY29weShjKTp0aGlzW2JdPVwib3ZlcmRyYXdcIj09PWI/TnVtYmVyKGMpOmN9fX0sdG9KU09OOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGI9W10sYztmb3IoYyBpbiBhKXt2YXIgZD1hW2NdO2RlbGV0ZSBkLm1ldGFkYXRhO1xuYi5wdXNoKGQpfXJldHVybiBifXZhciBjPXZvaWQgMD09PWF8fFwic3RyaW5nXCI9PT10eXBlb2YgYTtjJiYoYT17dGV4dHVyZXM6e30saW1hZ2VzOnt9fSk7dmFyIGQ9e21ldGFkYXRhOnt2ZXJzaW9uOjQuNSx0eXBlOlwiTWF0ZXJpYWxcIixnZW5lcmF0b3I6XCJNYXRlcmlhbC50b0pTT05cIn19O2QudXVpZD10aGlzLnV1aWQ7ZC50eXBlPXRoaXMudHlwZTtcIlwiIT09dGhpcy5uYW1lJiYoZC5uYW1lPXRoaXMubmFtZSk7dGhpcy5jb2xvciYmdGhpcy5jb2xvci5pc0NvbG9yJiYoZC5jb2xvcj10aGlzLmNvbG9yLmdldEhleCgpKTt2b2lkIDAhPT10aGlzLnJvdWdobmVzcyYmKGQucm91Z2huZXNzPXRoaXMucm91Z2huZXNzKTt2b2lkIDAhPT10aGlzLm1ldGFsbmVzcyYmKGQubWV0YWxuZXNzPXRoaXMubWV0YWxuZXNzKTt0aGlzLmVtaXNzaXZlJiZ0aGlzLmVtaXNzaXZlLmlzQ29sb3ImJihkLmVtaXNzaXZlPXRoaXMuZW1pc3NpdmUuZ2V0SGV4KCkpOzEhPT10aGlzLmVtaXNzaXZlSW50ZW5zaXR5JiZcbihkLmVtaXNzaXZlSW50ZW5zaXR5PXRoaXMuZW1pc3NpdmVJbnRlbnNpdHkpO3RoaXMuc3BlY3VsYXImJnRoaXMuc3BlY3VsYXIuaXNDb2xvciYmKGQuc3BlY3VsYXI9dGhpcy5zcGVjdWxhci5nZXRIZXgoKSk7dm9pZCAwIT09dGhpcy5zaGluaW5lc3MmJihkLnNoaW5pbmVzcz10aGlzLnNoaW5pbmVzcyk7dm9pZCAwIT09dGhpcy5jbGVhckNvYXQmJihkLmNsZWFyQ29hdD10aGlzLmNsZWFyQ29hdCk7dm9pZCAwIT09dGhpcy5jbGVhckNvYXRSb3VnaG5lc3MmJihkLmNsZWFyQ29hdFJvdWdobmVzcz10aGlzLmNsZWFyQ29hdFJvdWdobmVzcyk7dGhpcy5tYXAmJnRoaXMubWFwLmlzVGV4dHVyZSYmKGQubWFwPXRoaXMubWFwLnRvSlNPTihhKS51dWlkKTt0aGlzLmFscGhhTWFwJiZ0aGlzLmFscGhhTWFwLmlzVGV4dHVyZSYmKGQuYWxwaGFNYXA9dGhpcy5hbHBoYU1hcC50b0pTT04oYSkudXVpZCk7dGhpcy5saWdodE1hcCYmdGhpcy5saWdodE1hcC5pc1RleHR1cmUmJihkLmxpZ2h0TWFwPVxudGhpcy5saWdodE1hcC50b0pTT04oYSkudXVpZCk7dGhpcy5idW1wTWFwJiZ0aGlzLmJ1bXBNYXAuaXNUZXh0dXJlJiYoZC5idW1wTWFwPXRoaXMuYnVtcE1hcC50b0pTT04oYSkudXVpZCxkLmJ1bXBTY2FsZT10aGlzLmJ1bXBTY2FsZSk7dGhpcy5ub3JtYWxNYXAmJnRoaXMubm9ybWFsTWFwLmlzVGV4dHVyZSYmKGQubm9ybWFsTWFwPXRoaXMubm9ybWFsTWFwLnRvSlNPTihhKS51dWlkLGQubm9ybWFsU2NhbGU9dGhpcy5ub3JtYWxTY2FsZS50b0FycmF5KCkpO3RoaXMuZGlzcGxhY2VtZW50TWFwJiZ0aGlzLmRpc3BsYWNlbWVudE1hcC5pc1RleHR1cmUmJihkLmRpc3BsYWNlbWVudE1hcD10aGlzLmRpc3BsYWNlbWVudE1hcC50b0pTT04oYSkudXVpZCxkLmRpc3BsYWNlbWVudFNjYWxlPXRoaXMuZGlzcGxhY2VtZW50U2NhbGUsZC5kaXNwbGFjZW1lbnRCaWFzPXRoaXMuZGlzcGxhY2VtZW50Qmlhcyk7dGhpcy5yb3VnaG5lc3NNYXAmJnRoaXMucm91Z2huZXNzTWFwLmlzVGV4dHVyZSYmXG4oZC5yb3VnaG5lc3NNYXA9dGhpcy5yb3VnaG5lc3NNYXAudG9KU09OKGEpLnV1aWQpO3RoaXMubWV0YWxuZXNzTWFwJiZ0aGlzLm1ldGFsbmVzc01hcC5pc1RleHR1cmUmJihkLm1ldGFsbmVzc01hcD10aGlzLm1ldGFsbmVzc01hcC50b0pTT04oYSkudXVpZCk7dGhpcy5lbWlzc2l2ZU1hcCYmdGhpcy5lbWlzc2l2ZU1hcC5pc1RleHR1cmUmJihkLmVtaXNzaXZlTWFwPXRoaXMuZW1pc3NpdmVNYXAudG9KU09OKGEpLnV1aWQpO3RoaXMuc3BlY3VsYXJNYXAmJnRoaXMuc3BlY3VsYXJNYXAuaXNUZXh0dXJlJiYoZC5zcGVjdWxhck1hcD10aGlzLnNwZWN1bGFyTWFwLnRvSlNPTihhKS51dWlkKTt0aGlzLmVudk1hcCYmdGhpcy5lbnZNYXAuaXNUZXh0dXJlJiYoZC5lbnZNYXA9dGhpcy5lbnZNYXAudG9KU09OKGEpLnV1aWQsZC5yZWZsZWN0aXZpdHk9dGhpcy5yZWZsZWN0aXZpdHkpO3RoaXMuZ3JhZGllbnRNYXAmJnRoaXMuZ3JhZGllbnRNYXAuaXNUZXh0dXJlJiYoZC5ncmFkaWVudE1hcD1cbnRoaXMuZ3JhZGllbnRNYXAudG9KU09OKGEpLnV1aWQpO3ZvaWQgMCE9PXRoaXMuc2l6ZSYmKGQuc2l6ZT10aGlzLnNpemUpO3ZvaWQgMCE9PXRoaXMuc2l6ZUF0dGVudWF0aW9uJiYoZC5zaXplQXR0ZW51YXRpb249dGhpcy5zaXplQXR0ZW51YXRpb24pOzEhPT10aGlzLmJsZW5kaW5nJiYoZC5ibGVuZGluZz10aGlzLmJsZW5kaW5nKTshMD09PXRoaXMuZmxhdFNoYWRpbmcmJihkLmZsYXRTaGFkaW5nPXRoaXMuZmxhdFNoYWRpbmcpOzAhPT10aGlzLnNpZGUmJihkLnNpZGU9dGhpcy5zaWRlKTswIT09dGhpcy52ZXJ0ZXhDb2xvcnMmJihkLnZlcnRleENvbG9ycz10aGlzLnZlcnRleENvbG9ycyk7MT50aGlzLm9wYWNpdHkmJihkLm9wYWNpdHk9dGhpcy5vcGFjaXR5KTshMD09PXRoaXMudHJhbnNwYXJlbnQmJihkLnRyYW5zcGFyZW50PXRoaXMudHJhbnNwYXJlbnQpO2QuZGVwdGhGdW5jPXRoaXMuZGVwdGhGdW5jO2QuZGVwdGhUZXN0PXRoaXMuZGVwdGhUZXN0O2QuZGVwdGhXcml0ZT1cbnRoaXMuZGVwdGhXcml0ZTswIT09dGhpcy5yb3RhdGlvbiYmKGQucm90YXRpb249dGhpcy5yb3RhdGlvbik7MSE9PXRoaXMubGluZXdpZHRoJiYoZC5saW5ld2lkdGg9dGhpcy5saW5ld2lkdGgpO3ZvaWQgMCE9PXRoaXMuZGFzaFNpemUmJihkLmRhc2hTaXplPXRoaXMuZGFzaFNpemUpO3ZvaWQgMCE9PXRoaXMuZ2FwU2l6ZSYmKGQuZ2FwU2l6ZT10aGlzLmdhcFNpemUpO3ZvaWQgMCE9PXRoaXMuc2NhbGUmJihkLnNjYWxlPXRoaXMuc2NhbGUpOyEwPT09dGhpcy5kaXRoZXJpbmcmJihkLmRpdGhlcmluZz0hMCk7MDx0aGlzLmFscGhhVGVzdCYmKGQuYWxwaGFUZXN0PXRoaXMuYWxwaGFUZXN0KTshMD09PXRoaXMucHJlbXVsdGlwbGllZEFscGhhJiYoZC5wcmVtdWx0aXBsaWVkQWxwaGE9dGhpcy5wcmVtdWx0aXBsaWVkQWxwaGEpOyEwPT09dGhpcy53aXJlZnJhbWUmJihkLndpcmVmcmFtZT10aGlzLndpcmVmcmFtZSk7MTx0aGlzLndpcmVmcmFtZUxpbmV3aWR0aCYmKGQud2lyZWZyYW1lTGluZXdpZHRoPVxudGhpcy53aXJlZnJhbWVMaW5ld2lkdGgpO1wicm91bmRcIiE9PXRoaXMud2lyZWZyYW1lTGluZWNhcCYmKGQud2lyZWZyYW1lTGluZWNhcD10aGlzLndpcmVmcmFtZUxpbmVjYXApO1wicm91bmRcIiE9PXRoaXMud2lyZWZyYW1lTGluZWpvaW4mJihkLndpcmVmcmFtZUxpbmVqb2luPXRoaXMud2lyZWZyYW1lTGluZWpvaW4pOyEwPT09dGhpcy5tb3JwaFRhcmdldHMmJihkLm1vcnBoVGFyZ2V0cz0hMCk7ITA9PT10aGlzLnNraW5uaW5nJiYoZC5za2lubmluZz0hMCk7ITE9PT10aGlzLnZpc2libGUmJihkLnZpc2libGU9ITEpO1wie31cIiE9PUpTT04uc3RyaW5naWZ5KHRoaXMudXNlckRhdGEpJiYoZC51c2VyRGF0YT10aGlzLnVzZXJEYXRhKTtjJiYoYz1iKGEudGV4dHVyZXMpLGE9YihhLmltYWdlcyksMDxjLmxlbmd0aCYmKGQudGV4dHVyZXM9YyksMDxhLmxlbmd0aCYmKGQuaW1hZ2VzPWEpKTtyZXR1cm4gZH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LFxuY29weTpmdW5jdGlvbihhKXt0aGlzLm5hbWU9YS5uYW1lO3RoaXMuZm9nPWEuZm9nO3RoaXMubGlnaHRzPWEubGlnaHRzO3RoaXMuYmxlbmRpbmc9YS5ibGVuZGluZzt0aGlzLnNpZGU9YS5zaWRlO3RoaXMuZmxhdFNoYWRpbmc9YS5mbGF0U2hhZGluZzt0aGlzLnZlcnRleENvbG9ycz1hLnZlcnRleENvbG9yczt0aGlzLm9wYWNpdHk9YS5vcGFjaXR5O3RoaXMudHJhbnNwYXJlbnQ9YS50cmFuc3BhcmVudDt0aGlzLmJsZW5kU3JjPWEuYmxlbmRTcmM7dGhpcy5ibGVuZERzdD1hLmJsZW5kRHN0O3RoaXMuYmxlbmRFcXVhdGlvbj1hLmJsZW5kRXF1YXRpb247dGhpcy5ibGVuZFNyY0FscGhhPWEuYmxlbmRTcmNBbHBoYTt0aGlzLmJsZW5kRHN0QWxwaGE9YS5ibGVuZERzdEFscGhhO3RoaXMuYmxlbmRFcXVhdGlvbkFscGhhPWEuYmxlbmRFcXVhdGlvbkFscGhhO3RoaXMuZGVwdGhGdW5jPWEuZGVwdGhGdW5jO3RoaXMuZGVwdGhUZXN0PWEuZGVwdGhUZXN0O3RoaXMuZGVwdGhXcml0ZT1hLmRlcHRoV3JpdGU7XG50aGlzLmNvbG9yV3JpdGU9YS5jb2xvcldyaXRlO3RoaXMucHJlY2lzaW9uPWEucHJlY2lzaW9uO3RoaXMucG9seWdvbk9mZnNldD1hLnBvbHlnb25PZmZzZXQ7dGhpcy5wb2x5Z29uT2Zmc2V0RmFjdG9yPWEucG9seWdvbk9mZnNldEZhY3Rvcjt0aGlzLnBvbHlnb25PZmZzZXRVbml0cz1hLnBvbHlnb25PZmZzZXRVbml0czt0aGlzLmRpdGhlcmluZz1hLmRpdGhlcmluZzt0aGlzLmFscGhhVGVzdD1hLmFscGhhVGVzdDt0aGlzLnByZW11bHRpcGxpZWRBbHBoYT1hLnByZW11bHRpcGxpZWRBbHBoYTt0aGlzLm92ZXJkcmF3PWEub3ZlcmRyYXc7dGhpcy52aXNpYmxlPWEudmlzaWJsZTt0aGlzLnVzZXJEYXRhPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYS51c2VyRGF0YSkpO3RoaXMuY2xpcFNoYWRvd3M9YS5jbGlwU2hhZG93czt0aGlzLmNsaXBJbnRlcnNlY3Rpb249YS5jbGlwSW50ZXJzZWN0aW9uO2E9YS5jbGlwcGluZ1BsYW5lczt2YXIgYj1udWxsO2lmKG51bGwhPT1hKWZvcih2YXIgYz1cbmEubGVuZ3RoLGI9QXJyYXkoYyksZD0wO2QhPT1jOysrZCliW2RdPWFbZF0uY2xvbmUoKTt0aGlzLmNsaXBwaW5nUGxhbmVzPWI7cmV0dXJuIHRoaXN9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJkaXNwb3NlXCJ9KX19KTtlYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShQLnByb3RvdHlwZSk7ZWIucHJvdG90eXBlLmNvbnN0cnVjdG9yPWViO2ViLnByb3RvdHlwZS5pc01lc2hEZXB0aE1hdGVyaWFsPSEwO2ViLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe1AucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuZGVwdGhQYWNraW5nPWEuZGVwdGhQYWNraW5nO3RoaXMuc2tpbm5pbmc9YS5za2lubmluZzt0aGlzLm1vcnBoVGFyZ2V0cz1hLm1vcnBoVGFyZ2V0czt0aGlzLm1hcD1hLm1hcDt0aGlzLmFscGhhTWFwPWEuYWxwaGFNYXA7dGhpcy5kaXNwbGFjZW1lbnRNYXA9YS5kaXNwbGFjZW1lbnRNYXA7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT1cbmEuZGlzcGxhY2VtZW50U2NhbGU7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPWEuZGlzcGxhY2VtZW50Qmlhczt0aGlzLndpcmVmcmFtZT1hLndpcmVmcmFtZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD1hLndpcmVmcmFtZUxpbmV3aWR0aDtyZXR1cm4gdGhpc307ZmIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoUC5wcm90b3R5cGUpO2ZiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1mYjtmYi5wcm90b3R5cGUuaXNNZXNoRGlzdGFuY2VNYXRlcmlhbD0hMDtmYi5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtQLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLnJlZmVyZW5jZVBvc2l0aW9uLmNvcHkoYS5yZWZlcmVuY2VQb3NpdGlvbik7dGhpcy5uZWFyRGlzdGFuY2U9YS5uZWFyRGlzdGFuY2U7dGhpcy5mYXJEaXN0YW5jZT1hLmZhckRpc3RhbmNlO3RoaXMuc2tpbm5pbmc9YS5za2lubmluZzt0aGlzLm1vcnBoVGFyZ2V0cz1hLm1vcnBoVGFyZ2V0czt0aGlzLm1hcD1hLm1hcDt0aGlzLmFscGhhTWFwPVxuYS5hbHBoYU1hcDt0aGlzLmRpc3BsYWNlbWVudE1hcD1hLmRpc3BsYWNlbWVudE1hcDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPWEuZGlzcGxhY2VtZW50U2NhbGU7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPWEuZGlzcGxhY2VtZW50QmlhcztyZXR1cm4gdGhpc307T2JqZWN0LmFzc2lnbihYYS5wcm90b3R5cGUse2lzQm94MzohMCxzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLm1pbi5jb3B5KGEpO3RoaXMubWF4LmNvcHkoYik7cmV0dXJuIHRoaXN9LHNldEZyb21BcnJheTpmdW5jdGlvbihhKXtmb3IodmFyIGI9SW5maW5pdHksYz1JbmZpbml0eSxkPUluZmluaXR5LGU9LUluZmluaXR5LGY9LUluZmluaXR5LGc9LUluZmluaXR5LGg9MCxrPWEubGVuZ3RoO2g8aztoKz0zKXt2YXIgbT1hW2hdLHE9YVtoKzFdLGw9YVtoKzJdO208YiYmKGI9bSk7cTxjJiYoYz1xKTtsPGQmJihkPWwpO20+ZSYmKGU9bSk7cT5mJiYoZj1xKTtsPmcmJihnPWwpfXRoaXMubWluLnNldChiLGMsZCk7dGhpcy5tYXguc2V0KGUsXG5mLGcpO3JldHVybiB0aGlzfSxzZXRGcm9tQnVmZmVyQXR0cmlidXRlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1JbmZpbml0eSxjPUluZmluaXR5LGQ9SW5maW5pdHksZT0tSW5maW5pdHksZj0tSW5maW5pdHksZz0tSW5maW5pdHksaD0wLGs9YS5jb3VudDtoPGs7aCsrKXt2YXIgbT1hLmdldFgoaCkscT1hLmdldFkoaCksbD1hLmdldFooaCk7bTxiJiYoYj1tKTtxPGMmJihjPXEpO2w8ZCYmKGQ9bCk7bT5lJiYoZT1tKTtxPmYmJihmPXEpO2w+ZyYmKGc9bCl9dGhpcy5taW4uc2V0KGIsYyxkKTt0aGlzLm1heC5zZXQoZSxmLGcpO3JldHVybiB0aGlzfSxzZXRGcm9tUG9pbnRzOmZ1bmN0aW9uKGEpe3RoaXMubWFrZUVtcHR5KCk7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiPGM7YisrKXRoaXMuZXhwYW5kQnlQb2ludChhW2JdKTtyZXR1cm4gdGhpc30sc2V0RnJvbUNlbnRlckFuZFNpemU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYixjKXtjPWEuY29weShjKS5tdWx0aXBseVNjYWxhciguNSk7XG50aGlzLm1pbi5jb3B5KGIpLnN1YihjKTt0aGlzLm1heC5jb3B5KGIpLmFkZChjKTtyZXR1cm4gdGhpc319KCksc2V0RnJvbU9iamVjdDpmdW5jdGlvbihhKXt0aGlzLm1ha2VFbXB0eSgpO3JldHVybiB0aGlzLmV4cGFuZEJ5T2JqZWN0KGEpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihhKXt0aGlzLm1pbi5jb3B5KGEubWluKTt0aGlzLm1heC5jb3B5KGEubWF4KTtyZXR1cm4gdGhpc30sbWFrZUVtcHR5OmZ1bmN0aW9uKCl7dGhpcy5taW4ueD10aGlzLm1pbi55PXRoaXMubWluLno9SW5maW5pdHk7dGhpcy5tYXgueD10aGlzLm1heC55PXRoaXMubWF4Lno9LUluZmluaXR5O3JldHVybiB0aGlzfSxpc0VtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF4Lng8dGhpcy5taW4ueHx8dGhpcy5tYXgueTx0aGlzLm1pbi55fHx0aGlzLm1heC56PHRoaXMubWluLnp9LGdldENlbnRlcjpmdW5jdGlvbihhKXthPVxuYXx8bmV3IHA7cmV0dXJuIHRoaXMuaXNFbXB0eSgpP2Euc2V0KDAsMCwwKTphLmFkZFZlY3RvcnModGhpcy5taW4sdGhpcy5tYXgpLm11bHRpcGx5U2NhbGFyKC41KX0sZ2V0U2l6ZTpmdW5jdGlvbihhKXthPWF8fG5ldyBwO3JldHVybiB0aGlzLmlzRW1wdHkoKT9hLnNldCgwLDAsMCk6YS5zdWJWZWN0b3JzKHRoaXMubWF4LHRoaXMubWluKX0sZXhwYW5kQnlQb2ludDpmdW5jdGlvbihhKXt0aGlzLm1pbi5taW4oYSk7dGhpcy5tYXgubWF4KGEpO3JldHVybiB0aGlzfSxleHBhbmRCeVZlY3RvcjpmdW5jdGlvbihhKXt0aGlzLm1pbi5zdWIoYSk7dGhpcy5tYXguYWRkKGEpO3JldHVybiB0aGlzfSxleHBhbmRCeVNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLm1pbi5hZGRTY2FsYXIoLWEpO3RoaXMubWF4LmFkZFNjYWxhcihhKTtyZXR1cm4gdGhpc30sZXhwYW5kQnlPYmplY3Q6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3ZhciBmPWEuZ2VvbWV0cnk7aWYodm9pZCAwIT09ZilpZihmLmlzR2VvbWV0cnkpZm9yKGY9XG5mLnZlcnRpY2VzLGM9MCxkPWYubGVuZ3RoO2M8ZDtjKyspZS5jb3B5KGZbY10pLGUuYXBwbHlNYXRyaXg0KGEubWF0cml4V29ybGQpLGIuZXhwYW5kQnlQb2ludChlKTtlbHNlIGlmKGYuaXNCdWZmZXJHZW9tZXRyeSYmKGY9Zi5hdHRyaWJ1dGVzLnBvc2l0aW9uLHZvaWQgMCE9PWYpKWZvcihjPTAsZD1mLmNvdW50O2M8ZDtjKyspZS5mcm9tQnVmZmVyQXR0cmlidXRlKGYsYykuYXBwbHlNYXRyaXg0KGEubWF0cml4V29ybGQpLGIuZXhwYW5kQnlQb2ludChlKX12YXIgYixjLGQsZT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYyl7Yj10aGlzO2MudXBkYXRlTWF0cml4V29ybGQoITApO2MudHJhdmVyc2UoYSk7cmV0dXJuIHRoaXN9fSgpLGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEueDx0aGlzLm1pbi54fHxhLng+dGhpcy5tYXgueHx8YS55PHRoaXMubWluLnl8fGEueT50aGlzLm1heC55fHxhLno8dGhpcy5taW4uenx8YS56PnRoaXMubWF4Lno/ITE6ITB9LGNvbnRhaW5zQm94OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1pbi54PD1cbmEubWluLngmJmEubWF4Lng8PXRoaXMubWF4LngmJnRoaXMubWluLnk8PWEubWluLnkmJmEubWF4Lnk8PXRoaXMubWF4LnkmJnRoaXMubWluLno8PWEubWluLnomJmEubWF4Lno8PXRoaXMubWF4Lnp9LGdldFBhcmFtZXRlcjpmdW5jdGlvbihhLGIpe3JldHVybihifHxuZXcgcCkuc2V0KChhLngtdGhpcy5taW4ueCkvKHRoaXMubWF4LngtdGhpcy5taW4ueCksKGEueS10aGlzLm1pbi55KS8odGhpcy5tYXgueS10aGlzLm1pbi55KSwoYS56LXRoaXMubWluLnopLyh0aGlzLm1heC56LXRoaXMubWluLnopKX0saW50ZXJzZWN0c0JveDpmdW5jdGlvbihhKXtyZXR1cm4gYS5tYXgueDx0aGlzLm1pbi54fHxhLm1pbi54PnRoaXMubWF4Lnh8fGEubWF4Lnk8dGhpcy5taW4ueXx8YS5taW4ueT50aGlzLm1heC55fHxhLm1heC56PHRoaXMubWluLnp8fGEubWluLno+dGhpcy5tYXguej8hMTohMH0saW50ZXJzZWN0c1NwaGVyZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBwO3JldHVybiBmdW5jdGlvbihiKXt0aGlzLmNsYW1wUG9pbnQoYi5jZW50ZXIsXG5hKTtyZXR1cm4gYS5kaXN0YW5jZVRvU3F1YXJlZChiLmNlbnRlcik8PWIucmFkaXVzKmIucmFkaXVzfX0oKSxpbnRlcnNlY3RzUGxhbmU6ZnVuY3Rpb24oYSl7aWYoMDxhLm5vcm1hbC54KXt2YXIgYj1hLm5vcm1hbC54KnRoaXMubWluLng7dmFyIGM9YS5ub3JtYWwueCp0aGlzLm1heC54fWVsc2UgYj1hLm5vcm1hbC54KnRoaXMubWF4LngsYz1hLm5vcm1hbC54KnRoaXMubWluLng7MDxhLm5vcm1hbC55PyhiKz1hLm5vcm1hbC55KnRoaXMubWluLnksYys9YS5ub3JtYWwueSp0aGlzLm1heC55KTooYis9YS5ub3JtYWwueSp0aGlzLm1heC55LGMrPWEubm9ybWFsLnkqdGhpcy5taW4ueSk7MDxhLm5vcm1hbC56PyhiKz1hLm5vcm1hbC56KnRoaXMubWluLnosYys9YS5ub3JtYWwueip0aGlzLm1heC56KTooYis9YS5ub3JtYWwueip0aGlzLm1heC56LGMrPWEubm9ybWFsLnoqdGhpcy5taW4ueik7cmV0dXJuIGI8PWEuY29uc3RhbnQmJmM+PWEuY29uc3RhbnR9LGNsYW1wUG9pbnQ6ZnVuY3Rpb24oYSxcbmIpe3JldHVybihifHxuZXcgcCkuY29weShhKS5jbGFtcCh0aGlzLm1pbix0aGlzLm1heCl9LGRpc3RhbmNlVG9Qb2ludDpmdW5jdGlvbigpe3ZhciBhPW5ldyBwO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYS5jb3B5KGIpLmNsYW1wKHRoaXMubWluLHRoaXMubWF4KS5zdWIoYikubGVuZ3RoKCl9fSgpLGdldEJvdW5kaW5nU3BoZXJlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGIpe2I9Ynx8bmV3IElhO3RoaXMuZ2V0Q2VudGVyKGIuY2VudGVyKTtiLnJhZGl1cz0uNSp0aGlzLmdldFNpemUoYSkubGVuZ3RoKCk7cmV0dXJuIGJ9fSgpLGludGVyc2VjdDpmdW5jdGlvbihhKXt0aGlzLm1pbi5tYXgoYS5taW4pO3RoaXMubWF4Lm1pbihhLm1heCk7dGhpcy5pc0VtcHR5KCkmJnRoaXMubWFrZUVtcHR5KCk7cmV0dXJuIHRoaXN9LHVuaW9uOmZ1bmN0aW9uKGEpe3RoaXMubWluLm1pbihhLm1pbik7dGhpcy5tYXgubWF4KGEubWF4KTtyZXR1cm4gdGhpc30sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKCl7dmFyIGE9XG5bbmV3IHAsbmV3IHAsbmV3IHAsbmV3IHAsbmV3IHAsbmV3IHAsbmV3IHAsbmV3IHBdO3JldHVybiBmdW5jdGlvbihiKXtpZih0aGlzLmlzRW1wdHkoKSlyZXR1cm4gdGhpczthWzBdLnNldCh0aGlzLm1pbi54LHRoaXMubWluLnksdGhpcy5taW4ueikuYXBwbHlNYXRyaXg0KGIpO2FbMV0uc2V0KHRoaXMubWluLngsdGhpcy5taW4ueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQoYik7YVsyXS5zZXQodGhpcy5taW4ueCx0aGlzLm1heC55LHRoaXMubWluLnopLmFwcGx5TWF0cml4NChiKTthWzNdLnNldCh0aGlzLm1pbi54LHRoaXMubWF4LnksdGhpcy5tYXgueikuYXBwbHlNYXRyaXg0KGIpO2FbNF0uc2V0KHRoaXMubWF4LngsdGhpcy5taW4ueSx0aGlzLm1pbi56KS5hcHBseU1hdHJpeDQoYik7YVs1XS5zZXQodGhpcy5tYXgueCx0aGlzLm1pbi55LHRoaXMubWF4LnopLmFwcGx5TWF0cml4NChiKTthWzZdLnNldCh0aGlzLm1heC54LHRoaXMubWF4LnksdGhpcy5taW4ueikuYXBwbHlNYXRyaXg0KGIpO1xuYVs3XS5zZXQodGhpcy5tYXgueCx0aGlzLm1heC55LHRoaXMubWF4LnopLmFwcGx5TWF0cml4NChiKTt0aGlzLnNldEZyb21Qb2ludHMoYSk7cmV0dXJuIHRoaXN9fSgpLHRyYW5zbGF0ZTpmdW5jdGlvbihhKXt0aGlzLm1pbi5hZGQoYSk7dGhpcy5tYXguYWRkKGEpO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubWluLmVxdWFscyh0aGlzLm1pbikmJmEubWF4LmVxdWFscyh0aGlzLm1heCl9fSk7T2JqZWN0LmFzc2lnbihJYS5wcm90b3R5cGUse3NldDpmdW5jdGlvbihhLGIpe3RoaXMuY2VudGVyLmNvcHkoYSk7dGhpcy5yYWRpdXM9YjtyZXR1cm4gdGhpc30sc2V0RnJvbVBvaW50czpmdW5jdGlvbigpe3ZhciBhPW5ldyBYYTtyZXR1cm4gZnVuY3Rpb24oYixjKXt2YXIgZD10aGlzLmNlbnRlcjt2b2lkIDAhPT1jP2QuY29weShjKTphLnNldEZyb21Qb2ludHMoYikuZ2V0Q2VudGVyKGQpO2Zvcih2YXIgZT1jPTAsZj1iLmxlbmd0aDtlPGY7ZSsrKWM9TWF0aC5tYXgoYyxcbmQuZGlzdGFuY2VUb1NxdWFyZWQoYltlXSkpO3RoaXMucmFkaXVzPU1hdGguc3FydChjKTtyZXR1cm4gdGhpc319KCksY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5jZW50ZXIuY29weShhLmNlbnRlcik7dGhpcy5yYWRpdXM9YS5yYWRpdXM7cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIDA+PXRoaXMucmFkaXVzfSxjb250YWluc1BvaW50OmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc3RhbmNlVG9TcXVhcmVkKHRoaXMuY2VudGVyKTw9dGhpcy5yYWRpdXMqdGhpcy5yYWRpdXN9LGRpc3RhbmNlVG9Qb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXN0YW5jZVRvKHRoaXMuY2VudGVyKS10aGlzLnJhZGl1c30saW50ZXJzZWN0c1NwaGVyZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnJhZGl1cythLnJhZGl1cztyZXR1cm4gYS5jZW50ZXIuZGlzdGFuY2VUb1NxdWFyZWQodGhpcy5jZW50ZXIpPD1cbmIqYn0saW50ZXJzZWN0c0JveDpmdW5jdGlvbihhKXtyZXR1cm4gYS5pbnRlcnNlY3RzU3BoZXJlKHRoaXMpfSxpbnRlcnNlY3RzUGxhbmU6ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGguYWJzKGEuZGlzdGFuY2VUb1BvaW50KHRoaXMuY2VudGVyKSk8PXRoaXMucmFkaXVzfSxjbGFtcFBvaW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jZW50ZXIuZGlzdGFuY2VUb1NxdWFyZWQoYSk7Yj1ifHxuZXcgcDtiLmNvcHkoYSk7Yz50aGlzLnJhZGl1cyp0aGlzLnJhZGl1cyYmKGIuc3ViKHRoaXMuY2VudGVyKS5ub3JtYWxpemUoKSxiLm11bHRpcGx5U2NhbGFyKHRoaXMucmFkaXVzKS5hZGQodGhpcy5jZW50ZXIpKTtyZXR1cm4gYn0sZ2V0Qm91bmRpbmdCb3g6ZnVuY3Rpb24oYSl7YT1hfHxuZXcgWGE7YS5zZXQodGhpcy5jZW50ZXIsdGhpcy5jZW50ZXIpO2EuZXhwYW5kQnlTY2FsYXIodGhpcy5yYWRpdXMpO3JldHVybiBhfSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oYSl7dGhpcy5jZW50ZXIuYXBwbHlNYXRyaXg0KGEpO1xudGhpcy5yYWRpdXMqPWEuZ2V0TWF4U2NhbGVPbkF4aXMoKTtyZXR1cm4gdGhpc30sdHJhbnNsYXRlOmZ1bmN0aW9uKGEpe3RoaXMuY2VudGVyLmFkZChhKTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNlbnRlci5lcXVhbHModGhpcy5jZW50ZXIpJiZhLnJhZGl1cz09PXRoaXMucmFkaXVzfX0pO09iamVjdC5hc3NpZ24oRWEucHJvdG90eXBlLHtzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLm5vcm1hbC5jb3B5KGEpO3RoaXMuY29uc3RhbnQ9YjtyZXR1cm4gdGhpc30sc2V0Q29tcG9uZW50czpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLm5vcm1hbC5zZXQoYSxiLGMpO3RoaXMuY29uc3RhbnQ9ZDtyZXR1cm4gdGhpc30sc2V0RnJvbU5vcm1hbEFuZENvcGxhbmFyUG9pbnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLm5vcm1hbC5jb3B5KGEpO3RoaXMuY29uc3RhbnQ9LWIuZG90KHRoaXMubm9ybWFsKTtyZXR1cm4gdGhpc30sc2V0RnJvbUNvcGxhbmFyUG9pbnRzOmZ1bmN0aW9uKCl7dmFyIGE9XG5uZXcgcCxiPW5ldyBwO3JldHVybiBmdW5jdGlvbihjLGQsZSl7ZD1hLnN1YlZlY3RvcnMoZSxkKS5jcm9zcyhiLnN1YlZlY3RvcnMoYyxkKSkubm9ybWFsaXplKCk7dGhpcy5zZXRGcm9tTm9ybWFsQW5kQ29wbGFuYXJQb2ludChkLGMpO3JldHVybiB0aGlzfX0oKSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihhKXt0aGlzLm5vcm1hbC5jb3B5KGEubm9ybWFsKTt0aGlzLmNvbnN0YW50PWEuY29uc3RhbnQ7cmV0dXJuIHRoaXN9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe3ZhciBhPTEvdGhpcy5ub3JtYWwubGVuZ3RoKCk7dGhpcy5ub3JtYWwubXVsdGlwbHlTY2FsYXIoYSk7dGhpcy5jb25zdGFudCo9YTtyZXR1cm4gdGhpc30sbmVnYXRlOmZ1bmN0aW9uKCl7dGhpcy5jb25zdGFudCo9LTE7dGhpcy5ub3JtYWwubmVnYXRlKCk7cmV0dXJuIHRoaXN9LGRpc3RhbmNlVG9Qb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5ub3JtYWwuZG90KGEpK1xudGhpcy5jb25zdGFudH0sZGlzdGFuY2VUb1NwaGVyZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kaXN0YW5jZVRvUG9pbnQoYS5jZW50ZXIpLWEucmFkaXVzfSxwcm9qZWN0UG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYnx8bmV3IHApLmNvcHkodGhpcy5ub3JtYWwpLm11bHRpcGx5U2NhbGFyKC10aGlzLmRpc3RhbmNlVG9Qb2ludChhKSkuYWRkKGEpfSxpbnRlcnNlY3RMaW5lOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7Yz1jfHxuZXcgcDt2YXIgZD1iLmRlbHRhKGEpLGU9dGhpcy5ub3JtYWwuZG90KGQpO2lmKDA9PT1lKXtpZigwPT09dGhpcy5kaXN0YW5jZVRvUG9pbnQoYi5zdGFydCkpcmV0dXJuIGMuY29weShiLnN0YXJ0KX1lbHNlIGlmKGU9LShiLnN0YXJ0LmRvdCh0aGlzLm5vcm1hbCkrdGhpcy5jb25zdGFudCkvZSwhKDA+ZXx8MTxlKSlyZXR1cm4gYy5jb3B5KGQpLm11bHRpcGx5U2NhbGFyKGUpLmFkZChiLnN0YXJ0KX19KCksaW50ZXJzZWN0c0xpbmU6ZnVuY3Rpb24oYSl7dmFyIGI9XG50aGlzLmRpc3RhbmNlVG9Qb2ludChhLnN0YXJ0KTthPXRoaXMuZGlzdGFuY2VUb1BvaW50KGEuZW5kKTtyZXR1cm4gMD5iJiYwPGF8fDA+YSYmMDxifSxpbnRlcnNlY3RzQm94OmZ1bmN0aW9uKGEpe3JldHVybiBhLmludGVyc2VjdHNQbGFuZSh0aGlzKX0saW50ZXJzZWN0c1NwaGVyZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5pbnRlcnNlY3RzUGxhbmUodGhpcyl9LGNvcGxhbmFyUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fG5ldyBwKS5jb3B5KHRoaXMubm9ybWFsKS5tdWx0aXBseVNjYWxhcigtdGhpcy5jb25zdGFudCl9LGFwcGx5TWF0cml4NDpmdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI9bmV3IG1hO3JldHVybiBmdW5jdGlvbihjLGQpe2Q9ZHx8Yi5nZXROb3JtYWxNYXRyaXgoYyk7Yz10aGlzLmNvcGxhbmFyUG9pbnQoYSkuYXBwbHlNYXRyaXg0KGMpO2Q9dGhpcy5ub3JtYWwuYXBwbHlNYXRyaXgzKGQpLm5vcm1hbGl6ZSgpO3RoaXMuY29uc3RhbnQ9LWMuZG90KGQpO3JldHVybiB0aGlzfX0oKSxcbnRyYW5zbGF0ZTpmdW5jdGlvbihhKXt0aGlzLmNvbnN0YW50LT1hLmRvdCh0aGlzLm5vcm1hbCk7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5ub3JtYWwuZXF1YWxzKHRoaXMubm9ybWFsKSYmYS5jb25zdGFudD09PXRoaXMuY29uc3RhbnR9fSk7T2JqZWN0LmFzc2lnbihyZC5wcm90b3R5cGUse3NldDpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9dGhpcy5wbGFuZXM7Z1swXS5jb3B5KGEpO2dbMV0uY29weShiKTtnWzJdLmNvcHkoYyk7Z1szXS5jb3B5KGQpO2dbNF0uY29weShlKTtnWzVdLmNvcHkoZik7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLnBsYW5lcyxjPTA7Nj5jO2MrKyliW2NdLmNvcHkoYS5wbGFuZXNbY10pO3JldHVybiB0aGlzfSxzZXRGcm9tTWF0cml4OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGxhbmVzLFxuYz1hLmVsZW1lbnRzO2E9Y1swXTt2YXIgZD1jWzFdLGU9Y1syXSxmPWNbM10sZz1jWzRdLGg9Y1s1XSxrPWNbNl0sbT1jWzddLHE9Y1s4XSxsPWNbOV0scD1jWzEwXSxyPWNbMTFdLHQ9Y1sxMl0sdj1jWzEzXSx3PWNbMTRdLGM9Y1sxNV07YlswXS5zZXRDb21wb25lbnRzKGYtYSxtLWcsci1xLGMtdCkubm9ybWFsaXplKCk7YlsxXS5zZXRDb21wb25lbnRzKGYrYSxtK2cscitxLGMrdCkubm9ybWFsaXplKCk7YlsyXS5zZXRDb21wb25lbnRzKGYrZCxtK2gscitsLGMrdikubm9ybWFsaXplKCk7YlszXS5zZXRDb21wb25lbnRzKGYtZCxtLWgsci1sLGMtdikubm9ybWFsaXplKCk7Yls0XS5zZXRDb21wb25lbnRzKGYtZSxtLWssci1wLGMtdykubm9ybWFsaXplKCk7Yls1XS5zZXRDb21wb25lbnRzKGYrZSxtK2sscitwLGMrdykubm9ybWFsaXplKCk7cmV0dXJuIHRoaXN9LGludGVyc2VjdHNPYmplY3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgSWE7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPVxuYi5nZW9tZXRyeTtudWxsPT09Yy5ib3VuZGluZ1NwaGVyZSYmYy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTthLmNvcHkoYy5ib3VuZGluZ1NwaGVyZSkuYXBwbHlNYXRyaXg0KGIubWF0cml4V29ybGQpO3JldHVybiB0aGlzLmludGVyc2VjdHNTcGhlcmUoYSl9fSgpLGludGVyc2VjdHNTcHJpdGU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgSWE7cmV0dXJuIGZ1bmN0aW9uKGIpe2EuY2VudGVyLnNldCgwLDAsMCk7YS5yYWRpdXM9LjcwNzEwNjc4MTE4NjU0NzY7YS5hcHBseU1hdHJpeDQoYi5tYXRyaXhXb3JsZCk7cmV0dXJuIHRoaXMuaW50ZXJzZWN0c1NwaGVyZShhKX19KCksaW50ZXJzZWN0c1NwaGVyZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnBsYW5lcyxjPWEuY2VudGVyO2E9LWEucmFkaXVzO2Zvcih2YXIgZD0wOzY+ZDtkKyspaWYoYltkXS5kaXN0YW5jZVRvUG9pbnQoYyk8YSlyZXR1cm4hMTtyZXR1cm4hMH0saW50ZXJzZWN0c0JveDpmdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI9XG5uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYyl7Zm9yKHZhciBkPXRoaXMucGxhbmVzLGU9MDs2PmU7ZSsrKXt2YXIgZj1kW2VdO2EueD0wPGYubm9ybWFsLng/Yy5taW4ueDpjLm1heC54O2IueD0wPGYubm9ybWFsLng/Yy5tYXgueDpjLm1pbi54O2EueT0wPGYubm9ybWFsLnk/Yy5taW4ueTpjLm1heC55O2IueT0wPGYubm9ybWFsLnk/Yy5tYXgueTpjLm1pbi55O2Euej0wPGYubm9ybWFsLno/Yy5taW4uejpjLm1heC56O2Iuej0wPGYubm9ybWFsLno/Yy5tYXguejpjLm1pbi56O3ZhciBnPWYuZGlzdGFuY2VUb1BvaW50KGEpLGY9Zi5kaXN0YW5jZVRvUG9pbnQoYik7aWYoMD5nJiYwPmYpcmV0dXJuITF9cmV0dXJuITB9fSgpLGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMucGxhbmVzLGM9MDs2PmM7YysrKWlmKDA+YltjXS5kaXN0YW5jZVRvUG9pbnQoYSkpcmV0dXJuITE7cmV0dXJuITB9fSk7Z2IuUm90YXRpb25PcmRlcnM9XCJYWVogWVpYIFpYWSBYWlkgWVhaIFpZWFwiLnNwbGl0KFwiIFwiKTtcbmdiLkRlZmF1bHRPcmRlcj1cIlhZWlwiO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGdiLnByb3RvdHlwZSx7eDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3h9LHNldDpmdW5jdGlvbihhKXt0aGlzLl94PWE7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCl9fSx5OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5feX0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMuX3k9YTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKX19LHo6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl96fSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5fej1hO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpfX0sb3JkZXI6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmRlcn0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMuX29yZGVyPWE7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCl9fX0pO09iamVjdC5hc3NpZ24oZ2IucHJvdG90eXBlLHtpc0V1bGVyOiEwLHNldDpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLl94PWE7dGhpcy5feT1iO3RoaXMuX3o9XG5jO3RoaXMuX29yZGVyPWR8fHRoaXMuX29yZGVyO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLl94LHRoaXMuX3ksdGhpcy5feix0aGlzLl9vcmRlcil9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5feD1hLl94O3RoaXMuX3k9YS5feTt0aGlzLl96PWEuX3o7dGhpcy5fb3JkZXI9YS5fb3JkZXI7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LHNldEZyb21Sb3RhdGlvbk1hdHJpeDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9US5jbGFtcCxlPWEuZWxlbWVudHM7YT1lWzBdO3ZhciBmPWVbNF0sZz1lWzhdLGg9ZVsxXSxrPWVbNV0sbT1lWzldLGw9ZVsyXSxuPWVbNl0sZT1lWzEwXTtiPWJ8fHRoaXMuX29yZGVyO1wiWFlaXCI9PT1iPyh0aGlzLl95PU1hdGguYXNpbihkKGcsLTEsMSkpLC45OTk5OT5NYXRoLmFicyhnKT8odGhpcy5feD1NYXRoLmF0YW4yKC1tLGUpLHRoaXMuX3o9XG5NYXRoLmF0YW4yKC1mLGEpKToodGhpcy5feD1NYXRoLmF0YW4yKG4sayksdGhpcy5fej0wKSk6XCJZWFpcIj09PWI/KHRoaXMuX3g9TWF0aC5hc2luKC1kKG0sLTEsMSkpLC45OTk5OT5NYXRoLmFicyhtKT8odGhpcy5feT1NYXRoLmF0YW4yKGcsZSksdGhpcy5fej1NYXRoLmF0YW4yKGgsaykpOih0aGlzLl95PU1hdGguYXRhbjIoLWwsYSksdGhpcy5fej0wKSk6XCJaWFlcIj09PWI/KHRoaXMuX3g9TWF0aC5hc2luKGQobiwtMSwxKSksLjk5OTk5Pk1hdGguYWJzKG4pPyh0aGlzLl95PU1hdGguYXRhbjIoLWwsZSksdGhpcy5fej1NYXRoLmF0YW4yKC1mLGspKToodGhpcy5feT0wLHRoaXMuX3o9TWF0aC5hdGFuMihoLGEpKSk6XCJaWVhcIj09PWI/KHRoaXMuX3k9TWF0aC5hc2luKC1kKGwsLTEsMSkpLC45OTk5OT5NYXRoLmFicyhsKT8odGhpcy5feD1NYXRoLmF0YW4yKG4sZSksdGhpcy5fej1NYXRoLmF0YW4yKGgsYSkpOih0aGlzLl94PTAsdGhpcy5fej1NYXRoLmF0YW4yKC1mLGspKSk6XCJZWlhcIj09PVxuYj8odGhpcy5fej1NYXRoLmFzaW4oZChoLC0xLDEpKSwuOTk5OTk+TWF0aC5hYnMoaCk/KHRoaXMuX3g9TWF0aC5hdGFuMigtbSxrKSx0aGlzLl95PU1hdGguYXRhbjIoLWwsYSkpOih0aGlzLl94PTAsdGhpcy5feT1NYXRoLmF0YW4yKGcsZSkpKTpcIlhaWVwiPT09Yj8odGhpcy5fej1NYXRoLmFzaW4oLWQoZiwtMSwxKSksLjk5OTk5Pk1hdGguYWJzKGYpPyh0aGlzLl94PU1hdGguYXRhbjIobixrKSx0aGlzLl95PU1hdGguYXRhbjIoZyxhKSk6KHRoaXMuX3g9TWF0aC5hdGFuMigtbSxlKSx0aGlzLl95PTApKTpjb25zb2xlLndhcm4oXCJUSFJFRS5FdWxlcjogLnNldEZyb21Sb3RhdGlvbk1hdHJpeCgpIGdpdmVuIHVuc3VwcG9ydGVkIG9yZGVyOiBcIitiKTt0aGlzLl9vcmRlcj1iO2lmKCExIT09Yyl0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sc2V0RnJvbVF1YXRlcm5pb246ZnVuY3Rpb24oKXt2YXIgYT1uZXcgTztyZXR1cm4gZnVuY3Rpb24oYixjLGQpe2EubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24oYik7XG5yZXR1cm4gdGhpcy5zZXRGcm9tUm90YXRpb25NYXRyaXgoYSxjLGQpfX0oKSxzZXRGcm9tVmVjdG9yMzpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnNldChhLngsYS55LGEueixifHx0aGlzLl9vcmRlcil9LHJlb3JkZXI6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgaGE7cmV0dXJuIGZ1bmN0aW9uKGIpe2Euc2V0RnJvbUV1bGVyKHRoaXMpO3JldHVybiB0aGlzLnNldEZyb21RdWF0ZXJuaW9uKGEsYil9fSgpLGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5feD09PXRoaXMuX3gmJmEuX3k9PT10aGlzLl95JiZhLl96PT09dGhpcy5feiYmYS5fb3JkZXI9PT10aGlzLl9vcmRlcn0sZnJvbUFycmF5OmZ1bmN0aW9uKGEpe3RoaXMuX3g9YVswXTt0aGlzLl95PWFbMV07dGhpcy5fej1hWzJdO3ZvaWQgMCE9PWFbM10mJih0aGlzLl9vcmRlcj1hWzNdKTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sdG9BcnJheTpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWEmJihhPVtdKTtcbnZvaWQgMD09PWImJihiPTApO2FbYl09dGhpcy5feDthW2IrMV09dGhpcy5feTthW2IrMl09dGhpcy5fejthW2IrM109dGhpcy5fb3JkZXI7cmV0dXJuIGF9LHRvVmVjdG9yMzpmdW5jdGlvbihhKXtyZXR1cm4gYT9hLnNldCh0aGlzLl94LHRoaXMuX3ksdGhpcy5feik6bmV3IHAodGhpcy5feCx0aGlzLl95LHRoaXMuX3opfSxvbkNoYW5nZTpmdW5jdGlvbihhKXt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2s9YTtyZXR1cm4gdGhpc30sb25DaGFuZ2VDYWxsYmFjazpmdW5jdGlvbigpe319KTtPYmplY3QuYXNzaWduKFdkLnByb3RvdHlwZSx7c2V0OmZ1bmN0aW9uKGEpe3RoaXMubWFzaz0xPDxhfDB9LGVuYWJsZTpmdW5jdGlvbihhKXt0aGlzLm1hc2s9dGhpcy5tYXNrfDE8PGF8MH0sdG9nZ2xlOmZ1bmN0aW9uKGEpe3RoaXMubWFza149MTw8YXwwfSxkaXNhYmxlOmZ1bmN0aW9uKGEpe3RoaXMubWFzayY9figxPDxhfDApfSx0ZXN0OmZ1bmN0aW9uKGEpe3JldHVybiAwIT09KHRoaXMubWFzayZcbmEubWFzayl9fSk7dmFyIGNnPTA7eC5EZWZhdWx0VXA9bmV3IHAoMCwxLDApO3guRGVmYXVsdE1hdHJpeEF1dG9VcGRhdGU9ITA7eC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHphLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOngsaXNPYmplY3QzRDohMCxvbkJlZm9yZVJlbmRlcjpmdW5jdGlvbigpe30sb25BZnRlclJlbmRlcjpmdW5jdGlvbigpe30sYXBwbHlNYXRyaXg6ZnVuY3Rpb24oYSl7dGhpcy5tYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhhLHRoaXMubWF0cml4KTt0aGlzLm1hdHJpeC5kZWNvbXBvc2UodGhpcy5wb3NpdGlvbix0aGlzLnF1YXRlcm5pb24sdGhpcy5zY2FsZSl9LGFwcGx5UXVhdGVybmlvbjpmdW5jdGlvbihhKXt0aGlzLnF1YXRlcm5pb24ucHJlbXVsdGlwbHkoYSk7cmV0dXJuIHRoaXN9LHNldFJvdGF0aW9uRnJvbUF4aXNBbmdsZTpmdW5jdGlvbihhLGIpe3RoaXMucXVhdGVybmlvbi5zZXRGcm9tQXhpc0FuZ2xlKGEsYil9LHNldFJvdGF0aW9uRnJvbUV1bGVyOmZ1bmN0aW9uKGEpe3RoaXMucXVhdGVybmlvbi5zZXRGcm9tRXVsZXIoYSxcbiEwKX0sc2V0Um90YXRpb25Gcm9tTWF0cml4OmZ1bmN0aW9uKGEpe3RoaXMucXVhdGVybmlvbi5zZXRGcm9tUm90YXRpb25NYXRyaXgoYSl9LHNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb246ZnVuY3Rpb24oYSl7dGhpcy5xdWF0ZXJuaW9uLmNvcHkoYSl9LHJvdGF0ZU9uQXhpczpmdW5jdGlvbigpe3ZhciBhPW5ldyBoYTtyZXR1cm4gZnVuY3Rpb24oYixjKXthLnNldEZyb21BeGlzQW5nbGUoYixjKTt0aGlzLnF1YXRlcm5pb24ubXVsdGlwbHkoYSk7cmV0dXJuIHRoaXN9fSgpLHJvdGF0ZU9uV29ybGRBeGlzOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IGhhO3JldHVybiBmdW5jdGlvbihiLGMpe2Euc2V0RnJvbUF4aXNBbmdsZShiLGMpO3RoaXMucXVhdGVybmlvbi5wcmVtdWx0aXBseShhKTtyZXR1cm4gdGhpc319KCkscm90YXRlWDpmdW5jdGlvbigpe3ZhciBhPW5ldyBwKDEsMCwwKTtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMucm90YXRlT25BeGlzKGEsYil9fSgpLHJvdGF0ZVk6ZnVuY3Rpb24oKXt2YXIgYT1cbm5ldyBwKDAsMSwwKTtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMucm90YXRlT25BeGlzKGEsYil9fSgpLHJvdGF0ZVo6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCgwLDAsMSk7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnJvdGF0ZU9uQXhpcyhhLGIpfX0oKSx0cmFuc2xhdGVPbkF4aXM6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYixjKXthLmNvcHkoYikuYXBwbHlRdWF0ZXJuaW9uKHRoaXMucXVhdGVybmlvbik7dGhpcy5wb3NpdGlvbi5hZGQoYS5tdWx0aXBseVNjYWxhcihjKSk7cmV0dXJuIHRoaXN9fSgpLHRyYW5zbGF0ZVg6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCgxLDAsMCk7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnRyYW5zbGF0ZU9uQXhpcyhhLGIpfX0oKSx0cmFuc2xhdGVZOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAoMCwxLDApO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy50cmFuc2xhdGVPbkF4aXMoYSxcbmIpfX0oKSx0cmFuc2xhdGVaOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAoMCwwLDEpO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy50cmFuc2xhdGVPbkF4aXMoYSxiKX19KCksbG9jYWxUb1dvcmxkOmZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKX0sd29ybGRUb0xvY2FsOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE87cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBiLmFwcGx5TWF0cml4NChhLmdldEludmVyc2UodGhpcy5tYXRyaXhXb3JsZCkpfX0oKSxsb29rQXQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgTyxiPW5ldyBwO3JldHVybiBmdW5jdGlvbihjLGQsZSl7Yy5pc1ZlY3RvcjM/Yi5jb3B5KGMpOmIuc2V0KGMsZCxlKTt0aGlzLmlzQ2FtZXJhP2EubG9va0F0KHRoaXMucG9zaXRpb24sYix0aGlzLnVwKTphLmxvb2tBdChiLHRoaXMucG9zaXRpb24sdGhpcy51cCk7dGhpcy5xdWF0ZXJuaW9uLnNldEZyb21Sb3RhdGlvbk1hdHJpeChhKX19KCksXG5hZGQ6ZnVuY3Rpb24oYSl7aWYoMTxhcmd1bWVudHMubGVuZ3RoKXtmb3IodmFyIGI9MDtiPGFyZ3VtZW50cy5sZW5ndGg7YisrKXRoaXMuYWRkKGFyZ3VtZW50c1tiXSk7cmV0dXJuIHRoaXN9aWYoYT09PXRoaXMpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5PYmplY3QzRC5hZGQ6IG9iamVjdCBjYW4ndCBiZSBhZGRlZCBhcyBhIGNoaWxkIG9mIGl0c2VsZi5cIixhKSx0aGlzO2EmJmEuaXNPYmplY3QzRD8obnVsbCE9PWEucGFyZW50JiZhLnBhcmVudC5yZW1vdmUoYSksYS5wYXJlbnQ9dGhpcyxhLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJhZGRlZFwifSksdGhpcy5jaGlsZHJlbi5wdXNoKGEpKTpjb25zb2xlLmVycm9yKFwiVEhSRUUuT2JqZWN0M0QuYWRkOiBvYmplY3Qgbm90IGFuIGluc3RhbmNlIG9mIFRIUkVFLk9iamVjdDNELlwiLGEpO3JldHVybiB0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oYSl7aWYoMTxhcmd1bWVudHMubGVuZ3RoKXtmb3IodmFyIGI9MDtiPGFyZ3VtZW50cy5sZW5ndGg7YisrKXRoaXMucmVtb3ZlKGFyZ3VtZW50c1tiXSk7XG5yZXR1cm4gdGhpc31iPXRoaXMuY2hpbGRyZW4uaW5kZXhPZihhKTstMSE9PWImJihhLnBhcmVudD1udWxsLGEuZGlzcGF0Y2hFdmVudCh7dHlwZTpcInJlbW92ZWRcIn0pLHRoaXMuY2hpbGRyZW4uc3BsaWNlKGIsMSkpO3JldHVybiB0aGlzfSxnZXRPYmplY3RCeUlkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldE9iamVjdEJ5UHJvcGVydHkoXCJpZFwiLGEpfSxnZXRPYmplY3RCeU5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0T2JqZWN0QnlQcm9wZXJ0eShcIm5hbWVcIixhKX0sZ2V0T2JqZWN0QnlQcm9wZXJ0eTpmdW5jdGlvbihhLGIpe2lmKHRoaXNbYV09PT1iKXJldHVybiB0aGlzO2Zvcih2YXIgYz0wLGQ9dGhpcy5jaGlsZHJlbi5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9dGhpcy5jaGlsZHJlbltjXS5nZXRPYmplY3RCeVByb3BlcnR5KGEsYik7aWYodm9pZCAwIT09ZSlyZXR1cm4gZX19LGdldFdvcmxkUG9zaXRpb246ZnVuY3Rpb24oYSl7YT1hfHxuZXcgcDt0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkKCEwKTtcbnJldHVybiBhLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLm1hdHJpeFdvcmxkKX0sZ2V0V29ybGRRdWF0ZXJuaW9uOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAsYj1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYyl7Yz1jfHxuZXcgaGE7dGhpcy51cGRhdGVNYXRyaXhXb3JsZCghMCk7dGhpcy5tYXRyaXhXb3JsZC5kZWNvbXBvc2UoYSxjLGIpO3JldHVybiBjfX0oKSxnZXRXb3JsZFJvdGF0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IGhhO3JldHVybiBmdW5jdGlvbihiKXtiPWJ8fG5ldyBnYjt0aGlzLmdldFdvcmxkUXVhdGVybmlvbihhKTtyZXR1cm4gYi5zZXRGcm9tUXVhdGVybmlvbihhLHRoaXMucm90YXRpb24ub3JkZXIsITEpfX0oKSxnZXRXb3JsZFNjYWxlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAsYj1uZXcgaGE7cmV0dXJuIGZ1bmN0aW9uKGMpe2M9Y3x8bmV3IHA7dGhpcy51cGRhdGVNYXRyaXhXb3JsZCghMCk7dGhpcy5tYXRyaXhXb3JsZC5kZWNvbXBvc2UoYSxiLGMpO3JldHVybiBjfX0oKSxcbmdldFdvcmxkRGlyZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IGhhO3JldHVybiBmdW5jdGlvbihiKXtiPWJ8fG5ldyBwO3RoaXMuZ2V0V29ybGRRdWF0ZXJuaW9uKGEpO3JldHVybiBiLnNldCgwLDAsMSkuYXBwbHlRdWF0ZXJuaW9uKGEpfX0oKSxyYXljYXN0OmZ1bmN0aW9uKCl7fSx0cmF2ZXJzZTpmdW5jdGlvbihhKXthKHRoaXMpO2Zvcih2YXIgYj10aGlzLmNoaWxkcmVuLGM9MCxkPWIubGVuZ3RoO2M8ZDtjKyspYltjXS50cmF2ZXJzZShhKX0sdHJhdmVyc2VWaXNpYmxlOmZ1bmN0aW9uKGEpe2lmKCExIT09dGhpcy52aXNpYmxlKXthKHRoaXMpO2Zvcih2YXIgYj10aGlzLmNoaWxkcmVuLGM9MCxkPWIubGVuZ3RoO2M8ZDtjKyspYltjXS50cmF2ZXJzZVZpc2libGUoYSl9fSx0cmF2ZXJzZUFuY2VzdG9yczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnBhcmVudDtudWxsIT09YiYmKGEoYiksYi50cmF2ZXJzZUFuY2VzdG9ycyhhKSl9LHVwZGF0ZU1hdHJpeDpmdW5jdGlvbigpe3RoaXMubWF0cml4LmNvbXBvc2UodGhpcy5wb3NpdGlvbixcbnRoaXMucXVhdGVybmlvbix0aGlzLnNjYWxlKTt0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITB9LHVwZGF0ZU1hdHJpeFdvcmxkOmZ1bmN0aW9uKGEpe3RoaXMubWF0cml4QXV0b1VwZGF0ZSYmdGhpcy51cGRhdGVNYXRyaXgoKTtpZih0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGV8fGEpbnVsbD09PXRoaXMucGFyZW50P3RoaXMubWF0cml4V29ybGQuY29weSh0aGlzLm1hdHJpeCk6dGhpcy5tYXRyaXhXb3JsZC5tdWx0aXBseU1hdHJpY2VzKHRoaXMucGFyZW50Lm1hdHJpeFdvcmxkLHRoaXMubWF0cml4KSx0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITEsYT0hMDtmb3IodmFyIGI9dGhpcy5jaGlsZHJlbixjPTAsZD1iLmxlbmd0aDtjPGQ7YysrKWJbY10udXBkYXRlTWF0cml4V29ybGQoYSl9LHRvSlNPTjpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIsYyl7dm9pZCAwPT09YltjLnV1aWRdJiYoYltjLnV1aWRdPWMudG9KU09OKGEpKTtyZXR1cm4gYy51dWlkfWZ1bmN0aW9uIGMoYSl7dmFyIGI9XG5bXSxjO2ZvcihjIGluIGEpe3ZhciBkPWFbY107ZGVsZXRlIGQubWV0YWRhdGE7Yi5wdXNoKGQpfXJldHVybiBifXZhciBkPXZvaWQgMD09PWF8fFwic3RyaW5nXCI9PT10eXBlb2YgYSxlPXt9O2QmJihhPXtnZW9tZXRyaWVzOnt9LG1hdGVyaWFsczp7fSx0ZXh0dXJlczp7fSxpbWFnZXM6e30sc2hhcGVzOnt9fSxlLm1ldGFkYXRhPXt2ZXJzaW9uOjQuNSx0eXBlOlwiT2JqZWN0XCIsZ2VuZXJhdG9yOlwiT2JqZWN0M0QudG9KU09OXCJ9KTt2YXIgZj17fTtmLnV1aWQ9dGhpcy51dWlkO2YudHlwZT10aGlzLnR5cGU7XCJcIiE9PXRoaXMubmFtZSYmKGYubmFtZT10aGlzLm5hbWUpOyEwPT09dGhpcy5jYXN0U2hhZG93JiYoZi5jYXN0U2hhZG93PSEwKTshMD09PXRoaXMucmVjZWl2ZVNoYWRvdyYmKGYucmVjZWl2ZVNoYWRvdz0hMCk7ITE9PT10aGlzLnZpc2libGUmJihmLnZpc2libGU9ITEpO1wie31cIiE9PUpTT04uc3RyaW5naWZ5KHRoaXMudXNlckRhdGEpJiYoZi51c2VyRGF0YT10aGlzLnVzZXJEYXRhKTtcbmYubWF0cml4PXRoaXMubWF0cml4LnRvQXJyYXkoKTtpZih2b2lkIDAhPT10aGlzLmdlb21ldHJ5KXtmLmdlb21ldHJ5PWIoYS5nZW9tZXRyaWVzLHRoaXMuZ2VvbWV0cnkpO3ZhciBnPXRoaXMuZ2VvbWV0cnkucGFyYW1ldGVycztpZih2b2lkIDAhPT1nJiZ2b2lkIDAhPT1nLnNoYXBlcylpZihnPWcuc2hhcGVzLEFycmF5LmlzQXJyYXkoZykpZm9yKHZhciBoPTAsaz1nLmxlbmd0aDtoPGs7aCsrKWIoYS5zaGFwZXMsZ1toXSk7ZWxzZSBiKGEuc2hhcGVzLGcpfWlmKHZvaWQgMCE9PXRoaXMubWF0ZXJpYWwpaWYoQXJyYXkuaXNBcnJheSh0aGlzLm1hdGVyaWFsKSl7Zz1bXTtoPTA7Zm9yKGs9dGhpcy5tYXRlcmlhbC5sZW5ndGg7aDxrO2grKylnLnB1c2goYihhLm1hdGVyaWFscyx0aGlzLm1hdGVyaWFsW2hdKSk7Zi5tYXRlcmlhbD1nfWVsc2UgZi5tYXRlcmlhbD1iKGEubWF0ZXJpYWxzLHRoaXMubWF0ZXJpYWwpO2lmKDA8dGhpcy5jaGlsZHJlbi5sZW5ndGgpZm9yKGYuY2hpbGRyZW49XG5bXSxoPTA7aDx0aGlzLmNoaWxkcmVuLmxlbmd0aDtoKyspZi5jaGlsZHJlbi5wdXNoKHRoaXMuY2hpbGRyZW5baF0udG9KU09OKGEpLm9iamVjdCk7aWYoZCl7dmFyIGQ9YyhhLmdlb21ldHJpZXMpLGg9YyhhLm1hdGVyaWFscyksaz1jKGEudGV4dHVyZXMpLG09YyhhLmltYWdlcyk7Zz1jKGEuc2hhcGVzKTswPGQubGVuZ3RoJiYoZS5nZW9tZXRyaWVzPWQpOzA8aC5sZW5ndGgmJihlLm1hdGVyaWFscz1oKTswPGsubGVuZ3RoJiYoZS50ZXh0dXJlcz1rKTswPG0ubGVuZ3RoJiYoZS5pbWFnZXM9bSk7MDxnLmxlbmd0aCYmKGUuc2hhcGVzPWcpfWUub2JqZWN0PWY7cmV0dXJuIGV9LGNsb25lOmZ1bmN0aW9uKGEpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzLGEpfSxjb3B5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9ITApO3RoaXMubmFtZT1hLm5hbWU7dGhpcy51cC5jb3B5KGEudXApO3RoaXMucG9zaXRpb24uY29weShhLnBvc2l0aW9uKTt0aGlzLnF1YXRlcm5pb24uY29weShhLnF1YXRlcm5pb24pO1xudGhpcy5zY2FsZS5jb3B5KGEuc2NhbGUpO3RoaXMubWF0cml4LmNvcHkoYS5tYXRyaXgpO3RoaXMubWF0cml4V29ybGQuY29weShhLm1hdHJpeFdvcmxkKTt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9YS5tYXRyaXhBdXRvVXBkYXRlO3RoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT1hLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU7dGhpcy5sYXllcnMubWFzaz1hLmxheWVycy5tYXNrO3RoaXMudmlzaWJsZT1hLnZpc2libGU7dGhpcy5jYXN0U2hhZG93PWEuY2FzdFNoYWRvdzt0aGlzLnJlY2VpdmVTaGFkb3c9YS5yZWNlaXZlU2hhZG93O3RoaXMuZnJ1c3R1bUN1bGxlZD1hLmZydXN0dW1DdWxsZWQ7dGhpcy5yZW5kZXJPcmRlcj1hLnJlbmRlck9yZGVyO3RoaXMudXNlckRhdGE9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhLnVzZXJEYXRhKSk7aWYoITA9PT1iKWZvcihiPTA7YjxhLmNoaWxkcmVuLmxlbmd0aDtiKyspdGhpcy5hZGQoYS5jaGlsZHJlbltiXS5jbG9uZSgpKTtyZXR1cm4gdGhpc319KTtcblRhLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUYSxpc0NhbWVyYTohMCxjb3B5OmZ1bmN0aW9uKGEsYil7eC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSxiKTt0aGlzLm1hdHJpeFdvcmxkSW52ZXJzZS5jb3B5KGEubWF0cml4V29ybGRJbnZlcnNlKTt0aGlzLnByb2plY3Rpb25NYXRyaXguY29weShhLnByb2plY3Rpb25NYXRyaXgpO3JldHVybiB0aGlzfSxnZXRXb3JsZERpcmVjdGlvbjpmdW5jdGlvbigpe3ZhciBhPW5ldyBoYTtyZXR1cm4gZnVuY3Rpb24oYil7Yj1ifHxuZXcgcDt0aGlzLmdldFdvcmxkUXVhdGVybmlvbihhKTtyZXR1cm4gYi5zZXQoMCwwLC0xKS5hcHBseVF1YXRlcm5pb24oYSl9fSgpLHVwZGF0ZU1hdHJpeFdvcmxkOmZ1bmN0aW9uKGEpe3gucHJvdG90eXBlLnVwZGF0ZU1hdHJpeFdvcmxkLmNhbGwodGhpcyxhKTt0aGlzLm1hdHJpeFdvcmxkSW52ZXJzZS5nZXRJbnZlcnNlKHRoaXMubWF0cml4V29ybGQpfSxcbmNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfX0pO0xiLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVGEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6TGIsaXNPcnRob2dyYXBoaWNDYW1lcmE6ITAsY29weTpmdW5jdGlvbihhLGIpe1RhLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhLGIpO3RoaXMubGVmdD1hLmxlZnQ7dGhpcy5yaWdodD1hLnJpZ2h0O3RoaXMudG9wPWEudG9wO3RoaXMuYm90dG9tPWEuYm90dG9tO3RoaXMubmVhcj1hLm5lYXI7dGhpcy5mYXI9YS5mYXI7dGhpcy56b29tPWEuem9vbTt0aGlzLnZpZXc9bnVsbD09PWEudmlldz9udWxsOk9iamVjdC5hc3NpZ24oe30sYS52aWV3KTtyZXR1cm4gdGhpc30sc2V0Vmlld09mZnNldDpmdW5jdGlvbihhLGIsYyxkLGUsZil7bnVsbD09PXRoaXMudmlldyYmKHRoaXMudmlldz17ZW5hYmxlZDohMCxmdWxsV2lkdGg6MSxmdWxsSGVpZ2h0OjEsb2Zmc2V0WDowLFxub2Zmc2V0WTowLHdpZHRoOjEsaGVpZ2h0OjF9KTt0aGlzLnZpZXcuZW5hYmxlZD0hMDt0aGlzLnZpZXcuZnVsbFdpZHRoPWE7dGhpcy52aWV3LmZ1bGxIZWlnaHQ9Yjt0aGlzLnZpZXcub2Zmc2V0WD1jO3RoaXMudmlldy5vZmZzZXRZPWQ7dGhpcy52aWV3LndpZHRoPWU7dGhpcy52aWV3LmhlaWdodD1mO3RoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfSxjbGVhclZpZXdPZmZzZXQ6ZnVuY3Rpb24oKXtudWxsIT09dGhpcy52aWV3JiYodGhpcy52aWV3LmVuYWJsZWQ9ITEpO3RoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfSx1cGRhdGVQcm9qZWN0aW9uTWF0cml4OmZ1bmN0aW9uKCl7dmFyIGE9KHRoaXMucmlnaHQtdGhpcy5sZWZ0KS8oMip0aGlzLnpvb20pLGI9KHRoaXMudG9wLXRoaXMuYm90dG9tKS8oMip0aGlzLnpvb20pLGM9KHRoaXMucmlnaHQrdGhpcy5sZWZ0KS8yLGQ9KHRoaXMudG9wK3RoaXMuYm90dG9tKS8yLGU9Yy1hLGM9YythLGE9ZCtiLGI9ZC1iO2lmKG51bGwhPT1cbnRoaXMudmlldyYmdGhpcy52aWV3LmVuYWJsZWQpdmFyIGM9dGhpcy56b29tLyh0aGlzLnZpZXcud2lkdGgvdGhpcy52aWV3LmZ1bGxXaWR0aCksYj10aGlzLnpvb20vKHRoaXMudmlldy5oZWlnaHQvdGhpcy52aWV3LmZ1bGxIZWlnaHQpLGY9KHRoaXMucmlnaHQtdGhpcy5sZWZ0KS90aGlzLnZpZXcud2lkdGgsZD0odGhpcy50b3AtdGhpcy5ib3R0b20pL3RoaXMudmlldy5oZWlnaHQsZT1lK3RoaXMudmlldy5vZmZzZXRYL2MqZixjPWUrdGhpcy52aWV3LndpZHRoL2MqZixhPWEtdGhpcy52aWV3Lm9mZnNldFkvYipkLGI9YS10aGlzLnZpZXcuaGVpZ2h0L2IqZDt0aGlzLnByb2plY3Rpb25NYXRyaXgubWFrZU9ydGhvZ3JhcGhpYyhlLGMsYSxiLHRoaXMubmVhcix0aGlzLmZhcil9LHRvSlNPTjpmdW5jdGlvbihhKXthPXgucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsYSk7YS5vYmplY3Quem9vbT10aGlzLnpvb207YS5vYmplY3QubGVmdD10aGlzLmxlZnQ7YS5vYmplY3QucmlnaHQ9XG50aGlzLnJpZ2h0O2Eub2JqZWN0LnRvcD10aGlzLnRvcDthLm9iamVjdC5ib3R0b209dGhpcy5ib3R0b207YS5vYmplY3QubmVhcj10aGlzLm5lYXI7YS5vYmplY3QuZmFyPXRoaXMuZmFyO251bGwhPT10aGlzLnZpZXcmJihhLm9iamVjdC52aWV3PU9iamVjdC5hc3NpZ24oe30sdGhpcy52aWV3KSk7cmV0dXJuIGF9fSk7T2JqZWN0LmFzc2lnbihZYS5wcm90b3R5cGUse2Nsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuYT1hLmE7dGhpcy5iPWEuYjt0aGlzLmM9YS5jO3RoaXMubm9ybWFsLmNvcHkoYS5ub3JtYWwpO3RoaXMuY29sb3IuY29weShhLmNvbG9yKTt0aGlzLm1hdGVyaWFsSW5kZXg9YS5tYXRlcmlhbEluZGV4O2Zvcih2YXIgYj0wLGM9YS52ZXJ0ZXhOb3JtYWxzLmxlbmd0aDtiPGM7YisrKXRoaXMudmVydGV4Tm9ybWFsc1tiXT1hLnZlcnRleE5vcm1hbHNbYl0uY2xvbmUoKTtiPTA7XG5mb3IoYz1hLnZlcnRleENvbG9ycy5sZW5ndGg7YjxjO2IrKyl0aGlzLnZlcnRleENvbG9yc1tiXT1hLnZlcnRleENvbG9yc1tiXS5jbG9uZSgpO3JldHVybiB0aGlzfX0pO3ZhciBkZz0wO0wucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh6YS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpMLGlzR2VvbWV0cnk6ITAsYXBwbHlNYXRyaXg6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPShuZXcgbWEpLmdldE5vcm1hbE1hdHJpeChhKSxjPTAsZD10aGlzLnZlcnRpY2VzLmxlbmd0aDtjPGQ7YysrKXRoaXMudmVydGljZXNbY10uYXBwbHlNYXRyaXg0KGEpO2M9MDtmb3IoZD10aGlzLmZhY2VzLmxlbmd0aDtjPGQ7YysrKXthPXRoaXMuZmFjZXNbY107YS5ub3JtYWwuYXBwbHlNYXRyaXgzKGIpLm5vcm1hbGl6ZSgpO2Zvcih2YXIgZT0wLGY9YS52ZXJ0ZXhOb3JtYWxzLmxlbmd0aDtlPGY7ZSsrKWEudmVydGV4Tm9ybWFsc1tlXS5hcHBseU1hdHJpeDMoYikubm9ybWFsaXplKCl9bnVsbCE9PVxudGhpcy5ib3VuZGluZ0JveCYmdGhpcy5jb21wdXRlQm91bmRpbmdCb3goKTtudWxsIT09dGhpcy5ib3VuZGluZ1NwaGVyZSYmdGhpcy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTt0aGlzLm5vcm1hbHNOZWVkVXBkYXRlPXRoaXMudmVydGljZXNOZWVkVXBkYXRlPSEwO3JldHVybiB0aGlzfSxyb3RhdGVYOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE87cmV0dXJuIGZ1bmN0aW9uKGIpe2EubWFrZVJvdGF0aW9uWChiKTt0aGlzLmFwcGx5TWF0cml4KGEpO3JldHVybiB0aGlzfX0oKSxyb3RhdGVZOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE87cmV0dXJuIGZ1bmN0aW9uKGIpe2EubWFrZVJvdGF0aW9uWShiKTt0aGlzLmFwcGx5TWF0cml4KGEpO3JldHVybiB0aGlzfX0oKSxyb3RhdGVaOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE87cmV0dXJuIGZ1bmN0aW9uKGIpe2EubWFrZVJvdGF0aW9uWihiKTt0aGlzLmFwcGx5TWF0cml4KGEpO3JldHVybiB0aGlzfX0oKSx0cmFuc2xhdGU6ZnVuY3Rpb24oKXt2YXIgYT1cbm5ldyBPO3JldHVybiBmdW5jdGlvbihiLGMsZCl7YS5tYWtlVHJhbnNsYXRpb24oYixjLGQpO3RoaXMuYXBwbHlNYXRyaXgoYSk7cmV0dXJuIHRoaXN9fSgpLHNjYWxlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE87cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXthLm1ha2VTY2FsZShiLGMsZCk7dGhpcy5hcHBseU1hdHJpeChhKTtyZXR1cm4gdGhpc319KCksbG9va0F0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHg7cmV0dXJuIGZ1bmN0aW9uKGIpe2EubG9va0F0KGIpO2EudXBkYXRlTWF0cml4KCk7dGhpcy5hcHBseU1hdHJpeChhLm1hdHJpeCl9fSgpLGZyb21CdWZmZXJHZW9tZXRyeTpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixkLGUpe3ZhciBmPXZvaWQgMCE9PWc/W2xbYV0uY2xvbmUoKSxsW2JdLmNsb25lKCksbFtkXS5jbG9uZSgpXTpbXSxxPXZvaWQgMCE9PWg/W2MuY29sb3JzW2FdLmNsb25lKCksYy5jb2xvcnNbYl0uY2xvbmUoKSxjLmNvbG9yc1tkXS5jbG9uZSgpXTpbXTtlPW5ldyBZYShhLFxuYixkLGYscSxlKTtjLmZhY2VzLnB1c2goZSk7dm9pZCAwIT09ayYmYy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW25bYV0uY2xvbmUoKSxuW2JdLmNsb25lKCksbltkXS5jbG9uZSgpXSk7dm9pZCAwIT09bSYmYy5mYWNlVmVydGV4VXZzWzFdLnB1c2goW3VbYV0uY2xvbmUoKSx1W2JdLmNsb25lKCksdVtkXS5jbG9uZSgpXSl9dmFyIGM9dGhpcyxkPW51bGwhPT1hLmluZGV4P2EuaW5kZXguYXJyYXk6dm9pZCAwLGU9YS5hdHRyaWJ1dGVzLGY9ZS5wb3NpdGlvbi5hcnJheSxnPXZvaWQgMCE9PWUubm9ybWFsP2Uubm9ybWFsLmFycmF5OnZvaWQgMCxoPXZvaWQgMCE9PWUuY29sb3I/ZS5jb2xvci5hcnJheTp2b2lkIDAsaz12b2lkIDAhPT1lLnV2P2UudXYuYXJyYXk6dm9pZCAwLG09dm9pZCAwIT09ZS51djI/ZS51djIuYXJyYXk6dm9pZCAwO3ZvaWQgMCE9PW0mJih0aGlzLmZhY2VWZXJ0ZXhVdnNbMV09W10pO2Zvcih2YXIgbD1bXSxuPVtdLHU9W10scj1lPTA7ZTxmLmxlbmd0aDtlKz0zLFxucis9MiljLnZlcnRpY2VzLnB1c2gobmV3IHAoZltlXSxmW2UrMV0sZltlKzJdKSksdm9pZCAwIT09ZyYmbC5wdXNoKG5ldyBwKGdbZV0sZ1tlKzFdLGdbZSsyXSkpLHZvaWQgMCE9PWgmJmMuY29sb3JzLnB1c2gobmV3IEgoaFtlXSxoW2UrMV0saFtlKzJdKSksdm9pZCAwIT09ayYmbi5wdXNoKG5ldyBEKGtbcl0sa1tyKzFdKSksdm9pZCAwIT09bSYmdS5wdXNoKG5ldyBEKG1bcl0sbVtyKzFdKSk7dmFyIHQ9YS5ncm91cHM7aWYoMDx0Lmxlbmd0aClmb3IoZT0wO2U8dC5sZW5ndGg7ZSsrKWZvcih2YXIgZj10W2VdLHY9Zi5zdGFydCx3PWYuY291bnQscj12LHY9dit3O3I8djtyKz0zKXZvaWQgMCE9PWQ/YihkW3JdLGRbcisxXSxkW3IrMl0sZi5tYXRlcmlhbEluZGV4KTpiKHIscisxLHIrMixmLm1hdGVyaWFsSW5kZXgpO2Vsc2UgaWYodm9pZCAwIT09ZClmb3IoZT0wO2U8ZC5sZW5ndGg7ZSs9MyliKGRbZV0sZFtlKzFdLGRbZSsyXSk7ZWxzZSBmb3IoZT0wO2U8Zi5sZW5ndGgvMztlKz1cbjMpYihlLGUrMSxlKzIpO3RoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCk7bnVsbCE9PWEuYm91bmRpbmdCb3gmJih0aGlzLmJvdW5kaW5nQm94PWEuYm91bmRpbmdCb3guY2xvbmUoKSk7bnVsbCE9PWEuYm91bmRpbmdTcGhlcmUmJih0aGlzLmJvdW5kaW5nU3BoZXJlPWEuYm91bmRpbmdTcGhlcmUuY2xvbmUoKSk7cmV0dXJuIHRoaXN9LGNlbnRlcjpmdW5jdGlvbigpe3RoaXMuY29tcHV0ZUJvdW5kaW5nQm94KCk7dmFyIGE9dGhpcy5ib3VuZGluZ0JveC5nZXRDZW50ZXIoKS5uZWdhdGUoKTt0aGlzLnRyYW5zbGF0ZShhLngsYS55LGEueik7cmV0dXJuIGF9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe3RoaXMuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7dmFyIGE9dGhpcy5ib3VuZGluZ1NwaGVyZS5jZW50ZXIsYj10aGlzLmJvdW5kaW5nU3BoZXJlLnJhZGl1cyxiPTA9PT1iPzE6MS9iLGM9bmV3IE87Yy5zZXQoYiwwLDAsLWIqYS54LDAsYiwwLC1iKmEueSwwLDAsYiwtYiphLnosMCwwLDAsMSk7XG50aGlzLmFwcGx5TWF0cml4KGMpO3JldHVybiB0aGlzfSxjb21wdXRlRmFjZU5vcm1hbHM6ZnVuY3Rpb24oKXtmb3IodmFyIGE9bmV3IHAsYj1uZXcgcCxjPTAsZD10aGlzLmZhY2VzLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT10aGlzLmZhY2VzW2NdLGY9dGhpcy52ZXJ0aWNlc1tlLmFdLGc9dGhpcy52ZXJ0aWNlc1tlLmJdO2Euc3ViVmVjdG9ycyh0aGlzLnZlcnRpY2VzW2UuY10sZyk7Yi5zdWJWZWN0b3JzKGYsZyk7YS5jcm9zcyhiKTthLm5vcm1hbGl6ZSgpO2Uubm9ybWFsLmNvcHkoYSl9fSxjb21wdXRlVmVydGV4Tm9ybWFsczpmdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT0hMCk7dmFyIGI7dmFyIGM9QXJyYXkodGhpcy52ZXJ0aWNlcy5sZW5ndGgpO3ZhciBkPTA7Zm9yKGI9dGhpcy52ZXJ0aWNlcy5sZW5ndGg7ZDxiO2QrKyljW2RdPW5ldyBwO2lmKGEpe3ZhciBlPW5ldyBwLGY9bmV3IHA7YT0wO2ZvcihkPXRoaXMuZmFjZXMubGVuZ3RoO2E8ZDthKyspe2I9dGhpcy5mYWNlc1thXTtcbnZhciBnPXRoaXMudmVydGljZXNbYi5hXTt2YXIgaD10aGlzLnZlcnRpY2VzW2IuYl07dmFyIGs9dGhpcy52ZXJ0aWNlc1tiLmNdO2Uuc3ViVmVjdG9ycyhrLGgpO2Yuc3ViVmVjdG9ycyhnLGgpO2UuY3Jvc3MoZik7Y1tiLmFdLmFkZChlKTtjW2IuYl0uYWRkKGUpO2NbYi5jXS5hZGQoZSl9fWVsc2UgZm9yKHRoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCksYT0wLGQ9dGhpcy5mYWNlcy5sZW5ndGg7YTxkO2ErKyliPXRoaXMuZmFjZXNbYV0sY1tiLmFdLmFkZChiLm5vcm1hbCksY1tiLmJdLmFkZChiLm5vcm1hbCksY1tiLmNdLmFkZChiLm5vcm1hbCk7ZD0wO2ZvcihiPXRoaXMudmVydGljZXMubGVuZ3RoO2Q8YjtkKyspY1tkXS5ub3JtYWxpemUoKTthPTA7Zm9yKGQ9dGhpcy5mYWNlcy5sZW5ndGg7YTxkO2ErKyliPXRoaXMuZmFjZXNbYV0sZz1iLnZlcnRleE5vcm1hbHMsMz09PWcubGVuZ3RoPyhnWzBdLmNvcHkoY1tiLmFdKSxnWzFdLmNvcHkoY1tiLmJdKSxnWzJdLmNvcHkoY1tiLmNdKSk6XG4oZ1swXT1jW2IuYV0uY2xvbmUoKSxnWzFdPWNbYi5iXS5jbG9uZSgpLGdbMl09Y1tiLmNdLmNsb25lKCkpOzA8dGhpcy5mYWNlcy5sZW5ndGgmJih0aGlzLm5vcm1hbHNOZWVkVXBkYXRlPSEwKX0sY29tcHV0ZUZsYXRWZXJ0ZXhOb3JtYWxzOmZ1bmN0aW9uKCl7dmFyIGE7dGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKTt2YXIgYj0wO2ZvcihhPXRoaXMuZmFjZXMubGVuZ3RoO2I8YTtiKyspe3ZhciBjPXRoaXMuZmFjZXNbYl07dmFyIGQ9Yy52ZXJ0ZXhOb3JtYWxzOzM9PT1kLmxlbmd0aD8oZFswXS5jb3B5KGMubm9ybWFsKSxkWzFdLmNvcHkoYy5ub3JtYWwpLGRbMl0uY29weShjLm5vcm1hbCkpOihkWzBdPWMubm9ybWFsLmNsb25lKCksZFsxXT1jLm5vcm1hbC5jbG9uZSgpLGRbMl09Yy5ub3JtYWwuY2xvbmUoKSl9MDx0aGlzLmZhY2VzLmxlbmd0aCYmKHRoaXMubm9ybWFsc05lZWRVcGRhdGU9ITApfSxjb21wdXRlTW9ycGhOb3JtYWxzOmZ1bmN0aW9uKCl7dmFyIGEsYjt2YXIgYz1cbjA7Zm9yKGI9dGhpcy5mYWNlcy5sZW5ndGg7YzxiO2MrKyl7dmFyIGQ9dGhpcy5mYWNlc1tjXTtkLl9fb3JpZ2luYWxGYWNlTm9ybWFsP2QuX19vcmlnaW5hbEZhY2VOb3JtYWwuY29weShkLm5vcm1hbCk6ZC5fX29yaWdpbmFsRmFjZU5vcm1hbD1kLm5vcm1hbC5jbG9uZSgpO2QuX19vcmlnaW5hbFZlcnRleE5vcm1hbHN8fChkLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzPVtdKTt2YXIgZT0wO2ZvcihhPWQudmVydGV4Tm9ybWFscy5sZW5ndGg7ZTxhO2UrKylkLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzW2VdP2QuX19vcmlnaW5hbFZlcnRleE5vcm1hbHNbZV0uY29weShkLnZlcnRleE5vcm1hbHNbZV0pOmQuX19vcmlnaW5hbFZlcnRleE5vcm1hbHNbZV09ZC52ZXJ0ZXhOb3JtYWxzW2VdLmNsb25lKCl9dmFyIGY9bmV3IEw7Zi5mYWNlcz10aGlzLmZhY2VzO2U9MDtmb3IoYT10aGlzLm1vcnBoVGFyZ2V0cy5sZW5ndGg7ZTxhO2UrKyl7aWYoIXRoaXMubW9ycGhOb3JtYWxzW2VdKXt0aGlzLm1vcnBoTm9ybWFsc1tlXT1cbnt9O3RoaXMubW9ycGhOb3JtYWxzW2VdLmZhY2VOb3JtYWxzPVtdO3RoaXMubW9ycGhOb3JtYWxzW2VdLnZlcnRleE5vcm1hbHM9W107ZD10aGlzLm1vcnBoTm9ybWFsc1tlXS5mYWNlTm9ybWFsczt2YXIgZz10aGlzLm1vcnBoTm9ybWFsc1tlXS52ZXJ0ZXhOb3JtYWxzO2M9MDtmb3IoYj10aGlzLmZhY2VzLmxlbmd0aDtjPGI7YysrKXt2YXIgaD1uZXcgcDt2YXIgaz17YTpuZXcgcCxiOm5ldyBwLGM6bmV3IHB9O2QucHVzaChoKTtnLnB1c2goayl9fWc9dGhpcy5tb3JwaE5vcm1hbHNbZV07Zi52ZXJ0aWNlcz10aGlzLm1vcnBoVGFyZ2V0c1tlXS52ZXJ0aWNlcztmLmNvbXB1dGVGYWNlTm9ybWFscygpO2YuY29tcHV0ZVZlcnRleE5vcm1hbHMoKTtjPTA7Zm9yKGI9dGhpcy5mYWNlcy5sZW5ndGg7YzxiO2MrKylkPXRoaXMuZmFjZXNbY10saD1nLmZhY2VOb3JtYWxzW2NdLGs9Zy52ZXJ0ZXhOb3JtYWxzW2NdLGguY29weShkLm5vcm1hbCksay5hLmNvcHkoZC52ZXJ0ZXhOb3JtYWxzWzBdKSxcbmsuYi5jb3B5KGQudmVydGV4Tm9ybWFsc1sxXSksay5jLmNvcHkoZC52ZXJ0ZXhOb3JtYWxzWzJdKX1jPTA7Zm9yKGI9dGhpcy5mYWNlcy5sZW5ndGg7YzxiO2MrKylkPXRoaXMuZmFjZXNbY10sZC5ub3JtYWw9ZC5fX29yaWdpbmFsRmFjZU5vcm1hbCxkLnZlcnRleE5vcm1hbHM9ZC5fX29yaWdpbmFsVmVydGV4Tm9ybWFsc30sY29tcHV0ZUxpbmVEaXN0YW5jZXM6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPXRoaXMudmVydGljZXMsYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrKykwPGMmJihhKz1iW2NdLmRpc3RhbmNlVG8oYltjLTFdKSksdGhpcy5saW5lRGlzdGFuY2VzW2NdPWF9LGNvbXB1dGVCb3VuZGluZ0JveDpmdW5jdGlvbigpe251bGw9PT10aGlzLmJvdW5kaW5nQm94JiYodGhpcy5ib3VuZGluZ0JveD1uZXcgWGEpO3RoaXMuYm91bmRpbmdCb3guc2V0RnJvbVBvaW50cyh0aGlzLnZlcnRpY2VzKX0sY29tcHV0ZUJvdW5kaW5nU3BoZXJlOmZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuYm91bmRpbmdTcGhlcmUmJlxuKHRoaXMuYm91bmRpbmdTcGhlcmU9bmV3IElhKTt0aGlzLmJvdW5kaW5nU3BoZXJlLnNldEZyb21Qb2ludHModGhpcy52ZXJ0aWNlcyl9LG1lcmdlOmZ1bmN0aW9uKGEsYixjKXtpZihhJiZhLmlzR2VvbWV0cnkpe3ZhciBkLGU9dGhpcy52ZXJ0aWNlcy5sZW5ndGgsZj10aGlzLnZlcnRpY2VzLGc9YS52ZXJ0aWNlcyxoPXRoaXMuZmFjZXMsaz1hLmZhY2VzLG09dGhpcy5mYWNlVmVydGV4VXZzWzBdLGw9YS5mYWNlVmVydGV4VXZzWzBdLG49dGhpcy5jb2xvcnMscD1hLmNvbG9yczt2b2lkIDA9PT1jJiYoYz0wKTt2b2lkIDAhPT1iJiYoZD0obmV3IG1hKS5nZXROb3JtYWxNYXRyaXgoYikpO2E9MDtmb3IodmFyIHI9Zy5sZW5ndGg7YTxyO2ErKyl7dmFyIHQ9Z1thXS5jbG9uZSgpO3ZvaWQgMCE9PWImJnQuYXBwbHlNYXRyaXg0KGIpO2YucHVzaCh0KX1hPTA7Zm9yKHI9cC5sZW5ndGg7YTxyO2ErKyluLnB1c2gocFthXS5jbG9uZSgpKTthPTA7Zm9yKHI9ay5sZW5ndGg7YTxyO2ErKyl7dmFyIGc9XG5rW2FdLHY9Zy52ZXJ0ZXhOb3JtYWxzLHA9Zy52ZXJ0ZXhDb2xvcnMsbj1uZXcgWWEoZy5hK2UsZy5iK2UsZy5jK2UpO24ubm9ybWFsLmNvcHkoZy5ub3JtYWwpO3ZvaWQgMCE9PWQmJm4ubm9ybWFsLmFwcGx5TWF0cml4MyhkKS5ub3JtYWxpemUoKTtiPTA7Zm9yKGY9di5sZW5ndGg7YjxmO2IrKyl0PXZbYl0uY2xvbmUoKSx2b2lkIDAhPT1kJiZ0LmFwcGx5TWF0cml4MyhkKS5ub3JtYWxpemUoKSxuLnZlcnRleE5vcm1hbHMucHVzaCh0KTtuLmNvbG9yLmNvcHkoZy5jb2xvcik7Yj0wO2ZvcihmPXAubGVuZ3RoO2I8ZjtiKyspdD1wW2JdLG4udmVydGV4Q29sb3JzLnB1c2godC5jbG9uZSgpKTtuLm1hdGVyaWFsSW5kZXg9Zy5tYXRlcmlhbEluZGV4K2M7aC5wdXNoKG4pfWE9MDtmb3Iocj1sLmxlbmd0aDthPHI7YSsrKWlmKGM9bFthXSxkPVtdLHZvaWQgMCE9PWMpe2I9MDtmb3IoZj1jLmxlbmd0aDtiPGY7YisrKWQucHVzaChjW2JdLmNsb25lKCkpO20ucHVzaChkKX19ZWxzZSBjb25zb2xlLmVycm9yKFwiVEhSRUUuR2VvbWV0cnkubWVyZ2UoKTogZ2VvbWV0cnkgbm90IGFuIGluc3RhbmNlIG9mIFRIUkVFLkdlb21ldHJ5LlwiLFxuYSl9LG1lcmdlTWVzaDpmdW5jdGlvbihhKXthJiZhLmlzTWVzaD8oYS5tYXRyaXhBdXRvVXBkYXRlJiZhLnVwZGF0ZU1hdHJpeCgpLHRoaXMubWVyZ2UoYS5nZW9tZXRyeSxhLm1hdHJpeCkpOmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5HZW9tZXRyeS5tZXJnZU1lc2goKTogbWVzaCBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuTWVzaC5cIixhKX0sbWVyZ2VWZXJ0aWNlczpmdW5jdGlvbigpe3ZhciBhPXt9LGI9W10sYz1bXSxkPU1hdGgucG93KDEwLDQpLGU7dmFyIGY9MDtmb3IoZT10aGlzLnZlcnRpY2VzLmxlbmd0aDtmPGU7ZisrKXt2YXIgZz10aGlzLnZlcnRpY2VzW2ZdO2c9TWF0aC5yb3VuZChnLngqZCkrXCJfXCIrTWF0aC5yb3VuZChnLnkqZCkrXCJfXCIrTWF0aC5yb3VuZChnLnoqZCk7dm9pZCAwPT09YVtnXT8oYVtnXT1mLGIucHVzaCh0aGlzLnZlcnRpY2VzW2ZdKSxjW2ZdPWIubGVuZ3RoLTEpOmNbZl09Y1thW2ddXX1hPVtdO2Y9MDtmb3IoZT10aGlzLmZhY2VzLmxlbmd0aDtmPGU7ZisrKWZvcihkPVxudGhpcy5mYWNlc1tmXSxkLmE9Y1tkLmFdLGQuYj1jW2QuYl0sZC5jPWNbZC5jXSxkPVtkLmEsZC5iLGQuY10sZz0wOzM+ZztnKyspaWYoZFtnXT09PWRbKGcrMSklM10pe2EucHVzaChmKTticmVha31mb3IoZj1hLmxlbmd0aC0xOzA8PWY7Zi0tKWZvcihkPWFbZl0sdGhpcy5mYWNlcy5zcGxpY2UoZCwxKSxjPTAsZT10aGlzLmZhY2VWZXJ0ZXhVdnMubGVuZ3RoO2M8ZTtjKyspdGhpcy5mYWNlVmVydGV4VXZzW2NdLnNwbGljZShkLDEpO2Y9dGhpcy52ZXJ0aWNlcy5sZW5ndGgtYi5sZW5ndGg7dGhpcy52ZXJ0aWNlcz1iO3JldHVybiBmfSxzZXRGcm9tUG9pbnRzOmZ1bmN0aW9uKGEpe3RoaXMudmVydGljZXM9W107Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiPGM7YisrKXt2YXIgZD1hW2JdO3RoaXMudmVydGljZXMucHVzaChuZXcgcChkLngsZC55LGQuenx8MCkpfXJldHVybiB0aGlzfSxzb3J0RmFjZXNCeU1hdGVyaWFsSW5kZXg6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5mYWNlcyxcbmI9YS5sZW5ndGgsYz0wO2M8YjtjKyspYVtjXS5faWQ9YzthLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5tYXRlcmlhbEluZGV4LWIubWF0ZXJpYWxJbmRleH0pO3ZhciBkPXRoaXMuZmFjZVZlcnRleFV2c1swXSxlPXRoaXMuZmFjZVZlcnRleFV2c1sxXSxmLGc7ZCYmZC5sZW5ndGg9PT1iJiYoZj1bXSk7ZSYmZS5sZW5ndGg9PT1iJiYoZz1bXSk7Zm9yKGM9MDtjPGI7YysrKXt2YXIgaD1hW2NdLl9pZDtmJiZmLnB1c2goZFtoXSk7ZyYmZy5wdXNoKGVbaF0pfWYmJih0aGlzLmZhY2VWZXJ0ZXhVdnNbMF09Zik7ZyYmKHRoaXMuZmFjZVZlcnRleFV2c1sxXT1nKX0sdG9KU09OOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIsYyl7cmV0dXJuIGM/YXwxPDxiOmEmfigxPDxiKX1mdW5jdGlvbiBiKGEpe3ZhciBiPWEueC50b1N0cmluZygpK2EueS50b1N0cmluZygpK2Euei50b1N0cmluZygpO2lmKHZvaWQgMCE9PW1bYl0pcmV0dXJuIG1bYl07bVtiXT1rLmxlbmd0aC8zO2sucHVzaChhLngsXG5hLnksYS56KTtyZXR1cm4gbVtiXX1mdW5jdGlvbiBjKGEpe3ZhciBiPWEuci50b1N0cmluZygpK2EuZy50b1N0cmluZygpK2EuYi50b1N0cmluZygpO2lmKHZvaWQgMCE9PW5bYl0pcmV0dXJuIG5bYl07bltiXT1sLmxlbmd0aDtsLnB1c2goYS5nZXRIZXgoKSk7cmV0dXJuIG5bYl19ZnVuY3Rpb24gZChhKXt2YXIgYj1hLngudG9TdHJpbmcoKSthLnkudG9TdHJpbmcoKTtpZih2b2lkIDAhPT1yW2JdKXJldHVybiByW2JdO3JbYl09cC5sZW5ndGgvMjtwLnB1c2goYS54LGEueSk7cmV0dXJuIHJbYl19dmFyIGU9e21ldGFkYXRhOnt2ZXJzaW9uOjQuNSx0eXBlOlwiR2VvbWV0cnlcIixnZW5lcmF0b3I6XCJHZW9tZXRyeS50b0pTT05cIn19O2UudXVpZD10aGlzLnV1aWQ7ZS50eXBlPXRoaXMudHlwZTtcIlwiIT09dGhpcy5uYW1lJiYoZS5uYW1lPXRoaXMubmFtZSk7aWYodm9pZCAwIT09dGhpcy5wYXJhbWV0ZXJzKXt2YXIgZj10aGlzLnBhcmFtZXRlcnMsZztmb3IoZyBpbiBmKXZvaWQgMCE9PWZbZ10mJlxuKGVbZ109ZltnXSk7cmV0dXJuIGV9Zj1bXTtmb3IoZz0wO2c8dGhpcy52ZXJ0aWNlcy5sZW5ndGg7ZysrKXt2YXIgaD10aGlzLnZlcnRpY2VzW2ddO2YucHVzaChoLngsaC55LGgueil9dmFyIGg9W10saz1bXSxtPXt9LGw9W10sbj17fSxwPVtdLHI9e307Zm9yKGc9MDtnPHRoaXMuZmFjZXMubGVuZ3RoO2crKyl7dmFyIHQ9dGhpcy5mYWNlc1tnXSx2PXZvaWQgMCE9PXRoaXMuZmFjZVZlcnRleFV2c1swXVtnXSx3PTA8dC5ub3JtYWwubGVuZ3RoKCksej0wPHQudmVydGV4Tm9ybWFscy5sZW5ndGgseT0xIT09dC5jb2xvci5yfHwxIT09dC5jb2xvci5nfHwxIT09dC5jb2xvci5iLHg9MDx0LnZlcnRleENvbG9ycy5sZW5ndGgsQT0wLEE9YShBLDAsMCksQT1hKEEsMSwhMCksQT1hKEEsMiwhMSksQT1hKEEsMyx2KSxBPWEoQSw0LHcpLEE9YShBLDUseiksQT1hKEEsNix5KSxBPWEoQSw3LHgpO2gucHVzaChBKTtoLnB1c2godC5hLHQuYix0LmMpO2gucHVzaCh0Lm1hdGVyaWFsSW5kZXgpO1xudiYmKHY9dGhpcy5mYWNlVmVydGV4VXZzWzBdW2ddLGgucHVzaChkKHZbMF0pLGQodlsxXSksZCh2WzJdKSkpO3cmJmgucHVzaChiKHQubm9ybWFsKSk7eiYmKHc9dC52ZXJ0ZXhOb3JtYWxzLGgucHVzaChiKHdbMF0pLGIod1sxXSksYih3WzJdKSkpO3kmJmgucHVzaChjKHQuY29sb3IpKTt4JiYodD10LnZlcnRleENvbG9ycyxoLnB1c2goYyh0WzBdKSxjKHRbMV0pLGModFsyXSkpKX1lLmRhdGE9e307ZS5kYXRhLnZlcnRpY2VzPWY7ZS5kYXRhLm5vcm1hbHM9azswPGwubGVuZ3RoJiYoZS5kYXRhLmNvbG9ycz1sKTswPHAubGVuZ3RoJiYoZS5kYXRhLnV2cz1bcF0pO2UuZGF0YS5mYWNlcz1oO3JldHVybiBlfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgTCkuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihhKXt2YXIgYixjLGQ7dGhpcy52ZXJ0aWNlcz1bXTt0aGlzLmNvbG9ycz1bXTt0aGlzLmZhY2VzPVtdO3RoaXMuZmFjZVZlcnRleFV2cz1bW11dO3RoaXMubW9ycGhUYXJnZXRzPVxuW107dGhpcy5tb3JwaE5vcm1hbHM9W107dGhpcy5za2luV2VpZ2h0cz1bXTt0aGlzLnNraW5JbmRpY2VzPVtdO3RoaXMubGluZURpc3RhbmNlcz1bXTt0aGlzLmJvdW5kaW5nU3BoZXJlPXRoaXMuYm91bmRpbmdCb3g9bnVsbDt0aGlzLm5hbWU9YS5uYW1lO3ZhciBlPWEudmVydGljZXM7dmFyIGY9MDtmb3IoYj1lLmxlbmd0aDtmPGI7ZisrKXRoaXMudmVydGljZXMucHVzaChlW2ZdLmNsb25lKCkpO2U9YS5jb2xvcnM7Zj0wO2ZvcihiPWUubGVuZ3RoO2Y8YjtmKyspdGhpcy5jb2xvcnMucHVzaChlW2ZdLmNsb25lKCkpO2U9YS5mYWNlcztmPTA7Zm9yKGI9ZS5sZW5ndGg7ZjxiO2YrKyl0aGlzLmZhY2VzLnB1c2goZVtmXS5jbG9uZSgpKTtmPTA7Zm9yKGI9YS5mYWNlVmVydGV4VXZzLmxlbmd0aDtmPGI7ZisrKXt2YXIgZz1hLmZhY2VWZXJ0ZXhVdnNbZl07dm9pZCAwPT09dGhpcy5mYWNlVmVydGV4VXZzW2ZdJiYodGhpcy5mYWNlVmVydGV4VXZzW2ZdPVtdKTtlPTA7Zm9yKGM9Zy5sZW5ndGg7ZTxcbmM7ZSsrKXt2YXIgaD1nW2VdLGs9W107dmFyIG09MDtmb3IoZD1oLmxlbmd0aDttPGQ7bSsrKWsucHVzaChoW21dLmNsb25lKCkpO3RoaXMuZmFjZVZlcnRleFV2c1tmXS5wdXNoKGspfX1tPWEubW9ycGhUYXJnZXRzO2Y9MDtmb3IoYj1tLmxlbmd0aDtmPGI7ZisrKXtkPXt9O2QubmFtZT1tW2ZdLm5hbWU7aWYodm9pZCAwIT09bVtmXS52ZXJ0aWNlcylmb3IoZC52ZXJ0aWNlcz1bXSxlPTAsYz1tW2ZdLnZlcnRpY2VzLmxlbmd0aDtlPGM7ZSsrKWQudmVydGljZXMucHVzaChtW2ZdLnZlcnRpY2VzW2VdLmNsb25lKCkpO2lmKHZvaWQgMCE9PW1bZl0ubm9ybWFscylmb3IoZC5ub3JtYWxzPVtdLGU9MCxjPW1bZl0ubm9ybWFscy5sZW5ndGg7ZTxjO2UrKylkLm5vcm1hbHMucHVzaChtW2ZdLm5vcm1hbHNbZV0uY2xvbmUoKSk7dGhpcy5tb3JwaFRhcmdldHMucHVzaChkKX1tPWEubW9ycGhOb3JtYWxzO2Y9MDtmb3IoYj1tLmxlbmd0aDtmPGI7ZisrKXtkPXt9O2lmKHZvaWQgMCE9PW1bZl0udmVydGV4Tm9ybWFscylmb3IoZC52ZXJ0ZXhOb3JtYWxzPVxuW10sZT0wLGM9bVtmXS52ZXJ0ZXhOb3JtYWxzLmxlbmd0aDtlPGM7ZSsrKWc9bVtmXS52ZXJ0ZXhOb3JtYWxzW2VdLGg9e30saC5hPWcuYS5jbG9uZSgpLGguYj1nLmIuY2xvbmUoKSxoLmM9Zy5jLmNsb25lKCksZC52ZXJ0ZXhOb3JtYWxzLnB1c2goaCk7aWYodm9pZCAwIT09bVtmXS5mYWNlTm9ybWFscylmb3IoZC5mYWNlTm9ybWFscz1bXSxlPTAsYz1tW2ZdLmZhY2VOb3JtYWxzLmxlbmd0aDtlPGM7ZSsrKWQuZmFjZU5vcm1hbHMucHVzaChtW2ZdLmZhY2VOb3JtYWxzW2VdLmNsb25lKCkpO3RoaXMubW9ycGhOb3JtYWxzLnB1c2goZCl9ZT1hLnNraW5XZWlnaHRzO2Y9MDtmb3IoYj1lLmxlbmd0aDtmPGI7ZisrKXRoaXMuc2tpbldlaWdodHMucHVzaChlW2ZdLmNsb25lKCkpO2U9YS5za2luSW5kaWNlcztmPTA7Zm9yKGI9ZS5sZW5ndGg7ZjxiO2YrKyl0aGlzLnNraW5JbmRpY2VzLnB1c2goZVtmXS5jbG9uZSgpKTtlPWEubGluZURpc3RhbmNlcztmPTA7Zm9yKGI9ZS5sZW5ndGg7ZjxcbmI7ZisrKXRoaXMubGluZURpc3RhbmNlcy5wdXNoKGVbZl0pO2Y9YS5ib3VuZGluZ0JveDtudWxsIT09ZiYmKHRoaXMuYm91bmRpbmdCb3g9Zi5jbG9uZSgpKTtmPWEuYm91bmRpbmdTcGhlcmU7bnVsbCE9PWYmJih0aGlzLmJvdW5kaW5nU3BoZXJlPWYuY2xvbmUoKSk7dGhpcy5lbGVtZW50c05lZWRVcGRhdGU9YS5lbGVtZW50c05lZWRVcGRhdGU7dGhpcy52ZXJ0aWNlc05lZWRVcGRhdGU9YS52ZXJ0aWNlc05lZWRVcGRhdGU7dGhpcy51dnNOZWVkVXBkYXRlPWEudXZzTmVlZFVwZGF0ZTt0aGlzLm5vcm1hbHNOZWVkVXBkYXRlPWEubm9ybWFsc05lZWRVcGRhdGU7dGhpcy5jb2xvcnNOZWVkVXBkYXRlPWEuY29sb3JzTmVlZFVwZGF0ZTt0aGlzLmxpbmVEaXN0YW5jZXNOZWVkVXBkYXRlPWEubGluZURpc3RhbmNlc05lZWRVcGRhdGU7dGhpcy5ncm91cHNOZWVkVXBkYXRlPWEuZ3JvdXBzTmVlZFVwZGF0ZTtyZXR1cm4gdGhpc30sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc3Bvc2VcIn0pfX0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KE0ucHJvdG90eXBlLFwibmVlZHNVcGRhdGVcIix7c2V0OmZ1bmN0aW9uKGEpeyEwPT09YSYmdGhpcy52ZXJzaW9uKyt9fSk7T2JqZWN0LmFzc2lnbihNLnByb3RvdHlwZSx7aXNCdWZmZXJBdHRyaWJ1dGU6ITAsc2V0QXJyYXk6ZnVuY3Rpb24oYSl7aWYoQXJyYXkuaXNBcnJheShhKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlOiBhcnJheSBzaG91bGQgYmUgYSBUeXBlZCBBcnJheS5cIik7dGhpcy5jb3VudD12b2lkIDAhPT1hP2EubGVuZ3RoL3RoaXMuaXRlbVNpemU6MDt0aGlzLmFycmF5PWF9LHNldER5bmFtaWM6ZnVuY3Rpb24oYSl7dGhpcy5keW5hbWljPWE7cmV0dXJuIHRoaXN9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5hcnJheT1uZXcgYS5hcnJheS5jb25zdHJ1Y3RvcihhLmFycmF5KTt0aGlzLml0ZW1TaXplPWEuaXRlbVNpemU7dGhpcy5jb3VudD1hLmNvdW50O3RoaXMubm9ybWFsaXplZD1hLm5vcm1hbGl6ZWQ7XG50aGlzLmR5bmFtaWM9YS5keW5hbWljO3JldHVybiB0aGlzfSxjb3B5QXQ6ZnVuY3Rpb24oYSxiLGMpe2EqPXRoaXMuaXRlbVNpemU7Yyo9Yi5pdGVtU2l6ZTtmb3IodmFyIGQ9MCxlPXRoaXMuaXRlbVNpemU7ZDxlO2QrKyl0aGlzLmFycmF5W2ErZF09Yi5hcnJheVtjK2RdO3JldHVybiB0aGlzfSxjb3B5QXJyYXk6ZnVuY3Rpb24oYSl7dGhpcy5hcnJheS5zZXQoYSk7cmV0dXJuIHRoaXN9LGNvcHlDb2xvcnNBcnJheTpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5hcnJheSxjPTAsZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9YVtkXTt2b2lkIDA9PT1mJiYoY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlLmNvcHlDb2xvcnNBcnJheSgpOiBjb2xvciBpcyB1bmRlZmluZWRcIixkKSxmPW5ldyBIKTtiW2MrK109Zi5yO2JbYysrXT1mLmc7YltjKytdPWYuYn1yZXR1cm4gdGhpc30sY29weUluZGljZXNBcnJheTpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5hcnJheSxcbmM9MCxkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKXt2YXIgZj1hW2RdO2JbYysrXT1mLmE7YltjKytdPWYuYjtiW2MrK109Zi5jfXJldHVybiB0aGlzfSxjb3B5VmVjdG9yMnNBcnJheTpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5hcnJheSxjPTAsZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9YVtkXTt2b2lkIDA9PT1mJiYoY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlLmNvcHlWZWN0b3Iyc0FycmF5KCk6IHZlY3RvciBpcyB1bmRlZmluZWRcIixkKSxmPW5ldyBEKTtiW2MrK109Zi54O2JbYysrXT1mLnl9cmV0dXJuIHRoaXN9LGNvcHlWZWN0b3Izc0FycmF5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmFycmF5LGM9MCxkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKXt2YXIgZj1hW2RdO3ZvaWQgMD09PWYmJihjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGUuY29weVZlY3RvcjNzQXJyYXkoKTogdmVjdG9yIGlzIHVuZGVmaW5lZFwiLGQpLGY9bmV3IHApO1xuYltjKytdPWYueDtiW2MrK109Zi55O2JbYysrXT1mLnp9cmV0dXJuIHRoaXN9LGNvcHlWZWN0b3I0c0FycmF5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmFycmF5LGM9MCxkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKXt2YXIgZj1hW2RdO3ZvaWQgMD09PWYmJihjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGUuY29weVZlY3RvcjRzQXJyYXkoKTogdmVjdG9yIGlzIHVuZGVmaW5lZFwiLGQpLGY9bmV3IGFhKTtiW2MrK109Zi54O2JbYysrXT1mLnk7YltjKytdPWYuejtiW2MrK109Zi53fXJldHVybiB0aGlzfSxzZXQ6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0wKTt0aGlzLmFycmF5LnNldChhLGIpO3JldHVybiB0aGlzfSxnZXRYOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFycmF5W2EqdGhpcy5pdGVtU2l6ZV19LHNldFg6ZnVuY3Rpb24oYSxiKXt0aGlzLmFycmF5W2EqdGhpcy5pdGVtU2l6ZV09YjtyZXR1cm4gdGhpc30sZ2V0WTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hcnJheVthKlxudGhpcy5pdGVtU2l6ZSsxXX0sc2V0WTpmdW5jdGlvbihhLGIpe3RoaXMuYXJyYXlbYSp0aGlzLml0ZW1TaXplKzFdPWI7cmV0dXJuIHRoaXN9LGdldFo6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYXJyYXlbYSp0aGlzLml0ZW1TaXplKzJdfSxzZXRaOmZ1bmN0aW9uKGEsYil7dGhpcy5hcnJheVthKnRoaXMuaXRlbVNpemUrMl09YjtyZXR1cm4gdGhpc30sZ2V0VzpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hcnJheVthKnRoaXMuaXRlbVNpemUrM119LHNldFc6ZnVuY3Rpb24oYSxiKXt0aGlzLmFycmF5W2EqdGhpcy5pdGVtU2l6ZSszXT1iO3JldHVybiB0aGlzfSxzZXRYWTpmdW5jdGlvbihhLGIsYyl7YSo9dGhpcy5pdGVtU2l6ZTt0aGlzLmFycmF5W2ErMF09Yjt0aGlzLmFycmF5W2ErMV09YztyZXR1cm4gdGhpc30sc2V0WFlaOmZ1bmN0aW9uKGEsYixjLGQpe2EqPXRoaXMuaXRlbVNpemU7dGhpcy5hcnJheVthKzBdPWI7dGhpcy5hcnJheVthKzFdPWM7dGhpcy5hcnJheVthKzJdPVxuZDtyZXR1cm4gdGhpc30sc2V0WFlaVzpmdW5jdGlvbihhLGIsYyxkLGUpe2EqPXRoaXMuaXRlbVNpemU7dGhpcy5hcnJheVthKzBdPWI7dGhpcy5hcnJheVthKzFdPWM7dGhpcy5hcnJheVthKzJdPWQ7dGhpcy5hcnJheVthKzNdPWU7cmV0dXJuIHRoaXN9LG9uVXBsb2FkOmZ1bmN0aW9uKGEpe3RoaXMub25VcGxvYWRDYWxsYmFjaz1hO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmFycmF5LHRoaXMuaXRlbVNpemUpKS5jb3B5KHRoaXMpfX0pO3VjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE0ucHJvdG90eXBlKTt1Yy5wcm90b3R5cGUuY29uc3RydWN0b3I9dWM7dmMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTS5wcm90b3R5cGUpO3ZjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj12Yzt3Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShNLnByb3RvdHlwZSk7d2MucHJvdG90eXBlLmNvbnN0cnVjdG9yPXdjO3hjLnByb3RvdHlwZT1cbk9iamVjdC5jcmVhdGUoTS5wcm90b3R5cGUpO3hjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj14YztvYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShNLnByb3RvdHlwZSk7b2IucHJvdG90eXBlLmNvbnN0cnVjdG9yPW9iO3ljLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE0ucHJvdG90eXBlKTt5Yy5wcm90b3R5cGUuY29uc3RydWN0b3I9eWM7cGIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTS5wcm90b3R5cGUpO3BiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1wYjtCLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE0ucHJvdG90eXBlKTtCLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1CO3pjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE0ucHJvdG90eXBlKTt6Yy5wcm90b3R5cGUuY29uc3RydWN0b3I9emM7T2JqZWN0LmFzc2lnbihWZS5wcm90b3R5cGUse2NvbXB1dGVHcm91cHM6ZnVuY3Rpb24oYSl7dmFyIGI9W10sYz12b2lkIDA7YT1hLmZhY2VzO2Zvcih2YXIgZD0wO2Q8YS5sZW5ndGg7ZCsrKXt2YXIgZT1cbmFbZF07aWYoZS5tYXRlcmlhbEluZGV4IT09Yyl7Yz1lLm1hdGVyaWFsSW5kZXg7dm9pZCAwIT09ZiYmKGYuY291bnQ9MypkLWYuc3RhcnQsYi5wdXNoKGYpKTt2YXIgZj17c3RhcnQ6MypkLG1hdGVyaWFsSW5kZXg6Y319fXZvaWQgMCE9PWYmJihmLmNvdW50PTMqZC1mLnN0YXJ0LGIucHVzaChmKSk7dGhpcy5ncm91cHM9Yn0sZnJvbUdlb21ldHJ5OmZ1bmN0aW9uKGEpe3ZhciBiPWEuZmFjZXMsYz1hLnZlcnRpY2VzLGQ9YS5mYWNlVmVydGV4VXZzLGU9ZFswXSYmMDxkWzBdLmxlbmd0aCxmPWRbMV0mJjA8ZFsxXS5sZW5ndGgsZz1hLm1vcnBoVGFyZ2V0cyxoPWcubGVuZ3RoO2lmKDA8aCl7dmFyIGs9W107Zm9yKHZhciBtPTA7bTxoO20rKylrW21dPVtdO3RoaXMubW9ycGhUYXJnZXRzLnBvc2l0aW9uPWt9dmFyIGw9YS5tb3JwaE5vcm1hbHMsbj1sLmxlbmd0aDtpZigwPG4pe3ZhciBwPVtdO2ZvcihtPTA7bTxuO20rKylwW21dPVtdO3RoaXMubW9ycGhUYXJnZXRzLm5vcm1hbD1wfWZvcih2YXIgcj1cbmEuc2tpbkluZGljZXMsdD1hLnNraW5XZWlnaHRzLHY9ci5sZW5ndGg9PT1jLmxlbmd0aCx3PXQubGVuZ3RoPT09Yy5sZW5ndGgsbT0wO208Yi5sZW5ndGg7bSsrKXt2YXIgej1iW21dO3RoaXMudmVydGljZXMucHVzaChjW3ouYV0sY1t6LmJdLGNbei5jXSk7dmFyIHk9ei52ZXJ0ZXhOb3JtYWxzOzM9PT15Lmxlbmd0aD90aGlzLm5vcm1hbHMucHVzaCh5WzBdLHlbMV0seVsyXSk6KHk9ei5ub3JtYWwsdGhpcy5ub3JtYWxzLnB1c2goeSx5LHkpKTt5PXoudmVydGV4Q29sb3JzOzM9PT15Lmxlbmd0aD90aGlzLmNvbG9ycy5wdXNoKHlbMF0seVsxXSx5WzJdKTooeT16LmNvbG9yLHRoaXMuY29sb3JzLnB1c2goeSx5LHkpKTshMD09PWUmJih5PWRbMF1bbV0sdm9pZCAwIT09eT90aGlzLnV2cy5wdXNoKHlbMF0seVsxXSx5WzJdKTooY29uc29sZS53YXJuKFwiVEhSRUUuRGlyZWN0R2VvbWV0cnkuZnJvbUdlb21ldHJ5KCk6IFVuZGVmaW5lZCB2ZXJ0ZXhVdiBcIixtKSx0aGlzLnV2cy5wdXNoKG5ldyBELFxubmV3IEQsbmV3IEQpKSk7ITA9PT1mJiYoeT1kWzFdW21dLHZvaWQgMCE9PXk/dGhpcy51dnMyLnB1c2goeVswXSx5WzFdLHlbMl0pOihjb25zb2xlLndhcm4oXCJUSFJFRS5EaXJlY3RHZW9tZXRyeS5mcm9tR2VvbWV0cnkoKTogVW5kZWZpbmVkIHZlcnRleFV2MiBcIixtKSx0aGlzLnV2czIucHVzaChuZXcgRCxuZXcgRCxuZXcgRCkpKTtmb3IoeT0wO3k8aDt5Kyspe3ZhciB4PWdbeV0udmVydGljZXM7a1t5XS5wdXNoKHhbei5hXSx4W3ouYl0seFt6LmNdKX1mb3IoeT0wO3k8bjt5KyspeD1sW3ldLnZlcnRleE5vcm1hbHNbbV0scFt5XS5wdXNoKHguYSx4LmIseC5jKTt2JiZ0aGlzLnNraW5JbmRpY2VzLnB1c2goclt6LmFdLHJbei5iXSxyW3ouY10pO3cmJnRoaXMuc2tpbldlaWdodHMucHVzaCh0W3ouYV0sdFt6LmJdLHRbei5jXSl9dGhpcy5jb21wdXRlR3JvdXBzKGEpO3RoaXMudmVydGljZXNOZWVkVXBkYXRlPWEudmVydGljZXNOZWVkVXBkYXRlO3RoaXMubm9ybWFsc05lZWRVcGRhdGU9XG5hLm5vcm1hbHNOZWVkVXBkYXRlO3RoaXMuY29sb3JzTmVlZFVwZGF0ZT1hLmNvbG9yc05lZWRVcGRhdGU7dGhpcy51dnNOZWVkVXBkYXRlPWEudXZzTmVlZFVwZGF0ZTt0aGlzLmdyb3Vwc05lZWRVcGRhdGU9YS5ncm91cHNOZWVkVXBkYXRlO3JldHVybiB0aGlzfX0pO3ZhciBlZz0xO0UucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh6YS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpFLGlzQnVmZmVyR2VvbWV0cnk6ITAsZ2V0SW5kZXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbmRleH0sc2V0SW5kZXg6ZnVuY3Rpb24oYSl7QXJyYXkuaXNBcnJheShhKT90aGlzLmluZGV4PW5ldyAoNjU1MzU8WGQoYSk/cGI6b2IpKGEsMSk6dGhpcy5pbmRleD1hfSxhZGRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiLGMpe2lmKGImJmIuaXNCdWZmZXJBdHRyaWJ1dGV8fGImJmIuaXNJbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZSlpZihcImluZGV4XCI9PT1hKWNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5LmFkZEF0dHJpYnV0ZTogVXNlIC5zZXRJbmRleCgpIGZvciBpbmRleCBhdHRyaWJ1dGUuXCIpLFxudGhpcy5zZXRJbmRleChiKTtlbHNlIHJldHVybiB0aGlzLmF0dHJpYnV0ZXNbYV09Yix0aGlzO2Vsc2UgY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5hZGRBdHRyaWJ1dGUoKSBub3cgZXhwZWN0cyAoIG5hbWUsIGF0dHJpYnV0ZSApLlwiKSx0aGlzLmFkZEF0dHJpYnV0ZShhLG5ldyBNKGIsYykpfSxnZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYXR0cmlidXRlc1thXX0scmVtb3ZlQXR0cmlidXRlOmZ1bmN0aW9uKGEpe2RlbGV0ZSB0aGlzLmF0dHJpYnV0ZXNbYV07cmV0dXJuIHRoaXN9LGFkZEdyb3VwOmZ1bmN0aW9uKGEsYixjKXt0aGlzLmdyb3Vwcy5wdXNoKHtzdGFydDphLGNvdW50OmIsbWF0ZXJpYWxJbmRleDp2b2lkIDAhPT1jP2M6MH0pfSxjbGVhckdyb3VwczpmdW5jdGlvbigpe3RoaXMuZ3JvdXBzPVtdfSxzZXREcmF3UmFuZ2U6ZnVuY3Rpb24oYSxiKXt0aGlzLmRyYXdSYW5nZS5zdGFydD1hO3RoaXMuZHJhd1JhbmdlLmNvdW50PWJ9LFxuYXBwbHlNYXRyaXg6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uO3ZvaWQgMCE9PWImJihhLmFwcGx5VG9CdWZmZXJBdHRyaWJ1dGUoYiksYi5uZWVkc1VwZGF0ZT0hMCk7Yj10aGlzLmF0dHJpYnV0ZXMubm9ybWFsO3ZvaWQgMCE9PWImJigobmV3IG1hKS5nZXROb3JtYWxNYXRyaXgoYSkuYXBwbHlUb0J1ZmZlckF0dHJpYnV0ZShiKSxiLm5lZWRzVXBkYXRlPSEwKTtudWxsIT09dGhpcy5ib3VuZGluZ0JveCYmdGhpcy5jb21wdXRlQm91bmRpbmdCb3goKTtudWxsIT09dGhpcy5ib3VuZGluZ1NwaGVyZSYmdGhpcy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTtyZXR1cm4gdGhpc30scm90YXRlWDpmdW5jdGlvbigpe3ZhciBhPW5ldyBPO3JldHVybiBmdW5jdGlvbihiKXthLm1ha2VSb3RhdGlvblgoYik7dGhpcy5hcHBseU1hdHJpeChhKTtyZXR1cm4gdGhpc319KCkscm90YXRlWTpmdW5jdGlvbigpe3ZhciBhPW5ldyBPO3JldHVybiBmdW5jdGlvbihiKXthLm1ha2VSb3RhdGlvblkoYik7XG50aGlzLmFwcGx5TWF0cml4KGEpO3JldHVybiB0aGlzfX0oKSxyb3RhdGVaOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE87cmV0dXJuIGZ1bmN0aW9uKGIpe2EubWFrZVJvdGF0aW9uWihiKTt0aGlzLmFwcGx5TWF0cml4KGEpO3JldHVybiB0aGlzfX0oKSx0cmFuc2xhdGU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgTztyZXR1cm4gZnVuY3Rpb24oYixjLGQpe2EubWFrZVRyYW5zbGF0aW9uKGIsYyxkKTt0aGlzLmFwcGx5TWF0cml4KGEpO3JldHVybiB0aGlzfX0oKSxzY2FsZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBPO3JldHVybiBmdW5jdGlvbihiLGMsZCl7YS5tYWtlU2NhbGUoYixjLGQpO3RoaXMuYXBwbHlNYXRyaXgoYSk7cmV0dXJuIHRoaXN9fSgpLGxvb2tBdDpmdW5jdGlvbigpe3ZhciBhPW5ldyB4O3JldHVybiBmdW5jdGlvbihiKXthLmxvb2tBdChiKTthLnVwZGF0ZU1hdHJpeCgpO3RoaXMuYXBwbHlNYXRyaXgoYS5tYXRyaXgpfX0oKSxjZW50ZXI6ZnVuY3Rpb24oKXt0aGlzLmNvbXB1dGVCb3VuZGluZ0JveCgpO1xudmFyIGE9dGhpcy5ib3VuZGluZ0JveC5nZXRDZW50ZXIoKS5uZWdhdGUoKTt0aGlzLnRyYW5zbGF0ZShhLngsYS55LGEueik7cmV0dXJuIGF9LHNldEZyb21PYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZW9tZXRyeTtpZihhLmlzUG9pbnRzfHxhLmlzTGluZSl7YT1uZXcgQigzKmIudmVydGljZXMubGVuZ3RoLDMpO3ZhciBjPW5ldyBCKDMqYi5jb2xvcnMubGVuZ3RoLDMpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixhLmNvcHlWZWN0b3Izc0FycmF5KGIudmVydGljZXMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcImNvbG9yXCIsYy5jb3B5Q29sb3JzQXJyYXkoYi5jb2xvcnMpKTtiLmxpbmVEaXN0YW5jZXMmJmIubGluZURpc3RhbmNlcy5sZW5ndGg9PT1iLnZlcnRpY2VzLmxlbmd0aCYmKGE9bmV3IEIoYi5saW5lRGlzdGFuY2VzLmxlbmd0aCwxKSx0aGlzLmFkZEF0dHJpYnV0ZShcImxpbmVEaXN0YW5jZVwiLGEuY29weUFycmF5KGIubGluZURpc3RhbmNlcykpKTtudWxsIT09Yi5ib3VuZGluZ1NwaGVyZSYmXG4odGhpcy5ib3VuZGluZ1NwaGVyZT1iLmJvdW5kaW5nU3BoZXJlLmNsb25lKCkpO251bGwhPT1iLmJvdW5kaW5nQm94JiYodGhpcy5ib3VuZGluZ0JveD1iLmJvdW5kaW5nQm94LmNsb25lKCkpfWVsc2UgYS5pc01lc2gmJmImJmIuaXNHZW9tZXRyeSYmdGhpcy5mcm9tR2VvbWV0cnkoYik7cmV0dXJuIHRoaXN9LHNldEZyb21Qb2ludHM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPWFbY107Yi5wdXNoKGUueCxlLnksZS56fHwwKX10aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIoYiwzKSk7cmV0dXJuIHRoaXN9LHVwZGF0ZUZyb21PYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZW9tZXRyeTtpZihhLmlzTWVzaCl7dmFyIGM9Yi5fX2RpcmVjdEdlb21ldHJ5OyEwPT09Yi5lbGVtZW50c05lZWRVcGRhdGUmJihjPXZvaWQgMCxiLmVsZW1lbnRzTmVlZFVwZGF0ZT0hMSk7aWYodm9pZCAwPT09YylyZXR1cm4gdGhpcy5mcm9tR2VvbWV0cnkoYik7XG5jLnZlcnRpY2VzTmVlZFVwZGF0ZT1iLnZlcnRpY2VzTmVlZFVwZGF0ZTtjLm5vcm1hbHNOZWVkVXBkYXRlPWIubm9ybWFsc05lZWRVcGRhdGU7Yy5jb2xvcnNOZWVkVXBkYXRlPWIuY29sb3JzTmVlZFVwZGF0ZTtjLnV2c05lZWRVcGRhdGU9Yi51dnNOZWVkVXBkYXRlO2MuZ3JvdXBzTmVlZFVwZGF0ZT1iLmdyb3Vwc05lZWRVcGRhdGU7Yi52ZXJ0aWNlc05lZWRVcGRhdGU9ITE7Yi5ub3JtYWxzTmVlZFVwZGF0ZT0hMTtiLmNvbG9yc05lZWRVcGRhdGU9ITE7Yi51dnNOZWVkVXBkYXRlPSExO2IuZ3JvdXBzTmVlZFVwZGF0ZT0hMTtiPWN9ITA9PT1iLnZlcnRpY2VzTmVlZFVwZGF0ZSYmKGM9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uLHZvaWQgMCE9PWMmJihjLmNvcHlWZWN0b3Izc0FycmF5KGIudmVydGljZXMpLGMubmVlZHNVcGRhdGU9ITApLGIudmVydGljZXNOZWVkVXBkYXRlPSExKTshMD09PWIubm9ybWFsc05lZWRVcGRhdGUmJihjPXRoaXMuYXR0cmlidXRlcy5ub3JtYWwsdm9pZCAwIT09XG5jJiYoYy5jb3B5VmVjdG9yM3NBcnJheShiLm5vcm1hbHMpLGMubmVlZHNVcGRhdGU9ITApLGIubm9ybWFsc05lZWRVcGRhdGU9ITEpOyEwPT09Yi5jb2xvcnNOZWVkVXBkYXRlJiYoYz10aGlzLmF0dHJpYnV0ZXMuY29sb3Isdm9pZCAwIT09YyYmKGMuY29weUNvbG9yc0FycmF5KGIuY29sb3JzKSxjLm5lZWRzVXBkYXRlPSEwKSxiLmNvbG9yc05lZWRVcGRhdGU9ITEpO2IudXZzTmVlZFVwZGF0ZSYmKGM9dGhpcy5hdHRyaWJ1dGVzLnV2LHZvaWQgMCE9PWMmJihjLmNvcHlWZWN0b3Iyc0FycmF5KGIudXZzKSxjLm5lZWRzVXBkYXRlPSEwKSxiLnV2c05lZWRVcGRhdGU9ITEpO2IubGluZURpc3RhbmNlc05lZWRVcGRhdGUmJihjPXRoaXMuYXR0cmlidXRlcy5saW5lRGlzdGFuY2Usdm9pZCAwIT09YyYmKGMuY29weUFycmF5KGIubGluZURpc3RhbmNlcyksYy5uZWVkc1VwZGF0ZT0hMCksYi5saW5lRGlzdGFuY2VzTmVlZFVwZGF0ZT0hMSk7Yi5ncm91cHNOZWVkVXBkYXRlJiYoYi5jb21wdXRlR3JvdXBzKGEuZ2VvbWV0cnkpLFxudGhpcy5ncm91cHM9Yi5ncm91cHMsYi5ncm91cHNOZWVkVXBkYXRlPSExKTtyZXR1cm4gdGhpc30sZnJvbUdlb21ldHJ5OmZ1bmN0aW9uKGEpe2EuX19kaXJlY3RHZW9tZXRyeT0obmV3IFZlKS5mcm9tR2VvbWV0cnkoYSk7cmV0dXJuIHRoaXMuZnJvbURpcmVjdEdlb21ldHJ5KGEuX19kaXJlY3RHZW9tZXRyeSl9LGZyb21EaXJlY3RHZW9tZXRyeTpmdW5jdGlvbihhKXt2YXIgYj1uZXcgRmxvYXQzMkFycmF5KDMqYS52ZXJ0aWNlcy5sZW5ndGgpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIiwobmV3IE0oYiwzKSkuY29weVZlY3RvcjNzQXJyYXkoYS52ZXJ0aWNlcykpOzA8YS5ub3JtYWxzLmxlbmd0aCYmKGI9bmV3IEZsb2F0MzJBcnJheSgzKmEubm9ybWFscy5sZW5ndGgpLHRoaXMuYWRkQXR0cmlidXRlKFwibm9ybWFsXCIsKG5ldyBNKGIsMykpLmNvcHlWZWN0b3Izc0FycmF5KGEubm9ybWFscykpKTswPGEuY29sb3JzLmxlbmd0aCYmKGI9bmV3IEZsb2F0MzJBcnJheSgzKmEuY29sb3JzLmxlbmd0aCksXG50aGlzLmFkZEF0dHJpYnV0ZShcImNvbG9yXCIsKG5ldyBNKGIsMykpLmNvcHlDb2xvcnNBcnJheShhLmNvbG9ycykpKTswPGEudXZzLmxlbmd0aCYmKGI9bmV3IEZsb2F0MzJBcnJheSgyKmEudXZzLmxlbmd0aCksdGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLChuZXcgTShiLDIpKS5jb3B5VmVjdG9yMnNBcnJheShhLnV2cykpKTswPGEudXZzMi5sZW5ndGgmJihiPW5ldyBGbG9hdDMyQXJyYXkoMiphLnV2czIubGVuZ3RoKSx0aGlzLmFkZEF0dHJpYnV0ZShcInV2MlwiLChuZXcgTShiLDIpKS5jb3B5VmVjdG9yMnNBcnJheShhLnV2czIpKSk7MDxhLmluZGljZXMubGVuZ3RoJiYoYj1uZXcgKDY1NTM1PFhkKGEuaW5kaWNlcyk/VWludDMyQXJyYXk6VWludDE2QXJyYXkpKDMqYS5pbmRpY2VzLmxlbmd0aCksdGhpcy5zZXRJbmRleCgobmV3IE0oYiwxKSkuY29weUluZGljZXNBcnJheShhLmluZGljZXMpKSk7dGhpcy5ncm91cHM9YS5ncm91cHM7Zm9yKHZhciBjIGluIGEubW9ycGhUYXJnZXRzKXtmb3IodmFyIGI9XG5bXSxkPWEubW9ycGhUYXJnZXRzW2NdLGU9MCxmPWQubGVuZ3RoO2U8ZjtlKyspe3ZhciBnPWRbZV0saD1uZXcgQigzKmcubGVuZ3RoLDMpO2IucHVzaChoLmNvcHlWZWN0b3Izc0FycmF5KGcpKX10aGlzLm1vcnBoQXR0cmlidXRlc1tjXT1ifTA8YS5za2luSW5kaWNlcy5sZW5ndGgmJihjPW5ldyBCKDQqYS5za2luSW5kaWNlcy5sZW5ndGgsNCksdGhpcy5hZGRBdHRyaWJ1dGUoXCJza2luSW5kZXhcIixjLmNvcHlWZWN0b3I0c0FycmF5KGEuc2tpbkluZGljZXMpKSk7MDxhLnNraW5XZWlnaHRzLmxlbmd0aCYmKGM9bmV3IEIoNCphLnNraW5XZWlnaHRzLmxlbmd0aCw0KSx0aGlzLmFkZEF0dHJpYnV0ZShcInNraW5XZWlnaHRcIixjLmNvcHlWZWN0b3I0c0FycmF5KGEuc2tpbldlaWdodHMpKSk7bnVsbCE9PWEuYm91bmRpbmdTcGhlcmUmJih0aGlzLmJvdW5kaW5nU3BoZXJlPWEuYm91bmRpbmdTcGhlcmUuY2xvbmUoKSk7bnVsbCE9PWEuYm91bmRpbmdCb3gmJih0aGlzLmJvdW5kaW5nQm94PVxuYS5ib3VuZGluZ0JveC5jbG9uZSgpKTtyZXR1cm4gdGhpc30sY29tcHV0ZUJvdW5kaW5nQm94OmZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuYm91bmRpbmdCb3gmJih0aGlzLmJvdW5kaW5nQm94PW5ldyBYYSk7dmFyIGE9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uO3ZvaWQgMCE9PWE/dGhpcy5ib3VuZGluZ0JveC5zZXRGcm9tQnVmZmVyQXR0cmlidXRlKGEpOnRoaXMuYm91bmRpbmdCb3gubWFrZUVtcHR5KCk7KGlzTmFOKHRoaXMuYm91bmRpbmdCb3gubWluLngpfHxpc05hTih0aGlzLmJvdW5kaW5nQm94Lm1pbi55KXx8aXNOYU4odGhpcy5ib3VuZGluZ0JveC5taW4ueikpJiZjb25zb2xlLmVycm9yKCdUSFJFRS5CdWZmZXJHZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3g6IENvbXB1dGVkIG1pbi9tYXggaGF2ZSBOYU4gdmFsdWVzLiBUaGUgXCJwb3NpdGlvblwiIGF0dHJpYnV0ZSBpcyBsaWtlbHkgdG8gaGF2ZSBOYU4gdmFsdWVzLicsdGhpcyl9LGNvbXB1dGVCb3VuZGluZ1NwaGVyZTpmdW5jdGlvbigpe3ZhciBhPVxubmV3IFhhLGI9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuYm91bmRpbmdTcGhlcmUmJih0aGlzLmJvdW5kaW5nU3BoZXJlPW5ldyBJYSk7dmFyIGM9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uO2lmKGMpe3ZhciBkPXRoaXMuYm91bmRpbmdTcGhlcmUuY2VudGVyO2Euc2V0RnJvbUJ1ZmZlckF0dHJpYnV0ZShjKTthLmdldENlbnRlcihkKTtmb3IodmFyIGU9MCxmPTAsZz1jLmNvdW50O2Y8ZztmKyspYi54PWMuZ2V0WChmKSxiLnk9Yy5nZXRZKGYpLGIuej1jLmdldFooZiksZT1NYXRoLm1heChlLGQuZGlzdGFuY2VUb1NxdWFyZWQoYikpO3RoaXMuYm91bmRpbmdTcGhlcmUucmFkaXVzPU1hdGguc3FydChlKTtpc05hTih0aGlzLmJvdW5kaW5nU3BoZXJlLnJhZGl1cykmJmNvbnNvbGUuZXJyb3IoJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpOiBDb21wdXRlZCByYWRpdXMgaXMgTmFOLiBUaGUgXCJwb3NpdGlvblwiIGF0dHJpYnV0ZSBpcyBsaWtlbHkgdG8gaGF2ZSBOYU4gdmFsdWVzLicsXG50aGlzKX19fSgpLGNvbXB1dGVGYWNlTm9ybWFsczpmdW5jdGlvbigpe30sY29tcHV0ZVZlcnRleE5vcm1hbHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmluZGV4LGI9dGhpcy5hdHRyaWJ1dGVzLGM9dGhpcy5ncm91cHM7aWYoYi5wb3NpdGlvbil7dmFyIGQ9Yi5wb3NpdGlvbi5hcnJheTtpZih2b2lkIDA9PT1iLm5vcm1hbCl0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBNKG5ldyBGbG9hdDMyQXJyYXkoZC5sZW5ndGgpLDMpKTtlbHNlIGZvcih2YXIgZT1iLm5vcm1hbC5hcnJheSxmPTAsZz1lLmxlbmd0aDtmPGc7ZisrKWVbZl09MDt2YXIgZT1iLm5vcm1hbC5hcnJheSxoPW5ldyBwLGs9bmV3IHAsbT1uZXcgcCxsPW5ldyBwLG49bmV3IHA7aWYoYSl7YT1hLmFycmF5OzA9PT1jLmxlbmd0aCYmdGhpcy5hZGRHcm91cCgwLGEubGVuZ3RoKTtmb3IodmFyIHU9MCxyPWMubGVuZ3RoO3U8cjsrK3Upe2Y9Y1t1XTtnPWYuc3RhcnQ7dmFyIHQ9Zi5jb3VudDtmPWc7Zm9yKGcrPXQ7Zjxcbmc7Zis9Myl7dD0zKmFbZiswXTt2YXIgdj0zKmFbZisxXTt2YXIgdz0zKmFbZisyXTtoLmZyb21BcnJheShkLHQpO2suZnJvbUFycmF5KGQsdik7bS5mcm9tQXJyYXkoZCx3KTtsLnN1YlZlY3RvcnMobSxrKTtuLnN1YlZlY3RvcnMoaCxrKTtsLmNyb3NzKG4pO2VbdF0rPWwueDtlW3QrMV0rPWwueTtlW3QrMl0rPWwuejtlW3ZdKz1sLng7ZVt2KzFdKz1sLnk7ZVt2KzJdKz1sLno7ZVt3XSs9bC54O2VbdysxXSs9bC55O2VbdysyXSs9bC56fX19ZWxzZSBmb3IoZj0wLGc9ZC5sZW5ndGg7ZjxnO2YrPTkpaC5mcm9tQXJyYXkoZCxmKSxrLmZyb21BcnJheShkLGYrMyksbS5mcm9tQXJyYXkoZCxmKzYpLGwuc3ViVmVjdG9ycyhtLGspLG4uc3ViVmVjdG9ycyhoLGspLGwuY3Jvc3MobiksZVtmXT1sLngsZVtmKzFdPWwueSxlW2YrMl09bC56LGVbZiszXT1sLngsZVtmKzRdPWwueSxlW2YrNV09bC56LGVbZis2XT1sLngsZVtmKzddPWwueSxlW2YrOF09bC56O3RoaXMubm9ybWFsaXplTm9ybWFscygpO1xuYi5ub3JtYWwubmVlZHNVcGRhdGU9ITB9fSxtZXJnZTpmdW5jdGlvbihhLGIpe2lmKGEmJmEuaXNCdWZmZXJHZW9tZXRyeSl7dm9pZCAwPT09YiYmKGI9MCk7dmFyIGM9dGhpcy5hdHRyaWJ1dGVzLGQ7Zm9yKGQgaW4gYylpZih2b2lkIDAhPT1hLmF0dHJpYnV0ZXNbZF0pZm9yKHZhciBlPWNbZF0uYXJyYXksZj1hLmF0dHJpYnV0ZXNbZF0sZz1mLmFycmF5LGg9MCxmPWYuaXRlbVNpemUqYjtoPGcubGVuZ3RoO2grKyxmKyspZVtmXT1nW2hdO3JldHVybiB0aGlzfWNvbnNvbGUuZXJyb3IoXCJUSFJFRS5CdWZmZXJHZW9tZXRyeS5tZXJnZSgpOiBnZW9tZXRyeSBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnkuXCIsYSl9LG5vcm1hbGl6ZU5vcm1hbHM6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIGI9dGhpcy5hdHRyaWJ1dGVzLm5vcm1hbCxjPTAsZD1iLmNvdW50O2M8ZDtjKyspYS54PWIuZ2V0WChjKSxhLnk9Yi5nZXRZKGMpLFxuYS56PWIuZ2V0WihjKSxhLm5vcm1hbGl6ZSgpLGIuc2V0WFlaKGMsYS54LGEueSxhLnopfX0oKSx0b05vbkluZGV4ZWQ6ZnVuY3Rpb24oKXtpZihudWxsPT09dGhpcy5pbmRleClyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnkudG9Ob25JbmRleGVkKCk6IEdlb21ldHJ5IGlzIGFscmVhZHkgbm9uLWluZGV4ZWQuXCIpLHRoaXM7dmFyIGE9bmV3IEUsYj10aGlzLmluZGV4LmFycmF5LGM9dGhpcy5hdHRyaWJ1dGVzLGQ7Zm9yKGQgaW4gYyl7Zm9yKHZhciBlPWNbZF0sZj1lLmFycmF5LGU9ZS5pdGVtU2l6ZSxnPW5ldyBmLmNvbnN0cnVjdG9yKGIubGVuZ3RoKmUpLGgsaz0wLG09MCxsPWIubGVuZ3RoO208bDttKyspe2g9YlttXSplO2Zvcih2YXIgbj0wO248ZTtuKyspZ1trKytdPWZbaCsrXX1hLmFkZEF0dHJpYnV0ZShkLG5ldyBNKGcsZSkpfXJldHVybiBhfSx0b0pTT046ZnVuY3Rpb24oKXt2YXIgYT17bWV0YWRhdGE6e3ZlcnNpb246NC41LHR5cGU6XCJCdWZmZXJHZW9tZXRyeVwiLFxuZ2VuZXJhdG9yOlwiQnVmZmVyR2VvbWV0cnkudG9KU09OXCJ9fTthLnV1aWQ9dGhpcy51dWlkO2EudHlwZT10aGlzLnR5cGU7XCJcIiE9PXRoaXMubmFtZSYmKGEubmFtZT10aGlzLm5hbWUpO2lmKHZvaWQgMCE9PXRoaXMucGFyYW1ldGVycyl7dmFyIGI9dGhpcy5wYXJhbWV0ZXJzO2Zvcih2YXIgYyBpbiBiKXZvaWQgMCE9PWJbY10mJihhW2NdPWJbY10pO3JldHVybiBhfWEuZGF0YT17YXR0cmlidXRlczp7fX07dmFyIGQ9dGhpcy5pbmRleDtudWxsIT09ZCYmKGI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZC5hcnJheSksYS5kYXRhLmluZGV4PXt0eXBlOmQuYXJyYXkuY29uc3RydWN0b3IubmFtZSxhcnJheTpifSk7ZD10aGlzLmF0dHJpYnV0ZXM7Zm9yKGMgaW4gZCl7dmFyIGU9ZFtjXTtiPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUuYXJyYXkpO2EuZGF0YS5hdHRyaWJ1dGVzW2NdPXtpdGVtU2l6ZTplLml0ZW1TaXplLHR5cGU6ZS5hcnJheS5jb25zdHJ1Y3Rvci5uYW1lLFxuYXJyYXk6Yixub3JtYWxpemVkOmUubm9ybWFsaXplZH19Yz10aGlzLmdyb3VwczswPGMubGVuZ3RoJiYoYS5kYXRhLmdyb3Vwcz1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGMpKSk7Yz10aGlzLmJvdW5kaW5nU3BoZXJlO251bGwhPT1jJiYoYS5kYXRhLmJvdW5kaW5nU3BoZXJlPXtjZW50ZXI6Yy5jZW50ZXIudG9BcnJheSgpLHJhZGl1czpjLnJhZGl1c30pO3JldHVybiBhfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgRSkuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihhKXt2YXIgYjt0aGlzLmluZGV4PW51bGw7dGhpcy5hdHRyaWJ1dGVzPXt9O3RoaXMubW9ycGhBdHRyaWJ1dGVzPXt9O3RoaXMuZ3JvdXBzPVtdO3RoaXMuYm91bmRpbmdTcGhlcmU9dGhpcy5ib3VuZGluZ0JveD1udWxsO3RoaXMubmFtZT1hLm5hbWU7dmFyIGM9YS5pbmRleDtudWxsIT09YyYmdGhpcy5zZXRJbmRleChjLmNsb25lKCkpO2M9YS5hdHRyaWJ1dGVzO2ZvcihnIGluIGMpdGhpcy5hZGRBdHRyaWJ1dGUoZyxcbmNbZ10uY2xvbmUoKSk7dmFyIGQ9YS5tb3JwaEF0dHJpYnV0ZXM7Zm9yKGcgaW4gZCl7dmFyIGU9W10sZj1kW2ddO2M9MDtmb3IoYj1mLmxlbmd0aDtjPGI7YysrKWUucHVzaChmW2NdLmNsb25lKCkpO3RoaXMubW9ycGhBdHRyaWJ1dGVzW2ddPWV9dmFyIGc9YS5ncm91cHM7Yz0wO2ZvcihiPWcubGVuZ3RoO2M8YjtjKyspZD1nW2NdLHRoaXMuYWRkR3JvdXAoZC5zdGFydCxkLmNvdW50LGQubWF0ZXJpYWxJbmRleCk7Zz1hLmJvdW5kaW5nQm94O251bGwhPT1nJiYodGhpcy5ib3VuZGluZ0JveD1nLmNsb25lKCkpO2c9YS5ib3VuZGluZ1NwaGVyZTtudWxsIT09ZyYmKHRoaXMuYm91bmRpbmdTcGhlcmU9Zy5jbG9uZSgpKTt0aGlzLmRyYXdSYW5nZS5zdGFydD1hLmRyYXdSYW5nZS5zdGFydDt0aGlzLmRyYXdSYW5nZS5jb3VudD1hLmRyYXdSYW5nZS5jb3VudDtyZXR1cm4gdGhpc30sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc3Bvc2VcIn0pfX0pO1xuTWIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTC5wcm90b3R5cGUpO01iLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1NYjtxYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFLnByb3RvdHlwZSk7cWIucHJvdG90eXBlLmNvbnN0cnVjdG9yPXFiO0FjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEwucHJvdG90eXBlKTtBYy5wcm90b3R5cGUuY29uc3RydWN0b3I9QWM7cmIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRS5wcm90b3R5cGUpO3JiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1yYjtBYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShQLnByb3RvdHlwZSk7QWEucHJvdG90eXBlLmNvbnN0cnVjdG9yPUFhO0FhLnByb3RvdHlwZS5pc01lc2hCYXNpY01hdGVyaWFsPSEwO0FhLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe1AucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuY29sb3IuY29weShhLmNvbG9yKTt0aGlzLm1hcD1hLm1hcDt0aGlzLmxpZ2h0TWFwPWEubGlnaHRNYXA7XG50aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PWEubGlnaHRNYXBJbnRlbnNpdHk7dGhpcy5hb01hcD1hLmFvTWFwO3RoaXMuYW9NYXBJbnRlbnNpdHk9YS5hb01hcEludGVuc2l0eTt0aGlzLnNwZWN1bGFyTWFwPWEuc3BlY3VsYXJNYXA7dGhpcy5hbHBoYU1hcD1hLmFscGhhTWFwO3RoaXMuZW52TWFwPWEuZW52TWFwO3RoaXMuY29tYmluZT1hLmNvbWJpbmU7dGhpcy5yZWZsZWN0aXZpdHk9YS5yZWZsZWN0aXZpdHk7dGhpcy5yZWZyYWN0aW9uUmF0aW89YS5yZWZyYWN0aW9uUmF0aW87dGhpcy53aXJlZnJhbWU9YS53aXJlZnJhbWU7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9YS53aXJlZnJhbWVMaW5ld2lkdGg7dGhpcy53aXJlZnJhbWVMaW5lY2FwPWEud2lyZWZyYW1lTGluZWNhcDt0aGlzLndpcmVmcmFtZUxpbmVqb2luPWEud2lyZWZyYW1lTGluZWpvaW47dGhpcy5za2lubmluZz1hLnNraW5uaW5nO3RoaXMubW9ycGhUYXJnZXRzPWEubW9ycGhUYXJnZXRzO3JldHVybiB0aGlzfTtGYS5wcm90b3R5cGU9XG5PYmplY3QuY3JlYXRlKFAucHJvdG90eXBlKTtGYS5wcm90b3R5cGUuY29uc3RydWN0b3I9RmE7RmEucHJvdG90eXBlLmlzU2hhZGVyTWF0ZXJpYWw9ITA7RmEucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7UC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5mcmFnbWVudFNoYWRlcj1hLmZyYWdtZW50U2hhZGVyO3RoaXMudmVydGV4U2hhZGVyPWEudmVydGV4U2hhZGVyO3RoaXMudW5pZm9ybXM9R2EuY2xvbmUoYS51bmlmb3Jtcyk7dGhpcy5kZWZpbmVzPWEuZGVmaW5lczt0aGlzLndpcmVmcmFtZT1hLndpcmVmcmFtZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD1hLndpcmVmcmFtZUxpbmV3aWR0aDt0aGlzLmxpZ2h0cz1hLmxpZ2h0czt0aGlzLmNsaXBwaW5nPWEuY2xpcHBpbmc7dGhpcy5za2lubmluZz1hLnNraW5uaW5nO3RoaXMubW9ycGhUYXJnZXRzPWEubW9ycGhUYXJnZXRzO3RoaXMubW9ycGhOb3JtYWxzPWEubW9ycGhOb3JtYWxzO3RoaXMuZXh0ZW5zaW9ucz1cbmEuZXh0ZW5zaW9ucztyZXR1cm4gdGhpc307RmEucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbihhKXthPVAucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsYSk7YS51bmlmb3Jtcz10aGlzLnVuaWZvcm1zO2EudmVydGV4U2hhZGVyPXRoaXMudmVydGV4U2hhZGVyO2EuZnJhZ21lbnRTaGFkZXI9dGhpcy5mcmFnbWVudFNoYWRlcjtyZXR1cm4gYX07T2JqZWN0LmFzc2lnbihzYi5wcm90b3R5cGUse3NldDpmdW5jdGlvbihhLGIpe3RoaXMub3JpZ2luLmNvcHkoYSk7dGhpcy5kaXJlY3Rpb24uY29weShiKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5vcmlnaW4uY29weShhLm9yaWdpbik7dGhpcy5kaXJlY3Rpb24uY29weShhLmRpcmVjdGlvbik7cmV0dXJuIHRoaXN9LGF0OmZ1bmN0aW9uKGEsYil7cmV0dXJuKGJ8fG5ldyBwKS5jb3B5KHRoaXMuZGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcihhKS5hZGQodGhpcy5vcmlnaW4pfSxcbmxvb2tBdDpmdW5jdGlvbihhKXt0aGlzLmRpcmVjdGlvbi5jb3B5KGEpLnN1Yih0aGlzLm9yaWdpbikubm9ybWFsaXplKCk7cmV0dXJuIHRoaXN9LHJlY2FzdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBwO3JldHVybiBmdW5jdGlvbihiKXt0aGlzLm9yaWdpbi5jb3B5KHRoaXMuYXQoYixhKSk7cmV0dXJuIHRoaXN9fSgpLGNsb3Nlc3RQb2ludFRvUG9pbnQ6ZnVuY3Rpb24oYSxiKXtiPWJ8fG5ldyBwO2Iuc3ViVmVjdG9ycyhhLHRoaXMub3JpZ2luKTthPWIuZG90KHRoaXMuZGlyZWN0aW9uKTtyZXR1cm4gMD5hP2IuY29weSh0aGlzLm9yaWdpbik6Yi5jb3B5KHRoaXMuZGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcihhKS5hZGQodGhpcy5vcmlnaW4pfSxkaXN0YW5jZVRvUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGguc3FydCh0aGlzLmRpc3RhbmNlU3FUb1BvaW50KGEpKX0sZGlzdGFuY2VTcVRvUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9XG5hLnN1YlZlY3RvcnMoYix0aGlzLm9yaWdpbikuZG90KHRoaXMuZGlyZWN0aW9uKTtpZigwPmMpcmV0dXJuIHRoaXMub3JpZ2luLmRpc3RhbmNlVG9TcXVhcmVkKGIpO2EuY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIoYykuYWRkKHRoaXMub3JpZ2luKTtyZXR1cm4gYS5kaXN0YW5jZVRvU3F1YXJlZChiKX19KCksZGlzdGFuY2VTcVRvU2VnbWVudDpmdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI9bmV3IHAsYz1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oZCxlLGYsZyl7YS5jb3B5KGQpLmFkZChlKS5tdWx0aXBseVNjYWxhciguNSk7Yi5jb3B5KGUpLnN1YihkKS5ub3JtYWxpemUoKTtjLmNvcHkodGhpcy5vcmlnaW4pLnN1YihhKTt2YXIgaD0uNSpkLmRpc3RhbmNlVG8oZSksaz0tdGhpcy5kaXJlY3Rpb24uZG90KGIpLG09Yy5kb3QodGhpcy5kaXJlY3Rpb24pLGw9LWMuZG90KGIpLG49Yy5sZW5ndGhTcSgpLHA9TWF0aC5hYnMoMS1rKmspO2lmKDA8cCl7ZD1rKmwtbTtlPWsqXG5tLWw7dmFyIHI9aCpwOzA8PWQ/ZT49LXI/ZTw9cj8oaD0xL3AsZCo9aCxlKj1oLGs9ZCooZCtrKmUrMiptKStlKihrKmQrZSsyKmwpK24pOihlPWgsZD1NYXRoLm1heCgwLC0oayplK20pKSxrPS1kKmQrZSooZSsyKmwpK24pOihlPS1oLGQ9TWF0aC5tYXgoMCwtKGsqZSttKSksaz0tZCpkK2UqKGUrMipsKStuKTplPD0tcj8oZD1NYXRoLm1heCgwLC0oLWsqaCttKSksZT0wPGQ/LWg6TWF0aC5taW4oTWF0aC5tYXgoLWgsLWwpLGgpLGs9LWQqZCtlKihlKzIqbCkrbik6ZTw9cj8oZD0wLGU9TWF0aC5taW4oTWF0aC5tYXgoLWgsLWwpLGgpLGs9ZSooZSsyKmwpK24pOihkPU1hdGgubWF4KDAsLShrKmgrbSkpLGU9MDxkP2g6TWF0aC5taW4oTWF0aC5tYXgoLWgsLWwpLGgpLGs9LWQqZCtlKihlKzIqbCkrbil9ZWxzZSBlPTA8az8taDpoLGQ9TWF0aC5tYXgoMCwtKGsqZSttKSksaz0tZCpkK2UqKGUrMipsKStuO2YmJmYuY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIoZCkuYWRkKHRoaXMub3JpZ2luKTtcbmcmJmcuY29weShiKS5tdWx0aXBseVNjYWxhcihlKS5hZGQoYSk7cmV0dXJuIGt9fSgpLGludGVyc2VjdFNwaGVyZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBwO3JldHVybiBmdW5jdGlvbihiLGMpe2Euc3ViVmVjdG9ycyhiLmNlbnRlcix0aGlzLm9yaWdpbik7dmFyIGQ9YS5kb3QodGhpcy5kaXJlY3Rpb24pLGU9YS5kb3QoYSktZCpkO2I9Yi5yYWRpdXMqYi5yYWRpdXM7aWYoZT5iKXJldHVybiBudWxsO2I9TWF0aC5zcXJ0KGItZSk7ZT1kLWI7ZCs9YjtyZXR1cm4gMD5lJiYwPmQ/bnVsbDowPmU/dGhpcy5hdChkLGMpOnRoaXMuYXQoZSxjKX19KCksaW50ZXJzZWN0c1NwaGVyZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kaXN0YW5jZVRvUG9pbnQoYS5jZW50ZXIpPD1hLnJhZGl1c30sZGlzdGFuY2VUb1BsYW5lOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9ybWFsLmRvdCh0aGlzLmRpcmVjdGlvbik7aWYoMD09PWIpcmV0dXJuIDA9PT1hLmRpc3RhbmNlVG9Qb2ludCh0aGlzLm9yaWdpbik/XG4wOm51bGw7YT0tKHRoaXMub3JpZ2luLmRvdChhLm5vcm1hbCkrYS5jb25zdGFudCkvYjtyZXR1cm4gMDw9YT9hOm51bGx9LGludGVyc2VjdFBsYW5lOmZ1bmN0aW9uKGEsYil7YT10aGlzLmRpc3RhbmNlVG9QbGFuZShhKTtyZXR1cm4gbnVsbD09PWE/bnVsbDp0aGlzLmF0KGEsYil9LGludGVyc2VjdHNQbGFuZTpmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3RhbmNlVG9Qb2ludCh0aGlzLm9yaWdpbik7cmV0dXJuIDA9PT1ifHwwPmEubm9ybWFsLmRvdCh0aGlzLmRpcmVjdGlvbikqYj8hMDohMX0saW50ZXJzZWN0Qm94OmZ1bmN0aW9uKGEsYil7dmFyIGM9MS90aGlzLmRpcmVjdGlvbi54O3ZhciBkPTEvdGhpcy5kaXJlY3Rpb24ueTt2YXIgZT0xL3RoaXMuZGlyZWN0aW9uLnosZj10aGlzLm9yaWdpbjtpZigwPD1jKXt2YXIgZz0oYS5taW4ueC1mLngpKmM7Yyo9YS5tYXgueC1mLnh9ZWxzZSBnPShhLm1heC54LWYueCkqYyxjKj1hLm1pbi54LWYueDtpZigwPD1kKXt2YXIgaD0oYS5taW4ueS1cbmYueSkqZDtkKj1hLm1heC55LWYueX1lbHNlIGg9KGEubWF4LnktZi55KSpkLGQqPWEubWluLnktZi55O2lmKGc+ZHx8aD5jKXJldHVybiBudWxsO2lmKGg+Z3x8ZyE9PWcpZz1oO2lmKGQ8Y3x8YyE9PWMpYz1kOzA8PWU/KGg9KGEubWluLnotZi56KSplLGE9KGEubWF4LnotZi56KSplKTooaD0oYS5tYXguei1mLnopKmUsYT0oYS5taW4uei1mLnopKmUpO2lmKGc+YXx8aD5jKXJldHVybiBudWxsO2lmKGg+Z3x8ZyE9PWcpZz1oO2lmKGE8Y3x8YyE9PWMpYz1hO3JldHVybiAwPmM/bnVsbDp0aGlzLmF0KDA8PWc/ZzpjLGIpfSxpbnRlcnNlY3RzQm94OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBudWxsIT09dGhpcy5pbnRlcnNlY3RCb3goYixhKX19KCksaW50ZXJzZWN0VHJpYW5nbGU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBwLGM9bmV3IHAsZD1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oZSxmLGcsaCxrKXtiLnN1YlZlY3RvcnMoZixcbmUpO2Muc3ViVmVjdG9ycyhnLGUpO2QuY3Jvc3NWZWN0b3JzKGIsYyk7Zj10aGlzLmRpcmVjdGlvbi5kb3QoZCk7aWYoMDxmKXtpZihoKXJldHVybiBudWxsO2g9MX1lbHNlIGlmKDA+ZiloPS0xLGY9LWY7ZWxzZSByZXR1cm4gbnVsbDthLnN1YlZlY3RvcnModGhpcy5vcmlnaW4sZSk7ZT1oKnRoaXMuZGlyZWN0aW9uLmRvdChjLmNyb3NzVmVjdG9ycyhhLGMpKTtpZigwPmUpcmV0dXJuIG51bGw7Zz1oKnRoaXMuZGlyZWN0aW9uLmRvdChiLmNyb3NzKGEpKTtpZigwPmd8fGUrZz5mKXJldHVybiBudWxsO2U9LWgqYS5kb3QoZCk7cmV0dXJuIDA+ZT9udWxsOnRoaXMuYXQoZS9mLGspfX0oKSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oYSl7dGhpcy5vcmlnaW4uYXBwbHlNYXRyaXg0KGEpO3RoaXMuZGlyZWN0aW9uLnRyYW5zZm9ybURpcmVjdGlvbihhKTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLm9yaWdpbi5lcXVhbHModGhpcy5vcmlnaW4pJiZhLmRpcmVjdGlvbi5lcXVhbHModGhpcy5kaXJlY3Rpb24pfX0pO1xuT2JqZWN0LmFzc2lnbihOYi5wcm90b3R5cGUse3NldDpmdW5jdGlvbihhLGIpe3RoaXMuc3RhcnQuY29weShhKTt0aGlzLmVuZC5jb3B5KGIpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihhKXt0aGlzLnN0YXJ0LmNvcHkoYS5zdGFydCk7dGhpcy5lbmQuY29weShhLmVuZCk7cmV0dXJuIHRoaXN9LGdldENlbnRlcjpmdW5jdGlvbihhKXtyZXR1cm4oYXx8bmV3IHApLmFkZFZlY3RvcnModGhpcy5zdGFydCx0aGlzLmVuZCkubXVsdGlwbHlTY2FsYXIoLjUpfSxkZWx0YTpmdW5jdGlvbihhKXtyZXR1cm4oYXx8bmV3IHApLnN1YlZlY3RvcnModGhpcy5lbmQsdGhpcy5zdGFydCl9LGRpc3RhbmNlU3E6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydC5kaXN0YW5jZVRvU3F1YXJlZCh0aGlzLmVuZCl9LGRpc3RhbmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhcnQuZGlzdGFuY2VUbyh0aGlzLmVuZCl9LFxuYXQ6ZnVuY3Rpb24oYSxiKXtiPWJ8fG5ldyBwO3JldHVybiB0aGlzLmRlbHRhKGIpLm11bHRpcGx5U2NhbGFyKGEpLmFkZCh0aGlzLnN0YXJ0KX0sY2xvc2VzdFBvaW50VG9Qb2ludFBhcmFtZXRlcjpmdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7YS5zdWJWZWN0b3JzKGMsdGhpcy5zdGFydCk7Yi5zdWJWZWN0b3JzKHRoaXMuZW5kLHRoaXMuc3RhcnQpO2M9Yi5kb3QoYik7Yz1iLmRvdChhKS9jO2QmJihjPVEuY2xhbXAoYywwLDEpKTtyZXR1cm4gY319KCksY2xvc2VzdFBvaW50VG9Qb2ludDpmdW5jdGlvbihhLGIsYyl7YT10aGlzLmNsb3Nlc3RQb2ludFRvUG9pbnRQYXJhbWV0ZXIoYSxiKTtjPWN8fG5ldyBwO3JldHVybiB0aGlzLmRlbHRhKGMpLm11bHRpcGx5U2NhbGFyKGEpLmFkZCh0aGlzLnN0YXJ0KX0sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKGEpe3RoaXMuc3RhcnQuYXBwbHlNYXRyaXg0KGEpO3RoaXMuZW5kLmFwcGx5TWF0cml4NChhKTtcbnJldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3RhcnQuZXF1YWxzKHRoaXMuc3RhcnQpJiZhLmVuZC5lcXVhbHModGhpcy5lbmQpfX0pO09iamVjdC5hc3NpZ24oWmEse25vcm1hbDpmdW5jdGlvbigpe3ZhciBhPW5ldyBwO3JldHVybiBmdW5jdGlvbihiLGMsZCxlKXtlPWV8fG5ldyBwO2Uuc3ViVmVjdG9ycyhkLGMpO2Euc3ViVmVjdG9ycyhiLGMpO2UuY3Jvc3MoYSk7Yj1lLmxlbmd0aFNxKCk7cmV0dXJuIDA8Yj9lLm11bHRpcGx5U2NhbGFyKDEvTWF0aC5zcXJ0KGIpKTplLnNldCgwLDAsMCl9fSgpLGJhcnljb29yZEZyb21Qb2ludDpmdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI9bmV3IHAsYz1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oZCxlLGYsZyxoKXthLnN1YlZlY3RvcnMoZyxlKTtiLnN1YlZlY3RvcnMoZixlKTtjLnN1YlZlY3RvcnMoZCxlKTtkPWEuZG90KGEpO2U9YS5kb3QoYik7Zj1hLmRvdChjKTt2YXIgaz1iLmRvdChiKTtnPWIuZG90KGMpO3ZhciBtPVxuZCprLWUqZTtoPWh8fG5ldyBwO2lmKDA9PT1tKXJldHVybiBoLnNldCgtMiwtMSwtMSk7bT0xL207az0oaypmLWUqZykqbTtkPShkKmctZSpmKSptO3JldHVybiBoLnNldCgxLWstZCxkLGspfX0oKSxjb250YWluc1BvaW50OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkLGUpe2I9WmEuYmFyeWNvb3JkRnJvbVBvaW50KGIsYyxkLGUsYSk7cmV0dXJuIDA8PWIueCYmMDw9Yi55JiYxPj1iLngrYi55fX0oKX0pO09iamVjdC5hc3NpZ24oWmEucHJvdG90eXBlLHtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuYS5jb3B5KGEpO3RoaXMuYi5jb3B5KGIpO3RoaXMuYy5jb3B5KGMpO3JldHVybiB0aGlzfSxzZXRGcm9tUG9pbnRzQW5kSW5kaWNlczpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLmEuY29weShhW2JdKTt0aGlzLmIuY29weShhW2NdKTt0aGlzLmMuY29weShhW2RdKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LFxuY29weTpmdW5jdGlvbihhKXt0aGlzLmEuY29weShhLmEpO3RoaXMuYi5jb3B5KGEuYik7dGhpcy5jLmNvcHkoYS5jKTtyZXR1cm4gdGhpc30sYXJlYTpmdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKCl7YS5zdWJWZWN0b3JzKHRoaXMuYyx0aGlzLmIpO2Iuc3ViVmVjdG9ycyh0aGlzLmEsdGhpcy5iKTtyZXR1cm4uNSphLmNyb3NzKGIpLmxlbmd0aCgpfX0oKSxtaWRwb2ludDpmdW5jdGlvbihhKXtyZXR1cm4oYXx8bmV3IHApLmFkZFZlY3RvcnModGhpcy5hLHRoaXMuYikuYWRkKHRoaXMuYykubXVsdGlwbHlTY2FsYXIoMS8zKX0sbm9ybWFsOmZ1bmN0aW9uKGEpe3JldHVybiBaYS5ub3JtYWwodGhpcy5hLHRoaXMuYix0aGlzLmMsYSl9LHBsYW5lOmZ1bmN0aW9uKGEpe3JldHVybihhfHxuZXcgRWEpLnNldEZyb21Db3BsYW5hclBvaW50cyh0aGlzLmEsdGhpcy5iLHRoaXMuYyl9LGJhcnljb29yZEZyb21Qb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiBaYS5iYXJ5Y29vcmRGcm9tUG9pbnQoYSxcbnRoaXMuYSx0aGlzLmIsdGhpcy5jLGIpfSxjb250YWluc1BvaW50OmZ1bmN0aW9uKGEpe3JldHVybiBaYS5jb250YWluc1BvaW50KGEsdGhpcy5hLHRoaXMuYix0aGlzLmMpfSxjbG9zZXN0UG9pbnRUb1BvaW50OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IEVhLGI9W25ldyBOYixuZXcgTmIsbmV3IE5iXSxjPW5ldyBwLGQ9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGUsZil7Zj1mfHxuZXcgcDt2YXIgZz1JbmZpbml0eTthLnNldEZyb21Db3BsYW5hclBvaW50cyh0aGlzLmEsdGhpcy5iLHRoaXMuYyk7YS5wcm9qZWN0UG9pbnQoZSxjKTtpZighMD09PXRoaXMuY29udGFpbnNQb2ludChjKSlmLmNvcHkoYyk7ZWxzZSBmb3IoYlswXS5zZXQodGhpcy5hLHRoaXMuYiksYlsxXS5zZXQodGhpcy5iLHRoaXMuYyksYlsyXS5zZXQodGhpcy5jLHRoaXMuYSksZT0wO2U8Yi5sZW5ndGg7ZSsrKXtiW2VdLmNsb3Nlc3RQb2ludFRvUG9pbnQoYywhMCxkKTt2YXIgaD1jLmRpc3RhbmNlVG9TcXVhcmVkKGQpO1xuaDxnJiYoZz1oLGYuY29weShkKSl9cmV0dXJuIGZ9fSgpLGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5hLmVxdWFscyh0aGlzLmEpJiZhLmIuZXF1YWxzKHRoaXMuYikmJmEuYy5lcXVhbHModGhpcy5jKX19KTtyYS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6cmEsaXNNZXNoOiEwLHNldERyYXdNb2RlOmZ1bmN0aW9uKGEpe3RoaXMuZHJhd01vZGU9YX0sY29weTpmdW5jdGlvbihhKXt4LnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmRyYXdNb2RlPWEuZHJhd01vZGU7dm9pZCAwIT09YS5tb3JwaFRhcmdldEluZmx1ZW5jZXMmJih0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcz1hLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcy5zbGljZSgpKTt2b2lkIDAhPT1hLm1vcnBoVGFyZ2V0RGljdGlvbmFyeSYmKHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5PU9iamVjdC5hc3NpZ24oe30sYS5tb3JwaFRhcmdldERpY3Rpb25hcnkpKTtcbnJldHVybiB0aGlzfSx1cGRhdGVNb3JwaFRhcmdldHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdlb21ldHJ5O2lmKGEuaXNCdWZmZXJHZW9tZXRyeSl7YT1hLm1vcnBoQXR0cmlidXRlczt2YXIgYj1PYmplY3Qua2V5cyhhKTtpZigwPGIubGVuZ3RoKXt2YXIgYz1hW2JbMF1dO2lmKHZvaWQgMCE9PWMpZm9yKHRoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzPVtdLHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5PXt9LGE9MCxiPWMubGVuZ3RoO2E8YjthKyspe3ZhciBkPWNbYV0ubmFtZXx8U3RyaW5nKGEpO3RoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzLnB1c2goMCk7dGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnlbZF09YX19fWVsc2UgaWYoYz1hLm1vcnBoVGFyZ2V0cyx2b2lkIDAhPT1jJiYwPGMubGVuZ3RoKWZvcih0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcz1bXSx0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeT17fSxhPTAsYj1jLmxlbmd0aDthPGI7YSsrKWQ9Y1thXS5uYW1lfHxcblN0cmluZyhhKSx0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcy5wdXNoKDApLHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5W2RdPWF9LHJheWNhc3Q6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYixjLGQsZSxmLGcpe1phLmJhcnljb29yZEZyb21Qb2ludChhLGIsYyxkLHYpO2UubXVsdGlwbHlTY2FsYXIodi54KTtmLm11bHRpcGx5U2NhbGFyKHYueSk7Zy5tdWx0aXBseVNjYWxhcih2LnopO2UuYWRkKGYpLmFkZChnKTtyZXR1cm4gZS5jbG9uZSgpfWZ1bmN0aW9uIGIoYSxiLGMsZCxlLGYsZyxoKXtpZihudWxsPT09KDE9PT1iLnNpZGU/ZC5pbnRlcnNlY3RUcmlhbmdsZShnLGYsZSwhMCxoKTpkLmludGVyc2VjdFRyaWFuZ2xlKGUsZixnLDIhPT1iLnNpZGUsaCkpKXJldHVybiBudWxsO3ouY29weShoKTt6LmFwcGx5TWF0cml4NChhLm1hdHJpeFdvcmxkKTtiPWMucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKHopO3JldHVybiBiPGMubmVhcnx8Yj5jLmZhcj9udWxsOntkaXN0YW5jZTpiLFxucG9pbnQ6ei5jbG9uZSgpLG9iamVjdDphfX1mdW5jdGlvbiBjKGMsZCxlLGYsbSxsLHEsbil7Zy5mcm9tQnVmZmVyQXR0cmlidXRlKGYsbCk7aC5mcm9tQnVmZmVyQXR0cmlidXRlKGYscSk7ay5mcm9tQnVmZmVyQXR0cmlidXRlKGYsbik7aWYoYz1iKGMsYy5tYXRlcmlhbCxkLGUsZyxoLGssdykpbSYmKHUuZnJvbUJ1ZmZlckF0dHJpYnV0ZShtLGwpLHIuZnJvbUJ1ZmZlckF0dHJpYnV0ZShtLHEpLHQuZnJvbUJ1ZmZlckF0dHJpYnV0ZShtLG4pLGMudXY9YSh3LGcsaCxrLHUscix0KSksYy5mYWNlPW5ldyBZYShsLHEsbixaYS5ub3JtYWwoZyxoLGspKSxjLmZhY2VJbmRleD1sO3JldHVybiBjfXZhciBkPW5ldyBPLGU9bmV3IHNiLGY9bmV3IElhLGc9bmV3IHAsaD1uZXcgcCxrPW5ldyBwLG09bmV3IHAsbD1uZXcgcCxuPW5ldyBwLHU9bmV3IEQscj1uZXcgRCx0PW5ldyBELHY9bmV3IHAsdz1uZXcgcCx6PW5ldyBwO3JldHVybiBmdW5jdGlvbihxLHApe3ZhciB2PXRoaXMuZ2VvbWV0cnksXG56PXRoaXMubWF0ZXJpYWwseT10aGlzLm1hdHJpeFdvcmxkO2lmKHZvaWQgMCE9PXomJihudWxsPT09di5ib3VuZGluZ1NwaGVyZSYmdi5jb21wdXRlQm91bmRpbmdTcGhlcmUoKSxmLmNvcHkodi5ib3VuZGluZ1NwaGVyZSksZi5hcHBseU1hdHJpeDQoeSksITEhPT1xLnJheS5pbnRlcnNlY3RzU3BoZXJlKGYpJiYoZC5nZXRJbnZlcnNlKHkpLGUuY29weShxLnJheSkuYXBwbHlNYXRyaXg0KGQpLG51bGw9PT12LmJvdW5kaW5nQm94fHwhMSE9PWUuaW50ZXJzZWN0c0JveCh2LmJvdW5kaW5nQm94KSkpKXt2YXIgeDtpZih2LmlzQnVmZmVyR2VvbWV0cnkpe3ZhciB6PXYuaW5kZXgsQj12LmF0dHJpYnV0ZXMucG9zaXRpb24seT12LmF0dHJpYnV0ZXMudXYsRDtpZihudWxsIT09eil7dmFyIEM9MDtmb3IoRD16LmNvdW50O0M8RDtDKz0zKXt2PXouZ2V0WChDKTt2YXIgST16LmdldFgoQysxKTt2YXIgRT16LmdldFgoQysyKTtpZih4PWModGhpcyxxLGUsQix5LHYsSSxFKSl4LmZhY2VJbmRleD1cbk1hdGguZmxvb3IoQy8zKSxwLnB1c2goeCl9fWVsc2UgaWYodm9pZCAwIT09Qilmb3IoQz0wLEQ9Qi5jb3VudDtDPEQ7Qys9MylpZih2PUMsST1DKzEsRT1DKzIseD1jKHRoaXMscSxlLEIseSx2LEksRSkpeC5pbmRleD12LHAucHVzaCh4KX1lbHNlIGlmKHYuaXNHZW9tZXRyeSl7dmFyIHk9QXJyYXkuaXNBcnJheSh6KTtDPXYudmVydGljZXM7RD12LmZhY2VzO0k9di5mYWNlVmVydGV4VXZzWzBdOzA8SS5sZW5ndGgmJihCPUkpO2Zvcih2YXIgSD0wLEs9RC5sZW5ndGg7SDxLO0grKyl7dmFyIE49RFtIXTt4PXk/eltOLm1hdGVyaWFsSW5kZXhdOno7aWYodm9pZCAwIT09eCl7ST1DW04uYV07RT1DW04uYl07dmFyIEw9Q1tOLmNdO2lmKCEwPT09eC5tb3JwaFRhcmdldHMpe3ZhciBNPXYubW9ycGhUYXJnZXRzLE89dGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXM7Zy5zZXQoMCwwLDApO2guc2V0KDAsMCwwKTtrLnNldCgwLDAsMCk7Zm9yKHZhciBQPTAsUT1NLmxlbmd0aDtQPFE7UCsrKXt2YXIgUj1cbk9bUF07aWYoMCE9PVIpe3ZhciBVPU1bUF0udmVydGljZXM7Zy5hZGRTY2FsZWRWZWN0b3IobS5zdWJWZWN0b3JzKFVbTi5hXSxJKSxSKTtoLmFkZFNjYWxlZFZlY3RvcihsLnN1YlZlY3RvcnMoVVtOLmJdLEUpLFIpO2suYWRkU2NhbGVkVmVjdG9yKG4uc3ViVmVjdG9ycyhVW04uY10sTCksUil9fWcuYWRkKEkpO2guYWRkKEUpO2suYWRkKEwpO0k9ZztFPWg7TD1rfWlmKHg9Yih0aGlzLHgscSxlLEksRSxMLHcpKUImJkJbSF0mJihNPUJbSF0sdS5jb3B5KE1bMF0pLHIuY29weShNWzFdKSx0LmNvcHkoTVsyXSkseC51dj1hKHcsSSxFLEwsdSxyLHQpKSx4LmZhY2U9Tix4LmZhY2VJbmRleD1ILHAucHVzaCh4KX19fX19fSgpLGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuZ2VvbWV0cnksdGhpcy5tYXRlcmlhbCkpLmNvcHkodGhpcyl9fSk7dmFyIHlnPTA7YmEucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUYS5wcm90b3R5cGUpLFxue2NvbnN0cnVjdG9yOmJhLGlzUGVyc3BlY3RpdmVDYW1lcmE6ITAsY29weTpmdW5jdGlvbihhLGIpe1RhLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhLGIpO3RoaXMuZm92PWEuZm92O3RoaXMuem9vbT1hLnpvb207dGhpcy5uZWFyPWEubmVhcjt0aGlzLmZhcj1hLmZhcjt0aGlzLmZvY3VzPWEuZm9jdXM7dGhpcy5hc3BlY3Q9YS5hc3BlY3Q7dGhpcy52aWV3PW51bGw9PT1hLnZpZXc/bnVsbDpPYmplY3QuYXNzaWduKHt9LGEudmlldyk7dGhpcy5maWxtR2F1Z2U9YS5maWxtR2F1Z2U7dGhpcy5maWxtT2Zmc2V0PWEuZmlsbU9mZnNldDtyZXR1cm4gdGhpc30sc2V0Rm9jYWxMZW5ndGg6ZnVuY3Rpb24oYSl7YT0uNSp0aGlzLmdldEZpbG1IZWlnaHQoKS9hO3RoaXMuZm92PTIqUS5SQUQyREVHKk1hdGguYXRhbihhKTt0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX0sZ2V0Rm9jYWxMZW5ndGg6ZnVuY3Rpb24oKXt2YXIgYT1NYXRoLnRhbiguNSpRLkRFRzJSQUQqdGhpcy5mb3YpO1xucmV0dXJuLjUqdGhpcy5nZXRGaWxtSGVpZ2h0KCkvYX0sZ2V0RWZmZWN0aXZlRk9WOmZ1bmN0aW9uKCl7cmV0dXJuIDIqUS5SQUQyREVHKk1hdGguYXRhbihNYXRoLnRhbiguNSpRLkRFRzJSQUQqdGhpcy5mb3YpL3RoaXMuem9vbSl9LGdldEZpbG1XaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbG1HYXVnZSpNYXRoLm1pbih0aGlzLmFzcGVjdCwxKX0sZ2V0RmlsbUhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbG1HYXVnZS9NYXRoLm1heCh0aGlzLmFzcGVjdCwxKX0sc2V0Vmlld09mZnNldDpmdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy5hc3BlY3Q9YS9iO251bGw9PT10aGlzLnZpZXcmJih0aGlzLnZpZXc9e2VuYWJsZWQ6ITAsZnVsbFdpZHRoOjEsZnVsbEhlaWdodDoxLG9mZnNldFg6MCxvZmZzZXRZOjAsd2lkdGg6MSxoZWlnaHQ6MX0pO3RoaXMudmlldy5lbmFibGVkPSEwO3RoaXMudmlldy5mdWxsV2lkdGg9YTt0aGlzLnZpZXcuZnVsbEhlaWdodD1iO3RoaXMudmlldy5vZmZzZXRYPVxuYzt0aGlzLnZpZXcub2Zmc2V0WT1kO3RoaXMudmlldy53aWR0aD1lO3RoaXMudmlldy5oZWlnaHQ9Zjt0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX0sY2xlYXJWaWV3T2Zmc2V0OmZ1bmN0aW9uKCl7bnVsbCE9PXRoaXMudmlldyYmKHRoaXMudmlldy5lbmFibGVkPSExKTt0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX0sdXBkYXRlUHJvamVjdGlvbk1hdHJpeDpmdW5jdGlvbigpe3ZhciBhPXRoaXMubmVhcixiPWEqTWF0aC50YW4oLjUqUS5ERUcyUkFEKnRoaXMuZm92KS90aGlzLnpvb20sYz0yKmIsZD10aGlzLmFzcGVjdCpjLGU9LS41KmQsZj10aGlzLnZpZXc7aWYobnVsbCE9PXRoaXMudmlldyYmdGhpcy52aWV3LmVuYWJsZWQpdmFyIGc9Zi5mdWxsV2lkdGgsaD1mLmZ1bGxIZWlnaHQsZT1lK2Yub2Zmc2V0WCpkL2csYj1iLWYub2Zmc2V0WSpjL2gsZD1mLndpZHRoL2cqZCxjPWYuaGVpZ2h0L2gqYztmPXRoaXMuZmlsbU9mZnNldDswIT09ZiYmKGUrPWEqZi90aGlzLmdldEZpbG1XaWR0aCgpKTtcbnRoaXMucHJvamVjdGlvbk1hdHJpeC5tYWtlUGVyc3BlY3RpdmUoZSxlK2QsYixiLWMsYSx0aGlzLmZhcil9LHRvSlNPTjpmdW5jdGlvbihhKXthPXgucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsYSk7YS5vYmplY3QuZm92PXRoaXMuZm92O2Eub2JqZWN0Lnpvb209dGhpcy56b29tO2Eub2JqZWN0Lm5lYXI9dGhpcy5uZWFyO2Eub2JqZWN0LmZhcj10aGlzLmZhcjthLm9iamVjdC5mb2N1cz10aGlzLmZvY3VzO2Eub2JqZWN0LmFzcGVjdD10aGlzLmFzcGVjdDtudWxsIT09dGhpcy52aWV3JiYoYS5vYmplY3Qudmlldz1PYmplY3QuYXNzaWduKHt9LHRoaXMudmlldykpO2Eub2JqZWN0LmZpbG1HYXVnZT10aGlzLmZpbG1HYXVnZTthLm9iamVjdC5maWxtT2Zmc2V0PXRoaXMuZmlsbU9mZnNldDtyZXR1cm4gYX19KTt1ZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGJhLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnVkLGlzQXJyYXlDYW1lcmE6ITB9KTtQYi5wcm90b3R5cGUuaXNGb2dFeHAyPVxuITA7UGIucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBQYih0aGlzLmNvbG9yLmdldEhleCgpLHRoaXMuZGVuc2l0eSl9O1BiLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57dHlwZTpcIkZvZ0V4cDJcIixjb2xvcjp0aGlzLmNvbG9yLmdldEhleCgpLGRlbnNpdHk6dGhpcy5kZW5zaXR5fX07UWIucHJvdG90eXBlLmlzRm9nPSEwO1FiLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgUWIodGhpcy5jb2xvci5nZXRIZXgoKSx0aGlzLm5lYXIsdGhpcy5mYXIpfTtRYi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6XCJGb2dcIixjb2xvcjp0aGlzLmNvbG9yLmdldEhleCgpLG5lYXI6dGhpcy5uZWFyLGZhcjp0aGlzLmZhcn19O3ZkLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjp2ZCxjb3B5OmZ1bmN0aW9uKGEsYil7eC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsXG5hLGIpO251bGwhPT1hLmJhY2tncm91bmQmJih0aGlzLmJhY2tncm91bmQ9YS5iYWNrZ3JvdW5kLmNsb25lKCkpO251bGwhPT1hLmZvZyYmKHRoaXMuZm9nPWEuZm9nLmNsb25lKCkpO251bGwhPT1hLm92ZXJyaWRlTWF0ZXJpYWwmJih0aGlzLm92ZXJyaWRlTWF0ZXJpYWw9YS5vdmVycmlkZU1hdGVyaWFsLmNsb25lKCkpO3RoaXMuYXV0b1VwZGF0ZT1hLmF1dG9VcGRhdGU7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPWEubWF0cml4QXV0b1VwZGF0ZTtyZXR1cm4gdGhpc30sdG9KU09OOmZ1bmN0aW9uKGEpe3ZhciBiPXgucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsYSk7bnVsbCE9PXRoaXMuYmFja2dyb3VuZCYmKGIub2JqZWN0LmJhY2tncm91bmQ9dGhpcy5iYWNrZ3JvdW5kLnRvSlNPTihhKSk7bnVsbCE9PXRoaXMuZm9nJiYoYi5vYmplY3QuZm9nPXRoaXMuZm9nLnRvSlNPTigpKTtyZXR1cm4gYn19KTtkZS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSxcbntjb25zdHJ1Y3RvcjpkZSxpc0xlbnNGbGFyZTohMCxjb3B5OmZ1bmN0aW9uKGEpe3gucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMucG9zaXRpb25TY3JlZW4uY29weShhLnBvc2l0aW9uU2NyZWVuKTt0aGlzLmN1c3RvbVVwZGF0ZUNhbGxiYWNrPWEuY3VzdG9tVXBkYXRlQ2FsbGJhY2s7Zm9yKHZhciBiPTAsYz1hLmxlbnNGbGFyZXMubGVuZ3RoO2I8YztiKyspdGhpcy5sZW5zRmxhcmVzLnB1c2goYS5sZW5zRmxhcmVzW2JdKTtyZXR1cm4gdGhpc30sYWRkOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2b2lkIDA9PT1iJiYoYj0tMSk7dm9pZCAwPT09YyYmKGM9MCk7dm9pZCAwPT09ZiYmKGY9MSk7dm9pZCAwPT09ZSYmKGU9bmV3IEgoMTY3NzcyMTUpKTt2b2lkIDA9PT1kJiYoZD0xKTtjPU1hdGgubWluKGMsTWF0aC5tYXgoMCxjKSk7dGhpcy5sZW5zRmxhcmVzLnB1c2goe3RleHR1cmU6YSxzaXplOmIsZGlzdGFuY2U6Yyx4OjAseTowLHo6MCxzY2FsZToxLHJvdGF0aW9uOjAsXG5vcGFjaXR5OmYsY29sb3I6ZSxibGVuZGluZzpkfSl9LHVwZGF0ZUxlbnNGbGFyZXM6ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXMubGVuc0ZsYXJlcy5sZW5ndGgsYz0yKi10aGlzLnBvc2l0aW9uU2NyZWVuLngsZD0yKi10aGlzLnBvc2l0aW9uU2NyZWVuLnk7Zm9yKGE9MDthPGI7YSsrKXt2YXIgZT10aGlzLmxlbnNGbGFyZXNbYV07ZS54PXRoaXMucG9zaXRpb25TY3JlZW4ueCtjKmUuZGlzdGFuY2U7ZS55PXRoaXMucG9zaXRpb25TY3JlZW4ueStkKmUuZGlzdGFuY2U7ZS53YW50ZWRSb3RhdGlvbj1lLngqTWF0aC5QSSouMjU7ZS5yb3RhdGlvbis9LjI1KihlLndhbnRlZFJvdGF0aW9uLWUucm90YXRpb24pfX19KTtoYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShQLnByb3RvdHlwZSk7aGIucHJvdG90eXBlLmNvbnN0cnVjdG9yPWhiO2hiLnByb3RvdHlwZS5pc1Nwcml0ZU1hdGVyaWFsPSEwO2hiLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe1AucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLFxuYSk7dGhpcy5jb2xvci5jb3B5KGEuY29sb3IpO3RoaXMubWFwPWEubWFwO3RoaXMucm90YXRpb249YS5yb3RhdGlvbjtyZXR1cm4gdGhpc307Q2MucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkNjLGlzU3ByaXRlOiEwLHJheWNhc3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBwLGM9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGQsZSl7Yi5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5tYXRyaXhXb3JsZCk7ZC5yYXkuY2xvc2VzdFBvaW50VG9Qb2ludChiLGEpO2Muc2V0RnJvbU1hdHJpeFNjYWxlKHRoaXMubWF0cml4V29ybGQpO3ZhciBmPWMueCpjLnkvNDtiLmRpc3RhbmNlVG9TcXVhcmVkKGEpPmZ8fChmPWQucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKGEpLGY8ZC5uZWFyfHxmPmQuZmFyfHxlLnB1c2goe2Rpc3RhbmNlOmYscG9pbnQ6YS5jbG9uZSgpLGZhY2U6bnVsbCxvYmplY3Q6dGhpc30pKX19KCksY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5tYXRlcmlhbCkpLmNvcHkodGhpcyl9fSk7XG5EYy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6RGMsY29weTpmdW5jdGlvbihhKXt4LnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhLCExKTthPWEubGV2ZWxzO2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl7dmFyIGQ9YVtiXTt0aGlzLmFkZExldmVsKGQub2JqZWN0LmNsb25lKCksZC5kaXN0YW5jZSl9cmV0dXJuIHRoaXN9LGFkZExldmVsOmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9MCk7Yj1NYXRoLmFicyhiKTtmb3IodmFyIGM9dGhpcy5sZXZlbHMsZD0wO2Q8Yy5sZW5ndGgmJiEoYjxjW2RdLmRpc3RhbmNlKTtkKyspO2Muc3BsaWNlKGQsMCx7ZGlzdGFuY2U6YixvYmplY3Q6YX0pO3RoaXMuYWRkKGEpfSxnZXRPYmplY3RGb3JEaXN0YW5jZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5sZXZlbHMsYz0xLGQ9Yi5sZW5ndGg7YzxkJiYhKGE8YltjXS5kaXN0YW5jZSk7YysrKTtyZXR1cm4gYltjLVxuMV0ub2JqZWN0fSxyYXljYXN0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7YS5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5tYXRyaXhXb3JsZCk7dmFyIGQ9Yi5yYXkub3JpZ2luLmRpc3RhbmNlVG8oYSk7dGhpcy5nZXRPYmplY3RGb3JEaXN0YW5jZShkKS5yYXljYXN0KGIsYyl9fSgpLHVwZGF0ZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMubGV2ZWxzO2lmKDE8ZC5sZW5ndGgpe2Euc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGMubWF0cml4V29ybGQpO2Iuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubWF0cml4V29ybGQpO2M9YS5kaXN0YW5jZVRvKGIpO2RbMF0ub2JqZWN0LnZpc2libGU9ITA7Zm9yKHZhciBlPTEsZj1kLmxlbmd0aDtlPGY7ZSsrKWlmKGM+PWRbZV0uZGlzdGFuY2UpZFtlLTFdLm9iamVjdC52aXNpYmxlPSExLGRbZV0ub2JqZWN0LnZpc2libGU9ITA7ZWxzZSBicmVhaztcbmZvcig7ZTxmO2UrKylkW2VdLm9iamVjdC52aXNpYmxlPSExfX19KCksdG9KU09OOmZ1bmN0aW9uKGEpe2E9eC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyxhKTthLm9iamVjdC5sZXZlbHM9W107Zm9yKHZhciBiPXRoaXMubGV2ZWxzLGM9MCxkPWIubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPWJbY107YS5vYmplY3QubGV2ZWxzLnB1c2goe29iamVjdDplLm9iamVjdC51dWlkLGRpc3RhbmNlOmUuZGlzdGFuY2V9KX1yZXR1cm4gYX19KTtPYmplY3QuYXNzaWduKEVjLnByb3RvdHlwZSx7Y2FsY3VsYXRlSW52ZXJzZXM6ZnVuY3Rpb24oKXt0aGlzLmJvbmVJbnZlcnNlcz1bXTtmb3IodmFyIGE9MCxiPXRoaXMuYm9uZXMubGVuZ3RoO2E8YjthKyspe3ZhciBjPW5ldyBPO3RoaXMuYm9uZXNbYV0mJmMuZ2V0SW52ZXJzZSh0aGlzLmJvbmVzW2FdLm1hdHJpeFdvcmxkKTt0aGlzLmJvbmVJbnZlcnNlcy5wdXNoKGMpfX0scG9zZTpmdW5jdGlvbigpe3ZhciBhLGI7dmFyIGM9MDtmb3IoYj10aGlzLmJvbmVzLmxlbmd0aDtjPFxuYjtjKyspKGE9dGhpcy5ib25lc1tjXSkmJmEubWF0cml4V29ybGQuZ2V0SW52ZXJzZSh0aGlzLmJvbmVJbnZlcnNlc1tjXSk7Yz0wO2ZvcihiPXRoaXMuYm9uZXMubGVuZ3RoO2M8YjtjKyspaWYoYT10aGlzLmJvbmVzW2NdKWEucGFyZW50JiZhLnBhcmVudC5pc0JvbmU/KGEubWF0cml4LmdldEludmVyc2UoYS5wYXJlbnQubWF0cml4V29ybGQpLGEubWF0cml4Lm11bHRpcGx5KGEubWF0cml4V29ybGQpKTphLm1hdHJpeC5jb3B5KGEubWF0cml4V29ybGQpLGEubWF0cml4LmRlY29tcG9zZShhLnBvc2l0aW9uLGEucXVhdGVybmlvbixhLnNjYWxlKX0sdXBkYXRlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE8sYj1uZXcgTztyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIGM9dGhpcy5ib25lcyxkPXRoaXMuYm9uZUludmVyc2VzLGU9dGhpcy5ib25lTWF0cmljZXMsZj10aGlzLmJvbmVUZXh0dXJlLGc9MCxoPWMubGVuZ3RoO2c8aDtnKyspYS5tdWx0aXBseU1hdHJpY2VzKGNbZ10/Y1tnXS5tYXRyaXhXb3JsZDpcbmIsZFtnXSksYS50b0FycmF5KGUsMTYqZyk7dm9pZCAwIT09ZiYmKGYubmVlZHNVcGRhdGU9ITApfX0oKSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgRWModGhpcy5ib25lcyx0aGlzLmJvbmVJbnZlcnNlcyl9fSk7d2QucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOndkLGlzQm9uZTohMH0pO3hkLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUocmEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6eGQsaXNTa2lubmVkTWVzaDohMCxpbml0Qm9uZXM6ZnVuY3Rpb24oKXt2YXIgYT1bXSxiO2lmKHRoaXMuZ2VvbWV0cnkmJnZvaWQgMCE9PXRoaXMuZ2VvbWV0cnkuYm9uZXMpe3ZhciBjPTA7Zm9yKGI9dGhpcy5nZW9tZXRyeS5ib25lcy5sZW5ndGg7YzxiO2MrKyl7dmFyIGQ9dGhpcy5nZW9tZXRyeS5ib25lc1tjXTt2YXIgZT1uZXcgd2Q7YS5wdXNoKGUpO2UubmFtZT1kLm5hbWU7ZS5wb3NpdGlvbi5mcm9tQXJyYXkoZC5wb3MpO1xuZS5xdWF0ZXJuaW9uLmZyb21BcnJheShkLnJvdHEpO3ZvaWQgMCE9PWQuc2NsJiZlLnNjYWxlLmZyb21BcnJheShkLnNjbCl9Yz0wO2ZvcihiPXRoaXMuZ2VvbWV0cnkuYm9uZXMubGVuZ3RoO2M8YjtjKyspZD10aGlzLmdlb21ldHJ5LmJvbmVzW2NdLC0xIT09ZC5wYXJlbnQmJm51bGwhPT1kLnBhcmVudCYmdm9pZCAwIT09YVtkLnBhcmVudF0/YVtkLnBhcmVudF0uYWRkKGFbY10pOnRoaXMuYWRkKGFbY10pfXRoaXMudXBkYXRlTWF0cml4V29ybGQoITApO3JldHVybiBhfSxiaW5kOmZ1bmN0aW9uKGEsYil7dGhpcy5za2VsZXRvbj1hO3ZvaWQgMD09PWImJih0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkKCEwKSx0aGlzLnNrZWxldG9uLmNhbGN1bGF0ZUludmVyc2VzKCksYj10aGlzLm1hdHJpeFdvcmxkKTt0aGlzLmJpbmRNYXRyaXguY29weShiKTt0aGlzLmJpbmRNYXRyaXhJbnZlcnNlLmdldEludmVyc2UoYil9LHBvc2U6ZnVuY3Rpb24oKXt0aGlzLnNrZWxldG9uLnBvc2UoKX0sbm9ybWFsaXplU2tpbldlaWdodHM6ZnVuY3Rpb24oKXt2YXIgYTtcbmlmKHRoaXMuZ2VvbWV0cnkmJnRoaXMuZ2VvbWV0cnkuaXNHZW9tZXRyeSlmb3IoYT0wO2E8dGhpcy5nZW9tZXRyeS5za2luV2VpZ2h0cy5sZW5ndGg7YSsrKXt2YXIgYj10aGlzLmdlb21ldHJ5LnNraW5XZWlnaHRzW2FdO3ZhciBjPTEvYi5tYW5oYXR0YW5MZW5ndGgoKTtJbmZpbml0eSE9PWM/Yi5tdWx0aXBseVNjYWxhcihjKTpiLnNldCgxLDAsMCwwKX1lbHNlIGlmKHRoaXMuZ2VvbWV0cnkmJnRoaXMuZ2VvbWV0cnkuaXNCdWZmZXJHZW9tZXRyeSl7dmFyIGI9bmV3IGFhLGQ9dGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLnNraW5XZWlnaHQ7Zm9yKGE9MDthPGQuY291bnQ7YSsrKWIueD1kLmdldFgoYSksYi55PWQuZ2V0WShhKSxiLno9ZC5nZXRaKGEpLGIudz1kLmdldFcoYSksYz0xL2IubWFuaGF0dGFuTGVuZ3RoKCksSW5maW5pdHkhPT1jP2IubXVsdGlwbHlTY2FsYXIoYyk6Yi5zZXQoMSwwLDAsMCksZC5zZXRYWVpXKGEsYi54LGIueSxiLnosYi53KX19LHVwZGF0ZU1hdHJpeFdvcmxkOmZ1bmN0aW9uKGEpe3JhLnByb3RvdHlwZS51cGRhdGVNYXRyaXhXb3JsZC5jYWxsKHRoaXMsXG5hKTtcImF0dGFjaGVkXCI9PT10aGlzLmJpbmRNb2RlP3RoaXMuYmluZE1hdHJpeEludmVyc2UuZ2V0SW52ZXJzZSh0aGlzLm1hdHJpeFdvcmxkKTpcImRldGFjaGVkXCI9PT10aGlzLmJpbmRNb2RlP3RoaXMuYmluZE1hdHJpeEludmVyc2UuZ2V0SW52ZXJzZSh0aGlzLmJpbmRNYXRyaXgpOmNvbnNvbGUud2FybihcIlRIUkVFLlNraW5uZWRNZXNoOiBVbnJlY29nbml6ZWQgYmluZE1vZGU6IFwiK3RoaXMuYmluZE1vZGUpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmdlb21ldHJ5LHRoaXMubWF0ZXJpYWwpKS5jb3B5KHRoaXMpfX0pO1cucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoUC5wcm90b3R5cGUpO1cucHJvdG90eXBlLmNvbnN0cnVjdG9yPVc7Vy5wcm90b3R5cGUuaXNMaW5lQmFzaWNNYXRlcmlhbD0hMDtXLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe1AucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuY29sb3IuY29weShhLmNvbG9yKTtcbnRoaXMubGluZXdpZHRoPWEubGluZXdpZHRoO3RoaXMubGluZWNhcD1hLmxpbmVjYXA7dGhpcy5saW5lam9pbj1hLmxpbmVqb2luO3JldHVybiB0aGlzfTtzYS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6c2EsaXNMaW5lOiEwLHJheWNhc3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgTyxiPW5ldyBzYixjPW5ldyBJYTtyZXR1cm4gZnVuY3Rpb24oZCxlKXt2YXIgZj1kLmxpbmVQcmVjaXNpb24sZj1mKmYsZz10aGlzLmdlb21ldHJ5LGg9dGhpcy5tYXRyaXhXb3JsZDtudWxsPT09Zy5ib3VuZGluZ1NwaGVyZSYmZy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTtjLmNvcHkoZy5ib3VuZGluZ1NwaGVyZSk7Yy5hcHBseU1hdHJpeDQoaCk7aWYoITEhPT1kLnJheS5pbnRlcnNlY3RzU3BoZXJlKGMpKXthLmdldEludmVyc2UoaCk7Yi5jb3B5KGQucmF5KS5hcHBseU1hdHJpeDQoYSk7dmFyIGs9bmV3IHAsbT1uZXcgcCxoPW5ldyBwLFxubD1uZXcgcCxuPXRoaXMmJnRoaXMuaXNMaW5lU2VnbWVudHM/MjoxO2lmKGcuaXNCdWZmZXJHZW9tZXRyeSl7dmFyIHU9Zy5pbmRleDt2YXIgcj1nLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7aWYobnVsbCE9PXUpZm9yKHZhciB0PXUuYXJyYXksZz0wLHY9dC5sZW5ndGgtMTtnPHY7Zys9bil1PXRbZysxXSxrLmZyb21BcnJheShyLDMqdFtnXSksbS5mcm9tQXJyYXkociwzKnUpLHU9Yi5kaXN0YW5jZVNxVG9TZWdtZW50KGssbSxsLGgpLHU+Znx8KGwuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLHU9ZC5yYXkub3JpZ2luLmRpc3RhbmNlVG8obCksdTxkLm5lYXJ8fHU+ZC5mYXJ8fGUucHVzaCh7ZGlzdGFuY2U6dSxwb2ludDpoLmNsb25lKCkuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLGluZGV4OmcsZmFjZTpudWxsLGZhY2VJbmRleDpudWxsLG9iamVjdDp0aGlzfSkpO2Vsc2UgZm9yKGc9MCx2PXIubGVuZ3RoLzMtMTtnPHY7Zys9bilrLmZyb21BcnJheShyLFxuMypnKSxtLmZyb21BcnJheShyLDMqZyszKSx1PWIuZGlzdGFuY2VTcVRvU2VnbWVudChrLG0sbCxoKSx1PmZ8fChsLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKSx1PWQucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKGwpLHU8ZC5uZWFyfHx1PmQuZmFyfHxlLnB1c2goe2Rpc3RhbmNlOnUscG9pbnQ6aC5jbG9uZSgpLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKSxpbmRleDpnLGZhY2U6bnVsbCxmYWNlSW5kZXg6bnVsbCxvYmplY3Q6dGhpc30pKX1lbHNlIGlmKGcuaXNHZW9tZXRyeSlmb3Ioaz1nLnZlcnRpY2VzLG09ay5sZW5ndGgsZz0wO2c8bS0xO2crPW4pdT1iLmRpc3RhbmNlU3FUb1NlZ21lbnQoa1tnXSxrW2crMV0sbCxoKSx1PmZ8fChsLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKSx1PWQucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKGwpLHU8ZC5uZWFyfHx1PmQuZmFyfHxlLnB1c2goe2Rpc3RhbmNlOnUscG9pbnQ6aC5jbG9uZSgpLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKSxcbmluZGV4OmcsZmFjZTpudWxsLGZhY2VJbmRleDpudWxsLG9iamVjdDp0aGlzfSkpfX19KCksY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5nZW9tZXRyeSx0aGlzLm1hdGVyaWFsKSkuY29weSh0aGlzKX19KTtYLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoc2EucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6WCxpc0xpbmVTZWdtZW50czohMH0pO3lkLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoc2EucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6eWQsaXNMaW5lTG9vcDohMH0pO0thLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFAucHJvdG90eXBlKTtLYS5wcm90b3R5cGUuY29uc3RydWN0b3I9S2E7S2EucHJvdG90eXBlLmlzUG9pbnRzTWF0ZXJpYWw9ITA7S2EucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7UC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5jb2xvci5jb3B5KGEuY29sb3IpO1xudGhpcy5tYXA9YS5tYXA7dGhpcy5zaXplPWEuc2l6ZTt0aGlzLnNpemVBdHRlbnVhdGlvbj1hLnNpemVBdHRlbnVhdGlvbjtyZXR1cm4gdGhpc307UmIucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlJiLGlzUG9pbnRzOiEwLHJheWNhc3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgTyxiPW5ldyBzYixjPW5ldyBJYTtyZXR1cm4gZnVuY3Rpb24oZCxlKXtmdW5jdGlvbiBmKGEsYyl7dmFyIGY9Yi5kaXN0YW5jZVNxVG9Qb2ludChhKTtpZihmPGwpe2E9Yi5jbG9zZXN0UG9pbnRUb1BvaW50KGEpO2EuYXBwbHlNYXRyaXg0KGspO3ZhciBoPWQucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKGEpO2g8ZC5uZWFyfHxoPmQuZmFyfHxlLnB1c2goe2Rpc3RhbmNlOmgsZGlzdGFuY2VUb1JheTpNYXRoLnNxcnQoZikscG9pbnQ6YS5jbG9uZSgpLGluZGV4OmMsZmFjZTpudWxsLG9iamVjdDpnfSl9fXZhciBnPXRoaXMsaD10aGlzLmdlb21ldHJ5LFxuaz10aGlzLm1hdHJpeFdvcmxkLG09ZC5wYXJhbXMuUG9pbnRzLnRocmVzaG9sZDtudWxsPT09aC5ib3VuZGluZ1NwaGVyZSYmaC5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTtjLmNvcHkoaC5ib3VuZGluZ1NwaGVyZSk7Yy5hcHBseU1hdHJpeDQoayk7Yy5yYWRpdXMrPW07aWYoITEhPT1kLnJheS5pbnRlcnNlY3RzU3BoZXJlKGMpKXthLmdldEludmVyc2Uoayk7Yi5jb3B5KGQucmF5KS5hcHBseU1hdHJpeDQoYSk7dmFyIG09bS8oKHRoaXMuc2NhbGUueCt0aGlzLnNjYWxlLnkrdGhpcy5zY2FsZS56KS8zKSxsPW0qbSxtPW5ldyBwO2lmKGguaXNCdWZmZXJHZW9tZXRyeSl7dmFyIG49aC5pbmRleCxoPWguYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTtpZihudWxsIT09bilmb3IodmFyIHU9bi5hcnJheSxuPTAscj11Lmxlbmd0aDtuPHI7bisrKXt2YXIgdD11W25dO20uZnJvbUFycmF5KGgsMyp0KTtmKG0sdCl9ZWxzZSBmb3Iobj0wLHU9aC5sZW5ndGgvMztuPHU7bisrKW0uZnJvbUFycmF5KGgsXG4zKm4pLGYobSxuKX1lbHNlIGZvcihtPWgudmVydGljZXMsbj0wLHU9bS5sZW5ndGg7bjx1O24rKylmKG1bbl0sbil9fX0oKSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmdlb21ldHJ5LHRoaXMubWF0ZXJpYWwpKS5jb3B5KHRoaXMpfX0pO0ZjLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpGYyxpc0dyb3VwOiEwfSk7ZWUucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShVLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmVlLGlzVmlkZW9UZXh0dXJlOiEwLHVwZGF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuaW1hZ2U7YS5yZWFkeVN0YXRlPj1hLkhBVkVfQ1VSUkVOVF9EQVRBJiYodGhpcy5uZWVkc1VwZGF0ZT0hMCl9fSk7U2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVS5wcm90b3R5cGUpO1NiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1TYjtTYi5wcm90b3R5cGUuaXNDb21wcmVzc2VkVGV4dHVyZT1cbiEwO0djLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFUucHJvdG90eXBlKTtHYy5wcm90b3R5cGUuY29uc3RydWN0b3I9R2M7R2MucHJvdG90eXBlLmlzRGVwdGhUZXh0dXJlPSEwO1RiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEUucHJvdG90eXBlKTtUYi5wcm90b3R5cGUuY29uc3RydWN0b3I9VGI7SGMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTC5wcm90b3R5cGUpO0hjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1IYztVYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFLnByb3RvdHlwZSk7VWIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVViO0ljLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEwucHJvdG90eXBlKTtJYy5wcm90b3R5cGUuY29uc3RydWN0b3I9SWM7amEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRS5wcm90b3R5cGUpO2phLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1qYTtKYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShMLnByb3RvdHlwZSk7SmMucHJvdG90eXBlLmNvbnN0cnVjdG9yPVxuSmM7VmIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoamEucHJvdG90eXBlKTtWYi5wcm90b3R5cGUuY29uc3RydWN0b3I9VmI7S2MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTC5wcm90b3R5cGUpO0tjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1LYzt1Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShqYS5wcm90b3R5cGUpO3ViLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj11YjtMYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShMLnByb3RvdHlwZSk7TGMucHJvdG90eXBlLmNvbnN0cnVjdG9yPUxjO1diLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGphLnByb3RvdHlwZSk7V2IucHJvdG90eXBlLmNvbnN0cnVjdG9yPVdiO01jLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEwucHJvdG90eXBlKTtNYy5wcm90b3R5cGUuY29uc3RydWN0b3I9TWM7WGIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoamEucHJvdG90eXBlKTtYYi5wcm90b3R5cGUuY29uc3RydWN0b3I9WGI7TmMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTC5wcm90b3R5cGUpO1xuTmMucHJvdG90eXBlLmNvbnN0cnVjdG9yPU5jO1liLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEUucHJvdG90eXBlKTtZYi5wcm90b3R5cGUuY29uc3RydWN0b3I9WWI7T2MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTC5wcm90b3R5cGUpO09jLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1PYztaYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFLnByb3RvdHlwZSk7WmIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVpiO1BjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEwucHJvdG90eXBlKTtQYy5wcm90b3R5cGUuY29uc3RydWN0b3I9UGM7JGIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRS5wcm90b3R5cGUpOyRiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj0kYjt2YXIgTGc9e3RyaWFuZ3VsYXRlOmZ1bmN0aW9uKGEsYixjKXtjPWN8fDI7dmFyIGQ9YiYmYi5sZW5ndGgsZT1kP2JbMF0qYzphLmxlbmd0aCxmPWJmKGEsMCxlLGMsITApLGc9W107aWYoIWYpcmV0dXJuIGc7dmFyIGg7aWYoZCl7dmFyIGs9XG5jLGQ9W10sbTt2YXIgbD0wO2ZvcihtPWIubGVuZ3RoO2w8bTtsKyspe3ZhciBuPWJbbF0qazt2YXIgcD1sPG0tMT9iW2wrMV0qazphLmxlbmd0aDtuPWJmKGEsbixwLGssITEpO249PT1uLm5leHQmJihuLnN0ZWluZXI9ITApO2QucHVzaChKZyhuKSl9ZC5zb3J0KEhnKTtmb3IobD0wO2w8ZC5sZW5ndGg7bCsrKXtiPWRbbF07az1mO2lmKGs9SWcoYixrKSliPWVmKGssYiksUmMoYixiLm5leHQpO2Y9UmMoZixmLm5leHQpfX1pZihhLmxlbmd0aD44MCpjKXt2YXIgcj1oPWFbMF07dmFyIHQ9ZD1hWzFdO2ZvcihrPWM7azxlO2srPWMpbD1hW2tdLGI9YVtrKzFdLGw8ciYmKHI9bCksYjx0JiYodD1iKSxsPmgmJihoPWwpLGI+ZCYmKGQ9Yik7aD1NYXRoLm1heChoLXIsZC10KTtoPTAhPT1oPzEvaDowfVNjKGYsZyxjLHIsdCxoKTtyZXR1cm4gZ319LCRhPXthcmVhOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aCxjPTAsZD1iLTEsZT0wO2U8YjtkPWUrKyljKz1hW2RdLngqYVtlXS55LVxuYVtlXS54KmFbZF0ueTtyZXR1cm4uNSpjfSxpc0Nsb2NrV2lzZTpmdW5jdGlvbihhKXtyZXR1cm4gMD4kYS5hcmVhKGEpfSx0cmlhbmd1bGF0ZVNoYXBlOmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXt2YXIgYj1hLmxlbmd0aDsyPGImJmFbYi0xXS5lcXVhbHMoYVswXSkmJmEucG9wKCl9ZnVuY3Rpb24gZChhLGIpe2Zvcih2YXIgYz0wO2M8Yi5sZW5ndGg7YysrKWEucHVzaChiW2NdLngpLGEucHVzaChiW2NdLnkpfXZhciBlPVtdLGY9W10sZz1bXTtjKGEpO2QoZSxhKTt2YXIgaD1hLmxlbmd0aDtiLmZvckVhY2goYyk7Zm9yKGE9MDthPGIubGVuZ3RoO2ErKylmLnB1c2goaCksaCs9YlthXS5sZW5ndGgsZChlLGJbYV0pO2I9TGcudHJpYW5ndWxhdGUoZSxmKTtmb3IoYT0wO2E8Yi5sZW5ndGg7YSs9MylnLnB1c2goYi5zbGljZShhLGErMykpO3JldHVybiBnfX07aWIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTC5wcm90b3R5cGUpO2liLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1pYjtcbkxhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEUucHJvdG90eXBlKTtMYS5wcm90b3R5cGUuY29uc3RydWN0b3I9TGE7TGEucHJvdG90eXBlLmdldEFycmF5cz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIiksYT1hP0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGEuYXJyYXkpOltdLGI9dGhpcy5nZXRBdHRyaWJ1dGUoXCJ1dlwiKSxiPWI/QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYi5hcnJheSk6W10sYz10aGlzLmluZGV4LGM9Yz9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChjLmFycmF5KTpbXTtyZXR1cm57cG9zaXRpb246YSx1djpiLGluZGV4OmN9fTtMYS5wcm90b3R5cGUuYWRkU2hhcGVMaXN0PWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sZW5ndGg7Yi5hcnJheXM9dGhpcy5nZXRBcnJheXMoKTtmb3IodmFyIGQ9MDtkPGM7ZCsrKXRoaXMuYWRkU2hhcGUoYVtkXSxiKTt0aGlzLnNldEluZGV4KGIuYXJyYXlzLmluZGV4KTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsXG5uZXcgQihiLmFycmF5cy5wb3NpdGlvbiwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBCKGIuYXJyYXlzLnV2LDIpKX07TGEucHJvdG90eXBlLmFkZFNoYXBlPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhLGIsYyl7Ynx8Y29uc29sZS5lcnJvcihcIlRIUkVFLkV4dHJ1ZGVHZW9tZXRyeTogdmVjIGRvZXMgbm90IGV4aXN0XCIpO3JldHVybiBiLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoYykuYWRkKGEpfWZ1bmN0aW9uIGQoYSxiLGMpe3ZhciBkPWEueC1iLng7dmFyIGU9YS55LWIueTt2YXIgZj1jLngtYS54O3ZhciBnPWMueS1hLnksaD1kKmQrZSplO2lmKE1hdGguYWJzKGQqZy1lKmYpPk51bWJlci5FUFNJTE9OKXt2YXIgaz1NYXRoLnNxcnQoaCksbT1NYXRoLnNxcnQoZipmK2cqZyksaD1iLngtZS9rO2I9Yi55K2QvaztnPSgoYy54LWcvbS1oKSpnLShjLnkrZi9tLWIpKmYpLyhkKmctZSpmKTtmPWgrZCpnLWEueDtkPWIrZSpnLWEueTtlPWYqZitkKmQ7aWYoMj49ZSlyZXR1cm4gbmV3IEQoZixcbmQpO2U9TWF0aC5zcXJ0KGUvMil9ZWxzZSBhPSExLGQ+TnVtYmVyLkVQU0lMT04/Zj5OdW1iZXIuRVBTSUxPTiYmKGE9ITApOmQ8LU51bWJlci5FUFNJTE9OP2Y8LU51bWJlci5FUFNJTE9OJiYoYT0hMCk6TWF0aC5zaWduKGUpPT09TWF0aC5zaWduKGcpJiYoYT0hMCksYT8oZj0tZSxlPU1hdGguc3FydChoKSk6KGY9ZCxkPWUsZT1NYXRoLnNxcnQoaC8yKSk7cmV0dXJuIG5ldyBEKGYvZSxkL2UpfWZ1bmN0aW9uIGUoYSxiKXtmb3IoRz1hLmxlbmd0aDswPD0tLUc7KXt2YXIgYz1HO3ZhciBkPUctMTswPmQmJihkPWEubGVuZ3RoLTEpO3ZhciBlLGY9eCsyKnc7Zm9yKGU9MDtlPGY7ZSsrKXt2YXIgZz1YKmUsbT1YKihlKzEpLG49YitkK2cscT1iK2QrbSxtPWIrYyttO2goYitjK2cpO2gobik7aChtKTtoKG4pO2gocSk7aChtKTtnPWwubGVuZ3RoLzM7Zz1FLmdlbmVyYXRlU2lkZVdhbGxVVihTLGwsZy02LGctMyxnLTIsZy0xKTtrKGdbMF0pO2soZ1sxXSk7ayhnWzNdKTtrKGdbMV0pO1xuayhnWzJdKTtrKGdbM10pfX19ZnVuY3Rpb24gZihhLGIsYyl7ci5wdXNoKGEpO3IucHVzaChiKTtyLnB1c2goYyl9ZnVuY3Rpb24gZyhhLGIsYyl7aChhKTtoKGIpO2goYyk7YT1sLmxlbmd0aC8zO2E9RS5nZW5lcmF0ZVRvcFVWKFMsbCxhLTMsYS0yLGEtMSk7ayhhWzBdKTtrKGFbMV0pO2soYVsyXSl9ZnVuY3Rpb24gaChhKXtuLnB1c2gobC5sZW5ndGgvMyk7bC5wdXNoKHJbMyphKzBdKTtsLnB1c2goclszKmErMV0pO2wucHVzaChyWzMqYSsyXSl9ZnVuY3Rpb24gayhhKXt1LnB1c2goYS54KTt1LnB1c2goYS55KX12YXIgbT1iLmFycmF5cz9iLmFycmF5czp0aGlzLmdldEFycmF5cygpLGw9bS5wb3NpdGlvbixuPW0uaW5kZXgsdT1tLnV2LHI9W10sbT12b2lkIDAhPT1iLmFtb3VudD9iLmFtb3VudDoxMDAsdD12b2lkIDAhPT1iLmJldmVsVGhpY2tuZXNzP2IuYmV2ZWxUaGlja25lc3M6Nix2PXZvaWQgMCE9PWIuYmV2ZWxTaXplP2IuYmV2ZWxTaXplOnQtMix3PXZvaWQgMCE9PWIuYmV2ZWxTZWdtZW50cz9cbmIuYmV2ZWxTZWdtZW50czozLHo9dm9pZCAwIT09Yi5iZXZlbEVuYWJsZWQ/Yi5iZXZlbEVuYWJsZWQ6ITAseT12b2lkIDAhPT1iLmN1cnZlU2VnbWVudHM/Yi5jdXJ2ZVNlZ21lbnRzOjEyLHg9dm9pZCAwIT09Yi5zdGVwcz9iLnN0ZXBzOjEsQT1iLmV4dHJ1ZGVQYXRoLEM9ITEsRT12b2lkIDAhPT1iLlVWR2VuZXJhdG9yP2IuVVZHZW5lcmF0b3I6aWIuV29ybGRVVkdlbmVyYXRvcjtpZihBKXt2YXIgSD1BLmdldFNwYWNlZFBvaW50cyh4KTtDPSEwO3o9ITE7dmFyIEs9dm9pZCAwIT09Yi5mcmFtZXM/Yi5mcmFtZXM6QS5jb21wdXRlRnJlbmV0RnJhbWVzKHgsITEpO3ZhciBMPW5ldyBwO3ZhciBNPW5ldyBwO3ZhciBQPW5ldyBwfXp8fCh2PXQ9dz0wKTt2YXIgTyxTPXRoaXMseT1hLmV4dHJhY3RQb2ludHMoeSk7YT15LnNoYXBlO3ZhciBRPXkuaG9sZXM7aWYoISRhLmlzQ2xvY2tXaXNlKGEpKXthPWEucmV2ZXJzZSgpO3ZhciBOPTA7Zm9yKE89US5sZW5ndGg7TjxPO04rKyl7dmFyIFI9XG5RW05dOyRhLmlzQ2xvY2tXaXNlKFIpJiYoUVtOXT1SLnJldmVyc2UoKSl9fXZhciBVPSRhLnRyaWFuZ3VsYXRlU2hhcGUoYSxRKSxXPWE7Tj0wO2ZvcihPPVEubGVuZ3RoO048TztOKyspUj1RW05dLGE9YS5jb25jYXQoUik7dmFyIFYsWD1hLmxlbmd0aCxULGJhPVUubGVuZ3RoLHk9W10sRz0wO3ZhciBZPVcubGVuZ3RoO3ZhciBlYT1ZLTE7Zm9yKFY9RysxO0c8WTtHKyssZWErKyxWKyspZWE9PT1ZJiYoZWE9MCksVj09PVkmJihWPTApLHlbR109ZChXW0ddLFdbZWFdLFdbVl0pO3ZhciBBPVtdLGNhPXkuY29uY2F0KCk7Tj0wO2ZvcihPPVEubGVuZ3RoO048TztOKyspe1I9UVtOXTt2YXIgYWE9W107Rz0wO1k9Ui5sZW5ndGg7ZWE9WS0xO2ZvcihWPUcrMTtHPFk7RysrLGVhKyssVisrKWVhPT09WSYmKGVhPTApLFY9PT1ZJiYoVj0wKSxhYVtHXT1kKFJbR10sUltlYV0sUltWXSk7QS5wdXNoKGFhKTtjYT1jYS5jb25jYXQoYWEpfWZvcihlYT0wO2VhPHc7ZWErKyl7WT1lYS93O3ZhciBkYT1cbnQqTWF0aC5jb3MoWSpNYXRoLlBJLzIpO1Y9dipNYXRoLnNpbihZKk1hdGguUEkvMik7Rz0wO2ZvcihZPVcubGVuZ3RoO0c8WTtHKyspe3ZhciBmYT1jKFdbR10seVtHXSxWKTtmKGZhLngsZmEueSwtZGEpfU49MDtmb3IoTz1RLmxlbmd0aDtOPE87TisrKWZvcihSPVFbTl0sYWE9QVtOXSxHPTAsWT1SLmxlbmd0aDtHPFk7RysrKWZhPWMoUltHXSxhYVtHXSxWKSxmKGZhLngsZmEueSwtZGEpfVY9djtmb3IoRz0wO0c8WDtHKyspZmE9ej9jKGFbR10sY2FbR10sVik6YVtHXSxDPyhNLmNvcHkoSy5ub3JtYWxzWzBdKS5tdWx0aXBseVNjYWxhcihmYS54KSxMLmNvcHkoSy5iaW5vcm1hbHNbMF0pLm11bHRpcGx5U2NhbGFyKGZhLnkpLFAuY29weShIWzBdKS5hZGQoTSkuYWRkKEwpLGYoUC54LFAueSxQLnopKTpmKGZhLngsZmEueSwwKTtmb3IoWT0xO1k8PXg7WSsrKWZvcihHPTA7RzxYO0crKylmYT16P2MoYVtHXSxjYVtHXSxWKTphW0ddLEM/KE0uY29weShLLm5vcm1hbHNbWV0pLm11bHRpcGx5U2NhbGFyKGZhLngpLFxuTC5jb3B5KEsuYmlub3JtYWxzW1ldKS5tdWx0aXBseVNjYWxhcihmYS55KSxQLmNvcHkoSFtZXSkuYWRkKE0pLmFkZChMKSxmKFAueCxQLnksUC56KSk6ZihmYS54LGZhLnksbS94KlkpO2ZvcihlYT13LTE7MDw9ZWE7ZWEtLSl7WT1lYS93O2RhPXQqTWF0aC5jb3MoWSpNYXRoLlBJLzIpO1Y9dipNYXRoLnNpbihZKk1hdGguUEkvMik7Rz0wO2ZvcihZPVcubGVuZ3RoO0c8WTtHKyspZmE9YyhXW0ddLHlbR10sViksZihmYS54LGZhLnksbStkYSk7Tj0wO2ZvcihPPVEubGVuZ3RoO048TztOKyspZm9yKFI9UVtOXSxhYT1BW05dLEc9MCxZPVIubGVuZ3RoO0c8WTtHKyspZmE9YyhSW0ddLGFhW0ddLFYpLEM/ZihmYS54LGZhLnkrSFt4LTFdLnksSFt4LTFdLngrZGEpOmYoZmEueCxmYS55LG0rZGEpfShmdW5jdGlvbigpe3ZhciBhPWwubGVuZ3RoLzM7aWYoeil7dmFyIGM9MCpYO2ZvcihHPTA7RzxiYTtHKyspVD1VW0ddLGcoVFsyXStjLFRbMV0rYyxUWzBdK2MpO2M9WCooeCsyKncpO2ZvcihHPVxuMDtHPGJhO0crKylUPVVbR10sZyhUWzBdK2MsVFsxXStjLFRbMl0rYyl9ZWxzZXtmb3IoRz0wO0c8YmE7RysrKVQ9VVtHXSxnKFRbMl0sVFsxXSxUWzBdKTtmb3IoRz0wO0c8YmE7RysrKVQ9VVtHXSxnKFRbMF0rWCp4LFRbMV0rWCp4LFRbMl0rWCp4KX1TLmFkZEdyb3VwKGEsbC5sZW5ndGgvMy1hLHZvaWQgMCE9PWIubWF0ZXJpYWw/Yi5tYXRlcmlhbDowKX0pKCk7KGZ1bmN0aW9uKCl7dmFyIGE9bC5sZW5ndGgvMyxjPTA7ZShXLGMpO2MrPVcubGVuZ3RoO049MDtmb3IoTz1RLmxlbmd0aDtOPE87TisrKVI9UVtOXSxlKFIsYyksYys9Ui5sZW5ndGg7Uy5hZGRHcm91cChhLGwubGVuZ3RoLzMtYSx2b2lkIDAhPT1iLmV4dHJ1ZGVNYXRlcmlhbD9iLmV4dHJ1ZGVNYXRlcmlhbDoxKX0pKCk7Yi5hcnJheXN8fCh0aGlzLnNldEluZGV4KG4pLHRoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihsLDMpKSx0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsbmV3IEIodSwyKSkpfTtpYi5Xb3JsZFVWR2VuZXJhdG9yPVxue2dlbmVyYXRlVG9wVVY6ZnVuY3Rpb24oYSxiLGMsZCxlKXthPWJbMypkXTtkPWJbMypkKzFdO3ZhciBmPWJbMyplXTtlPWJbMyplKzFdO3JldHVybltuZXcgRChiWzMqY10sYlszKmMrMV0pLG5ldyBEKGEsZCksbmV3IEQoZixlKV19LGdlbmVyYXRlU2lkZVdhbGxVVjpmdW5jdGlvbihhLGIsYyxkLGUsZil7YT1iWzMqY107dmFyIGc9YlszKmMrMV07Yz1iWzMqYysyXTt2YXIgaD1iWzMqZF0saz1iWzMqZCsxXTtkPWJbMypkKzJdO3ZhciBtPWJbMyplXSxsPWJbMyplKzFdO2U9YlszKmUrMl07dmFyIG49YlszKmZdLHA9YlszKmYrMV07Yj1iWzMqZisyXTtyZXR1cm4uMDE+TWF0aC5hYnMoZy1rKT9bbmV3IEQoYSwxLWMpLG5ldyBEKGgsMS1kKSxuZXcgRChtLDEtZSksbmV3IEQobiwxLWIpXTpbbmV3IEQoZywxLWMpLG5ldyBEKGssMS1kKSxuZXcgRChsLDEtZSksbmV3IEQocCwxLWIpXX19O1VjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEwucHJvdG90eXBlKTtVYy5wcm90b3R5cGUuY29uc3RydWN0b3I9XG5VYzthYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShMYS5wcm90b3R5cGUpO2FjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hYztWYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShMLnByb3RvdHlwZSk7VmMucHJvdG90eXBlLmNvbnN0cnVjdG9yPVZjO3diLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEUucHJvdG90eXBlKTt3Yi5wcm90b3R5cGUuY29uc3RydWN0b3I9d2I7V2MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTC5wcm90b3R5cGUpO1djLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1XYztiYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFLnByb3RvdHlwZSk7YmMucHJvdG90eXBlLmNvbnN0cnVjdG9yPWJjO1hjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEwucHJvdG90eXBlKTtYYy5wcm90b3R5cGUuY29uc3RydWN0b3I9WGM7Y2MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRS5wcm90b3R5cGUpO2NjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1jYzt4Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShMLnByb3RvdHlwZSk7XG54Yi5wcm90b3R5cGUuY29uc3RydWN0b3I9eGI7eGIucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBhPUwucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiBmZih0aGlzLnBhcmFtZXRlcnMuc2hhcGVzLGEpfTt5Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFLnByb3RvdHlwZSk7eWIucHJvdG90eXBlLmNvbnN0cnVjdG9yPXliO3liLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgYT1FLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtyZXR1cm4gZmYodGhpcy5wYXJhbWV0ZXJzLnNoYXBlcyxhKX07ZGMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRS5wcm90b3R5cGUpO2RjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1kYzt6Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShMLnByb3RvdHlwZSk7emIucHJvdG90eXBlLmNvbnN0cnVjdG9yPXpiO2FiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEUucHJvdG90eXBlKTthYi5wcm90b3R5cGUuY29uc3RydWN0b3I9XG5hYjtZYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh6Yi5wcm90b3R5cGUpO1ljLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1ZYztaYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShhYi5wcm90b3R5cGUpO1pjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1aYzskYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShMLnByb3RvdHlwZSk7JGMucHJvdG90eXBlLmNvbnN0cnVjdG9yPSRjO2VjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEUucHJvdG90eXBlKTtlYy5wcm90b3R5cGUuY29uc3RydWN0b3I9ZWM7dmFyIGthPU9iamVjdC5mcmVlemUoe1dpcmVmcmFtZUdlb21ldHJ5OlRiLFBhcmFtZXRyaWNHZW9tZXRyeTpIYyxQYXJhbWV0cmljQnVmZmVyR2VvbWV0cnk6VWIsVGV0cmFoZWRyb25HZW9tZXRyeTpKYyxUZXRyYWhlZHJvbkJ1ZmZlckdlb21ldHJ5OlZiLE9jdGFoZWRyb25HZW9tZXRyeTpLYyxPY3RhaGVkcm9uQnVmZmVyR2VvbWV0cnk6dWIsSWNvc2FoZWRyb25HZW9tZXRyeTpMYyxJY29zYWhlZHJvbkJ1ZmZlckdlb21ldHJ5OldiLFxuRG9kZWNhaGVkcm9uR2VvbWV0cnk6TWMsRG9kZWNhaGVkcm9uQnVmZmVyR2VvbWV0cnk6WGIsUG9seWhlZHJvbkdlb21ldHJ5OkljLFBvbHloZWRyb25CdWZmZXJHZW9tZXRyeTpqYSxUdWJlR2VvbWV0cnk6TmMsVHViZUJ1ZmZlckdlb21ldHJ5OlliLFRvcnVzS25vdEdlb21ldHJ5Ok9jLFRvcnVzS25vdEJ1ZmZlckdlb21ldHJ5OlpiLFRvcnVzR2VvbWV0cnk6UGMsVG9ydXNCdWZmZXJHZW9tZXRyeTokYixUZXh0R2VvbWV0cnk6VWMsVGV4dEJ1ZmZlckdlb21ldHJ5OmFjLFNwaGVyZUdlb21ldHJ5OlZjLFNwaGVyZUJ1ZmZlckdlb21ldHJ5OndiLFJpbmdHZW9tZXRyeTpXYyxSaW5nQnVmZmVyR2VvbWV0cnk6YmMsUGxhbmVHZW9tZXRyeTpBYyxQbGFuZUJ1ZmZlckdlb21ldHJ5OnJiLExhdGhlR2VvbWV0cnk6WGMsTGF0aGVCdWZmZXJHZW9tZXRyeTpjYyxTaGFwZUdlb21ldHJ5OnhiLFNoYXBlQnVmZmVyR2VvbWV0cnk6eWIsRXh0cnVkZUdlb21ldHJ5OmliLEV4dHJ1ZGVCdWZmZXJHZW9tZXRyeTpMYSxcbkVkZ2VzR2VvbWV0cnk6ZGMsQ29uZUdlb21ldHJ5OlljLENvbmVCdWZmZXJHZW9tZXRyeTpaYyxDeWxpbmRlckdlb21ldHJ5OnpiLEN5bGluZGVyQnVmZmVyR2VvbWV0cnk6YWIsQ2lyY2xlR2VvbWV0cnk6JGMsQ2lyY2xlQnVmZmVyR2VvbWV0cnk6ZWMsQm94R2VvbWV0cnk6TWIsQm94QnVmZmVyR2VvbWV0cnk6cWJ9KTtmYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShQLnByb3RvdHlwZSk7ZmMucHJvdG90eXBlLmNvbnN0cnVjdG9yPWZjO2ZjLnByb3RvdHlwZS5pc1NoYWRvd01hdGVyaWFsPSEwO2djLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEZhLnByb3RvdHlwZSk7Z2MucHJvdG90eXBlLmNvbnN0cnVjdG9yPWdjO2djLnByb3RvdHlwZS5pc1Jhd1NoYWRlck1hdGVyaWFsPSEwO1VhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFAucHJvdG90eXBlKTtVYS5wcm90b3R5cGUuY29uc3RydWN0b3I9VWE7VWEucHJvdG90eXBlLmlzTWVzaFN0YW5kYXJkTWF0ZXJpYWw9ITA7VWEucHJvdG90eXBlLmNvcHk9XG5mdW5jdGlvbihhKXtQLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmRlZmluZXM9e1NUQU5EQVJEOlwiXCJ9O3RoaXMuY29sb3IuY29weShhLmNvbG9yKTt0aGlzLnJvdWdobmVzcz1hLnJvdWdobmVzczt0aGlzLm1ldGFsbmVzcz1hLm1ldGFsbmVzczt0aGlzLm1hcD1hLm1hcDt0aGlzLmxpZ2h0TWFwPWEubGlnaHRNYXA7dGhpcy5saWdodE1hcEludGVuc2l0eT1hLmxpZ2h0TWFwSW50ZW5zaXR5O3RoaXMuYW9NYXA9YS5hb01hcDt0aGlzLmFvTWFwSW50ZW5zaXR5PWEuYW9NYXBJbnRlbnNpdHk7dGhpcy5lbWlzc2l2ZS5jb3B5KGEuZW1pc3NpdmUpO3RoaXMuZW1pc3NpdmVNYXA9YS5lbWlzc2l2ZU1hcDt0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PWEuZW1pc3NpdmVJbnRlbnNpdHk7dGhpcy5idW1wTWFwPWEuYnVtcE1hcDt0aGlzLmJ1bXBTY2FsZT1hLmJ1bXBTY2FsZTt0aGlzLm5vcm1hbE1hcD1hLm5vcm1hbE1hcDt0aGlzLm5vcm1hbFNjYWxlLmNvcHkoYS5ub3JtYWxTY2FsZSk7XG50aGlzLmRpc3BsYWNlbWVudE1hcD1hLmRpc3BsYWNlbWVudE1hcDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPWEuZGlzcGxhY2VtZW50U2NhbGU7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPWEuZGlzcGxhY2VtZW50Qmlhczt0aGlzLnJvdWdobmVzc01hcD1hLnJvdWdobmVzc01hcDt0aGlzLm1ldGFsbmVzc01hcD1hLm1ldGFsbmVzc01hcDt0aGlzLmFscGhhTWFwPWEuYWxwaGFNYXA7dGhpcy5lbnZNYXA9YS5lbnZNYXA7dGhpcy5lbnZNYXBJbnRlbnNpdHk9YS5lbnZNYXBJbnRlbnNpdHk7dGhpcy5yZWZyYWN0aW9uUmF0aW89YS5yZWZyYWN0aW9uUmF0aW87dGhpcy53aXJlZnJhbWU9YS53aXJlZnJhbWU7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9YS53aXJlZnJhbWVMaW5ld2lkdGg7dGhpcy53aXJlZnJhbWVMaW5lY2FwPWEud2lyZWZyYW1lTGluZWNhcDt0aGlzLndpcmVmcmFtZUxpbmVqb2luPWEud2lyZWZyYW1lTGluZWpvaW47dGhpcy5za2lubmluZz1hLnNraW5uaW5nO3RoaXMubW9ycGhUYXJnZXRzPVxuYS5tb3JwaFRhcmdldHM7dGhpcy5tb3JwaE5vcm1hbHM9YS5tb3JwaE5vcm1hbHM7cmV0dXJuIHRoaXN9O0FiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFVhLnByb3RvdHlwZSk7QWIucHJvdG90eXBlLmNvbnN0cnVjdG9yPUFiO0FiLnByb3RvdHlwZS5pc01lc2hQaHlzaWNhbE1hdGVyaWFsPSEwO0FiLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe1VhLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmRlZmluZXM9e1BIWVNJQ0FMOlwiXCJ9O3RoaXMucmVmbGVjdGl2aXR5PWEucmVmbGVjdGl2aXR5O3RoaXMuY2xlYXJDb2F0PWEuY2xlYXJDb2F0O3RoaXMuY2xlYXJDb2F0Um91Z2huZXNzPWEuY2xlYXJDb2F0Um91Z2huZXNzO3JldHVybiB0aGlzfTtNYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShQLnByb3RvdHlwZSk7TWEucHJvdG90eXBlLmNvbnN0cnVjdG9yPU1hO01hLnByb3RvdHlwZS5pc01lc2hQaG9uZ01hdGVyaWFsPSEwO01hLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe1AucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLFxuYSk7dGhpcy5jb2xvci5jb3B5KGEuY29sb3IpO3RoaXMuc3BlY3VsYXIuY29weShhLnNwZWN1bGFyKTt0aGlzLnNoaW5pbmVzcz1hLnNoaW5pbmVzczt0aGlzLm1hcD1hLm1hcDt0aGlzLmxpZ2h0TWFwPWEubGlnaHRNYXA7dGhpcy5saWdodE1hcEludGVuc2l0eT1hLmxpZ2h0TWFwSW50ZW5zaXR5O3RoaXMuYW9NYXA9YS5hb01hcDt0aGlzLmFvTWFwSW50ZW5zaXR5PWEuYW9NYXBJbnRlbnNpdHk7dGhpcy5lbWlzc2l2ZS5jb3B5KGEuZW1pc3NpdmUpO3RoaXMuZW1pc3NpdmVNYXA9YS5lbWlzc2l2ZU1hcDt0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PWEuZW1pc3NpdmVJbnRlbnNpdHk7dGhpcy5idW1wTWFwPWEuYnVtcE1hcDt0aGlzLmJ1bXBTY2FsZT1hLmJ1bXBTY2FsZTt0aGlzLm5vcm1hbE1hcD1hLm5vcm1hbE1hcDt0aGlzLm5vcm1hbFNjYWxlLmNvcHkoYS5ub3JtYWxTY2FsZSk7dGhpcy5kaXNwbGFjZW1lbnRNYXA9YS5kaXNwbGFjZW1lbnRNYXA7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT1cbmEuZGlzcGxhY2VtZW50U2NhbGU7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPWEuZGlzcGxhY2VtZW50Qmlhczt0aGlzLnNwZWN1bGFyTWFwPWEuc3BlY3VsYXJNYXA7dGhpcy5hbHBoYU1hcD1hLmFscGhhTWFwO3RoaXMuZW52TWFwPWEuZW52TWFwO3RoaXMuY29tYmluZT1hLmNvbWJpbmU7dGhpcy5yZWZsZWN0aXZpdHk9YS5yZWZsZWN0aXZpdHk7dGhpcy5yZWZyYWN0aW9uUmF0aW89YS5yZWZyYWN0aW9uUmF0aW87dGhpcy53aXJlZnJhbWU9YS53aXJlZnJhbWU7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9YS53aXJlZnJhbWVMaW5ld2lkdGg7dGhpcy53aXJlZnJhbWVMaW5lY2FwPWEud2lyZWZyYW1lTGluZWNhcDt0aGlzLndpcmVmcmFtZUxpbmVqb2luPWEud2lyZWZyYW1lTGluZWpvaW47dGhpcy5za2lubmluZz1hLnNraW5uaW5nO3RoaXMubW9ycGhUYXJnZXRzPWEubW9ycGhUYXJnZXRzO3RoaXMubW9ycGhOb3JtYWxzPWEubW9ycGhOb3JtYWxzO3JldHVybiB0aGlzfTtCYi5wcm90b3R5cGU9XG5PYmplY3QuY3JlYXRlKE1hLnByb3RvdHlwZSk7QmIucHJvdG90eXBlLmNvbnN0cnVjdG9yPUJiO0JiLnByb3RvdHlwZS5pc01lc2hUb29uTWF0ZXJpYWw9ITA7QmIucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7TWEucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuZ3JhZGllbnRNYXA9YS5ncmFkaWVudE1hcDtyZXR1cm4gdGhpc307Q2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoUC5wcm90b3R5cGUpO0NiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1DYjtDYi5wcm90b3R5cGUuaXNNZXNoTm9ybWFsTWF0ZXJpYWw9ITA7Q2IucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7UC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5idW1wTWFwPWEuYnVtcE1hcDt0aGlzLmJ1bXBTY2FsZT1hLmJ1bXBTY2FsZTt0aGlzLm5vcm1hbE1hcD1hLm5vcm1hbE1hcDt0aGlzLm5vcm1hbFNjYWxlLmNvcHkoYS5ub3JtYWxTY2FsZSk7dGhpcy5kaXNwbGFjZW1lbnRNYXA9YS5kaXNwbGFjZW1lbnRNYXA7XG50aGlzLmRpc3BsYWNlbWVudFNjYWxlPWEuZGlzcGxhY2VtZW50U2NhbGU7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPWEuZGlzcGxhY2VtZW50Qmlhczt0aGlzLndpcmVmcmFtZT1hLndpcmVmcmFtZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD1hLndpcmVmcmFtZUxpbmV3aWR0aDt0aGlzLnNraW5uaW5nPWEuc2tpbm5pbmc7dGhpcy5tb3JwaFRhcmdldHM9YS5tb3JwaFRhcmdldHM7dGhpcy5tb3JwaE5vcm1hbHM9YS5tb3JwaE5vcm1hbHM7cmV0dXJuIHRoaXN9O0RiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFAucHJvdG90eXBlKTtEYi5wcm90b3R5cGUuY29uc3RydWN0b3I9RGI7RGIucHJvdG90eXBlLmlzTWVzaExhbWJlcnRNYXRlcmlhbD0hMDtEYi5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtQLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmNvbG9yLmNvcHkoYS5jb2xvcik7dGhpcy5tYXA9YS5tYXA7dGhpcy5saWdodE1hcD1hLmxpZ2h0TWFwO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9XG5hLmxpZ2h0TWFwSW50ZW5zaXR5O3RoaXMuYW9NYXA9YS5hb01hcDt0aGlzLmFvTWFwSW50ZW5zaXR5PWEuYW9NYXBJbnRlbnNpdHk7dGhpcy5lbWlzc2l2ZS5jb3B5KGEuZW1pc3NpdmUpO3RoaXMuZW1pc3NpdmVNYXA9YS5lbWlzc2l2ZU1hcDt0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PWEuZW1pc3NpdmVJbnRlbnNpdHk7dGhpcy5zcGVjdWxhck1hcD1hLnNwZWN1bGFyTWFwO3RoaXMuYWxwaGFNYXA9YS5hbHBoYU1hcDt0aGlzLmVudk1hcD1hLmVudk1hcDt0aGlzLmNvbWJpbmU9YS5jb21iaW5lO3RoaXMucmVmbGVjdGl2aXR5PWEucmVmbGVjdGl2aXR5O3RoaXMucmVmcmFjdGlvblJhdGlvPWEucmVmcmFjdGlvblJhdGlvO3RoaXMud2lyZWZyYW1lPWEud2lyZWZyYW1lO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPWEud2lyZWZyYW1lTGluZXdpZHRoO3RoaXMud2lyZWZyYW1lTGluZWNhcD1hLndpcmVmcmFtZUxpbmVjYXA7dGhpcy53aXJlZnJhbWVMaW5lam9pbj1hLndpcmVmcmFtZUxpbmVqb2luO1xudGhpcy5za2lubmluZz1hLnNraW5uaW5nO3RoaXMubW9ycGhUYXJnZXRzPWEubW9ycGhUYXJnZXRzO3RoaXMubW9ycGhOb3JtYWxzPWEubW9ycGhOb3JtYWxzO3JldHVybiB0aGlzfTtFYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShXLnByb3RvdHlwZSk7RWIucHJvdG90eXBlLmNvbnN0cnVjdG9yPUViO0ViLnByb3RvdHlwZS5pc0xpbmVEYXNoZWRNYXRlcmlhbD0hMDtFYi5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtXLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLnNjYWxlPWEuc2NhbGU7dGhpcy5kYXNoU2l6ZT1hLmRhc2hTaXplO3RoaXMuZ2FwU2l6ZT1hLmdhcFNpemU7cmV0dXJuIHRoaXN9O3ZhciBNZz1PYmplY3QuZnJlZXplKHtTaGFkb3dNYXRlcmlhbDpmYyxTcHJpdGVNYXRlcmlhbDpoYixSYXdTaGFkZXJNYXRlcmlhbDpnYyxTaGFkZXJNYXRlcmlhbDpGYSxQb2ludHNNYXRlcmlhbDpLYSxNZXNoUGh5c2ljYWxNYXRlcmlhbDpBYixNZXNoU3RhbmRhcmRNYXRlcmlhbDpVYSxcbk1lc2hQaG9uZ01hdGVyaWFsOk1hLE1lc2hUb29uTWF0ZXJpYWw6QmIsTWVzaE5vcm1hbE1hdGVyaWFsOkNiLE1lc2hMYW1iZXJ0TWF0ZXJpYWw6RGIsTWVzaERlcHRoTWF0ZXJpYWw6ZWIsTWVzaERpc3RhbmNlTWF0ZXJpYWw6ZmIsTWVzaEJhc2ljTWF0ZXJpYWw6QWEsTGluZURhc2hlZE1hdGVyaWFsOkViLExpbmVCYXNpY01hdGVyaWFsOlcsTWF0ZXJpYWw6UH0pLEliPXtlbmFibGVkOiExLGZpbGVzOnt9LGFkZDpmdW5jdGlvbihhLGIpeyExIT09dGhpcy5lbmFibGVkJiYodGhpcy5maWxlc1thXT1iKX0sZ2V0OmZ1bmN0aW9uKGEpe2lmKCExIT09dGhpcy5lbmFibGVkKXJldHVybiB0aGlzLmZpbGVzW2FdfSxyZW1vdmU6ZnVuY3Rpb24oYSl7ZGVsZXRlIHRoaXMuZmlsZXNbYV19LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5maWxlcz17fX19LHhhPW5ldyBoZSxjYj17fTtPYmplY3QuYXNzaWduKE5hLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbihhLGIsYyxkKXt2b2lkIDA9PT1hJiYoYT1cblwiXCIpO3ZvaWQgMCE9PXRoaXMucGF0aCYmKGE9dGhpcy5wYXRoK2EpO2E9dGhpcy5tYW5hZ2VyLnJlc29sdmVVUkwoYSk7dmFyIGU9dGhpcyxmPUliLmdldChhKTtpZih2b2lkIDAhPT1mKXJldHVybiBlLm1hbmFnZXIuaXRlbVN0YXJ0KGEpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiJiZiKGYpO2UubWFuYWdlci5pdGVtRW5kKGEpfSwwKSxmO2lmKHZvaWQgMCE9PWNiW2FdKWNiW2FdLnB1c2goe29uTG9hZDpiLG9uUHJvZ3Jlc3M6YyxvbkVycm9yOmR9KTtlbHNle3ZhciBnPWEubWF0Y2goL15kYXRhOiguKj8pKDtiYXNlNjQpPywoLiopJC8pO2lmKGcpe2M9Z1sxXTt2YXIgaD0hIWdbMl0sZz1nWzNdLGc9d2luZG93LmRlY29kZVVSSUNvbXBvbmVudChnKTtoJiYoZz13aW5kb3cuYXRvYihnKSk7dHJ5e3ZhciBrPSh0aGlzLnJlc3BvbnNlVHlwZXx8XCJcIikudG9Mb3dlckNhc2UoKTtzd2l0Y2goayl7Y2FzZSBcImFycmF5YnVmZmVyXCI6Y2FzZSBcImJsb2JcIjpmb3IodmFyIG09bmV3IFVpbnQ4QXJyYXkoZy5sZW5ndGgpLFxuaD0wO2g8Zy5sZW5ndGg7aCsrKW1baF09Zy5jaGFyQ29kZUF0KGgpO3ZhciBsPVwiYmxvYlwiPT09az9uZXcgQmxvYihbbS5idWZmZXJdLHt0eXBlOmN9KTptLmJ1ZmZlcjticmVhaztjYXNlIFwiZG9jdW1lbnRcIjpsPShuZXcgRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoZyxjKTticmVhaztjYXNlIFwianNvblwiOmw9SlNPTi5wYXJzZShnKTticmVhaztkZWZhdWx0Omw9Z313aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2ImJmIobCk7ZS5tYW5hZ2VyLml0ZW1FbmQoYSl9LDApfWNhdGNoKHUpe3dpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZCYmZCh1KTtlLm1hbmFnZXIuaXRlbUVuZChhKTtlLm1hbmFnZXIuaXRlbUVycm9yKGEpfSwwKX19ZWxzZXtjYlthXT1bXTtjYlthXS5wdXNoKHtvbkxvYWQ6YixvblByb2dyZXNzOmMsb25FcnJvcjpkfSk7dmFyIG49bmV3IFhNTEh0dHBSZXF1ZXN0O24ub3BlbihcIkdFVFwiLGEsITApO24uYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixmdW5jdGlvbihiKXt2YXIgYz1cbnRoaXMucmVzcG9uc2U7SWIuYWRkKGEsYyk7dmFyIGQ9Y2JbYV07ZGVsZXRlIGNiW2FdO2lmKDIwMD09PXRoaXMuc3RhdHVzKXtmb3IodmFyIGY9MCxnPWQubGVuZ3RoO2Y8ZztmKyspe3ZhciBoPWRbZl07aWYoaC5vbkxvYWQpaC5vbkxvYWQoYyl9ZS5tYW5hZ2VyLml0ZW1FbmQoYSl9ZWxzZSBpZigwPT09dGhpcy5zdGF0dXMpe2NvbnNvbGUud2FybihcIlRIUkVFLkZpbGVMb2FkZXI6IEhUVFAgU3RhdHVzIDAgcmVjZWl2ZWQuXCIpO2Y9MDtmb3IoZz1kLmxlbmd0aDtmPGc7ZisrKWlmKGg9ZFtmXSxoLm9uTG9hZCloLm9uTG9hZChjKTtlLm1hbmFnZXIuaXRlbUVuZChhKX1lbHNle2Y9MDtmb3IoZz1kLmxlbmd0aDtmPGc7ZisrKWlmKGg9ZFtmXSxoLm9uRXJyb3IpaC5vbkVycm9yKGIpO2UubWFuYWdlci5pdGVtRW5kKGEpO2UubWFuYWdlci5pdGVtRXJyb3IoYSl9fSwhMSk7bi5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIixmdW5jdGlvbihiKXtmb3IodmFyIGM9Y2JbYV0sZD0wLGU9XG5jLmxlbmd0aDtkPGU7ZCsrKXt2YXIgZj1jW2RdO2lmKGYub25Qcm9ncmVzcylmLm9uUHJvZ3Jlc3MoYil9fSwhMSk7bi5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIixmdW5jdGlvbihiKXt2YXIgYz1jYlthXTtkZWxldGUgY2JbYV07Zm9yKHZhciBkPTAsZj1jLmxlbmd0aDtkPGY7ZCsrKXt2YXIgZz1jW2RdO2lmKGcub25FcnJvcilnLm9uRXJyb3IoYil9ZS5tYW5hZ2VyLml0ZW1FbmQoYSk7ZS5tYW5hZ2VyLml0ZW1FcnJvcihhKX0sITEpO3ZvaWQgMCE9PXRoaXMucmVzcG9uc2VUeXBlJiYobi5yZXNwb25zZVR5cGU9dGhpcy5yZXNwb25zZVR5cGUpO3ZvaWQgMCE9PXRoaXMud2l0aENyZWRlbnRpYWxzJiYobi53aXRoQ3JlZGVudGlhbHM9dGhpcy53aXRoQ3JlZGVudGlhbHMpO24ub3ZlcnJpZGVNaW1lVHlwZSYmbi5vdmVycmlkZU1pbWVUeXBlKHZvaWQgMCE9PXRoaXMubWltZVR5cGU/dGhpcy5taW1lVHlwZTpcInRleHQvcGxhaW5cIik7Zm9yKGggaW4gdGhpcy5yZXF1ZXN0SGVhZGVyKW4uc2V0UmVxdWVzdEhlYWRlcihoLFxudGhpcy5yZXF1ZXN0SGVhZGVyW2hdKTtuLnNlbmQobnVsbCl9ZS5tYW5hZ2VyLml0ZW1TdGFydChhKTtyZXR1cm4gbn19LHNldFBhdGg6ZnVuY3Rpb24oYSl7dGhpcy5wYXRoPWE7cmV0dXJuIHRoaXN9LHNldFJlc3BvbnNlVHlwZTpmdW5jdGlvbihhKXt0aGlzLnJlc3BvbnNlVHlwZT1hO3JldHVybiB0aGlzfSxzZXRXaXRoQ3JlZGVudGlhbHM6ZnVuY3Rpb24oYSl7dGhpcy53aXRoQ3JlZGVudGlhbHM9YTtyZXR1cm4gdGhpc30sc2V0TWltZVR5cGU6ZnVuY3Rpb24oYSl7dGhpcy5taW1lVHlwZT1hO3JldHVybiB0aGlzfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGEpe3RoaXMucmVxdWVzdEhlYWRlcj1hO3JldHVybiB0aGlzfX0pO09iamVjdC5hc3NpZ24oZ2YucHJvdG90eXBlLHtsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe2Z1bmN0aW9uIGUoZSl7bS5sb2FkKGFbZV0sZnVuY3Rpb24oYSl7YT1nLl9wYXJzZXIoYSwhMCk7aFtlXT17d2lkdGg6YS53aWR0aCxoZWlnaHQ6YS5oZWlnaHQsXG5mb3JtYXQ6YS5mb3JtYXQsbWlwbWFwczphLm1pcG1hcHN9O2YrPTE7Nj09PWYmJigxPT09YS5taXBtYXBDb3VudCYmKGsubWluRmlsdGVyPTEwMDYpLGsuZm9ybWF0PWEuZm9ybWF0LGsubmVlZHNVcGRhdGU9ITAsYiYmYihrKSl9LGMsZCl9dmFyIGYsZz10aGlzLGg9W10saz1uZXcgU2I7ay5pbWFnZT1oO3ZhciBtPW5ldyBOYSh0aGlzLm1hbmFnZXIpO20uc2V0UGF0aCh0aGlzLnBhdGgpO20uc2V0UmVzcG9uc2VUeXBlKFwiYXJyYXlidWZmZXJcIik7aWYoQXJyYXkuaXNBcnJheShhKSlmb3IodmFyIGw9Zj0wLG49YS5sZW5ndGg7bDxuOysrbCllKGwpO2Vsc2UgbS5sb2FkKGEsZnVuY3Rpb24oYSl7YT1nLl9wYXJzZXIoYSwhMCk7aWYoYS5pc0N1YmVtYXApZm9yKHZhciBjPWEubWlwbWFwcy5sZW5ndGgvYS5taXBtYXBDb3VudCxkPTA7ZDxjO2QrKyl7aFtkXT17bWlwbWFwczpbXX07Zm9yKHZhciBlPTA7ZTxhLm1pcG1hcENvdW50O2UrKyloW2RdLm1pcG1hcHMucHVzaChhLm1pcG1hcHNbZCpcbmEubWlwbWFwQ291bnQrZV0pLGhbZF0uZm9ybWF0PWEuZm9ybWF0LGhbZF0ud2lkdGg9YS53aWR0aCxoW2RdLmhlaWdodD1hLmhlaWdodH1lbHNlIGsuaW1hZ2Uud2lkdGg9YS53aWR0aCxrLmltYWdlLmhlaWdodD1hLmhlaWdodCxrLm1pcG1hcHM9YS5taXBtYXBzOzE9PT1hLm1pcG1hcENvdW50JiYoay5taW5GaWx0ZXI9MTAwNik7ay5mb3JtYXQ9YS5mb3JtYXQ7ay5uZWVkc1VwZGF0ZT0hMDtiJiZiKGspfSxjLGQpO3JldHVybiBrfSxzZXRQYXRoOmZ1bmN0aW9uKGEpe3RoaXMucGF0aD1hO3JldHVybiB0aGlzfX0pO09iamVjdC5hc3NpZ24oaWUucHJvdG90eXBlLHtsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMsZj1uZXcgbGIsZz1uZXcgTmEodGhpcy5tYW5hZ2VyKTtnLnNldFJlc3BvbnNlVHlwZShcImFycmF5YnVmZmVyXCIpO2cubG9hZChhLGZ1bmN0aW9uKGEpe2lmKGE9ZS5fcGFyc2VyKGEpKXZvaWQgMCE9PWEuaW1hZ2U/Zi5pbWFnZT1hLmltYWdlOnZvaWQgMCE9PVxuYS5kYXRhJiYoZi5pbWFnZS53aWR0aD1hLndpZHRoLGYuaW1hZ2UuaGVpZ2h0PWEuaGVpZ2h0LGYuaW1hZ2UuZGF0YT1hLmRhdGEpLGYud3JhcFM9dm9pZCAwIT09YS53cmFwUz9hLndyYXBTOjEwMDEsZi53cmFwVD12b2lkIDAhPT1hLndyYXBUP2Eud3JhcFQ6MTAwMSxmLm1hZ0ZpbHRlcj12b2lkIDAhPT1hLm1hZ0ZpbHRlcj9hLm1hZ0ZpbHRlcjoxMDA2LGYubWluRmlsdGVyPXZvaWQgMCE9PWEubWluRmlsdGVyP2EubWluRmlsdGVyOjEwMDgsZi5hbmlzb3Ryb3B5PXZvaWQgMCE9PWEuYW5pc290cm9weT9hLmFuaXNvdHJvcHk6MSx2b2lkIDAhPT1hLmZvcm1hdCYmKGYuZm9ybWF0PWEuZm9ybWF0KSx2b2lkIDAhPT1hLnR5cGUmJihmLnR5cGU9YS50eXBlKSx2b2lkIDAhPT1hLm1pcG1hcHMmJihmLm1pcG1hcHM9YS5taXBtYXBzKSwxPT09YS5taXBtYXBDb3VudCYmKGYubWluRmlsdGVyPTEwMDYpLGYubmVlZHNVcGRhdGU9ITAsYiYmYihmLGEpfSxjLGQpO3JldHVybiBmfX0pO09iamVjdC5hc3NpZ24oYWQucHJvdG90eXBlLFxue2Nyb3NzT3JpZ2luOlwiQW5vbnltb3VzXCIsbG9hZDpmdW5jdGlvbihhLGIsYyxkKXt2b2lkIDA9PT1hJiYoYT1cIlwiKTt2b2lkIDAhPT10aGlzLnBhdGgmJihhPXRoaXMucGF0aCthKTthPXRoaXMubWFuYWdlci5yZXNvbHZlVVJMKGEpO3ZhciBlPXRoaXMsZj1JYi5nZXQoYSk7aWYodm9pZCAwIT09ZilyZXR1cm4gZS5tYW5hZ2VyLml0ZW1TdGFydChhKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YiYmYihmKTtlLm1hbmFnZXIuaXRlbUVuZChhKX0sMCksZjtjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIixcImltZ1wiKTtjLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsZnVuY3Rpb24oKXtJYi5hZGQoYSx0aGlzKTtiJiZiKHRoaXMpO2UubWFuYWdlci5pdGVtRW5kKGEpfSwhMSk7Yy5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIixmdW5jdGlvbihiKXtkJiZkKGIpO2UubWFuYWdlci5pdGVtRW5kKGEpO2UubWFuYWdlci5pdGVtRXJyb3IoYSl9LFxuITEpO1wiZGF0YTpcIiE9PWEuc3Vic3RyKDAsNSkmJnZvaWQgMCE9PXRoaXMuY3Jvc3NPcmlnaW4mJihjLmNyb3NzT3JpZ2luPXRoaXMuY3Jvc3NPcmlnaW4pO2UubWFuYWdlci5pdGVtU3RhcnQoYSk7Yy5zcmM9YTtyZXR1cm4gY30sc2V0Q3Jvc3NPcmlnaW46ZnVuY3Rpb24oYSl7dGhpcy5jcm9zc09yaWdpbj1hO3JldHVybiB0aGlzfSxzZXRQYXRoOmZ1bmN0aW9uKGEpe3RoaXMucGF0aD1hO3JldHVybiB0aGlzfX0pO09iamVjdC5hc3NpZ24oamUucHJvdG90eXBlLHtjcm9zc09yaWdpbjpcIkFub255bW91c1wiLGxvYWQ6ZnVuY3Rpb24oYSxiLGMsZCl7ZnVuY3Rpb24gZShjKXtnLmxvYWQoYVtjXSxmdW5jdGlvbihhKXtmLmltYWdlc1tjXT1hO2grKzs2PT09aCYmKGYubmVlZHNVcGRhdGU9ITAsYiYmYihmKSl9LHZvaWQgMCxkKX12YXIgZj1uZXcgZGIsZz1uZXcgYWQodGhpcy5tYW5hZ2VyKTtnLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pO2cuc2V0UGF0aCh0aGlzLnBhdGgpO1xudmFyIGg9MDtmb3IoYz0wO2M8YS5sZW5ndGg7KytjKWUoYyk7cmV0dXJuIGZ9LHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uKGEpe3RoaXMuY3Jvc3NPcmlnaW49YTtyZXR1cm4gdGhpc30sc2V0UGF0aDpmdW5jdGlvbihhKXt0aGlzLnBhdGg9YTtyZXR1cm4gdGhpc319KTtPYmplY3QuYXNzaWduKEFkLnByb3RvdHlwZSx7Y3Jvc3NPcmlnaW46XCJBbm9ueW1vdXNcIixsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW5ldyBVLGY9bmV3IGFkKHRoaXMubWFuYWdlcik7Zi5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTtmLnNldFBhdGgodGhpcy5wYXRoKTtmLmxvYWQoYSxmdW5jdGlvbihjKXtlLmltYWdlPWM7Yz0wPGEuc2VhcmNoKC9cXC4oanBnfGpwZWcpJC8pfHwwPT09YS5zZWFyY2goL15kYXRhXFw6aW1hZ2VcXC9qcGVnLyk7ZS5mb3JtYXQ9Yz8xMDIyOjEwMjM7ZS5uZWVkc1VwZGF0ZT0hMDt2b2lkIDAhPT1iJiZiKGUpfSxjLGQpO3JldHVybiBlfSxzZXRDcm9zc09yaWdpbjpmdW5jdGlvbihhKXt0aGlzLmNyb3NzT3JpZ2luPVxuYTtyZXR1cm4gdGhpc30sc2V0UGF0aDpmdW5jdGlvbihhKXt0aGlzLnBhdGg9YTtyZXR1cm4gdGhpc319KTtPYmplY3QuYXNzaWduKEMucHJvdG90eXBlLHtnZXRQb2ludDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkN1cnZlOiAuZ2V0UG9pbnQoKSBub3QgaW1wbGVtZW50ZWQuXCIpO3JldHVybiBudWxsfSxnZXRQb2ludEF0OmZ1bmN0aW9uKGEsYil7YT10aGlzLmdldFV0b1RtYXBwaW5nKGEpO3JldHVybiB0aGlzLmdldFBvaW50KGEsYil9LGdldFBvaW50czpmdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT01KTtmb3IodmFyIGI9W10sYz0wO2M8PWE7YysrKWIucHVzaCh0aGlzLmdldFBvaW50KGMvYSkpO3JldHVybiBifSxnZXRTcGFjZWRQb2ludHM6ZnVuY3Rpb24oYSl7dm9pZCAwPT09YSYmKGE9NSk7Zm9yKHZhciBiPVtdLGM9MDtjPD1hO2MrKyliLnB1c2godGhpcy5nZXRQb2ludEF0KGMvYSkpO3JldHVybiBifSxnZXRMZW5ndGg6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldExlbmd0aHMoKTtcbnJldHVybiBhW2EubGVuZ3RoLTFdfSxnZXRMZW5ndGhzOmZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPXRoaXMuYXJjTGVuZ3RoRGl2aXNpb25zKTtpZih0aGlzLmNhY2hlQXJjTGVuZ3RocyYmdGhpcy5jYWNoZUFyY0xlbmd0aHMubGVuZ3RoPT09YSsxJiYhdGhpcy5uZWVkc1VwZGF0ZSlyZXR1cm4gdGhpcy5jYWNoZUFyY0xlbmd0aHM7dGhpcy5uZWVkc1VwZGF0ZT0hMTt2YXIgYj1bXSxjPXRoaXMuZ2V0UG9pbnQoMCksZCxlPTA7Yi5wdXNoKDApO2ZvcihkPTE7ZDw9YTtkKyspe3ZhciBmPXRoaXMuZ2V0UG9pbnQoZC9hKTtlKz1mLmRpc3RhbmNlVG8oYyk7Yi5wdXNoKGUpO2M9Zn1yZXR1cm4gdGhpcy5jYWNoZUFyY0xlbmd0aHM9Yn0sdXBkYXRlQXJjTGVuZ3RoczpmdW5jdGlvbigpe3RoaXMubmVlZHNVcGRhdGU9ITA7dGhpcy5nZXRMZW5ndGhzKCl9LGdldFV0b1RtYXBwaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRMZW5ndGhzKCksZD1jLmxlbmd0aDtiPWI/YjphKlxuY1tkLTFdO2Zvcih2YXIgZT0wLGY9ZC0xLGc7ZTw9ZjspaWYoYT1NYXRoLmZsb29yKGUrKGYtZSkvMiksZz1jW2FdLWIsMD5nKWU9YSsxO2Vsc2UgaWYoMDxnKWY9YS0xO2Vsc2V7Zj1hO2JyZWFrfWE9ZjtpZihjW2FdPT09YilyZXR1cm4gYS8oZC0xKTtlPWNbYV07cmV0dXJuKGErKGItZSkvKGNbYSsxXS1lKSkvKGQtMSl9LGdldFRhbmdlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS0xRS00O2ErPTFFLTQ7MD5iJiYoYj0wKTsxPGEmJihhPTEpO2I9dGhpcy5nZXRQb2ludChiKTtyZXR1cm4gdGhpcy5nZXRQb2ludChhKS5jbG9uZSgpLnN1YihiKS5ub3JtYWxpemUoKX0sZ2V0VGFuZ2VudEF0OmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRVdG9UbWFwcGluZyhhKTtyZXR1cm4gdGhpcy5nZXRUYW5nZW50KGEpfSxjb21wdXRlRnJlbmV0RnJhbWVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IHAsZD1bXSxlPVtdLGY9W10sZz1uZXcgcCxoPW5ldyBPLGs7Zm9yKGs9MDtrPD1hO2srKyl7dmFyIG09XG5rL2E7ZFtrXT10aGlzLmdldFRhbmdlbnRBdChtKTtkW2tdLm5vcm1hbGl6ZSgpfWVbMF09bmV3IHA7ZlswXT1uZXcgcDtrPU51bWJlci5NQVhfVkFMVUU7bT1NYXRoLmFicyhkWzBdLngpO3ZhciBsPU1hdGguYWJzKGRbMF0ueSksbj1NYXRoLmFicyhkWzBdLnopO208PWsmJihrPW0sYy5zZXQoMSwwLDApKTtsPD1rJiYoaz1sLGMuc2V0KDAsMSwwKSk7bjw9ayYmYy5zZXQoMCwwLDEpO2cuY3Jvc3NWZWN0b3JzKGRbMF0sYykubm9ybWFsaXplKCk7ZVswXS5jcm9zc1ZlY3RvcnMoZFswXSxnKTtmWzBdLmNyb3NzVmVjdG9ycyhkWzBdLGVbMF0pO2ZvcihrPTE7azw9YTtrKyspZVtrXT1lW2stMV0uY2xvbmUoKSxmW2tdPWZbay0xXS5jbG9uZSgpLGcuY3Jvc3NWZWN0b3JzKGRbay0xXSxkW2tdKSxnLmxlbmd0aCgpPk51bWJlci5FUFNJTE9OJiYoZy5ub3JtYWxpemUoKSxjPU1hdGguYWNvcyhRLmNsYW1wKGRbay0xXS5kb3QoZFtrXSksLTEsMSkpLGVba10uYXBwbHlNYXRyaXg0KGgubWFrZVJvdGF0aW9uQXhpcyhnLFxuYykpKSxmW2tdLmNyb3NzVmVjdG9ycyhkW2tdLGVba10pO2lmKCEwPT09Yilmb3IoYz1NYXRoLmFjb3MoUS5jbGFtcChlWzBdLmRvdChlW2FdKSwtMSwxKSksYy89YSwwPGRbMF0uZG90KGcuY3Jvc3NWZWN0b3JzKGVbMF0sZVthXSkpJiYoYz0tYyksaz0xO2s8PWE7aysrKWVba10uYXBwbHlNYXRyaXg0KGgubWFrZVJvdGF0aW9uQXhpcyhkW2tdLGMqaykpLGZba10uY3Jvc3NWZWN0b3JzKGRba10sZVtrXSk7cmV0dXJue3RhbmdlbnRzOmQsbm9ybWFsczplLGJpbm9ybWFsczpmfX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5hcmNMZW5ndGhEaXZpc2lvbnM9YS5hcmNMZW5ndGhEaXZpc2lvbnM7cmV0dXJuIHRoaXN9LHRvSlNPTjpmdW5jdGlvbigpe3ZhciBhPXttZXRhZGF0YTp7dmVyc2lvbjo0LjUsdHlwZTpcIkN1cnZlXCIsZ2VuZXJhdG9yOlwiQ3VydmUudG9KU09OXCJ9fTthLmFyY0xlbmd0aERpdmlzaW9ucz1cbnRoaXMuYXJjTGVuZ3RoRGl2aXNpb25zO2EudHlwZT10aGlzLnR5cGU7cmV0dXJuIGF9LGZyb21KU09OOmZ1bmN0aW9uKGEpe3RoaXMuYXJjTGVuZ3RoRGl2aXNpb25zPWEuYXJjTGVuZ3RoRGl2aXNpb25zO3JldHVybiB0aGlzfX0pO0JhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEMucHJvdG90eXBlKTtCYS5wcm90b3R5cGUuY29uc3RydWN0b3I9QmE7QmEucHJvdG90eXBlLmlzRWxsaXBzZUN1cnZlPSEwO0JhLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbihhLGIpe2I9Ynx8bmV3IEQ7Zm9yKHZhciBjPTIqTWF0aC5QSSxkPXRoaXMuYUVuZEFuZ2xlLXRoaXMuYVN0YXJ0QW5nbGUsZT1NYXRoLmFicyhkKTxOdW1iZXIuRVBTSUxPTjswPmQ7KWQrPWM7Zm9yKDtkPmM7KWQtPWM7ZDxOdW1iZXIuRVBTSUxPTiYmKGQ9ZT8wOmMpOyEwIT09dGhpcy5hQ2xvY2t3aXNlfHxlfHwoZD1kPT09Yz8tYzpkLWMpO2M9dGhpcy5hU3RhcnRBbmdsZSthKmQ7YT10aGlzLmFYK3RoaXMueFJhZGl1cypcbk1hdGguY29zKGMpO3ZhciBmPXRoaXMuYVkrdGhpcy55UmFkaXVzKk1hdGguc2luKGMpOzAhPT10aGlzLmFSb3RhdGlvbiYmKGM9TWF0aC5jb3ModGhpcy5hUm90YXRpb24pLGQ9TWF0aC5zaW4odGhpcy5hUm90YXRpb24pLGU9YS10aGlzLmFYLGYtPXRoaXMuYVksYT1lKmMtZipkK3RoaXMuYVgsZj1lKmQrZipjK3RoaXMuYVkpO3JldHVybiBiLnNldChhLGYpfTtCYS5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtDLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmFYPWEuYVg7dGhpcy5hWT1hLmFZO3RoaXMueFJhZGl1cz1hLnhSYWRpdXM7dGhpcy55UmFkaXVzPWEueVJhZGl1czt0aGlzLmFTdGFydEFuZ2xlPWEuYVN0YXJ0QW5nbGU7dGhpcy5hRW5kQW5nbGU9YS5hRW5kQW5nbGU7dGhpcy5hQ2xvY2t3aXNlPWEuYUNsb2Nrd2lzZTt0aGlzLmFSb3RhdGlvbj1hLmFSb3RhdGlvbjtyZXR1cm4gdGhpc307QmEucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBhPVxuQy5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7YS5hWD10aGlzLmFYO2EuYVk9dGhpcy5hWTthLnhSYWRpdXM9dGhpcy54UmFkaXVzO2EueVJhZGl1cz10aGlzLnlSYWRpdXM7YS5hU3RhcnRBbmdsZT10aGlzLmFTdGFydEFuZ2xlO2EuYUVuZEFuZ2xlPXRoaXMuYUVuZEFuZ2xlO2EuYUNsb2Nrd2lzZT10aGlzLmFDbG9ja3dpc2U7YS5hUm90YXRpb249dGhpcy5hUm90YXRpb247cmV0dXJuIGF9O0JhLnByb3RvdHlwZS5mcm9tSlNPTj1mdW5jdGlvbihhKXtDLnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsYSk7dGhpcy5hWD1hLmFYO3RoaXMuYVk9YS5hWTt0aGlzLnhSYWRpdXM9YS54UmFkaXVzO3RoaXMueVJhZGl1cz1hLnlSYWRpdXM7dGhpcy5hU3RhcnRBbmdsZT1hLmFTdGFydEFuZ2xlO3RoaXMuYUVuZEFuZ2xlPWEuYUVuZEFuZ2xlO3RoaXMuYUNsb2Nrd2lzZT1hLmFDbG9ja3dpc2U7dGhpcy5hUm90YXRpb249YS5hUm90YXRpb247cmV0dXJuIHRoaXN9O2hjLnByb3RvdHlwZT1cbk9iamVjdC5jcmVhdGUoQmEucHJvdG90eXBlKTtoYy5wcm90b3R5cGUuY29uc3RydWN0b3I9aGM7aGMucHJvdG90eXBlLmlzQXJjQ3VydmU9ITA7dmFyIFRkPW5ldyBwLEVlPW5ldyBrZSxGZT1uZXcga2UsR2U9bmV3IGtlO2NhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEMucHJvdG90eXBlKTtjYS5wcm90b3R5cGUuY29uc3RydWN0b3I9Y2E7Y2EucHJvdG90eXBlLmlzQ2F0bXVsbFJvbUN1cnZlMz0hMDtjYS5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24oYSxiKXtiPWJ8fG5ldyBwO3ZhciBjPXRoaXMucG9pbnRzLGQ9Yy5sZW5ndGg7YSo9ZC0odGhpcy5jbG9zZWQ/MDoxKTt2YXIgZT1NYXRoLmZsb29yKGEpO2EtPWU7dGhpcy5jbG9zZWQ/ZSs9MDxlPzA6KE1hdGguZmxvb3IoTWF0aC5hYnMoZSkvYy5sZW5ndGgpKzEpKmMubGVuZ3RoOjA9PT1hJiZlPT09ZC0xJiYoZT1kLTIsYT0xKTtpZih0aGlzLmNsb3NlZHx8MDxlKXZhciBmPWNbKGUtMSklZF07ZWxzZSBUZC5zdWJWZWN0b3JzKGNbMF0sXG5jWzFdKS5hZGQoY1swXSksZj1UZDt2YXIgZz1jW2UlZF07dmFyIGg9Y1soZSsxKSVkXTt0aGlzLmNsb3NlZHx8ZSsyPGQ/Yz1jWyhlKzIpJWRdOihUZC5zdWJWZWN0b3JzKGNbZC0xXSxjW2QtMl0pLmFkZChjW2QtMV0pLGM9VGQpO2lmKFwiY2VudHJpcGV0YWxcIj09PXRoaXMuY3VydmVUeXBlfHxcImNob3JkYWxcIj09PXRoaXMuY3VydmVUeXBlKXt2YXIgaz1cImNob3JkYWxcIj09PXRoaXMuY3VydmVUeXBlPy41Oi4yNSxkPU1hdGgucG93KGYuZGlzdGFuY2VUb1NxdWFyZWQoZyksayksZT1NYXRoLnBvdyhnLmRpc3RhbmNlVG9TcXVhcmVkKGgpLGspLGs9TWF0aC5wb3coaC5kaXN0YW5jZVRvU3F1YXJlZChjKSxrKTsxRS00PmUmJihlPTEpOzFFLTQ+ZCYmKGQ9ZSk7MUUtND5rJiYoaz1lKTtFZS5pbml0Tm9udW5pZm9ybUNhdG11bGxSb20oZi54LGcueCxoLngsYy54LGQsZSxrKTtGZS5pbml0Tm9udW5pZm9ybUNhdG11bGxSb20oZi55LGcueSxoLnksYy55LGQsZSxrKTtHZS5pbml0Tm9udW5pZm9ybUNhdG11bGxSb20oZi56LFxuZy56LGgueixjLnosZCxlLGspfWVsc2VcImNhdG11bGxyb21cIj09PXRoaXMuY3VydmVUeXBlJiYoRWUuaW5pdENhdG11bGxSb20oZi54LGcueCxoLngsYy54LHRoaXMudGVuc2lvbiksRmUuaW5pdENhdG11bGxSb20oZi55LGcueSxoLnksYy55LHRoaXMudGVuc2lvbiksR2UuaW5pdENhdG11bGxSb20oZi56LGcueixoLnosYy56LHRoaXMudGVuc2lvbikpO2Iuc2V0KEVlLmNhbGMoYSksRmUuY2FsYyhhKSxHZS5jYWxjKGEpKTtyZXR1cm4gYn07Y2EucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7Qy5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5wb2ludHM9W107Zm9yKHZhciBiPTAsYz1hLnBvaW50cy5sZW5ndGg7YjxjO2IrKyl0aGlzLnBvaW50cy5wdXNoKGEucG9pbnRzW2JdLmNsb25lKCkpO3RoaXMuY2xvc2VkPWEuY2xvc2VkO3RoaXMuY3VydmVUeXBlPWEuY3VydmVUeXBlO3RoaXMudGVuc2lvbj1hLnRlbnNpb247cmV0dXJuIHRoaXN9O2NhLnByb3RvdHlwZS50b0pTT049XG5mdW5jdGlvbigpe3ZhciBhPUMucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO2EucG9pbnRzPVtdO2Zvcih2YXIgYj0wLGM9dGhpcy5wb2ludHMubGVuZ3RoO2I8YztiKyspYS5wb2ludHMucHVzaCh0aGlzLnBvaW50c1tiXS50b0FycmF5KCkpO2EuY2xvc2VkPXRoaXMuY2xvc2VkO2EuY3VydmVUeXBlPXRoaXMuY3VydmVUeXBlO2EudGVuc2lvbj10aGlzLnRlbnNpb247cmV0dXJuIGF9O2NhLnByb3RvdHlwZS5mcm9tSlNPTj1mdW5jdGlvbihhKXtDLnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsYSk7dGhpcy5wb2ludHM9W107Zm9yKHZhciBiPTAsYz1hLnBvaW50cy5sZW5ndGg7YjxjO2IrKyl7dmFyIGQ9YS5wb2ludHNbYl07dGhpcy5wb2ludHMucHVzaCgobmV3IHApLmZyb21BcnJheShkKSl9dGhpcy5jbG9zZWQ9YS5jbG9zZWQ7dGhpcy5jdXJ2ZVR5cGU9YS5jdXJ2ZVR5cGU7dGhpcy50ZW5zaW9uPWEudGVuc2lvbjtyZXR1cm4gdGhpc307T2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoQy5wcm90b3R5cGUpO1xuT2EucHJvdG90eXBlLmNvbnN0cnVjdG9yPU9hO09hLnByb3RvdHlwZS5pc0N1YmljQmV6aWVyQ3VydmU9ITA7T2EucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGEsYil7Yj1ifHxuZXcgRDt2YXIgYz10aGlzLnYwLGQ9dGhpcy52MSxlPXRoaXMudjIsZj10aGlzLnYzO2Iuc2V0KGNkKGEsYy54LGQueCxlLngsZi54KSxjZChhLGMueSxkLnksZS55LGYueSkpO3JldHVybiBifTtPYS5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtDLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLnYwLmNvcHkoYS52MCk7dGhpcy52MS5jb3B5KGEudjEpO3RoaXMudjIuY29weShhLnYyKTt0aGlzLnYzLmNvcHkoYS52Myk7cmV0dXJuIHRoaXN9O09hLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgYT1DLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTthLnYwPXRoaXMudjAudG9BcnJheSgpO2EudjE9dGhpcy52MS50b0FycmF5KCk7YS52Mj10aGlzLnYyLnRvQXJyYXkoKTthLnYzPVxudGhpcy52My50b0FycmF5KCk7cmV0dXJuIGF9O09hLnByb3RvdHlwZS5mcm9tSlNPTj1mdW5jdGlvbihhKXtDLnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsYSk7dGhpcy52MC5mcm9tQXJyYXkoYS52MCk7dGhpcy52MS5mcm9tQXJyYXkoYS52MSk7dGhpcy52Mi5mcm9tQXJyYXkoYS52Mik7dGhpcy52My5mcm9tQXJyYXkoYS52Myk7cmV0dXJuIHRoaXN9O1ZhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEMucHJvdG90eXBlKTtWYS5wcm90b3R5cGUuY29uc3RydWN0b3I9VmE7VmEucHJvdG90eXBlLmlzQ3ViaWNCZXppZXJDdXJ2ZTM9ITA7VmEucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGEsYil7Yj1ifHxuZXcgcDt2YXIgYz10aGlzLnYwLGQ9dGhpcy52MSxlPXRoaXMudjIsZj10aGlzLnYzO2Iuc2V0KGNkKGEsYy54LGQueCxlLngsZi54KSxjZChhLGMueSxkLnksZS55LGYueSksY2QoYSxjLnosZC56LGUueixmLnopKTtyZXR1cm4gYn07VmEucHJvdG90eXBlLmNvcHk9XG5mdW5jdGlvbihhKXtDLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLnYwLmNvcHkoYS52MCk7dGhpcy52MS5jb3B5KGEudjEpO3RoaXMudjIuY29weShhLnYyKTt0aGlzLnYzLmNvcHkoYS52Myk7cmV0dXJuIHRoaXN9O1ZhLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgYT1DLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTthLnYwPXRoaXMudjAudG9BcnJheSgpO2EudjE9dGhpcy52MS50b0FycmF5KCk7YS52Mj10aGlzLnYyLnRvQXJyYXkoKTthLnYzPXRoaXMudjMudG9BcnJheSgpO3JldHVybiBhfTtWYS5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24oYSl7Qy5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLGEpO3RoaXMudjAuZnJvbUFycmF5KGEudjApO3RoaXMudjEuZnJvbUFycmF5KGEudjEpO3RoaXMudjIuZnJvbUFycmF5KGEudjIpO3RoaXMudjMuZnJvbUFycmF5KGEudjMpO3JldHVybiB0aGlzfTt5YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShDLnByb3RvdHlwZSk7XG55YS5wcm90b3R5cGUuY29uc3RydWN0b3I9eWE7eWEucHJvdG90eXBlLmlzTGluZUN1cnZlPSEwO3lhLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbihhLGIpe2I9Ynx8bmV3IEQ7MT09PWE/Yi5jb3B5KHRoaXMudjIpOihiLmNvcHkodGhpcy52Mikuc3ViKHRoaXMudjEpLGIubXVsdGlwbHlTY2FsYXIoYSkuYWRkKHRoaXMudjEpKTtyZXR1cm4gYn07eWEucHJvdG90eXBlLmdldFBvaW50QXQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5nZXRQb2ludChhLGIpfTt5YS5wcm90b3R5cGUuZ2V0VGFuZ2VudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnYyLmNsb25lKCkuc3ViKHRoaXMudjEpLm5vcm1hbGl6ZSgpfTt5YS5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtDLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLnYxLmNvcHkoYS52MSk7dGhpcy52Mi5jb3B5KGEudjIpO3JldHVybiB0aGlzfTt5YS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGE9Qy5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7XG5hLnYxPXRoaXMudjEudG9BcnJheSgpO2EudjI9dGhpcy52Mi50b0FycmF5KCk7cmV0dXJuIGF9O3lhLnByb3RvdHlwZS5mcm9tSlNPTj1mdW5jdGlvbihhKXtDLnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsYSk7dGhpcy52MS5mcm9tQXJyYXkoYS52MSk7dGhpcy52Mi5mcm9tQXJyYXkoYS52Mik7cmV0dXJuIHRoaXN9O1BhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEMucHJvdG90eXBlKTtQYS5wcm90b3R5cGUuY29uc3RydWN0b3I9UGE7UGEucHJvdG90eXBlLmlzTGluZUN1cnZlMz0hMDtQYS5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24oYSxiKXtiPWJ8fG5ldyBwOzE9PT1hP2IuY29weSh0aGlzLnYyKTooYi5jb3B5KHRoaXMudjIpLnN1Yih0aGlzLnYxKSxiLm11bHRpcGx5U2NhbGFyKGEpLmFkZCh0aGlzLnYxKSk7cmV0dXJuIGJ9O1BhLnByb3RvdHlwZS5nZXRQb2ludEF0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZ2V0UG9pbnQoYSxiKX07UGEucHJvdG90eXBlLmNvcHk9XG5mdW5jdGlvbihhKXtDLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLnYxLmNvcHkoYS52MSk7dGhpcy52Mi5jb3B5KGEudjIpO3JldHVybiB0aGlzfTtQYS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGE9Qy5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7YS52MT10aGlzLnYxLnRvQXJyYXkoKTthLnYyPXRoaXMudjIudG9BcnJheSgpO3JldHVybiBhfTtQYS5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24oYSl7Qy5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLGEpO3RoaXMudjEuZnJvbUFycmF5KGEudjEpO3RoaXMudjIuZnJvbUFycmF5KGEudjIpO3JldHVybiB0aGlzfTtRYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShDLnByb3RvdHlwZSk7UWEucHJvdG90eXBlLmNvbnN0cnVjdG9yPVFhO1FhLnByb3RvdHlwZS5pc1F1YWRyYXRpY0JlemllckN1cnZlPSEwO1FhLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbihhLGIpe2I9Ynx8bmV3IEQ7dmFyIGM9XG50aGlzLnYwLGQ9dGhpcy52MSxlPXRoaXMudjI7Yi5zZXQoYmQoYSxjLngsZC54LGUueCksYmQoYSxjLnksZC55LGUueSkpO3JldHVybiBifTtRYS5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtDLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLnYwLmNvcHkoYS52MCk7dGhpcy52MS5jb3B5KGEudjEpO3RoaXMudjIuY29weShhLnYyKTtyZXR1cm4gdGhpc307UWEucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBhPUMucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO2EudjA9dGhpcy52MC50b0FycmF5KCk7YS52MT10aGlzLnYxLnRvQXJyYXkoKTthLnYyPXRoaXMudjIudG9BcnJheSgpO3JldHVybiBhfTtRYS5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24oYSl7Qy5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLGEpO3RoaXMudjAuZnJvbUFycmF5KGEudjApO3RoaXMudjEuZnJvbUFycmF5KGEudjEpO3RoaXMudjIuZnJvbUFycmF5KGEudjIpO3JldHVybiB0aGlzfTtcbldhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEMucHJvdG90eXBlKTtXYS5wcm90b3R5cGUuY29uc3RydWN0b3I9V2E7V2EucHJvdG90eXBlLmlzUXVhZHJhdGljQmV6aWVyQ3VydmUzPSEwO1dhLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbihhLGIpe2I9Ynx8bmV3IHA7dmFyIGM9dGhpcy52MCxkPXRoaXMudjEsZT10aGlzLnYyO2Iuc2V0KGJkKGEsYy54LGQueCxlLngpLGJkKGEsYy55LGQueSxlLnkpLGJkKGEsYy56LGQueixlLnopKTtyZXR1cm4gYn07V2EucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7Qy5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy52MC5jb3B5KGEudjApO3RoaXMudjEuY29weShhLnYxKTt0aGlzLnYyLmNvcHkoYS52Mik7cmV0dXJuIHRoaXN9O1dhLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgYT1DLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTthLnYwPXRoaXMudjAudG9BcnJheSgpO2EudjE9dGhpcy52MS50b0FycmF5KCk7XG5hLnYyPXRoaXMudjIudG9BcnJheSgpO3JldHVybiBhfTtXYS5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24oYSl7Qy5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLGEpO3RoaXMudjAuZnJvbUFycmF5KGEudjApO3RoaXMudjEuZnJvbUFycmF5KGEudjEpO3RoaXMudjIuZnJvbUFycmF5KGEudjIpO3JldHVybiB0aGlzfTtSYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShDLnByb3RvdHlwZSk7UmEucHJvdG90eXBlLmNvbnN0cnVjdG9yPVJhO1JhLnByb3RvdHlwZS5pc1NwbGluZUN1cnZlPSEwO1JhLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbihhLGIpe2I9Ynx8bmV3IEQ7dmFyIGM9dGhpcy5wb2ludHMsZD0oYy5sZW5ndGgtMSkqYTthPU1hdGguZmxvb3IoZCk7dmFyIGQ9ZC1hLGU9Y1swPT09YT9hOmEtMV0sZj1jW2FdLGc9Y1thPmMubGVuZ3RoLTI/Yy5sZW5ndGgtMTphKzFdLGM9Y1thPmMubGVuZ3RoLTM/Yy5sZW5ndGgtMTphKzJdO2Iuc2V0KGhmKGQsZS54LGYueCxcbmcueCxjLngpLGhmKGQsZS55LGYueSxnLnksYy55KSk7cmV0dXJuIGJ9O1JhLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe0MucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMucG9pbnRzPVtdO2Zvcih2YXIgYj0wLGM9YS5wb2ludHMubGVuZ3RoO2I8YztiKyspdGhpcy5wb2ludHMucHVzaChhLnBvaW50c1tiXS5jbG9uZSgpKTtyZXR1cm4gdGhpc307UmEucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBhPUMucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO2EucG9pbnRzPVtdO2Zvcih2YXIgYj0wLGM9dGhpcy5wb2ludHMubGVuZ3RoO2I8YztiKyspYS5wb2ludHMucHVzaCh0aGlzLnBvaW50c1tiXS50b0FycmF5KCkpO3JldHVybiBhfTtSYS5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24oYSl7Qy5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLGEpO3RoaXMucG9pbnRzPVtdO2Zvcih2YXIgYj0wLGM9YS5wb2ludHMubGVuZ3RoO2I8YztiKyspe3ZhciBkPVxuYS5wb2ludHNbYl07dGhpcy5wb2ludHMucHVzaCgobmV3IEQpLmZyb21BcnJheShkKSl9cmV0dXJuIHRoaXN9O3ZhciBOZz1PYmplY3QuZnJlZXplKHtBcmNDdXJ2ZTpoYyxDYXRtdWxsUm9tQ3VydmUzOmNhLEN1YmljQmV6aWVyQ3VydmU6T2EsQ3ViaWNCZXppZXJDdXJ2ZTM6VmEsRWxsaXBzZUN1cnZlOkJhLExpbmVDdXJ2ZTp5YSxMaW5lQ3VydmUzOlBhLFF1YWRyYXRpY0JlemllckN1cnZlOlFhLFF1YWRyYXRpY0JlemllckN1cnZlMzpXYSxTcGxpbmVDdXJ2ZTpSYX0pO2JiLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoQy5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpiYixhZGQ6ZnVuY3Rpb24oYSl7dGhpcy5jdXJ2ZXMucHVzaChhKX0sY2xvc2VQYXRoOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jdXJ2ZXNbMF0uZ2V0UG9pbnQoMCksYj10aGlzLmN1cnZlc1t0aGlzLmN1cnZlcy5sZW5ndGgtMV0uZ2V0UG9pbnQoMSk7YS5lcXVhbHMoYil8fHRoaXMuY3VydmVzLnB1c2gobmV3IHlhKGIsXG5hKSl9LGdldFBvaW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEqdGhpcy5nZXRMZW5ndGgoKSxjPXRoaXMuZ2V0Q3VydmVMZW5ndGhzKCk7Zm9yKGE9MDthPGMubGVuZ3RoOyl7aWYoY1thXT49YilyZXR1cm4gYj1jW2FdLWIsYT10aGlzLmN1cnZlc1thXSxjPWEuZ2V0TGVuZ3RoKCksYS5nZXRQb2ludEF0KDA9PT1jPzA6MS1iL2MpO2ErK31yZXR1cm4gbnVsbH0sZ2V0TGVuZ3RoOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRDdXJ2ZUxlbmd0aHMoKTtyZXR1cm4gYVthLmxlbmd0aC0xXX0sdXBkYXRlQXJjTGVuZ3RoczpmdW5jdGlvbigpe3RoaXMubmVlZHNVcGRhdGU9ITA7dGhpcy5jYWNoZUxlbmd0aHM9bnVsbDt0aGlzLmdldEN1cnZlTGVuZ3RocygpfSxnZXRDdXJ2ZUxlbmd0aHM6ZnVuY3Rpb24oKXtpZih0aGlzLmNhY2hlTGVuZ3RocyYmdGhpcy5jYWNoZUxlbmd0aHMubGVuZ3RoPT09dGhpcy5jdXJ2ZXMubGVuZ3RoKXJldHVybiB0aGlzLmNhY2hlTGVuZ3Rocztmb3IodmFyIGE9W10sXG5iPTAsYz0wLGQ9dGhpcy5jdXJ2ZXMubGVuZ3RoO2M8ZDtjKyspYis9dGhpcy5jdXJ2ZXNbY10uZ2V0TGVuZ3RoKCksYS5wdXNoKGIpO3JldHVybiB0aGlzLmNhY2hlTGVuZ3Rocz1hfSxnZXRTcGFjZWRQb2ludHM6ZnVuY3Rpb24oYSl7dm9pZCAwPT09YSYmKGE9NDApO2Zvcih2YXIgYj1bXSxjPTA7Yzw9YTtjKyspYi5wdXNoKHRoaXMuZ2V0UG9pbnQoYy9hKSk7dGhpcy5hdXRvQ2xvc2UmJmIucHVzaChiWzBdKTtyZXR1cm4gYn0sZ2V0UG9pbnRzOmZ1bmN0aW9uKGEpe2E9YXx8MTI7Zm9yKHZhciBiPVtdLGMsZD0wLGU9dGhpcy5jdXJ2ZXM7ZDxlLmxlbmd0aDtkKyspZm9yKHZhciBmPWVbZF0sZj1mLmdldFBvaW50cyhmJiZmLmlzRWxsaXBzZUN1cnZlPzIqYTpmJiZmLmlzTGluZUN1cnZlPzE6ZiYmZi5pc1NwbGluZUN1cnZlP2EqZi5wb2ludHMubGVuZ3RoOmEpLGc9MDtnPGYubGVuZ3RoO2crKyl7dmFyIGg9ZltnXTtjJiZjLmVxdWFscyhoKXx8KGIucHVzaChoKSxjPWgpfXRoaXMuYXV0b0Nsb3NlJiZcbjE8Yi5sZW5ndGgmJiFiW2IubGVuZ3RoLTFdLmVxdWFscyhiWzBdKSYmYi5wdXNoKGJbMF0pO3JldHVybiBifSxjb3B5OmZ1bmN0aW9uKGEpe0MucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuY3VydmVzPVtdO2Zvcih2YXIgYj0wLGM9YS5jdXJ2ZXMubGVuZ3RoO2I8YztiKyspdGhpcy5jdXJ2ZXMucHVzaChhLmN1cnZlc1tiXS5jbG9uZSgpKTt0aGlzLmF1dG9DbG9zZT1hLmF1dG9DbG9zZTtyZXR1cm4gdGhpc30sdG9KU09OOmZ1bmN0aW9uKCl7dmFyIGE9Qy5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7YS5hdXRvQ2xvc2U9dGhpcy5hdXRvQ2xvc2U7YS5jdXJ2ZXM9W107Zm9yKHZhciBiPTAsYz10aGlzLmN1cnZlcy5sZW5ndGg7YjxjO2IrKylhLmN1cnZlcy5wdXNoKHRoaXMuY3VydmVzW2JdLnRvSlNPTigpKTtyZXR1cm4gYX0sZnJvbUpTT046ZnVuY3Rpb24oYSl7Qy5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLGEpO3RoaXMuYXV0b0Nsb3NlPWEuYXV0b0Nsb3NlO1xudGhpcy5jdXJ2ZXM9W107Zm9yKHZhciBiPTAsYz1hLmN1cnZlcy5sZW5ndGg7YjxjO2IrKyl7dmFyIGQ9YS5jdXJ2ZXNbYl07dGhpcy5jdXJ2ZXMucHVzaCgobmV3IE5nW2QudHlwZV0pLmZyb21KU09OKGQpKX1yZXR1cm4gdGhpc319KTtTYS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGJiLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlNhLHNldEZyb21Qb2ludHM6ZnVuY3Rpb24oYSl7dGhpcy5tb3ZlVG8oYVswXS54LGFbMF0ueSk7Zm9yKHZhciBiPTEsYz1hLmxlbmd0aDtiPGM7YisrKXRoaXMubGluZVRvKGFbYl0ueCxhW2JdLnkpfSxtb3ZlVG86ZnVuY3Rpb24oYSxiKXt0aGlzLmN1cnJlbnRQb2ludC5zZXQoYSxiKX0sbGluZVRvOmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IHlhKHRoaXMuY3VycmVudFBvaW50LmNsb25lKCksbmV3IEQoYSxiKSk7dGhpcy5jdXJ2ZXMucHVzaChjKTt0aGlzLmN1cnJlbnRQb2ludC5zZXQoYSxiKX0scXVhZHJhdGljQ3VydmVUbzpmdW5jdGlvbihhLFxuYixjLGQpe2E9bmV3IFFhKHRoaXMuY3VycmVudFBvaW50LmNsb25lKCksbmV3IEQoYSxiKSxuZXcgRChjLGQpKTt0aGlzLmN1cnZlcy5wdXNoKGEpO3RoaXMuY3VycmVudFBvaW50LnNldChjLGQpfSxiZXppZXJDdXJ2ZVRvOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXthPW5ldyBPYSh0aGlzLmN1cnJlbnRQb2ludC5jbG9uZSgpLG5ldyBEKGEsYiksbmV3IEQoYyxkKSxuZXcgRChlLGYpKTt0aGlzLmN1cnZlcy5wdXNoKGEpO3RoaXMuY3VycmVudFBvaW50LnNldChlLGYpfSxzcGxpbmVUaHJ1OmZ1bmN0aW9uKGEpe3ZhciBiPVt0aGlzLmN1cnJlbnRQb2ludC5jbG9uZSgpXS5jb25jYXQoYSksYj1uZXcgUmEoYik7dGhpcy5jdXJ2ZXMucHVzaChiKTt0aGlzLmN1cnJlbnRQb2ludC5jb3B5KGFbYS5sZW5ndGgtMV0pfSxhcmM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuYWJzYXJjKGErdGhpcy5jdXJyZW50UG9pbnQueCxiK3RoaXMuY3VycmVudFBvaW50LnksYyxkLGUsZil9LGFic2FyYzpmdW5jdGlvbihhLFxuYixjLGQsZSxmKXt0aGlzLmFic2VsbGlwc2UoYSxiLGMsYyxkLGUsZil9LGVsbGlwc2U6ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXt0aGlzLmFic2VsbGlwc2UoYSt0aGlzLmN1cnJlbnRQb2ludC54LGIrdGhpcy5jdXJyZW50UG9pbnQueSxjLGQsZSxmLGcsaCl9LGFic2VsbGlwc2U6ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXthPW5ldyBCYShhLGIsYyxkLGUsZixnLGgpOzA8dGhpcy5jdXJ2ZXMubGVuZ3RoJiYoYj1hLmdldFBvaW50KDApLGIuZXF1YWxzKHRoaXMuY3VycmVudFBvaW50KXx8dGhpcy5saW5lVG8oYi54LGIueSkpO3RoaXMuY3VydmVzLnB1c2goYSk7YT1hLmdldFBvaW50KDEpO3RoaXMuY3VycmVudFBvaW50LmNvcHkoYSl9LGNvcHk6ZnVuY3Rpb24oYSl7YmIucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuY3VycmVudFBvaW50LmNvcHkoYS5jdXJyZW50UG9pbnQpO3JldHVybiB0aGlzfSx0b0pTT046ZnVuY3Rpb24oKXt2YXIgYT1iYi5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7XG5hLmN1cnJlbnRQb2ludD10aGlzLmN1cnJlbnRQb2ludC50b0FycmF5KCk7cmV0dXJuIGF9LGZyb21KU09OOmZ1bmN0aW9uKGEpe2JiLnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsYSk7dGhpcy5jdXJyZW50UG9pbnQuZnJvbUFycmF5KGEuY3VycmVudFBvaW50KTtyZXR1cm4gdGhpc319KTtqYi5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFNhLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmpiLGdldFBvaW50c0hvbGVzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD10aGlzLmhvbGVzLmxlbmd0aDtjPGQ7YysrKWJbY109dGhpcy5ob2xlc1tjXS5nZXRQb2ludHMoYSk7cmV0dXJuIGJ9LGV4dHJhY3RQb2ludHM6ZnVuY3Rpb24oYSl7cmV0dXJue3NoYXBlOnRoaXMuZ2V0UG9pbnRzKGEpLGhvbGVzOnRoaXMuZ2V0UG9pbnRzSG9sZXMoYSl9fSxjb3B5OmZ1bmN0aW9uKGEpe1NhLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmhvbGVzPVtdO1xuZm9yKHZhciBiPTAsYz1hLmhvbGVzLmxlbmd0aDtiPGM7YisrKXRoaXMuaG9sZXMucHVzaChhLmhvbGVzW2JdLmNsb25lKCkpO3JldHVybiB0aGlzfSx0b0pTT046ZnVuY3Rpb24oKXt2YXIgYT1TYS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7YS51dWlkPXRoaXMudXVpZDthLmhvbGVzPVtdO2Zvcih2YXIgYj0wLGM9dGhpcy5ob2xlcy5sZW5ndGg7YjxjO2IrKylhLmhvbGVzLnB1c2godGhpcy5ob2xlc1tiXS50b0pTT04oKSk7cmV0dXJuIGF9LGZyb21KU09OOmZ1bmN0aW9uKGEpe1NhLnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsYSk7dGhpcy51dWlkPWEudXVpZDt0aGlzLmhvbGVzPVtdO2Zvcih2YXIgYj0wLGM9YS5ob2xlcy5sZW5ndGg7YjxjO2IrKyl7dmFyIGQ9YS5ob2xlc1tiXTt0aGlzLmhvbGVzLnB1c2goKG5ldyBTYSkuZnJvbUpTT04oZCkpfXJldHVybiB0aGlzfX0pO2RhLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpLFxue2NvbnN0cnVjdG9yOmRhLGlzTGlnaHQ6ITAsY29weTpmdW5jdGlvbihhKXt4LnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmNvbG9yLmNvcHkoYS5jb2xvcik7dGhpcy5pbnRlbnNpdHk9YS5pbnRlbnNpdHk7cmV0dXJuIHRoaXN9LHRvSlNPTjpmdW5jdGlvbihhKXthPXgucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsYSk7YS5vYmplY3QuY29sb3I9dGhpcy5jb2xvci5nZXRIZXgoKTthLm9iamVjdC5pbnRlbnNpdHk9dGhpcy5pbnRlbnNpdHk7dm9pZCAwIT09dGhpcy5ncm91bmRDb2xvciYmKGEub2JqZWN0Lmdyb3VuZENvbG9yPXRoaXMuZ3JvdW5kQ29sb3IuZ2V0SGV4KCkpO3ZvaWQgMCE9PXRoaXMuZGlzdGFuY2UmJihhLm9iamVjdC5kaXN0YW5jZT10aGlzLmRpc3RhbmNlKTt2b2lkIDAhPT10aGlzLmFuZ2xlJiYoYS5vYmplY3QuYW5nbGU9dGhpcy5hbmdsZSk7dm9pZCAwIT09dGhpcy5kZWNheSYmKGEub2JqZWN0LmRlY2F5PXRoaXMuZGVjYXkpO3ZvaWQgMCE9PVxudGhpcy5wZW51bWJyYSYmKGEub2JqZWN0LnBlbnVtYnJhPXRoaXMucGVudW1icmEpO3ZvaWQgMCE9PXRoaXMuc2hhZG93JiYoYS5vYmplY3Quc2hhZG93PXRoaXMuc2hhZG93LnRvSlNPTigpKTtyZXR1cm4gYX19KTtCZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGRhLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkJkLGlzSGVtaXNwaGVyZUxpZ2h0OiEwLGNvcHk6ZnVuY3Rpb24oYSl7ZGEucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuZ3JvdW5kQ29sb3IuY29weShhLmdyb3VuZENvbG9yKTtyZXR1cm4gdGhpc319KTtPYmplY3QuYXNzaWduKEZiLnByb3RvdHlwZSx7Y29weTpmdW5jdGlvbihhKXt0aGlzLmNhbWVyYT1hLmNhbWVyYS5jbG9uZSgpO3RoaXMuYmlhcz1hLmJpYXM7dGhpcy5yYWRpdXM9YS5yYWRpdXM7dGhpcy5tYXBTaXplLmNvcHkoYS5tYXBTaXplKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LFxudG9KU09OOmZ1bmN0aW9uKCl7dmFyIGE9e307MCE9PXRoaXMuYmlhcyYmKGEuYmlhcz10aGlzLmJpYXMpOzEhPT10aGlzLnJhZGl1cyYmKGEucmFkaXVzPXRoaXMucmFkaXVzKTtpZig1MTIhPT10aGlzLm1hcFNpemUueHx8NTEyIT09dGhpcy5tYXBTaXplLnkpYS5tYXBTaXplPXRoaXMubWFwU2l6ZS50b0FycmF5KCk7YS5jYW1lcmE9dGhpcy5jYW1lcmEudG9KU09OKCExKS5vYmplY3Q7ZGVsZXRlIGEuY2FtZXJhLm1hdHJpeDtyZXR1cm4gYX19KTtDZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEZiLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkNkLGlzU3BvdExpZ2h0U2hhZG93OiEwLHVwZGF0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNhbWVyYSxjPTIqUS5SQUQyREVHKmEuYW5nbGUsZD10aGlzLm1hcFNpemUud2lkdGgvdGhpcy5tYXBTaXplLmhlaWdodDthPWEuZGlzdGFuY2V8fGIuZmFyO2lmKGMhPT1iLmZvdnx8ZCE9PWIuYXNwZWN0fHxhIT09Yi5mYXIpYi5mb3Y9XG5jLGIuYXNwZWN0PWQsYi5mYXI9YSxiLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX19KTtEZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGRhLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkRkLGlzU3BvdExpZ2h0OiEwLGNvcHk6ZnVuY3Rpb24oYSl7ZGEucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuZGlzdGFuY2U9YS5kaXN0YW5jZTt0aGlzLmFuZ2xlPWEuYW5nbGU7dGhpcy5wZW51bWJyYT1hLnBlbnVtYnJhO3RoaXMuZGVjYXk9YS5kZWNheTt0aGlzLnRhcmdldD1hLnRhcmdldC5jbG9uZSgpO3RoaXMuc2hhZG93PWEuc2hhZG93LmNsb25lKCk7cmV0dXJuIHRoaXN9fSk7RWQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShkYS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpFZCxpc1BvaW50TGlnaHQ6ITAsY29weTpmdW5jdGlvbihhKXtkYS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5kaXN0YW5jZT1hLmRpc3RhbmNlO1xudGhpcy5kZWNheT1hLmRlY2F5O3RoaXMuc2hhZG93PWEuc2hhZG93LmNsb25lKCk7cmV0dXJuIHRoaXN9fSk7RmQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShGYi5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpGZH0pO0dkLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoZGEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6R2QsaXNEaXJlY3Rpb25hbExpZ2h0OiEwLGNvcHk6ZnVuY3Rpb24oYSl7ZGEucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMudGFyZ2V0PWEudGFyZ2V0LmNsb25lKCk7dGhpcy5zaGFkb3c9YS5zaGFkb3cuY2xvbmUoKTtyZXR1cm4gdGhpc319KTtIZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGRhLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkhkLGlzQW1iaWVudExpZ2h0OiEwfSk7SWQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShkYS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpJZCxcbmlzUmVjdEFyZWFMaWdodDohMCxjb3B5OmZ1bmN0aW9uKGEpe2RhLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLndpZHRoPWEud2lkdGg7dGhpcy5oZWlnaHQ9YS5oZWlnaHQ7cmV0dXJuIHRoaXN9LHRvSlNPTjpmdW5jdGlvbihhKXthPWRhLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLGEpO2Eub2JqZWN0LndpZHRoPXRoaXMud2lkdGg7YS5vYmplY3QuaGVpZ2h0PXRoaXMuaGVpZ2h0O3JldHVybiBhfX0pO0pkLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpKZCxWYWx1ZVR5cGVOYW1lOlwic3RyaW5nXCIsVmFsdWVCdWZmZXJUeXBlOkFycmF5LERlZmF1bHRJbnRlcnBvbGF0aW9uOjIzMDAsSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kTGluZWFyOnZvaWQgMCxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGg6dm9pZCAwfSk7S2QucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShULnByb3RvdHlwZSksXG57Y29uc3RydWN0b3I6S2QsVmFsdWVUeXBlTmFtZTpcImJvb2xcIixWYWx1ZUJ1ZmZlclR5cGU6QXJyYXksRGVmYXVsdEludGVycG9sYXRpb246MjMwMCxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RMaW5lYXI6dm9pZCAwLEludGVycG9sYW50RmFjdG9yeU1ldGhvZFNtb290aDp2b2lkIDB9KTtPYmplY3QuYXNzaWduKHBhLnByb3RvdHlwZSx7ZXZhbHVhdGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5wYXJhbWV0ZXJQb3NpdGlvbnMsYz10aGlzLl9jYWNoZWRJbmRleCxkPWJbY10sZT1iW2MtMV07YTp7Yjp7Yzp7ZDppZighKGE8ZCkpe2Zvcih2YXIgZj1jKzI7Oyl7aWYodm9pZCAwPT09ZCl7aWYoYTxlKWJyZWFrIGQ7dGhpcy5fY2FjaGVkSW5kZXg9Yz1iLmxlbmd0aDtyZXR1cm4gdGhpcy5hZnRlckVuZF8oYy0xLGEsZSl9aWYoYz09PWYpYnJlYWs7ZT1kO2Q9YlsrK2NdO2lmKGE8ZClicmVhayBifWQ9Yi5sZW5ndGg7YnJlYWsgY31pZihhPj1lKWJyZWFrIGE7ZWxzZXtmPWJbMV07YTxmJiZcbihjPTIsZT1mKTtmb3IoZj1jLTI7Oyl7aWYodm9pZCAwPT09ZSlyZXR1cm4gdGhpcy5fY2FjaGVkSW5kZXg9MCx0aGlzLmJlZm9yZVN0YXJ0XygwLGEsZCk7aWYoYz09PWYpYnJlYWs7ZD1lO2U9YlstLWMtMV07aWYoYT49ZSlicmVhayBifWQ9YztjPTB9fWZvcig7YzxkOyllPWMrZD4+PjEsYTxiW2VdP2Q9ZTpjPWUrMTtkPWJbY107ZT1iW2MtMV07aWYodm9pZCAwPT09ZSlyZXR1cm4gdGhpcy5fY2FjaGVkSW5kZXg9MCx0aGlzLmJlZm9yZVN0YXJ0XygwLGEsZCk7aWYodm9pZCAwPT09ZClyZXR1cm4gdGhpcy5fY2FjaGVkSW5kZXg9Yz1iLmxlbmd0aCx0aGlzLmFmdGVyRW5kXyhjLTEsZSxhKX10aGlzLl9jYWNoZWRJbmRleD1jO3RoaXMuaW50ZXJ2YWxDaGFuZ2VkXyhjLGUsZCl9cmV0dXJuIHRoaXMuaW50ZXJwb2xhdGVfKGMsZSxhLGQpfSxzZXR0aW5nczpudWxsLERlZmF1bHRTZXR0aW5nc186e30sZ2V0U2V0dGluZ3NfOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0dGluZ3N8fFxudGhpcy5EZWZhdWx0U2V0dGluZ3NffSxjb3B5U2FtcGxlVmFsdWVfOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucmVzdWx0QnVmZmVyLGM9dGhpcy5zYW1wbGVWYWx1ZXMsZD10aGlzLnZhbHVlU2l6ZTthKj1kO2Zvcih2YXIgZT0wO2UhPT1kOysrZSliW2VdPWNbYStlXTtyZXR1cm4gYn0saW50ZXJwb2xhdGVfOmZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoXCJjYWxsIHRvIGFic3RyYWN0IG1ldGhvZFwiKTt9LGludGVydmFsQ2hhbmdlZF86ZnVuY3Rpb24oKXt9fSk7T2JqZWN0LmFzc2lnbihwYS5wcm90b3R5cGUse2JlZm9yZVN0YXJ0XzpwYS5wcm90b3R5cGUuY29weVNhbXBsZVZhbHVlXyxhZnRlckVuZF86cGEucHJvdG90eXBlLmNvcHlTYW1wbGVWYWx1ZV99KTtMZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHBhLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkxkLGludGVycG9sYXRlXzpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLnJlc3VsdEJ1ZmZlcixmPXRoaXMuc2FtcGxlVmFsdWVzLFxuZz10aGlzLnZhbHVlU2l6ZTthKj1nO2I9KGMtYikvKGQtYik7Zm9yKGM9YStnO2EhPT1jO2ErPTQpaGEuc2xlcnBGbGF0KGUsMCxmLGEtZyxmLGEsYik7cmV0dXJuIGV9fSk7ZGQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShULnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmRkLFZhbHVlVHlwZU5hbWU6XCJxdWF0ZXJuaW9uXCIsRGVmYXVsdEludGVycG9sYXRpb246MjMwMSxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RMaW5lYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBMZCh0aGlzLnRpbWVzLHRoaXMudmFsdWVzLHRoaXMuZ2V0VmFsdWVTaXplKCksYSl9LEludGVycG9sYW50RmFjdG9yeU1ldGhvZFNtb290aDp2b2lkIDB9KTtNZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFQucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6TWQsVmFsdWVUeXBlTmFtZTpcImNvbG9yXCJ9KTtpYy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFQucHJvdG90eXBlKSxcbntjb25zdHJ1Y3RvcjppYyxWYWx1ZVR5cGVOYW1lOlwibnVtYmVyXCJ9KTtOZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHBhLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOk5kLERlZmF1bHRTZXR0aW5nc186e2VuZGluZ1N0YXJ0OjI0MDAsZW5kaW5nRW5kOjI0MDB9LGludGVydmFsQ2hhbmdlZF86ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMucGFyYW1ldGVyUG9zaXRpb25zLGU9YS0yLGY9YSsxLGc9ZFtlXSxoPWRbZl07aWYodm9pZCAwPT09Zylzd2l0Y2godGhpcy5nZXRTZXR0aW5nc18oKS5lbmRpbmdTdGFydCl7Y2FzZSAyNDAxOmU9YTtnPTIqYi1jO2JyZWFrO2Nhc2UgMjQwMjplPWQubGVuZ3RoLTI7Zz1iK2RbZV0tZFtlKzFdO2JyZWFrO2RlZmF1bHQ6ZT1hLGc9Y31pZih2b2lkIDA9PT1oKXN3aXRjaCh0aGlzLmdldFNldHRpbmdzXygpLmVuZGluZ0VuZCl7Y2FzZSAyNDAxOmY9YTtoPTIqYy1iO2JyZWFrO2Nhc2UgMjQwMjpmPTE7aD1jK2RbMV0tZFswXTtcbmJyZWFrO2RlZmF1bHQ6Zj1hLTEsaD1ifWE9LjUqKGMtYik7ZD10aGlzLnZhbHVlU2l6ZTt0aGlzLl93ZWlnaHRQcmV2PWEvKGItZyk7dGhpcy5fd2VpZ2h0TmV4dD1hLyhoLWMpO3RoaXMuX29mZnNldFByZXY9ZSpkO3RoaXMuX29mZnNldE5leHQ9ZipkfSxpbnRlcnBvbGF0ZV86ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy5yZXN1bHRCdWZmZXIsZj10aGlzLnNhbXBsZVZhbHVlcyxnPXRoaXMudmFsdWVTaXplO2EqPWc7dmFyIGg9YS1nLGs9dGhpcy5fb2Zmc2V0UHJldixtPXRoaXMuX29mZnNldE5leHQsbD10aGlzLl93ZWlnaHRQcmV2LG49dGhpcy5fd2VpZ2h0TmV4dCxwPShjLWIpLyhkLWIpO2M9cCpwO2Q9YypwO2I9LWwqZCsyKmwqYy1sKnA7bD0oMStsKSpkKygtMS41LTIqbCkqYysoLS41K2wpKnArMTtwPSgtMS1uKSpkKygxLjUrbikqYysuNSpwO249bipkLW4qYztmb3IoYz0wO2MhPT1nOysrYyllW2NdPWIqZltrK2NdK2wqZltoK2NdK3AqZlthK2NdK24qZlttK2NdO1xucmV0dXJuIGV9fSk7ZWQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShwYS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjplZCxpbnRlcnBvbGF0ZV86ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy5yZXN1bHRCdWZmZXIsZj10aGlzLnNhbXBsZVZhbHVlcyxnPXRoaXMudmFsdWVTaXplO2EqPWc7dmFyIGg9YS1nO2I9KGMtYikvKGQtYik7Yz0xLWI7Zm9yKGQ9MDtkIT09ZzsrK2QpZVtkXT1mW2grZF0qYytmW2ErZF0qYjtyZXR1cm4gZX19KTtPZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHBhLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOk9kLGludGVycG9sYXRlXzpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jb3B5U2FtcGxlVmFsdWVfKGEtMSl9fSk7dmFyIGdhPXthcnJheVNsaWNlOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZ2EuaXNUeXBlZEFycmF5KGEpP25ldyBhLmNvbnN0cnVjdG9yKGEuc3ViYXJyYXkoYix2b2lkIDAhPT1jP2M6XG5hLmxlbmd0aCkpOmEuc2xpY2UoYixjKX0sY29udmVydEFycmF5OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4hYXx8IWMmJmEuY29uc3RydWN0b3I9PT1iP2E6XCJudW1iZXJcIj09PXR5cGVvZiBiLkJZVEVTX1BFUl9FTEVNRU5UP25ldyBiKGEpOkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGEpfSxpc1R5cGVkQXJyYXk6ZnVuY3Rpb24oYSl7cmV0dXJuIEFycmF5QnVmZmVyLmlzVmlldyhhKSYmIShhIGluc3RhbmNlb2YgRGF0YVZpZXcpfSxnZXRLZXlmcmFtZU9yZGVyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aCxjPUFycmF5KGIpLGQ9MDtkIT09YjsrK2QpY1tkXT1kO2Muc29ydChmdW5jdGlvbihiLGMpe3JldHVybiBhW2JdLWFbY119KTtyZXR1cm4gY30sc29ydGVkQXJyYXk6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPW5ldyBhLmNvbnN0cnVjdG9yKGQpLGY9MCxnPTA7ZyE9PWQ7KytmKWZvcih2YXIgaD1jW2ZdKmIsaz0wO2shPT1iOysrayllW2crK109XG5hW2gra107cmV0dXJuIGV9LGZsYXR0ZW5KU09OOmZ1bmN0aW9uKGEsYixjLGQpe2Zvcih2YXIgZT0xLGY9YVswXTt2b2lkIDAhPT1mJiZ2b2lkIDA9PT1mW2RdOylmPWFbZSsrXTtpZih2b2lkIDAhPT1mKXt2YXIgZz1mW2RdO2lmKHZvaWQgMCE9PWcpaWYoQXJyYXkuaXNBcnJheShnKSl7ZG8gZz1mW2RdLHZvaWQgMCE9PWcmJihiLnB1c2goZi50aW1lKSxjLnB1c2guYXBwbHkoYyxnKSksZj1hW2UrK107d2hpbGUodm9pZCAwIT09Zil9ZWxzZSBpZih2b2lkIDAhPT1nLnRvQXJyYXkpe2RvIGc9ZltkXSx2b2lkIDAhPT1nJiYoYi5wdXNoKGYudGltZSksZy50b0FycmF5KGMsYy5sZW5ndGgpKSxmPWFbZSsrXTt3aGlsZSh2b2lkIDAhPT1mKX1lbHNle2RvIGc9ZltkXSx2b2lkIDAhPT1nJiYoYi5wdXNoKGYudGltZSksYy5wdXNoKGcpKSxmPWFbZSsrXTt3aGlsZSh2b2lkIDAhPT1mKX19fX07T2JqZWN0LmFzc2lnbihULHtwYXJzZTpmdW5jdGlvbihhKXtpZih2b2lkIDA9PT1hLnR5cGUpdGhyb3cgRXJyb3IoXCJUSFJFRS5LZXlmcmFtZVRyYWNrOiB0cmFjayB0eXBlIHVuZGVmaW5lZCwgY2FuIG5vdCBwYXJzZVwiKTtcbnZhciBiPVQuX2dldFRyYWNrVHlwZUZvclZhbHVlVHlwZU5hbWUoYS50eXBlKTtpZih2b2lkIDA9PT1hLnRpbWVzKXt2YXIgYz1bXSxkPVtdO2dhLmZsYXR0ZW5KU09OKGEua2V5cyxjLGQsXCJ2YWx1ZVwiKTthLnRpbWVzPWM7YS52YWx1ZXM9ZH1yZXR1cm4gdm9pZCAwIT09Yi5wYXJzZT9iLnBhcnNlKGEpOm5ldyBiKGEubmFtZSxhLnRpbWVzLGEudmFsdWVzLGEuaW50ZXJwb2xhdGlvbil9LHRvSlNPTjpmdW5jdGlvbihhKXt2YXIgYj1hLmNvbnN0cnVjdG9yO2lmKHZvaWQgMCE9PWIudG9KU09OKWI9Yi50b0pTT04oYSk7ZWxzZXt2YXIgYj17bmFtZTphLm5hbWUsdGltZXM6Z2EuY29udmVydEFycmF5KGEudGltZXMsQXJyYXkpLHZhbHVlczpnYS5jb252ZXJ0QXJyYXkoYS52YWx1ZXMsQXJyYXkpfSxjPWEuZ2V0SW50ZXJwb2xhdGlvbigpO2MhPT1hLkRlZmF1bHRJbnRlcnBvbGF0aW9uJiYoYi5pbnRlcnBvbGF0aW9uPWMpfWIudHlwZT1hLlZhbHVlVHlwZU5hbWU7cmV0dXJuIGJ9LF9nZXRUcmFja1R5cGVGb3JWYWx1ZVR5cGVOYW1lOmZ1bmN0aW9uKGEpe3N3aXRjaChhLnRvTG93ZXJDYXNlKCkpe2Nhc2UgXCJzY2FsYXJcIjpjYXNlIFwiZG91YmxlXCI6Y2FzZSBcImZsb2F0XCI6Y2FzZSBcIm51bWJlclwiOmNhc2UgXCJpbnRlZ2VyXCI6cmV0dXJuIGljO1xuY2FzZSBcInZlY3RvclwiOmNhc2UgXCJ2ZWN0b3IyXCI6Y2FzZSBcInZlY3RvcjNcIjpjYXNlIFwidmVjdG9yNFwiOnJldHVybiBqYztjYXNlIFwiY29sb3JcIjpyZXR1cm4gTWQ7Y2FzZSBcInF1YXRlcm5pb25cIjpyZXR1cm4gZGQ7Y2FzZSBcImJvb2xcIjpjYXNlIFwiYm9vbGVhblwiOnJldHVybiBLZDtjYXNlIFwic3RyaW5nXCI6cmV0dXJuIEpkfXRocm93IEVycm9yKFwiVEhSRUUuS2V5ZnJhbWVUcmFjazogVW5zdXBwb3J0ZWQgdHlwZU5hbWU6IFwiK2EpO319KTtPYmplY3QuYXNzaWduKFQucHJvdG90eXBlLHtjb25zdHJ1Y3RvcjpULFRpbWVCdWZmZXJUeXBlOkZsb2F0MzJBcnJheSxWYWx1ZUJ1ZmZlclR5cGU6RmxvYXQzMkFycmF5LERlZmF1bHRJbnRlcnBvbGF0aW9uOjIzMDEsSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kRGlzY3JldGU6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBPZCh0aGlzLnRpbWVzLHRoaXMudmFsdWVzLHRoaXMuZ2V0VmFsdWVTaXplKCksYSl9LEludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IGVkKHRoaXMudGltZXMsXG50aGlzLnZhbHVlcyx0aGlzLmdldFZhbHVlU2l6ZSgpLGEpfSxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGg6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBOZCh0aGlzLnRpbWVzLHRoaXMudmFsdWVzLHRoaXMuZ2V0VmFsdWVTaXplKCksYSl9LHNldEludGVycG9sYXRpb246ZnVuY3Rpb24oYSl7c3dpdGNoKGEpe2Nhc2UgMjMwMDp2YXIgYj10aGlzLkludGVycG9sYW50RmFjdG9yeU1ldGhvZERpc2NyZXRlO2JyZWFrO2Nhc2UgMjMwMTpiPXRoaXMuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kTGluZWFyO2JyZWFrO2Nhc2UgMjMwMjpiPXRoaXMuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kU21vb3RofWlmKHZvaWQgMD09PWIpe2I9XCJ1bnN1cHBvcnRlZCBpbnRlcnBvbGF0aW9uIGZvciBcIit0aGlzLlZhbHVlVHlwZU5hbWUrXCIga2V5ZnJhbWUgdHJhY2sgbmFtZWQgXCIrdGhpcy5uYW1lO2lmKHZvaWQgMD09PXRoaXMuY3JlYXRlSW50ZXJwb2xhbnQpaWYoYSE9PXRoaXMuRGVmYXVsdEludGVycG9sYXRpb24pdGhpcy5zZXRJbnRlcnBvbGF0aW9uKHRoaXMuRGVmYXVsdEludGVycG9sYXRpb24pO1xuZWxzZSB0aHJvdyBFcnJvcihiKTtjb25zb2xlLndhcm4oXCJUSFJFRS5LZXlmcmFtZVRyYWNrOlwiLGIpfWVsc2UgdGhpcy5jcmVhdGVJbnRlcnBvbGFudD1ifSxnZXRJbnRlcnBvbGF0aW9uOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuY3JlYXRlSW50ZXJwb2xhbnQpe2Nhc2UgdGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2REaXNjcmV0ZTpyZXR1cm4gMjMwMDtjYXNlIHRoaXMuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kTGluZWFyOnJldHVybiAyMzAxO2Nhc2UgdGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGg6cmV0dXJuIDIzMDJ9fSxnZXRWYWx1ZVNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZXMubGVuZ3RoL3RoaXMudGltZXMubGVuZ3RofSxzaGlmdDpmdW5jdGlvbihhKXtpZigwIT09YSlmb3IodmFyIGI9dGhpcy50aW1lcyxjPTAsZD1iLmxlbmd0aDtjIT09ZDsrK2MpYltjXSs9YTtyZXR1cm4gdGhpc30sc2NhbGU6ZnVuY3Rpb24oYSl7aWYoMSE9PWEpZm9yKHZhciBiPVxudGhpcy50aW1lcyxjPTAsZD1iLmxlbmd0aDtjIT09ZDsrK2MpYltjXSo9YTtyZXR1cm4gdGhpc30sdHJpbTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLnRpbWVzLGQ9Yy5sZW5ndGgsZT0wLGY9ZC0xO2UhPT1kJiZjW2VdPGE7KSsrZTtmb3IoOy0xIT09ZiYmY1tmXT5iOyktLWY7KytmO2lmKDAhPT1lfHxmIT09ZCllPj1mJiYoZj1NYXRoLm1heChmLDEpLGU9Zi0xKSxhPXRoaXMuZ2V0VmFsdWVTaXplKCksdGhpcy50aW1lcz1nYS5hcnJheVNsaWNlKGMsZSxmKSx0aGlzLnZhbHVlcz1nYS5hcnJheVNsaWNlKHRoaXMudmFsdWVzLGUqYSxmKmEpO3JldHVybiB0aGlzfSx2YWxpZGF0ZTpmdW5jdGlvbigpe3ZhciBhPSEwLGI9dGhpcy5nZXRWYWx1ZVNpemUoKTswIT09Yi1NYXRoLmZsb29yKGIpJiYoY29uc29sZS5lcnJvcihcIlRIUkVFLktleWZyYW1lVHJhY2s6IEludmFsaWQgdmFsdWUgc2l6ZSBpbiB0cmFjay5cIix0aGlzKSxhPSExKTt2YXIgYz10aGlzLnRpbWVzLGI9dGhpcy52YWx1ZXMsXG5kPWMubGVuZ3RoOzA9PT1kJiYoY29uc29sZS5lcnJvcihcIlRIUkVFLktleWZyYW1lVHJhY2s6IFRyYWNrIGlzIGVtcHR5LlwiLHRoaXMpLGE9ITEpO2Zvcih2YXIgZT1udWxsLGY9MDtmIT09ZDtmKyspe3ZhciBnPWNbZl07aWYoXCJudW1iZXJcIj09PXR5cGVvZiBnJiZpc05hTihnKSl7Y29uc29sZS5lcnJvcihcIlRIUkVFLktleWZyYW1lVHJhY2s6IFRpbWUgaXMgbm90IGEgdmFsaWQgbnVtYmVyLlwiLHRoaXMsZixnKTthPSExO2JyZWFrfWlmKG51bGwhPT1lJiZlPmcpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5LZXlmcmFtZVRyYWNrOiBPdXQgb2Ygb3JkZXIga2V5cy5cIix0aGlzLGYsZyxlKTthPSExO2JyZWFrfWU9Z31pZih2b2lkIDAhPT1iJiZnYS5pc1R5cGVkQXJyYXkoYikpZm9yKGY9MCxjPWIubGVuZ3RoO2YhPT1jOysrZilpZihkPWJbZl0saXNOYU4oZCkpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5LZXlmcmFtZVRyYWNrOiBWYWx1ZSBpcyBub3QgYSB2YWxpZCBudW1iZXIuXCIsdGhpcyxmLFxuZCk7YT0hMTticmVha31yZXR1cm4gYX0sb3B0aW1pemU6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYixjPXRoaXMudGltZXMsZD10aGlzLnZhbHVlcyxlPXRoaXMuZ2V0VmFsdWVTaXplKCksZj0yMzAyPT09dGhpcy5nZXRJbnRlcnBvbGF0aW9uKCksZz0xLGg9Yy5sZW5ndGgtMSxrPTE7azxoOysrayl7YT0hMTt2YXIgbT1jW2tdO2lmKG0hPT1jW2srMV0mJigxIT09a3x8bSE9PW1bMF0pKWlmKGYpYT0hMDtlbHNle2I9ayplO2Zvcih2YXIgbD1iLWUsbj1iK2UsbT0wO20hPT1lOysrbSl7dmFyIHA9ZFtiK21dO2lmKHAhPT1kW2wrbV18fHAhPT1kW24rbV0pe2E9ITA7YnJlYWt9fX1pZihhKXtpZihrIT09Zylmb3IoY1tnXT1jW2tdLGI9ayplLGE9ZyplLG09MDttIT09ZTsrK20pZFthK21dPWRbYittXTsrK2d9fWlmKDA8aCl7Y1tnXT1jW2hdO2I9aCplO2E9ZyplO2ZvcihtPTA7bSE9PWU7KyttKWRbYSttXT1kW2IrbV07KytnfWchPT1jLmxlbmd0aCYmKHRoaXMudGltZXM9Z2EuYXJyYXlTbGljZShjLFxuMCxnKSx0aGlzLnZhbHVlcz1nYS5hcnJheVNsaWNlKGQsMCxnKmUpKTtyZXR1cm4gdGhpc319KTtqYy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFQucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6amMsVmFsdWVUeXBlTmFtZTpcInZlY3RvclwifSk7T2JqZWN0LmFzc2lnbihDYSx7cGFyc2U6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9YS50cmFja3MsZD0xLyhhLmZwc3x8MSksZT0wLGY9Yy5sZW5ndGg7ZSE9PWY7KytlKWIucHVzaChULnBhcnNlKGNbZV0pLnNjYWxlKGQpKTtyZXR1cm4gbmV3IENhKGEubmFtZSxhLmR1cmF0aW9uLGIpfSx0b0pTT046ZnVuY3Rpb24oYSl7dmFyIGI9W10sYz1hLnRyYWNrczthPXtuYW1lOmEubmFtZSxkdXJhdGlvbjphLmR1cmF0aW9uLHRyYWNrczpifTtmb3IodmFyIGQ9MCxlPWMubGVuZ3RoO2QhPT1lOysrZCliLnB1c2goVC50b0pTT04oY1tkXSkpO3JldHVybiBhfSxDcmVhdGVGcm9tTW9ycGhUYXJnZXRTZXF1ZW5jZTpmdW5jdGlvbihhLFxuYixjLGQpe2Zvcih2YXIgZT1iLmxlbmd0aCxmPVtdLGc9MDtnPGU7ZysrKXt2YXIgaD1bXSxrPVtdO2gucHVzaCgoZytlLTEpJWUsZywoZysxKSVlKTtrLnB1c2goMCwxLDApO3ZhciBtPWdhLmdldEtleWZyYW1lT3JkZXIoaCksaD1nYS5zb3J0ZWRBcnJheShoLDEsbSksaz1nYS5zb3J0ZWRBcnJheShrLDEsbSk7ZHx8MCE9PWhbMF18fChoLnB1c2goZSksay5wdXNoKGtbMF0pKTtmLnB1c2goKG5ldyBpYyhcIi5tb3JwaFRhcmdldEluZmx1ZW5jZXNbXCIrYltnXS5uYW1lK1wiXVwiLGgsaykpLnNjYWxlKDEvYykpfXJldHVybiBuZXcgQ2EoYSwtMSxmKX0sZmluZEJ5TmFtZTpmdW5jdGlvbihhLGIpe3ZhciBjPWE7QXJyYXkuaXNBcnJheShhKXx8KGM9YS5nZW9tZXRyeSYmYS5nZW9tZXRyeS5hbmltYXRpb25zfHxhLmFuaW1hdGlvbnMpO2ZvcihhPTA7YTxjLmxlbmd0aDthKyspaWYoY1thXS5uYW1lPT09YilyZXR1cm4gY1thXTtyZXR1cm4gbnVsbH0sQ3JlYXRlQ2xpcHNGcm9tTW9ycGhUYXJnZXRTZXF1ZW5jZXM6ZnVuY3Rpb24oYSxcbmIsYyl7Zm9yKHZhciBkLGU9e30sZj0vXihbXFx3LV0qPykoW1xcZF0rKSQvLGc9MCxoPWEubGVuZ3RoO2c8aDtnKyspe3ZhciBrPWFbZ10sbT1rLm5hbWUubWF0Y2goZik7bSYmMTxtLmxlbmd0aCYmKGQ9bVsxXSwobT1lW2RdKXx8KGVbZF09bT1bXSksbS5wdXNoKGspKX1hPVtdO2ZvcihkIGluIGUpYS5wdXNoKENhLkNyZWF0ZUZyb21Nb3JwaFRhcmdldFNlcXVlbmNlKGQsZVtkXSxiLGMpKTtyZXR1cm4gYX0scGFyc2VBbmltYXRpb246ZnVuY3Rpb24oYSxiKXtpZighYSlyZXR1cm4gY29uc29sZS5lcnJvcihcIlRIUkVFLkFuaW1hdGlvbkNsaXA6IE5vIGFuaW1hdGlvbiBpbiBKU09OTG9hZGVyIGRhdGEuXCIpLG51bGw7dmFyIGM9ZnVuY3Rpb24oYSxiLGMsZCxlKXtpZigwIT09Yy5sZW5ndGgpe3ZhciBmPVtdLGc9W107Z2EuZmxhdHRlbkpTT04oYyxmLGcsZCk7MCE9PWYubGVuZ3RoJiZlLnB1c2gobmV3IGEoYixmLGcpKX19LGQ9W10sZT1hLm5hbWV8fFwiZGVmYXVsdFwiLGY9YS5sZW5ndGh8fFxuLTEsZz1hLmZwc3x8MzA7YT1hLmhpZXJhcmNoeXx8W107Zm9yKHZhciBoPTA7aDxhLmxlbmd0aDtoKyspe3ZhciBrPWFbaF0ua2V5cztpZihrJiYwIT09ay5sZW5ndGgpaWYoa1swXS5tb3JwaFRhcmdldHMpe2Zvcih2YXIgZj17fSxtPTA7bTxrLmxlbmd0aDttKyspaWYoa1ttXS5tb3JwaFRhcmdldHMpZm9yKHZhciBsPTA7bDxrW21dLm1vcnBoVGFyZ2V0cy5sZW5ndGg7bCsrKWZba1ttXS5tb3JwaFRhcmdldHNbbF1dPS0xO2Zvcih2YXIgbiBpbiBmKXtmb3IodmFyIHA9W10scj1bXSxsPTA7bCE9PWtbbV0ubW9ycGhUYXJnZXRzLmxlbmd0aDsrK2wpe3ZhciB0PWtbbV07cC5wdXNoKHQudGltZSk7ci5wdXNoKHQubW9ycGhUYXJnZXQ9PT1uPzE6MCl9ZC5wdXNoKG5ldyBpYyhcIi5tb3JwaFRhcmdldEluZmx1ZW5jZVtcIituK1wiXVwiLHAscikpfWY9Zi5sZW5ndGgqKGd8fDEpfWVsc2UgbT1cIi5ib25lc1tcIitiW2hdLm5hbWUrXCJdXCIsYyhqYyxtK1wiLnBvc2l0aW9uXCIsayxcInBvc1wiLGQpLGMoZGQsXG5tK1wiLnF1YXRlcm5pb25cIixrLFwicm90XCIsZCksYyhqYyxtK1wiLnNjYWxlXCIsayxcInNjbFwiLGQpfXJldHVybiAwPT09ZC5sZW5ndGg/bnVsbDpuZXcgQ2EoZSxmLGQpfX0pO09iamVjdC5hc3NpZ24oQ2EucHJvdG90eXBlLHtyZXNldER1cmF0aW9uOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj0wLGM9dGhpcy50cmFja3MubGVuZ3RoO2IhPT1jOysrYil2YXIgZD10aGlzLnRyYWNrc1tiXSxhPU1hdGgubWF4KGEsZC50aW1lc1tkLnRpbWVzLmxlbmd0aC0xXSk7dGhpcy5kdXJhdGlvbj1hfSx0cmltOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTx0aGlzLnRyYWNrcy5sZW5ndGg7YSsrKXRoaXMudHJhY2tzW2FdLnRyaW0oMCx0aGlzLmR1cmF0aW9uKTtyZXR1cm4gdGhpc30sb3B0aW1pemU6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPHRoaXMudHJhY2tzLmxlbmd0aDthKyspdGhpcy50cmFja3NbYV0ub3B0aW1pemUoKTtyZXR1cm4gdGhpc319KTtPYmplY3QuYXNzaWduKFBkLnByb3RvdHlwZSxcbntsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXM7KG5ldyBOYShlLm1hbmFnZXIpKS5sb2FkKGEsZnVuY3Rpb24oYSl7YihlLnBhcnNlKEpTT04ucGFyc2UoYSkpKX0sYyxkKX0sc2V0VGV4dHVyZXM6ZnVuY3Rpb24oYSl7dGhpcy50ZXh0dXJlcz1hfSxwYXJzZTpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3ZvaWQgMD09PWNbYV0mJmNvbnNvbGUud2FybihcIlRIUkVFLk1hdGVyaWFsTG9hZGVyOiBVbmRlZmluZWQgdGV4dHVyZVwiLGEpO3JldHVybiBjW2FdfXZhciBjPXRoaXMudGV4dHVyZXMsZD1uZXcgTWdbYS50eXBlXTt2b2lkIDAhPT1hLnV1aWQmJihkLnV1aWQ9YS51dWlkKTt2b2lkIDAhPT1hLm5hbWUmJihkLm5hbWU9YS5uYW1lKTt2b2lkIDAhPT1hLmNvbG9yJiZkLmNvbG9yLnNldEhleChhLmNvbG9yKTt2b2lkIDAhPT1hLnJvdWdobmVzcyYmKGQucm91Z2huZXNzPWEucm91Z2huZXNzKTt2b2lkIDAhPT1hLm1ldGFsbmVzcyYmKGQubWV0YWxuZXNzPWEubWV0YWxuZXNzKTtcbnZvaWQgMCE9PWEuZW1pc3NpdmUmJmQuZW1pc3NpdmUuc2V0SGV4KGEuZW1pc3NpdmUpO3ZvaWQgMCE9PWEuc3BlY3VsYXImJmQuc3BlY3VsYXIuc2V0SGV4KGEuc3BlY3VsYXIpO3ZvaWQgMCE9PWEuc2hpbmluZXNzJiYoZC5zaGluaW5lc3M9YS5zaGluaW5lc3MpO3ZvaWQgMCE9PWEuY2xlYXJDb2F0JiYoZC5jbGVhckNvYXQ9YS5jbGVhckNvYXQpO3ZvaWQgMCE9PWEuY2xlYXJDb2F0Um91Z2huZXNzJiYoZC5jbGVhckNvYXRSb3VnaG5lc3M9YS5jbGVhckNvYXRSb3VnaG5lc3MpO3ZvaWQgMCE9PWEudW5pZm9ybXMmJihkLnVuaWZvcm1zPWEudW5pZm9ybXMpO3ZvaWQgMCE9PWEudmVydGV4U2hhZGVyJiYoZC52ZXJ0ZXhTaGFkZXI9YS52ZXJ0ZXhTaGFkZXIpO3ZvaWQgMCE9PWEuZnJhZ21lbnRTaGFkZXImJihkLmZyYWdtZW50U2hhZGVyPWEuZnJhZ21lbnRTaGFkZXIpO3ZvaWQgMCE9PWEudmVydGV4Q29sb3JzJiYoZC52ZXJ0ZXhDb2xvcnM9YS52ZXJ0ZXhDb2xvcnMpO3ZvaWQgMCE9PVxuYS5mb2cmJihkLmZvZz1hLmZvZyk7dm9pZCAwIT09YS5mbGF0U2hhZGluZyYmKGQuZmxhdFNoYWRpbmc9YS5mbGF0U2hhZGluZyk7dm9pZCAwIT09YS5ibGVuZGluZyYmKGQuYmxlbmRpbmc9YS5ibGVuZGluZyk7dm9pZCAwIT09YS5zaWRlJiYoZC5zaWRlPWEuc2lkZSk7dm9pZCAwIT09YS5vcGFjaXR5JiYoZC5vcGFjaXR5PWEub3BhY2l0eSk7dm9pZCAwIT09YS50cmFuc3BhcmVudCYmKGQudHJhbnNwYXJlbnQ9YS50cmFuc3BhcmVudCk7dm9pZCAwIT09YS5hbHBoYVRlc3QmJihkLmFscGhhVGVzdD1hLmFscGhhVGVzdCk7dm9pZCAwIT09YS5kZXB0aFRlc3QmJihkLmRlcHRoVGVzdD1hLmRlcHRoVGVzdCk7dm9pZCAwIT09YS5kZXB0aFdyaXRlJiYoZC5kZXB0aFdyaXRlPWEuZGVwdGhXcml0ZSk7dm9pZCAwIT09YS5jb2xvcldyaXRlJiYoZC5jb2xvcldyaXRlPWEuY29sb3JXcml0ZSk7dm9pZCAwIT09YS53aXJlZnJhbWUmJihkLndpcmVmcmFtZT1hLndpcmVmcmFtZSk7dm9pZCAwIT09XG5hLndpcmVmcmFtZUxpbmV3aWR0aCYmKGQud2lyZWZyYW1lTGluZXdpZHRoPWEud2lyZWZyYW1lTGluZXdpZHRoKTt2b2lkIDAhPT1hLndpcmVmcmFtZUxpbmVjYXAmJihkLndpcmVmcmFtZUxpbmVjYXA9YS53aXJlZnJhbWVMaW5lY2FwKTt2b2lkIDAhPT1hLndpcmVmcmFtZUxpbmVqb2luJiYoZC53aXJlZnJhbWVMaW5lam9pbj1hLndpcmVmcmFtZUxpbmVqb2luKTt2b2lkIDAhPT1hLnJvdGF0aW9uJiYoZC5yb3RhdGlvbj1hLnJvdGF0aW9uKTsxIT09YS5saW5ld2lkdGgmJihkLmxpbmV3aWR0aD1hLmxpbmV3aWR0aCk7dm9pZCAwIT09YS5kYXNoU2l6ZSYmKGQuZGFzaFNpemU9YS5kYXNoU2l6ZSk7dm9pZCAwIT09YS5nYXBTaXplJiYoZC5nYXBTaXplPWEuZ2FwU2l6ZSk7dm9pZCAwIT09YS5zY2FsZSYmKGQuc2NhbGU9YS5zY2FsZSk7dm9pZCAwIT09YS5za2lubmluZyYmKGQuc2tpbm5pbmc9YS5za2lubmluZyk7dm9pZCAwIT09YS5tb3JwaFRhcmdldHMmJihkLm1vcnBoVGFyZ2V0cz1cbmEubW9ycGhUYXJnZXRzKTt2b2lkIDAhPT1hLmRpdGhlcmluZyYmKGQuZGl0aGVyaW5nPWEuZGl0aGVyaW5nKTt2b2lkIDAhPT1hLnZpc2libGUmJihkLnZpc2libGU9YS52aXNpYmxlKTt2b2lkIDAhPT1hLnVzZXJEYXRhJiYoZC51c2VyRGF0YT1hLnVzZXJEYXRhKTt2b2lkIDAhPT1hLnNoYWRpbmcmJihkLmZsYXRTaGFkaW5nPTE9PT1hLnNoYWRpbmcpO3ZvaWQgMCE9PWEuc2l6ZSYmKGQuc2l6ZT1hLnNpemUpO3ZvaWQgMCE9PWEuc2l6ZUF0dGVudWF0aW9uJiYoZC5zaXplQXR0ZW51YXRpb249YS5zaXplQXR0ZW51YXRpb24pO3ZvaWQgMCE9PWEubWFwJiYoZC5tYXA9YihhLm1hcCkpO3ZvaWQgMCE9PWEuYWxwaGFNYXAmJihkLmFscGhhTWFwPWIoYS5hbHBoYU1hcCksZC50cmFuc3BhcmVudD0hMCk7dm9pZCAwIT09YS5idW1wTWFwJiYoZC5idW1wTWFwPWIoYS5idW1wTWFwKSk7dm9pZCAwIT09YS5idW1wU2NhbGUmJihkLmJ1bXBTY2FsZT1hLmJ1bXBTY2FsZSk7dm9pZCAwIT09YS5ub3JtYWxNYXAmJlxuKGQubm9ybWFsTWFwPWIoYS5ub3JtYWxNYXApKTtpZih2b2lkIDAhPT1hLm5vcm1hbFNjYWxlKXt2YXIgZT1hLm5vcm1hbFNjYWxlOyExPT09QXJyYXkuaXNBcnJheShlKSYmKGU9W2UsZV0pO2Qubm9ybWFsU2NhbGU9KG5ldyBEKS5mcm9tQXJyYXkoZSl9dm9pZCAwIT09YS5kaXNwbGFjZW1lbnRNYXAmJihkLmRpc3BsYWNlbWVudE1hcD1iKGEuZGlzcGxhY2VtZW50TWFwKSk7dm9pZCAwIT09YS5kaXNwbGFjZW1lbnRTY2FsZSYmKGQuZGlzcGxhY2VtZW50U2NhbGU9YS5kaXNwbGFjZW1lbnRTY2FsZSk7dm9pZCAwIT09YS5kaXNwbGFjZW1lbnRCaWFzJiYoZC5kaXNwbGFjZW1lbnRCaWFzPWEuZGlzcGxhY2VtZW50Qmlhcyk7dm9pZCAwIT09YS5yb3VnaG5lc3NNYXAmJihkLnJvdWdobmVzc01hcD1iKGEucm91Z2huZXNzTWFwKSk7dm9pZCAwIT09YS5tZXRhbG5lc3NNYXAmJihkLm1ldGFsbmVzc01hcD1iKGEubWV0YWxuZXNzTWFwKSk7dm9pZCAwIT09YS5lbWlzc2l2ZU1hcCYmKGQuZW1pc3NpdmVNYXA9XG5iKGEuZW1pc3NpdmVNYXApKTt2b2lkIDAhPT1hLmVtaXNzaXZlSW50ZW5zaXR5JiYoZC5lbWlzc2l2ZUludGVuc2l0eT1hLmVtaXNzaXZlSW50ZW5zaXR5KTt2b2lkIDAhPT1hLnNwZWN1bGFyTWFwJiYoZC5zcGVjdWxhck1hcD1iKGEuc3BlY3VsYXJNYXApKTt2b2lkIDAhPT1hLmVudk1hcCYmKGQuZW52TWFwPWIoYS5lbnZNYXApKTt2b2lkIDAhPT1hLnJlZmxlY3Rpdml0eSYmKGQucmVmbGVjdGl2aXR5PWEucmVmbGVjdGl2aXR5KTt2b2lkIDAhPT1hLmxpZ2h0TWFwJiYoZC5saWdodE1hcD1iKGEubGlnaHRNYXApKTt2b2lkIDAhPT1hLmxpZ2h0TWFwSW50ZW5zaXR5JiYoZC5saWdodE1hcEludGVuc2l0eT1hLmxpZ2h0TWFwSW50ZW5zaXR5KTt2b2lkIDAhPT1hLmFvTWFwJiYoZC5hb01hcD1iKGEuYW9NYXApKTt2b2lkIDAhPT1hLmFvTWFwSW50ZW5zaXR5JiYoZC5hb01hcEludGVuc2l0eT1hLmFvTWFwSW50ZW5zaXR5KTt2b2lkIDAhPT1hLmdyYWRpZW50TWFwJiYoZC5ncmFkaWVudE1hcD1cbmIoYS5ncmFkaWVudE1hcCkpO3JldHVybiBkfX0pO09iamVjdC5hc3NpZ24obGUucHJvdG90eXBlLHtsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXM7KG5ldyBOYShlLm1hbmFnZXIpKS5sb2FkKGEsZnVuY3Rpb24oYSl7YihlLnBhcnNlKEpTT04ucGFyc2UoYSkpKX0sYyxkKX0scGFyc2U6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IEU7dmFyIGM9YS5kYXRhLmluZGV4O3ZvaWQgMCE9PWMmJihjPW5ldyB4ZltjLnR5cGVdKGMuYXJyYXkpLGIuc2V0SW5kZXgobmV3IE0oYywxKSkpO3ZhciBkPWEuZGF0YS5hdHRyaWJ1dGVzO2ZvcihmIGluIGQpe3ZhciBlPWRbZl07Yz1uZXcgeGZbZS50eXBlXShlLmFycmF5KTtiLmFkZEF0dHJpYnV0ZShmLG5ldyBNKGMsZS5pdGVtU2l6ZSxlLm5vcm1hbGl6ZWQpKX12YXIgZj1hLmRhdGEuZ3JvdXBzfHxhLmRhdGEuZHJhd2NhbGxzfHxhLmRhdGEub2Zmc2V0cztpZih2b2lkIDAhPT1mKWZvcihjPTAsZD1mLmxlbmd0aDtjIT09ZDsrK2MpZT1mW2NdLFxuYi5hZGRHcm91cChlLnN0YXJ0LGUuY291bnQsZS5tYXRlcmlhbEluZGV4KTthPWEuZGF0YS5ib3VuZGluZ1NwaGVyZTt2b2lkIDAhPT1hJiYoZj1uZXcgcCx2b2lkIDAhPT1hLmNlbnRlciYmZi5mcm9tQXJyYXkoYS5jZW50ZXIpLGIuYm91bmRpbmdTcGhlcmU9bmV3IElhKGYsYS5yYWRpdXMpKTtyZXR1cm4gYn19KTt2YXIgeGY9e0ludDhBcnJheTpJbnQ4QXJyYXksVWludDhBcnJheTpVaW50OEFycmF5LFVpbnQ4Q2xhbXBlZEFycmF5OlwidW5kZWZpbmVkXCIhPT10eXBlb2YgVWludDhDbGFtcGVkQXJyYXk/VWludDhDbGFtcGVkQXJyYXk6VWludDhBcnJheSxJbnQxNkFycmF5OkludDE2QXJyYXksVWludDE2QXJyYXk6VWludDE2QXJyYXksSW50MzJBcnJheTpJbnQzMkFycmF5LFVpbnQzMkFycmF5OlVpbnQzMkFycmF5LEZsb2F0MzJBcnJheTpGbG9hdDMyQXJyYXksRmxvYXQ2NEFycmF5OkZsb2F0NjRBcnJheX07a2MuSGFuZGxlcnM9e2hhbmRsZXJzOltdLGFkZDpmdW5jdGlvbihhLGIpe3RoaXMuaGFuZGxlcnMucHVzaChhLFxuYil9LGdldDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5oYW5kbGVycyxjPTAsZD1iLmxlbmd0aDtjPGQ7Yys9Mil7dmFyIGU9YltjKzFdO2lmKGJbY10udGVzdChhKSlyZXR1cm4gZX1yZXR1cm4gbnVsbH19O09iamVjdC5hc3NpZ24oa2MucHJvdG90eXBlLHtjcm9zc09yaWdpbjp2b2lkIDAsaW5pdE1hdGVyaWFsczpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPVtdLGU9MDtlPGEubGVuZ3RoOysrZSlkW2VdPXRoaXMuY3JlYXRlTWF0ZXJpYWwoYVtlXSxiLGMpO3JldHVybiBkfSxjcmVhdGVNYXRlcmlhbDpmdW5jdGlvbigpe3ZhciBhPXtOb0JsZW5kaW5nOjAsTm9ybWFsQmxlbmRpbmc6MSxBZGRpdGl2ZUJsZW5kaW5nOjIsU3VidHJhY3RpdmVCbGVuZGluZzozLE11bHRpcGx5QmxlbmRpbmc6NCxDdXN0b21CbGVuZGluZzo1fSxiPW5ldyBILGM9bmV3IEFkLGQ9bmV3IFBkO3JldHVybiBmdW5jdGlvbihlLGYsZyl7ZnVuY3Rpb24gaChhLGIsZCxlLGgpe2E9ZithO3ZhciBtPWtjLkhhbmRsZXJzLmdldChhKTtcbm51bGwhPT1tP2E9bS5sb2FkKGEpOihjLnNldENyb3NzT3JpZ2luKGcpLGE9Yy5sb2FkKGEpKTt2b2lkIDAhPT1iJiYoYS5yZXBlYXQuZnJvbUFycmF5KGIpLDEhPT1iWzBdJiYoYS53cmFwUz0xRTMpLDEhPT1iWzFdJiYoYS53cmFwVD0xRTMpKTt2b2lkIDAhPT1kJiZhLm9mZnNldC5mcm9tQXJyYXkoZCk7dm9pZCAwIT09ZSYmKFwicmVwZWF0XCI9PT1lWzBdJiYoYS53cmFwUz0xRTMpLFwibWlycm9yXCI9PT1lWzBdJiYoYS53cmFwUz0xMDAyKSxcInJlcGVhdFwiPT09ZVsxXSYmKGEud3JhcFQ9MUUzKSxcIm1pcnJvclwiPT09ZVsxXSYmKGEud3JhcFQ9MTAwMikpO3ZvaWQgMCE9PWgmJihhLmFuaXNvdHJvcHk9aCk7Yj1RLmdlbmVyYXRlVVVJRCgpO2tbYl09YTtyZXR1cm4gYn12YXIgaz17fSxtPXt1dWlkOlEuZ2VuZXJhdGVVVUlEKCksdHlwZTpcIk1lc2hMYW1iZXJ0TWF0ZXJpYWxcIn0sbDtmb3IobCBpbiBlKXt2YXIgbj1lW2xdO3N3aXRjaChsKXtjYXNlIFwiRGJnQ29sb3JcIjpjYXNlIFwiRGJnSW5kZXhcIjpjYXNlIFwib3B0aWNhbERlbnNpdHlcIjpjYXNlIFwiaWxsdW1pbmF0aW9uXCI6YnJlYWs7XG5jYXNlIFwiRGJnTmFtZVwiOm0ubmFtZT1uO2JyZWFrO2Nhc2UgXCJibGVuZGluZ1wiOm0uYmxlbmRpbmc9YVtuXTticmVhaztjYXNlIFwiY29sb3JBbWJpZW50XCI6Y2FzZSBcIm1hcEFtYmllbnRcIjpjb25zb2xlLndhcm4oXCJUSFJFRS5Mb2FkZXIuY3JlYXRlTWF0ZXJpYWw6XCIsbCxcImlzIG5vIGxvbmdlciBzdXBwb3J0ZWQuXCIpO2JyZWFrO2Nhc2UgXCJjb2xvckRpZmZ1c2VcIjptLmNvbG9yPWIuZnJvbUFycmF5KG4pLmdldEhleCgpO2JyZWFrO2Nhc2UgXCJjb2xvclNwZWN1bGFyXCI6bS5zcGVjdWxhcj1iLmZyb21BcnJheShuKS5nZXRIZXgoKTticmVhaztjYXNlIFwiY29sb3JFbWlzc2l2ZVwiOm0uZW1pc3NpdmU9Yi5mcm9tQXJyYXkobikuZ2V0SGV4KCk7YnJlYWs7Y2FzZSBcInNwZWN1bGFyQ29lZlwiOm0uc2hpbmluZXNzPW47YnJlYWs7Y2FzZSBcInNoYWRpbmdcIjpcImJhc2ljXCI9PT1uLnRvTG93ZXJDYXNlKCkmJihtLnR5cGU9XCJNZXNoQmFzaWNNYXRlcmlhbFwiKTtcInBob25nXCI9PT1uLnRvTG93ZXJDYXNlKCkmJlxuKG0udHlwZT1cIk1lc2hQaG9uZ01hdGVyaWFsXCIpO1wic3RhbmRhcmRcIj09PW4udG9Mb3dlckNhc2UoKSYmKG0udHlwZT1cIk1lc2hTdGFuZGFyZE1hdGVyaWFsXCIpO2JyZWFrO2Nhc2UgXCJtYXBEaWZmdXNlXCI6bS5tYXA9aChuLGUubWFwRGlmZnVzZVJlcGVhdCxlLm1hcERpZmZ1c2VPZmZzZXQsZS5tYXBEaWZmdXNlV3JhcCxlLm1hcERpZmZ1c2VBbmlzb3Ryb3B5KTticmVhaztjYXNlIFwibWFwRGlmZnVzZVJlcGVhdFwiOmNhc2UgXCJtYXBEaWZmdXNlT2Zmc2V0XCI6Y2FzZSBcIm1hcERpZmZ1c2VXcmFwXCI6Y2FzZSBcIm1hcERpZmZ1c2VBbmlzb3Ryb3B5XCI6YnJlYWs7Y2FzZSBcIm1hcEVtaXNzaXZlXCI6bS5lbWlzc2l2ZU1hcD1oKG4sZS5tYXBFbWlzc2l2ZVJlcGVhdCxlLm1hcEVtaXNzaXZlT2Zmc2V0LGUubWFwRW1pc3NpdmVXcmFwLGUubWFwRW1pc3NpdmVBbmlzb3Ryb3B5KTticmVhaztjYXNlIFwibWFwRW1pc3NpdmVSZXBlYXRcIjpjYXNlIFwibWFwRW1pc3NpdmVPZmZzZXRcIjpjYXNlIFwibWFwRW1pc3NpdmVXcmFwXCI6Y2FzZSBcIm1hcEVtaXNzaXZlQW5pc290cm9weVwiOmJyZWFrO1xuY2FzZSBcIm1hcExpZ2h0XCI6bS5saWdodE1hcD1oKG4sZS5tYXBMaWdodFJlcGVhdCxlLm1hcExpZ2h0T2Zmc2V0LGUubWFwTGlnaHRXcmFwLGUubWFwTGlnaHRBbmlzb3Ryb3B5KTticmVhaztjYXNlIFwibWFwTGlnaHRSZXBlYXRcIjpjYXNlIFwibWFwTGlnaHRPZmZzZXRcIjpjYXNlIFwibWFwTGlnaHRXcmFwXCI6Y2FzZSBcIm1hcExpZ2h0QW5pc290cm9weVwiOmJyZWFrO2Nhc2UgXCJtYXBBT1wiOm0uYW9NYXA9aChuLGUubWFwQU9SZXBlYXQsZS5tYXBBT09mZnNldCxlLm1hcEFPV3JhcCxlLm1hcEFPQW5pc290cm9weSk7YnJlYWs7Y2FzZSBcIm1hcEFPUmVwZWF0XCI6Y2FzZSBcIm1hcEFPT2Zmc2V0XCI6Y2FzZSBcIm1hcEFPV3JhcFwiOmNhc2UgXCJtYXBBT0FuaXNvdHJvcHlcIjpicmVhaztjYXNlIFwibWFwQnVtcFwiOm0uYnVtcE1hcD1oKG4sZS5tYXBCdW1wUmVwZWF0LGUubWFwQnVtcE9mZnNldCxlLm1hcEJ1bXBXcmFwLGUubWFwQnVtcEFuaXNvdHJvcHkpO2JyZWFrO2Nhc2UgXCJtYXBCdW1wU2NhbGVcIjptLmJ1bXBTY2FsZT1cbm47YnJlYWs7Y2FzZSBcIm1hcEJ1bXBSZXBlYXRcIjpjYXNlIFwibWFwQnVtcE9mZnNldFwiOmNhc2UgXCJtYXBCdW1wV3JhcFwiOmNhc2UgXCJtYXBCdW1wQW5pc290cm9weVwiOmJyZWFrO2Nhc2UgXCJtYXBOb3JtYWxcIjptLm5vcm1hbE1hcD1oKG4sZS5tYXBOb3JtYWxSZXBlYXQsZS5tYXBOb3JtYWxPZmZzZXQsZS5tYXBOb3JtYWxXcmFwLGUubWFwTm9ybWFsQW5pc290cm9weSk7YnJlYWs7Y2FzZSBcIm1hcE5vcm1hbEZhY3RvclwiOm0ubm9ybWFsU2NhbGU9W24sbl07YnJlYWs7Y2FzZSBcIm1hcE5vcm1hbFJlcGVhdFwiOmNhc2UgXCJtYXBOb3JtYWxPZmZzZXRcIjpjYXNlIFwibWFwTm9ybWFsV3JhcFwiOmNhc2UgXCJtYXBOb3JtYWxBbmlzb3Ryb3B5XCI6YnJlYWs7Y2FzZSBcIm1hcFNwZWN1bGFyXCI6bS5zcGVjdWxhck1hcD1oKG4sZS5tYXBTcGVjdWxhclJlcGVhdCxlLm1hcFNwZWN1bGFyT2Zmc2V0LGUubWFwU3BlY3VsYXJXcmFwLGUubWFwU3BlY3VsYXJBbmlzb3Ryb3B5KTticmVhaztjYXNlIFwibWFwU3BlY3VsYXJSZXBlYXRcIjpjYXNlIFwibWFwU3BlY3VsYXJPZmZzZXRcIjpjYXNlIFwibWFwU3BlY3VsYXJXcmFwXCI6Y2FzZSBcIm1hcFNwZWN1bGFyQW5pc290cm9weVwiOmJyZWFrO1xuY2FzZSBcIm1hcE1ldGFsbmVzc1wiOm0ubWV0YWxuZXNzTWFwPWgobixlLm1hcE1ldGFsbmVzc1JlcGVhdCxlLm1hcE1ldGFsbmVzc09mZnNldCxlLm1hcE1ldGFsbmVzc1dyYXAsZS5tYXBNZXRhbG5lc3NBbmlzb3Ryb3B5KTticmVhaztjYXNlIFwibWFwTWV0YWxuZXNzUmVwZWF0XCI6Y2FzZSBcIm1hcE1ldGFsbmVzc09mZnNldFwiOmNhc2UgXCJtYXBNZXRhbG5lc3NXcmFwXCI6Y2FzZSBcIm1hcE1ldGFsbmVzc0FuaXNvdHJvcHlcIjpicmVhaztjYXNlIFwibWFwUm91Z2huZXNzXCI6bS5yb3VnaG5lc3NNYXA9aChuLGUubWFwUm91Z2huZXNzUmVwZWF0LGUubWFwUm91Z2huZXNzT2Zmc2V0LGUubWFwUm91Z2huZXNzV3JhcCxlLm1hcFJvdWdobmVzc0FuaXNvdHJvcHkpO2JyZWFrO2Nhc2UgXCJtYXBSb3VnaG5lc3NSZXBlYXRcIjpjYXNlIFwibWFwUm91Z2huZXNzT2Zmc2V0XCI6Y2FzZSBcIm1hcFJvdWdobmVzc1dyYXBcIjpjYXNlIFwibWFwUm91Z2huZXNzQW5pc290cm9weVwiOmJyZWFrO2Nhc2UgXCJtYXBBbHBoYVwiOm0uYWxwaGFNYXA9XG5oKG4sZS5tYXBBbHBoYVJlcGVhdCxlLm1hcEFscGhhT2Zmc2V0LGUubWFwQWxwaGFXcmFwLGUubWFwQWxwaGFBbmlzb3Ryb3B5KTticmVhaztjYXNlIFwibWFwQWxwaGFSZXBlYXRcIjpjYXNlIFwibWFwQWxwaGFPZmZzZXRcIjpjYXNlIFwibWFwQWxwaGFXcmFwXCI6Y2FzZSBcIm1hcEFscGhhQW5pc290cm9weVwiOmJyZWFrO2Nhc2UgXCJmbGlwU2lkZWRcIjptLnNpZGU9MTticmVhaztjYXNlIFwiZG91YmxlU2lkZWRcIjptLnNpZGU9MjticmVhaztjYXNlIFwidHJhbnNwYXJlbmN5XCI6Y29uc29sZS53YXJuKFwiVEhSRUUuTG9hZGVyLmNyZWF0ZU1hdGVyaWFsOiB0cmFuc3BhcmVuY3kgaGFzIGJlZW4gcmVuYW1lZCB0byBvcGFjaXR5XCIpO20ub3BhY2l0eT1uO2JyZWFrO2Nhc2UgXCJkZXB0aFRlc3RcIjpjYXNlIFwiZGVwdGhXcml0ZVwiOmNhc2UgXCJjb2xvcldyaXRlXCI6Y2FzZSBcIm9wYWNpdHlcIjpjYXNlIFwicmVmbGVjdGl2aXR5XCI6Y2FzZSBcInRyYW5zcGFyZW50XCI6Y2FzZSBcInZpc2libGVcIjpjYXNlIFwid2lyZWZyYW1lXCI6bVtsXT1cbm47YnJlYWs7Y2FzZSBcInZlcnRleENvbG9yc1wiOiEwPT09biYmKG0udmVydGV4Q29sb3JzPTIpO1wiZmFjZVwiPT09biYmKG0udmVydGV4Q29sb3JzPTEpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5lcnJvcihcIlRIUkVFLkxvYWRlci5jcmVhdGVNYXRlcmlhbDogVW5zdXBwb3J0ZWRcIixsLG4pfX1cIk1lc2hCYXNpY01hdGVyaWFsXCI9PT1tLnR5cGUmJmRlbGV0ZSBtLmVtaXNzaXZlO1wiTWVzaFBob25nTWF0ZXJpYWxcIiE9PW0udHlwZSYmZGVsZXRlIG0uc3BlY3VsYXI7MT5tLm9wYWNpdHkmJihtLnRyYW5zcGFyZW50PSEwKTtkLnNldFRleHR1cmVzKGspO3JldHVybiBkLnBhcnNlKG0pfX0oKX0pO3ZhciBIZT17ZGVjb2RlVGV4dDpmdW5jdGlvbihhKXtpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIFRleHREZWNvZGVyKXJldHVybihuZXcgVGV4dERlY29kZXIpLmRlY29kZShhKTtmb3IodmFyIGI9XCJcIixjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKWIrPVN0cmluZy5mcm9tQ2hhckNvZGUoYVtjXSk7cmV0dXJuIGJ9LFxuZXh0cmFjdFVybEJhc2U6ZnVuY3Rpb24oYSl7YT1hLnNwbGl0KFwiL1wiKTtpZigxPT09YS5sZW5ndGgpcmV0dXJuXCIuL1wiO2EucG9wKCk7cmV0dXJuIGEuam9pbihcIi9cIikrXCIvXCJ9fTtPYmplY3QuYXNzaWduKG1lLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLGY9dGhpcy50ZXh0dXJlUGF0aCYmXCJzdHJpbmdcIj09PXR5cGVvZiB0aGlzLnRleHR1cmVQYXRoP3RoaXMudGV4dHVyZVBhdGg6SGUuZXh0cmFjdFVybEJhc2UoYSksZz1uZXcgTmEodGhpcy5tYW5hZ2VyKTtnLnNldFdpdGhDcmVkZW50aWFscyh0aGlzLndpdGhDcmVkZW50aWFscyk7Zy5sb2FkKGEsZnVuY3Rpb24oYyl7Yz1KU09OLnBhcnNlKGMpO3ZhciBkPWMubWV0YWRhdGE7aWYodm9pZCAwIT09ZCYmKGQ9ZC50eXBlLHZvaWQgMCE9PWQpKXtpZihcIm9iamVjdFwiPT09ZC50b0xvd2VyQ2FzZSgpKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuSlNPTkxvYWRlcjogXCIrYStcIiBzaG91bGQgYmUgbG9hZGVkIHdpdGggVEhSRUUuT2JqZWN0TG9hZGVyIGluc3RlYWQuXCIpO1xucmV0dXJufWlmKFwic2NlbmVcIj09PWQudG9Mb3dlckNhc2UoKSl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkpTT05Mb2FkZXI6IFwiK2ErXCIgc2hvdWxkIGJlIGxvYWRlZCB3aXRoIFRIUkVFLlNjZW5lTG9hZGVyIGluc3RlYWQuXCIpO3JldHVybn19Yz1lLnBhcnNlKGMsZik7YihjLmdlb21ldHJ5LGMubWF0ZXJpYWxzKX0sYyxkKX0sc2V0VGV4dHVyZVBhdGg6ZnVuY3Rpb24oYSl7dGhpcy50ZXh0dXJlUGF0aD1hfSxwYXJzZTpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihhLGIpe3ZvaWQgMCE9PWEuZGF0YSYmKGE9YS5kYXRhKTthLnNjYWxlPXZvaWQgMCE9PWEuc2NhbGU/MS9hLnNjYWxlOjE7dmFyIGM9bmV3IEwsZD1hLGUsZixnLGg9ZC5mYWNlczt2YXIgaz1kLnZlcnRpY2VzO3ZhciBtPWQubm9ybWFscyxsPWQuY29sb3JzO3ZhciBuPWQuc2NhbGU7dmFyIHU9MDtpZih2b2lkIDAhPT1kLnV2cyl7Zm9yKGU9MDtlPGQudXZzLmxlbmd0aDtlKyspZC51dnNbZV0ubGVuZ3RoJiZ1Kys7Zm9yKGU9XG4wO2U8dTtlKyspYy5mYWNlVmVydGV4VXZzW2VdPVtdfXZhciByPTA7Zm9yKGc9ay5sZW5ndGg7cjxnOyllPW5ldyBwLGUueD1rW3IrK10qbixlLnk9a1tyKytdKm4sZS56PWtbcisrXSpuLGMudmVydGljZXMucHVzaChlKTtyPTA7Zm9yKGc9aC5sZW5ndGg7cjxnOyl7az1oW3IrK107dmFyIHQ9ayYxO3ZhciB2PWsmMjtlPWsmODt2YXIgdz1rJjE2O3ZhciB6PWsmMzI7bj1rJjY0O2smPTEyODtpZih0KXt0PW5ldyBZYTt0LmE9aFtyXTt0LmI9aFtyKzFdO3QuYz1oW3IrM107dmFyIHk9bmV3IFlhO3kuYT1oW3IrMV07eS5iPWhbcisyXTt5LmM9aFtyKzNdO3IrPTQ7diYmKHY9aFtyKytdLHQubWF0ZXJpYWxJbmRleD12LHkubWF0ZXJpYWxJbmRleD12KTt2PWMuZmFjZXMubGVuZ3RoO2lmKGUpZm9yKGU9MDtlPHU7ZSsrKXt2YXIgeD1kLnV2c1tlXTtjLmZhY2VWZXJ0ZXhVdnNbZV1bdl09W107Yy5mYWNlVmVydGV4VXZzW2VdW3YrMV09W107Zm9yKGY9MDs0PmY7ZisrKXt2YXIgQT1oW3IrK107XG52YXIgQj14WzIqQV07QT14WzIqQSsxXTtCPW5ldyBEKEIsQSk7MiE9PWYmJmMuZmFjZVZlcnRleFV2c1tlXVt2XS5wdXNoKEIpOzAhPT1mJiZjLmZhY2VWZXJ0ZXhVdnNbZV1bdisxXS5wdXNoKEIpfX13JiYodz0zKmhbcisrXSx0Lm5vcm1hbC5zZXQobVt3KytdLG1bdysrXSxtW3ddKSx5Lm5vcm1hbC5jb3B5KHQubm9ybWFsKSk7aWYoeilmb3IoZT0wOzQ+ZTtlKyspdz0zKmhbcisrXSx6PW5ldyBwKG1bdysrXSxtW3crK10sbVt3XSksMiE9PWUmJnQudmVydGV4Tm9ybWFscy5wdXNoKHopLDAhPT1lJiZ5LnZlcnRleE5vcm1hbHMucHVzaCh6KTtuJiYobj1oW3IrK10sbj1sW25dLHQuY29sb3Iuc2V0SGV4KG4pLHkuY29sb3Iuc2V0SGV4KG4pKTtpZihrKWZvcihlPTA7ND5lO2UrKyluPWhbcisrXSxuPWxbbl0sMiE9PWUmJnQudmVydGV4Q29sb3JzLnB1c2gobmV3IEgobikpLDAhPT1lJiZ5LnZlcnRleENvbG9ycy5wdXNoKG5ldyBIKG4pKTtjLmZhY2VzLnB1c2godCk7Yy5mYWNlcy5wdXNoKHkpfWVsc2V7dD1cbm5ldyBZYTt0LmE9aFtyKytdO3QuYj1oW3IrK107dC5jPWhbcisrXTt2JiYodj1oW3IrK10sdC5tYXRlcmlhbEluZGV4PXYpO3Y9Yy5mYWNlcy5sZW5ndGg7aWYoZSlmb3IoZT0wO2U8dTtlKyspZm9yKHg9ZC51dnNbZV0sYy5mYWNlVmVydGV4VXZzW2VdW3ZdPVtdLGY9MDszPmY7ZisrKUE9aFtyKytdLEI9eFsyKkFdLEE9eFsyKkErMV0sQj1uZXcgRChCLEEpLGMuZmFjZVZlcnRleFV2c1tlXVt2XS5wdXNoKEIpO3cmJih3PTMqaFtyKytdLHQubm9ybWFsLnNldChtW3crK10sbVt3KytdLG1bd10pKTtpZih6KWZvcihlPTA7Mz5lO2UrKyl3PTMqaFtyKytdLHo9bmV3IHAobVt3KytdLG1bdysrXSxtW3ddKSx0LnZlcnRleE5vcm1hbHMucHVzaCh6KTtuJiYobj1oW3IrK10sdC5jb2xvci5zZXRIZXgobFtuXSkpO2lmKGspZm9yKGU9MDszPmU7ZSsrKW49aFtyKytdLHQudmVydGV4Q29sb3JzLnB1c2gobmV3IEgobFtuXSkpO2MuZmFjZXMucHVzaCh0KX19ZD1hO3I9dm9pZCAwIT09ZC5pbmZsdWVuY2VzUGVyVmVydGV4P1xuZC5pbmZsdWVuY2VzUGVyVmVydGV4OjI7aWYoZC5za2luV2VpZ2h0cylmb3IoZz0wLGg9ZC5za2luV2VpZ2h0cy5sZW5ndGg7ZzxoO2crPXIpYy5za2luV2VpZ2h0cy5wdXNoKG5ldyBhYShkLnNraW5XZWlnaHRzW2ddLDE8cj9kLnNraW5XZWlnaHRzW2crMV06MCwyPHI/ZC5za2luV2VpZ2h0c1tnKzJdOjAsMzxyP2Quc2tpbldlaWdodHNbZyszXTowKSk7aWYoZC5za2luSW5kaWNlcylmb3IoZz0wLGg9ZC5za2luSW5kaWNlcy5sZW5ndGg7ZzxoO2crPXIpYy5za2luSW5kaWNlcy5wdXNoKG5ldyBhYShkLnNraW5JbmRpY2VzW2ddLDE8cj9kLnNraW5JbmRpY2VzW2crMV06MCwyPHI/ZC5za2luSW5kaWNlc1tnKzJdOjAsMzxyP2Quc2tpbkluZGljZXNbZyszXTowKSk7Yy5ib25lcz1kLmJvbmVzO2MuYm9uZXMmJjA8Yy5ib25lcy5sZW5ndGgmJihjLnNraW5XZWlnaHRzLmxlbmd0aCE9PWMuc2tpbkluZGljZXMubGVuZ3RofHxjLnNraW5JbmRpY2VzLmxlbmd0aCE9PWMudmVydGljZXMubGVuZ3RoKSYmXG5jb25zb2xlLndhcm4oXCJXaGVuIHNraW5uaW5nLCBudW1iZXIgb2YgdmVydGljZXMgKFwiK2MudmVydGljZXMubGVuZ3RoK1wiKSwgc2tpbkluZGljZXMgKFwiK2Muc2tpbkluZGljZXMubGVuZ3RoK1wiKSwgYW5kIHNraW5XZWlnaHRzIChcIitjLnNraW5XZWlnaHRzLmxlbmd0aCtcIikgc2hvdWxkIG1hdGNoLlwiKTtnPWE7aD1nLnNjYWxlO2lmKHZvaWQgMCE9PWcubW9ycGhUYXJnZXRzKWZvcihkPTAscj1nLm1vcnBoVGFyZ2V0cy5sZW5ndGg7ZDxyO2QrKylmb3IoYy5tb3JwaFRhcmdldHNbZF09e30sYy5tb3JwaFRhcmdldHNbZF0ubmFtZT1nLm1vcnBoVGFyZ2V0c1tkXS5uYW1lLGMubW9ycGhUYXJnZXRzW2RdLnZlcnRpY2VzPVtdLG09Yy5tb3JwaFRhcmdldHNbZF0udmVydGljZXMsbD1nLm1vcnBoVGFyZ2V0c1tkXS52ZXJ0aWNlcyx1PTAsaz1sLmxlbmd0aDt1PGs7dSs9MyluPW5ldyBwLG4ueD1sW3VdKmgsbi55PWxbdSsxXSpoLG4uej1sW3UrMl0qaCxtLnB1c2gobik7aWYodm9pZCAwIT09XG5nLm1vcnBoQ29sb3JzJiYwPGcubW9ycGhDb2xvcnMubGVuZ3RoKWZvcihjb25zb2xlLndhcm4oJ1RIUkVFLkpTT05Mb2FkZXI6IFwibW9ycGhDb2xvcnNcIiBubyBsb25nZXIgc3VwcG9ydGVkLiBVc2luZyB0aGVtIGFzIGZhY2UgY29sb3JzLicpLGg9Yy5mYWNlcyxnPWcubW9ycGhDb2xvcnNbMF0uY29sb3JzLGQ9MCxyPWgubGVuZ3RoO2Q8cjtkKyspaFtkXS5jb2xvci5mcm9tQXJyYXkoZywzKmQpO2c9YTtkPVtdO3I9W107dm9pZCAwIT09Zy5hbmltYXRpb24mJnIucHVzaChnLmFuaW1hdGlvbik7dm9pZCAwIT09Zy5hbmltYXRpb25zJiYoZy5hbmltYXRpb25zLmxlbmd0aD9yPXIuY29uY2F0KGcuYW5pbWF0aW9ucyk6ci5wdXNoKGcuYW5pbWF0aW9ucykpO2ZvcihnPTA7ZzxyLmxlbmd0aDtnKyspKGg9Q2EucGFyc2VBbmltYXRpb24ocltnXSxjLmJvbmVzKSkmJmQucHVzaChoKTtjLm1vcnBoVGFyZ2V0cyYmKHI9Q2EuQ3JlYXRlQ2xpcHNGcm9tTW9ycGhUYXJnZXRTZXF1ZW5jZXMoYy5tb3JwaFRhcmdldHMsXG4xMCksZD1kLmNvbmNhdChyKSk7MDxkLmxlbmd0aCYmKGMuYW5pbWF0aW9ucz1kKTtjLmNvbXB1dGVGYWNlTm9ybWFscygpO2MuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7aWYodm9pZCAwPT09YS5tYXRlcmlhbHN8fDA9PT1hLm1hdGVyaWFscy5sZW5ndGgpcmV0dXJue2dlb21ldHJ5OmN9O2E9a2MucHJvdG90eXBlLmluaXRNYXRlcmlhbHMoYS5tYXRlcmlhbHMsYix0aGlzLmNyb3NzT3JpZ2luKTtyZXR1cm57Z2VvbWV0cnk6YyxtYXRlcmlhbHM6YX19fSgpfSk7T2JqZWN0LmFzc2lnbihqZi5wcm90b3R5cGUse2xvYWQ6ZnVuY3Rpb24oYSxiLGMsZCl7XCJcIj09PXRoaXMudGV4dHVyZVBhdGgmJih0aGlzLnRleHR1cmVQYXRoPWEuc3Vic3RyaW5nKDAsYS5sYXN0SW5kZXhPZihcIi9cIikrMSkpO3ZhciBlPXRoaXM7KG5ldyBOYShlLm1hbmFnZXIpKS5sb2FkKGEsZnVuY3Rpb24oYyl7dmFyIGY9bnVsbDt0cnl7Zj1KU09OLnBhcnNlKGMpfWNhdGNoKGgpe3ZvaWQgMCE9PWQmJmQoaCk7Y29uc29sZS5lcnJvcihcIlRIUkVFOk9iamVjdExvYWRlcjogQ2FuJ3QgcGFyc2UgXCIrXG5hK1wiLlwiLGgubWVzc2FnZSk7cmV0dXJufWM9Zi5tZXRhZGF0YTt2b2lkIDA9PT1jfHx2b2lkIDA9PT1jLnR5cGV8fFwiZ2VvbWV0cnlcIj09PWMudHlwZS50b0xvd2VyQ2FzZSgpP2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5PYmplY3RMb2FkZXI6IENhbid0IGxvYWQgXCIrYStcIi4gVXNlIFRIUkVFLkpTT05Mb2FkZXIgaW5zdGVhZC5cIik6ZS5wYXJzZShmLGIpfSxjLGQpfSxzZXRUZXh0dXJlUGF0aDpmdW5jdGlvbihhKXt0aGlzLnRleHR1cmVQYXRoPWF9LHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uKGEpe3RoaXMuY3Jvc3NPcmlnaW49YX0scGFyc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnBhcnNlU2hhcGUoYS5zaGFwZXMpLGM9dGhpcy5wYXJzZUdlb21ldHJpZXMoYS5nZW9tZXRyaWVzLGMpLGQ9dGhpcy5wYXJzZUltYWdlcyhhLmltYWdlcyxmdW5jdGlvbigpe3ZvaWQgMCE9PWImJmIoZSl9KSxkPXRoaXMucGFyc2VUZXh0dXJlcyhhLnRleHR1cmVzLGQpLGQ9dGhpcy5wYXJzZU1hdGVyaWFscyhhLm1hdGVyaWFscyxcbmQpLGU9dGhpcy5wYXJzZU9iamVjdChhLm9iamVjdCxjLGQpO2EuYW5pbWF0aW9ucyYmKGUuYW5pbWF0aW9ucz10aGlzLnBhcnNlQW5pbWF0aW9ucyhhLmFuaW1hdGlvbnMpKTt2b2lkIDAhPT1hLmltYWdlcyYmMCE9PWEuaW1hZ2VzLmxlbmd0aHx8dm9pZCAwPT09Ynx8YihlKTtyZXR1cm4gZX0scGFyc2VTaGFwZTpmdW5jdGlvbihhKXt2YXIgYj17fTtpZih2b2lkIDAhPT1hKWZvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9KG5ldyBqYikuZnJvbUpTT04oYVtjXSk7YltlLnV1aWRdPWV9cmV0dXJuIGJ9LHBhcnNlR2VvbWV0cmllczpmdW5jdGlvbihhLGIpe3ZhciBjPXt9O2lmKHZvaWQgMCE9PWEpZm9yKHZhciBkPW5ldyBtZSxlPW5ldyBsZSxmPTAsZz1hLmxlbmd0aDtmPGc7ZisrKXt2YXIgaD1hW2ZdO3N3aXRjaChoLnR5cGUpe2Nhc2UgXCJQbGFuZUdlb21ldHJ5XCI6Y2FzZSBcIlBsYW5lQnVmZmVyR2VvbWV0cnlcIjp2YXIgaz1uZXcga2FbaC50eXBlXShoLndpZHRoLFxuaC5oZWlnaHQsaC53aWR0aFNlZ21lbnRzLGguaGVpZ2h0U2VnbWVudHMpO2JyZWFrO2Nhc2UgXCJCb3hHZW9tZXRyeVwiOmNhc2UgXCJCb3hCdWZmZXJHZW9tZXRyeVwiOmNhc2UgXCJDdWJlR2VvbWV0cnlcIjprPW5ldyBrYVtoLnR5cGVdKGgud2lkdGgsaC5oZWlnaHQsaC5kZXB0aCxoLndpZHRoU2VnbWVudHMsaC5oZWlnaHRTZWdtZW50cyxoLmRlcHRoU2VnbWVudHMpO2JyZWFrO2Nhc2UgXCJDaXJjbGVHZW9tZXRyeVwiOmNhc2UgXCJDaXJjbGVCdWZmZXJHZW9tZXRyeVwiOms9bmV3IGthW2gudHlwZV0oaC5yYWRpdXMsaC5zZWdtZW50cyxoLnRoZXRhU3RhcnQsaC50aGV0YUxlbmd0aCk7YnJlYWs7Y2FzZSBcIkN5bGluZGVyR2VvbWV0cnlcIjpjYXNlIFwiQ3lsaW5kZXJCdWZmZXJHZW9tZXRyeVwiOms9bmV3IGthW2gudHlwZV0oaC5yYWRpdXNUb3AsaC5yYWRpdXNCb3R0b20saC5oZWlnaHQsaC5yYWRpYWxTZWdtZW50cyxoLmhlaWdodFNlZ21lbnRzLGgub3BlbkVuZGVkLGgudGhldGFTdGFydCxoLnRoZXRhTGVuZ3RoKTtcbmJyZWFrO2Nhc2UgXCJDb25lR2VvbWV0cnlcIjpjYXNlIFwiQ29uZUJ1ZmZlckdlb21ldHJ5XCI6az1uZXcga2FbaC50eXBlXShoLnJhZGl1cyxoLmhlaWdodCxoLnJhZGlhbFNlZ21lbnRzLGguaGVpZ2h0U2VnbWVudHMsaC5vcGVuRW5kZWQsaC50aGV0YVN0YXJ0LGgudGhldGFMZW5ndGgpO2JyZWFrO2Nhc2UgXCJTcGhlcmVHZW9tZXRyeVwiOmNhc2UgXCJTcGhlcmVCdWZmZXJHZW9tZXRyeVwiOms9bmV3IGthW2gudHlwZV0oaC5yYWRpdXMsaC53aWR0aFNlZ21lbnRzLGguaGVpZ2h0U2VnbWVudHMsaC5waGlTdGFydCxoLnBoaUxlbmd0aCxoLnRoZXRhU3RhcnQsaC50aGV0YUxlbmd0aCk7YnJlYWs7Y2FzZSBcIkRvZGVjYWhlZHJvbkdlb21ldHJ5XCI6Y2FzZSBcIkRvZGVjYWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCI6Y2FzZSBcIkljb3NhaGVkcm9uR2VvbWV0cnlcIjpjYXNlIFwiSWNvc2FoZWRyb25CdWZmZXJHZW9tZXRyeVwiOmNhc2UgXCJPY3RhaGVkcm9uR2VvbWV0cnlcIjpjYXNlIFwiT2N0YWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCI6Y2FzZSBcIlRldHJhaGVkcm9uR2VvbWV0cnlcIjpjYXNlIFwiVGV0cmFoZWRyb25CdWZmZXJHZW9tZXRyeVwiOms9XG5uZXcga2FbaC50eXBlXShoLnJhZGl1cyxoLmRldGFpbCk7YnJlYWs7Y2FzZSBcIlJpbmdHZW9tZXRyeVwiOmNhc2UgXCJSaW5nQnVmZmVyR2VvbWV0cnlcIjprPW5ldyBrYVtoLnR5cGVdKGguaW5uZXJSYWRpdXMsaC5vdXRlclJhZGl1cyxoLnRoZXRhU2VnbWVudHMsaC5waGlTZWdtZW50cyxoLnRoZXRhU3RhcnQsaC50aGV0YUxlbmd0aCk7YnJlYWs7Y2FzZSBcIlRvcnVzR2VvbWV0cnlcIjpjYXNlIFwiVG9ydXNCdWZmZXJHZW9tZXRyeVwiOms9bmV3IGthW2gudHlwZV0oaC5yYWRpdXMsaC50dWJlLGgucmFkaWFsU2VnbWVudHMsaC50dWJ1bGFyU2VnbWVudHMsaC5hcmMpO2JyZWFrO2Nhc2UgXCJUb3J1c0tub3RHZW9tZXRyeVwiOmNhc2UgXCJUb3J1c0tub3RCdWZmZXJHZW9tZXRyeVwiOms9bmV3IGthW2gudHlwZV0oaC5yYWRpdXMsaC50dWJlLGgudHVidWxhclNlZ21lbnRzLGgucmFkaWFsU2VnbWVudHMsaC5wLGgucSk7YnJlYWs7Y2FzZSBcIkxhdGhlR2VvbWV0cnlcIjpjYXNlIFwiTGF0aGVCdWZmZXJHZW9tZXRyeVwiOms9XG5uZXcga2FbaC50eXBlXShoLnBvaW50cyxoLnNlZ21lbnRzLGgucGhpU3RhcnQsaC5waGlMZW5ndGgpO2JyZWFrO2Nhc2UgXCJQb2x5aGVkcm9uR2VvbWV0cnlcIjpjYXNlIFwiUG9seWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCI6az1uZXcga2FbaC50eXBlXShoLnZlcnRpY2VzLGguaW5kaWNlcyxoLnJhZGl1cyxoLmRldGFpbHMpO2JyZWFrO2Nhc2UgXCJTaGFwZUdlb21ldHJ5XCI6Y2FzZSBcIlNoYXBlQnVmZmVyR2VvbWV0cnlcIjprPVtdO2Y9MDtmb3IoZz1oLnNoYXBlcy5sZW5ndGg7ZjxnO2YrKylrLnB1c2goYltoLnNoYXBlc1tmXV0pO2s9bmV3IGthW2gudHlwZV0oayxoLmN1cnZlU2VnbWVudHMpO2JyZWFrO2Nhc2UgXCJCdWZmZXJHZW9tZXRyeVwiOms9ZS5wYXJzZShoKTticmVhaztjYXNlIFwiR2VvbWV0cnlcIjprPWQucGFyc2UoaCx0aGlzLnRleHR1cmVQYXRoKS5nZW9tZXRyeTticmVhaztkZWZhdWx0OmNvbnNvbGUud2FybignVEhSRUUuT2JqZWN0TG9hZGVyOiBVbnN1cHBvcnRlZCBnZW9tZXRyeSB0eXBlIFwiJytcbmgudHlwZSsnXCInKTtjb250aW51ZX1rLnV1aWQ9aC51dWlkO3ZvaWQgMCE9PWgubmFtZSYmKGsubmFtZT1oLm5hbWUpO2NbaC51dWlkXT1rfXJldHVybiBjfSxwYXJzZU1hdGVyaWFsczpmdW5jdGlvbihhLGIpe3ZhciBjPXt9O2lmKHZvaWQgMCE9PWEpe3ZhciBkPW5ldyBQZDtkLnNldFRleHR1cmVzKGIpO2I9MDtmb3IodmFyIGU9YS5sZW5ndGg7YjxlO2IrKyl7dmFyIGY9YVtiXTtpZihcIk11bHRpTWF0ZXJpYWxcIj09PWYudHlwZSl7Zm9yKHZhciBnPVtdLGg9MDtoPGYubWF0ZXJpYWxzLmxlbmd0aDtoKyspZy5wdXNoKGQucGFyc2UoZi5tYXRlcmlhbHNbaF0pKTtjW2YudXVpZF09Z31lbHNlIGNbZi51dWlkXT1kLnBhcnNlKGYpfX1yZXR1cm4gY30scGFyc2VBbmltYXRpb25zOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBkPUNhLnBhcnNlKGFbY10pO2IucHVzaChkKX1yZXR1cm4gYn0scGFyc2VJbWFnZXM6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe2QubWFuYWdlci5pdGVtU3RhcnQoYSk7XG5yZXR1cm4gZi5sb2FkKGEsZnVuY3Rpb24oKXtkLm1hbmFnZXIuaXRlbUVuZChhKX0sdm9pZCAwLGZ1bmN0aW9uKCl7ZC5tYW5hZ2VyLml0ZW1FbmQoYSk7ZC5tYW5hZ2VyLml0ZW1FcnJvcihhKX0pfXZhciBkPXRoaXMsZT17fTtpZih2b2lkIDAhPT1hJiYwPGEubGVuZ3RoKXtiPW5ldyBoZShiKTt2YXIgZj1uZXcgYWQoYik7Zi5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTtiPTA7Zm9yKHZhciBnPWEubGVuZ3RoO2I8ZztiKyspe3ZhciBoPWFbYl0saz0vXihcXC9cXC8pfChbYS16XSs6KFxcL1xcLyk/KS9pLnRlc3QoaC51cmwpP2gudXJsOmQudGV4dHVyZVBhdGgraC51cmw7ZVtoLnV1aWRdPWMoayl9fXJldHVybiBlfSxwYXJzZVRleHR1cmVzOmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhLGIpe2lmKFwibnVtYmVyXCI9PT10eXBlb2YgYSlyZXR1cm4gYTtjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3RMb2FkZXIucGFyc2VUZXh0dXJlOiBDb25zdGFudCBzaG91bGQgYmUgaW4gbnVtZXJpYyBmb3JtLlwiLFxuYSk7cmV0dXJuIGJbYV19dmFyIGQ9e307aWYodm9pZCAwIT09YSlmb3IodmFyIGU9MCxmPWEubGVuZ3RoO2U8ZjtlKyspe3ZhciBnPWFbZV07dm9pZCAwPT09Zy5pbWFnZSYmY29uc29sZS53YXJuKCdUSFJFRS5PYmplY3RMb2FkZXI6IE5vIFwiaW1hZ2VcIiBzcGVjaWZpZWQgZm9yJyxnLnV1aWQpO3ZvaWQgMD09PWJbZy5pbWFnZV0mJmNvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdExvYWRlcjogVW5kZWZpbmVkIGltYWdlXCIsZy5pbWFnZSk7dmFyIGg9bmV3IFUoYltnLmltYWdlXSk7aC5uZWVkc1VwZGF0ZT0hMDtoLnV1aWQ9Zy51dWlkO3ZvaWQgMCE9PWcubmFtZSYmKGgubmFtZT1nLm5hbWUpO3ZvaWQgMCE9PWcubWFwcGluZyYmKGgubWFwcGluZz1jKGcubWFwcGluZyxPZykpO3ZvaWQgMCE9PWcub2Zmc2V0JiZoLm9mZnNldC5mcm9tQXJyYXkoZy5vZmZzZXQpO3ZvaWQgMCE9PWcucmVwZWF0JiZoLnJlcGVhdC5mcm9tQXJyYXkoZy5yZXBlYXQpO3ZvaWQgMCE9PWcuY2VudGVyJiZoLmNlbnRlci5mcm9tQXJyYXkoZy5jZW50ZXIpO1xudm9pZCAwIT09Zy5yb3RhdGlvbiYmKGgucm90YXRpb249Zy5yb3RhdGlvbik7dm9pZCAwIT09Zy53cmFwJiYoaC53cmFwUz1jKGcud3JhcFswXSx5ZiksaC53cmFwVD1jKGcud3JhcFsxXSx5ZikpO3ZvaWQgMCE9PWcubWluRmlsdGVyJiYoaC5taW5GaWx0ZXI9YyhnLm1pbkZpbHRlcix6ZikpO3ZvaWQgMCE9PWcubWFnRmlsdGVyJiYoaC5tYWdGaWx0ZXI9YyhnLm1hZ0ZpbHRlcix6ZikpO3ZvaWQgMCE9PWcuYW5pc290cm9weSYmKGguYW5pc290cm9weT1nLmFuaXNvdHJvcHkpO3ZvaWQgMCE9PWcuZmxpcFkmJihoLmZsaXBZPWcuZmxpcFkpO2RbZy51dWlkXT1ofXJldHVybiBkfSxwYXJzZU9iamVjdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBPO3JldHVybiBmdW5jdGlvbihiLGMsZCl7ZnVuY3Rpb24gZShhKXt2b2lkIDA9PT1jW2FdJiZjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3RMb2FkZXI6IFVuZGVmaW5lZCBnZW9tZXRyeVwiLGEpO3JldHVybiBjW2FdfWZ1bmN0aW9uIGYoYSl7aWYodm9pZCAwIT09XG5hKXtpZihBcnJheS5pc0FycmF5KGEpKXtmb3IodmFyIGI9W10sYz0wLGU9YS5sZW5ndGg7YzxlO2MrKyl7dmFyIGY9YVtjXTt2b2lkIDA9PT1kW2ZdJiZjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3RMb2FkZXI6IFVuZGVmaW5lZCBtYXRlcmlhbFwiLGYpO2IucHVzaChkW2ZdKX1yZXR1cm4gYn12b2lkIDA9PT1kW2FdJiZjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3RMb2FkZXI6IFVuZGVmaW5lZCBtYXRlcmlhbFwiLGEpO3JldHVybiBkW2FdfX1zd2l0Y2goYi50eXBlKXtjYXNlIFwiU2NlbmVcIjp2YXIgZz1uZXcgdmQ7dm9pZCAwIT09Yi5iYWNrZ3JvdW5kJiZOdW1iZXIuaXNJbnRlZ2VyKGIuYmFja2dyb3VuZCkmJihnLmJhY2tncm91bmQ9bmV3IEgoYi5iYWNrZ3JvdW5kKSk7dm9pZCAwIT09Yi5mb2cmJihcIkZvZ1wiPT09Yi5mb2cudHlwZT9nLmZvZz1uZXcgUWIoYi5mb2cuY29sb3IsYi5mb2cubmVhcixiLmZvZy5mYXIpOlwiRm9nRXhwMlwiPT09Yi5mb2cudHlwZSYmKGcuZm9nPW5ldyBQYihiLmZvZy5jb2xvcixcbmIuZm9nLmRlbnNpdHkpKSk7YnJlYWs7Y2FzZSBcIlBlcnNwZWN0aXZlQ2FtZXJhXCI6Zz1uZXcgYmEoYi5mb3YsYi5hc3BlY3QsYi5uZWFyLGIuZmFyKTt2b2lkIDAhPT1iLmZvY3VzJiYoZy5mb2N1cz1iLmZvY3VzKTt2b2lkIDAhPT1iLnpvb20mJihnLnpvb209Yi56b29tKTt2b2lkIDAhPT1iLmZpbG1HYXVnZSYmKGcuZmlsbUdhdWdlPWIuZmlsbUdhdWdlKTt2b2lkIDAhPT1iLmZpbG1PZmZzZXQmJihnLmZpbG1PZmZzZXQ9Yi5maWxtT2Zmc2V0KTt2b2lkIDAhPT1iLnZpZXcmJihnLnZpZXc9T2JqZWN0LmFzc2lnbih7fSxiLnZpZXcpKTticmVhaztjYXNlIFwiT3J0aG9ncmFwaGljQ2FtZXJhXCI6Zz1uZXcgTGIoYi5sZWZ0LGIucmlnaHQsYi50b3AsYi5ib3R0b20sYi5uZWFyLGIuZmFyKTticmVhaztjYXNlIFwiQW1iaWVudExpZ2h0XCI6Zz1uZXcgSGQoYi5jb2xvcixiLmludGVuc2l0eSk7YnJlYWs7Y2FzZSBcIkRpcmVjdGlvbmFsTGlnaHRcIjpnPW5ldyBHZChiLmNvbG9yLGIuaW50ZW5zaXR5KTtcbmJyZWFrO2Nhc2UgXCJQb2ludExpZ2h0XCI6Zz1uZXcgRWQoYi5jb2xvcixiLmludGVuc2l0eSxiLmRpc3RhbmNlLGIuZGVjYXkpO2JyZWFrO2Nhc2UgXCJSZWN0QXJlYUxpZ2h0XCI6Zz1uZXcgSWQoYi5jb2xvcixiLmludGVuc2l0eSxiLndpZHRoLGIuaGVpZ2h0KTticmVhaztjYXNlIFwiU3BvdExpZ2h0XCI6Zz1uZXcgRGQoYi5jb2xvcixiLmludGVuc2l0eSxiLmRpc3RhbmNlLGIuYW5nbGUsYi5wZW51bWJyYSxiLmRlY2F5KTticmVhaztjYXNlIFwiSGVtaXNwaGVyZUxpZ2h0XCI6Zz1uZXcgQmQoYi5jb2xvcixiLmdyb3VuZENvbG9yLGIuaW50ZW5zaXR5KTticmVhaztjYXNlIFwiU2tpbm5lZE1lc2hcIjpjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3RMb2FkZXIucGFyc2VPYmplY3QoKSBkb2VzIG5vdCBzdXBwb3J0IFNraW5uZWRNZXNoIHlldC5cIik7Y2FzZSBcIk1lc2hcIjpnPWUoYi5nZW9tZXRyeSk7dmFyIGg9ZihiLm1hdGVyaWFsKTtnPWcuYm9uZXMmJjA8Zy5ib25lcy5sZW5ndGg/bmV3IHhkKGcsXG5oKTpuZXcgcmEoZyxoKTticmVhaztjYXNlIFwiTE9EXCI6Zz1uZXcgRGM7YnJlYWs7Y2FzZSBcIkxpbmVcIjpnPW5ldyBzYShlKGIuZ2VvbWV0cnkpLGYoYi5tYXRlcmlhbCksYi5tb2RlKTticmVhaztjYXNlIFwiTGluZUxvb3BcIjpnPW5ldyB5ZChlKGIuZ2VvbWV0cnkpLGYoYi5tYXRlcmlhbCkpO2JyZWFrO2Nhc2UgXCJMaW5lU2VnbWVudHNcIjpnPW5ldyBYKGUoYi5nZW9tZXRyeSksZihiLm1hdGVyaWFsKSk7YnJlYWs7Y2FzZSBcIlBvaW50Q2xvdWRcIjpjYXNlIFwiUG9pbnRzXCI6Zz1uZXcgUmIoZShiLmdlb21ldHJ5KSxmKGIubWF0ZXJpYWwpKTticmVhaztjYXNlIFwiU3ByaXRlXCI6Zz1uZXcgQ2MoZihiLm1hdGVyaWFsKSk7YnJlYWs7Y2FzZSBcIkdyb3VwXCI6Zz1uZXcgRmM7YnJlYWs7ZGVmYXVsdDpnPW5ldyB4fWcudXVpZD1iLnV1aWQ7dm9pZCAwIT09Yi5uYW1lJiYoZy5uYW1lPWIubmFtZSk7dm9pZCAwIT09Yi5tYXRyaXg/KGEuZnJvbUFycmF5KGIubWF0cml4KSxhLmRlY29tcG9zZShnLnBvc2l0aW9uLFxuZy5xdWF0ZXJuaW9uLGcuc2NhbGUpKToodm9pZCAwIT09Yi5wb3NpdGlvbiYmZy5wb3NpdGlvbi5mcm9tQXJyYXkoYi5wb3NpdGlvbiksdm9pZCAwIT09Yi5yb3RhdGlvbiYmZy5yb3RhdGlvbi5mcm9tQXJyYXkoYi5yb3RhdGlvbiksdm9pZCAwIT09Yi5xdWF0ZXJuaW9uJiZnLnF1YXRlcm5pb24uZnJvbUFycmF5KGIucXVhdGVybmlvbiksdm9pZCAwIT09Yi5zY2FsZSYmZy5zY2FsZS5mcm9tQXJyYXkoYi5zY2FsZSkpO3ZvaWQgMCE9PWIuY2FzdFNoYWRvdyYmKGcuY2FzdFNoYWRvdz1iLmNhc3RTaGFkb3cpO3ZvaWQgMCE9PWIucmVjZWl2ZVNoYWRvdyYmKGcucmVjZWl2ZVNoYWRvdz1iLnJlY2VpdmVTaGFkb3cpO2Iuc2hhZG93JiYodm9pZCAwIT09Yi5zaGFkb3cuYmlhcyYmKGcuc2hhZG93LmJpYXM9Yi5zaGFkb3cuYmlhcyksdm9pZCAwIT09Yi5zaGFkb3cucmFkaXVzJiYoZy5zaGFkb3cucmFkaXVzPWIuc2hhZG93LnJhZGl1cyksdm9pZCAwIT09Yi5zaGFkb3cubWFwU2l6ZSYmXG5nLnNoYWRvdy5tYXBTaXplLmZyb21BcnJheShiLnNoYWRvdy5tYXBTaXplKSx2b2lkIDAhPT1iLnNoYWRvdy5jYW1lcmEmJihnLnNoYWRvdy5jYW1lcmE9dGhpcy5wYXJzZU9iamVjdChiLnNoYWRvdy5jYW1lcmEpKSk7dm9pZCAwIT09Yi52aXNpYmxlJiYoZy52aXNpYmxlPWIudmlzaWJsZSk7dm9pZCAwIT09Yi51c2VyRGF0YSYmKGcudXNlckRhdGE9Yi51c2VyRGF0YSk7aWYodm9pZCAwIT09Yi5jaGlsZHJlbilmb3IodmFyIGg9Yi5jaGlsZHJlbixrPTA7azxoLmxlbmd0aDtrKyspZy5hZGQodGhpcy5wYXJzZU9iamVjdChoW2tdLGMsZCkpO2lmKFwiTE9EXCI9PT1iLnR5cGUpZm9yKGI9Yi5sZXZlbHMsaD0wO2g8Yi5sZW5ndGg7aCsrKXt2YXIgaz1iW2hdLG09Zy5nZXRPYmplY3RCeVByb3BlcnR5KFwidXVpZFwiLGsub2JqZWN0KTt2b2lkIDAhPT1tJiZnLmFkZExldmVsKG0say5kaXN0YW5jZSl9cmV0dXJuIGd9fSgpfSk7dmFyIE9nPXtVVk1hcHBpbmc6MzAwLEN1YmVSZWZsZWN0aW9uTWFwcGluZzozMDEsXG5DdWJlUmVmcmFjdGlvbk1hcHBpbmc6MzAyLEVxdWlyZWN0YW5ndWxhclJlZmxlY3Rpb25NYXBwaW5nOjMwMyxFcXVpcmVjdGFuZ3VsYXJSZWZyYWN0aW9uTWFwcGluZzozMDQsU3BoZXJpY2FsUmVmbGVjdGlvbk1hcHBpbmc6MzA1LEN1YmVVVlJlZmxlY3Rpb25NYXBwaW5nOjMwNixDdWJlVVZSZWZyYWN0aW9uTWFwcGluZzozMDd9LHlmPXtSZXBlYXRXcmFwcGluZzoxRTMsQ2xhbXBUb0VkZ2VXcmFwcGluZzoxMDAxLE1pcnJvcmVkUmVwZWF0V3JhcHBpbmc6MTAwMn0semY9e05lYXJlc3RGaWx0ZXI6MTAwMyxOZWFyZXN0TWlwTWFwTmVhcmVzdEZpbHRlcjoxMDA0LE5lYXJlc3RNaXBNYXBMaW5lYXJGaWx0ZXI6MTAwNSxMaW5lYXJGaWx0ZXI6MTAwNixMaW5lYXJNaXBNYXBOZWFyZXN0RmlsdGVyOjEwMDcsTGluZWFyTWlwTWFwTGluZWFyRmlsdGVyOjEwMDh9O25lLnByb3RvdHlwZT17Y29uc3RydWN0b3I6bmUsc2V0T3B0aW9uczpmdW5jdGlvbihhKXt0aGlzLm9wdGlvbnM9YTtyZXR1cm4gdGhpc30sXG5sb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZvaWQgMD09PWEmJihhPVwiXCIpO3ZvaWQgMCE9PXRoaXMucGF0aCYmKGE9dGhpcy5wYXRoK2EpO3ZhciBlPXRoaXMsZj1JYi5nZXQoYSk7aWYodm9pZCAwIT09ZilyZXR1cm4gZS5tYW5hZ2VyLml0ZW1TdGFydChhKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YiYmYihmKTtlLm1hbmFnZXIuaXRlbUVuZChhKX0sMCksZjtmZXRjaChhKS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBhLmJsb2IoKX0pLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGNyZWF0ZUltYWdlQml0bWFwKGEsZS5vcHRpb25zKX0pLnRoZW4oZnVuY3Rpb24oYyl7SWIuYWRkKGEsYyk7YiYmYihjKTtlLm1hbmFnZXIuaXRlbUVuZChhKX0pLmNhdGNoKGZ1bmN0aW9uKGIpe2QmJmQoYik7ZS5tYW5hZ2VyLml0ZW1FbmQoYSk7ZS5tYW5hZ2VyLml0ZW1FcnJvcihhKX0pfSxzZXRDcm9zc09yaWdpbjpmdW5jdGlvbigpe3JldHVybiB0aGlzfSxzZXRQYXRoOmZ1bmN0aW9uKGEpe3RoaXMucGF0aD1cbmE7cmV0dXJuIHRoaXN9fTtPYmplY3QuYXNzaWduKG9lLnByb3RvdHlwZSx7bW92ZVRvOmZ1bmN0aW9uKGEsYil7dGhpcy5jdXJyZW50UGF0aD1uZXcgU2E7dGhpcy5zdWJQYXRocy5wdXNoKHRoaXMuY3VycmVudFBhdGgpO3RoaXMuY3VycmVudFBhdGgubW92ZVRvKGEsYil9LGxpbmVUbzpmdW5jdGlvbihhLGIpe3RoaXMuY3VycmVudFBhdGgubGluZVRvKGEsYil9LHF1YWRyYXRpY0N1cnZlVG86ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5jdXJyZW50UGF0aC5xdWFkcmF0aWNDdXJ2ZVRvKGEsYixjLGQpfSxiZXppZXJDdXJ2ZVRvOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmN1cnJlbnRQYXRoLmJlemllckN1cnZlVG8oYSxiLGMsZCxlLGYpfSxzcGxpbmVUaHJ1OmZ1bmN0aW9uKGEpe3RoaXMuY3VycmVudFBhdGguc3BsaW5lVGhydShhKX0sdG9TaGFwZXM6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT1cbmFbY10sZj1uZXcgamI7Zi5jdXJ2ZXM9ZS5jdXJ2ZXM7Yi5wdXNoKGYpfXJldHVybiBifWZ1bmN0aW9uIGQoYSxiKXtmb3IodmFyIGM9Yi5sZW5ndGgsZD0hMSxlPWMtMSxmPTA7ZjxjO2U9ZisrKXt2YXIgZz1iW2VdLGg9YltmXSxrPWgueC1nLngsbT1oLnktZy55O2lmKE1hdGguYWJzKG0pPk51bWJlci5FUFNJTE9OKXtpZigwPm0mJihnPWJbZl0saz0tayxoPWJbZV0sbT0tbSksIShhLnk8Zy55fHxhLnk+aC55KSlpZihhLnk9PT1nLnkpe2lmKGEueD09PWcueClyZXR1cm4hMH1lbHNle2U9bSooYS54LWcueCktayooYS55LWcueSk7aWYoMD09PWUpcmV0dXJuITA7MD5lfHwoZD0hZCl9fWVsc2UgaWYoYS55PT09Zy55JiYoaC54PD1hLngmJmEueDw9Zy54fHxnLng8PWEueCYmYS54PD1oLngpKXJldHVybiEwfXJldHVybiBkfXZhciBlPSRhLmlzQ2xvY2tXaXNlLGY9dGhpcy5zdWJQYXRocztpZigwPT09Zi5sZW5ndGgpcmV0dXJuW107aWYoITA9PT1iKXJldHVybiBjKGYpO2I9W107aWYoMT09PVxuZi5sZW5ndGgpe3ZhciBnPWZbMF07dmFyIGg9bmV3IGpiO2guY3VydmVzPWcuY3VydmVzO2IucHVzaChoKTtyZXR1cm4gYn12YXIgaz0hZShmWzBdLmdldFBvaW50cygpKSxrPWE/IWs6aztoPVtdO3ZhciBtPVtdLGw9W10sbj0wO21bbl09dm9pZCAwO2xbbl09W107Zm9yKHZhciBwPTAscj1mLmxlbmd0aDtwPHI7cCsrKXtnPWZbcF07dmFyIHQ9Zy5nZXRQb2ludHMoKTt2YXIgdj1lKHQpOyh2PWE/IXY6dik/KCFrJiZtW25dJiZuKyssbVtuXT17czpuZXcgamIscDp0fSxtW25dLnMuY3VydmVzPWcuY3VydmVzLGsmJm4rKyxsW25dPVtdKTpsW25dLnB1c2goe2g6ZyxwOnRbMF19KX1pZighbVswXSlyZXR1cm4gYyhmKTtpZigxPG0ubGVuZ3RoKXtwPSExO2E9W107ZT0wO2ZvcihmPW0ubGVuZ3RoO2U8ZjtlKyspaFtlXT1bXTtlPTA7Zm9yKGY9bS5sZW5ndGg7ZTxmO2UrKylmb3IoZz1sW2VdLHY9MDt2PGcubGVuZ3RoO3YrKyl7az1nW3ZdO249ITA7Zm9yKHQ9MDt0PG0ubGVuZ3RoO3QrKylkKGsucCxcbm1bdF0ucCkmJihlIT09dCYmYS5wdXNoKHtmcm9tczplLHRvczp0LGhvbGU6dn0pLG4/KG49ITEsaFt0XS5wdXNoKGspKTpwPSEwKTtuJiZoW2VdLnB1c2goayl9MDxhLmxlbmd0aCYmKHB8fChsPWgpKX1wPTA7Zm9yKGU9bS5sZW5ndGg7cDxlO3ArKylmb3IoaD1tW3BdLnMsYi5wdXNoKGgpLGE9bFtwXSxmPTAsZz1hLmxlbmd0aDtmPGc7ZisrKWguaG9sZXMucHVzaChhW2ZdLmgpO3JldHVybiBifX0pO09iamVjdC5hc3NpZ24ocGUucHJvdG90eXBlLHtpc0ZvbnQ6ITAsZ2VuZXJhdGVTaGFwZXM6ZnVuY3Rpb24oYSxiLGMpe3ZvaWQgMD09PWImJihiPTEwMCk7Yz10aGlzLmRhdGE7YT1TdHJpbmcoYSkuc3BsaXQoXCJcIik7dmFyIGQ9Yi9jLnJlc29sdXRpb24sZT0oYy5ib3VuZGluZ0JveC55TWF4LWMuYm91bmRpbmdCb3gueU1pbitjLnVuZGVybGluZVRoaWNrbmVzcykqZCxmPTAsZz0wO2I9W107Zm9yKHZhciBoPTA7aDxhLmxlbmd0aDtoKyspe3ZhciBrPWFbaF07aWYoXCJcXG5cIj09PWspZj1cbjAsZy09ZTtlbHNle3ZhciBtPWQ7dmFyIGw9ZixuPWc7aWYoaz1jLmdseXBoc1trXXx8Yy5nbHlwaHNbXCI/XCJdKXt2YXIgcD1uZXcgb2U7aWYoay5vKWZvcih2YXIgcj1rLl9jYWNoZWRPdXRsaW5lfHwoay5fY2FjaGVkT3V0bGluZT1rLm8uc3BsaXQoXCIgXCIpKSx0PTAsdj1yLmxlbmd0aDt0PHY7KXN3aXRjaChyW3QrK10pe2Nhc2UgXCJtXCI6dmFyIHc9clt0KytdKm0rbDt2YXIgeD1yW3QrK10qbStuO3AubW92ZVRvKHcseCk7YnJlYWs7Y2FzZSBcImxcIjp3PXJbdCsrXSptK2w7eD1yW3QrK10qbStuO3AubGluZVRvKHcseCk7YnJlYWs7Y2FzZSBcInFcIjp2YXIgeT1yW3QrK10qbStsO3ZhciBCPXJbdCsrXSptK247dmFyIEE9clt0KytdKm0rbDt2YXIgQz1yW3QrK10qbStuO3AucXVhZHJhdGljQ3VydmVUbyhBLEMseSxCKTticmVhaztjYXNlIFwiYlwiOnk9clt0KytdKm0rbCxCPXJbdCsrXSptK24sQT1yW3QrK10qbStsLEM9clt0KytdKm0rbix3PXJbdCsrXSptK2wseD1yW3QrK10qbStuLHAuYmV6aWVyQ3VydmVUbyhBLFxuQyx3LHgseSxCKX1tPXtvZmZzZXRYOmsuaGEqbSxwYXRoOnB9fWVsc2UgbT12b2lkIDA7Zis9bS5vZmZzZXRYO2IucHVzaChtLnBhdGgpfX1jPVtdO2E9MDtmb3IoZD1iLmxlbmd0aDthPGQ7YSsrKUFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGMsYlthXS50b1NoYXBlcygpKTtyZXR1cm4gY319KTtPYmplY3QuYXNzaWduKGtmLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLGY9bmV3IE5hKHRoaXMubWFuYWdlcik7Zi5zZXRQYXRoKHRoaXMucGF0aCk7Zi5sb2FkKGEsZnVuY3Rpb24oYSl7dHJ5e3ZhciBjPUpTT04ucGFyc2UoYSl9Y2F0Y2goayl7Y29uc29sZS53YXJuKFwiVEhSRUUuRm9udExvYWRlcjogdHlwZWZhY2UuanMgc3VwcG9ydCBpcyBiZWluZyBkZXByZWNhdGVkLiBVc2UgdHlwZWZhY2UuanNvbiBpbnN0ZWFkLlwiKSxjPUpTT04ucGFyc2UoYS5zdWJzdHJpbmcoNjUsYS5sZW5ndGgtMikpfWE9ZS5wYXJzZShjKTtiJiZiKGEpfSxjLGQpfSxcbnBhcnNlOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgcGUoYSl9LHNldFBhdGg6ZnVuY3Rpb24oYSl7dGhpcy5wYXRoPWE7cmV0dXJuIHRoaXN9fSk7dmFyIFVkLHNlPXtnZXRDb250ZXh0OmZ1bmN0aW9uKCl7dm9pZCAwPT09VWQmJihVZD1uZXcgKHdpbmRvdy5BdWRpb0NvbnRleHR8fHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQpKTtyZXR1cm4gVWR9LHNldENvbnRleHQ6ZnVuY3Rpb24oYSl7VWQ9YX19O09iamVjdC5hc3NpZ24ocWUucHJvdG90eXBlLHtsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW5ldyBOYSh0aGlzLm1hbmFnZXIpO2Uuc2V0UmVzcG9uc2VUeXBlKFwiYXJyYXlidWZmZXJcIik7ZS5sb2FkKGEsZnVuY3Rpb24oYSl7c2UuZ2V0Q29udGV4dCgpLmRlY29kZUF1ZGlvRGF0YShhLGZ1bmN0aW9uKGEpe2IoYSl9KX0sYyxkKX19KTtPYmplY3QuYXNzaWduKGxmLnByb3RvdHlwZSx7dXBkYXRlOmZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZSxmLGcsaCxrPW5ldyBPLG09bmV3IE87XG5yZXR1cm4gZnVuY3Rpb24obCl7aWYoYSE9PXRoaXN8fGIhPT1sLmZvY3VzfHxjIT09bC5mb3Z8fGQhPT1sLmFzcGVjdCp0aGlzLmFzcGVjdHx8ZSE9PWwubmVhcnx8ZiE9PWwuZmFyfHxnIT09bC56b29tfHxoIT09dGhpcy5leWVTZXApe2E9dGhpcztiPWwuZm9jdXM7Yz1sLmZvdjtkPWwuYXNwZWN0KnRoaXMuYXNwZWN0O2U9bC5uZWFyO2Y9bC5mYXI7Zz1sLnpvb207dmFyIG49bC5wcm9qZWN0aW9uTWF0cml4LmNsb25lKCk7aD10aGlzLmV5ZVNlcC8yO3ZhciBwPWgqZS9iLHE9ZSpNYXRoLnRhbihRLkRFRzJSQUQqYyouNSkvZzttLmVsZW1lbnRzWzEyXT0taDtrLmVsZW1lbnRzWzEyXT1oO3ZhciB0PS1xKmQrcDt2YXIgdj1xKmQrcDtuLmVsZW1lbnRzWzBdPTIqZS8odi10KTtuLmVsZW1lbnRzWzhdPSh2K3QpLyh2LXQpO3RoaXMuY2FtZXJhTC5wcm9qZWN0aW9uTWF0cml4LmNvcHkobik7dD0tcSpkLXA7dj1xKmQtcDtuLmVsZW1lbnRzWzBdPTIqZS8odi10KTtuLmVsZW1lbnRzWzhdPVxuKHYrdCkvKHYtdCk7dGhpcy5jYW1lcmFSLnByb2plY3Rpb25NYXRyaXguY29weShuKX10aGlzLmNhbWVyYUwubWF0cml4V29ybGQuY29weShsLm1hdHJpeFdvcmxkKS5tdWx0aXBseShtKTt0aGlzLmNhbWVyYVIubWF0cml4V29ybGQuY29weShsLm1hdHJpeFdvcmxkKS5tdWx0aXBseShrKX19KCl9KTtmZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSk7ZmQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWZkO3JlLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpyZSxnZXRJbnB1dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdhaW59LHJlbW92ZUZpbHRlcjpmdW5jdGlvbigpe251bGwhPT10aGlzLmZpbHRlciYmKHRoaXMuZ2Fpbi5kaXNjb25uZWN0KHRoaXMuZmlsdGVyKSx0aGlzLmZpbHRlci5kaXNjb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbiksdGhpcy5nYWluLmNvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKSxcbnRoaXMuZmlsdGVyPW51bGwpfSxnZXRGaWx0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWx0ZXJ9LHNldEZpbHRlcjpmdW5jdGlvbihhKXtudWxsIT09dGhpcy5maWx0ZXI/KHRoaXMuZ2Fpbi5kaXNjb25uZWN0KHRoaXMuZmlsdGVyKSx0aGlzLmZpbHRlci5kaXNjb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbikpOnRoaXMuZ2Fpbi5kaXNjb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbik7dGhpcy5maWx0ZXI9YTt0aGlzLmdhaW4uY29ubmVjdCh0aGlzLmZpbHRlcik7dGhpcy5maWx0ZXIuY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pfSxnZXRNYXN0ZXJWb2x1bWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nYWluLmdhaW4udmFsdWV9LHNldE1hc3RlclZvbHVtZTpmdW5jdGlvbihhKXt0aGlzLmdhaW4uZ2Fpbi52YWx1ZT1hfSx1cGRhdGVNYXRyaXhXb3JsZDpmdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI9bmV3IGhhLGM9bmV3IHAsZD1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oZSl7eC5wcm90b3R5cGUudXBkYXRlTWF0cml4V29ybGQuY2FsbCh0aGlzLFxuZSk7ZT10aGlzLmNvbnRleHQubGlzdGVuZXI7dmFyIGY9dGhpcy51cDt0aGlzLm1hdHJpeFdvcmxkLmRlY29tcG9zZShhLGIsYyk7ZC5zZXQoMCwwLC0xKS5hcHBseVF1YXRlcm5pb24oYik7ZS5wb3NpdGlvblg/KGUucG9zaXRpb25YLnNldFZhbHVlQXRUaW1lKGEueCx0aGlzLmNvbnRleHQuY3VycmVudFRpbWUpLGUucG9zaXRpb25ZLnNldFZhbHVlQXRUaW1lKGEueSx0aGlzLmNvbnRleHQuY3VycmVudFRpbWUpLGUucG9zaXRpb25aLnNldFZhbHVlQXRUaW1lKGEueix0aGlzLmNvbnRleHQuY3VycmVudFRpbWUpLGUuZm9yd2FyZFguc2V0VmFsdWVBdFRpbWUoZC54LHRoaXMuY29udGV4dC5jdXJyZW50VGltZSksZS5mb3J3YXJkWS5zZXRWYWx1ZUF0VGltZShkLnksdGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lKSxlLmZvcndhcmRaLnNldFZhbHVlQXRUaW1lKGQueix0aGlzLmNvbnRleHQuY3VycmVudFRpbWUpLGUudXBYLnNldFZhbHVlQXRUaW1lKGYueCx0aGlzLmNvbnRleHQuY3VycmVudFRpbWUpLFxuZS51cFkuc2V0VmFsdWVBdFRpbWUoZi55LHRoaXMuY29udGV4dC5jdXJyZW50VGltZSksZS51cFouc2V0VmFsdWVBdFRpbWUoZi56LHRoaXMuY29udGV4dC5jdXJyZW50VGltZSkpOihlLnNldFBvc2l0aW9uKGEueCxhLnksYS56KSxlLnNldE9yaWVudGF0aW9uKGQueCxkLnksZC56LGYueCxmLnksZi56KSl9fSgpfSk7bGMucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmxjLGdldE91dHB1dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdhaW59LHNldE5vZGVTb3VyY2U6ZnVuY3Rpb24oYSl7dGhpcy5oYXNQbGF5YmFja0NvbnRyb2w9ITE7dGhpcy5zb3VyY2VUeXBlPVwiYXVkaW9Ob2RlXCI7dGhpcy5zb3VyY2U9YTt0aGlzLmNvbm5lY3QoKTtyZXR1cm4gdGhpc30sc2V0QnVmZmVyOmZ1bmN0aW9uKGEpe3RoaXMuYnVmZmVyPWE7dGhpcy5zb3VyY2VUeXBlPVwiYnVmZmVyXCI7dGhpcy5hdXRvcGxheSYmdGhpcy5wbGF5KCk7cmV0dXJuIHRoaXN9LFxucGxheTpmdW5jdGlvbigpe2lmKCEwPT09dGhpcy5pc1BsYXlpbmcpY29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IEF1ZGlvIGlzIGFscmVhZHkgcGxheWluZy5cIik7ZWxzZSBpZighMT09PXRoaXMuaGFzUGxheWJhY2tDb250cm9sKWNvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiB0aGlzIEF1ZGlvIGhhcyBubyBwbGF5YmFjayBjb250cm9sLlwiKTtlbHNle3ZhciBhPXRoaXMuY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTthLmJ1ZmZlcj10aGlzLmJ1ZmZlcjthLmxvb3A9dGhpcy5sb29wO2Eub25lbmRlZD10aGlzLm9uRW5kZWQuYmluZCh0aGlzKTthLnBsYXliYWNrUmF0ZS5zZXRWYWx1ZUF0VGltZSh0aGlzLnBsYXliYWNrUmF0ZSx0aGlzLnN0YXJ0VGltZSk7dGhpcy5zdGFydFRpbWU9dGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lO2Euc3RhcnQodGhpcy5zdGFydFRpbWUsdGhpcy5vZmZzZXQpO3RoaXMuaXNQbGF5aW5nPSEwO3RoaXMuc291cmNlPWE7cmV0dXJuIHRoaXMuY29ubmVjdCgpfX0sXG5wYXVzZTpmdW5jdGlvbigpe2lmKCExPT09dGhpcy5oYXNQbGF5YmFja0NvbnRyb2wpY29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IHRoaXMgQXVkaW8gaGFzIG5vIHBsYXliYWNrIGNvbnRyb2wuXCIpO2Vsc2UgcmV0dXJuITA9PT10aGlzLmlzUGxheWluZyYmKHRoaXMuc291cmNlLnN0b3AoKSx0aGlzLm9mZnNldCs9KHRoaXMuY29udGV4dC5jdXJyZW50VGltZS10aGlzLnN0YXJ0VGltZSkqdGhpcy5wbGF5YmFja1JhdGUsdGhpcy5pc1BsYXlpbmc9ITEpLHRoaXN9LHN0b3A6ZnVuY3Rpb24oKXtpZighMT09PXRoaXMuaGFzUGxheWJhY2tDb250cm9sKWNvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiB0aGlzIEF1ZGlvIGhhcyBubyBwbGF5YmFjayBjb250cm9sLlwiKTtlbHNlIHJldHVybiB0aGlzLnNvdXJjZS5zdG9wKCksdGhpcy5vZmZzZXQ9MCx0aGlzLmlzUGxheWluZz0hMSx0aGlzfSxjb25uZWN0OmZ1bmN0aW9uKCl7aWYoMDx0aGlzLmZpbHRlcnMubGVuZ3RoKXt0aGlzLnNvdXJjZS5jb25uZWN0KHRoaXMuZmlsdGVyc1swXSk7XG5mb3IodmFyIGE9MSxiPXRoaXMuZmlsdGVycy5sZW5ndGg7YTxiO2ErKyl0aGlzLmZpbHRlcnNbYS0xXS5jb25uZWN0KHRoaXMuZmlsdGVyc1thXSk7dGhpcy5maWx0ZXJzW3RoaXMuZmlsdGVycy5sZW5ndGgtMV0uY29ubmVjdCh0aGlzLmdldE91dHB1dCgpKX1lbHNlIHRoaXMuc291cmNlLmNvbm5lY3QodGhpcy5nZXRPdXRwdXQoKSk7cmV0dXJuIHRoaXN9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXtpZigwPHRoaXMuZmlsdGVycy5sZW5ndGgpe3RoaXMuc291cmNlLmRpc2Nvbm5lY3QodGhpcy5maWx0ZXJzWzBdKTtmb3IodmFyIGE9MSxiPXRoaXMuZmlsdGVycy5sZW5ndGg7YTxiO2ErKyl0aGlzLmZpbHRlcnNbYS0xXS5kaXNjb25uZWN0KHRoaXMuZmlsdGVyc1thXSk7dGhpcy5maWx0ZXJzW3RoaXMuZmlsdGVycy5sZW5ndGgtMV0uZGlzY29ubmVjdCh0aGlzLmdldE91dHB1dCgpKX1lbHNlIHRoaXMuc291cmNlLmRpc2Nvbm5lY3QodGhpcy5nZXRPdXRwdXQoKSk7cmV0dXJuIHRoaXN9LFxuZ2V0RmlsdGVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbHRlcnN9LHNldEZpbHRlcnM6ZnVuY3Rpb24oYSl7YXx8KGE9W10pOyEwPT09dGhpcy5pc1BsYXlpbmc/KHRoaXMuZGlzY29ubmVjdCgpLHRoaXMuZmlsdGVycz1hLHRoaXMuY29ubmVjdCgpKTp0aGlzLmZpbHRlcnM9YTtyZXR1cm4gdGhpc30sZ2V0RmlsdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RmlsdGVycygpWzBdfSxzZXRGaWx0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc2V0RmlsdGVycyhhP1thXTpbXSl9LHNldFBsYXliYWNrUmF0ZTpmdW5jdGlvbihhKXtpZighMT09PXRoaXMuaGFzUGxheWJhY2tDb250cm9sKWNvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiB0aGlzIEF1ZGlvIGhhcyBubyBwbGF5YmFjayBjb250cm9sLlwiKTtlbHNlIHJldHVybiB0aGlzLnBsYXliYWNrUmF0ZT1hLCEwPT09dGhpcy5pc1BsYXlpbmcmJnRoaXMuc291cmNlLnBsYXliYWNrUmF0ZS5zZXRWYWx1ZUF0VGltZSh0aGlzLnBsYXliYWNrUmF0ZSxcbnRoaXMuY29udGV4dC5jdXJyZW50VGltZSksdGhpc30sZ2V0UGxheWJhY2tSYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGxheWJhY2tSYXRlfSxvbkVuZGVkOmZ1bmN0aW9uKCl7dGhpcy5pc1BsYXlpbmc9ITF9LGdldExvb3A6ZnVuY3Rpb24oKXtyZXR1cm4hMT09PXRoaXMuaGFzUGxheWJhY2tDb250cm9sPyhjb25zb2xlLndhcm4oXCJUSFJFRS5BdWRpbzogdGhpcyBBdWRpbyBoYXMgbm8gcGxheWJhY2sgY29udHJvbC5cIiksITEpOnRoaXMubG9vcH0sc2V0TG9vcDpmdW5jdGlvbihhKXtpZighMT09PXRoaXMuaGFzUGxheWJhY2tDb250cm9sKWNvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiB0aGlzIEF1ZGlvIGhhcyBubyBwbGF5YmFjayBjb250cm9sLlwiKTtlbHNlIHJldHVybiB0aGlzLmxvb3A9YSwhMD09PXRoaXMuaXNQbGF5aW5nJiYodGhpcy5zb3VyY2UubG9vcD10aGlzLmxvb3ApLHRoaXN9LGdldFZvbHVtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdhaW4uZ2Fpbi52YWx1ZX0sXG5zZXRWb2x1bWU6ZnVuY3Rpb24oYSl7dGhpcy5nYWluLmdhaW4udmFsdWU9YTtyZXR1cm4gdGhpc319KTt0ZS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGxjLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnRlLGdldE91dHB1dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhbm5lcn0sZ2V0UmVmRGlzdGFuY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYW5uZXIucmVmRGlzdGFuY2V9LHNldFJlZkRpc3RhbmNlOmZ1bmN0aW9uKGEpe3RoaXMucGFubmVyLnJlZkRpc3RhbmNlPWF9LGdldFJvbGxvZmZGYWN0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYW5uZXIucm9sbG9mZkZhY3Rvcn0sc2V0Um9sbG9mZkZhY3RvcjpmdW5jdGlvbihhKXt0aGlzLnBhbm5lci5yb2xsb2ZmRmFjdG9yPWF9LGdldERpc3RhbmNlTW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYW5uZXIuZGlzdGFuY2VNb2RlbH0sc2V0RGlzdGFuY2VNb2RlbDpmdW5jdGlvbihhKXt0aGlzLnBhbm5lci5kaXN0YW5jZU1vZGVsPVxuYX0sZ2V0TWF4RGlzdGFuY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYW5uZXIubWF4RGlzdGFuY2V9LHNldE1heERpc3RhbmNlOmZ1bmN0aW9uKGEpe3RoaXMucGFubmVyLm1heERpc3RhbmNlPWF9LHVwZGF0ZU1hdHJpeFdvcmxkOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGIpe3gucHJvdG90eXBlLnVwZGF0ZU1hdHJpeFdvcmxkLmNhbGwodGhpcyxiKTthLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLm1hdHJpeFdvcmxkKTt0aGlzLnBhbm5lci5zZXRQb3NpdGlvbihhLngsYS55LGEueil9fSgpfSk7T2JqZWN0LmFzc2lnbih1ZS5wcm90b3R5cGUse2dldEZyZXF1ZW5jeURhdGE6ZnVuY3Rpb24oKXt0aGlzLmFuYWx5c2VyLmdldEJ5dGVGcmVxdWVuY3lEYXRhKHRoaXMuZGF0YSk7cmV0dXJuIHRoaXMuZGF0YX0sZ2V0QXZlcmFnZUZyZXF1ZW5jeTpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9dGhpcy5nZXRGcmVxdWVuY3lEYXRhKCksYz0wO2M8Yi5sZW5ndGg7YysrKWErPVxuYltjXTtyZXR1cm4gYS9iLmxlbmd0aH19KTtPYmplY3QuYXNzaWduKHZlLnByb3RvdHlwZSx7YWNjdW11bGF0ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYnVmZmVyLGQ9dGhpcy52YWx1ZVNpemU7YT1hKmQrZDt2YXIgZT10aGlzLmN1bXVsYXRpdmVXZWlnaHQ7aWYoMD09PWUpe2ZvcihlPTA7ZSE9PWQ7KytlKWNbYStlXT1jW2VdO2U9Yn1lbHNlIGUrPWIsdGhpcy5fbWl4QnVmZmVyUmVnaW9uKGMsYSwwLGIvZSxkKTt0aGlzLmN1bXVsYXRpdmVXZWlnaHQ9ZX0sYXBwbHk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy52YWx1ZVNpemUsYz10aGlzLmJ1ZmZlcjthPWEqYitiO3ZhciBkPXRoaXMuY3VtdWxhdGl2ZVdlaWdodCxlPXRoaXMuYmluZGluZzt0aGlzLmN1bXVsYXRpdmVXZWlnaHQ9MDsxPmQmJnRoaXMuX21peEJ1ZmZlclJlZ2lvbihjLGEsMypiLDEtZCxiKTtmb3IodmFyIGQ9YixmPWIrYjtkIT09ZjsrK2QpaWYoY1tkXSE9PWNbZCtiXSl7ZS5zZXRWYWx1ZShjLGEpO2JyZWFrfX0sXG5zYXZlT3JpZ2luYWxTdGF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuYnVmZmVyLGI9dGhpcy52YWx1ZVNpemUsYz0zKmI7dGhpcy5iaW5kaW5nLmdldFZhbHVlKGEsYyk7Zm9yKHZhciBkPWI7ZCE9PWM7KytkKWFbZF09YVtjK2QlYl07dGhpcy5jdW11bGF0aXZlV2VpZ2h0PTB9LHJlc3RvcmVPcmlnaW5hbFN0YXRlOmZ1bmN0aW9uKCl7dGhpcy5iaW5kaW5nLnNldFZhbHVlKHRoaXMuYnVmZmVyLDMqdGhpcy52YWx1ZVNpemUpfSxfc2VsZWN0OmZ1bmN0aW9uKGEsYixjLGQsZSl7aWYoLjU8PWQpZm9yKGQ9MDtkIT09ZTsrK2QpYVtiK2RdPWFbYytkXX0sX3NsZXJwOmZ1bmN0aW9uKGEsYixjLGQpe2hhLnNsZXJwRmxhdChhLGIsYSxiLGEsYyxkKX0sX2xlcnA6ZnVuY3Rpb24oYSxiLGMsZCxlKXtmb3IodmFyIGY9MS1kLGc9MDtnIT09ZTsrK2cpe3ZhciBoPWIrZzthW2hdPWFbaF0qZithW2MrZ10qZH19fSk7T2JqZWN0LmFzc2lnbihtZi5wcm90b3R5cGUse2dldFZhbHVlOmZ1bmN0aW9uKGEsXG5iKXt0aGlzLmJpbmQoKTt2YXIgYz10aGlzLl9iaW5kaW5nc1t0aGlzLl90YXJnZXRHcm91cC5uQ2FjaGVkT2JqZWN0c19dO3ZvaWQgMCE9PWMmJmMuZ2V0VmFsdWUoYSxiKX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5fYmluZGluZ3MsZD10aGlzLl90YXJnZXRHcm91cC5uQ2FjaGVkT2JqZWN0c18sZT1jLmxlbmd0aDtkIT09ZTsrK2QpY1tkXS5zZXRWYWx1ZShhLGIpfSxiaW5kOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuX2JpbmRpbmdzLGI9dGhpcy5fdGFyZ2V0R3JvdXAubkNhY2hlZE9iamVjdHNfLGM9YS5sZW5ndGg7YiE9PWM7KytiKWFbYl0uYmluZCgpfSx1bmJpbmQ6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5fYmluZGluZ3MsYj10aGlzLl90YXJnZXRHcm91cC5uQ2FjaGVkT2JqZWN0c18sYz1hLmxlbmd0aDtiIT09YzsrK2IpYVtiXS51bmJpbmQoKX19KTtPYmplY3QuYXNzaWduKHFhLHtDb21wb3NpdGU6bWYsY3JlYXRlOmZ1bmN0aW9uKGEsXG5iLGMpe3JldHVybiBhJiZhLmlzQW5pbWF0aW9uT2JqZWN0R3JvdXA/bmV3IHFhLkNvbXBvc2l0ZShhLGIsYyk6bmV3IHFhKGEsYixjKX0sc2FuaXRpemVOb2RlTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKC9cXHMvZyxcIl9cIikucmVwbGFjZSgvW15cXHctXS9nLFwiXCIpfSxwYXJzZVRyYWNrTmFtZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBSZWdFeHAoXCJeXCIrLygoPzpbXFx3LV0rW1xcLzpdKSopLy5zb3VyY2UrLyhbXFx3LVxcLl0rKT8vLnNvdXJjZSsvKD86XFwuKFtcXHctXSspKD86XFxbKC4rKVxcXSk/KT8vLnNvdXJjZSsvXFwuKFtcXHctXSspKD86XFxbKC4rKVxcXSk/Ly5zb3VyY2UrXCIkXCIpLGI9W1wibWF0ZXJpYWxcIixcIm1hdGVyaWFsc1wiLFwiYm9uZXNcIl07cmV0dXJuIGZ1bmN0aW9uKGMpe3ZhciBkPWEuZXhlYyhjKTtpZighZCl0aHJvdyBFcnJvcihcIlByb3BlcnR5QmluZGluZzogQ2Fubm90IHBhcnNlIHRyYWNrTmFtZTogXCIrYyk7dmFyIGQ9e25vZGVOYW1lOmRbMl0sb2JqZWN0TmFtZTpkWzNdLFxub2JqZWN0SW5kZXg6ZFs0XSxwcm9wZXJ0eU5hbWU6ZFs1XSxwcm9wZXJ0eUluZGV4OmRbNl19LGU9ZC5ub2RlTmFtZSYmZC5ub2RlTmFtZS5sYXN0SW5kZXhPZihcIi5cIik7aWYodm9pZCAwIT09ZSYmLTEhPT1lKXt2YXIgZj1kLm5vZGVOYW1lLnN1YnN0cmluZyhlKzEpOy0xIT09Yi5pbmRleE9mKGYpJiYoZC5ub2RlTmFtZT1kLm5vZGVOYW1lLnN1YnN0cmluZygwLGUpLGQub2JqZWN0TmFtZT1mKX1pZihudWxsPT09ZC5wcm9wZXJ0eU5hbWV8fDA9PT1kLnByb3BlcnR5TmFtZS5sZW5ndGgpdGhyb3cgRXJyb3IoXCJQcm9wZXJ0eUJpbmRpbmc6IGNhbiBub3QgcGFyc2UgcHJvcGVydHlOYW1lIGZyb20gdHJhY2tOYW1lOiBcIitjKTtyZXR1cm4gZH19KCksZmluZE5vZGU6ZnVuY3Rpb24oYSxiKXtpZighYnx8XCJcIj09PWJ8fFwicm9vdFwiPT09Ynx8XCIuXCI9PT1ifHwtMT09PWJ8fGI9PT1hLm5hbWV8fGI9PT1hLnV1aWQpcmV0dXJuIGE7aWYoYS5za2VsZXRvbil7dmFyIGM9ZnVuY3Rpb24oYSl7Zm9yKHZhciBjPVxuMDtjPGEuYm9uZXMubGVuZ3RoO2MrKyl7dmFyIGQ9YS5ib25lc1tjXTtpZihkLm5hbWU9PT1iKXJldHVybiBkfXJldHVybiBudWxsfShhLnNrZWxldG9uKTtpZihjKXJldHVybiBjfWlmKGEuY2hpbGRyZW4pe3ZhciBkPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZT1hW2NdO2lmKGUubmFtZT09PWJ8fGUudXVpZD09PWJ8fChlPWQoZS5jaGlsZHJlbikpKXJldHVybiBlfXJldHVybiBudWxsfTtpZihhPWQoYS5jaGlsZHJlbikpcmV0dXJuIGF9cmV0dXJuIG51bGx9fSk7T2JqZWN0LmFzc2lnbihxYS5wcm90b3R5cGUse19nZXRWYWx1ZV91bmF2YWlsYWJsZTpmdW5jdGlvbigpe30sX3NldFZhbHVlX3VuYXZhaWxhYmxlOmZ1bmN0aW9uKCl7fSxCaW5kaW5nVHlwZTp7RGlyZWN0OjAsRW50aXJlQXJyYXk6MSxBcnJheUVsZW1lbnQ6MixIYXNGcm9tVG9BcnJheTozfSxWZXJzaW9uaW5nOntOb25lOjAsTmVlZHNVcGRhdGU6MSxNYXRyaXhXb3JsZE5lZWRzVXBkYXRlOjJ9LFxuR2V0dGVyQnlCaW5kaW5nVHlwZTpbZnVuY3Rpb24oYSxiKXthW2JdPXRoaXMubm9kZVt0aGlzLnByb3BlcnR5TmFtZV19LGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMucmVzb2x2ZWRQcm9wZXJ0eSxkPTAsZT1jLmxlbmd0aDtkIT09ZTsrK2QpYVtiKytdPWNbZF19LGZ1bmN0aW9uKGEsYil7YVtiXT10aGlzLnJlc29sdmVkUHJvcGVydHlbdGhpcy5wcm9wZXJ0eUluZGV4XX0sZnVuY3Rpb24oYSxiKXt0aGlzLnJlc29sdmVkUHJvcGVydHkudG9BcnJheShhLGIpfV0sU2V0dGVyQnlCaW5kaW5nVHlwZUFuZFZlcnNpb25pbmc6W1tmdW5jdGlvbihhLGIpe3RoaXMudGFyZ2V0T2JqZWN0W3RoaXMucHJvcGVydHlOYW1lXT1hW2JdfSxmdW5jdGlvbihhLGIpe3RoaXMudGFyZ2V0T2JqZWN0W3RoaXMucHJvcGVydHlOYW1lXT1hW2JdO3RoaXMudGFyZ2V0T2JqZWN0Lm5lZWRzVXBkYXRlPSEwfSxmdW5jdGlvbihhLGIpe3RoaXMudGFyZ2V0T2JqZWN0W3RoaXMucHJvcGVydHlOYW1lXT1hW2JdO1xudGhpcy50YXJnZXRPYmplY3QubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMH1dLFtmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLnJlc29sdmVkUHJvcGVydHksZD0wLGU9Yy5sZW5ndGg7ZCE9PWU7KytkKWNbZF09YVtiKytdfSxmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLnJlc29sdmVkUHJvcGVydHksZD0wLGU9Yy5sZW5ndGg7ZCE9PWU7KytkKWNbZF09YVtiKytdO3RoaXMudGFyZ2V0T2JqZWN0Lm5lZWRzVXBkYXRlPSEwfSxmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLnJlc29sdmVkUHJvcGVydHksZD0wLGU9Yy5sZW5ndGg7ZCE9PWU7KytkKWNbZF09YVtiKytdO3RoaXMudGFyZ2V0T2JqZWN0Lm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITB9XSxbZnVuY3Rpb24oYSxiKXt0aGlzLnJlc29sdmVkUHJvcGVydHlbdGhpcy5wcm9wZXJ0eUluZGV4XT1hW2JdfSxmdW5jdGlvbihhLGIpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eVt0aGlzLnByb3BlcnR5SW5kZXhdPWFbYl07XG50aGlzLnRhcmdldE9iamVjdC5uZWVkc1VwZGF0ZT0hMH0sZnVuY3Rpb24oYSxiKXt0aGlzLnJlc29sdmVkUHJvcGVydHlbdGhpcy5wcm9wZXJ0eUluZGV4XT1hW2JdO3RoaXMudGFyZ2V0T2JqZWN0Lm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITB9XSxbZnVuY3Rpb24oYSxiKXt0aGlzLnJlc29sdmVkUHJvcGVydHkuZnJvbUFycmF5KGEsYil9LGZ1bmN0aW9uKGEsYil7dGhpcy5yZXNvbHZlZFByb3BlcnR5LmZyb21BcnJheShhLGIpO3RoaXMudGFyZ2V0T2JqZWN0Lm5lZWRzVXBkYXRlPSEwfSxmdW5jdGlvbihhLGIpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eS5mcm9tQXJyYXkoYSxiKTt0aGlzLnRhcmdldE9iamVjdC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSEwfV1dLGdldFZhbHVlOmZ1bmN0aW9uKGEsYil7dGhpcy5iaW5kKCk7dGhpcy5nZXRWYWx1ZShhLGIpfSxzZXRWYWx1ZTpmdW5jdGlvbihhLGIpe3RoaXMuYmluZCgpO3RoaXMuc2V0VmFsdWUoYSxiKX0sYmluZDpmdW5jdGlvbigpe3ZhciBhPVxudGhpcy5ub2RlLGI9dGhpcy5wYXJzZWRQYXRoLGM9Yi5vYmplY3ROYW1lLGQ9Yi5wcm9wZXJ0eU5hbWUsZT1iLnByb3BlcnR5SW5kZXg7YXx8KHRoaXMubm9kZT1hPXFhLmZpbmROb2RlKHRoaXMucm9vdE5vZGUsYi5ub2RlTmFtZSl8fHRoaXMucm9vdE5vZGUpO3RoaXMuZ2V0VmFsdWU9dGhpcy5fZ2V0VmFsdWVfdW5hdmFpbGFibGU7dGhpcy5zZXRWYWx1ZT10aGlzLl9zZXRWYWx1ZV91bmF2YWlsYWJsZTtpZihhKXtpZihjKXt2YXIgZj1iLm9iamVjdEluZGV4O3N3aXRjaChjKXtjYXNlIFwibWF0ZXJpYWxzXCI6aWYoIWEubWF0ZXJpYWwpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5Qcm9wZXJ0eUJpbmRpbmc6IENhbiBub3QgYmluZCB0byBtYXRlcmlhbCBhcyBub2RlIGRvZXMgbm90IGhhdmUgYSBtYXRlcmlhbC5cIix0aGlzKTtyZXR1cm59aWYoIWEubWF0ZXJpYWwubWF0ZXJpYWxzKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBDYW4gbm90IGJpbmQgdG8gbWF0ZXJpYWwubWF0ZXJpYWxzIGFzIG5vZGUubWF0ZXJpYWwgZG9lcyBub3QgaGF2ZSBhIG1hdGVyaWFscyBhcnJheS5cIixcbnRoaXMpO3JldHVybn1hPWEubWF0ZXJpYWwubWF0ZXJpYWxzO2JyZWFrO2Nhc2UgXCJib25lc1wiOmlmKCFhLnNrZWxldG9uKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBDYW4gbm90IGJpbmQgdG8gYm9uZXMgYXMgbm9kZSBkb2VzIG5vdCBoYXZlIGEgc2tlbGV0b24uXCIsdGhpcyk7cmV0dXJufWE9YS5za2VsZXRvbi5ib25lcztmb3IoYz0wO2M8YS5sZW5ndGg7YysrKWlmKGFbY10ubmFtZT09PWYpe2Y9YzticmVha31icmVhaztkZWZhdWx0OmlmKHZvaWQgMD09PWFbY10pe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5Qcm9wZXJ0eUJpbmRpbmc6IENhbiBub3QgYmluZCB0byBvYmplY3ROYW1lIG9mIG5vZGUgdW5kZWZpbmVkLlwiLHRoaXMpO3JldHVybn1hPWFbY119aWYodm9pZCAwIT09Zil7aWYodm9pZCAwPT09YVtmXSl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlByb3BlcnR5QmluZGluZzogVHJ5aW5nIHRvIGJpbmQgdG8gb2JqZWN0SW5kZXggb2Ygb2JqZWN0TmFtZSwgYnV0IGlzIHVuZGVmaW5lZC5cIixcbnRoaXMsYSk7cmV0dXJufWE9YVtmXX19Zj1hW2RdO2lmKHZvaWQgMD09PWYpY29uc29sZS5lcnJvcihcIlRIUkVFLlByb3BlcnR5QmluZGluZzogVHJ5aW5nIHRvIHVwZGF0ZSBwcm9wZXJ0eSBmb3IgdHJhY2s6IFwiK2Iubm9kZU5hbWUrXCIuXCIrZCtcIiBidXQgaXQgd2Fzbid0IGZvdW5kLlwiLGEpO2Vsc2V7Yj10aGlzLlZlcnNpb25pbmcuTm9uZTt2b2lkIDAhPT1hLm5lZWRzVXBkYXRlPyhiPXRoaXMuVmVyc2lvbmluZy5OZWVkc1VwZGF0ZSx0aGlzLnRhcmdldE9iamVjdD1hKTp2b2lkIDAhPT1hLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGUmJihiPXRoaXMuVmVyc2lvbmluZy5NYXRyaXhXb3JsZE5lZWRzVXBkYXRlLHRoaXMudGFyZ2V0T2JqZWN0PWEpO2M9dGhpcy5CaW5kaW5nVHlwZS5EaXJlY3Q7aWYodm9pZCAwIT09ZSl7aWYoXCJtb3JwaFRhcmdldEluZmx1ZW5jZXNcIj09PWQpe2lmKCFhLmdlb21ldHJ5KXtjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBDYW4gbm90IGJpbmQgdG8gbW9ycGhUYXJnZXRJbmZsdWVuY2VzIGJlY2F1c2Ugbm9kZSBkb2VzIG5vdCBoYXZlIGEgZ2VvbWV0cnkuXCIsXG50aGlzKTtyZXR1cm59aWYoYS5nZW9tZXRyeS5pc0J1ZmZlckdlb21ldHJ5KXtpZighYS5nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5Qcm9wZXJ0eUJpbmRpbmc6IENhbiBub3QgYmluZCB0byBtb3JwaFRhcmdldEluZmx1ZW5jZXMgYmVjYXVzZSBub2RlIGRvZXMgbm90IGhhdmUgYSBnZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMuXCIsdGhpcyk7cmV0dXJufWZvcihjPTA7Yzx0aGlzLm5vZGUuZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uLmxlbmd0aDtjKyspaWYoYS5nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb25bY10ubmFtZT09PWUpe2U9YzticmVha319ZWxzZXtpZighYS5nZW9tZXRyeS5tb3JwaFRhcmdldHMpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5Qcm9wZXJ0eUJpbmRpbmc6IENhbiBub3QgYmluZCB0byBtb3JwaFRhcmdldEluZmx1ZW5jZXMgYmVjYXVzZSBub2RlIGRvZXMgbm90IGhhdmUgYSBnZW9tZXRyeS5tb3JwaFRhcmdldHMuXCIsXG50aGlzKTtyZXR1cm59Zm9yKGM9MDtjPHRoaXMubm9kZS5nZW9tZXRyeS5tb3JwaFRhcmdldHMubGVuZ3RoO2MrKylpZihhLmdlb21ldHJ5Lm1vcnBoVGFyZ2V0c1tjXS5uYW1lPT09ZSl7ZT1jO2JyZWFrfX19Yz10aGlzLkJpbmRpbmdUeXBlLkFycmF5RWxlbWVudDt0aGlzLnJlc29sdmVkUHJvcGVydHk9Zjt0aGlzLnByb3BlcnR5SW5kZXg9ZX1lbHNlIHZvaWQgMCE9PWYuZnJvbUFycmF5JiZ2b2lkIDAhPT1mLnRvQXJyYXk/KGM9dGhpcy5CaW5kaW5nVHlwZS5IYXNGcm9tVG9BcnJheSx0aGlzLnJlc29sdmVkUHJvcGVydHk9Zik6QXJyYXkuaXNBcnJheShmKT8oYz10aGlzLkJpbmRpbmdUeXBlLkVudGlyZUFycmF5LHRoaXMucmVzb2x2ZWRQcm9wZXJ0eT1mKTp0aGlzLnByb3BlcnR5TmFtZT1kO3RoaXMuZ2V0VmFsdWU9dGhpcy5HZXR0ZXJCeUJpbmRpbmdUeXBlW2NdO3RoaXMuc2V0VmFsdWU9dGhpcy5TZXR0ZXJCeUJpbmRpbmdUeXBlQW5kVmVyc2lvbmluZ1tjXVtiXX19ZWxzZSBjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBUcnlpbmcgdG8gdXBkYXRlIG5vZGUgZm9yIHRyYWNrOiBcIitcbnRoaXMucGF0aCtcIiBidXQgaXQgd2Fzbid0IGZvdW5kLlwiKX0sdW5iaW5kOmZ1bmN0aW9uKCl7dGhpcy5ub2RlPW51bGw7dGhpcy5nZXRWYWx1ZT10aGlzLl9nZXRWYWx1ZV91bmJvdW5kO3RoaXMuc2V0VmFsdWU9dGhpcy5fc2V0VmFsdWVfdW5ib3VuZH19KTtPYmplY3QuYXNzaWduKHFhLnByb3RvdHlwZSx7X2dldFZhbHVlX3VuYm91bmQ6cWEucHJvdG90eXBlLmdldFZhbHVlLF9zZXRWYWx1ZV91bmJvdW5kOnFhLnByb3RvdHlwZS5zZXRWYWx1ZX0pO09iamVjdC5hc3NpZ24obmYucHJvdG90eXBlLHtpc0FuaW1hdGlvbk9iamVjdEdyb3VwOiEwLGFkZDpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLl9vYmplY3RzLGI9YS5sZW5ndGgsYz10aGlzLm5DYWNoZWRPYmplY3RzXyxkPXRoaXMuX2luZGljZXNCeVVVSUQsZT10aGlzLl9wYXRocyxmPXRoaXMuX3BhcnNlZFBhdGhzLGc9dGhpcy5fYmluZGluZ3MsaD1nLmxlbmd0aCxrPTAsbT1hcmd1bWVudHMubGVuZ3RoO2shPT1tOysrayl7dmFyIGw9XG5hcmd1bWVudHNba10sbj1sLnV1aWQscD1kW25dO2lmKHZvaWQgMD09PXApe3A9YisrO2Rbbl09cDthLnB1c2gobCk7Zm9yKHZhciBuPTAscj1oO24hPT1yOysrbilnW25dLnB1c2gobmV3IHFhKGwsZVtuXSxmW25dKSl9ZWxzZSBpZihwPGMpe3ZhciB0PS0tYyxyPWFbdF07ZFtyLnV1aWRdPXA7YVtwXT1yO2Rbbl09dDthW3RdPWw7bj0wO2ZvcihyPWg7biE9PXI7KytuKXt2YXIgdj1nW25dLHc9dltwXTt2W3BdPXZbdF07dm9pZCAwPT09dyYmKHc9bmV3IHFhKGwsZVtuXSxmW25dKSk7dlt0XT13fX1lbHNlIHZvaWQgMCE9PWFbcF0mJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5BbmltYXRpb25PYmplY3RHcm91cDogRGlmZmVyZW50IG9iamVjdHMgd2l0aCB0aGUgc2FtZSBVVUlEIGRldGVjdGVkLiBDbGVhbiB0aGUgY2FjaGVzIG9yIHJlY3JlYXRlIHlvdXIgaW5mcmFzdHJ1Y3R1cmUgd2hlbiByZWxvYWRpbmcgc2NlbmVzLlwiKX10aGlzLm5DYWNoZWRPYmplY3RzXz1jfSxyZW1vdmU6ZnVuY3Rpb24oKXtmb3IodmFyIGE9XG50aGlzLl9vYmplY3RzLGI9dGhpcy5uQ2FjaGVkT2JqZWN0c18sYz10aGlzLl9pbmRpY2VzQnlVVUlELGQ9dGhpcy5fYmluZGluZ3MsZT1kLmxlbmd0aCxmPTAsZz1hcmd1bWVudHMubGVuZ3RoO2YhPT1nOysrZil7dmFyIGg9YXJndW1lbnRzW2ZdLGs9aC51dWlkLG09Y1trXTtpZih2b2lkIDAhPT1tJiZtPj1iKXt2YXIgbD1iKyssbj1hW2xdO2Nbbi51dWlkXT1tO2FbbV09bjtjW2tdPWw7YVtsXT1oO2g9MDtmb3Ioaz1lO2ghPT1rOysraCl7dmFyIG49ZFtoXSxwPW5bbV07blttXT1uW2xdO25bbF09cH19fXRoaXMubkNhY2hlZE9iamVjdHNfPWJ9LHVuY2FjaGU6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYixjPXRoaXMuX29iamVjdHMsZD1jLmxlbmd0aCxlPXRoaXMubkNhY2hlZE9iamVjdHNfLGY9dGhpcy5faW5kaWNlc0J5VVVJRCxnPXRoaXMuX2JpbmRpbmdzLGg9Zy5sZW5ndGgsaz0wLG09YXJndW1lbnRzLmxlbmd0aDtrIT09bTsrK2spe2I9YXJndW1lbnRzW2tdLnV1aWQ7dmFyIGw9XG5mW2JdO2lmKHZvaWQgMCE9PWwpaWYoZGVsZXRlIGZbYl0sbDxlKXt2YXIgbj0tLWUscD1jW25dO2I9LS1kO2E9Y1tiXTtmW3AudXVpZF09bDtjW2xdPXA7ZlthLnV1aWRdPW47Y1tuXT1hO2MucG9wKCk7Zm9yKHZhciBwPTAscj1oO3AhPT1yOysrcCl7YT1nW3BdO3ZhciB0PWFbYl07YVtsXT1hW25dO2Fbbl09dDthLnBvcCgpfX1lbHNlIGZvcihiPS0tZCxhPWNbYl0sZlthLnV1aWRdPWwsY1tsXT1hLGMucG9wKCkscD0wLHI9aDtwIT09cjsrK3ApYT1nW3BdLGFbbF09YVtiXSxhLnBvcCgpfXRoaXMubkNhY2hlZE9iamVjdHNfPWV9LHN1YnNjcmliZV86ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl9iaW5kaW5nc0luZGljZXNCeVBhdGgsZD1jW2FdLGU9dGhpcy5fYmluZGluZ3M7aWYodm9pZCAwIT09ZClyZXR1cm4gZVtkXTt2YXIgZj10aGlzLl9wYXRocyxnPXRoaXMuX3BhcnNlZFBhdGhzLGg9dGhpcy5fb2JqZWN0cyxrPXRoaXMubkNhY2hlZE9iamVjdHNfLG09QXJyYXkoaC5sZW5ndGgpLFxuZD1lLmxlbmd0aDtjW2FdPWQ7Zi5wdXNoKGEpO2cucHVzaChiKTtlLnB1c2gobSk7Yz1rO2ZvcihkPWgubGVuZ3RoO2MhPT1kOysrYyltW2NdPW5ldyBxYShoW2NdLGEsYik7cmV0dXJuIG19LHVuc3Vic2NyaWJlXzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9iaW5kaW5nc0luZGljZXNCeVBhdGgsYz1iW2FdO2lmKHZvaWQgMCE9PWMpe3ZhciBkPXRoaXMuX3BhdGhzLGU9dGhpcy5fcGFyc2VkUGF0aHMsZj10aGlzLl9iaW5kaW5ncyxnPWYubGVuZ3RoLTEsaD1mW2ddO2JbYVtnXV09YztmW2NdPWg7Zi5wb3AoKTtlW2NdPWVbZ107ZS5wb3AoKTtkW2NdPWRbZ107ZC5wb3AoKX19fSk7T2JqZWN0LmFzc2lnbihvZi5wcm90b3R5cGUse3BsYXk6ZnVuY3Rpb24oKXt0aGlzLl9taXhlci5fYWN0aXZhdGVBY3Rpb24odGhpcyk7cmV0dXJuIHRoaXN9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLl9taXhlci5fZGVhY3RpdmF0ZUFjdGlvbih0aGlzKTtyZXR1cm4gdGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe3RoaXMucGF1c2VkPVxuITE7dGhpcy5lbmFibGVkPSEwO3RoaXMudGltZT0wO3RoaXMuX2xvb3BDb3VudD0tMTt0aGlzLl9zdGFydFRpbWU9bnVsbDtyZXR1cm4gdGhpcy5zdG9wRmFkaW5nKCkuc3RvcFdhcnBpbmcoKX0saXNSdW5uaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5hYmxlZCYmIXRoaXMucGF1c2VkJiYwIT09dGhpcy50aW1lU2NhbGUmJm51bGw9PT10aGlzLl9zdGFydFRpbWUmJnRoaXMuX21peGVyLl9pc0FjdGl2ZUFjdGlvbih0aGlzKX0saXNTY2hlZHVsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWl4ZXIuX2lzQWN0aXZlQWN0aW9uKHRoaXMpfSxzdGFydEF0OmZ1bmN0aW9uKGEpe3RoaXMuX3N0YXJ0VGltZT1hO3JldHVybiB0aGlzfSxzZXRMb29wOmZ1bmN0aW9uKGEsYil7dGhpcy5sb29wPWE7dGhpcy5yZXBldGl0aW9ucz1iO3JldHVybiB0aGlzfSxzZXRFZmZlY3RpdmVXZWlnaHQ6ZnVuY3Rpb24oYSl7dGhpcy53ZWlnaHQ9YTt0aGlzLl9lZmZlY3RpdmVXZWlnaHQ9dGhpcy5lbmFibGVkP1xuYTowO3JldHVybiB0aGlzLnN0b3BGYWRpbmcoKX0sZ2V0RWZmZWN0aXZlV2VpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VmZmVjdGl2ZVdlaWdodH0sZmFkZUluOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9zY2hlZHVsZUZhZGluZyhhLDAsMSl9LGZhZGVPdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX3NjaGVkdWxlRmFkaW5nKGEsMSwwKX0sY3Jvc3NGYWRlRnJvbTpmdW5jdGlvbihhLGIsYyl7YS5mYWRlT3V0KGIpO3RoaXMuZmFkZUluKGIpO2lmKGMpe2M9dGhpcy5fY2xpcC5kdXJhdGlvbjt2YXIgZD1hLl9jbGlwLmR1cmF0aW9uLGU9Yy9kO2Eud2FycCgxLGQvYyxiKTt0aGlzLndhcnAoZSwxLGIpfXJldHVybiB0aGlzfSxjcm9zc0ZhZGVUbzpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEuY3Jvc3NGYWRlRnJvbSh0aGlzLGIsYyl9LHN0b3BGYWRpbmc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl93ZWlnaHRJbnRlcnBvbGFudDtudWxsIT09YSYmKHRoaXMuX3dlaWdodEludGVycG9sYW50PVxubnVsbCx0aGlzLl9taXhlci5fdGFrZUJhY2tDb250cm9sSW50ZXJwb2xhbnQoYSkpO3JldHVybiB0aGlzfSxzZXRFZmZlY3RpdmVUaW1lU2NhbGU6ZnVuY3Rpb24oYSl7dGhpcy50aW1lU2NhbGU9YTt0aGlzLl9lZmZlY3RpdmVUaW1lU2NhbGU9dGhpcy5wYXVzZWQ/MDphO3JldHVybiB0aGlzLnN0b3BXYXJwaW5nKCl9LGdldEVmZmVjdGl2ZVRpbWVTY2FsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lZmZlY3RpdmVUaW1lU2NhbGV9LHNldER1cmF0aW9uOmZ1bmN0aW9uKGEpe3RoaXMudGltZVNjYWxlPXRoaXMuX2NsaXAuZHVyYXRpb24vYTtyZXR1cm4gdGhpcy5zdG9wV2FycGluZygpfSxzeW5jV2l0aDpmdW5jdGlvbihhKXt0aGlzLnRpbWU9YS50aW1lO3RoaXMudGltZVNjYWxlPWEudGltZVNjYWxlO3JldHVybiB0aGlzLnN0b3BXYXJwaW5nKCl9LGhhbHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMud2FycCh0aGlzLl9lZmZlY3RpdmVUaW1lU2NhbGUsMCxhKX0sd2FycDpmdW5jdGlvbihhLFxuYixjKXt2YXIgZD10aGlzLl9taXhlcixlPWQudGltZSxmPXRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50LGc9dGhpcy50aW1lU2NhbGU7bnVsbD09PWYmJih0aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudD1mPWQuX2xlbmRDb250cm9sSW50ZXJwb2xhbnQoKSk7ZD1mLnBhcmFtZXRlclBvc2l0aW9ucztmPWYuc2FtcGxlVmFsdWVzO2RbMF09ZTtkWzFdPWUrYztmWzBdPWEvZztmWzFdPWIvZztyZXR1cm4gdGhpc30sc3RvcFdhcnBpbmc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudDtudWxsIT09YSYmKHRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50PW51bGwsdGhpcy5fbWl4ZXIuX3Rha2VCYWNrQ29udHJvbEludGVycG9sYW50KGEpKTtyZXR1cm4gdGhpc30sZ2V0TWl4ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWl4ZXJ9LGdldENsaXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2xpcH0sZ2V0Um9vdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2NhbFJvb3R8fFxudGhpcy5fbWl4ZXIuX3Jvb3R9LF91cGRhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7aWYodGhpcy5lbmFibGVkKXt2YXIgZT10aGlzLl9zdGFydFRpbWU7aWYobnVsbCE9PWUpe2I9KGEtZSkqYztpZigwPmJ8fDA9PT1jKXJldHVybjt0aGlzLl9zdGFydFRpbWU9bnVsbDtiKj1jfWIqPXRoaXMuX3VwZGF0ZVRpbWVTY2FsZShhKTtjPXRoaXMuX3VwZGF0ZVRpbWUoYik7YT10aGlzLl91cGRhdGVXZWlnaHQoYSk7aWYoMDxhKXtiPXRoaXMuX2ludGVycG9sYW50cztmb3IodmFyIGU9dGhpcy5fcHJvcGVydHlCaW5kaW5ncyxmPTAsZz1iLmxlbmd0aDtmIT09ZzsrK2YpYltmXS5ldmFsdWF0ZShjKSxlW2ZdLmFjY3VtdWxhdGUoZCxhKX19ZWxzZSB0aGlzLl91cGRhdGVXZWlnaHQoYSl9LF91cGRhdGVXZWlnaHQ6ZnVuY3Rpb24oYSl7dmFyIGI9MDtpZih0aGlzLmVuYWJsZWQpe3ZhciBiPXRoaXMud2VpZ2h0LGM9dGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ7aWYobnVsbCE9PWMpe3ZhciBkPWMuZXZhbHVhdGUoYSlbMF0sXG5iPWIqZDthPmMucGFyYW1ldGVyUG9zaXRpb25zWzFdJiYodGhpcy5zdG9wRmFkaW5nKCksMD09PWQmJih0aGlzLmVuYWJsZWQ9ITEpKX19cmV0dXJuIHRoaXMuX2VmZmVjdGl2ZVdlaWdodD1ifSxfdXBkYXRlVGltZVNjYWxlOmZ1bmN0aW9uKGEpe3ZhciBiPTA7aWYoIXRoaXMucGF1c2VkKXt2YXIgYj10aGlzLnRpbWVTY2FsZSxjPXRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50O2lmKG51bGwhPT1jKXt2YXIgZD1jLmV2YWx1YXRlKGEpWzBdLGI9YipkO2E+Yy5wYXJhbWV0ZXJQb3NpdGlvbnNbMV0mJih0aGlzLnN0b3BXYXJwaW5nKCksMD09PWI/dGhpcy5wYXVzZWQ9ITA6dGhpcy50aW1lU2NhbGU9Yil9fXJldHVybiB0aGlzLl9lZmZlY3RpdmVUaW1lU2NhbGU9Yn0sX3VwZGF0ZVRpbWU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy50aW1lK2E7aWYoMD09PWEpcmV0dXJuIGI7dmFyIGM9dGhpcy5fY2xpcC5kdXJhdGlvbixkPXRoaXMubG9vcCxlPXRoaXMuX2xvb3BDb3VudDtpZigyMjAwPT09XG5kKWE6e2lmKC0xPT09ZSYmKHRoaXMuX2xvb3BDb3VudD0wLHRoaXMuX3NldEVuZGluZ3MoITAsITAsITEpKSxiPj1jKWI9YztlbHNlIGlmKDA+YiliPTA7ZWxzZSBicmVhayBhO3RoaXMuY2xhbXBXaGVuRmluaXNoZWQ/dGhpcy5wYXVzZWQ9ITA6dGhpcy5lbmFibGVkPSExO3RoaXMuX21peGVyLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJmaW5pc2hlZFwiLGFjdGlvbjp0aGlzLGRpcmVjdGlvbjowPmE/LTE6MX0pfWVsc2V7ZD0yMjAyPT09ZDstMT09PWUmJigwPD1hPyhlPTAsdGhpcy5fc2V0RW5kaW5ncyghMCwwPT09dGhpcy5yZXBldGl0aW9ucyxkKSk6dGhpcy5fc2V0RW5kaW5ncygwPT09dGhpcy5yZXBldGl0aW9ucywhMCxkKSk7aWYoYj49Y3x8MD5iKXt2YXIgZj1NYXRoLmZsb29yKGIvYyksYj1iLWMqZixlPWUrTWF0aC5hYnMoZiksZz10aGlzLnJlcGV0aXRpb25zLWU7MD5nPyh0aGlzLmNsYW1wV2hlbkZpbmlzaGVkP3RoaXMucGF1c2VkPSEwOnRoaXMuZW5hYmxlZD0hMSxiPTA8YT9cbmM6MCx0aGlzLl9taXhlci5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZmluaXNoZWRcIixhY3Rpb246dGhpcyxkaXJlY3Rpb246MDxhPzE6LTF9KSk6KDA9PT1nPyhhPTA+YSx0aGlzLl9zZXRFbmRpbmdzKGEsIWEsZCkpOnRoaXMuX3NldEVuZGluZ3MoITEsITEsZCksdGhpcy5fbG9vcENvdW50PWUsdGhpcy5fbWl4ZXIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImxvb3BcIixhY3Rpb246dGhpcyxsb29wRGVsdGE6Zn0pKX1pZihkJiYxPT09KGUmMSkpcmV0dXJuIHRoaXMudGltZT1iLGMtYn1yZXR1cm4gdGhpcy50aW1lPWJ9LF9zZXRFbmRpbmdzOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl9pbnRlcnBvbGFudFNldHRpbmdzO2M/KGQuZW5kaW5nU3RhcnQ9MjQwMSxkLmVuZGluZ0VuZD0yNDAxKTooZC5lbmRpbmdTdGFydD1hP3RoaXMuemVyb1Nsb3BlQXRTdGFydD8yNDAxOjI0MDA6MjQwMixkLmVuZGluZ0VuZD1iP3RoaXMuemVyb1Nsb3BlQXRFbmQ/MjQwMToyNDAwOjI0MDIpfSxfc2NoZWR1bGVGYWRpbmc6ZnVuY3Rpb24oYSxcbmIsYyl7dmFyIGQ9dGhpcy5fbWl4ZXIsZT1kLnRpbWUsZj10aGlzLl93ZWlnaHRJbnRlcnBvbGFudDtudWxsPT09ZiYmKHRoaXMuX3dlaWdodEludGVycG9sYW50PWY9ZC5fbGVuZENvbnRyb2xJbnRlcnBvbGFudCgpKTtkPWYucGFyYW1ldGVyUG9zaXRpb25zO2Y9Zi5zYW1wbGVWYWx1ZXM7ZFswXT1lO2ZbMF09YjtkWzFdPWUrYTtmWzFdPWM7cmV0dXJuIHRoaXN9fSk7d2UucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh6YS5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjp3ZSxfYmluZEFjdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPWEuX2xvY2FsUm9vdHx8dGhpcy5fcm9vdCxkPWEuX2NsaXAudHJhY2tzLGU9ZC5sZW5ndGgsZj1hLl9wcm9wZXJ0eUJpbmRpbmdzO2E9YS5faW50ZXJwb2xhbnRzO3ZhciBnPWMudXVpZCxoPXRoaXMuX2JpbmRpbmdzQnlSb290QW5kTmFtZSxrPWhbZ107dm9pZCAwPT09ayYmKGs9e30saFtnXT1rKTtmb3IoaD0wO2ghPT1lOysraCl7dmFyIG09XG5kW2hdLGw9bS5uYW1lLG49a1tsXTtpZih2b2lkIDA9PT1uKXtuPWZbaF07aWYodm9pZCAwIT09bil7bnVsbD09PW4uX2NhY2hlSW5kZXgmJigrK24ucmVmZXJlbmNlQ291bnQsdGhpcy5fYWRkSW5hY3RpdmVCaW5kaW5nKG4sZyxsKSk7Y29udGludWV9bj1uZXcgdmUocWEuY3JlYXRlKGMsbCxiJiZiLl9wcm9wZXJ0eUJpbmRpbmdzW2hdLmJpbmRpbmcucGFyc2VkUGF0aCksbS5WYWx1ZVR5cGVOYW1lLG0uZ2V0VmFsdWVTaXplKCkpOysrbi5yZWZlcmVuY2VDb3VudDt0aGlzLl9hZGRJbmFjdGl2ZUJpbmRpbmcobixnLGwpfWZbaF09bjthW2hdLnJlc3VsdEJ1ZmZlcj1uLmJ1ZmZlcn19LF9hY3RpdmF0ZUFjdGlvbjpmdW5jdGlvbihhKXtpZighdGhpcy5faXNBY3RpdmVBY3Rpb24oYSkpe2lmKG51bGw9PT1hLl9jYWNoZUluZGV4KXt2YXIgYj0oYS5fbG9jYWxSb290fHx0aGlzLl9yb290KS51dWlkLGM9YS5fY2xpcC51dWlkLGQ9dGhpcy5fYWN0aW9uc0J5Q2xpcFtjXTt0aGlzLl9iaW5kQWN0aW9uKGEsXG5kJiZkLmtub3duQWN0aW9uc1swXSk7dGhpcy5fYWRkSW5hY3RpdmVBY3Rpb24oYSxjLGIpfWI9YS5fcHJvcGVydHlCaW5kaW5ncztjPTA7Zm9yKGQ9Yi5sZW5ndGg7YyE9PWQ7KytjKXt2YXIgZT1iW2NdOzA9PT1lLnVzZUNvdW50KysmJih0aGlzLl9sZW5kQmluZGluZyhlKSxlLnNhdmVPcmlnaW5hbFN0YXRlKCkpfXRoaXMuX2xlbmRBY3Rpb24oYSl9fSxfZGVhY3RpdmF0ZUFjdGlvbjpmdW5jdGlvbihhKXtpZih0aGlzLl9pc0FjdGl2ZUFjdGlvbihhKSl7Zm9yKHZhciBiPWEuX3Byb3BlcnR5QmluZGluZ3MsYz0wLGQ9Yi5sZW5ndGg7YyE9PWQ7KytjKXt2YXIgZT1iW2NdOzA9PT0tLWUudXNlQ291bnQmJihlLnJlc3RvcmVPcmlnaW5hbFN0YXRlKCksdGhpcy5fdGFrZUJhY2tCaW5kaW5nKGUpKX10aGlzLl90YWtlQmFja0FjdGlvbihhKX19LF9pbml0TWVtb3J5TWFuYWdlcjpmdW5jdGlvbigpe3RoaXMuX2FjdGlvbnM9W107dGhpcy5fbkFjdGl2ZUFjdGlvbnM9MDt0aGlzLl9hY3Rpb25zQnlDbGlwPVxue307dGhpcy5fYmluZGluZ3M9W107dGhpcy5fbkFjdGl2ZUJpbmRpbmdzPTA7dGhpcy5fYmluZGluZ3NCeVJvb3RBbmROYW1lPXt9O3RoaXMuX2NvbnRyb2xJbnRlcnBvbGFudHM9W107dGhpcy5fbkFjdGl2ZUNvbnRyb2xJbnRlcnBvbGFudHM9MDt2YXIgYT10aGlzO3RoaXMuc3RhdHM9e2FjdGlvbnM6e2dldCB0b3RhbCgpe3JldHVybiBhLl9hY3Rpb25zLmxlbmd0aH0sZ2V0IGluVXNlKCl7cmV0dXJuIGEuX25BY3RpdmVBY3Rpb25zfX0sYmluZGluZ3M6e2dldCB0b3RhbCgpe3JldHVybiBhLl9iaW5kaW5ncy5sZW5ndGh9LGdldCBpblVzZSgpe3JldHVybiBhLl9uQWN0aXZlQmluZGluZ3N9fSxjb250cm9sSW50ZXJwb2xhbnRzOntnZXQgdG90YWwoKXtyZXR1cm4gYS5fY29udHJvbEludGVycG9sYW50cy5sZW5ndGh9LGdldCBpblVzZSgpe3JldHVybiBhLl9uQWN0aXZlQ29udHJvbEludGVycG9sYW50c319fX0sX2lzQWN0aXZlQWN0aW9uOmZ1bmN0aW9uKGEpe2E9YS5fY2FjaGVJbmRleDtcbnJldHVybiBudWxsIT09YSYmYTx0aGlzLl9uQWN0aXZlQWN0aW9uc30sX2FkZEluYWN0aXZlQWN0aW9uOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl9hY3Rpb25zLGU9dGhpcy5fYWN0aW9uc0J5Q2xpcCxmPWVbYl07dm9pZCAwPT09Zj8oZj17a25vd25BY3Rpb25zOlthXSxhY3Rpb25CeVJvb3Q6e319LGEuX2J5Q2xpcENhY2hlSW5kZXg9MCxlW2JdPWYpOihiPWYua25vd25BY3Rpb25zLGEuX2J5Q2xpcENhY2hlSW5kZXg9Yi5sZW5ndGgsYi5wdXNoKGEpKTthLl9jYWNoZUluZGV4PWQubGVuZ3RoO2QucHVzaChhKTtmLmFjdGlvbkJ5Um9vdFtjXT1hfSxfcmVtb3ZlSW5hY3RpdmVBY3Rpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fYWN0aW9ucyxjPWJbYi5sZW5ndGgtMV0sZD1hLl9jYWNoZUluZGV4O2MuX2NhY2hlSW5kZXg9ZDtiW2RdPWM7Yi5wb3AoKTthLl9jYWNoZUluZGV4PW51bGw7dmFyIGI9YS5fY2xpcC51dWlkLGM9dGhpcy5fYWN0aW9uc0J5Q2xpcCxkPWNbYl0sZT1cbmQua25vd25BY3Rpb25zLGY9ZVtlLmxlbmd0aC0xXSxnPWEuX2J5Q2xpcENhY2hlSW5kZXg7Zi5fYnlDbGlwQ2FjaGVJbmRleD1nO2VbZ109ZjtlLnBvcCgpO2EuX2J5Q2xpcENhY2hlSW5kZXg9bnVsbDtkZWxldGUgZC5hY3Rpb25CeVJvb3RbKGEuX2xvY2FsUm9vdHx8dGhpcy5fcm9vdCkudXVpZF07MD09PWUubGVuZ3RoJiZkZWxldGUgY1tiXTt0aGlzLl9yZW1vdmVJbmFjdGl2ZUJpbmRpbmdzRm9yQWN0aW9uKGEpfSxfcmVtb3ZlSW5hY3RpdmVCaW5kaW5nc0ZvckFjdGlvbjpmdW5jdGlvbihhKXthPWEuX3Byb3BlcnR5QmluZGluZ3M7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiIT09YzsrK2Ipe3ZhciBkPWFbYl07MD09PS0tZC5yZWZlcmVuY2VDb3VudCYmdGhpcy5fcmVtb3ZlSW5hY3RpdmVCaW5kaW5nKGQpfX0sX2xlbmRBY3Rpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fYWN0aW9ucyxjPWEuX2NhY2hlSW5kZXgsZD10aGlzLl9uQWN0aXZlQWN0aW9ucysrLGU9YltkXTthLl9jYWNoZUluZGV4PVxuZDtiW2RdPWE7ZS5fY2FjaGVJbmRleD1jO2JbY109ZX0sX3Rha2VCYWNrQWN0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2FjdGlvbnMsYz1hLl9jYWNoZUluZGV4LGQ9LS10aGlzLl9uQWN0aXZlQWN0aW9ucyxlPWJbZF07YS5fY2FjaGVJbmRleD1kO2JbZF09YTtlLl9jYWNoZUluZGV4PWM7YltjXT1lfSxfYWRkSW5hY3RpdmVCaW5kaW5nOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl9iaW5kaW5nc0J5Um9vdEFuZE5hbWUsZT1kW2JdLGY9dGhpcy5fYmluZGluZ3M7dm9pZCAwPT09ZSYmKGU9e30sZFtiXT1lKTtlW2NdPWE7YS5fY2FjaGVJbmRleD1mLmxlbmd0aDtmLnB1c2goYSl9LF9yZW1vdmVJbmFjdGl2ZUJpbmRpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fYmluZGluZ3MsYz1hLmJpbmRpbmcsZD1jLnJvb3ROb2RlLnV1aWQsYz1jLnBhdGgsZT10aGlzLl9iaW5kaW5nc0J5Um9vdEFuZE5hbWUsZj1lW2RdLGc9YltiLmxlbmd0aC0xXTthPWEuX2NhY2hlSW5kZXg7XG5nLl9jYWNoZUluZGV4PWE7YlthXT1nO2IucG9wKCk7ZGVsZXRlIGZbY107YTp7Zm9yKHZhciBoIGluIGYpYnJlYWsgYTtkZWxldGUgZVtkXX19LF9sZW5kQmluZGluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9iaW5kaW5ncyxjPWEuX2NhY2hlSW5kZXgsZD10aGlzLl9uQWN0aXZlQmluZGluZ3MrKyxlPWJbZF07YS5fY2FjaGVJbmRleD1kO2JbZF09YTtlLl9jYWNoZUluZGV4PWM7YltjXT1lfSxfdGFrZUJhY2tCaW5kaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2JpbmRpbmdzLGM9YS5fY2FjaGVJbmRleCxkPS0tdGhpcy5fbkFjdGl2ZUJpbmRpbmdzLGU9YltkXTthLl9jYWNoZUluZGV4PWQ7YltkXT1hO2UuX2NhY2hlSW5kZXg9YztiW2NdPWV9LF9sZW5kQ29udHJvbEludGVycG9sYW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fY29udHJvbEludGVycG9sYW50cyxiPXRoaXMuX25BY3RpdmVDb250cm9sSW50ZXJwb2xhbnRzKyssYz1hW2JdO3ZvaWQgMD09PWMmJihjPW5ldyBlZChuZXcgRmxvYXQzMkFycmF5KDIpLFxubmV3IEZsb2F0MzJBcnJheSgyKSwxLHRoaXMuX2NvbnRyb2xJbnRlcnBvbGFudHNSZXN1bHRCdWZmZXIpLGMuX19jYWNoZUluZGV4PWIsYVtiXT1jKTtyZXR1cm4gY30sX3Rha2VCYWNrQ29udHJvbEludGVycG9sYW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2NvbnRyb2xJbnRlcnBvbGFudHMsYz1hLl9fY2FjaGVJbmRleCxkPS0tdGhpcy5fbkFjdGl2ZUNvbnRyb2xJbnRlcnBvbGFudHMsZT1iW2RdO2EuX19jYWNoZUluZGV4PWQ7YltkXT1hO2UuX19jYWNoZUluZGV4PWM7YltjXT1lfSxfY29udHJvbEludGVycG9sYW50c1Jlc3VsdEJ1ZmZlcjpuZXcgRmxvYXQzMkFycmF5KDEpLGNsaXBBY3Rpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHx0aGlzLl9yb290LGQ9Yy51dWlkLGM9XCJzdHJpbmdcIj09PXR5cGVvZiBhP0NhLmZpbmRCeU5hbWUoYyxhKTphO2E9bnVsbCE9PWM/Yy51dWlkOmE7dmFyIGU9dGhpcy5fYWN0aW9uc0J5Q2xpcFthXSxmPW51bGw7aWYodm9pZCAwIT09ZSl7Zj1cbmUuYWN0aW9uQnlSb290W2RdO2lmKHZvaWQgMCE9PWYpcmV0dXJuIGY7Zj1lLmtub3duQWN0aW9uc1swXTtudWxsPT09YyYmKGM9Zi5fY2xpcCl9aWYobnVsbD09PWMpcmV0dXJuIG51bGw7Yj1uZXcgb2YodGhpcyxjLGIpO3RoaXMuX2JpbmRBY3Rpb24oYixmKTt0aGlzLl9hZGRJbmFjdGl2ZUFjdGlvbihiLGEsZCk7cmV0dXJuIGJ9LGV4aXN0aW5nQWN0aW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8dGhpcy5fcm9vdDtiPWMudXVpZDtjPVwic3RyaW5nXCI9PT10eXBlb2YgYT9DYS5maW5kQnlOYW1lKGMsYSk6YTthPXRoaXMuX2FjdGlvbnNCeUNsaXBbYz9jLnV1aWQ6YV07cmV0dXJuIHZvaWQgMCE9PWE/YS5hY3Rpb25CeVJvb3RbYl18fG51bGw6bnVsbH0sc3RvcEFsbEFjdGlvbjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLl9hY3Rpb25zLGI9dGhpcy5fbkFjdGl2ZUFjdGlvbnMsYz10aGlzLl9iaW5kaW5ncyxkPXRoaXMuX25BY3RpdmVCaW5kaW5ncyxlPXRoaXMuX25BY3RpdmVCaW5kaW5ncz1cbnRoaXMuX25BY3RpdmVBY3Rpb25zPTA7ZSE9PWI7KytlKWFbZV0ucmVzZXQoKTtmb3IoZT0wO2UhPT1kOysrZSljW2VdLnVzZUNvdW50PTA7cmV0dXJuIHRoaXN9LHVwZGF0ZTpmdW5jdGlvbihhKXthKj10aGlzLnRpbWVTY2FsZTtmb3IodmFyIGI9dGhpcy5fYWN0aW9ucyxjPXRoaXMuX25BY3RpdmVBY3Rpb25zLGQ9dGhpcy50aW1lKz1hLGU9TWF0aC5zaWduKGEpLGY9dGhpcy5fYWNjdUluZGV4Xj0xLGc9MDtnIT09YzsrK2cpYltnXS5fdXBkYXRlKGQsYSxlLGYpO2E9dGhpcy5fYmluZGluZ3M7Yj10aGlzLl9uQWN0aXZlQmluZGluZ3M7Zm9yKGc9MDtnIT09YjsrK2cpYVtnXS5hcHBseShmKTtyZXR1cm4gdGhpc30sZ2V0Um9vdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yb290fSx1bmNhY2hlQ2xpcDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9hY3Rpb25zO2E9YS51dWlkO3ZhciBjPXRoaXMuX2FjdGlvbnNCeUNsaXAsZD1jW2FdO2lmKHZvaWQgMCE9PWQpe2Zvcih2YXIgZD1kLmtub3duQWN0aW9ucyxcbmU9MCxmPWQubGVuZ3RoO2UhPT1mOysrZSl7dmFyIGc9ZFtlXTt0aGlzLl9kZWFjdGl2YXRlQWN0aW9uKGcpO3ZhciBoPWcuX2NhY2hlSW5kZXgsaz1iW2IubGVuZ3RoLTFdO2cuX2NhY2hlSW5kZXg9bnVsbDtnLl9ieUNsaXBDYWNoZUluZGV4PW51bGw7ay5fY2FjaGVJbmRleD1oO2JbaF09aztiLnBvcCgpO3RoaXMuX3JlbW92ZUluYWN0aXZlQmluZGluZ3NGb3JBY3Rpb24oZyl9ZGVsZXRlIGNbYV19fSx1bmNhY2hlUm9vdDpmdW5jdGlvbihhKXthPWEudXVpZDt2YXIgYj10aGlzLl9hY3Rpb25zQnlDbGlwO2ZvcihkIGluIGIpe3ZhciBjPWJbZF0uYWN0aW9uQnlSb290W2FdO3ZvaWQgMCE9PWMmJih0aGlzLl9kZWFjdGl2YXRlQWN0aW9uKGMpLHRoaXMuX3JlbW92ZUluYWN0aXZlQWN0aW9uKGMpKX12YXIgZD10aGlzLl9iaW5kaW5nc0J5Um9vdEFuZE5hbWVbYV07aWYodm9pZCAwIT09ZClmb3IodmFyIGUgaW4gZClhPWRbZV0sYS5yZXN0b3JlT3JpZ2luYWxTdGF0ZSgpLHRoaXMuX3JlbW92ZUluYWN0aXZlQmluZGluZyhhKX0sXG51bmNhY2hlQWN0aW9uOmZ1bmN0aW9uKGEsYil7YT10aGlzLmV4aXN0aW5nQWN0aW9uKGEsYik7bnVsbCE9PWEmJih0aGlzLl9kZWFjdGl2YXRlQWN0aW9uKGEpLHRoaXMuX3JlbW92ZUluYWN0aXZlQWN0aW9uKGEpKX19KTtRZC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFFkKHZvaWQgMD09PXRoaXMudmFsdWUuY2xvbmU/dGhpcy52YWx1ZTp0aGlzLnZhbHVlLmNsb25lKCkpfTt4ZS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEUucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6eGUsaXNJbnN0YW5jZWRCdWZmZXJHZW9tZXRyeTohMCxjb3B5OmZ1bmN0aW9uKGEpe0UucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMubWF4SW5zdGFuY2VkQ291bnQ9YS5tYXhJbnN0YW5jZWRDb3VudDtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoeWUucHJvdG90eXBlLFxue2NvdW50OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhLmNvdW50fX0sYXJyYXk6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEuYXJyYXl9fX0pO09iamVjdC5hc3NpZ24oeWUucHJvdG90eXBlLHtpc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlOiEwLHNldFg6ZnVuY3Rpb24oYSxiKXt0aGlzLmRhdGEuYXJyYXlbYSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0XT1iO3JldHVybiB0aGlzfSxzZXRZOmZ1bmN0aW9uKGEsYil7dGhpcy5kYXRhLmFycmF5W2EqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCsxXT1iO3JldHVybiB0aGlzfSxzZXRaOmZ1bmN0aW9uKGEsYil7dGhpcy5kYXRhLmFycmF5W2EqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCsyXT1iO3JldHVybiB0aGlzfSxzZXRXOmZ1bmN0aW9uKGEsYil7dGhpcy5kYXRhLmFycmF5W2EqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCszXT1iO3JldHVybiB0aGlzfSxnZXRYOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEuYXJyYXlbYSpcbnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXRdfSxnZXRZOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEuYXJyYXlbYSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0KzFdfSxnZXRaOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEuYXJyYXlbYSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0KzJdfSxnZXRXOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEuYXJyYXlbYSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0KzNdfSxzZXRYWTpmdW5jdGlvbihhLGIsYyl7YT1hKnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQ7dGhpcy5kYXRhLmFycmF5W2ErMF09Yjt0aGlzLmRhdGEuYXJyYXlbYSsxXT1jO3JldHVybiB0aGlzfSxzZXRYWVo6ZnVuY3Rpb24oYSxiLGMsZCl7YT1hKnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQ7dGhpcy5kYXRhLmFycmF5W2ErMF09Yjt0aGlzLmRhdGEuYXJyYXlbYSsxXT1jO3RoaXMuZGF0YS5hcnJheVthKzJdPWQ7cmV0dXJuIHRoaXN9LFxuc2V0WFlaVzpmdW5jdGlvbihhLGIsYyxkLGUpe2E9YSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0O3RoaXMuZGF0YS5hcnJheVthKzBdPWI7dGhpcy5kYXRhLmFycmF5W2ErMV09Yzt0aGlzLmRhdGEuYXJyYXlbYSsyXT1kO3RoaXMuZGF0YS5hcnJheVthKzNdPWU7cmV0dXJuIHRoaXN9fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KG1jLnByb3RvdHlwZSxcIm5lZWRzVXBkYXRlXCIse3NldDpmdW5jdGlvbihhKXshMD09PWEmJnRoaXMudmVyc2lvbisrfX0pO09iamVjdC5hc3NpZ24obWMucHJvdG90eXBlLHtpc0ludGVybGVhdmVkQnVmZmVyOiEwLHNldEFycmF5OmZ1bmN0aW9uKGEpe2lmKEFycmF5LmlzQXJyYXkoYSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZTogYXJyYXkgc2hvdWxkIGJlIGEgVHlwZWQgQXJyYXkuXCIpO3RoaXMuY291bnQ9dm9pZCAwIT09YT9hLmxlbmd0aC90aGlzLnN0cmlkZTowO3RoaXMuYXJyYXk9YX0sc2V0RHluYW1pYzpmdW5jdGlvbihhKXt0aGlzLmR5bmFtaWM9XG5hO3JldHVybiB0aGlzfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuYXJyYXk9bmV3IGEuYXJyYXkuY29uc3RydWN0b3IoYS5hcnJheSk7dGhpcy5jb3VudD1hLmNvdW50O3RoaXMuc3RyaWRlPWEuc3RyaWRlO3RoaXMuZHluYW1pYz1hLmR5bmFtaWM7cmV0dXJuIHRoaXN9LGNvcHlBdDpmdW5jdGlvbihhLGIsYyl7YSo9dGhpcy5zdHJpZGU7Yyo9Yi5zdHJpZGU7Zm9yKHZhciBkPTAsZT10aGlzLnN0cmlkZTtkPGU7ZCsrKXRoaXMuYXJyYXlbYStkXT1iLmFycmF5W2MrZF07cmV0dXJuIHRoaXN9LHNldDpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPTApO3RoaXMuYXJyYXkuc2V0KGEsYik7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxvblVwbG9hZDpmdW5jdGlvbihhKXt0aGlzLm9uVXBsb2FkQ2FsbGJhY2s9YTtyZXR1cm4gdGhpc319KTt6ZS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG1jLnByb3RvdHlwZSksXG57Y29uc3RydWN0b3I6emUsaXNJbnN0YW5jZWRJbnRlcmxlYXZlZEJ1ZmZlcjohMCxjb3B5OmZ1bmN0aW9uKGEpe21jLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLm1lc2hQZXJBdHRyaWJ1dGU9YS5tZXNoUGVyQXR0cmlidXRlO3JldHVybiB0aGlzfX0pO0FlLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoTS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpBZSxpc0luc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZTohMCxjb3B5OmZ1bmN0aW9uKGEpe00ucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMubWVzaFBlckF0dHJpYnV0ZT1hLm1lc2hQZXJBdHRyaWJ1dGU7cmV0dXJuIHRoaXN9fSk7T2JqZWN0LmFzc2lnbihwZi5wcm90b3R5cGUse2xpbmVQcmVjaXNpb246MSxzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnJheS5zZXQoYSxiKX0sc2V0RnJvbUNhbWVyYTpmdW5jdGlvbihhLGIpe2ImJmIuaXNQZXJzcGVjdGl2ZUNhbWVyYT8odGhpcy5yYXkub3JpZ2luLnNldEZyb21NYXRyaXhQb3NpdGlvbihiLm1hdHJpeFdvcmxkKSxcbnRoaXMucmF5LmRpcmVjdGlvbi5zZXQoYS54LGEueSwuNSkudW5wcm9qZWN0KGIpLnN1Yih0aGlzLnJheS5vcmlnaW4pLm5vcm1hbGl6ZSgpKTpiJiZiLmlzT3J0aG9ncmFwaGljQ2FtZXJhPyh0aGlzLnJheS5vcmlnaW4uc2V0KGEueCxhLnksKGIubmVhcitiLmZhcikvKGIubmVhci1iLmZhcikpLnVucHJvamVjdChiKSx0aGlzLnJheS5kaXJlY3Rpb24uc2V0KDAsMCwtMSkudHJhbnNmb3JtRGlyZWN0aW9uKGIubWF0cml4V29ybGQpKTpjb25zb2xlLmVycm9yKFwiVEhSRUUuUmF5Y2FzdGVyOiBVbnN1cHBvcnRlZCBjYW1lcmEgdHlwZS5cIil9LGludGVyc2VjdE9iamVjdDpmdW5jdGlvbihhLGIpe3ZhciBjPVtdO0JlKGEsdGhpcyxjLGIpO2Muc29ydChxZik7cmV0dXJuIGN9LGludGVyc2VjdE9iamVjdHM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXTtpZighMT09PUFycmF5LmlzQXJyYXkoYSkpcmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzOiBvYmplY3RzIGlzIG5vdCBhbiBBcnJheS5cIiksXG5jO2Zvcih2YXIgZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKylCZShhW2RdLHRoaXMsYyxiKTtjLnNvcnQocWYpO3JldHVybiBjfX0pO09iamVjdC5hc3NpZ24ocmYucHJvdG90eXBlLHtzdGFydDpmdW5jdGlvbigpe3RoaXMub2xkVGltZT10aGlzLnN0YXJ0VGltZT0oXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBwZXJmb3JtYW5jZT9EYXRlOnBlcmZvcm1hbmNlKS5ub3coKTt0aGlzLmVsYXBzZWRUaW1lPTA7dGhpcy5ydW5uaW5nPSEwfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5nZXRFbGFwc2VkVGltZSgpO3RoaXMuYXV0b1N0YXJ0PXRoaXMucnVubmluZz0hMX0sZ2V0RWxhcHNlZFRpbWU6ZnVuY3Rpb24oKXt0aGlzLmdldERlbHRhKCk7cmV0dXJuIHRoaXMuZWxhcHNlZFRpbWV9LGdldERlbHRhOmZ1bmN0aW9uKCl7dmFyIGE9MDtpZih0aGlzLmF1dG9TdGFydCYmIXRoaXMucnVubmluZylyZXR1cm4gdGhpcy5zdGFydCgpLDA7aWYodGhpcy5ydW5uaW5nKXt2YXIgYj0oXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBwZXJmb3JtYW5jZT9cbkRhdGU6cGVyZm9ybWFuY2UpLm5vdygpLGE9KGItdGhpcy5vbGRUaW1lKS8xRTM7dGhpcy5vbGRUaW1lPWI7dGhpcy5lbGFwc2VkVGltZSs9YX1yZXR1cm4gYX19KTtPYmplY3QuYXNzaWduKHNmLnByb3RvdHlwZSx7c2V0OmZ1bmN0aW9uKGEsYixjKXt0aGlzLnJhZGl1cz1hO3RoaXMucGhpPWI7dGhpcy50aGV0YT1jO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihhKXt0aGlzLnJhZGl1cz1hLnJhZGl1czt0aGlzLnBoaT1hLnBoaTt0aGlzLnRoZXRhPWEudGhldGE7cmV0dXJuIHRoaXN9LG1ha2VTYWZlOmZ1bmN0aW9uKCl7dGhpcy5waGk9TWF0aC5tYXgoMUUtNixNYXRoLm1pbihNYXRoLlBJLTFFLTYsdGhpcy5waGkpKTtyZXR1cm4gdGhpc30sc2V0RnJvbVZlY3RvcjM6ZnVuY3Rpb24oYSl7dGhpcy5yYWRpdXM9YS5sZW5ndGgoKTswPT09dGhpcy5yYWRpdXM/dGhpcy5waGk9dGhpcy50aGV0YT1cbjA6KHRoaXMudGhldGE9TWF0aC5hdGFuMihhLngsYS56KSx0aGlzLnBoaT1NYXRoLmFjb3MoUS5jbGFtcChhLnkvdGhpcy5yYWRpdXMsLTEsMSkpKTtyZXR1cm4gdGhpc319KTtPYmplY3QuYXNzaWduKHRmLnByb3RvdHlwZSx7c2V0OmZ1bmN0aW9uKGEsYixjKXt0aGlzLnJhZGl1cz1hO3RoaXMudGhldGE9Yjt0aGlzLnk9YztyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5yYWRpdXM9YS5yYWRpdXM7dGhpcy50aGV0YT1hLnRoZXRhO3RoaXMueT1hLnk7cmV0dXJuIHRoaXN9LHNldEZyb21WZWN0b3IzOmZ1bmN0aW9uKGEpe3RoaXMucmFkaXVzPU1hdGguc3FydChhLngqYS54K2EueiphLnopO3RoaXMudGhldGE9TWF0aC5hdGFuMihhLngsYS56KTt0aGlzLnk9YS55O3JldHVybiB0aGlzfX0pO2dkLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKTtnZC5wcm90b3R5cGUuY29uc3RydWN0b3I9XG5nZDtnZC5wcm90b3R5cGUuaXNJbW1lZGlhdGVSZW5kZXJPYmplY3Q9ITA7aGQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoWC5wcm90b3R5cGUpO2hkLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1oZDtoZC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAsYj1uZXcgcCxjPW5ldyBtYTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZCxlPVtcImFcIixcImJcIixcImNcIl07dGhpcy5vYmplY3QudXBkYXRlTWF0cml4V29ybGQoITApO2MuZ2V0Tm9ybWFsTWF0cml4KHRoaXMub2JqZWN0Lm1hdHJpeFdvcmxkKTt2YXIgZj10aGlzLm9iamVjdC5tYXRyaXhXb3JsZCxnPXRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbjtpZigoZD10aGlzLm9iamVjdC5nZW9tZXRyeSkmJmQuaXNHZW9tZXRyeSlmb3IodmFyIGg9ZC52ZXJ0aWNlcyxrPWQuZmFjZXMsbD1kPTAscD1rLmxlbmd0aDtsPHA7bCsrKWZvcih2YXIgbj1rW2xdLHU9MCxyPW4udmVydGV4Tm9ybWFscy5sZW5ndGg7dTxyO3UrKyl7dmFyIHQ9XG5uLnZlcnRleE5vcm1hbHNbdV07YS5jb3B5KGhbbltlW3VdXV0pLmFwcGx5TWF0cml4NChmKTtiLmNvcHkodCkuYXBwbHlNYXRyaXgzKGMpLm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKHRoaXMuc2l6ZSkuYWRkKGEpO2cuc2V0WFlaKGQsYS54LGEueSxhLnopO2QrPTE7Zy5zZXRYWVooZCxiLngsYi55LGIueik7ZCs9MX1lbHNlIGlmKGQmJmQuaXNCdWZmZXJHZW9tZXRyeSlmb3IoZT1kLmF0dHJpYnV0ZXMucG9zaXRpb24saD1kLmF0dHJpYnV0ZXMubm9ybWFsLHU9ZD0wLHI9ZS5jb3VudDt1PHI7dSsrKWEuc2V0KGUuZ2V0WCh1KSxlLmdldFkodSksZS5nZXRaKHUpKS5hcHBseU1hdHJpeDQoZiksYi5zZXQoaC5nZXRYKHUpLGguZ2V0WSh1KSxoLmdldFoodSkpLGIuYXBwbHlNYXRyaXgzKGMpLm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKHRoaXMuc2l6ZSkuYWRkKGEpLGcuc2V0WFlaKGQsYS54LGEueSxhLnopLGQrPTEsZy5zZXRYWVooZCxiLngsYi55LGIueiksZCs9MTtnLm5lZWRzVXBkYXRlPVxuITB9fSgpO25jLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKTtuYy5wcm90b3R5cGUuY29uc3RydWN0b3I9bmM7bmMucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmNvbmUuZ2VvbWV0cnkuZGlzcG9zZSgpO3RoaXMuY29uZS5tYXRlcmlhbC5kaXNwb3NlKCl9O25jLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBwO3JldHVybiBmdW5jdGlvbigpe3RoaXMubGlnaHQudXBkYXRlTWF0cml4V29ybGQoKTt2YXIgYz10aGlzLmxpZ2h0LmRpc3RhbmNlP3RoaXMubGlnaHQuZGlzdGFuY2U6MUUzLGQ9YypNYXRoLnRhbih0aGlzLmxpZ2h0LmFuZ2xlKTt0aGlzLmNvbmUuc2NhbGUuc2V0KGQsZCxjKTthLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLmxpZ2h0Lm1hdHJpeFdvcmxkKTtiLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLmxpZ2h0LnRhcmdldC5tYXRyaXhXb3JsZCk7dGhpcy5jb25lLmxvb2tBdChiLnN1YihhKSk7XG52b2lkIDAhPT10aGlzLmNvbG9yP3RoaXMuY29uZS5tYXRlcmlhbC5jb2xvci5zZXQodGhpcy5jb2xvcik6dGhpcy5jb25lLm1hdGVyaWFsLmNvbG9yLmNvcHkodGhpcy5saWdodC5jb2xvcil9fSgpO29jLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFgucHJvdG90eXBlKTtvYy5wcm90b3R5cGUuY29uc3RydWN0b3I9b2M7b2MucHJvdG90eXBlLnVwZGF0ZU1hdHJpeFdvcmxkPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAsYj1uZXcgTyxjPW5ldyBPO3JldHVybiBmdW5jdGlvbihkKXt2YXIgZT10aGlzLmJvbmVzLGY9dGhpcy5nZW9tZXRyeSxnPWYuZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIik7Yy5nZXRJbnZlcnNlKHRoaXMucm9vdC5tYXRyaXhXb3JsZCk7Zm9yKHZhciBoPTAsaz0wO2g8ZS5sZW5ndGg7aCsrKXt2YXIgbD1lW2hdO2wucGFyZW50JiZsLnBhcmVudC5pc0JvbmUmJihiLm11bHRpcGx5TWF0cmljZXMoYyxsLm1hdHJpeFdvcmxkKSxhLnNldEZyb21NYXRyaXhQb3NpdGlvbihiKSxcbmcuc2V0WFlaKGssYS54LGEueSxhLnopLGIubXVsdGlwbHlNYXRyaWNlcyhjLGwucGFyZW50Lm1hdHJpeFdvcmxkKSxhLnNldEZyb21NYXRyaXhQb3NpdGlvbihiKSxnLnNldFhZWihrKzEsYS54LGEueSxhLnopLGsrPTIpfWYuZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIikubmVlZHNVcGRhdGU9ITA7eC5wcm90b3R5cGUudXBkYXRlTWF0cml4V29ybGQuY2FsbCh0aGlzLGQpfX0oKTtwYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyYS5wcm90b3R5cGUpO3BjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1wYztwYy5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuZ2VvbWV0cnkuZGlzcG9zZSgpO3RoaXMubWF0ZXJpYWwuZGlzcG9zZSgpfTtwYy5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dm9pZCAwIT09dGhpcy5jb2xvcj90aGlzLm1hdGVyaWFsLmNvbG9yLnNldCh0aGlzLmNvbG9yKTp0aGlzLm1hdGVyaWFsLmNvbG9yLmNvcHkodGhpcy5saWdodC5jb2xvcil9O3FjLnByb3RvdHlwZT1cbk9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpO3FjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1xYztxYy5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuY2hpbGRyZW5bMF0uZ2VvbWV0cnkuZGlzcG9zZSgpO3RoaXMuY2hpbGRyZW5bMF0ubWF0ZXJpYWwuZGlzcG9zZSgpfTtxYy5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGE9LjUqdGhpcy5saWdodC53aWR0aCxiPS41KnRoaXMubGlnaHQuaGVpZ2h0LGM9dGhpcy5saW5lLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24sZD1jLmFycmF5O2RbMF09YTtkWzFdPS1iO2RbMl09MDtkWzNdPWE7ZFs0XT1iO2RbNV09MDtkWzZdPS1hO2RbN109YjtkWzhdPTA7ZFs5XT0tYTtkWzEwXT0tYjtkWzExXT0wO2RbMTJdPWE7ZFsxM109LWI7ZFsxNF09MDtjLm5lZWRzVXBkYXRlPSEwO3ZvaWQgMCE9PXRoaXMuY29sb3I/dGhpcy5saW5lLm1hdGVyaWFsLmNvbG9yLnNldCh0aGlzLmNvbG9yKTp0aGlzLmxpbmUubWF0ZXJpYWwuY29sb3IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKX07XG5yYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSk7cmMucHJvdG90eXBlLmNvbnN0cnVjdG9yPXJjO3JjLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5jaGlsZHJlblswXS5nZW9tZXRyeS5kaXNwb3NlKCk7dGhpcy5jaGlsZHJlblswXS5tYXRlcmlhbC5kaXNwb3NlKCl9O3JjLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBILGM9bmV3IEg7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5jaGlsZHJlblswXTtpZih2b2lkIDAhPT10aGlzLmNvbG9yKXRoaXMubWF0ZXJpYWwuY29sb3Iuc2V0KHRoaXMuY29sb3IpO2Vsc2V7dmFyIGU9ZC5nZW9tZXRyeS5nZXRBdHRyaWJ1dGUoXCJjb2xvclwiKTtiLmNvcHkodGhpcy5saWdodC5jb2xvcik7Yy5jb3B5KHRoaXMubGlnaHQuZ3JvdW5kQ29sb3IpO2Zvcih2YXIgZj0wLGc9ZS5jb3VudDtmPGc7ZisrKXt2YXIgaD1mPGcvMj9iOmM7ZS5zZXRYWVooZixoLnIsaC5nLGguYil9ZS5uZWVkc1VwZGF0ZT1cbiEwfWQubG9va0F0KGEuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubGlnaHQubWF0cml4V29ybGQpLm5lZ2F0ZSgpKX19KCk7aWQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoWC5wcm90b3R5cGUpO2lkLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1pZDtSZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShYLnByb3RvdHlwZSk7UmQucHJvdG90eXBlLmNvbnN0cnVjdG9yPVJkO2pkLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFgucHJvdG90eXBlKTtqZC5wcm90b3R5cGUuY29uc3RydWN0b3I9amQ7amQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI9bmV3IHAsYz1uZXcgbWE7cmV0dXJuIGZ1bmN0aW9uKCl7dGhpcy5vYmplY3QudXBkYXRlTWF0cml4V29ybGQoITApO2MuZ2V0Tm9ybWFsTWF0cml4KHRoaXMub2JqZWN0Lm1hdHJpeFdvcmxkKTtmb3IodmFyIGQ9dGhpcy5vYmplY3QubWF0cml4V29ybGQsZT10aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24sXG5mPXRoaXMub2JqZWN0Lmdlb21ldHJ5LGc9Zi52ZXJ0aWNlcyxmPWYuZmFjZXMsaD0wLGs9MCxsPWYubGVuZ3RoO2s8bDtrKyspe3ZhciBwPWZba10sbj1wLm5vcm1hbDthLmNvcHkoZ1twLmFdKS5hZGQoZ1twLmJdKS5hZGQoZ1twLmNdKS5kaXZpZGVTY2FsYXIoMykuYXBwbHlNYXRyaXg0KGQpO2IuY29weShuKS5hcHBseU1hdHJpeDMoYykubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIodGhpcy5zaXplKS5hZGQoYSk7ZS5zZXRYWVooaCxhLngsYS55LGEueik7aCs9MTtlLnNldFhZWihoLGIueCxiLnksYi56KTtoKz0xfWUubmVlZHNVcGRhdGU9ITB9fSgpO3NjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKTtzYy5wcm90b3R5cGUuY29uc3RydWN0b3I9c2M7c2MucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmxpZ2h0UGxhbmUuZ2VvbWV0cnkuZGlzcG9zZSgpO3RoaXMubGlnaHRQbGFuZS5tYXRlcmlhbC5kaXNwb3NlKCk7dGhpcy50YXJnZXRMaW5lLmdlb21ldHJ5LmRpc3Bvc2UoKTtcbnRoaXMudGFyZ2V0TGluZS5tYXRlcmlhbC5kaXNwb3NlKCl9O3NjLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBwLGM9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKCl7YS5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5saWdodC5tYXRyaXhXb3JsZCk7Yi5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5saWdodC50YXJnZXQubWF0cml4V29ybGQpO2Muc3ViVmVjdG9ycyhiLGEpO3RoaXMubGlnaHRQbGFuZS5sb29rQXQoYyk7dm9pZCAwIT09dGhpcy5jb2xvcj8odGhpcy5saWdodFBsYW5lLm1hdGVyaWFsLmNvbG9yLnNldCh0aGlzLmNvbG9yKSx0aGlzLnRhcmdldExpbmUubWF0ZXJpYWwuY29sb3Iuc2V0KHRoaXMuY29sb3IpKToodGhpcy5saWdodFBsYW5lLm1hdGVyaWFsLmNvbG9yLmNvcHkodGhpcy5saWdodC5jb2xvciksdGhpcy50YXJnZXRMaW5lLm1hdGVyaWFsLmNvbG9yLmNvcHkodGhpcy5saWdodC5jb2xvcikpO3RoaXMudGFyZ2V0TGluZS5sb29rQXQoYyk7XG50aGlzLnRhcmdldExpbmUuc2NhbGUuej1jLmxlbmd0aCgpfX0oKTtrZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShYLnByb3RvdHlwZSk7a2QucHJvdG90eXBlLmNvbnN0cnVjdG9yPWtkO2tkLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsZyxoLGspe2Quc2V0KGcsaCxrKS51bnByb2plY3QoZSk7YT1jW2FdO2lmKHZvaWQgMCE9PWEpZm9yKGc9Yi5nZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiKSxoPTAsaz1hLmxlbmd0aDtoPGs7aCsrKWcuc2V0WFlaKGFbaF0sZC54LGQueSxkLnopfXZhciBiLGMsZD1uZXcgcCxlPW5ldyBUYTtyZXR1cm4gZnVuY3Rpb24oKXtiPXRoaXMuZ2VvbWV0cnk7Yz10aGlzLnBvaW50TWFwO2UucHJvamVjdGlvbk1hdHJpeC5jb3B5KHRoaXMuY2FtZXJhLnByb2plY3Rpb25NYXRyaXgpO2EoXCJjXCIsMCwwLC0xKTthKFwidFwiLDAsMCwxKTthKFwibjFcIiwtMSwtMSwtMSk7YShcIm4yXCIsMSwtMSwtMSk7YShcIm4zXCIsLTEsMSwtMSk7YShcIm40XCIsMSxcbjEsLTEpO2EoXCJmMVwiLC0xLC0xLDEpO2EoXCJmMlwiLDEsLTEsMSk7YShcImYzXCIsLTEsMSwxKTthKFwiZjRcIiwxLDEsMSk7YShcInUxXCIsLjcsMS4xLC0xKTthKFwidTJcIiwtLjcsMS4xLC0xKTthKFwidTNcIiwwLDIsLTEpO2EoXCJjZjFcIiwtMSwwLDEpO2EoXCJjZjJcIiwxLDAsMSk7YShcImNmM1wiLDAsLTEsMSk7YShcImNmNFwiLDAsMSwxKTthKFwiY24xXCIsLTEsMCwtMSk7YShcImNuMlwiLDEsMCwtMSk7YShcImNuM1wiLDAsLTEsLTEpO2EoXCJjbjRcIiwwLDEsLTEpO2IuZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIikubmVlZHNVcGRhdGU9ITB9fSgpO0diLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFgucHJvdG90eXBlKTtHYi5wcm90b3R5cGUuY29uc3RydWN0b3I9R2I7R2IucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBYYTtyZXR1cm4gZnVuY3Rpb24oYil7dm9pZCAwIT09YiYmY29uc29sZS53YXJuKFwiVEhSRUUuQm94SGVscGVyOiAudXBkYXRlKCkgaGFzIG5vIGxvbmdlciBhcmd1bWVudHMuXCIpO1xudm9pZCAwIT09dGhpcy5vYmplY3QmJmEuc2V0RnJvbU9iamVjdCh0aGlzLm9iamVjdCk7aWYoIWEuaXNFbXB0eSgpKXtiPWEubWluO3ZhciBjPWEubWF4LGQ9dGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLGU9ZC5hcnJheTtlWzBdPWMueDtlWzFdPWMueTtlWzJdPWMuejtlWzNdPWIueDtlWzRdPWMueTtlWzVdPWMuejtlWzZdPWIueDtlWzddPWIueTtlWzhdPWMuejtlWzldPWMueDtlWzEwXT1iLnk7ZVsxMV09Yy56O2VbMTJdPWMueDtlWzEzXT1jLnk7ZVsxNF09Yi56O2VbMTVdPWIueDtlWzE2XT1jLnk7ZVsxN109Yi56O2VbMThdPWIueDtlWzE5XT1iLnk7ZVsyMF09Yi56O2VbMjFdPWMueDtlWzIyXT1iLnk7ZVsyM109Yi56O2QubmVlZHNVcGRhdGU9ITA7dGhpcy5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKX19fSgpO0diLnByb3RvdHlwZS5zZXRGcm9tT2JqZWN0PWZ1bmN0aW9uKGEpe3RoaXMub2JqZWN0PWE7dGhpcy51cGRhdGUoKTtyZXR1cm4gdGhpc307XG5sZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShYLnByb3RvdHlwZSk7bGQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWxkO2xkLnByb3RvdHlwZS51cGRhdGVNYXRyaXhXb3JsZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmJveDtiLmlzRW1wdHkoKXx8KGIuZ2V0Q2VudGVyKHRoaXMucG9zaXRpb24pLGIuZ2V0U2l6ZSh0aGlzLnNjYWxlKSx0aGlzLnNjYWxlLm11bHRpcGx5U2NhbGFyKC41KSx4LnByb3RvdHlwZS51cGRhdGVNYXRyaXhXb3JsZC5jYWxsKHRoaXMsYSkpfTttZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShzYS5wcm90b3R5cGUpO21kLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1tZDttZC5wcm90b3R5cGUudXBkYXRlTWF0cml4V29ybGQ9ZnVuY3Rpb24oYSl7dmFyIGI9LXRoaXMucGxhbmUuY29uc3RhbnQ7MUUtOD5NYXRoLmFicyhiKSYmKGI9MUUtOCk7dGhpcy5zY2FsZS5zZXQoLjUqdGhpcy5zaXplLC41KnRoaXMuc2l6ZSxiKTt0aGlzLmxvb2tBdCh0aGlzLnBsYW5lLm5vcm1hbCk7XG54LnByb3RvdHlwZS51cGRhdGVNYXRyaXhXb3JsZC5jYWxsKHRoaXMsYSl9O3ZhciBTZCxDZTtIYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSk7SGIucHJvdG90eXBlLmNvbnN0cnVjdG9yPUhiO0hiLnByb3RvdHlwZS5zZXREaXJlY3Rpb249ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiO3JldHVybiBmdW5jdGlvbihjKXsuOTk5OTk8Yy55P3RoaXMucXVhdGVybmlvbi5zZXQoMCwwLDAsMSk6LS45OTk5OT5jLnk/dGhpcy5xdWF0ZXJuaW9uLnNldCgxLDAsMCwwKTooYS5zZXQoYy56LDAsLWMueCkubm9ybWFsaXplKCksYj1NYXRoLmFjb3MoYy55KSx0aGlzLnF1YXRlcm5pb24uc2V0RnJvbUF4aXNBbmdsZShhLGIpKX19KCk7SGIucHJvdG90eXBlLnNldExlbmd0aD1mdW5jdGlvbihhLGIsYyl7dm9pZCAwPT09YiYmKGI9LjIqYSk7dm9pZCAwPT09YyYmKGM9LjIqYik7dGhpcy5saW5lLnNjYWxlLnNldCgxLE1hdGgubWF4KDAsYS1iKSwxKTt0aGlzLmxpbmUudXBkYXRlTWF0cml4KCk7XG50aGlzLmNvbmUuc2NhbGUuc2V0KGMsYixjKTt0aGlzLmNvbmUucG9zaXRpb24ueT1hO3RoaXMuY29uZS51cGRhdGVNYXRyaXgoKX07SGIucHJvdG90eXBlLnNldENvbG9yPWZ1bmN0aW9uKGEpe3RoaXMubGluZS5tYXRlcmlhbC5jb2xvci5jb3B5KGEpO3RoaXMuY29uZS5tYXRlcmlhbC5jb2xvci5jb3B5KGEpfTtuZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShYLnByb3RvdHlwZSk7bmQucHJvdG90eXBlLmNvbnN0cnVjdG9yPW5kO0MuY3JlYXRlPWZ1bmN0aW9uKGEsYil7Y29uc29sZS5sb2coXCJUSFJFRS5DdXJ2ZS5jcmVhdGUoKSBoYXMgYmVlbiBkZXByZWNhdGVkXCIpO2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoQy5wcm90b3R5cGUpO2EucHJvdG90eXBlLmNvbnN0cnVjdG9yPWE7YS5wcm90b3R5cGUuZ2V0UG9pbnQ9YjtyZXR1cm4gYX07T2JqZWN0LmFzc2lnbihiYi5wcm90b3R5cGUse2NyZWF0ZVBvaW50c0dlb21ldHJ5OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkN1cnZlUGF0aDogLmNyZWF0ZVBvaW50c0dlb21ldHJ5KCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5HZW9tZXRyeSgpLnNldEZyb21Qb2ludHMoIHBvaW50cyApIGluc3RlYWQuXCIpO1xuYT10aGlzLmdldFBvaW50cyhhKTtyZXR1cm4gdGhpcy5jcmVhdGVHZW9tZXRyeShhKX0sY3JlYXRlU3BhY2VkUG9pbnRzR2VvbWV0cnk6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQ3VydmVQYXRoOiAuY3JlYXRlU3BhY2VkUG9pbnRzR2VvbWV0cnkoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkdlb21ldHJ5KCkuc2V0RnJvbVBvaW50cyggcG9pbnRzICkgaW5zdGVhZC5cIik7YT10aGlzLmdldFNwYWNlZFBvaW50cyhhKTtyZXR1cm4gdGhpcy5jcmVhdGVHZW9tZXRyeShhKX0sY3JlYXRlR2VvbWV0cnk6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQ3VydmVQYXRoOiAuY3JlYXRlR2VvbWV0cnkoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkdlb21ldHJ5KCkuc2V0RnJvbVBvaW50cyggcG9pbnRzICkgaW5zdGVhZC5cIik7Zm9yKHZhciBiPW5ldyBMLGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPWFbY107Yi52ZXJ0aWNlcy5wdXNoKG5ldyBwKGUueCxcbmUueSxlLnp8fDApKX1yZXR1cm4gYn19KTtPYmplY3QuYXNzaWduKFNhLnByb3RvdHlwZSx7ZnJvbVBvaW50czpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5QYXRoOiAuZnJvbVBvaW50cygpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEZyb21Qb2ludHMoKS5cIik7dGhpcy5zZXRGcm9tUG9pbnRzKGEpfX0pO3ZmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGNhLnByb3RvdHlwZSk7d2YucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoY2EucHJvdG90eXBlKTtEZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjYS5wcm90b3R5cGUpO09iamVjdC5hc3NpZ24oRGUucHJvdG90eXBlLHtpbml0RnJvbUFycmF5OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlNwbGluZTogLmluaXRGcm9tQXJyYXkoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sZ2V0Q29udHJvbFBvaW50c0FycmF5OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlNwbGluZTogLmdldENvbnRyb2xQb2ludHNBcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxcbnJlcGFyYW1ldHJpemVCeUFyY0xlbmd0aDpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5TcGxpbmU6IC5yZXBhcmFtZXRyaXplQnlBcmNMZW5ndGgoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX19KTtpZC5wcm90b3R5cGUuc2V0Q29sb3JzPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkdyaWRIZWxwZXI6IHNldENvbG9ycygpIGhhcyBiZWVuIGRlcHJlY2F0ZWQsIHBhc3MgdGhlbSBpbiB0aGUgY29uc3RydWN0b3IgaW5zdGVhZC5cIil9O29jLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuU2tlbGV0b25IZWxwZXI6IHVwZGF0ZSgpIG5vIGxvbmdlciBuZWVkcyB0byBiZSBjYWxsZWQuXCIpfTtPYmplY3QuYXNzaWduKGtjLnByb3RvdHlwZSx7ZXh0cmFjdFVybEJhc2U6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTG9hZGVyOiAuZXh0cmFjdFVybEJhc2UoKSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgVEhSRUUuTG9hZGVyVXRpbHMuZXh0cmFjdFVybEJhc2UoKSBpbnN0ZWFkLlwiKTtcbnJldHVybiBIZS5leHRyYWN0VXJsQmFzZShhKX19KTtPYmplY3QuYXNzaWduKG9kLnByb3RvdHlwZSx7Y2VudGVyOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkJveDI6IC5jZW50ZXIoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRDZW50ZXIoKS5cIik7cmV0dXJuIHRoaXMuZ2V0Q2VudGVyKGEpfSxlbXB0eTpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkJveDI6IC5lbXB0eSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmlzRW1wdHkoKS5cIik7cmV0dXJuIHRoaXMuaXNFbXB0eSgpfSxpc0ludGVyc2VjdGlvbkJveDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gyOiAuaXNJbnRlcnNlY3Rpb25Cb3goKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzQm94KCkuXCIpO3JldHVybiB0aGlzLmludGVyc2VjdHNCb3goYSl9LHNpemU6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQm94MjogLnNpemUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRTaXplKCkuXCIpO1xucmV0dXJuIHRoaXMuZ2V0U2l6ZShhKX19KTtPYmplY3QuYXNzaWduKFhhLnByb3RvdHlwZSx7Y2VudGVyOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkJveDM6IC5jZW50ZXIoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRDZW50ZXIoKS5cIik7cmV0dXJuIHRoaXMuZ2V0Q2VudGVyKGEpfSxlbXB0eTpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkJveDM6IC5lbXB0eSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmlzRW1wdHkoKS5cIik7cmV0dXJuIHRoaXMuaXNFbXB0eSgpfSxpc0ludGVyc2VjdGlvbkJveDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gzOiAuaXNJbnRlcnNlY3Rpb25Cb3goKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzQm94KCkuXCIpO3JldHVybiB0aGlzLmludGVyc2VjdHNCb3goYSl9LGlzSW50ZXJzZWN0aW9uU3BoZXJlOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkJveDM6IC5pc0ludGVyc2VjdGlvblNwaGVyZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmludGVyc2VjdHNTcGhlcmUoKS5cIik7XG5yZXR1cm4gdGhpcy5pbnRlcnNlY3RzU3BoZXJlKGEpfSxzaXplOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkJveDM6IC5zaXplKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0U2l6ZSgpLlwiKTtyZXR1cm4gdGhpcy5nZXRTaXplKGEpfX0pO05iLnByb3RvdHlwZS5jZW50ZXI9ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGluZTM6IC5jZW50ZXIoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRDZW50ZXIoKS5cIik7cmV0dXJuIHRoaXMuZ2V0Q2VudGVyKGEpfTtPYmplY3QuYXNzaWduKFEse3JhbmRvbTE2OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0aDogLnJhbmRvbTE2KCkgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIE1hdGgucmFuZG9tKCkgaW5zdGVhZC5cIik7cmV0dXJuIE1hdGgucmFuZG9tKCl9LG5lYXJlc3RQb3dlck9mVHdvOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdGg6IC5uZWFyZXN0UG93ZXJPZlR3bygpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmZsb29yUG93ZXJPZlR3bygpLlwiKTtcbnJldHVybiBRLmZsb29yUG93ZXJPZlR3byhhKX0sbmV4dFBvd2VyT2ZUd286ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0aDogLm5leHRQb3dlck9mVHdvKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuY2VpbFBvd2VyT2ZUd28oKS5cIik7cmV0dXJuIFEuY2VpbFBvd2VyT2ZUd28oYSl9fSk7T2JqZWN0LmFzc2lnbihtYS5wcm90b3R5cGUse2ZsYXR0ZW5Ub0FycmF5T2Zmc2V0OmZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4MzogLmZsYXR0ZW5Ub0FycmF5T2Zmc2V0KCkgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC50b0FycmF5KCkgaW5zdGVhZC5cIik7cmV0dXJuIHRoaXMudG9BcnJheShhLGIpfSxtdWx0aXBseVZlY3RvcjM6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4MzogLm11bHRpcGx5VmVjdG9yMygpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB2ZWN0b3IuYXBwbHlNYXRyaXgzKCBtYXRyaXggKSBpbnN0ZWFkLlwiKTtyZXR1cm4gYS5hcHBseU1hdHJpeDModGhpcyl9LFxubXVsdGlwbHlWZWN0b3IzQXJyYXk6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4MzogLm11bHRpcGx5VmVjdG9yM0FycmF5KCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LGFwcGx5VG9CdWZmZXI6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4MzogLmFwcGx5VG9CdWZmZXIoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbWF0cml4LmFwcGx5VG9CdWZmZXJBdHRyaWJ1dGUoIGF0dHJpYnV0ZSApIGluc3RlYWQuXCIpO3JldHVybiB0aGlzLmFwcGx5VG9CdWZmZXJBdHRyaWJ1dGUoYSl9LGFwcGx5VG9WZWN0b3IzQXJyYXk6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4MzogLmFwcGx5VG9WZWN0b3IzQXJyYXkoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX19KTtPYmplY3QuYXNzaWduKE8ucHJvdG90eXBlLHtleHRyYWN0UG9zaXRpb246ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLmV4dHJhY3RQb3NpdGlvbigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmNvcHlQb3NpdGlvbigpLlwiKTtcbnJldHVybiB0aGlzLmNvcHlQb3NpdGlvbihhKX0sZmxhdHRlblRvQXJyYXlPZmZzZXQ6ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAuZmxhdHRlblRvQXJyYXlPZmZzZXQoKSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLnRvQXJyYXkoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gdGhpcy50b0FycmF5KGEsYil9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGZ1bmN0aW9uKCl7dm9pZCAwPT09YSYmKGE9bmV3IHApO2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5nZXRQb3NpdGlvbigpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBWZWN0b3IzLnNldEZyb21NYXRyaXhQb3NpdGlvbiggbWF0cml4ICkgaW5zdGVhZC5cIik7cmV0dXJuIGEuc2V0RnJvbU1hdHJpeENvbHVtbih0aGlzLDMpfX0oKSxzZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5zZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24oKS5cIik7XG5yZXR1cm4gdGhpcy5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbihhKX0sbXVsdGlwbHlUb0FycmF5OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLm11bHRpcGx5VG9BcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxtdWx0aXBseVZlY3RvcjM6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLm11bHRpcGx5VmVjdG9yMygpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB2ZWN0b3IuYXBwbHlNYXRyaXg0KCBtYXRyaXggKSBpbnN0ZWFkLlwiKTtyZXR1cm4gYS5hcHBseU1hdHJpeDQodGhpcyl9LG11bHRpcGx5VmVjdG9yNDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAubXVsdGlwbHlWZWN0b3I0KCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHZlY3Rvci5hcHBseU1hdHJpeDQoIG1hdHJpeCApIGluc3RlYWQuXCIpO3JldHVybiBhLmFwcGx5TWF0cml4NCh0aGlzKX0sbXVsdGlwbHlWZWN0b3IzQXJyYXk6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLm11bHRpcGx5VmVjdG9yM0FycmF5KCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LFxucm90YXRlQXhpczpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAucm90YXRlQXhpcygpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBWZWN0b3IzLnRyYW5zZm9ybURpcmVjdGlvbiggbWF0cml4ICkgaW5zdGVhZC5cIik7YS50cmFuc2Zvcm1EaXJlY3Rpb24odGhpcyl9LGNyb3NzVmVjdG9yOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5jcm9zc1ZlY3RvcigpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB2ZWN0b3IuYXBwbHlNYXRyaXg0KCBtYXRyaXggKSBpbnN0ZWFkLlwiKTtyZXR1cm4gYS5hcHBseU1hdHJpeDQodGhpcyl9LHRyYW5zbGF0ZTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg0OiAudHJhbnNsYXRlKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHJvdGF0ZVg6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLnJvdGF0ZVgoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0scm90YXRlWTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg0OiAucm90YXRlWSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxcbnJvdGF0ZVo6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLnJvdGF0ZVooKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0scm90YXRlQnlBeGlzOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDQ6IC5yb3RhdGVCeUF4aXMoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sYXBwbHlUb0J1ZmZlcjpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAuYXBwbHlUb0J1ZmZlcigpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBtYXRyaXguYXBwbHlUb0J1ZmZlckF0dHJpYnV0ZSggYXR0cmlidXRlICkgaW5zdGVhZC5cIik7cmV0dXJuIHRoaXMuYXBwbHlUb0J1ZmZlckF0dHJpYnV0ZShhKX0sYXBwbHlUb1ZlY3RvcjNBcnJheTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg0OiAuYXBwbHlUb1ZlY3RvcjNBcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxtYWtlRnJ1c3R1bTpmdW5jdGlvbihhLGIsYyxkLGUsZil7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLm1ha2VGcnVzdHVtKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC5tYWtlUGVyc3BlY3RpdmUoIGxlZnQsIHJpZ2h0LCB0b3AsIGJvdHRvbSwgbmVhciwgZmFyICkgaW5zdGVhZC5cIik7XG5yZXR1cm4gdGhpcy5tYWtlUGVyc3BlY3RpdmUoYSxiLGQsYyxlLGYpfX0pO0VhLnByb3RvdHlwZS5pc0ludGVyc2VjdGlvbkxpbmU9ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUGxhbmU6IC5pc0ludGVyc2VjdGlvbkxpbmUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzTGluZSgpLlwiKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzTGluZShhKX07aGEucHJvdG90eXBlLm11bHRpcGx5VmVjdG9yMz1mdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5RdWF0ZXJuaW9uOiAubXVsdGlwbHlWZWN0b3IzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIGlzIG5vdyB2ZWN0b3IuYXBwbHlRdWF0ZXJuaW9uKCBxdWF0ZXJuaW9uICkgaW5zdGVhZC5cIik7cmV0dXJuIGEuYXBwbHlRdWF0ZXJuaW9uKHRoaXMpfTtPYmplY3QuYXNzaWduKHNiLnByb3RvdHlwZSx7aXNJbnRlcnNlY3Rpb25Cb3g6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUmF5OiAuaXNJbnRlcnNlY3Rpb25Cb3goKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzQm94KCkuXCIpO1xucmV0dXJuIHRoaXMuaW50ZXJzZWN0c0JveChhKX0saXNJbnRlcnNlY3Rpb25QbGFuZTpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5SYXk6IC5pc0ludGVyc2VjdGlvblBsYW5lKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c1BsYW5lKCkuXCIpO3JldHVybiB0aGlzLmludGVyc2VjdHNQbGFuZShhKX0saXNJbnRlcnNlY3Rpb25TcGhlcmU6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUmF5OiAuaXNJbnRlcnNlY3Rpb25TcGhlcmUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzU3BoZXJlKCkuXCIpO3JldHVybiB0aGlzLmludGVyc2VjdHNTcGhlcmUoYSl9fSk7T2JqZWN0LmFzc2lnbihqYi5wcm90b3R5cGUse2V4dHJhY3RBbGxQb2ludHM6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuU2hhcGU6IC5leHRyYWN0QWxsUG9pbnRzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC5leHRyYWN0UG9pbnRzKCkgaW5zdGVhZC5cIik7cmV0dXJuIHRoaXMuZXh0cmFjdFBvaW50cyhhKX0sXG5leHRydWRlOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlNoYXBlOiAuZXh0cnVkZSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBFeHRydWRlR2VvbWV0cnkoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IGliKHRoaXMsYSl9LG1ha2VHZW9tZXRyeTpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5TaGFwZTogLm1ha2VHZW9tZXRyeSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBTaGFwZUdlb21ldHJ5KCkgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyB4Yih0aGlzLGEpfX0pO09iamVjdC5hc3NpZ24oRC5wcm90b3R5cGUse2Zyb21BdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiLGMpe2NvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjI6IC5mcm9tQXR0cmlidXRlKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZnJvbUJ1ZmZlckF0dHJpYnV0ZSgpLlwiKTtyZXR1cm4gdGhpcy5mcm9tQnVmZmVyQXR0cmlidXRlKGEsYixjKX0sZGlzdGFuY2VUb01hbmhhdHRhbjpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IyOiAuZGlzdGFuY2VUb01hbmhhdHRhbigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLm1hbmhhdHRhbkRpc3RhbmNlVG8oKS5cIik7XG5yZXR1cm4gdGhpcy5tYW5oYXR0YW5EaXN0YW5jZVRvKGEpfSxsZW5ndGhNYW5oYXR0YW46ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IyOiAubGVuZ3RoTWFuaGF0dGFuKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAubWFuaGF0dGFuTGVuZ3RoKCkuXCIpO3JldHVybiB0aGlzLm1hbmhhdHRhbkxlbmd0aCgpfX0pO09iamVjdC5hc3NpZ24ocC5wcm90b3R5cGUse3NldEV1bGVyRnJvbVJvdGF0aW9uTWF0cml4OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlZlY3RvcjM6IC5zZXRFdWxlckZyb21Sb3RhdGlvbk1hdHJpeCgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBFdWxlci5zZXRGcm9tUm90YXRpb25NYXRyaXgoKSBpbnN0ZWFkLlwiKX0sc2V0RXVsZXJGcm9tUXVhdGVybmlvbjpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5WZWN0b3IzOiAuc2V0RXVsZXJGcm9tUXVhdGVybmlvbigpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBFdWxlci5zZXRGcm9tUXVhdGVybmlvbigpIGluc3RlYWQuXCIpfSxcbmdldFBvc2l0aW9uRnJvbU1hdHJpeDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuZ2V0UG9zaXRpb25Gcm9tTWF0cml4KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKCkuXCIpO3JldHVybiB0aGlzLnNldEZyb21NYXRyaXhQb3NpdGlvbihhKX0sZ2V0U2NhbGVGcm9tTWF0cml4OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5nZXRTY2FsZUZyb21NYXRyaXgoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5zZXRGcm9tTWF0cml4U2NhbGUoKS5cIik7cmV0dXJuIHRoaXMuc2V0RnJvbU1hdHJpeFNjYWxlKGEpfSxnZXRDb2x1bW5Gcm9tTWF0cml4OmZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmdldENvbHVtbkZyb21NYXRyaXgoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5zZXRGcm9tTWF0cml4Q29sdW1uKCkuXCIpO3JldHVybiB0aGlzLnNldEZyb21NYXRyaXhDb2x1bW4oYixcbmEpfSxhcHBseVByb2plY3Rpb246ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmFwcGx5UHJvamVjdGlvbigpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAuYXBwbHlNYXRyaXg0KCBtICkgaW5zdGVhZC5cIik7cmV0dXJuIHRoaXMuYXBwbHlNYXRyaXg0KGEpfSxmcm9tQXR0cmlidXRlOmZ1bmN0aW9uKGEsYixjKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuZnJvbUF0dHJpYnV0ZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmZyb21CdWZmZXJBdHRyaWJ1dGUoKS5cIik7cmV0dXJuIHRoaXMuZnJvbUJ1ZmZlckF0dHJpYnV0ZShhLGIsYyl9LGRpc3RhbmNlVG9NYW5oYXR0YW46ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmRpc3RhbmNlVG9NYW5oYXR0YW4oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5tYW5oYXR0YW5EaXN0YW5jZVRvKCkuXCIpO3JldHVybiB0aGlzLm1hbmhhdHRhbkRpc3RhbmNlVG8oYSl9LGxlbmd0aE1hbmhhdHRhbjpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5sZW5ndGhNYW5oYXR0YW4oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5tYW5oYXR0YW5MZW5ndGgoKS5cIik7XG5yZXR1cm4gdGhpcy5tYW5oYXR0YW5MZW5ndGgoKX19KTtPYmplY3QuYXNzaWduKGFhLnByb3RvdHlwZSx7ZnJvbUF0dHJpYnV0ZTpmdW5jdGlvbihhLGIsYyl7Y29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yNDogLmZyb21BdHRyaWJ1dGUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5mcm9tQnVmZmVyQXR0cmlidXRlKCkuXCIpO3JldHVybiB0aGlzLmZyb21CdWZmZXJBdHRyaWJ1dGUoYSxiLGMpfSxsZW5ndGhNYW5oYXR0YW46ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3I0OiAubGVuZ3RoTWFuaGF0dGFuKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAubWFuaGF0dGFuTGVuZ3RoKCkuXCIpO3JldHVybiB0aGlzLm1hbmhhdHRhbkxlbmd0aCgpfX0pO0wucHJvdG90eXBlLmNvbXB1dGVUYW5nZW50cz1mdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkdlb21ldHJ5OiAuY29tcHV0ZVRhbmdlbnRzKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9O09iamVjdC5hc3NpZ24oeC5wcm90b3R5cGUsXG57Z2V0Q2hpbGRCeU5hbWU6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0Q6IC5nZXRDaGlsZEJ5TmFtZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdldE9iamVjdEJ5TmFtZSgpLlwiKTtyZXR1cm4gdGhpcy5nZXRPYmplY3RCeU5hbWUoYSl9LHJlbmRlckRlcHRoOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0Q6IC5yZW5kZXJEZXB0aCBoYXMgYmVlbiByZW1vdmVkLiBVc2UgLnJlbmRlck9yZGVyLCBpbnN0ZWFkLlwiKX0sdHJhbnNsYXRlOmZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0Q6IC50cmFuc2xhdGUoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgLnRyYW5zbGF0ZU9uQXhpcyggYXhpcywgZGlzdGFuY2UgKSBpbnN0ZWFkLlwiKTtyZXR1cm4gdGhpcy50cmFuc2xhdGVPbkF4aXMoYixhKX19KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh4LnByb3RvdHlwZSx7ZXVsZXJPcmRlcjp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0Q6IC5ldWxlck9yZGVyIGlzIG5vdyAucm90YXRpb24ub3JkZXIuXCIpO1xucmV0dXJuIHRoaXMucm90YXRpb24ub3JkZXJ9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLmV1bGVyT3JkZXIgaXMgbm93IC5yb3RhdGlvbi5vcmRlci5cIik7dGhpcy5yb3RhdGlvbi5vcmRlcj1hfX0sdXNlUXVhdGVybmlvbjp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0Q6IC51c2VRdWF0ZXJuaW9uIGhhcyBiZWVuIHJlbW92ZWQuIFRoZSBsaWJyYXJ5IG5vdyB1c2VzIHF1YXRlcm5pb25zIGJ5IGRlZmF1bHQuXCIpfSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLnVzZVF1YXRlcm5pb24gaGFzIGJlZW4gcmVtb3ZlZC4gVGhlIGxpYnJhcnkgbm93IHVzZXMgcXVhdGVybmlvbnMgYnkgZGVmYXVsdC5cIil9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKERjLnByb3RvdHlwZSx7b2JqZWN0czp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTE9EOiAub2JqZWN0cyBoYXMgYmVlbiByZW5hbWVkIHRvIC5sZXZlbHMuXCIpO1xucmV0dXJuIHRoaXMubGV2ZWxzfX19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoRWMucHJvdG90eXBlLFwidXNlVmVydGV4VGV4dHVyZVwiLHtnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Ta2VsZXRvbjogdXNlVmVydGV4VGV4dHVyZSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sc2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuU2tlbGV0b246IHVzZVZlcnRleFRleHR1cmUgaGFzIGJlZW4gcmVtb3ZlZC5cIil9fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KEMucHJvdG90eXBlLFwiX19hcmNMZW5ndGhEaXZpc2lvbnNcIix7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQ3VydmU6IC5fX2FyY0xlbmd0aERpdmlzaW9ucyBpcyBub3cgLmFyY0xlbmd0aERpdmlzaW9ucy5cIik7cmV0dXJuIHRoaXMuYXJjTGVuZ3RoRGl2aXNpb25zfSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQ3VydmU6IC5fX2FyY0xlbmd0aERpdmlzaW9ucyBpcyBub3cgLmFyY0xlbmd0aERpdmlzaW9ucy5cIik7XG50aGlzLmFyY0xlbmd0aERpdmlzaW9ucz1hfX0pO2JhLnByb3RvdHlwZS5zZXRMZW5zPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEuc2V0TGVucyBpcyBkZXByZWNhdGVkLiBVc2UgLnNldEZvY2FsTGVuZ3RoIGFuZCAuZmlsbUdhdWdlIGZvciBhIHBob3RvZ3JhcGhpYyBzZXR1cC5cIik7dm9pZCAwIT09YiYmKHRoaXMuZmlsbUdhdWdlPWIpO3RoaXMuc2V0Rm9jYWxMZW5ndGgoYSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGRhLnByb3RvdHlwZSx7b25seVNoYWRvdzp7c2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5vbmx5U2hhZG93IGhhcyBiZWVuIHJlbW92ZWQuXCIpfX0sc2hhZG93Q2FtZXJhRm92OntzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFGb3YgaXMgbm93IC5zaGFkb3cuY2FtZXJhLmZvdi5cIik7dGhpcy5zaGFkb3cuY2FtZXJhLmZvdj1hfX0sXG5zaGFkb3dDYW1lcmFMZWZ0OntzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFMZWZ0IGlzIG5vdyAuc2hhZG93LmNhbWVyYS5sZWZ0LlwiKTt0aGlzLnNoYWRvdy5jYW1lcmEubGVmdD1hfX0sc2hhZG93Q2FtZXJhUmlnaHQ6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYVJpZ2h0IGlzIG5vdyAuc2hhZG93LmNhbWVyYS5yaWdodC5cIik7dGhpcy5zaGFkb3cuY2FtZXJhLnJpZ2h0PWF9fSxzaGFkb3dDYW1lcmFUb3A6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYVRvcCBpcyBub3cgLnNoYWRvdy5jYW1lcmEudG9wLlwiKTt0aGlzLnNoYWRvdy5jYW1lcmEudG9wPWF9fSxzaGFkb3dDYW1lcmFCb3R0b206e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYUJvdHRvbSBpcyBub3cgLnNoYWRvdy5jYW1lcmEuYm90dG9tLlwiKTtcbnRoaXMuc2hhZG93LmNhbWVyYS5ib3R0b209YX19LHNoYWRvd0NhbWVyYU5lYXI6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYU5lYXIgaXMgbm93IC5zaGFkb3cuY2FtZXJhLm5lYXIuXCIpO3RoaXMuc2hhZG93LmNhbWVyYS5uZWFyPWF9fSxzaGFkb3dDYW1lcmFGYXI6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYUZhciBpcyBub3cgLnNoYWRvdy5jYW1lcmEuZmFyLlwiKTt0aGlzLnNoYWRvdy5jYW1lcmEuZmFyPWF9fSxzaGFkb3dDYW1lcmFWaXNpYmxlOntzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYVZpc2libGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5DYW1lcmFIZWxwZXIoIGxpZ2h0LnNoYWRvdy5jYW1lcmEgKSBpbnN0ZWFkLlwiKX19LHNoYWRvd0JpYXM6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0JpYXMgaXMgbm93IC5zaGFkb3cuYmlhcy5cIik7XG50aGlzLnNoYWRvdy5iaWFzPWF9fSxzaGFkb3dEYXJrbmVzczp7c2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dEYXJrbmVzcyBoYXMgYmVlbiByZW1vdmVkLlwiKX19LHNoYWRvd01hcFdpZHRoOntzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dNYXBXaWR0aCBpcyBub3cgLnNoYWRvdy5tYXBTaXplLndpZHRoLlwiKTt0aGlzLnNoYWRvdy5tYXBTaXplLndpZHRoPWF9fSxzaGFkb3dNYXBIZWlnaHQ6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd01hcEhlaWdodCBpcyBub3cgLnNoYWRvdy5tYXBTaXplLmhlaWdodC5cIik7dGhpcy5zaGFkb3cubWFwU2l6ZS5oZWlnaHQ9YX19fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTS5wcm90b3R5cGUse2xlbmd0aDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlOiAubGVuZ3RoIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAuY291bnQgaW5zdGVhZC5cIik7XG5yZXR1cm4gdGhpcy5hcnJheS5sZW5ndGh9fX0pO09iamVjdC5hc3NpZ24oRS5wcm90b3R5cGUse2FkZEluZGV4OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuYWRkSW5kZXgoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5zZXRJbmRleCgpLlwiKTt0aGlzLnNldEluZGV4KGEpfSxhZGREcmF3Q2FsbDpmdW5jdGlvbihhLGIsYyl7dm9pZCAwIT09YyYmY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5hZGREcmF3Q2FsbCgpIG5vIGxvbmdlciBzdXBwb3J0cyBpbmRleE9mZnNldC5cIik7Y29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5hZGREcmF3Q2FsbCgpIGlzIG5vdyAuYWRkR3JvdXAoKS5cIik7dGhpcy5hZGRHcm91cChhLGIpfSxjbGVhckRyYXdDYWxsczpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuY2xlYXJEcmF3Q2FsbHMoKSBpcyBub3cgLmNsZWFyR3JvdXBzKCkuXCIpO1xudGhpcy5jbGVhckdyb3VwcygpfSxjb21wdXRlVGFuZ2VudHM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmNvbXB1dGVUYW5nZW50cygpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxjb21wdXRlT2Zmc2V0czpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuY29tcHV0ZU9mZnNldHMoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX19KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhFLnByb3RvdHlwZSx7ZHJhd2NhbGxzOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5kcmF3Y2FsbHMgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ3JvdXBzLlwiKTtyZXR1cm4gdGhpcy5ncm91cHN9fSxvZmZzZXRzOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLm9mZnNldHMgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ3JvdXBzLlwiKTtyZXR1cm4gdGhpcy5ncm91cHN9fX0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUWQucHJvdG90eXBlLHtkeW5hbWljOntzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Vbmlmb3JtOiAuZHluYW1pYyBoYXMgYmVlbiByZW1vdmVkLiBVc2Ugb2JqZWN0Lm9uQmVmb3JlUmVuZGVyKCkgaW5zdGVhZC5cIil9fSxvblVwZGF0ZTp7dmFsdWU6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Vbmlmb3JtOiAub25VcGRhdGUoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2Ugb2JqZWN0Lm9uQmVmb3JlUmVuZGVyKCkgaW5zdGVhZC5cIik7cmV0dXJuIHRoaXN9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFAucHJvdG90eXBlLHt3cmFwQXJvdW5kOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRlcmlhbDogLndyYXBBcm91bmQgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHNldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdGVyaWFsOiAud3JhcEFyb3VuZCBoYXMgYmVlbiByZW1vdmVkLlwiKX19LFxud3JhcFJHQjp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0ZXJpYWw6IC53cmFwUkdCIGhhcyBiZWVuIHJlbW92ZWQuXCIpO3JldHVybiBuZXcgSH19LHNoYWRpbmc6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5cIit0aGlzLnR5cGUrXCI6IC5zaGFkaW5nIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB0aGUgYm9vbGVhbiAuZmxhdFNoYWRpbmcgaW5zdGVhZC5cIil9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5cIit0aGlzLnR5cGUrXCI6IC5zaGFkaW5nIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB0aGUgYm9vbGVhbiAuZmxhdFNoYWRpbmcgaW5zdGVhZC5cIik7dGhpcy5mbGF0U2hhZGluZz0xPT09YX19fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTWEucHJvdG90eXBlLHttZXRhbDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWVzaFBob25nTWF0ZXJpYWw6IC5tZXRhbCBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwgaW5zdGVhZC5cIik7XG5yZXR1cm4hMX0sc2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWVzaFBob25nTWF0ZXJpYWw6IC5tZXRhbCBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwgaW5zdGVhZFwiKX19fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRmEucHJvdG90eXBlLHtkZXJpdmF0aXZlczp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuU2hhZGVyTWF0ZXJpYWw6IC5kZXJpdmF0aXZlcyBoYXMgYmVlbiBtb3ZlZCB0byAuZXh0ZW5zaW9ucy5kZXJpdmF0aXZlcy5cIik7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5kZXJpdmF0aXZlc30sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLiBTaGFkZXJNYXRlcmlhbDogLmRlcml2YXRpdmVzIGhhcyBiZWVuIG1vdmVkIHRvIC5leHRlbnNpb25zLmRlcml2YXRpdmVzLlwiKTt0aGlzLmV4dGVuc2lvbnMuZGVyaXZhdGl2ZXM9YX19fSk7T2JqZWN0LmFzc2lnbihjZS5wcm90b3R5cGUsXG57Z2V0Q3VycmVudFJlbmRlclRhcmdldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5nZXRDdXJyZW50UmVuZGVyVGFyZ2V0KCkgaXMgbm93IC5nZXRSZW5kZXJUYXJnZXQoKS5cIik7cmV0dXJuIHRoaXMuZ2V0UmVuZGVyVGFyZ2V0KCl9LGdldE1heEFuaXNvdHJvcHk6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuZ2V0TWF4QW5pc290cm9weSgpIGlzIG5vdyAuY2FwYWJpbGl0aWVzLmdldE1heEFuaXNvdHJvcHkoKS5cIik7cmV0dXJuIHRoaXMuY2FwYWJpbGl0aWVzLmdldE1heEFuaXNvdHJvcHkoKX0sZ2V0UHJlY2lzaW9uOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmdldFByZWNpc2lvbigpIGlzIG5vdyAuY2FwYWJpbGl0aWVzLnByZWNpc2lvbi5cIik7cmV0dXJuIHRoaXMuY2FwYWJpbGl0aWVzLnByZWNpc2lvbn0scmVzZXRHTFN0YXRlOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnJlc2V0R0xTdGF0ZSgpIGlzIG5vdyAuc3RhdGUucmVzZXQoKS5cIik7XG5yZXR1cm4gdGhpcy5zdGF0ZS5yZXNldCgpfSxzdXBwb3J0c0Zsb2F0VGV4dHVyZXM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNGbG9hdFRleHR1cmVzKCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggJ09FU190ZXh0dXJlX2Zsb2F0JyApLlwiKTtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmdldChcIk9FU190ZXh0dXJlX2Zsb2F0XCIpfSxzdXBwb3J0c0hhbGZGbG9hdFRleHR1cmVzOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnN1cHBvcnRzSGFsZkZsb2F0VGV4dHVyZXMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnT0VTX3RleHR1cmVfaGFsZl9mbG9hdCcgKS5cIik7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5nZXQoXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0XCIpfSxzdXBwb3J0c1N0YW5kYXJkRGVyaXZhdGl2ZXM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNTdGFuZGFyZERlcml2YXRpdmVzKCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggJ09FU19zdGFuZGFyZF9kZXJpdmF0aXZlcycgKS5cIik7XG5yZXR1cm4gdGhpcy5leHRlbnNpb25zLmdldChcIk9FU19zdGFuZGFyZF9kZXJpdmF0aXZlc1wiKX0sc3VwcG9ydHNDb21wcmVzc2VkVGV4dHVyZVMzVEM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNDb21wcmVzc2VkVGV4dHVyZVMzVEMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGMnICkuXCIpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIil9LHN1cHBvcnRzQ29tcHJlc3NlZFRleHR1cmVQVlJUQzpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c0NvbXByZXNzZWRUZXh0dXJlUFZSVEMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjJyApLlwiKTtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmdldChcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0Y1wiKX0sXG5zdXBwb3J0c0JsZW5kTWluTWF4OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnN1cHBvcnRzQmxlbmRNaW5NYXgoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnRVhUX2JsZW5kX21pbm1heCcgKS5cIik7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5nZXQoXCJFWFRfYmxlbmRfbWlubWF4XCIpfSxzdXBwb3J0c1ZlcnRleFRleHR1cmVzOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnN1cHBvcnRzVmVydGV4VGV4dHVyZXMoKSBpcyBub3cgLmNhcGFiaWxpdGllcy52ZXJ0ZXhUZXh0dXJlcy5cIik7cmV0dXJuIHRoaXMuY2FwYWJpbGl0aWVzLnZlcnRleFRleHR1cmVzfSxzdXBwb3J0c0luc3RhbmNlZEFycmF5czpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c0luc3RhbmNlZEFycmF5cygpIGlzIG5vdyAuZXh0ZW5zaW9ucy5nZXQoICdBTkdMRV9pbnN0YW5jZWRfYXJyYXlzJyApLlwiKTtcbnJldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KFwiQU5HTEVfaW5zdGFuY2VkX2FycmF5c1wiKX0sZW5hYmxlU2Npc3NvclRlc3Q6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmVuYWJsZVNjaXNzb3JUZXN0KCkgaXMgbm93IC5zZXRTY2lzc29yVGVzdCgpLlwiKTt0aGlzLnNldFNjaXNzb3JUZXN0KGEpfSxpbml0TWF0ZXJpYWw6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuaW5pdE1hdGVyaWFsKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LGFkZFByZVBsdWdpbjpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5hZGRQcmVQbHVnaW4oKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sYWRkUG9zdFBsdWdpbjpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5hZGRQb3N0UGx1Z2luKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHVwZGF0ZVNoYWRvd01hcDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC51cGRhdGVTaGFkb3dNYXAoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX19KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGNlLnByb3RvdHlwZSx7c2hhZG93TWFwRW5hYmxlZDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hhZG93TWFwLmVuYWJsZWR9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2hhZG93TWFwRW5hYmxlZCBpcyBub3cgLnNoYWRvd01hcC5lbmFibGVkLlwiKTt0aGlzLnNoYWRvd01hcC5lbmFibGVkPWF9fSxzaGFkb3dNYXBUeXBlOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaGFkb3dNYXAudHlwZX0sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zaGFkb3dNYXBUeXBlIGlzIG5vdyAuc2hhZG93TWFwLnR5cGUuXCIpO3RoaXMuc2hhZG93TWFwLnR5cGU9YX19LHNoYWRvd01hcEN1bGxGYWNlOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaGFkb3dNYXAuY3VsbEZhY2V9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2hhZG93TWFwQ3VsbEZhY2UgaXMgbm93IC5zaGFkb3dNYXAuY3VsbEZhY2UuXCIpO1xudGhpcy5zaGFkb3dNYXAuY3VsbEZhY2U9YX19fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVWUucHJvdG90eXBlLHtjdWxsRmFjZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyUmV2ZXJzZVNpZGVkPzI6MX0sc2V0OmZ1bmN0aW9uKGEpe2E9MSE9PWE7Y29uc29sZS53YXJuKFwiV2ViR0xSZW5kZXJlcjogLnNoYWRvd01hcC5jdWxsRmFjZSBpcyBkZXByZWNhdGVkLiBTZXQgLnNoYWRvd01hcC5yZW5kZXJSZXZlcnNlU2lkZWQgdG8gXCIrYStcIi5cIik7dGhpcy5yZW5kZXJSZXZlcnNlU2lkZWQ9YX19fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoa2IucHJvdG90eXBlLHt3cmFwUzp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC53cmFwUyBpcyBub3cgLnRleHR1cmUud3JhcFMuXCIpO3JldHVybiB0aGlzLnRleHR1cmUud3JhcFN9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLndyYXBTIGlzIG5vdyAudGV4dHVyZS53cmFwUy5cIik7XG50aGlzLnRleHR1cmUud3JhcFM9YX19LHdyYXBUOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLndyYXBUIGlzIG5vdyAudGV4dHVyZS53cmFwVC5cIik7cmV0dXJuIHRoaXMudGV4dHVyZS53cmFwVH0sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAud3JhcFQgaXMgbm93IC50ZXh0dXJlLndyYXBULlwiKTt0aGlzLnRleHR1cmUud3JhcFQ9YX19LG1hZ0ZpbHRlcjp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5tYWdGaWx0ZXIgaXMgbm93IC50ZXh0dXJlLm1hZ0ZpbHRlci5cIik7cmV0dXJuIHRoaXMudGV4dHVyZS5tYWdGaWx0ZXJ9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLm1hZ0ZpbHRlciBpcyBub3cgLnRleHR1cmUubWFnRmlsdGVyLlwiKTt0aGlzLnRleHR1cmUubWFnRmlsdGVyPVxuYX19LG1pbkZpbHRlcjp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5taW5GaWx0ZXIgaXMgbm93IC50ZXh0dXJlLm1pbkZpbHRlci5cIik7cmV0dXJuIHRoaXMudGV4dHVyZS5taW5GaWx0ZXJ9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLm1pbkZpbHRlciBpcyBub3cgLnRleHR1cmUubWluRmlsdGVyLlwiKTt0aGlzLnRleHR1cmUubWluRmlsdGVyPWF9fSxhbmlzb3Ryb3B5OntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLmFuaXNvdHJvcHkgaXMgbm93IC50ZXh0dXJlLmFuaXNvdHJvcHkuXCIpO3JldHVybiB0aGlzLnRleHR1cmUuYW5pc290cm9weX0sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAuYW5pc290cm9weSBpcyBub3cgLnRleHR1cmUuYW5pc290cm9weS5cIik7dGhpcy50ZXh0dXJlLmFuaXNvdHJvcHk9XG5hfX0sb2Zmc2V0OntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLm9mZnNldCBpcyBub3cgLnRleHR1cmUub2Zmc2V0LlwiKTtyZXR1cm4gdGhpcy50ZXh0dXJlLm9mZnNldH0sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAub2Zmc2V0IGlzIG5vdyAudGV4dHVyZS5vZmZzZXQuXCIpO3RoaXMudGV4dHVyZS5vZmZzZXQ9YX19LHJlcGVhdDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5yZXBlYXQgaXMgbm93IC50ZXh0dXJlLnJlcGVhdC5cIik7cmV0dXJuIHRoaXMudGV4dHVyZS5yZXBlYXR9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLnJlcGVhdCBpcyBub3cgLnRleHR1cmUucmVwZWF0LlwiKTt0aGlzLnRleHR1cmUucmVwZWF0PWF9fSxmb3JtYXQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAuZm9ybWF0IGlzIG5vdyAudGV4dHVyZS5mb3JtYXQuXCIpO1xucmV0dXJuIHRoaXMudGV4dHVyZS5mb3JtYXR9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLmZvcm1hdCBpcyBub3cgLnRleHR1cmUuZm9ybWF0LlwiKTt0aGlzLnRleHR1cmUuZm9ybWF0PWF9fSx0eXBlOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLnR5cGUgaXMgbm93IC50ZXh0dXJlLnR5cGUuXCIpO3JldHVybiB0aGlzLnRleHR1cmUudHlwZX0sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAudHlwZSBpcyBub3cgLnRleHR1cmUudHlwZS5cIik7dGhpcy50ZXh0dXJlLnR5cGU9YX19LGdlbmVyYXRlTWlwbWFwczp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5nZW5lcmF0ZU1pcG1hcHMgaXMgbm93IC50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcy5cIik7cmV0dXJuIHRoaXMudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHN9LFxuc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAuZ2VuZXJhdGVNaXBtYXBzIGlzIG5vdyAudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHMuXCIpO3RoaXMudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM9YX19fSk7T2JqZWN0LmFzc2lnbihiZS5wcm90b3R5cGUse2dldFN0YW5kaW5nTWF0cml4OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViVlJNYW5hZ2VyOiAuZ2V0U3RhbmRpbmdNYXRyaXgoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX19KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhiZS5wcm90b3R5cGUse3N0YW5kaW5nOntzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJWUk1hbmFnZXI6IC5zdGFuZGluZyBoYXMgYmVlbiByZW1vdmVkLlwiKX19fSk7bGMucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IC5sb2FkIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSBUSFJFRS5BdWRpb0xvYWRlciBpbnN0ZWFkLlwiKTtcbnZhciBiPXRoaXM7KG5ldyBxZSkubG9hZChhLGZ1bmN0aW9uKGEpe2Iuc2V0QnVmZmVyKGEpfSk7cmV0dXJuIHRoaXN9O3VlLnByb3RvdHlwZS5nZXREYXRhPWZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW9BbmFseXNlcjogLmdldERhdGEoKSBpcyBub3cgLmdldEZyZXF1ZW5jeURhdGEoKS5cIik7cmV0dXJuIHRoaXMuZ2V0RnJlcXVlbmN5RGF0YSgpfTtmZC5wcm90b3R5cGUudXBkYXRlQ3ViZU1hcD1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLkN1YmVDYW1lcmE6IC51cGRhdGVDdWJlTWFwKCkgaXMgbm93IC51cGRhdGUoKS5cIik7cmV0dXJuIHRoaXMudXBkYXRlKGEsYil9O2wuV2ViR0xSZW5kZXJUYXJnZXRDdWJlPUpiO2wuV2ViR0xSZW5kZXJUYXJnZXQ9a2I7bC5XZWJHTFJlbmRlcmVyPWNlO2wuU2hhZGVyTGliPXRiO2wuVW5pZm9ybXNMaWI9SztsLlVuaWZvcm1zVXRpbHM9R2E7bC5TaGFkZXJDaHVuaz1SO2wuRm9nRXhwMj1QYjtsLkZvZz1RYjtcbmwuU2NlbmU9dmQ7bC5MZW5zRmxhcmU9ZGU7bC5TcHJpdGU9Q2M7bC5MT0Q9RGM7bC5Ta2lubmVkTWVzaD14ZDtsLlNrZWxldG9uPUVjO2wuQm9uZT13ZDtsLk1lc2g9cmE7bC5MaW5lU2VnbWVudHM9WDtsLkxpbmVMb29wPXlkO2wuTGluZT1zYTtsLlBvaW50cz1SYjtsLkdyb3VwPUZjO2wuVmlkZW9UZXh0dXJlPWVlO2wuRGF0YVRleHR1cmU9bGI7bC5Db21wcmVzc2VkVGV4dHVyZT1TYjtsLkN1YmVUZXh0dXJlPWRiO2wuQ2FudmFzVGV4dHVyZT10YztsLkRlcHRoVGV4dHVyZT1HYztsLlRleHR1cmU9VTtsLkNvbXByZXNzZWRUZXh0dXJlTG9hZGVyPWdmO2wuRGF0YVRleHR1cmVMb2FkZXI9aWU7bC5DdWJlVGV4dHVyZUxvYWRlcj1qZTtsLlRleHR1cmVMb2FkZXI9QWQ7bC5PYmplY3RMb2FkZXI9amY7bC5NYXRlcmlhbExvYWRlcj1QZDtsLkJ1ZmZlckdlb21ldHJ5TG9hZGVyPWxlO2wuRGVmYXVsdExvYWRpbmdNYW5hZ2VyPXhhO2wuTG9hZGluZ01hbmFnZXI9aGU7bC5KU09OTG9hZGVyPVxubWU7bC5JbWFnZUxvYWRlcj1hZDtsLkltYWdlQml0bWFwTG9hZGVyPW5lO2wuRm9udExvYWRlcj1rZjtsLkZpbGVMb2FkZXI9TmE7bC5Mb2FkZXI9a2M7bC5Mb2FkZXJVdGlscz1IZTtsLkNhY2hlPUliO2wuQXVkaW9Mb2FkZXI9cWU7bC5TcG90TGlnaHRTaGFkb3c9Q2Q7bC5TcG90TGlnaHQ9RGQ7bC5Qb2ludExpZ2h0PUVkO2wuUmVjdEFyZWFMaWdodD1JZDtsLkhlbWlzcGhlcmVMaWdodD1CZDtsLkRpcmVjdGlvbmFsTGlnaHRTaGFkb3c9RmQ7bC5EaXJlY3Rpb25hbExpZ2h0PUdkO2wuQW1iaWVudExpZ2h0PUhkO2wuTGlnaHRTaGFkb3c9RmI7bC5MaWdodD1kYTtsLlN0ZXJlb0NhbWVyYT1sZjtsLlBlcnNwZWN0aXZlQ2FtZXJhPWJhO2wuT3J0aG9ncmFwaGljQ2FtZXJhPUxiO2wuQ3ViZUNhbWVyYT1mZDtsLkFycmF5Q2FtZXJhPXVkO2wuQ2FtZXJhPVRhO2wuQXVkaW9MaXN0ZW5lcj1yZTtsLlBvc2l0aW9uYWxBdWRpbz10ZTtsLkF1ZGlvQ29udGV4dD1zZTtsLkF1ZGlvQW5hbHlzZXI9XG51ZTtsLkF1ZGlvPWxjO2wuVmVjdG9yS2V5ZnJhbWVUcmFjaz1qYztsLlN0cmluZ0tleWZyYW1lVHJhY2s9SmQ7bC5RdWF0ZXJuaW9uS2V5ZnJhbWVUcmFjaz1kZDtsLk51bWJlcktleWZyYW1lVHJhY2s9aWM7bC5Db2xvcktleWZyYW1lVHJhY2s9TWQ7bC5Cb29sZWFuS2V5ZnJhbWVUcmFjaz1LZDtsLlByb3BlcnR5TWl4ZXI9dmU7bC5Qcm9wZXJ0eUJpbmRpbmc9cWE7bC5LZXlmcmFtZVRyYWNrPVQ7bC5BbmltYXRpb25VdGlscz1nYTtsLkFuaW1hdGlvbk9iamVjdEdyb3VwPW5mO2wuQW5pbWF0aW9uTWl4ZXI9d2U7bC5BbmltYXRpb25DbGlwPUNhO2wuVW5pZm9ybT1RZDtsLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5PXhlO2wuQnVmZmVyR2VvbWV0cnk9RTtsLkdlb21ldHJ5PUw7bC5JbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZT15ZTtsLkluc3RhbmNlZEludGVybGVhdmVkQnVmZmVyPXplO2wuSW50ZXJsZWF2ZWRCdWZmZXI9bWM7bC5JbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGU9QWU7XG5sLkZhY2UzPVlhO2wuT2JqZWN0M0Q9eDtsLlJheWNhc3Rlcj1wZjtsLkxheWVycz1XZDtsLkV2ZW50RGlzcGF0Y2hlcj16YTtsLkNsb2NrPXJmO2wuUXVhdGVybmlvbkxpbmVhckludGVycG9sYW50PUxkO2wuTGluZWFySW50ZXJwb2xhbnQ9ZWQ7bC5EaXNjcmV0ZUludGVycG9sYW50PU9kO2wuQ3ViaWNJbnRlcnBvbGFudD1OZDtsLkludGVycG9sYW50PXBhO2wuVHJpYW5nbGU9WmE7bC5NYXRoPVE7bC5TcGhlcmljYWw9c2Y7bC5DeWxpbmRyaWNhbD10ZjtsLlBsYW5lPUVhO2wuRnJ1c3R1bT1yZDtsLlNwaGVyZT1JYTtsLlJheT1zYjtsLk1hdHJpeDQ9TztsLk1hdHJpeDM9bWE7bC5Cb3gzPVhhO2wuQm94Mj1vZDtsLkxpbmUzPU5iO2wuRXVsZXI9Z2I7bC5WZWN0b3I0PWFhO2wuVmVjdG9yMz1wO2wuVmVjdG9yMj1EO2wuUXVhdGVybmlvbj1oYTtsLkNvbG9yPUg7bC5JbW1lZGlhdGVSZW5kZXJPYmplY3Q9Z2Q7bC5WZXJ0ZXhOb3JtYWxzSGVscGVyPWhkO2wuU3BvdExpZ2h0SGVscGVyPVxubmM7bC5Ta2VsZXRvbkhlbHBlcj1vYztsLlBvaW50TGlnaHRIZWxwZXI9cGM7bC5SZWN0QXJlYUxpZ2h0SGVscGVyPXFjO2wuSGVtaXNwaGVyZUxpZ2h0SGVscGVyPXJjO2wuR3JpZEhlbHBlcj1pZDtsLlBvbGFyR3JpZEhlbHBlcj1SZDtsLkZhY2VOb3JtYWxzSGVscGVyPWpkO2wuRGlyZWN0aW9uYWxMaWdodEhlbHBlcj1zYztsLkNhbWVyYUhlbHBlcj1rZDtsLkJveEhlbHBlcj1HYjtsLkJveDNIZWxwZXI9bGQ7bC5QbGFuZUhlbHBlcj1tZDtsLkFycm93SGVscGVyPUhiO2wuQXhlc0hlbHBlcj1uZDtsLlNoYXBlPWpiO2wuUGF0aD1TYTtsLlNoYXBlUGF0aD1vZTtsLkZvbnQ9cGU7bC5DdXJ2ZVBhdGg9YmI7bC5DdXJ2ZT1DO2wuU2hhcGVVdGlscz0kYTtsLlNjZW5lVXRpbHM9e2NyZWF0ZU11bHRpTWF0ZXJpYWxPYmplY3Q6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9bmV3IEZjLGQ9MCxlPWIubGVuZ3RoO2Q8ZTtkKyspYy5hZGQobmV3IHJhKGEsYltkXSkpO3JldHVybiBjfSxkZXRhY2g6ZnVuY3Rpb24oYSxcbmIsYyl7YS5hcHBseU1hdHJpeChiLm1hdHJpeFdvcmxkKTtiLnJlbW92ZShhKTtjLmFkZChhKX0sYXR0YWNoOmZ1bmN0aW9uKGEsYixjKXthLmFwcGx5TWF0cml4KChuZXcgTykuZ2V0SW52ZXJzZShjLm1hdHJpeFdvcmxkKSk7Yi5yZW1vdmUoYSk7Yy5hZGQoYSl9fTtsLldlYkdMVXRpbHM9YWY7bC5XaXJlZnJhbWVHZW9tZXRyeT1UYjtsLlBhcmFtZXRyaWNHZW9tZXRyeT1IYztsLlBhcmFtZXRyaWNCdWZmZXJHZW9tZXRyeT1VYjtsLlRldHJhaGVkcm9uR2VvbWV0cnk9SmM7bC5UZXRyYWhlZHJvbkJ1ZmZlckdlb21ldHJ5PVZiO2wuT2N0YWhlZHJvbkdlb21ldHJ5PUtjO2wuT2N0YWhlZHJvbkJ1ZmZlckdlb21ldHJ5PXViO2wuSWNvc2FoZWRyb25HZW9tZXRyeT1MYztsLkljb3NhaGVkcm9uQnVmZmVyR2VvbWV0cnk9V2I7bC5Eb2RlY2FoZWRyb25HZW9tZXRyeT1NYztsLkRvZGVjYWhlZHJvbkJ1ZmZlckdlb21ldHJ5PVhiO2wuUG9seWhlZHJvbkdlb21ldHJ5PUljO2wuUG9seWhlZHJvbkJ1ZmZlckdlb21ldHJ5PVxuamE7bC5UdWJlR2VvbWV0cnk9TmM7bC5UdWJlQnVmZmVyR2VvbWV0cnk9WWI7bC5Ub3J1c0tub3RHZW9tZXRyeT1PYztsLlRvcnVzS25vdEJ1ZmZlckdlb21ldHJ5PVpiO2wuVG9ydXNHZW9tZXRyeT1QYztsLlRvcnVzQnVmZmVyR2VvbWV0cnk9JGI7bC5UZXh0R2VvbWV0cnk9VWM7bC5UZXh0QnVmZmVyR2VvbWV0cnk9YWM7bC5TcGhlcmVHZW9tZXRyeT1WYztsLlNwaGVyZUJ1ZmZlckdlb21ldHJ5PXdiO2wuUmluZ0dlb21ldHJ5PVdjO2wuUmluZ0J1ZmZlckdlb21ldHJ5PWJjO2wuUGxhbmVHZW9tZXRyeT1BYztsLlBsYW5lQnVmZmVyR2VvbWV0cnk9cmI7bC5MYXRoZUdlb21ldHJ5PVhjO2wuTGF0aGVCdWZmZXJHZW9tZXRyeT1jYztsLlNoYXBlR2VvbWV0cnk9eGI7bC5TaGFwZUJ1ZmZlckdlb21ldHJ5PXliO2wuRXh0cnVkZUdlb21ldHJ5PWliO2wuRXh0cnVkZUJ1ZmZlckdlb21ldHJ5PUxhO2wuRWRnZXNHZW9tZXRyeT1kYztsLkNvbmVHZW9tZXRyeT1ZYztsLkNvbmVCdWZmZXJHZW9tZXRyeT1cblpjO2wuQ3lsaW5kZXJHZW9tZXRyeT16YjtsLkN5bGluZGVyQnVmZmVyR2VvbWV0cnk9YWI7bC5DaXJjbGVHZW9tZXRyeT0kYztsLkNpcmNsZUJ1ZmZlckdlb21ldHJ5PWVjO2wuQm94R2VvbWV0cnk9TWI7bC5Cb3hCdWZmZXJHZW9tZXRyeT1xYjtsLlNoYWRvd01hdGVyaWFsPWZjO2wuU3ByaXRlTWF0ZXJpYWw9aGI7bC5SYXdTaGFkZXJNYXRlcmlhbD1nYztsLlNoYWRlck1hdGVyaWFsPUZhO2wuUG9pbnRzTWF0ZXJpYWw9S2E7bC5NZXNoUGh5c2ljYWxNYXRlcmlhbD1BYjtsLk1lc2hTdGFuZGFyZE1hdGVyaWFsPVVhO2wuTWVzaFBob25nTWF0ZXJpYWw9TWE7bC5NZXNoVG9vbk1hdGVyaWFsPUJiO2wuTWVzaE5vcm1hbE1hdGVyaWFsPUNiO2wuTWVzaExhbWJlcnRNYXRlcmlhbD1EYjtsLk1lc2hEZXB0aE1hdGVyaWFsPWViO2wuTWVzaERpc3RhbmNlTWF0ZXJpYWw9ZmI7bC5NZXNoQmFzaWNNYXRlcmlhbD1BYTtsLkxpbmVEYXNoZWRNYXRlcmlhbD1FYjtsLkxpbmVCYXNpY01hdGVyaWFsPVxuVztsLk1hdGVyaWFsPVA7bC5GbG9hdDY0QnVmZmVyQXR0cmlidXRlPXpjO2wuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZT1CO2wuVWludDMyQnVmZmVyQXR0cmlidXRlPXBiO2wuSW50MzJCdWZmZXJBdHRyaWJ1dGU9eWM7bC5VaW50MTZCdWZmZXJBdHRyaWJ1dGU9b2I7bC5JbnQxNkJ1ZmZlckF0dHJpYnV0ZT14YztsLlVpbnQ4Q2xhbXBlZEJ1ZmZlckF0dHJpYnV0ZT13YztsLlVpbnQ4QnVmZmVyQXR0cmlidXRlPXZjO2wuSW50OEJ1ZmZlckF0dHJpYnV0ZT11YztsLkJ1ZmZlckF0dHJpYnV0ZT1NO2wuQXJjQ3VydmU9aGM7bC5DYXRtdWxsUm9tQ3VydmUzPWNhO2wuQ3ViaWNCZXppZXJDdXJ2ZT1PYTtsLkN1YmljQmV6aWVyQ3VydmUzPVZhO2wuRWxsaXBzZUN1cnZlPUJhO2wuTGluZUN1cnZlPXlhO2wuTGluZUN1cnZlMz1QYTtsLlF1YWRyYXRpY0JlemllckN1cnZlPVFhO2wuUXVhZHJhdGljQmV6aWVyQ3VydmUzPVdhO2wuU3BsaW5lQ3VydmU9UmE7bC5SRVZJU0lPTj1cIjg5XCI7bC5NT1VTRT1cbntMRUZUOjAsTUlERExFOjEsUklHSFQ6Mn07bC5DdWxsRmFjZU5vbmU9MDtsLkN1bGxGYWNlQmFjaz0xO2wuQ3VsbEZhY2VGcm9udD0yO2wuQ3VsbEZhY2VGcm9udEJhY2s9MztsLkZyb250RmFjZURpcmVjdGlvbkNXPTA7bC5Gcm9udEZhY2VEaXJlY3Rpb25DQ1c9MTtsLkJhc2ljU2hhZG93TWFwPTA7bC5QQ0ZTaGFkb3dNYXA9MTtsLlBDRlNvZnRTaGFkb3dNYXA9MjtsLkZyb250U2lkZT0wO2wuQmFja1NpZGU9MTtsLkRvdWJsZVNpZGU9MjtsLkZsYXRTaGFkaW5nPTE7bC5TbW9vdGhTaGFkaW5nPTI7bC5Ob0NvbG9ycz0wO2wuRmFjZUNvbG9ycz0xO2wuVmVydGV4Q29sb3JzPTI7bC5Ob0JsZW5kaW5nPTA7bC5Ob3JtYWxCbGVuZGluZz0xO2wuQWRkaXRpdmVCbGVuZGluZz0yO2wuU3VidHJhY3RpdmVCbGVuZGluZz0zO2wuTXVsdGlwbHlCbGVuZGluZz00O2wuQ3VzdG9tQmxlbmRpbmc9NTtsLkFkZEVxdWF0aW9uPTEwMDtsLlN1YnRyYWN0RXF1YXRpb249MTAxO2wuUmV2ZXJzZVN1YnRyYWN0RXF1YXRpb249XG4xMDI7bC5NaW5FcXVhdGlvbj0xMDM7bC5NYXhFcXVhdGlvbj0xMDQ7bC5aZXJvRmFjdG9yPTIwMDtsLk9uZUZhY3Rvcj0yMDE7bC5TcmNDb2xvckZhY3Rvcj0yMDI7bC5PbmVNaW51c1NyY0NvbG9yRmFjdG9yPTIwMztsLlNyY0FscGhhRmFjdG9yPTIwNDtsLk9uZU1pbnVzU3JjQWxwaGFGYWN0b3I9MjA1O2wuRHN0QWxwaGFGYWN0b3I9MjA2O2wuT25lTWludXNEc3RBbHBoYUZhY3Rvcj0yMDc7bC5Ec3RDb2xvckZhY3Rvcj0yMDg7bC5PbmVNaW51c0RzdENvbG9yRmFjdG9yPTIwOTtsLlNyY0FscGhhU2F0dXJhdGVGYWN0b3I9MjEwO2wuTmV2ZXJEZXB0aD0wO2wuQWx3YXlzRGVwdGg9MTtsLkxlc3NEZXB0aD0yO2wuTGVzc0VxdWFsRGVwdGg9MztsLkVxdWFsRGVwdGg9NDtsLkdyZWF0ZXJFcXVhbERlcHRoPTU7bC5HcmVhdGVyRGVwdGg9NjtsLk5vdEVxdWFsRGVwdGg9NztsLk11bHRpcGx5T3BlcmF0aW9uPTA7bC5NaXhPcGVyYXRpb249MTtsLkFkZE9wZXJhdGlvbj0yO2wuTm9Ub25lTWFwcGluZz1cbjA7bC5MaW5lYXJUb25lTWFwcGluZz0xO2wuUmVpbmhhcmRUb25lTWFwcGluZz0yO2wuVW5jaGFydGVkMlRvbmVNYXBwaW5nPTM7bC5DaW5lb25Ub25lTWFwcGluZz00O2wuVVZNYXBwaW5nPTMwMDtsLkN1YmVSZWZsZWN0aW9uTWFwcGluZz0zMDE7bC5DdWJlUmVmcmFjdGlvbk1hcHBpbmc9MzAyO2wuRXF1aXJlY3Rhbmd1bGFyUmVmbGVjdGlvbk1hcHBpbmc9MzAzO2wuRXF1aXJlY3Rhbmd1bGFyUmVmcmFjdGlvbk1hcHBpbmc9MzA0O2wuU3BoZXJpY2FsUmVmbGVjdGlvbk1hcHBpbmc9MzA1O2wuQ3ViZVVWUmVmbGVjdGlvbk1hcHBpbmc9MzA2O2wuQ3ViZVVWUmVmcmFjdGlvbk1hcHBpbmc9MzA3O2wuUmVwZWF0V3JhcHBpbmc9MUUzO2wuQ2xhbXBUb0VkZ2VXcmFwcGluZz0xMDAxO2wuTWlycm9yZWRSZXBlYXRXcmFwcGluZz0xMDAyO2wuTmVhcmVzdEZpbHRlcj0xMDAzO2wuTmVhcmVzdE1pcE1hcE5lYXJlc3RGaWx0ZXI9MTAwNDtsLk5lYXJlc3RNaXBNYXBMaW5lYXJGaWx0ZXI9MTAwNTtcbmwuTGluZWFyRmlsdGVyPTEwMDY7bC5MaW5lYXJNaXBNYXBOZWFyZXN0RmlsdGVyPTEwMDc7bC5MaW5lYXJNaXBNYXBMaW5lYXJGaWx0ZXI9MTAwODtsLlVuc2lnbmVkQnl0ZVR5cGU9MTAwOTtsLkJ5dGVUeXBlPTEwMTA7bC5TaG9ydFR5cGU9MTAxMTtsLlVuc2lnbmVkU2hvcnRUeXBlPTEwMTI7bC5JbnRUeXBlPTEwMTM7bC5VbnNpZ25lZEludFR5cGU9MTAxNDtsLkZsb2F0VHlwZT0xMDE1O2wuSGFsZkZsb2F0VHlwZT0xMDE2O2wuVW5zaWduZWRTaG9ydDQ0NDRUeXBlPTEwMTc7bC5VbnNpZ25lZFNob3J0NTU1MVR5cGU9MTAxODtsLlVuc2lnbmVkU2hvcnQ1NjVUeXBlPTEwMTk7bC5VbnNpZ25lZEludDI0OFR5cGU9MTAyMDtsLkFscGhhRm9ybWF0PTEwMjE7bC5SR0JGb3JtYXQ9MTAyMjtsLlJHQkFGb3JtYXQ9MTAyMztsLkx1bWluYW5jZUZvcm1hdD0xMDI0O2wuTHVtaW5hbmNlQWxwaGFGb3JtYXQ9MTAyNTtsLlJHQkVGb3JtYXQ9MTAyMztsLkRlcHRoRm9ybWF0PTEwMjY7bC5EZXB0aFN0ZW5jaWxGb3JtYXQ9XG4xMDI3O2wuUkdCX1MzVENfRFhUMV9Gb3JtYXQ9MjAwMTtsLlJHQkFfUzNUQ19EWFQxX0Zvcm1hdD0yMDAyO2wuUkdCQV9TM1RDX0RYVDNfRm9ybWF0PTIwMDM7bC5SR0JBX1MzVENfRFhUNV9Gb3JtYXQ9MjAwNDtsLlJHQl9QVlJUQ180QlBQVjFfRm9ybWF0PTIxMDA7bC5SR0JfUFZSVENfMkJQUFYxX0Zvcm1hdD0yMTAxO2wuUkdCQV9QVlJUQ180QlBQVjFfRm9ybWF0PTIxMDI7bC5SR0JBX1BWUlRDXzJCUFBWMV9Gb3JtYXQ9MjEwMztsLlJHQl9FVEMxX0Zvcm1hdD0yMTUxO2wuTG9vcE9uY2U9MjIwMDtsLkxvb3BSZXBlYXQ9MjIwMTtsLkxvb3BQaW5nUG9uZz0yMjAyO2wuSW50ZXJwb2xhdGVEaXNjcmV0ZT0yMzAwO2wuSW50ZXJwb2xhdGVMaW5lYXI9MjMwMTtsLkludGVycG9sYXRlU21vb3RoPTIzMDI7bC5aZXJvQ3VydmF0dXJlRW5kaW5nPTI0MDA7bC5aZXJvU2xvcGVFbmRpbmc9MjQwMTtsLldyYXBBcm91bmRFbmRpbmc9MjQwMjtsLlRyaWFuZ2xlc0RyYXdNb2RlPTA7bC5UcmlhbmdsZVN0cmlwRHJhd01vZGU9XG4xO2wuVHJpYW5nbGVGYW5EcmF3TW9kZT0yO2wuTGluZWFyRW5jb2Rpbmc9M0UzO2wuc1JHQkVuY29kaW5nPTMwMDE7bC5HYW1tYUVuY29kaW5nPTMwMDc7bC5SR0JFRW5jb2Rpbmc9MzAwMjtsLkxvZ0x1dkVuY29kaW5nPTMwMDM7bC5SR0JNN0VuY29kaW5nPTMwMDQ7bC5SR0JNMTZFbmNvZGluZz0zMDA1O2wuUkdCREVuY29kaW5nPTMwMDY7bC5CYXNpY0RlcHRoUGFja2luZz0zMjAwO2wuUkdCQURlcHRoUGFja2luZz0zMjAxO2wuQ3ViZUdlb21ldHJ5PU1iO2wuRmFjZTQ9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7Y29uc29sZS53YXJuKFwiVEhSRUUuRmFjZTQgaGFzIGJlZW4gcmVtb3ZlZC4gQSBUSFJFRS5GYWNlMyB3aWxsIGJlIGNyZWF0ZWQgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyBZYShhLGIsYyxlLGYsZyl9O2wuTGluZVN0cmlwPTA7bC5MaW5lUGllY2VzPTE7bC5NZXNoRmFjZU1hdGVyaWFsPWZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk1lc2hGYWNlTWF0ZXJpYWwgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIGFuIEFycmF5IGluc3RlYWQuXCIpO1xucmV0dXJuIGF9O2wuTXVsdGlNYXRlcmlhbD1mdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT1bXSk7Y29uc29sZS53YXJuKFwiVEhSRUUuTXVsdGlNYXRlcmlhbCBoYXMgYmVlbiByZW1vdmVkLiBVc2UgYW4gQXJyYXkgaW5zdGVhZC5cIik7YS5pc011bHRpTWF0ZXJpYWw9ITA7YS5tYXRlcmlhbHM9YTthLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIGEuc2xpY2UoKX07cmV0dXJuIGF9O2wuUG9pbnRDbG91ZD1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLlBvaW50Q2xvdWQgaGFzIGJlZW4gcmVuYW1lZCB0byBUSFJFRS5Qb2ludHMuXCIpO3JldHVybiBuZXcgUmIoYSxiKX07bC5QYXJ0aWNsZT1mdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5QYXJ0aWNsZSBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLlNwcml0ZS5cIik7cmV0dXJuIG5ldyBDYyhhKX07bC5QYXJ0aWNsZVN5c3RlbT1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLlBhcnRpY2xlU3lzdGVtIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuUG9pbnRzLlwiKTtcbnJldHVybiBuZXcgUmIoYSxiKX07bC5Qb2ludENsb3VkTWF0ZXJpYWw9ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUG9pbnRDbG91ZE1hdGVyaWFsIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuUG9pbnRzTWF0ZXJpYWwuXCIpO3JldHVybiBuZXcgS2EoYSl9O2wuUGFydGljbGVCYXNpY01hdGVyaWFsPWZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlBhcnRpY2xlQmFzaWNNYXRlcmlhbCBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLlBvaW50c01hdGVyaWFsLlwiKTtyZXR1cm4gbmV3IEthKGEpfTtsLlBhcnRpY2xlU3lzdGVtTWF0ZXJpYWw9ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUGFydGljbGVTeXN0ZW1NYXRlcmlhbCBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLlBvaW50c01hdGVyaWFsLlwiKTtyZXR1cm4gbmV3IEthKGEpfTtsLlZlcnRleD1mdW5jdGlvbihhLGIsYyl7Y29uc29sZS53YXJuKFwiVEhSRUUuVmVydGV4IGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5WZWN0b3IzIGluc3RlYWQuXCIpO1xucmV0dXJuIG5ldyBwKGEsYixjKX07bC5EeW5hbWljQnVmZmVyQXR0cmlidXRlPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuRHluYW1pY0J1ZmZlckF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSgpLnNldER5bmFtaWMoIHRydWUgKSBpbnN0ZWFkLlwiKTtyZXR1cm4obmV3IE0oYSxiKSkuc2V0RHluYW1pYyghMCl9O2wuSW50OEF0dHJpYnV0ZT1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLkludDhBdHRyaWJ1dGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5JbnQ4QnVmZmVyQXR0cmlidXRlKCkgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyB1YyhhLGIpfTtsLlVpbnQ4QXR0cmlidXRlPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuVWludDhBdHRyaWJ1dGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5VaW50OEJ1ZmZlckF0dHJpYnV0ZSgpIGluc3RlYWQuXCIpO3JldHVybiBuZXcgdmMoYSxcbmIpfTtsLlVpbnQ4Q2xhbXBlZEF0dHJpYnV0ZT1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLlVpbnQ4Q2xhbXBlZEF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLlVpbnQ4Q2xhbXBlZEJ1ZmZlckF0dHJpYnV0ZSgpIGluc3RlYWQuXCIpO3JldHVybiBuZXcgd2MoYSxiKX07bC5JbnQxNkF0dHJpYnV0ZT1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLkludDE2QXR0cmlidXRlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuSW50MTZCdWZmZXJBdHRyaWJ1dGUoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IHhjKGEsYil9O2wuVWludDE2QXR0cmlidXRlPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuVWludDE2QXR0cmlidXRlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuVWludDE2QnVmZmVyQXR0cmlidXRlKCkgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyBvYihhLGIpfTtsLkludDMyQXR0cmlidXRlPVxuZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5JbnQzMkF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkludDMyQnVmZmVyQXR0cmlidXRlKCkgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyB5YyhhLGIpfTtsLlVpbnQzMkF0dHJpYnV0ZT1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLlVpbnQzMkF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLlVpbnQzMkJ1ZmZlckF0dHJpYnV0ZSgpIGluc3RlYWQuXCIpO3JldHVybiBuZXcgcGIoYSxiKX07bC5GbG9hdDMyQXR0cmlidXRlPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuRmxvYXQzMkF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IEIoYSxiKX07bC5GbG9hdDY0QXR0cmlidXRlPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuRmxvYXQ2NEF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkZsb2F0NjRCdWZmZXJBdHRyaWJ1dGUoKSBpbnN0ZWFkLlwiKTtcbnJldHVybiBuZXcgemMoYSxiKX07bC5DbG9zZWRTcGxpbmVDdXJ2ZTM9dmY7bC5TcGxpbmVDdXJ2ZTM9d2Y7bC5TcGxpbmU9RGU7bC5BeGlzSGVscGVyPWZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkF4aXNIZWxwZXIgaGFzIGJlZW4gcmVuYW1lZCB0byBUSFJFRS5BeGVzSGVscGVyLlwiKTtyZXR1cm4gbmV3IG5kKGEpfTtsLkJvdW5kaW5nQm94SGVscGVyPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuQm91bmRpbmdCb3hIZWxwZXIgaGFzIGJlZW4gZGVwcmVjYXRlZC4gQ3JlYXRpbmcgYSBUSFJFRS5Cb3hIZWxwZXIgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyBHYihhLGIpfTtsLkVkZ2VzSGVscGVyPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuRWRnZXNIZWxwZXIgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFRIUkVFLkVkZ2VzR2VvbWV0cnkgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyBYKG5ldyBkYyhhLmdlb21ldHJ5KSxuZXcgVyh7Y29sb3I6dm9pZCAwIT09XG5iP2I6MTY3NzcyMTV9KSl9O2wuV2lyZWZyYW1lSGVscGVyPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuV2lyZWZyYW1lSGVscGVyIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5XaXJlZnJhbWVHZW9tZXRyeSBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IFgobmV3IFRiKGEuZ2VvbWV0cnkpLG5ldyBXKHtjb2xvcjp2b2lkIDAhPT1iP2I6MTY3NzcyMTV9KSl9O2wuWEhSTG9hZGVyPWZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlhIUkxvYWRlciBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLkZpbGVMb2FkZXIuXCIpO3JldHVybiBuZXcgTmEoYSl9O2wuQmluYXJ5VGV4dHVyZUxvYWRlcj1mdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5CaW5hcnlUZXh0dXJlTG9hZGVyIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuRGF0YVRleHR1cmVMb2FkZXIuXCIpO3JldHVybiBuZXcgaWUoYSl9O2wuR2VvbWV0cnlVdGlscz17bWVyZ2U6ZnVuY3Rpb24oYSxiLGMpe2NvbnNvbGUud2FybihcIlRIUkVFLkdlb21ldHJ5VXRpbHM6IC5tZXJnZSgpIGhhcyBiZWVuIG1vdmVkIHRvIEdlb21ldHJ5LiBVc2UgZ2VvbWV0cnkubWVyZ2UoIGdlb21ldHJ5MiwgbWF0cml4LCBtYXRlcmlhbEluZGV4T2Zmc2V0ICkgaW5zdGVhZC5cIik7XG5pZihiLmlzTWVzaCl7Yi5tYXRyaXhBdXRvVXBkYXRlJiZiLnVwZGF0ZU1hdHJpeCgpO3ZhciBkPWIubWF0cml4O2I9Yi5nZW9tZXRyeX1hLm1lcmdlKGIsZCxjKX0sY2VudGVyOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkdlb21ldHJ5VXRpbHM6IC5jZW50ZXIoKSBoYXMgYmVlbiBtb3ZlZCB0byBHZW9tZXRyeS4gVXNlIGdlb21ldHJ5LmNlbnRlcigpIGluc3RlYWQuXCIpO3JldHVybiBhLmNlbnRlcigpfX07bC5JbWFnZVV0aWxzPXtjcm9zc09yaWdpbjp2b2lkIDAsbG9hZFRleHR1cmU6ZnVuY3Rpb24oYSxiLGMsZCl7Y29uc29sZS53YXJuKFwiVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgVEhSRUUuVGV4dHVyZUxvYWRlcigpIGluc3RlYWQuXCIpO3ZhciBlPW5ldyBBZDtlLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pO2E9ZS5sb2FkKGEsYyx2b2lkIDAsZCk7YiYmKGEubWFwcGluZz1iKTtyZXR1cm4gYX0sXG5sb2FkVGV4dHVyZUN1YmU6ZnVuY3Rpb24oYSxiLGMsZCl7Y29uc29sZS53YXJuKFwiVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZUN1YmUgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIFRIUkVFLkN1YmVUZXh0dXJlTG9hZGVyKCkgaW5zdGVhZC5cIik7dmFyIGU9bmV3IGplO2Uuc2V0Q3Jvc3NPcmlnaW4odGhpcy5jcm9zc09yaWdpbik7YT1lLmxvYWQoYSxjLHZvaWQgMCxkKTtiJiYoYS5tYXBwaW5nPWIpO3JldHVybiBhfSxsb2FkQ29tcHJlc3NlZFRleHR1cmU6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuSW1hZ2VVdGlscy5sb2FkQ29tcHJlc3NlZFRleHR1cmUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFRIUkVFLkREU0xvYWRlciBpbnN0ZWFkLlwiKX0sbG9hZENvbXByZXNzZWRUZXh0dXJlQ3ViZTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5JbWFnZVV0aWxzLmxvYWRDb21wcmVzc2VkVGV4dHVyZUN1YmUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFRIUkVFLkREU0xvYWRlciBpbnN0ZWFkLlwiKX19O1xubC5Qcm9qZWN0b3I9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvamVjdG9yIGhhcyBiZWVuIG1vdmVkIHRvIC9leGFtcGxlcy9qcy9yZW5kZXJlcnMvUHJvamVjdG9yLmpzLlwiKTt0aGlzLnByb2plY3RWZWN0b3I9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Qcm9qZWN0b3I6IC5wcm9qZWN0VmVjdG9yKCkgaXMgbm93IHZlY3Rvci5wcm9qZWN0KCkuXCIpO2EucHJvamVjdChiKX07dGhpcy51bnByb2plY3RWZWN0b3I9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Qcm9qZWN0b3I6IC51bnByb2plY3RWZWN0b3IoKSBpcyBub3cgdmVjdG9yLnVucHJvamVjdCgpLlwiKTthLnVucHJvamVjdChiKX07dGhpcy5waWNraW5nUmF5PWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlByb2plY3RvcjogLnBpY2tpbmdSYXkoKSBpcyBub3cgcmF5Y2FzdGVyLnNldEZyb21DYW1lcmEoKS5cIil9fTtsLkNhbnZhc1JlbmRlcmVyPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkNhbnZhc1JlbmRlcmVyIGhhcyBiZWVuIG1vdmVkIHRvIC9leGFtcGxlcy9qcy9yZW5kZXJlcnMvQ2FudmFzUmVuZGVyZXIuanNcIik7XG50aGlzLmRvbUVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiY2FudmFzXCIpO3RoaXMuY2xlYXI9ZnVuY3Rpb24oKXt9O3RoaXMucmVuZGVyPWZ1bmN0aW9uKCl7fTt0aGlzLnNldENsZWFyQ29sb3I9ZnVuY3Rpb24oKXt9O3RoaXMuc2V0U2l6ZT1mdW5jdGlvbigpe319O09iamVjdC5kZWZpbmVQcm9wZXJ0eShsLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/three/build/three.min.js\n");

/***/ }),

/***/ "./node_modules/underscore/underscore.js":
/*!***********************************************!*\
  !*** ./node_modules/underscore/underscore.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;//     Underscore.js 1.8.3\n//     http://underscorejs.org\n//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n\n(function() {\n\n  // Baseline setup\n  // --------------\n\n  // Establish the root object, `window` in the browser, or `exports` on the server.\n  var root = this;\n\n  // Save the previous value of the `_` variable.\n  var previousUnderscore = root._;\n\n  // Save bytes in the minified (but not gzipped) version:\n  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\n\n  // Create quick reference variables for speed access to core prototypes.\n  var\n    push             = ArrayProto.push,\n    slice            = ArrayProto.slice,\n    toString         = ObjProto.toString,\n    hasOwnProperty   = ObjProto.hasOwnProperty;\n\n  // All **ECMAScript 5** native function implementations that we hope to use\n  // are declared here.\n  var\n    nativeIsArray      = Array.isArray,\n    nativeKeys         = Object.keys,\n    nativeBind         = FuncProto.bind,\n    nativeCreate       = Object.create;\n\n  // Naked function reference for surrogate-prototype-swapping.\n  var Ctor = function(){};\n\n  // Create a safe reference to the Underscore object for use below.\n  var _ = function(obj) {\n    if (obj instanceof _) return obj;\n    if (!(this instanceof _)) return new _(obj);\n    this._wrapped = obj;\n  };\n\n  // Export the Underscore object for **Node.js**, with\n  // backwards-compatibility for the old `require()` API. If we're in\n  // the browser, add `_` as a global object.\n  if (true) {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = _;\n    }\n    exports._ = _;\n  } else {}\n\n  // Current version.\n  _.VERSION = '1.8.3';\n\n  // Internal function that returns an efficient (for current engines) version\n  // of the passed-in callback, to be repeatedly applied in other Underscore\n  // functions.\n  var optimizeCb = function(func, context, argCount) {\n    if (context === void 0) return func;\n    switch (argCount == null ? 3 : argCount) {\n      case 1: return function(value) {\n        return func.call(context, value);\n      };\n      case 2: return function(value, other) {\n        return func.call(context, value, other);\n      };\n      case 3: return function(value, index, collection) {\n        return func.call(context, value, index, collection);\n      };\n      case 4: return function(accumulator, value, index, collection) {\n        return func.call(context, accumulator, value, index, collection);\n      };\n    }\n    return function() {\n      return func.apply(context, arguments);\n    };\n  };\n\n  // A mostly-internal function to generate callbacks that can be applied\n  // to each element in a collection, returning the desired result  either\n  // identity, an arbitrary callback, a property matcher, or a property accessor.\n  var cb = function(value, context, argCount) {\n    if (value == null) return _.identity;\n    if (_.isFunction(value)) return optimizeCb(value, context, argCount);\n    if (_.isObject(value)) return _.matcher(value);\n    return _.property(value);\n  };\n  _.iteratee = function(value, context) {\n    return cb(value, context, Infinity);\n  };\n\n  // An internal function for creating assigner functions.\n  var createAssigner = function(keysFunc, undefinedOnly) {\n    return function(obj) {\n      var length = arguments.length;\n      if (length < 2 || obj == null) return obj;\n      for (var index = 1; index < length; index++) {\n        var source = arguments[index],\n            keys = keysFunc(source),\n            l = keys.length;\n        for (var i = 0; i < l; i++) {\n          var key = keys[i];\n          if (!undefinedOnly || obj[key] === void 0) obj[key] = source[key];\n        }\n      }\n      return obj;\n    };\n  };\n\n  // An internal function for creating a new object that inherits from another.\n  var baseCreate = function(prototype) {\n    if (!_.isObject(prototype)) return {};\n    if (nativeCreate) return nativeCreate(prototype);\n    Ctor.prototype = prototype;\n    var result = new Ctor;\n    Ctor.prototype = null;\n    return result;\n  };\n\n  var property = function(key) {\n    return function(obj) {\n      return obj == null ? void 0 : obj[key];\n    };\n  };\n\n  // Helper for collection methods to determine whether a collection\n  // should be iterated as an array or as an object\n  // Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n  // Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\n  var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n  var getLength = property('length');\n  var isArrayLike = function(collection) {\n    var length = getLength(collection);\n    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\n  };\n\n  // Collection Functions\n  // --------------------\n\n  // The cornerstone, an `each` implementation, aka `forEach`.\n  // Handles raw objects in addition to array-likes. Treats all\n  // sparse array-likes as if they were dense.\n  _.each = _.forEach = function(obj, iteratee, context) {\n    iteratee = optimizeCb(iteratee, context);\n    var i, length;\n    if (isArrayLike(obj)) {\n      for (i = 0, length = obj.length; i < length; i++) {\n        iteratee(obj[i], i, obj);\n      }\n    } else {\n      var keys = _.keys(obj);\n      for (i = 0, length = keys.length; i < length; i++) {\n        iteratee(obj[keys[i]], keys[i], obj);\n      }\n    }\n    return obj;\n  };\n\n  // Return the results of applying the iteratee to each element.\n  _.map = _.collect = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length,\n        results = Array(length);\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      results[index] = iteratee(obj[currentKey], currentKey, obj);\n    }\n    return results;\n  };\n\n  // Create a reducing function iterating left or right.\n  function createReduce(dir) {\n    // Optimized iterator function as using arguments.length\n    // in the main function will deoptimize the, see #1991.\n    function iterator(obj, iteratee, memo, keys, index, length) {\n      for (; index >= 0 && index < length; index += dir) {\n        var currentKey = keys ? keys[index] : index;\n        memo = iteratee(memo, obj[currentKey], currentKey, obj);\n      }\n      return memo;\n    }\n\n    return function(obj, iteratee, memo, context) {\n      iteratee = optimizeCb(iteratee, context, 4);\n      var keys = !isArrayLike(obj) && _.keys(obj),\n          length = (keys || obj).length,\n          index = dir > 0 ? 0 : length - 1;\n      // Determine the initial value if none is provided.\n      if (arguments.length < 3) {\n        memo = obj[keys ? keys[index] : index];\n        index += dir;\n      }\n      return iterator(obj, iteratee, memo, keys, index, length);\n    };\n  }\n\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\n  // or `foldl`.\n  _.reduce = _.foldl = _.inject = createReduce(1);\n\n  // The right-associative version of reduce, also known as `foldr`.\n  _.reduceRight = _.foldr = createReduce(-1);\n\n  // Return the first value which passes a truth test. Aliased as `detect`.\n  _.find = _.detect = function(obj, predicate, context) {\n    var key;\n    if (isArrayLike(obj)) {\n      key = _.findIndex(obj, predicate, context);\n    } else {\n      key = _.findKey(obj, predicate, context);\n    }\n    if (key !== void 0 && key !== -1) return obj[key];\n  };\n\n  // Return all the elements that pass a truth test.\n  // Aliased as `select`.\n  _.filter = _.select = function(obj, predicate, context) {\n    var results = [];\n    predicate = cb(predicate, context);\n    _.each(obj, function(value, index, list) {\n      if (predicate(value, index, list)) results.push(value);\n    });\n    return results;\n  };\n\n  // Return all the elements for which a truth test fails.\n  _.reject = function(obj, predicate, context) {\n    return _.filter(obj, _.negate(cb(predicate)), context);\n  };\n\n  // Determine whether all of the elements match a truth test.\n  // Aliased as `all`.\n  _.every = _.all = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (!predicate(obj[currentKey], currentKey, obj)) return false;\n    }\n    return true;\n  };\n\n  // Determine if at least one element in the object matches a truth test.\n  // Aliased as `any`.\n  _.some = _.any = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (predicate(obj[currentKey], currentKey, obj)) return true;\n    }\n    return false;\n  };\n\n  // Determine if the array or object contains a given item (using `===`).\n  // Aliased as `includes` and `include`.\n  _.contains = _.includes = _.include = function(obj, item, fromIndex, guard) {\n    if (!isArrayLike(obj)) obj = _.values(obj);\n    if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n    return _.indexOf(obj, item, fromIndex) >= 0;\n  };\n\n  // Invoke a method (with arguments) on every item in a collection.\n  _.invoke = function(obj, method) {\n    var args = slice.call(arguments, 2);\n    var isFunc = _.isFunction(method);\n    return _.map(obj, function(value) {\n      var func = isFunc ? method : value[method];\n      return func == null ? func : func.apply(value, args);\n    });\n  };\n\n  // Convenience version of a common use case of `map`: fetching a property.\n  _.pluck = function(obj, key) {\n    return _.map(obj, _.property(key));\n  };\n\n  // Convenience version of a common use case of `filter`: selecting only objects\n  // containing specific `key:value` pairs.\n  _.where = function(obj, attrs) {\n    return _.filter(obj, _.matcher(attrs));\n  };\n\n  // Convenience version of a common use case of `find`: getting the first object\n  // containing specific `key:value` pairs.\n  _.findWhere = function(obj, attrs) {\n    return _.find(obj, _.matcher(attrs));\n  };\n\n  // Return the maximum element (or element-based computation).\n  _.max = function(obj, iteratee, context) {\n    var result = -Infinity, lastComputed = -Infinity,\n        value, computed;\n    if (iteratee == null && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value > result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index, list) {\n        computed = iteratee(value, index, list);\n        if (computed > lastComputed || computed === -Infinity && result === -Infinity) {\n          result = value;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Return the minimum element (or element-based computation).\n  _.min = function(obj, iteratee, context) {\n    var result = Infinity, lastComputed = Infinity,\n        value, computed;\n    if (iteratee == null && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value < result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index, list) {\n        computed = iteratee(value, index, list);\n        if (computed < lastComputed || computed === Infinity && result === Infinity) {\n          result = value;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Shuffle a collection, using the modern version of the\n  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/FisherYates_shuffle).\n  _.shuffle = function(obj) {\n    var set = isArrayLike(obj) ? obj : _.values(obj);\n    var length = set.length;\n    var shuffled = Array(length);\n    for (var index = 0, rand; index < length; index++) {\n      rand = _.random(0, index);\n      if (rand !== index) shuffled[index] = shuffled[rand];\n      shuffled[rand] = set[index];\n    }\n    return shuffled;\n  };\n\n  // Sample **n** random values from a collection.\n  // If **n** is not specified, returns a single random element.\n  // The internal `guard` argument allows it to work with `map`.\n  _.sample = function(obj, n, guard) {\n    if (n == null || guard) {\n      if (!isArrayLike(obj)) obj = _.values(obj);\n      return obj[_.random(obj.length - 1)];\n    }\n    return _.shuffle(obj).slice(0, Math.max(0, n));\n  };\n\n  // Sort the object's values by a criterion produced by an iteratee.\n  _.sortBy = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    return _.pluck(_.map(obj, function(value, index, list) {\n      return {\n        value: value,\n        index: index,\n        criteria: iteratee(value, index, list)\n      };\n    }).sort(function(left, right) {\n      var a = left.criteria;\n      var b = right.criteria;\n      if (a !== b) {\n        if (a > b || a === void 0) return 1;\n        if (a < b || b === void 0) return -1;\n      }\n      return left.index - right.index;\n    }), 'value');\n  };\n\n  // An internal function used for aggregate \"group by\" operations.\n  var group = function(behavior) {\n    return function(obj, iteratee, context) {\n      var result = {};\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index) {\n        var key = iteratee(value, index, obj);\n        behavior(result, value, key);\n      });\n      return result;\n    };\n  };\n\n  // Groups the object's values by a criterion. Pass either a string attribute\n  // to group by, or a function that returns the criterion.\n  _.groupBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key].push(value); else result[key] = [value];\n  });\n\n  // Indexes the object's values by a criterion, similar to `groupBy`, but for\n  // when you know that your index values will be unique.\n  _.indexBy = group(function(result, value, key) {\n    result[key] = value;\n  });\n\n  // Counts instances of an object that group by a certain criterion. Pass\n  // either a string attribute to count by, or a function that returns the\n  // criterion.\n  _.countBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key]++; else result[key] = 1;\n  });\n\n  // Safely create a real, live array from anything iterable.\n  _.toArray = function(obj) {\n    if (!obj) return [];\n    if (_.isArray(obj)) return slice.call(obj);\n    if (isArrayLike(obj)) return _.map(obj, _.identity);\n    return _.values(obj);\n  };\n\n  // Return the number of elements in an object.\n  _.size = function(obj) {\n    if (obj == null) return 0;\n    return isArrayLike(obj) ? obj.length : _.keys(obj).length;\n  };\n\n  // Split a collection into two arrays: one whose elements all satisfy the given\n  // predicate, and one whose elements all do not satisfy the predicate.\n  _.partition = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var pass = [], fail = [];\n    _.each(obj, function(value, key, obj) {\n      (predicate(value, key, obj) ? pass : fail).push(value);\n    });\n    return [pass, fail];\n  };\n\n  // Array Functions\n  // ---------------\n\n  // Get the first element of an array. Passing **n** will return the first N\n  // values in the array. Aliased as `head` and `take`. The **guard** check\n  // allows it to work with `_.map`.\n  _.first = _.head = _.take = function(array, n, guard) {\n    if (array == null) return void 0;\n    if (n == null || guard) return array[0];\n    return _.initial(array, array.length - n);\n  };\n\n  // Returns everything but the last entry of the array. Especially useful on\n  // the arguments object. Passing **n** will return all the values in\n  // the array, excluding the last N.\n  _.initial = function(array, n, guard) {\n    return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n  };\n\n  // Get the last element of an array. Passing **n** will return the last N\n  // values in the array.\n  _.last = function(array, n, guard) {\n    if (array == null) return void 0;\n    if (n == null || guard) return array[array.length - 1];\n    return _.rest(array, Math.max(0, array.length - n));\n  };\n\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\n  // Especially useful on the arguments object. Passing an **n** will return\n  // the rest N values in the array.\n  _.rest = _.tail = _.drop = function(array, n, guard) {\n    return slice.call(array, n == null || guard ? 1 : n);\n  };\n\n  // Trim out all falsy values from an array.\n  _.compact = function(array) {\n    return _.filter(array, _.identity);\n  };\n\n  // Internal implementation of a recursive `flatten` function.\n  var flatten = function(input, shallow, strict, startIndex) {\n    var output = [], idx = 0;\n    for (var i = startIndex || 0, length = getLength(input); i < length; i++) {\n      var value = input[i];\n      if (isArrayLike(value) && (_.isArray(value) || _.isArguments(value))) {\n        //flatten current level of array or arguments object\n        if (!shallow) value = flatten(value, shallow, strict);\n        var j = 0, len = value.length;\n        output.length += len;\n        while (j < len) {\n          output[idx++] = value[j++];\n        }\n      } else if (!strict) {\n        output[idx++] = value;\n      }\n    }\n    return output;\n  };\n\n  // Flatten out an array, either recursively (by default), or just one level.\n  _.flatten = function(array, shallow) {\n    return flatten(array, shallow, false);\n  };\n\n  // Return a version of the array that does not contain the specified value(s).\n  _.without = function(array) {\n    return _.difference(array, slice.call(arguments, 1));\n  };\n\n  // Produce a duplicate-free version of the array. If the array has already\n  // been sorted, you have the option of using a faster algorithm.\n  // Aliased as `unique`.\n  _.uniq = _.unique = function(array, isSorted, iteratee, context) {\n    if (!_.isBoolean(isSorted)) {\n      context = iteratee;\n      iteratee = isSorted;\n      isSorted = false;\n    }\n    if (iteratee != null) iteratee = cb(iteratee, context);\n    var result = [];\n    var seen = [];\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var value = array[i],\n          computed = iteratee ? iteratee(value, i, array) : value;\n      if (isSorted) {\n        if (!i || seen !== computed) result.push(value);\n        seen = computed;\n      } else if (iteratee) {\n        if (!_.contains(seen, computed)) {\n          seen.push(computed);\n          result.push(value);\n        }\n      } else if (!_.contains(result, value)) {\n        result.push(value);\n      }\n    }\n    return result;\n  };\n\n  // Produce an array that contains the union: each distinct element from all of\n  // the passed-in arrays.\n  _.union = function() {\n    return _.uniq(flatten(arguments, true, true));\n  };\n\n  // Produce an array that contains every item shared between all the\n  // passed-in arrays.\n  _.intersection = function(array) {\n    var result = [];\n    var argsLength = arguments.length;\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var item = array[i];\n      if (_.contains(result, item)) continue;\n      for (var j = 1; j < argsLength; j++) {\n        if (!_.contains(arguments[j], item)) break;\n      }\n      if (j === argsLength) result.push(item);\n    }\n    return result;\n  };\n\n  // Take the difference between one array and a number of other arrays.\n  // Only the elements present in just the first array will remain.\n  _.difference = function(array) {\n    var rest = flatten(arguments, true, true, 1);\n    return _.filter(array, function(value){\n      return !_.contains(rest, value);\n    });\n  };\n\n  // Zip together multiple lists into a single array -- elements that share\n  // an index go together.\n  _.zip = function() {\n    return _.unzip(arguments);\n  };\n\n  // Complement of _.zip. Unzip accepts an array of arrays and groups\n  // each array's elements on shared indices\n  _.unzip = function(array) {\n    var length = array && _.max(array, getLength).length || 0;\n    var result = Array(length);\n\n    for (var index = 0; index < length; index++) {\n      result[index] = _.pluck(array, index);\n    }\n    return result;\n  };\n\n  // Converts lists into objects. Pass either a single array of `[key, value]`\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\n  // the corresponding values.\n  _.object = function(list, values) {\n    var result = {};\n    for (var i = 0, length = getLength(list); i < length; i++) {\n      if (values) {\n        result[list[i]] = values[i];\n      } else {\n        result[list[i][0]] = list[i][1];\n      }\n    }\n    return result;\n  };\n\n  // Generator function to create the findIndex and findLastIndex functions\n  function createPredicateIndexFinder(dir) {\n    return function(array, predicate, context) {\n      predicate = cb(predicate, context);\n      var length = getLength(array);\n      var index = dir > 0 ? 0 : length - 1;\n      for (; index >= 0 && index < length; index += dir) {\n        if (predicate(array[index], index, array)) return index;\n      }\n      return -1;\n    };\n  }\n\n  // Returns the first index on an array-like that passes a predicate test\n  _.findIndex = createPredicateIndexFinder(1);\n  _.findLastIndex = createPredicateIndexFinder(-1);\n\n  // Use a comparator function to figure out the smallest index at which\n  // an object should be inserted so as to maintain order. Uses binary search.\n  _.sortedIndex = function(array, obj, iteratee, context) {\n    iteratee = cb(iteratee, context, 1);\n    var value = iteratee(obj);\n    var low = 0, high = getLength(array);\n    while (low < high) {\n      var mid = Math.floor((low + high) / 2);\n      if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n    }\n    return low;\n  };\n\n  // Generator function to create the indexOf and lastIndexOf functions\n  function createIndexFinder(dir, predicateFind, sortedIndex) {\n    return function(array, item, idx) {\n      var i = 0, length = getLength(array);\n      if (typeof idx == 'number') {\n        if (dir > 0) {\n            i = idx >= 0 ? idx : Math.max(idx + length, i);\n        } else {\n            length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n        }\n      } else if (sortedIndex && idx && length) {\n        idx = sortedIndex(array, item);\n        return array[idx] === item ? idx : -1;\n      }\n      if (item !== item) {\n        idx = predicateFind(slice.call(array, i, length), _.isNaN);\n        return idx >= 0 ? idx + i : -1;\n      }\n      for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n        if (array[idx] === item) return idx;\n      }\n      return -1;\n    };\n  }\n\n  // Return the position of the first occurrence of an item in an array,\n  // or -1 if the item is not included in the array.\n  // If the array is large and already in sort order, pass `true`\n  // for **isSorted** to use binary search.\n  _.indexOf = createIndexFinder(1, _.findIndex, _.sortedIndex);\n  _.lastIndexOf = createIndexFinder(-1, _.findLastIndex);\n\n  // Generate an integer Array containing an arithmetic progression. A port of\n  // the native Python `range()` function. See\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\n  _.range = function(start, stop, step) {\n    if (stop == null) {\n      stop = start || 0;\n      start = 0;\n    }\n    step = step || 1;\n\n    var length = Math.max(Math.ceil((stop - start) / step), 0);\n    var range = Array(length);\n\n    for (var idx = 0; idx < length; idx++, start += step) {\n      range[idx] = start;\n    }\n\n    return range;\n  };\n\n  // Function (ahem) Functions\n  // ------------------\n\n  // Determines whether to execute a function as a constructor\n  // or a normal function with the provided arguments\n  var executeBound = function(sourceFunc, boundFunc, context, callingContext, args) {\n    if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n    var self = baseCreate(sourceFunc.prototype);\n    var result = sourceFunc.apply(self, args);\n    if (_.isObject(result)) return result;\n    return self;\n  };\n\n  // Create a function bound to a given object (assigning `this`, and arguments,\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\n  // available.\n  _.bind = function(func, context) {\n    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));\n    if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');\n    var args = slice.call(arguments, 2);\n    var bound = function() {\n      return executeBound(func, bound, context, this, args.concat(slice.call(arguments)));\n    };\n    return bound;\n  };\n\n  // Partially apply a function by creating a version that has had some of its\n  // arguments pre-filled, without changing its dynamic `this` context. _ acts\n  // as a placeholder, allowing any combination of arguments to be pre-filled.\n  _.partial = function(func) {\n    var boundArgs = slice.call(arguments, 1);\n    var bound = function() {\n      var position = 0, length = boundArgs.length;\n      var args = Array(length);\n      for (var i = 0; i < length; i++) {\n        args[i] = boundArgs[i] === _ ? arguments[position++] : boundArgs[i];\n      }\n      while (position < arguments.length) args.push(arguments[position++]);\n      return executeBound(func, bound, this, this, args);\n    };\n    return bound;\n  };\n\n  // Bind a number of an object's methods to that object. Remaining arguments\n  // are the method names to be bound. Useful for ensuring that all callbacks\n  // defined on an object belong to it.\n  _.bindAll = function(obj) {\n    var i, length = arguments.length, key;\n    if (length <= 1) throw new Error('bindAll must be passed function names');\n    for (i = 1; i < length; i++) {\n      key = arguments[i];\n      obj[key] = _.bind(obj[key], obj);\n    }\n    return obj;\n  };\n\n  // Memoize an expensive function by storing its results.\n  _.memoize = function(func, hasher) {\n    var memoize = function(key) {\n      var cache = memoize.cache;\n      var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n      if (!_.has(cache, address)) cache[address] = func.apply(this, arguments);\n      return cache[address];\n    };\n    memoize.cache = {};\n    return memoize;\n  };\n\n  // Delays a function for the given number of milliseconds, and then calls\n  // it with the arguments supplied.\n  _.delay = function(func, wait) {\n    var args = slice.call(arguments, 2);\n    return setTimeout(function(){\n      return func.apply(null, args);\n    }, wait);\n  };\n\n  // Defers a function, scheduling it to run after the current call stack has\n  // cleared.\n  _.defer = _.partial(_.delay, _, 1);\n\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  _.throttle = function(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) options = {};\n    var later = function() {\n      previous = options.leading === false ? 0 : _.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    };\n    return function() {\n      var now = _.now();\n      if (!previous && options.leading === false) previous = now;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n        previous = now;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  };\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _.debounce = function(func, wait, immediate) {\n    var timeout, args, context, timestamp, result;\n\n    var later = function() {\n      var last = _.now() - timestamp;\n\n      if (last < wait && last >= 0) {\n        timeout = setTimeout(later, wait - last);\n      } else {\n        timeout = null;\n        if (!immediate) {\n          result = func.apply(context, args);\n          if (!timeout) context = args = null;\n        }\n      }\n    };\n\n    return function() {\n      context = this;\n      args = arguments;\n      timestamp = _.now();\n      var callNow = immediate && !timeout;\n      if (!timeout) timeout = setTimeout(later, wait);\n      if (callNow) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n\n      return result;\n    };\n  };\n\n  // Returns the first function passed as an argument to the second,\n  // allowing you to adjust arguments, run code before and after, and\n  // conditionally execute the original function.\n  _.wrap = function(func, wrapper) {\n    return _.partial(wrapper, func);\n  };\n\n  // Returns a negated version of the passed-in predicate.\n  _.negate = function(predicate) {\n    return function() {\n      return !predicate.apply(this, arguments);\n    };\n  };\n\n  // Returns a function that is the composition of a list of functions, each\n  // consuming the return value of the function that follows.\n  _.compose = function() {\n    var args = arguments;\n    var start = args.length - 1;\n    return function() {\n      var i = start;\n      var result = args[start].apply(this, arguments);\n      while (i--) result = args[i].call(this, result);\n      return result;\n    };\n  };\n\n  // Returns a function that will only be executed on and after the Nth call.\n  _.after = function(times, func) {\n    return function() {\n      if (--times < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  };\n\n  // Returns a function that will only be executed up to (but not including) the Nth call.\n  _.before = function(times, func) {\n    var memo;\n    return function() {\n      if (--times > 0) {\n        memo = func.apply(this, arguments);\n      }\n      if (times <= 1) func = null;\n      return memo;\n    };\n  };\n\n  // Returns a function that will be executed at most one time, no matter how\n  // often you call it. Useful for lazy initialization.\n  _.once = _.partial(_.before, 2);\n\n  // Object Functions\n  // ----------------\n\n  // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\n  var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\n  var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n                      'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n  function collectNonEnumProps(obj, keys) {\n    var nonEnumIdx = nonEnumerableProps.length;\n    var constructor = obj.constructor;\n    var proto = (_.isFunction(constructor) && constructor.prototype) || ObjProto;\n\n    // Constructor is a special case.\n    var prop = 'constructor';\n    if (_.has(obj, prop) && !_.contains(keys, prop)) keys.push(prop);\n\n    while (nonEnumIdx--) {\n      prop = nonEnumerableProps[nonEnumIdx];\n      if (prop in obj && obj[prop] !== proto[prop] && !_.contains(keys, prop)) {\n        keys.push(prop);\n      }\n    }\n  }\n\n  // Retrieve the names of an object's own properties.\n  // Delegates to **ECMAScript 5**'s native `Object.keys`\n  _.keys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    if (nativeKeys) return nativeKeys(obj);\n    var keys = [];\n    for (var key in obj) if (_.has(obj, key)) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve all the property names of an object.\n  _.allKeys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    var keys = [];\n    for (var key in obj) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve the values of an object's properties.\n  _.values = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var values = Array(length);\n    for (var i = 0; i < length; i++) {\n      values[i] = obj[keys[i]];\n    }\n    return values;\n  };\n\n  // Returns the results of applying the iteratee to each element of the object\n  // In contrast to _.map it returns an object\n  _.mapObject = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys =  _.keys(obj),\n          length = keys.length,\n          results = {},\n          currentKey;\n      for (var index = 0; index < length; index++) {\n        currentKey = keys[index];\n        results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n      }\n      return results;\n  };\n\n  // Convert an object into a list of `[key, value]` pairs.\n  _.pairs = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var pairs = Array(length);\n    for (var i = 0; i < length; i++) {\n      pairs[i] = [keys[i], obj[keys[i]]];\n    }\n    return pairs;\n  };\n\n  // Invert the keys and values of an object. The values must be serializable.\n  _.invert = function(obj) {\n    var result = {};\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      result[obj[keys[i]]] = keys[i];\n    }\n    return result;\n  };\n\n  // Return a sorted list of the function names available on the object.\n  // Aliased as `methods`\n  _.functions = _.methods = function(obj) {\n    var names = [];\n    for (var key in obj) {\n      if (_.isFunction(obj[key])) names.push(key);\n    }\n    return names.sort();\n  };\n\n  // Extend a given object with all the properties in passed-in object(s).\n  _.extend = createAssigner(_.allKeys);\n\n  // Assigns a given object with all the own properties in the passed-in object(s)\n  // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\n  _.extendOwn = _.assign = createAssigner(_.keys);\n\n  // Returns the first key on an object that passes a predicate test\n  _.findKey = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = _.keys(obj), key;\n    for (var i = 0, length = keys.length; i < length; i++) {\n      key = keys[i];\n      if (predicate(obj[key], key, obj)) return key;\n    }\n  };\n\n  // Return a copy of the object only containing the whitelisted properties.\n  _.pick = function(object, oiteratee, context) {\n    var result = {}, obj = object, iteratee, keys;\n    if (obj == null) return result;\n    if (_.isFunction(oiteratee)) {\n      keys = _.allKeys(obj);\n      iteratee = optimizeCb(oiteratee, context);\n    } else {\n      keys = flatten(arguments, false, false, 1);\n      iteratee = function(value, key, obj) { return key in obj; };\n      obj = Object(obj);\n    }\n    for (var i = 0, length = keys.length; i < length; i++) {\n      var key = keys[i];\n      var value = obj[key];\n      if (iteratee(value, key, obj)) result[key] = value;\n    }\n    return result;\n  };\n\n   // Return a copy of the object without the blacklisted properties.\n  _.omit = function(obj, iteratee, context) {\n    if (_.isFunction(iteratee)) {\n      iteratee = _.negate(iteratee);\n    } else {\n      var keys = _.map(flatten(arguments, false, false, 1), String);\n      iteratee = function(value, key) {\n        return !_.contains(keys, key);\n      };\n    }\n    return _.pick(obj, iteratee, context);\n  };\n\n  // Fill in a given object with default properties.\n  _.defaults = createAssigner(_.allKeys, true);\n\n  // Creates an object that inherits from the given prototype object.\n  // If additional properties are provided then they will be added to the\n  // created object.\n  _.create = function(prototype, props) {\n    var result = baseCreate(prototype);\n    if (props) _.extendOwn(result, props);\n    return result;\n  };\n\n  // Create a (shallow-cloned) duplicate of an object.\n  _.clone = function(obj) {\n    if (!_.isObject(obj)) return obj;\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\n  };\n\n  // Invokes interceptor with the obj, and then returns obj.\n  // The primary purpose of this method is to \"tap into\" a method chain, in\n  // order to perform operations on intermediate results within the chain.\n  _.tap = function(obj, interceptor) {\n    interceptor(obj);\n    return obj;\n  };\n\n  // Returns whether an object has a given set of `key:value` pairs.\n  _.isMatch = function(object, attrs) {\n    var keys = _.keys(attrs), length = keys.length;\n    if (object == null) return !length;\n    var obj = Object(object);\n    for (var i = 0; i < length; i++) {\n      var key = keys[i];\n      if (attrs[key] !== obj[key] || !(key in obj)) return false;\n    }\n    return true;\n  };\n\n\n  // Internal recursive comparison function for `isEqual`.\n  var eq = function(a, b, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n    if (a === b) return a !== 0 || 1 / a === 1 / b;\n    // A strict comparison is necessary because `null == undefined`.\n    if (a == null || b == null) return a === b;\n    // Unwrap any wrapped objects.\n    if (a instanceof _) a = a._wrapped;\n    if (b instanceof _) b = b._wrapped;\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className !== toString.call(b)) return false;\n    switch (className) {\n      // Strings, numbers, regular expressions, dates, and booleans are compared by value.\n      case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n      case '[object String]':\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n        // equivalent to `new String(\"5\")`.\n        return '' + a === '' + b;\n      case '[object Number]':\n        // `NaN`s are equivalent, but non-reflexive.\n        // Object(NaN) is equivalent to NaN\n        if (+a !== +a) return +b !== +b;\n        // An `egal` comparison is performed for other numeric values.\n        return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n      case '[object Date]':\n      case '[object Boolean]':\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n        // millisecond representations. Note that invalid dates with millisecond representations\n        // of `NaN` are not equivalent.\n        return +a === +b;\n    }\n\n    var areArrays = className === '[object Array]';\n    if (!areArrays) {\n      if (typeof a != 'object' || typeof b != 'object') return false;\n\n      // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n      // from different frames are.\n      var aCtor = a.constructor, bCtor = b.constructor;\n      if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor &&\n                               _.isFunction(bCtor) && bCtor instanceof bCtor)\n                          && ('constructor' in a && 'constructor' in b)) {\n        return false;\n      }\n    }\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n    // Initializing stack of traversed objects.\n    // It's done here since we only need them for objects and arrays comparison.\n    aStack = aStack || [];\n    bStack = bStack || [];\n    var length = aStack.length;\n    while (length--) {\n      // Linear search. Performance is inversely proportional to the number of\n      // unique nested structures.\n      if (aStack[length] === a) return bStack[length] === b;\n    }\n\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n\n    // Recursively compare objects and arrays.\n    if (areArrays) {\n      // Compare array lengths to determine if a deep comparison is necessary.\n      length = a.length;\n      if (length !== b.length) return false;\n      // Deep compare the contents, ignoring non-numeric properties.\n      while (length--) {\n        if (!eq(a[length], b[length], aStack, bStack)) return false;\n      }\n    } else {\n      // Deep compare objects.\n      var keys = _.keys(a), key;\n      length = keys.length;\n      // Ensure that both objects contain the same number of properties before comparing deep equality.\n      if (_.keys(b).length !== length) return false;\n      while (length--) {\n        // Deep compare each member\n        key = keys[length];\n        if (!(_.has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n      }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return true;\n  };\n\n  // Perform a deep comparison to check if two objects are equal.\n  _.isEqual = function(a, b) {\n    return eq(a, b);\n  };\n\n  // Is a given array, string, or object empty?\n  // An \"empty\" object has no enumerable own-properties.\n  _.isEmpty = function(obj) {\n    if (obj == null) return true;\n    if (isArrayLike(obj) && (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) return obj.length === 0;\n    return _.keys(obj).length === 0;\n  };\n\n  // Is a given value a DOM element?\n  _.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n  };\n\n  // Is a given value an array?\n  // Delegates to ECMA5's native Array.isArray\n  _.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) === '[object Array]';\n  };\n\n  // Is a given variable an object?\n  _.isObject = function(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  };\n\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError.\n  _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error'], function(name) {\n    _['is' + name] = function(obj) {\n      return toString.call(obj) === '[object ' + name + ']';\n    };\n  });\n\n  // Define a fallback version of the method in browsers (ahem, IE < 9), where\n  // there isn't any inspectable \"Arguments\" type.\n  if (!_.isArguments(arguments)) {\n    _.isArguments = function(obj) {\n      return _.has(obj, 'callee');\n    };\n  }\n\n  // Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,\n  // IE 11 (#1621), and in Safari 8 (#1929).\n  if (typeof /./ != 'function' && typeof Int8Array != 'object') {\n    _.isFunction = function(obj) {\n      return typeof obj == 'function' || false;\n    };\n  }\n\n  // Is a given object a finite number?\n  _.isFinite = function(obj) {\n    return isFinite(obj) && !isNaN(parseFloat(obj));\n  };\n\n  // Is the given value `NaN`? (NaN is the only number which does not equal itself).\n  _.isNaN = function(obj) {\n    return _.isNumber(obj) && obj !== +obj;\n  };\n\n  // Is a given value a boolean?\n  _.isBoolean = function(obj) {\n    return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n  };\n\n  // Is a given value equal to null?\n  _.isNull = function(obj) {\n    return obj === null;\n  };\n\n  // Is a given variable undefined?\n  _.isUndefined = function(obj) {\n    return obj === void 0;\n  };\n\n  // Shortcut function for checking if an object has a given property directly\n  // on itself (in other words, not on a prototype).\n  _.has = function(obj, key) {\n    return obj != null && hasOwnProperty.call(obj, key);\n  };\n\n  // Utility Functions\n  // -----------------\n\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\n  // previous owner. Returns a reference to the Underscore object.\n  _.noConflict = function() {\n    root._ = previousUnderscore;\n    return this;\n  };\n\n  // Keep the identity function around for default iteratees.\n  _.identity = function(value) {\n    return value;\n  };\n\n  // Predicate-generating functions. Often useful outside of Underscore.\n  _.constant = function(value) {\n    return function() {\n      return value;\n    };\n  };\n\n  _.noop = function(){};\n\n  _.property = property;\n\n  // Generates a function for a given object that returns a given property.\n  _.propertyOf = function(obj) {\n    return obj == null ? function(){} : function(key) {\n      return obj[key];\n    };\n  };\n\n  // Returns a predicate for checking whether an object has a given set of\n  // `key:value` pairs.\n  _.matcher = _.matches = function(attrs) {\n    attrs = _.extendOwn({}, attrs);\n    return function(obj) {\n      return _.isMatch(obj, attrs);\n    };\n  };\n\n  // Run a function **n** times.\n  _.times = function(n, iteratee, context) {\n    var accum = Array(Math.max(0, n));\n    iteratee = optimizeCb(iteratee, context, 1);\n    for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n    return accum;\n  };\n\n  // Return a random integer between min and max (inclusive).\n  _.random = function(min, max) {\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + Math.floor(Math.random() * (max - min + 1));\n  };\n\n  // A (possibly faster) way to get the current timestamp as an integer.\n  _.now = Date.now || function() {\n    return new Date().getTime();\n  };\n\n   // List of HTML entities for escaping.\n  var escapeMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n    '`': '&#x60;'\n  };\n  var unescapeMap = _.invert(escapeMap);\n\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\n  var createEscaper = function(map) {\n    var escaper = function(match) {\n      return map[match];\n    };\n    // Regexes for identifying a key that needs to be escaped\n    var source = '(?:' + _.keys(map).join('|') + ')';\n    var testRegexp = RegExp(source);\n    var replaceRegexp = RegExp(source, 'g');\n    return function(string) {\n      string = string == null ? '' : '' + string;\n      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n    };\n  };\n  _.escape = createEscaper(escapeMap);\n  _.unescape = createEscaper(unescapeMap);\n\n  // If the value of the named `property` is a function then invoke it with the\n  // `object` as context; otherwise, return it.\n  _.result = function(object, property, fallback) {\n    var value = object == null ? void 0 : object[property];\n    if (value === void 0) {\n      value = fallback;\n    }\n    return _.isFunction(value) ? value.call(object) : value;\n  };\n\n  // Generate a unique integer id (unique within the entire client session).\n  // Useful for temporary DOM ids.\n  var idCounter = 0;\n  _.uniqueId = function(prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n  };\n\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  _.templateSettings = {\n    evaluate    : /<%([\\s\\S]+?)%>/g,\n    interpolate : /<%=([\\s\\S]+?)%>/g,\n    escape      : /<%-([\\s\\S]+?)%>/g\n  };\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  var noMatch = /(.)^/;\n\n  // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n  var escapes = {\n    \"'\":      \"'\",\n    '\\\\':     '\\\\',\n    '\\r':     'r',\n    '\\n':     'n',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  var escaper = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\n  var escapeChar = function(match) {\n    return '\\\\' + escapes[match];\n  };\n\n  // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n  // NB: `oldSettings` only exists for backwards compatibility.\n  _.template = function(text, settings, oldSettings) {\n    if (!settings && oldSettings) settings = oldSettings;\n    settings = _.defaults({}, settings, _.templateSettings);\n\n    // Combine delimiters into one regular expression via alternation.\n    var matcher = RegExp([\n      (settings.escape || noMatch).source,\n      (settings.interpolate || noMatch).source,\n      (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n\n    // Compile the template source, escaping string literals appropriately.\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset).replace(escaper, escapeChar);\n      index = offset + match.length;\n\n      if (escape) {\n        source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n      } else if (interpolate) {\n        source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n      } else if (evaluate) {\n        source += \"';\\n\" + evaluate + \"\\n__p+='\";\n      }\n\n      // Adobe VMs need the match returned to produce the correct offest.\n      return match;\n    });\n    source += \"';\\n\";\n\n    // If a variable is not specified, place data values in local scope.\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n      \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n      source + 'return __p;\\n';\n\n    try {\n      var render = new Function(settings.variable || 'obj', '_', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    var template = function(data) {\n      return render.call(this, data, _);\n    };\n\n    // Provide the compiled source as a convenience for precompilation.\n    var argument = settings.variable || 'obj';\n    template.source = 'function(' + argument + '){\\n' + source + '}';\n\n    return template;\n  };\n\n  // Add a \"chain\" function. Start chaining a wrapped Underscore object.\n  _.chain = function(obj) {\n    var instance = _(obj);\n    instance._chain = true;\n    return instance;\n  };\n\n  // OOP\n  // ---------------\n  // If Underscore is called as a function, it returns a wrapped object that\n  // can be used OO-style. This wrapper holds altered versions of all the\n  // underscore functions. Wrapped objects may be chained.\n\n  // Helper function to continue chaining intermediate results.\n  var result = function(instance, obj) {\n    return instance._chain ? _(obj).chain() : obj;\n  };\n\n  // Add your own custom functions to the Underscore object.\n  _.mixin = function(obj) {\n    _.each(_.functions(obj), function(name) {\n      var func = _[name] = obj[name];\n      _.prototype[name] = function() {\n        var args = [this._wrapped];\n        push.apply(args, arguments);\n        return result(this, func.apply(_, args));\n      };\n    });\n  };\n\n  // Add all of the Underscore functions to the wrapper object.\n  _.mixin(_);\n\n  // Add all mutator Array functions to the wrapper.\n  _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      var obj = this._wrapped;\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];\n      return result(this, obj);\n    };\n  });\n\n  // Add all accessor Array functions to the wrapper.\n  _.each(['concat', 'join', 'slice'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      return result(this, method.apply(this._wrapped, arguments));\n    };\n  });\n\n  // Extracts the result from a wrapped and chained object.\n  _.prototype.value = function() {\n    return this._wrapped;\n  };\n\n  // Provide unwrapping proxy for some methods used in engine operations\n  // such as arithmetic and JSON stringification.\n  _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n  _.prototype.toString = function() {\n    return '' + this._wrapped;\n  };\n\n  // AMD registration happens at the end for compatibility with AMD loaders\n  // that may not enforce next-turn semantics on modules. Even though general\n  // practice for AMD registration is to be anonymous, underscore registers\n  // as a named module because, like jQuery, it is a base library that is\n  // popular enough to be bundled in a third party lib, but not be part of\n  // an AMD load request. Those cases could generate an error when an\n  // anonymous define() is called outside of a loader request.\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function() {\n      return _;\n    }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  }\n}.call(this));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS91bmRlcnNjb3JlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUlMvLi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS91bmRlcnNjb3JlLmpzPzE3ZmIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gICAgIFVuZGVyc2NvcmUuanMgMS44LjNcbi8vICAgICBodHRwOi8vdW5kZXJzY29yZWpzLm9yZ1xuLy8gICAgIChjKSAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbi8vICAgICBVbmRlcnNjb3JlIG1heSBiZSBmcmVlbHkgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG4oZnVuY3Rpb24oKSB7XG5cbiAgLy8gQmFzZWxpbmUgc2V0dXBcbiAgLy8gLS0tLS0tLS0tLS0tLS1cblxuICAvLyBFc3RhYmxpc2ggdGhlIHJvb3Qgb2JqZWN0LCBgd2luZG93YCBpbiB0aGUgYnJvd3Nlciwgb3IgYGV4cG9ydHNgIG9uIHRoZSBzZXJ2ZXIuXG4gIHZhciByb290ID0gdGhpcztcblxuICAvLyBTYXZlIHRoZSBwcmV2aW91cyB2YWx1ZSBvZiB0aGUgYF9gIHZhcmlhYmxlLlxuICB2YXIgcHJldmlvdXNVbmRlcnNjb3JlID0gcm9vdC5fO1xuXG4gIC8vIFNhdmUgYnl0ZXMgaW4gdGhlIG1pbmlmaWVkIChidXQgbm90IGd6aXBwZWQpIHZlcnNpb246XG4gIHZhciBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlLCBPYmpQcm90byA9IE9iamVjdC5wcm90b3R5cGUsIEZ1bmNQcm90byA9IEZ1bmN0aW9uLnByb3RvdHlwZTtcblxuICAvLyBDcmVhdGUgcXVpY2sgcmVmZXJlbmNlIHZhcmlhYmxlcyBmb3Igc3BlZWQgYWNjZXNzIHRvIGNvcmUgcHJvdG90eXBlcy5cbiAgdmFyXG4gICAgcHVzaCAgICAgICAgICAgICA9IEFycmF5UHJvdG8ucHVzaCxcbiAgICBzbGljZSAgICAgICAgICAgID0gQXJyYXlQcm90by5zbGljZSxcbiAgICB0b1N0cmluZyAgICAgICAgID0gT2JqUHJvdG8udG9TdHJpbmcsXG4gICAgaGFzT3duUHJvcGVydHkgICA9IE9ialByb3RvLmhhc093blByb3BlcnR5O1xuXG4gIC8vIEFsbCAqKkVDTUFTY3JpcHQgNSoqIG5hdGl2ZSBmdW5jdGlvbiBpbXBsZW1lbnRhdGlvbnMgdGhhdCB3ZSBob3BlIHRvIHVzZVxuICAvLyBhcmUgZGVjbGFyZWQgaGVyZS5cbiAgdmFyXG4gICAgbmF0aXZlSXNBcnJheSAgICAgID0gQXJyYXkuaXNBcnJheSxcbiAgICBuYXRpdmVLZXlzICAgICAgICAgPSBPYmplY3Qua2V5cyxcbiAgICBuYXRpdmVCaW5kICAgICAgICAgPSBGdW5jUHJvdG8uYmluZCxcbiAgICBuYXRpdmVDcmVhdGUgICAgICAgPSBPYmplY3QuY3JlYXRlO1xuXG4gIC8vIE5ha2VkIGZ1bmN0aW9uIHJlZmVyZW5jZSBmb3Igc3Vycm9nYXRlLXByb3RvdHlwZS1zd2FwcGluZy5cbiAgdmFyIEN0b3IgPSBmdW5jdGlvbigpe307XG5cbiAgLy8gQ3JlYXRlIGEgc2FmZSByZWZlcmVuY2UgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0IGZvciB1c2UgYmVsb3cuXG4gIHZhciBfID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKG9iaiBpbnN0YW5jZW9mIF8pIHJldHVybiBvYmo7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIF8pKSByZXR1cm4gbmV3IF8ob2JqKTtcbiAgICB0aGlzLl93cmFwcGVkID0gb2JqO1xuICB9O1xuXG4gIC8vIEV4cG9ydCB0aGUgVW5kZXJzY29yZSBvYmplY3QgZm9yICoqTm9kZS5qcyoqLCB3aXRoXG4gIC8vIGJhY2t3YXJkcy1jb21wYXRpYmlsaXR5IGZvciB0aGUgb2xkIGByZXF1aXJlKClgIEFQSS4gSWYgd2UncmUgaW5cbiAgLy8gdGhlIGJyb3dzZXIsIGFkZCBgX2AgYXMgYSBnbG9iYWwgb2JqZWN0LlxuICBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfO1xuICAgIH1cbiAgICBleHBvcnRzLl8gPSBfO1xuICB9IGVsc2Uge1xuICAgIHJvb3QuXyA9IF87XG4gIH1cblxuICAvLyBDdXJyZW50IHZlcnNpb24uXG4gIF8uVkVSU0lPTiA9ICcxLjguMyc7XG5cbiAgLy8gSW50ZXJuYWwgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIGVmZmljaWVudCAoZm9yIGN1cnJlbnQgZW5naW5lcykgdmVyc2lvblxuICAvLyBvZiB0aGUgcGFzc2VkLWluIGNhbGxiYWNrLCB0byBiZSByZXBlYXRlZGx5IGFwcGxpZWQgaW4gb3RoZXIgVW5kZXJzY29yZVxuICAvLyBmdW5jdGlvbnMuXG4gIHZhciBvcHRpbWl6ZUNiID0gZnVuY3Rpb24oZnVuYywgY29udGV4dCwgYXJnQ291bnQpIHtcbiAgICBpZiAoY29udGV4dCA9PT0gdm9pZCAwKSByZXR1cm4gZnVuYztcbiAgICBzd2l0Y2ggKGFyZ0NvdW50ID09IG51bGwgPyAzIDogYXJnQ291bnQpIHtcbiAgICAgIGNhc2UgMTogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmNhbGwoY29udGV4dCwgdmFsdWUpO1xuICAgICAgfTtcbiAgICAgIGNhc2UgMjogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlLCBvdGhlcikge1xuICAgICAgICByZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsIHZhbHVlLCBvdGhlcik7XG4gICAgICB9O1xuICAgICAgY2FzZSAzOiByZXR1cm4gZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgIH07XG4gICAgICBjYXNlIDQ6IHJldHVybiBmdW5jdGlvbihhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmNhbGwoY29udGV4dCwgYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZnVuYy5hcHBseShjb250ZXh0LCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gQSBtb3N0bHktaW50ZXJuYWwgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgY2FsbGJhY2tzIHRoYXQgY2FuIGJlIGFwcGxpZWRcbiAgLy8gdG8gZWFjaCBlbGVtZW50IGluIGEgY29sbGVjdGlvbiwgcmV0dXJuaW5nIHRoZSBkZXNpcmVkIHJlc3VsdCDigJQgZWl0aGVyXG4gIC8vIGlkZW50aXR5LCBhbiBhcmJpdHJhcnkgY2FsbGJhY2ssIGEgcHJvcGVydHkgbWF0Y2hlciwgb3IgYSBwcm9wZXJ0eSBhY2Nlc3Nvci5cbiAgdmFyIGNiID0gZnVuY3Rpb24odmFsdWUsIGNvbnRleHQsIGFyZ0NvdW50KSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiBfLmlkZW50aXR5O1xuICAgIGlmIChfLmlzRnVuY3Rpb24odmFsdWUpKSByZXR1cm4gb3B0aW1pemVDYih2YWx1ZSwgY29udGV4dCwgYXJnQ291bnQpO1xuICAgIGlmIChfLmlzT2JqZWN0KHZhbHVlKSkgcmV0dXJuIF8ubWF0Y2hlcih2YWx1ZSk7XG4gICAgcmV0dXJuIF8ucHJvcGVydHkodmFsdWUpO1xuICB9O1xuICBfLml0ZXJhdGVlID0gZnVuY3Rpb24odmFsdWUsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gY2IodmFsdWUsIGNvbnRleHQsIEluZmluaXR5KTtcbiAgfTtcblxuICAvLyBBbiBpbnRlcm5hbCBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgYXNzaWduZXIgZnVuY3Rpb25zLlxuICB2YXIgY3JlYXRlQXNzaWduZXIgPSBmdW5jdGlvbihrZXlzRnVuYywgdW5kZWZpbmVkT25seSkge1xuICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgaWYgKGxlbmd0aCA8IDIgfHwgb2JqID09IG51bGwpIHJldHVybiBvYmo7XG4gICAgICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdLFxuICAgICAgICAgICAga2V5cyA9IGtleXNGdW5jKHNvdXJjZSksXG4gICAgICAgICAgICBsID0ga2V5cy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgaWYgKCF1bmRlZmluZWRPbmx5IHx8IG9ialtrZXldID09PSB2b2lkIDApIG9ialtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBvYmo7XG4gICAgfTtcbiAgfTtcblxuICAvLyBBbiBpbnRlcm5hbCBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgYSBuZXcgb2JqZWN0IHRoYXQgaW5oZXJpdHMgZnJvbSBhbm90aGVyLlxuICB2YXIgYmFzZUNyZWF0ZSA9IGZ1bmN0aW9uKHByb3RvdHlwZSkge1xuICAgIGlmICghXy5pc09iamVjdChwcm90b3R5cGUpKSByZXR1cm4ge307XG4gICAgaWYgKG5hdGl2ZUNyZWF0ZSkgcmV0dXJuIG5hdGl2ZUNyZWF0ZShwcm90b3R5cGUpO1xuICAgIEN0b3IucHJvdG90eXBlID0gcHJvdG90eXBlO1xuICAgIHZhciByZXN1bHQgPSBuZXcgQ3RvcjtcbiAgICBDdG9yLnByb3RvdHlwZSA9IG51bGw7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICB2YXIgcHJvcGVydHkgPSBmdW5jdGlvbihrZXkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gb2JqID09IG51bGwgPyB2b2lkIDAgOiBvYmpba2V5XTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIEhlbHBlciBmb3IgY29sbGVjdGlvbiBtZXRob2RzIHRvIGRldGVybWluZSB3aGV0aGVyIGEgY29sbGVjdGlvblxuICAvLyBzaG91bGQgYmUgaXRlcmF0ZWQgYXMgYW4gYXJyYXkgb3IgYXMgYW4gb2JqZWN0XG4gIC8vIFJlbGF0ZWQ6IGh0dHA6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLXRvbGVuZ3RoXG4gIC8vIEF2b2lkcyBhIHZlcnkgbmFzdHkgaU9TIDggSklUIGJ1ZyBvbiBBUk0tNjQuICMyMDk0XG4gIHZhciBNQVhfQVJSQVlfSU5ERVggPSBNYXRoLnBvdygyLCA1MykgLSAxO1xuICB2YXIgZ2V0TGVuZ3RoID0gcHJvcGVydHkoJ2xlbmd0aCcpO1xuICB2YXIgaXNBcnJheUxpa2UgPSBmdW5jdGlvbihjb2xsZWN0aW9uKSB7XG4gICAgdmFyIGxlbmd0aCA9IGdldExlbmd0aChjb2xsZWN0aW9uKTtcbiAgICByZXR1cm4gdHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJyAmJiBsZW5ndGggPj0gMCAmJiBsZW5ndGggPD0gTUFYX0FSUkFZX0lOREVYO1xuICB9O1xuXG4gIC8vIENvbGxlY3Rpb24gRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gVGhlIGNvcm5lcnN0b25lLCBhbiBgZWFjaGAgaW1wbGVtZW50YXRpb24sIGFrYSBgZm9yRWFjaGAuXG4gIC8vIEhhbmRsZXMgcmF3IG9iamVjdHMgaW4gYWRkaXRpb24gdG8gYXJyYXktbGlrZXMuIFRyZWF0cyBhbGxcbiAgLy8gc3BhcnNlIGFycmF5LWxpa2VzIGFzIGlmIHRoZXkgd2VyZSBkZW5zZS5cbiAgXy5lYWNoID0gXy5mb3JFYWNoID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGl0ZXJhdGVlID0gb3B0aW1pemVDYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgdmFyIGksIGxlbmd0aDtcbiAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSkge1xuICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGl0ZXJhdGVlKG9ialtpXSwgaSwgb2JqKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGtleXMgPSBfLmtleXMob2JqKTtcbiAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaXRlcmF0ZWUob2JqW2tleXNbaV1dLCBrZXlzW2ldLCBvYmopO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9O1xuXG4gIC8vIFJldHVybiB0aGUgcmVzdWx0cyBvZiBhcHBseWluZyB0aGUgaXRlcmF0ZWUgdG8gZWFjaCBlbGVtZW50LlxuICBfLm1hcCA9IF8uY29sbGVjdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9ICFpc0FycmF5TGlrZShvYmopICYmIF8ua2V5cyhvYmopLFxuICAgICAgICBsZW5ndGggPSAoa2V5cyB8fCBvYmopLmxlbmd0aCxcbiAgICAgICAgcmVzdWx0cyA9IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgdmFyIGN1cnJlbnRLZXkgPSBrZXlzID8ga2V5c1tpbmRleF0gOiBpbmRleDtcbiAgICAgIHJlc3VsdHNbaW5kZXhdID0gaXRlcmF0ZWUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfTtcblxuICAvLyBDcmVhdGUgYSByZWR1Y2luZyBmdW5jdGlvbiBpdGVyYXRpbmcgbGVmdCBvciByaWdodC5cbiAgZnVuY3Rpb24gY3JlYXRlUmVkdWNlKGRpcikge1xuICAgIC8vIE9wdGltaXplZCBpdGVyYXRvciBmdW5jdGlvbiBhcyB1c2luZyBhcmd1bWVudHMubGVuZ3RoXG4gICAgLy8gaW4gdGhlIG1haW4gZnVuY3Rpb24gd2lsbCBkZW9wdGltaXplIHRoZSwgc2VlICMxOTkxLlxuICAgIGZ1bmN0aW9uIGl0ZXJhdG9yKG9iaiwgaXRlcmF0ZWUsIG1lbW8sIGtleXMsIGluZGV4LCBsZW5ndGgpIHtcbiAgICAgIGZvciAoOyBpbmRleCA+PSAwICYmIGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSBkaXIpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRLZXkgPSBrZXlzID8ga2V5c1tpbmRleF0gOiBpbmRleDtcbiAgICAgICAgbWVtbyA9IGl0ZXJhdGVlKG1lbW8sIG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtZW1vO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBtZW1vLCBjb250ZXh0KSB7XG4gICAgICBpdGVyYXRlZSA9IG9wdGltaXplQ2IoaXRlcmF0ZWUsIGNvbnRleHQsIDQpO1xuICAgICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSxcbiAgICAgICAgICBsZW5ndGggPSAoa2V5cyB8fCBvYmopLmxlbmd0aCxcbiAgICAgICAgICBpbmRleCA9IGRpciA+IDAgPyAwIDogbGVuZ3RoIC0gMTtcbiAgICAgIC8vIERldGVybWluZSB0aGUgaW5pdGlhbCB2YWx1ZSBpZiBub25lIGlzIHByb3ZpZGVkLlxuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAzKSB7XG4gICAgICAgIG1lbW8gPSBvYmpba2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXhdO1xuICAgICAgICBpbmRleCArPSBkaXI7XG4gICAgICB9XG4gICAgICByZXR1cm4gaXRlcmF0b3Iob2JqLCBpdGVyYXRlZSwgbWVtbywga2V5cywgaW5kZXgsIGxlbmd0aCk7XG4gICAgfTtcbiAgfVxuXG4gIC8vICoqUmVkdWNlKiogYnVpbGRzIHVwIGEgc2luZ2xlIHJlc3VsdCBmcm9tIGEgbGlzdCBvZiB2YWx1ZXMsIGFrYSBgaW5qZWN0YCxcbiAgLy8gb3IgYGZvbGRsYC5cbiAgXy5yZWR1Y2UgPSBfLmZvbGRsID0gXy5pbmplY3QgPSBjcmVhdGVSZWR1Y2UoMSk7XG5cbiAgLy8gVGhlIHJpZ2h0LWFzc29jaWF0aXZlIHZlcnNpb24gb2YgcmVkdWNlLCBhbHNvIGtub3duIGFzIGBmb2xkcmAuXG4gIF8ucmVkdWNlUmlnaHQgPSBfLmZvbGRyID0gY3JlYXRlUmVkdWNlKC0xKTtcblxuICAvLyBSZXR1cm4gdGhlIGZpcnN0IHZhbHVlIHdoaWNoIHBhc3NlcyBhIHRydXRoIHRlc3QuIEFsaWFzZWQgYXMgYGRldGVjdGAuXG4gIF8uZmluZCA9IF8uZGV0ZWN0ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIga2V5O1xuICAgIGlmIChpc0FycmF5TGlrZShvYmopKSB7XG4gICAgICBrZXkgPSBfLmZpbmRJbmRleChvYmosIHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtleSA9IF8uZmluZEtleShvYmosIHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgfVxuICAgIGlmIChrZXkgIT09IHZvaWQgMCAmJiBrZXkgIT09IC0xKSByZXR1cm4gb2JqW2tleV07XG4gIH07XG5cbiAgLy8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgdGhhdCBwYXNzIGEgdHJ1dGggdGVzdC5cbiAgLy8gQWxpYXNlZCBhcyBgc2VsZWN0YC5cbiAgXy5maWx0ZXIgPSBfLnNlbGVjdCA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgaWYgKHByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgsIGxpc3QpKSByZXN1bHRzLnB1c2godmFsdWUpO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHRzO1xuICB9O1xuXG4gIC8vIFJldHVybiBhbGwgdGhlIGVsZW1lbnRzIGZvciB3aGljaCBhIHRydXRoIHRlc3QgZmFpbHMuXG4gIF8ucmVqZWN0ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gXy5maWx0ZXIob2JqLCBfLm5lZ2F0ZShjYihwcmVkaWNhdGUpKSwgY29udGV4dCk7XG4gIH07XG5cbiAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgYWxsIG9mIHRoZSBlbGVtZW50cyBtYXRjaCBhIHRydXRoIHRlc3QuXG4gIC8vIEFsaWFzZWQgYXMgYGFsbGAuXG4gIF8uZXZlcnkgPSBfLmFsbCA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9ICFpc0FycmF5TGlrZShvYmopICYmIF8ua2V5cyhvYmopLFxuICAgICAgICBsZW5ndGggPSAoa2V5cyB8fCBvYmopLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuICAgICAgaWYgKCFwcmVkaWNhdGUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8vIERldGVybWluZSBpZiBhdCBsZWFzdCBvbmUgZWxlbWVudCBpbiB0aGUgb2JqZWN0IG1hdGNoZXMgYSB0cnV0aCB0ZXN0LlxuICAvLyBBbGlhc2VkIGFzIGBhbnlgLlxuICBfLnNvbWUgPSBfLmFueSA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9ICFpc0FycmF5TGlrZShvYmopICYmIF8ua2V5cyhvYmopLFxuICAgICAgICBsZW5ndGggPSAoa2V5cyB8fCBvYmopLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuICAgICAgaWYgKHByZWRpY2F0ZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaikpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLy8gRGV0ZXJtaW5lIGlmIHRoZSBhcnJheSBvciBvYmplY3QgY29udGFpbnMgYSBnaXZlbiBpdGVtICh1c2luZyBgPT09YCkuXG4gIC8vIEFsaWFzZWQgYXMgYGluY2x1ZGVzYCBhbmQgYGluY2x1ZGVgLlxuICBfLmNvbnRhaW5zID0gXy5pbmNsdWRlcyA9IF8uaW5jbHVkZSA9IGZ1bmN0aW9uKG9iaiwgaXRlbSwgZnJvbUluZGV4LCBndWFyZCkge1xuICAgIGlmICghaXNBcnJheUxpa2Uob2JqKSkgb2JqID0gXy52YWx1ZXMob2JqKTtcbiAgICBpZiAodHlwZW9mIGZyb21JbmRleCAhPSAnbnVtYmVyJyB8fCBndWFyZCkgZnJvbUluZGV4ID0gMDtcbiAgICByZXR1cm4gXy5pbmRleE9mKG9iaiwgaXRlbSwgZnJvbUluZGV4KSA+PSAwO1xuICB9O1xuXG4gIC8vIEludm9rZSBhIG1ldGhvZCAod2l0aCBhcmd1bWVudHMpIG9uIGV2ZXJ5IGl0ZW0gaW4gYSBjb2xsZWN0aW9uLlxuICBfLmludm9rZSA9IGZ1bmN0aW9uKG9iaiwgbWV0aG9kKSB7XG4gICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG4gICAgdmFyIGlzRnVuYyA9IF8uaXNGdW5jdGlvbihtZXRob2QpO1xuICAgIHJldHVybiBfLm1hcChvYmosIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgZnVuYyA9IGlzRnVuYyA/IG1ldGhvZCA6IHZhbHVlW21ldGhvZF07XG4gICAgICByZXR1cm4gZnVuYyA9PSBudWxsID8gZnVuYyA6IGZ1bmMuYXBwbHkodmFsdWUsIGFyZ3MpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIENvbnZlbmllbmNlIHZlcnNpb24gb2YgYSBjb21tb24gdXNlIGNhc2Ugb2YgYG1hcGA6IGZldGNoaW5nIGEgcHJvcGVydHkuXG4gIF8ucGx1Y2sgPSBmdW5jdGlvbihvYmosIGtleSkge1xuICAgIHJldHVybiBfLm1hcChvYmosIF8ucHJvcGVydHkoa2V5KSk7XG4gIH07XG5cbiAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgZmlsdGVyYDogc2VsZWN0aW5nIG9ubHkgb2JqZWN0c1xuICAvLyBjb250YWluaW5nIHNwZWNpZmljIGBrZXk6dmFsdWVgIHBhaXJzLlxuICBfLndoZXJlID0gZnVuY3Rpb24ob2JqLCBhdHRycykge1xuICAgIHJldHVybiBfLmZpbHRlcihvYmosIF8ubWF0Y2hlcihhdHRycykpO1xuICB9O1xuXG4gIC8vIENvbnZlbmllbmNlIHZlcnNpb24gb2YgYSBjb21tb24gdXNlIGNhc2Ugb2YgYGZpbmRgOiBnZXR0aW5nIHRoZSBmaXJzdCBvYmplY3RcbiAgLy8gY29udGFpbmluZyBzcGVjaWZpYyBga2V5OnZhbHVlYCBwYWlycy5cbiAgXy5maW5kV2hlcmUgPSBmdW5jdGlvbihvYmosIGF0dHJzKSB7XG4gICAgcmV0dXJuIF8uZmluZChvYmosIF8ubWF0Y2hlcihhdHRycykpO1xuICB9O1xuXG4gIC8vIFJldHVybiB0aGUgbWF4aW11bSBlbGVtZW50IChvciBlbGVtZW50LWJhc2VkIGNvbXB1dGF0aW9uKS5cbiAgXy5tYXggPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgdmFyIHJlc3VsdCA9IC1JbmZpbml0eSwgbGFzdENvbXB1dGVkID0gLUluZmluaXR5LFxuICAgICAgICB2YWx1ZSwgY29tcHV0ZWQ7XG4gICAgaWYgKGl0ZXJhdGVlID09IG51bGwgJiYgb2JqICE9IG51bGwpIHtcbiAgICAgIG9iaiA9IGlzQXJyYXlMaWtlKG9iaikgPyBvYmogOiBfLnZhbHVlcyhvYmopO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IG9iai5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB2YWx1ZSA9IG9ialtpXTtcbiAgICAgICAgaWYgKHZhbHVlID4gcmVzdWx0KSB7XG4gICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcbiAgICAgICAgY29tcHV0ZWQgPSBpdGVyYXRlZSh2YWx1ZSwgaW5kZXgsIGxpc3QpO1xuICAgICAgICBpZiAoY29tcHV0ZWQgPiBsYXN0Q29tcHV0ZWQgfHwgY29tcHV0ZWQgPT09IC1JbmZpbml0eSAmJiByZXN1bHQgPT09IC1JbmZpbml0eSkge1xuICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICAgIGxhc3RDb21wdXRlZCA9IGNvbXB1dGVkO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBSZXR1cm4gdGhlIG1pbmltdW0gZWxlbWVudCAob3IgZWxlbWVudC1iYXNlZCBjb21wdXRhdGlvbikuXG4gIF8ubWluID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIHZhciByZXN1bHQgPSBJbmZpbml0eSwgbGFzdENvbXB1dGVkID0gSW5maW5pdHksXG4gICAgICAgIHZhbHVlLCBjb21wdXRlZDtcbiAgICBpZiAoaXRlcmF0ZWUgPT0gbnVsbCAmJiBvYmogIT0gbnVsbCkge1xuICAgICAgb2JqID0gaXNBcnJheUxpa2Uob2JqKSA/IG9iaiA6IF8udmFsdWVzKG9iaik7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbHVlID0gb2JqW2ldO1xuICAgICAgICBpZiAodmFsdWUgPCByZXN1bHQpIHtcbiAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgbGlzdCk7XG4gICAgICAgIGlmIChjb21wdXRlZCA8IGxhc3RDb21wdXRlZCB8fCBjb21wdXRlZCA9PT0gSW5maW5pdHkgJiYgcmVzdWx0ID09PSBJbmZpbml0eSkge1xuICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICAgIGxhc3RDb21wdXRlZCA9IGNvbXB1dGVkO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBTaHVmZmxlIGEgY29sbGVjdGlvbiwgdXNpbmcgdGhlIG1vZGVybiB2ZXJzaW9uIG9mIHRoZVxuICAvLyBbRmlzaGVyLVlhdGVzIHNodWZmbGVdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRmlzaGVy4oCTWWF0ZXNfc2h1ZmZsZSkuXG4gIF8uc2h1ZmZsZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBzZXQgPSBpc0FycmF5TGlrZShvYmopID8gb2JqIDogXy52YWx1ZXMob2JqKTtcbiAgICB2YXIgbGVuZ3RoID0gc2V0Lmxlbmd0aDtcbiAgICB2YXIgc2h1ZmZsZWQgPSBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGluZGV4ID0gMCwgcmFuZDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHJhbmQgPSBfLnJhbmRvbSgwLCBpbmRleCk7XG4gICAgICBpZiAocmFuZCAhPT0gaW5kZXgpIHNodWZmbGVkW2luZGV4XSA9IHNodWZmbGVkW3JhbmRdO1xuICAgICAgc2h1ZmZsZWRbcmFuZF0gPSBzZXRbaW5kZXhdO1xuICAgIH1cbiAgICByZXR1cm4gc2h1ZmZsZWQ7XG4gIH07XG5cbiAgLy8gU2FtcGxlICoqbioqIHJhbmRvbSB2YWx1ZXMgZnJvbSBhIGNvbGxlY3Rpb24uXG4gIC8vIElmICoqbioqIGlzIG5vdCBzcGVjaWZpZWQsIHJldHVybnMgYSBzaW5nbGUgcmFuZG9tIGVsZW1lbnQuXG4gIC8vIFRoZSBpbnRlcm5hbCBgZ3VhcmRgIGFyZ3VtZW50IGFsbG93cyBpdCB0byB3b3JrIHdpdGggYG1hcGAuXG4gIF8uc2FtcGxlID0gZnVuY3Rpb24ob2JqLCBuLCBndWFyZCkge1xuICAgIGlmIChuID09IG51bGwgfHwgZ3VhcmQpIHtcbiAgICAgIGlmICghaXNBcnJheUxpa2Uob2JqKSkgb2JqID0gXy52YWx1ZXMob2JqKTtcbiAgICAgIHJldHVybiBvYmpbXy5yYW5kb20ob2JqLmxlbmd0aCAtIDEpXTtcbiAgICB9XG4gICAgcmV0dXJuIF8uc2h1ZmZsZShvYmopLnNsaWNlKDAsIE1hdGgubWF4KDAsIG4pKTtcbiAgfTtcblxuICAvLyBTb3J0IHRoZSBvYmplY3QncyB2YWx1ZXMgYnkgYSBjcml0ZXJpb24gcHJvZHVjZWQgYnkgYW4gaXRlcmF0ZWUuXG4gIF8uc29ydEJ5ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIHJldHVybiBfLnBsdWNrKF8ubWFwKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgICAgY3JpdGVyaWE6IGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgbGlzdClcbiAgICAgIH07XG4gICAgfSkuc29ydChmdW5jdGlvbihsZWZ0LCByaWdodCkge1xuICAgICAgdmFyIGEgPSBsZWZ0LmNyaXRlcmlhO1xuICAgICAgdmFyIGIgPSByaWdodC5jcml0ZXJpYTtcbiAgICAgIGlmIChhICE9PSBiKSB7XG4gICAgICAgIGlmIChhID4gYiB8fCBhID09PSB2b2lkIDApIHJldHVybiAxO1xuICAgICAgICBpZiAoYSA8IGIgfHwgYiA9PT0gdm9pZCAwKSByZXR1cm4gLTE7XG4gICAgICB9XG4gICAgICByZXR1cm4gbGVmdC5pbmRleCAtIHJpZ2h0LmluZGV4O1xuICAgIH0pLCAndmFsdWUnKTtcbiAgfTtcblxuICAvLyBBbiBpbnRlcm5hbCBmdW5jdGlvbiB1c2VkIGZvciBhZ2dyZWdhdGUgXCJncm91cCBieVwiIG9wZXJhdGlvbnMuXG4gIHZhciBncm91cCA9IGZ1bmN0aW9uKGJlaGF2aW9yKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7XG4gICAgICAgIHZhciBrZXkgPSBpdGVyYXRlZSh2YWx1ZSwgaW5kZXgsIG9iaik7XG4gICAgICAgIGJlaGF2aW9yKHJlc3VsdCwgdmFsdWUsIGtleSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfTtcblxuICAvLyBHcm91cHMgdGhlIG9iamVjdCdzIHZhbHVlcyBieSBhIGNyaXRlcmlvbi4gUGFzcyBlaXRoZXIgYSBzdHJpbmcgYXR0cmlidXRlXG4gIC8vIHRvIGdyb3VwIGJ5LCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgY3JpdGVyaW9uLlxuICBfLmdyb3VwQnkgPSBncm91cChmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICBpZiAoXy5oYXMocmVzdWx0LCBrZXkpKSByZXN1bHRba2V5XS5wdXNoKHZhbHVlKTsgZWxzZSByZXN1bHRba2V5XSA9IFt2YWx1ZV07XG4gIH0pO1xuXG4gIC8vIEluZGV4ZXMgdGhlIG9iamVjdCdzIHZhbHVlcyBieSBhIGNyaXRlcmlvbiwgc2ltaWxhciB0byBgZ3JvdXBCeWAsIGJ1dCBmb3JcbiAgLy8gd2hlbiB5b3Uga25vdyB0aGF0IHlvdXIgaW5kZXggdmFsdWVzIHdpbGwgYmUgdW5pcXVlLlxuICBfLmluZGV4QnkgPSBncm91cChmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICB9KTtcblxuICAvLyBDb3VudHMgaW5zdGFuY2VzIG9mIGFuIG9iamVjdCB0aGF0IGdyb3VwIGJ5IGEgY2VydGFpbiBjcml0ZXJpb24uIFBhc3NcbiAgLy8gZWl0aGVyIGEgc3RyaW5nIGF0dHJpYnV0ZSB0byBjb3VudCBieSwgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlXG4gIC8vIGNyaXRlcmlvbi5cbiAgXy5jb3VudEJ5ID0gZ3JvdXAoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgaWYgKF8uaGFzKHJlc3VsdCwga2V5KSkgcmVzdWx0W2tleV0rKzsgZWxzZSByZXN1bHRba2V5XSA9IDE7XG4gIH0pO1xuXG4gIC8vIFNhZmVseSBjcmVhdGUgYSByZWFsLCBsaXZlIGFycmF5IGZyb20gYW55dGhpbmcgaXRlcmFibGUuXG4gIF8udG9BcnJheSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmICghb2JqKSByZXR1cm4gW107XG4gICAgaWYgKF8uaXNBcnJheShvYmopKSByZXR1cm4gc2xpY2UuY2FsbChvYmopO1xuICAgIGlmIChpc0FycmF5TGlrZShvYmopKSByZXR1cm4gXy5tYXAob2JqLCBfLmlkZW50aXR5KTtcbiAgICByZXR1cm4gXy52YWx1ZXMob2JqKTtcbiAgfTtcblxuICAvLyBSZXR1cm4gdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiBhbiBvYmplY3QuXG4gIF8uc2l6ZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIDA7XG4gICAgcmV0dXJuIGlzQXJyYXlMaWtlKG9iaikgPyBvYmoubGVuZ3RoIDogXy5rZXlzKG9iaikubGVuZ3RoO1xuICB9O1xuXG4gIC8vIFNwbGl0IGEgY29sbGVjdGlvbiBpbnRvIHR3byBhcnJheXM6IG9uZSB3aG9zZSBlbGVtZW50cyBhbGwgc2F0aXNmeSB0aGUgZ2l2ZW5cbiAgLy8gcHJlZGljYXRlLCBhbmQgb25lIHdob3NlIGVsZW1lbnRzIGFsbCBkbyBub3Qgc2F0aXNmeSB0aGUgcHJlZGljYXRlLlxuICBfLnBhcnRpdGlvbiA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB2YXIgcGFzcyA9IFtdLCBmYWlsID0gW107XG4gICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGtleSwgb2JqKSB7XG4gICAgICAocHJlZGljYXRlKHZhbHVlLCBrZXksIG9iaikgPyBwYXNzIDogZmFpbCkucHVzaCh2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIFtwYXNzLCBmYWlsXTtcbiAgfTtcblxuICAvLyBBcnJheSBGdW5jdGlvbnNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gR2V0IHRoZSBmaXJzdCBlbGVtZW50IG9mIGFuIGFycmF5LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIHRoZSBmaXJzdCBOXG4gIC8vIHZhbHVlcyBpbiB0aGUgYXJyYXkuIEFsaWFzZWQgYXMgYGhlYWRgIGFuZCBgdGFrZWAuIFRoZSAqKmd1YXJkKiogY2hlY2tcbiAgLy8gYWxsb3dzIGl0IHRvIHdvcmsgd2l0aCBgXy5tYXBgLlxuICBfLmZpcnN0ID0gXy5oZWFkID0gXy50YWtlID0gZnVuY3Rpb24oYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgaWYgKGFycmF5ID09IG51bGwpIHJldHVybiB2b2lkIDA7XG4gICAgaWYgKG4gPT0gbnVsbCB8fCBndWFyZCkgcmV0dXJuIGFycmF5WzBdO1xuICAgIHJldHVybiBfLmluaXRpYWwoYXJyYXksIGFycmF5Lmxlbmd0aCAtIG4pO1xuICB9O1xuXG4gIC8vIFJldHVybnMgZXZlcnl0aGluZyBidXQgdGhlIGxhc3QgZW50cnkgb2YgdGhlIGFycmF5LiBFc3BlY2lhbGx5IHVzZWZ1bCBvblxuICAvLyB0aGUgYXJndW1lbnRzIG9iamVjdC4gUGFzc2luZyAqKm4qKiB3aWxsIHJldHVybiBhbGwgdGhlIHZhbHVlcyBpblxuICAvLyB0aGUgYXJyYXksIGV4Y2x1ZGluZyB0aGUgbGFzdCBOLlxuICBfLmluaXRpYWwgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICByZXR1cm4gc2xpY2UuY2FsbChhcnJheSwgMCwgTWF0aC5tYXgoMCwgYXJyYXkubGVuZ3RoIC0gKG4gPT0gbnVsbCB8fCBndWFyZCA/IDEgOiBuKSkpO1xuICB9O1xuXG4gIC8vIEdldCB0aGUgbGFzdCBlbGVtZW50IG9mIGFuIGFycmF5LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIHRoZSBsYXN0IE5cbiAgLy8gdmFsdWVzIGluIHRoZSBhcnJheS5cbiAgXy5sYXN0ID0gZnVuY3Rpb24oYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgaWYgKGFycmF5ID09IG51bGwpIHJldHVybiB2b2lkIDA7XG4gICAgaWYgKG4gPT0gbnVsbCB8fCBndWFyZCkgcmV0dXJuIGFycmF5W2FycmF5Lmxlbmd0aCAtIDFdO1xuICAgIHJldHVybiBfLnJlc3QoYXJyYXksIE1hdGgubWF4KDAsIGFycmF5Lmxlbmd0aCAtIG4pKTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGV2ZXJ5dGhpbmcgYnV0IHRoZSBmaXJzdCBlbnRyeSBvZiB0aGUgYXJyYXkuIEFsaWFzZWQgYXMgYHRhaWxgIGFuZCBgZHJvcGAuXG4gIC8vIEVzcGVjaWFsbHkgdXNlZnVsIG9uIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBQYXNzaW5nIGFuICoqbioqIHdpbGwgcmV0dXJuXG4gIC8vIHRoZSByZXN0IE4gdmFsdWVzIGluIHRoZSBhcnJheS5cbiAgXy5yZXN0ID0gXy50YWlsID0gXy5kcm9wID0gZnVuY3Rpb24oYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgcmV0dXJuIHNsaWNlLmNhbGwoYXJyYXksIG4gPT0gbnVsbCB8fCBndWFyZCA/IDEgOiBuKTtcbiAgfTtcblxuICAvLyBUcmltIG91dCBhbGwgZmFsc3kgdmFsdWVzIGZyb20gYW4gYXJyYXkuXG4gIF8uY29tcGFjdCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgcmV0dXJuIF8uZmlsdGVyKGFycmF5LCBfLmlkZW50aXR5KTtcbiAgfTtcblxuICAvLyBJbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBvZiBhIHJlY3Vyc2l2ZSBgZmxhdHRlbmAgZnVuY3Rpb24uXG4gIHZhciBmbGF0dGVuID0gZnVuY3Rpb24oaW5wdXQsIHNoYWxsb3csIHN0cmljdCwgc3RhcnRJbmRleCkge1xuICAgIHZhciBvdXRwdXQgPSBbXSwgaWR4ID0gMDtcbiAgICBmb3IgKHZhciBpID0gc3RhcnRJbmRleCB8fCAwLCBsZW5ndGggPSBnZXRMZW5ndGgoaW5wdXQpOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB2YWx1ZSA9IGlucHV0W2ldO1xuICAgICAgaWYgKGlzQXJyYXlMaWtlKHZhbHVlKSAmJiAoXy5pc0FycmF5KHZhbHVlKSB8fCBfLmlzQXJndW1lbnRzKHZhbHVlKSkpIHtcbiAgICAgICAgLy9mbGF0dGVuIGN1cnJlbnQgbGV2ZWwgb2YgYXJyYXkgb3IgYXJndW1lbnRzIG9iamVjdFxuICAgICAgICBpZiAoIXNoYWxsb3cpIHZhbHVlID0gZmxhdHRlbih2YWx1ZSwgc2hhbGxvdywgc3RyaWN0KTtcbiAgICAgICAgdmFyIGogPSAwLCBsZW4gPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgIG91dHB1dC5sZW5ndGggKz0gbGVuO1xuICAgICAgICB3aGlsZSAoaiA8IGxlbikge1xuICAgICAgICAgIG91dHB1dFtpZHgrK10gPSB2YWx1ZVtqKytdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCFzdHJpY3QpIHtcbiAgICAgICAgb3V0cHV0W2lkeCsrXSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9O1xuXG4gIC8vIEZsYXR0ZW4gb3V0IGFuIGFycmF5LCBlaXRoZXIgcmVjdXJzaXZlbHkgKGJ5IGRlZmF1bHQpLCBvciBqdXN0IG9uZSBsZXZlbC5cbiAgXy5mbGF0dGVuID0gZnVuY3Rpb24oYXJyYXksIHNoYWxsb3cpIHtcbiAgICByZXR1cm4gZmxhdHRlbihhcnJheSwgc2hhbGxvdywgZmFsc2UpO1xuICB9O1xuXG4gIC8vIFJldHVybiBhIHZlcnNpb24gb2YgdGhlIGFycmF5IHRoYXQgZG9lcyBub3QgY29udGFpbiB0aGUgc3BlY2lmaWVkIHZhbHVlKHMpLlxuICBfLndpdGhvdXQgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHJldHVybiBfLmRpZmZlcmVuY2UoYXJyYXksIHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gIH07XG5cbiAgLy8gUHJvZHVjZSBhIGR1cGxpY2F0ZS1mcmVlIHZlcnNpb24gb2YgdGhlIGFycmF5LiBJZiB0aGUgYXJyYXkgaGFzIGFscmVhZHlcbiAgLy8gYmVlbiBzb3J0ZWQsIHlvdSBoYXZlIHRoZSBvcHRpb24gb2YgdXNpbmcgYSBmYXN0ZXIgYWxnb3JpdGhtLlxuICAvLyBBbGlhc2VkIGFzIGB1bmlxdWVgLlxuICBfLnVuaXEgPSBfLnVuaXF1ZSA9IGZ1bmN0aW9uKGFycmF5LCBpc1NvcnRlZCwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpZiAoIV8uaXNCb29sZWFuKGlzU29ydGVkKSkge1xuICAgICAgY29udGV4dCA9IGl0ZXJhdGVlO1xuICAgICAgaXRlcmF0ZWUgPSBpc1NvcnRlZDtcbiAgICAgIGlzU29ydGVkID0gZmFsc2U7XG4gICAgfVxuICAgIGlmIChpdGVyYXRlZSAhPSBudWxsKSBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgdmFyIHNlZW4gPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdmFsdWUgPSBhcnJheVtpXSxcbiAgICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlID8gaXRlcmF0ZWUodmFsdWUsIGksIGFycmF5KSA6IHZhbHVlO1xuICAgICAgaWYgKGlzU29ydGVkKSB7XG4gICAgICAgIGlmICghaSB8fCBzZWVuICE9PSBjb21wdXRlZCkgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICBzZWVuID0gY29tcHV0ZWQ7XG4gICAgICB9IGVsc2UgaWYgKGl0ZXJhdGVlKSB7XG4gICAgICAgIGlmICghXy5jb250YWlucyhzZWVuLCBjb21wdXRlZCkpIHtcbiAgICAgICAgICBzZWVuLnB1c2goY29tcHV0ZWQpO1xuICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghXy5jb250YWlucyhyZXN1bHQsIHZhbHVlKSkge1xuICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gUHJvZHVjZSBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIHRoZSB1bmlvbjogZWFjaCBkaXN0aW5jdCBlbGVtZW50IGZyb20gYWxsIG9mXG4gIC8vIHRoZSBwYXNzZWQtaW4gYXJyYXlzLlxuICBfLnVuaW9uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIF8udW5pcShmbGF0dGVuKGFyZ3VtZW50cywgdHJ1ZSwgdHJ1ZSkpO1xuICB9O1xuXG4gIC8vIFByb2R1Y2UgYW4gYXJyYXkgdGhhdCBjb250YWlucyBldmVyeSBpdGVtIHNoYXJlZCBiZXR3ZWVuIGFsbCB0aGVcbiAgLy8gcGFzc2VkLWluIGFycmF5cy5cbiAgXy5pbnRlcnNlY3Rpb24gPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICB2YXIgYXJnc0xlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGl0ZW0gPSBhcnJheVtpXTtcbiAgICAgIGlmIChfLmNvbnRhaW5zKHJlc3VsdCwgaXRlbSkpIGNvbnRpbnVlO1xuICAgICAgZm9yICh2YXIgaiA9IDE7IGogPCBhcmdzTGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKCFfLmNvbnRhaW5zKGFyZ3VtZW50c1tqXSwgaXRlbSkpIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKGogPT09IGFyZ3NMZW5ndGgpIHJlc3VsdC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFRha2UgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBvbmUgYXJyYXkgYW5kIGEgbnVtYmVyIG9mIG90aGVyIGFycmF5cy5cbiAgLy8gT25seSB0aGUgZWxlbWVudHMgcHJlc2VudCBpbiBqdXN0IHRoZSBmaXJzdCBhcnJheSB3aWxsIHJlbWFpbi5cbiAgXy5kaWZmZXJlbmNlID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICB2YXIgcmVzdCA9IGZsYXR0ZW4oYXJndW1lbnRzLCB0cnVlLCB0cnVlLCAxKTtcbiAgICByZXR1cm4gXy5maWx0ZXIoYXJyYXksIGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgIHJldHVybiAhXy5jb250YWlucyhyZXN0LCB2YWx1ZSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gWmlwIHRvZ2V0aGVyIG11bHRpcGxlIGxpc3RzIGludG8gYSBzaW5nbGUgYXJyYXkgLS0gZWxlbWVudHMgdGhhdCBzaGFyZVxuICAvLyBhbiBpbmRleCBnbyB0b2dldGhlci5cbiAgXy56aXAgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXy51bnppcChhcmd1bWVudHMpO1xuICB9O1xuXG4gIC8vIENvbXBsZW1lbnQgb2YgXy56aXAuIFVuemlwIGFjY2VwdHMgYW4gYXJyYXkgb2YgYXJyYXlzIGFuZCBncm91cHNcbiAgLy8gZWFjaCBhcnJheSdzIGVsZW1lbnRzIG9uIHNoYXJlZCBpbmRpY2VzXG4gIF8udW56aXAgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHZhciBsZW5ndGggPSBhcnJheSAmJiBfLm1heChhcnJheSwgZ2V0TGVuZ3RoKS5sZW5ndGggfHwgMDtcbiAgICB2YXIgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcblxuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHJlc3VsdFtpbmRleF0gPSBfLnBsdWNrKGFycmF5LCBpbmRleCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gQ29udmVydHMgbGlzdHMgaW50byBvYmplY3RzLiBQYXNzIGVpdGhlciBhIHNpbmdsZSBhcnJheSBvZiBgW2tleSwgdmFsdWVdYFxuICAvLyBwYWlycywgb3IgdHdvIHBhcmFsbGVsIGFycmF5cyBvZiB0aGUgc2FtZSBsZW5ndGggLS0gb25lIG9mIGtleXMsIGFuZCBvbmUgb2ZcbiAgLy8gdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWVzLlxuICBfLm9iamVjdCA9IGZ1bmN0aW9uKGxpc3QsIHZhbHVlcykge1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGxpc3QpOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh2YWx1ZXMpIHtcbiAgICAgICAgcmVzdWx0W2xpc3RbaV1dID0gdmFsdWVzW2ldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0W2xpc3RbaV1bMF1dID0gbGlzdFtpXVsxXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBHZW5lcmF0b3IgZnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBmaW5kSW5kZXggYW5kIGZpbmRMYXN0SW5kZXggZnVuY3Rpb25zXG4gIGZ1bmN0aW9uIGNyZWF0ZVByZWRpY2F0ZUluZGV4RmluZGVyKGRpcikge1xuICAgIHJldHVybiBmdW5jdGlvbihhcnJheSwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgICAgdmFyIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7XG4gICAgICB2YXIgaW5kZXggPSBkaXIgPiAwID8gMCA6IGxlbmd0aCAtIDE7XG4gICAgICBmb3IgKDsgaW5kZXggPj0gMCAmJiBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gZGlyKSB7XG4gICAgICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSByZXR1cm4gaW5kZXg7XG4gICAgICB9XG4gICAgICByZXR1cm4gLTE7XG4gICAgfTtcbiAgfVxuXG4gIC8vIFJldHVybnMgdGhlIGZpcnN0IGluZGV4IG9uIGFuIGFycmF5LWxpa2UgdGhhdCBwYXNzZXMgYSBwcmVkaWNhdGUgdGVzdFxuICBfLmZpbmRJbmRleCA9IGNyZWF0ZVByZWRpY2F0ZUluZGV4RmluZGVyKDEpO1xuICBfLmZpbmRMYXN0SW5kZXggPSBjcmVhdGVQcmVkaWNhdGVJbmRleEZpbmRlcigtMSk7XG5cbiAgLy8gVXNlIGEgY29tcGFyYXRvciBmdW5jdGlvbiB0byBmaWd1cmUgb3V0IHRoZSBzbWFsbGVzdCBpbmRleCBhdCB3aGljaFxuICAvLyBhbiBvYmplY3Qgc2hvdWxkIGJlIGluc2VydGVkIHNvIGFzIHRvIG1haW50YWluIG9yZGVyLiBVc2VzIGJpbmFyeSBzZWFyY2guXG4gIF8uc29ydGVkSW5kZXggPSBmdW5jdGlvbihhcnJheSwgb2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQsIDEpO1xuICAgIHZhciB2YWx1ZSA9IGl0ZXJhdGVlKG9iaik7XG4gICAgdmFyIGxvdyA9IDAsIGhpZ2ggPSBnZXRMZW5ndGgoYXJyYXkpO1xuICAgIHdoaWxlIChsb3cgPCBoaWdoKSB7XG4gICAgICB2YXIgbWlkID0gTWF0aC5mbG9vcigobG93ICsgaGlnaCkgLyAyKTtcbiAgICAgIGlmIChpdGVyYXRlZShhcnJheVttaWRdKSA8IHZhbHVlKSBsb3cgPSBtaWQgKyAxOyBlbHNlIGhpZ2ggPSBtaWQ7XG4gICAgfVxuICAgIHJldHVybiBsb3c7XG4gIH07XG5cbiAgLy8gR2VuZXJhdG9yIGZ1bmN0aW9uIHRvIGNyZWF0ZSB0aGUgaW5kZXhPZiBhbmQgbGFzdEluZGV4T2YgZnVuY3Rpb25zXG4gIGZ1bmN0aW9uIGNyZWF0ZUluZGV4RmluZGVyKGRpciwgcHJlZGljYXRlRmluZCwgc29ydGVkSW5kZXgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYXJyYXksIGl0ZW0sIGlkeCkge1xuICAgICAgdmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpO1xuICAgICAgaWYgKHR5cGVvZiBpZHggPT0gJ251bWJlcicpIHtcbiAgICAgICAgaWYgKGRpciA+IDApIHtcbiAgICAgICAgICAgIGkgPSBpZHggPj0gMCA/IGlkeCA6IE1hdGgubWF4KGlkeCArIGxlbmd0aCwgaSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZW5ndGggPSBpZHggPj0gMCA/IE1hdGgubWluKGlkeCArIDEsIGxlbmd0aCkgOiBpZHggKyBsZW5ndGggKyAxO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHNvcnRlZEluZGV4ICYmIGlkeCAmJiBsZW5ndGgpIHtcbiAgICAgICAgaWR4ID0gc29ydGVkSW5kZXgoYXJyYXksIGl0ZW0pO1xuICAgICAgICByZXR1cm4gYXJyYXlbaWR4XSA9PT0gaXRlbSA/IGlkeCA6IC0xO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW0gIT09IGl0ZW0pIHtcbiAgICAgICAgaWR4ID0gcHJlZGljYXRlRmluZChzbGljZS5jYWxsKGFycmF5LCBpLCBsZW5ndGgpLCBfLmlzTmFOKTtcbiAgICAgICAgcmV0dXJuIGlkeCA+PSAwID8gaWR4ICsgaSA6IC0xO1xuICAgICAgfVxuICAgICAgZm9yIChpZHggPSBkaXIgPiAwID8gaSA6IGxlbmd0aCAtIDE7IGlkeCA+PSAwICYmIGlkeCA8IGxlbmd0aDsgaWR4ICs9IGRpcikge1xuICAgICAgICBpZiAoYXJyYXlbaWR4XSA9PT0gaXRlbSkgcmV0dXJuIGlkeDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAtMTtcbiAgICB9O1xuICB9XG5cbiAgLy8gUmV0dXJuIHRoZSBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhbiBpdGVtIGluIGFuIGFycmF5LFxuICAvLyBvciAtMSBpZiB0aGUgaXRlbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhlIGFycmF5LlxuICAvLyBJZiB0aGUgYXJyYXkgaXMgbGFyZ2UgYW5kIGFscmVhZHkgaW4gc29ydCBvcmRlciwgcGFzcyBgdHJ1ZWBcbiAgLy8gZm9yICoqaXNTb3J0ZWQqKiB0byB1c2UgYmluYXJ5IHNlYXJjaC5cbiAgXy5pbmRleE9mID0gY3JlYXRlSW5kZXhGaW5kZXIoMSwgXy5maW5kSW5kZXgsIF8uc29ydGVkSW5kZXgpO1xuICBfLmxhc3RJbmRleE9mID0gY3JlYXRlSW5kZXhGaW5kZXIoLTEsIF8uZmluZExhc3RJbmRleCk7XG5cbiAgLy8gR2VuZXJhdGUgYW4gaW50ZWdlciBBcnJheSBjb250YWluaW5nIGFuIGFyaXRobWV0aWMgcHJvZ3Jlc3Npb24uIEEgcG9ydCBvZlxuICAvLyB0aGUgbmF0aXZlIFB5dGhvbiBgcmFuZ2UoKWAgZnVuY3Rpb24uIFNlZVxuICAvLyBbdGhlIFB5dGhvbiBkb2N1bWVudGF0aW9uXShodHRwOi8vZG9jcy5weXRob24ub3JnL2xpYnJhcnkvZnVuY3Rpb25zLmh0bWwjcmFuZ2UpLlxuICBfLnJhbmdlID0gZnVuY3Rpb24oc3RhcnQsIHN0b3AsIHN0ZXApIHtcbiAgICBpZiAoc3RvcCA9PSBudWxsKSB7XG4gICAgICBzdG9wID0gc3RhcnQgfHwgMDtcbiAgICAgIHN0YXJ0ID0gMDtcbiAgICB9XG4gICAgc3RlcCA9IHN0ZXAgfHwgMTtcblxuICAgIHZhciBsZW5ndGggPSBNYXRoLm1heChNYXRoLmNlaWwoKHN0b3AgLSBzdGFydCkgLyBzdGVwKSwgMCk7XG4gICAgdmFyIHJhbmdlID0gQXJyYXkobGVuZ3RoKTtcblxuICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGxlbmd0aDsgaWR4KyssIHN0YXJ0ICs9IHN0ZXApIHtcbiAgICAgIHJhbmdlW2lkeF0gPSBzdGFydDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmFuZ2U7XG4gIH07XG5cbiAgLy8gRnVuY3Rpb24gKGFoZW0pIEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBEZXRlcm1pbmVzIHdoZXRoZXIgdG8gZXhlY3V0ZSBhIGZ1bmN0aW9uIGFzIGEgY29uc3RydWN0b3JcbiAgLy8gb3IgYSBub3JtYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJvdmlkZWQgYXJndW1lbnRzXG4gIHZhciBleGVjdXRlQm91bmQgPSBmdW5jdGlvbihzb3VyY2VGdW5jLCBib3VuZEZ1bmMsIGNvbnRleHQsIGNhbGxpbmdDb250ZXh0LCBhcmdzKSB7XG4gICAgaWYgKCEoY2FsbGluZ0NvbnRleHQgaW5zdGFuY2VvZiBib3VuZEZ1bmMpKSByZXR1cm4gc291cmNlRnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICB2YXIgc2VsZiA9IGJhc2VDcmVhdGUoc291cmNlRnVuYy5wcm90b3R5cGUpO1xuICAgIHZhciByZXN1bHQgPSBzb3VyY2VGdW5jLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgIGlmIChfLmlzT2JqZWN0KHJlc3VsdCkpIHJldHVybiByZXN1bHQ7XG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLy8gQ3JlYXRlIGEgZnVuY3Rpb24gYm91bmQgdG8gYSBnaXZlbiBvYmplY3QgKGFzc2lnbmluZyBgdGhpc2AsIGFuZCBhcmd1bWVudHMsXG4gIC8vIG9wdGlvbmFsbHkpLiBEZWxlZ2F0ZXMgdG8gKipFQ01BU2NyaXB0IDUqKidzIG5hdGl2ZSBgRnVuY3Rpb24uYmluZGAgaWZcbiAgLy8gYXZhaWxhYmxlLlxuICBfLmJpbmQgPSBmdW5jdGlvbihmdW5jLCBjb250ZXh0KSB7XG4gICAgaWYgKG5hdGl2ZUJpbmQgJiYgZnVuYy5iaW5kID09PSBuYXRpdmVCaW5kKSByZXR1cm4gbmF0aXZlQmluZC5hcHBseShmdW5jLCBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgIGlmICghXy5pc0Z1bmN0aW9uKGZ1bmMpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdCaW5kIG11c3QgYmUgY2FsbGVkIG9uIGEgZnVuY3Rpb24nKTtcbiAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICB2YXIgYm91bmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBleGVjdXRlQm91bmQoZnVuYywgYm91bmQsIGNvbnRleHQsIHRoaXMsIGFyZ3MuY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xuICAgIH07XG4gICAgcmV0dXJuIGJvdW5kO1xuICB9O1xuXG4gIC8vIFBhcnRpYWxseSBhcHBseSBhIGZ1bmN0aW9uIGJ5IGNyZWF0aW5nIGEgdmVyc2lvbiB0aGF0IGhhcyBoYWQgc29tZSBvZiBpdHNcbiAgLy8gYXJndW1lbnRzIHByZS1maWxsZWQsIHdpdGhvdXQgY2hhbmdpbmcgaXRzIGR5bmFtaWMgYHRoaXNgIGNvbnRleHQuIF8gYWN0c1xuICAvLyBhcyBhIHBsYWNlaG9sZGVyLCBhbGxvd2luZyBhbnkgY29tYmluYXRpb24gb2YgYXJndW1lbnRzIHRvIGJlIHByZS1maWxsZWQuXG4gIF8ucGFydGlhbCA9IGZ1bmN0aW9uKGZ1bmMpIHtcbiAgICB2YXIgYm91bmRBcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgIHZhciBib3VuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBvc2l0aW9uID0gMCwgbGVuZ3RoID0gYm91bmRBcmdzLmxlbmd0aDtcbiAgICAgIHZhciBhcmdzID0gQXJyYXkobGVuZ3RoKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJnc1tpXSA9IGJvdW5kQXJnc1tpXSA9PT0gXyA/IGFyZ3VtZW50c1twb3NpdGlvbisrXSA6IGJvdW5kQXJnc1tpXTtcbiAgICAgIH1cbiAgICAgIHdoaWxlIChwb3NpdGlvbiA8IGFyZ3VtZW50cy5sZW5ndGgpIGFyZ3MucHVzaChhcmd1bWVudHNbcG9zaXRpb24rK10pO1xuICAgICAgcmV0dXJuIGV4ZWN1dGVCb3VuZChmdW5jLCBib3VuZCwgdGhpcywgdGhpcywgYXJncyk7XG4gICAgfTtcbiAgICByZXR1cm4gYm91bmQ7XG4gIH07XG5cbiAgLy8gQmluZCBhIG51bWJlciBvZiBhbiBvYmplY3QncyBtZXRob2RzIHRvIHRoYXQgb2JqZWN0LiBSZW1haW5pbmcgYXJndW1lbnRzXG4gIC8vIGFyZSB0aGUgbWV0aG9kIG5hbWVzIHRvIGJlIGJvdW5kLiBVc2VmdWwgZm9yIGVuc3VyaW5nIHRoYXQgYWxsIGNhbGxiYWNrc1xuICAvLyBkZWZpbmVkIG9uIGFuIG9iamVjdCBiZWxvbmcgdG8gaXQuXG4gIF8uYmluZEFsbCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBpLCBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLCBrZXk7XG4gICAgaWYgKGxlbmd0aCA8PSAxKSB0aHJvdyBuZXcgRXJyb3IoJ2JpbmRBbGwgbXVzdCBiZSBwYXNzZWQgZnVuY3Rpb24gbmFtZXMnKTtcbiAgICBmb3IgKGkgPSAxOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGtleSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgIG9ialtrZXldID0gXy5iaW5kKG9ialtrZXldLCBvYmopO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9O1xuXG4gIC8vIE1lbW9pemUgYW4gZXhwZW5zaXZlIGZ1bmN0aW9uIGJ5IHN0b3JpbmcgaXRzIHJlc3VsdHMuXG4gIF8ubWVtb2l6ZSA9IGZ1bmN0aW9uKGZ1bmMsIGhhc2hlcikge1xuICAgIHZhciBtZW1vaXplID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgICB2YXIgY2FjaGUgPSBtZW1vaXplLmNhY2hlO1xuICAgICAgdmFyIGFkZHJlc3MgPSAnJyArIChoYXNoZXIgPyBoYXNoZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSA6IGtleSk7XG4gICAgICBpZiAoIV8uaGFzKGNhY2hlLCBhZGRyZXNzKSkgY2FjaGVbYWRkcmVzc10gPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICByZXR1cm4gY2FjaGVbYWRkcmVzc107XG4gICAgfTtcbiAgICBtZW1vaXplLmNhY2hlID0ge307XG4gICAgcmV0dXJuIG1lbW9pemU7XG4gIH07XG5cbiAgLy8gRGVsYXlzIGEgZnVuY3Rpb24gZm9yIHRoZSBnaXZlbiBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLCBhbmQgdGhlbiBjYWxsc1xuICAvLyBpdCB3aXRoIHRoZSBhcmd1bWVudHMgc3VwcGxpZWQuXG4gIF8uZGVsYXkgPSBmdW5jdGlvbihmdW5jLCB3YWl0KSB7XG4gICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG4gICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiBmdW5jLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH0sIHdhaXQpO1xuICB9O1xuXG4gIC8vIERlZmVycyBhIGZ1bmN0aW9uLCBzY2hlZHVsaW5nIGl0IHRvIHJ1biBhZnRlciB0aGUgY3VycmVudCBjYWxsIHN0YWNrIGhhc1xuICAvLyBjbGVhcmVkLlxuICBfLmRlZmVyID0gXy5wYXJ0aWFsKF8uZGVsYXksIF8sIDEpO1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgd2hlbiBpbnZva2VkLCB3aWxsIG9ubHkgYmUgdHJpZ2dlcmVkIGF0IG1vc3Qgb25jZVxuICAvLyBkdXJpbmcgYSBnaXZlbiB3aW5kb3cgb2YgdGltZS4gTm9ybWFsbHksIHRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gd2lsbCBydW5cbiAgLy8gYXMgbXVjaCBhcyBpdCBjYW4sIHdpdGhvdXQgZXZlciBnb2luZyBtb3JlIHRoYW4gb25jZSBwZXIgYHdhaXRgIGR1cmF0aW9uO1xuICAvLyBidXQgaWYgeW91J2QgbGlrZSB0byBkaXNhYmxlIHRoZSBleGVjdXRpb24gb24gdGhlIGxlYWRpbmcgZWRnZSwgcGFzc1xuICAvLyBge2xlYWRpbmc6IGZhbHNlfWAuIFRvIGRpc2FibGUgZXhlY3V0aW9uIG9uIHRoZSB0cmFpbGluZyBlZGdlLCBkaXR0by5cbiAgXy50aHJvdHRsZSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgICB2YXIgY29udGV4dCwgYXJncywgcmVzdWx0O1xuICAgIHZhciB0aW1lb3V0ID0gbnVsbDtcbiAgICB2YXIgcHJldmlvdXMgPSAwO1xuICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9O1xuICAgIHZhciBsYXRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgcHJldmlvdXMgPSBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlID8gMCA6IF8ubm93KCk7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBub3cgPSBfLm5vdygpO1xuICAgICAgaWYgKCFwcmV2aW91cyAmJiBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlKSBwcmV2aW91cyA9IG5vdztcbiAgICAgIHZhciByZW1haW5pbmcgPSB3YWl0IC0gKG5vdyAtIHByZXZpb3VzKTtcbiAgICAgIGNvbnRleHQgPSB0aGlzO1xuICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIGlmIChyZW1haW5pbmcgPD0gMCB8fCByZW1haW5pbmcgPiB3YWl0KSB7XG4gICAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHByZXZpb3VzID0gbm93O1xuICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAoIXRpbWVvdXQgJiYgb3B0aW9ucy50cmFpbGluZyAhPT0gZmFsc2UpIHtcbiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHJlbWFpbmluZyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCBhcyBsb25nIGFzIGl0IGNvbnRpbnVlcyB0byBiZSBpbnZva2VkLCB3aWxsIG5vdFxuICAvLyBiZSB0cmlnZ2VyZWQuIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBhZnRlciBpdCBzdG9wcyBiZWluZyBjYWxsZWQgZm9yXG4gIC8vIE4gbWlsbGlzZWNvbmRzLiBJZiBgaW1tZWRpYXRlYCBpcyBwYXNzZWQsIHRyaWdnZXIgdGhlIGZ1bmN0aW9uIG9uIHRoZVxuICAvLyBsZWFkaW5nIGVkZ2UsIGluc3RlYWQgb2YgdGhlIHRyYWlsaW5nLlxuICBfLmRlYm91bmNlID0gZnVuY3Rpb24oZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XG4gICAgdmFyIHRpbWVvdXQsIGFyZ3MsIGNvbnRleHQsIHRpbWVzdGFtcCwgcmVzdWx0O1xuXG4gICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbGFzdCA9IF8ubm93KCkgLSB0aW1lc3RhbXA7XG5cbiAgICAgIGlmIChsYXN0IDwgd2FpdCAmJiBsYXN0ID49IDApIHtcbiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQgLSBsYXN0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICBpZiAoIWltbWVkaWF0ZSkge1xuICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgY29udGV4dCA9IHRoaXM7XG4gICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgdGltZXN0YW1wID0gXy5ub3coKTtcbiAgICAgIHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuICAgICAgaWYgKCF0aW1lb3V0KSB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG4gICAgICBpZiAoY2FsbE5vdykge1xuICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIHRoZSBmaXJzdCBmdW5jdGlvbiBwYXNzZWQgYXMgYW4gYXJndW1lbnQgdG8gdGhlIHNlY29uZCxcbiAgLy8gYWxsb3dpbmcgeW91IHRvIGFkanVzdCBhcmd1bWVudHMsIHJ1biBjb2RlIGJlZm9yZSBhbmQgYWZ0ZXIsIGFuZFxuICAvLyBjb25kaXRpb25hbGx5IGV4ZWN1dGUgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uLlxuICBfLndyYXAgPSBmdW5jdGlvbihmdW5jLCB3cmFwcGVyKSB7XG4gICAgcmV0dXJuIF8ucGFydGlhbCh3cmFwcGVyLCBmdW5jKTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgbmVnYXRlZCB2ZXJzaW9uIG9mIHRoZSBwYXNzZWQtaW4gcHJlZGljYXRlLlxuICBfLm5lZ2F0ZSA9IGZ1bmN0aW9uKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhcHJlZGljYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBpcyB0aGUgY29tcG9zaXRpb24gb2YgYSBsaXN0IG9mIGZ1bmN0aW9ucywgZWFjaFxuICAvLyBjb25zdW1pbmcgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZnVuY3Rpb24gdGhhdCBmb2xsb3dzLlxuICBfLmNvbXBvc2UgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICB2YXIgc3RhcnQgPSBhcmdzLmxlbmd0aCAtIDE7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGkgPSBzdGFydDtcbiAgICAgIHZhciByZXN1bHQgPSBhcmdzW3N0YXJ0XS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgd2hpbGUgKGktLSkgcmVzdWx0ID0gYXJnc1tpXS5jYWxsKHRoaXMsIHJlc3VsdCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBvbmx5IGJlIGV4ZWN1dGVkIG9uIGFuZCBhZnRlciB0aGUgTnRoIGNhbGwuXG4gIF8uYWZ0ZXIgPSBmdW5jdGlvbih0aW1lcywgZnVuYykge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICgtLXRpbWVzIDwgMSkge1xuICAgICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBvbmx5IGJlIGV4ZWN1dGVkIHVwIHRvIChidXQgbm90IGluY2x1ZGluZykgdGhlIE50aCBjYWxsLlxuICBfLmJlZm9yZSA9IGZ1bmN0aW9uKHRpbWVzLCBmdW5jKSB7XG4gICAgdmFyIG1lbW87XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKC0tdGltZXMgPiAwKSB7XG4gICAgICAgIG1lbW8gPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgICBpZiAodGltZXMgPD0gMSkgZnVuYyA9IG51bGw7XG4gICAgICByZXR1cm4gbWVtbztcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgYXQgbW9zdCBvbmUgdGltZSwgbm8gbWF0dGVyIGhvd1xuICAvLyBvZnRlbiB5b3UgY2FsbCBpdC4gVXNlZnVsIGZvciBsYXp5IGluaXRpYWxpemF0aW9uLlxuICBfLm9uY2UgPSBfLnBhcnRpYWwoXy5iZWZvcmUsIDIpO1xuXG4gIC8vIE9iamVjdCBGdW5jdGlvbnNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEtleXMgaW4gSUUgPCA5IHRoYXQgd29uJ3QgYmUgaXRlcmF0ZWQgYnkgYGZvciBrZXkgaW4gLi4uYCBhbmQgdGh1cyBtaXNzZWQuXG4gIHZhciBoYXNFbnVtQnVnID0gIXt0b1N0cmluZzogbnVsbH0ucHJvcGVydHlJc0VudW1lcmFibGUoJ3RvU3RyaW5nJyk7XG4gIHZhciBub25FbnVtZXJhYmxlUHJvcHMgPSBbJ3ZhbHVlT2YnLCAnaXNQcm90b3R5cGVPZicsICd0b1N0cmluZycsXG4gICAgICAgICAgICAgICAgICAgICAgJ3Byb3BlcnR5SXNFbnVtZXJhYmxlJywgJ2hhc093blByb3BlcnR5JywgJ3RvTG9jYWxlU3RyaW5nJ107XG5cbiAgZnVuY3Rpb24gY29sbGVjdE5vbkVudW1Qcm9wcyhvYmosIGtleXMpIHtcbiAgICB2YXIgbm9uRW51bUlkeCA9IG5vbkVudW1lcmFibGVQcm9wcy5sZW5ndGg7XG4gICAgdmFyIGNvbnN0cnVjdG9yID0gb2JqLmNvbnN0cnVjdG9yO1xuICAgIHZhciBwcm90byA9IChfLmlzRnVuY3Rpb24oY29uc3RydWN0b3IpICYmIGNvbnN0cnVjdG9yLnByb3RvdHlwZSkgfHwgT2JqUHJvdG87XG5cbiAgICAvLyBDb25zdHJ1Y3RvciBpcyBhIHNwZWNpYWwgY2FzZS5cbiAgICB2YXIgcHJvcCA9ICdjb25zdHJ1Y3Rvcic7XG4gICAgaWYgKF8uaGFzKG9iaiwgcHJvcCkgJiYgIV8uY29udGFpbnMoa2V5cywgcHJvcCkpIGtleXMucHVzaChwcm9wKTtcblxuICAgIHdoaWxlIChub25FbnVtSWR4LS0pIHtcbiAgICAgIHByb3AgPSBub25FbnVtZXJhYmxlUHJvcHNbbm9uRW51bUlkeF07XG4gICAgICBpZiAocHJvcCBpbiBvYmogJiYgb2JqW3Byb3BdICE9PSBwcm90b1twcm9wXSAmJiAhXy5jb250YWlucyhrZXlzLCBwcm9wKSkge1xuICAgICAgICBrZXlzLnB1c2gocHJvcCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gUmV0cmlldmUgdGhlIG5hbWVzIG9mIGFuIG9iamVjdCdzIG93biBwcm9wZXJ0aWVzLlxuICAvLyBEZWxlZ2F0ZXMgdG8gKipFQ01BU2NyaXB0IDUqKidzIG5hdGl2ZSBgT2JqZWN0LmtleXNgXG4gIF8ua2V5cyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmICghXy5pc09iamVjdChvYmopKSByZXR1cm4gW107XG4gICAgaWYgKG5hdGl2ZUtleXMpIHJldHVybiBuYXRpdmVLZXlzKG9iaik7XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSBpZiAoXy5oYXMob2JqLCBrZXkpKSBrZXlzLnB1c2goa2V5KTtcbiAgICAvLyBBaGVtLCBJRSA8IDkuXG4gICAgaWYgKGhhc0VudW1CdWcpIGNvbGxlY3ROb25FbnVtUHJvcHMob2JqLCBrZXlzKTtcbiAgICByZXR1cm4ga2V5cztcbiAgfTtcblxuICAvLyBSZXRyaWV2ZSBhbGwgdGhlIHByb3BlcnR5IG5hbWVzIG9mIGFuIG9iamVjdC5cbiAgXy5hbGxLZXlzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBbXTtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIGtleXMucHVzaChrZXkpO1xuICAgIC8vIEFoZW0sIElFIDwgOS5cbiAgICBpZiAoaGFzRW51bUJ1ZykgY29sbGVjdE5vbkVudW1Qcm9wcyhvYmosIGtleXMpO1xuICAgIHJldHVybiBrZXlzO1xuICB9O1xuXG4gIC8vIFJldHJpZXZlIHRoZSB2YWx1ZXMgb2YgYW4gb2JqZWN0J3MgcHJvcGVydGllcy5cbiAgXy52YWx1ZXMgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgdmFsdWVzID0gQXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YWx1ZXNbaV0gPSBvYmpba2V5c1tpXV07XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH07XG5cbiAgLy8gUmV0dXJucyB0aGUgcmVzdWx0cyBvZiBhcHBseWluZyB0aGUgaXRlcmF0ZWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBvYmplY3RcbiAgLy8gSW4gY29udHJhc3QgdG8gXy5tYXAgaXQgcmV0dXJucyBhbiBvYmplY3RcbiAgXy5tYXBPYmplY3QgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgdmFyIGtleXMgPSAgXy5rZXlzKG9iaiksXG4gICAgICAgICAgbGVuZ3RoID0ga2V5cy5sZW5ndGgsXG4gICAgICAgICAgcmVzdWx0cyA9IHt9LFxuICAgICAgICAgIGN1cnJlbnRLZXk7XG4gICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGN1cnJlbnRLZXkgPSBrZXlzW2luZGV4XTtcbiAgICAgICAgcmVzdWx0c1tjdXJyZW50S2V5XSA9IGl0ZXJhdGVlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICB9O1xuXG4gIC8vIENvbnZlcnQgYW4gb2JqZWN0IGludG8gYSBsaXN0IG9mIGBba2V5LCB2YWx1ZV1gIHBhaXJzLlxuICBfLnBhaXJzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIGtleXMgPSBfLmtleXMob2JqKTtcbiAgICB2YXIgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgdmFyIHBhaXJzID0gQXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBwYWlyc1tpXSA9IFtrZXlzW2ldLCBvYmpba2V5c1tpXV1dO1xuICAgIH1cbiAgICByZXR1cm4gcGFpcnM7XG4gIH07XG5cbiAgLy8gSW52ZXJ0IHRoZSBrZXlzIGFuZCB2YWx1ZXMgb2YgYW4gb2JqZWN0LiBUaGUgdmFsdWVzIG11c3QgYmUgc2VyaWFsaXphYmxlLlxuICBfLmludmVydCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICByZXN1bHRbb2JqW2tleXNbaV1dXSA9IGtleXNbaV07XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgc29ydGVkIGxpc3Qgb2YgdGhlIGZ1bmN0aW9uIG5hbWVzIGF2YWlsYWJsZSBvbiB0aGUgb2JqZWN0LlxuICAvLyBBbGlhc2VkIGFzIGBtZXRob2RzYFxuICBfLmZ1bmN0aW9ucyA9IF8ubWV0aG9kcyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBuYW1lcyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgIGlmIChfLmlzRnVuY3Rpb24ob2JqW2tleV0pKSBuYW1lcy5wdXNoKGtleSk7XG4gICAgfVxuICAgIHJldHVybiBuYW1lcy5zb3J0KCk7XG4gIH07XG5cbiAgLy8gRXh0ZW5kIGEgZ2l2ZW4gb2JqZWN0IHdpdGggYWxsIHRoZSBwcm9wZXJ0aWVzIGluIHBhc3NlZC1pbiBvYmplY3QocykuXG4gIF8uZXh0ZW5kID0gY3JlYXRlQXNzaWduZXIoXy5hbGxLZXlzKTtcblxuICAvLyBBc3NpZ25zIGEgZ2l2ZW4gb2JqZWN0IHdpdGggYWxsIHRoZSBvd24gcHJvcGVydGllcyBpbiB0aGUgcGFzc2VkLWluIG9iamVjdChzKVxuICAvLyAoaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2Fzc2lnbilcbiAgXy5leHRlbmRPd24gPSBfLmFzc2lnbiA9IGNyZWF0ZUFzc2lnbmVyKF8ua2V5cyk7XG5cbiAgLy8gUmV0dXJucyB0aGUgZmlyc3Qga2V5IG9uIGFuIG9iamVjdCB0aGF0IHBhc3NlcyBhIHByZWRpY2F0ZSB0ZXN0XG4gIF8uZmluZEtleSA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopLCBrZXk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICBpZiAocHJlZGljYXRlKG9ialtrZXldLCBrZXksIG9iaikpIHJldHVybiBrZXk7XG4gICAgfVxuICB9O1xuXG4gIC8vIFJldHVybiBhIGNvcHkgb2YgdGhlIG9iamVjdCBvbmx5IGNvbnRhaW5pbmcgdGhlIHdoaXRlbGlzdGVkIHByb3BlcnRpZXMuXG4gIF8ucGljayA9IGZ1bmN0aW9uKG9iamVjdCwgb2l0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgdmFyIHJlc3VsdCA9IHt9LCBvYmogPSBvYmplY3QsIGl0ZXJhdGVlLCBrZXlzO1xuICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHJlc3VsdDtcbiAgICBpZiAoXy5pc0Z1bmN0aW9uKG9pdGVyYXRlZSkpIHtcbiAgICAgIGtleXMgPSBfLmFsbEtleXMob2JqKTtcbiAgICAgIGl0ZXJhdGVlID0gb3B0aW1pemVDYihvaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBrZXlzID0gZmxhdHRlbihhcmd1bWVudHMsIGZhbHNlLCBmYWxzZSwgMSk7XG4gICAgICBpdGVyYXRlZSA9IGZ1bmN0aW9uKHZhbHVlLCBrZXksIG9iaikgeyByZXR1cm4ga2V5IGluIG9iajsgfTtcbiAgICAgIG9iaiA9IE9iamVjdChvYmopO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICB2YXIgdmFsdWUgPSBvYmpba2V5XTtcbiAgICAgIGlmIChpdGVyYXRlZSh2YWx1ZSwga2V5LCBvYmopKSByZXN1bHRba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gICAvLyBSZXR1cm4gYSBjb3B5IG9mIHRoZSBvYmplY3Qgd2l0aG91dCB0aGUgYmxhY2tsaXN0ZWQgcHJvcGVydGllcy5cbiAgXy5vbWl0ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGlmIChfLmlzRnVuY3Rpb24oaXRlcmF0ZWUpKSB7XG4gICAgICBpdGVyYXRlZSA9IF8ubmVnYXRlKGl0ZXJhdGVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGtleXMgPSBfLm1hcChmbGF0dGVuKGFyZ3VtZW50cywgZmFsc2UsIGZhbHNlLCAxKSwgU3RyaW5nKTtcbiAgICAgIGl0ZXJhdGVlID0gZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICByZXR1cm4gIV8uY29udGFpbnMoa2V5cywga2V5KTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBfLnBpY2sob2JqLCBpdGVyYXRlZSwgY29udGV4dCk7XG4gIH07XG5cbiAgLy8gRmlsbCBpbiBhIGdpdmVuIG9iamVjdCB3aXRoIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgXy5kZWZhdWx0cyA9IGNyZWF0ZUFzc2lnbmVyKF8uYWxsS2V5cywgdHJ1ZSk7XG5cbiAgLy8gQ3JlYXRlcyBhbiBvYmplY3QgdGhhdCBpbmhlcml0cyBmcm9tIHRoZSBnaXZlbiBwcm90b3R5cGUgb2JqZWN0LlxuICAvLyBJZiBhZGRpdGlvbmFsIHByb3BlcnRpZXMgYXJlIHByb3ZpZGVkIHRoZW4gdGhleSB3aWxsIGJlIGFkZGVkIHRvIHRoZVxuICAvLyBjcmVhdGVkIG9iamVjdC5cbiAgXy5jcmVhdGUgPSBmdW5jdGlvbihwcm90b3R5cGUsIHByb3BzKSB7XG4gICAgdmFyIHJlc3VsdCA9IGJhc2VDcmVhdGUocHJvdG90eXBlKTtcbiAgICBpZiAocHJvcHMpIF8uZXh0ZW5kT3duKHJlc3VsdCwgcHJvcHMpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gQ3JlYXRlIGEgKHNoYWxsb3ctY2xvbmVkKSBkdXBsaWNhdGUgb2YgYW4gb2JqZWN0LlxuICBfLmNsb25lID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBvYmo7XG4gICAgcmV0dXJuIF8uaXNBcnJheShvYmopID8gb2JqLnNsaWNlKCkgOiBfLmV4dGVuZCh7fSwgb2JqKTtcbiAgfTtcblxuICAvLyBJbnZva2VzIGludGVyY2VwdG9yIHdpdGggdGhlIG9iaiwgYW5kIHRoZW4gcmV0dXJucyBvYmouXG4gIC8vIFRoZSBwcmltYXJ5IHB1cnBvc2Ugb2YgdGhpcyBtZXRob2QgaXMgdG8gXCJ0YXAgaW50b1wiIGEgbWV0aG9kIGNoYWluLCBpblxuICAvLyBvcmRlciB0byBwZXJmb3JtIG9wZXJhdGlvbnMgb24gaW50ZXJtZWRpYXRlIHJlc3VsdHMgd2l0aGluIHRoZSBjaGFpbi5cbiAgXy50YXAgPSBmdW5jdGlvbihvYmosIGludGVyY2VwdG9yKSB7XG4gICAgaW50ZXJjZXB0b3Iob2JqKTtcbiAgICByZXR1cm4gb2JqO1xuICB9O1xuXG4gIC8vIFJldHVybnMgd2hldGhlciBhbiBvYmplY3QgaGFzIGEgZ2l2ZW4gc2V0IG9mIGBrZXk6dmFsdWVgIHBhaXJzLlxuICBfLmlzTWF0Y2ggPSBmdW5jdGlvbihvYmplY3QsIGF0dHJzKSB7XG4gICAgdmFyIGtleXMgPSBfLmtleXMoYXR0cnMpLCBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICBpZiAob2JqZWN0ID09IG51bGwpIHJldHVybiAhbGVuZ3RoO1xuICAgIHZhciBvYmogPSBPYmplY3Qob2JqZWN0KTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgIGlmIChhdHRyc1trZXldICE9PSBvYmpba2V5XSB8fCAhKGtleSBpbiBvYmopKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG5cbiAgLy8gSW50ZXJuYWwgcmVjdXJzaXZlIGNvbXBhcmlzb24gZnVuY3Rpb24gZm9yIGBpc0VxdWFsYC5cbiAgdmFyIGVxID0gZnVuY3Rpb24oYSwgYiwgYVN0YWNrLCBiU3RhY2spIHtcbiAgICAvLyBJZGVudGljYWwgb2JqZWN0cyBhcmUgZXF1YWwuIGAwID09PSAtMGAsIGJ1dCB0aGV5IGFyZW4ndCBpZGVudGljYWwuXG4gICAgLy8gU2VlIHRoZSBbSGFybW9ueSBgZWdhbGAgcHJvcG9zYWxdKGh0dHA6Ly93aWtpLmVjbWFzY3JpcHQub3JnL2Rva3UucGhwP2lkPWhhcm1vbnk6ZWdhbCkuXG4gICAgaWYgKGEgPT09IGIpIHJldHVybiBhICE9PSAwIHx8IDEgLyBhID09PSAxIC8gYjtcbiAgICAvLyBBIHN0cmljdCBjb21wYXJpc29uIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIGBudWxsID09IHVuZGVmaW5lZGAuXG4gICAgaWYgKGEgPT0gbnVsbCB8fCBiID09IG51bGwpIHJldHVybiBhID09PSBiO1xuICAgIC8vIFVud3JhcCBhbnkgd3JhcHBlZCBvYmplY3RzLlxuICAgIGlmIChhIGluc3RhbmNlb2YgXykgYSA9IGEuX3dyYXBwZWQ7XG4gICAgaWYgKGIgaW5zdGFuY2VvZiBfKSBiID0gYi5fd3JhcHBlZDtcbiAgICAvLyBDb21wYXJlIGBbW0NsYXNzXV1gIG5hbWVzLlxuICAgIHZhciBjbGFzc05hbWUgPSB0b1N0cmluZy5jYWxsKGEpO1xuICAgIGlmIChjbGFzc05hbWUgIT09IHRvU3RyaW5nLmNhbGwoYikpIHJldHVybiBmYWxzZTtcbiAgICBzd2l0Y2ggKGNsYXNzTmFtZSkge1xuICAgICAgLy8gU3RyaW5ncywgbnVtYmVycywgcmVndWxhciBleHByZXNzaW9ucywgZGF0ZXMsIGFuZCBib29sZWFucyBhcmUgY29tcGFyZWQgYnkgdmFsdWUuXG4gICAgICBjYXNlICdbb2JqZWN0IFJlZ0V4cF0nOlxuICAgICAgLy8gUmVnRXhwcyBhcmUgY29lcmNlZCB0byBzdHJpbmdzIGZvciBjb21wYXJpc29uIChOb3RlOiAnJyArIC9hL2kgPT09ICcvYS9pJylcbiAgICAgIGNhc2UgJ1tvYmplY3QgU3RyaW5nXSc6XG4gICAgICAgIC8vIFByaW1pdGl2ZXMgYW5kIHRoZWlyIGNvcnJlc3BvbmRpbmcgb2JqZWN0IHdyYXBwZXJzIGFyZSBlcXVpdmFsZW50OyB0aHVzLCBgXCI1XCJgIGlzXG4gICAgICAgIC8vIGVxdWl2YWxlbnQgdG8gYG5ldyBTdHJpbmcoXCI1XCIpYC5cbiAgICAgICAgcmV0dXJuICcnICsgYSA9PT0gJycgKyBiO1xuICAgICAgY2FzZSAnW29iamVjdCBOdW1iZXJdJzpcbiAgICAgICAgLy8gYE5hTmBzIGFyZSBlcXVpdmFsZW50LCBidXQgbm9uLXJlZmxleGl2ZS5cbiAgICAgICAgLy8gT2JqZWN0KE5hTikgaXMgZXF1aXZhbGVudCB0byBOYU5cbiAgICAgICAgaWYgKCthICE9PSArYSkgcmV0dXJuICtiICE9PSArYjtcbiAgICAgICAgLy8gQW4gYGVnYWxgIGNvbXBhcmlzb24gaXMgcGVyZm9ybWVkIGZvciBvdGhlciBudW1lcmljIHZhbHVlcy5cbiAgICAgICAgcmV0dXJuICthID09PSAwID8gMSAvICthID09PSAxIC8gYiA6ICthID09PSArYjtcbiAgICAgIGNhc2UgJ1tvYmplY3QgRGF0ZV0nOlxuICAgICAgY2FzZSAnW29iamVjdCBCb29sZWFuXSc6XG4gICAgICAgIC8vIENvZXJjZSBkYXRlcyBhbmQgYm9vbGVhbnMgdG8gbnVtZXJpYyBwcmltaXRpdmUgdmFsdWVzLiBEYXRlcyBhcmUgY29tcGFyZWQgYnkgdGhlaXJcbiAgICAgICAgLy8gbWlsbGlzZWNvbmQgcmVwcmVzZW50YXRpb25zLiBOb3RlIHRoYXQgaW52YWxpZCBkYXRlcyB3aXRoIG1pbGxpc2Vjb25kIHJlcHJlc2VudGF0aW9uc1xuICAgICAgICAvLyBvZiBgTmFOYCBhcmUgbm90IGVxdWl2YWxlbnQuXG4gICAgICAgIHJldHVybiArYSA9PT0gK2I7XG4gICAgfVxuXG4gICAgdmFyIGFyZUFycmF5cyA9IGNsYXNzTmFtZSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgICBpZiAoIWFyZUFycmF5cykge1xuICAgICAgaWYgKHR5cGVvZiBhICE9ICdvYmplY3QnIHx8IHR5cGVvZiBiICE9ICdvYmplY3QnKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgIC8vIE9iamVjdHMgd2l0aCBkaWZmZXJlbnQgY29uc3RydWN0b3JzIGFyZSBub3QgZXF1aXZhbGVudCwgYnV0IGBPYmplY3RgcyBvciBgQXJyYXlgc1xuICAgICAgLy8gZnJvbSBkaWZmZXJlbnQgZnJhbWVzIGFyZS5cbiAgICAgIHZhciBhQ3RvciA9IGEuY29uc3RydWN0b3IsIGJDdG9yID0gYi5jb25zdHJ1Y3RvcjtcbiAgICAgIGlmIChhQ3RvciAhPT0gYkN0b3IgJiYgIShfLmlzRnVuY3Rpb24oYUN0b3IpICYmIGFDdG9yIGluc3RhbmNlb2YgYUN0b3IgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLmlzRnVuY3Rpb24oYkN0b3IpICYmIGJDdG9yIGluc3RhbmNlb2YgYkN0b3IpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICYmICgnY29uc3RydWN0b3InIGluIGEgJiYgJ2NvbnN0cnVjdG9yJyBpbiBiKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIEFzc3VtZSBlcXVhbGl0eSBmb3IgY3ljbGljIHN0cnVjdHVyZXMuIFRoZSBhbGdvcml0aG0gZm9yIGRldGVjdGluZyBjeWNsaWNcbiAgICAvLyBzdHJ1Y3R1cmVzIGlzIGFkYXB0ZWQgZnJvbSBFUyA1LjEgc2VjdGlvbiAxNS4xMi4zLCBhYnN0cmFjdCBvcGVyYXRpb24gYEpPYC5cblxuICAgIC8vIEluaXRpYWxpemluZyBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy5cbiAgICAvLyBJdCdzIGRvbmUgaGVyZSBzaW5jZSB3ZSBvbmx5IG5lZWQgdGhlbSBmb3Igb2JqZWN0cyBhbmQgYXJyYXlzIGNvbXBhcmlzb24uXG4gICAgYVN0YWNrID0gYVN0YWNrIHx8IFtdO1xuICAgIGJTdGFjayA9IGJTdGFjayB8fCBbXTtcbiAgICB2YXIgbGVuZ3RoID0gYVN0YWNrLmxlbmd0aDtcbiAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgIC8vIExpbmVhciBzZWFyY2guIFBlcmZvcm1hbmNlIGlzIGludmVyc2VseSBwcm9wb3J0aW9uYWwgdG8gdGhlIG51bWJlciBvZlxuICAgICAgLy8gdW5pcXVlIG5lc3RlZCBzdHJ1Y3R1cmVzLlxuICAgICAgaWYgKGFTdGFja1tsZW5ndGhdID09PSBhKSByZXR1cm4gYlN0YWNrW2xlbmd0aF0gPT09IGI7XG4gICAgfVxuXG4gICAgLy8gQWRkIHRoZSBmaXJzdCBvYmplY3QgdG8gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICAgIGFTdGFjay5wdXNoKGEpO1xuICAgIGJTdGFjay5wdXNoKGIpO1xuXG4gICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIGFuZCBhcnJheXMuXG4gICAgaWYgKGFyZUFycmF5cykge1xuICAgICAgLy8gQ29tcGFyZSBhcnJheSBsZW5ndGhzIHRvIGRldGVybWluZSBpZiBhIGRlZXAgY29tcGFyaXNvbiBpcyBuZWNlc3NhcnkuXG4gICAgICBsZW5ndGggPSBhLmxlbmd0aDtcbiAgICAgIGlmIChsZW5ndGggIT09IGIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgICAvLyBEZWVwIGNvbXBhcmUgdGhlIGNvbnRlbnRzLCBpZ25vcmluZyBub24tbnVtZXJpYyBwcm9wZXJ0aWVzLlxuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIGlmICghZXEoYVtsZW5ndGhdLCBiW2xlbmd0aF0sIGFTdGFjaywgYlN0YWNrKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBEZWVwIGNvbXBhcmUgb2JqZWN0cy5cbiAgICAgIHZhciBrZXlzID0gXy5rZXlzKGEpLCBrZXk7XG4gICAgICBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICAgIC8vIEVuc3VyZSB0aGF0IGJvdGggb2JqZWN0cyBjb250YWluIHRoZSBzYW1lIG51bWJlciBvZiBwcm9wZXJ0aWVzIGJlZm9yZSBjb21wYXJpbmcgZGVlcCBlcXVhbGl0eS5cbiAgICAgIGlmIChfLmtleXMoYikubGVuZ3RoICE9PSBsZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICAvLyBEZWVwIGNvbXBhcmUgZWFjaCBtZW1iZXJcbiAgICAgICAga2V5ID0ga2V5c1tsZW5ndGhdO1xuICAgICAgICBpZiAoIShfLmhhcyhiLCBrZXkpICYmIGVxKGFba2V5XSwgYltrZXldLCBhU3RhY2ssIGJTdGFjaykpKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFJlbW92ZSB0aGUgZmlyc3Qgb2JqZWN0IGZyb20gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICAgIGFTdGFjay5wb3AoKTtcbiAgICBiU3RhY2sucG9wKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgLy8gUGVyZm9ybSBhIGRlZXAgY29tcGFyaXNvbiB0byBjaGVjayBpZiB0d28gb2JqZWN0cyBhcmUgZXF1YWwuXG4gIF8uaXNFcXVhbCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gZXEoYSwgYik7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiBhcnJheSwgc3RyaW5nLCBvciBvYmplY3QgZW1wdHk/XG4gIC8vIEFuIFwiZW1wdHlcIiBvYmplY3QgaGFzIG5vIGVudW1lcmFibGUgb3duLXByb3BlcnRpZXMuXG4gIF8uaXNFbXB0eSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikgJiYgKF8uaXNBcnJheShvYmopIHx8IF8uaXNTdHJpbmcob2JqKSB8fCBfLmlzQXJndW1lbnRzKG9iaikpKSByZXR1cm4gb2JqLmxlbmd0aCA9PT0gMDtcbiAgICByZXR1cm4gXy5rZXlzKG9iaikubGVuZ3RoID09PSAwO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYSBET00gZWxlbWVudD9cbiAgXy5pc0VsZW1lbnQgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gISEob2JqICYmIG9iai5ub2RlVHlwZSA9PT0gMSk7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhbiBhcnJheT9cbiAgLy8gRGVsZWdhdGVzIHRvIEVDTUE1J3MgbmF0aXZlIEFycmF5LmlzQXJyYXlcbiAgXy5pc0FycmF5ID0gbmF0aXZlSXNBcnJheSB8fCBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBBcnJheV0nO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFyaWFibGUgYW4gb2JqZWN0P1xuICBfLmlzT2JqZWN0ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIHR5cGUgPSB0eXBlb2Ygb2JqO1xuICAgIHJldHVybiB0eXBlID09PSAnZnVuY3Rpb24nIHx8IHR5cGUgPT09ICdvYmplY3QnICYmICEhb2JqO1xuICB9O1xuXG4gIC8vIEFkZCBzb21lIGlzVHlwZSBtZXRob2RzOiBpc0FyZ3VtZW50cywgaXNGdW5jdGlvbiwgaXNTdHJpbmcsIGlzTnVtYmVyLCBpc0RhdGUsIGlzUmVnRXhwLCBpc0Vycm9yLlxuICBfLmVhY2goWydBcmd1bWVudHMnLCAnRnVuY3Rpb24nLCAnU3RyaW5nJywgJ051bWJlcicsICdEYXRlJywgJ1JlZ0V4cCcsICdFcnJvciddLCBmdW5jdGlvbihuYW1lKSB7XG4gICAgX1snaXMnICsgbmFtZV0gPSBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0ICcgKyBuYW1lICsgJ10nO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIERlZmluZSBhIGZhbGxiYWNrIHZlcnNpb24gb2YgdGhlIG1ldGhvZCBpbiBicm93c2VycyAoYWhlbSwgSUUgPCA5KSwgd2hlcmVcbiAgLy8gdGhlcmUgaXNuJ3QgYW55IGluc3BlY3RhYmxlIFwiQXJndW1lbnRzXCIgdHlwZS5cbiAgaWYgKCFfLmlzQXJndW1lbnRzKGFyZ3VtZW50cykpIHtcbiAgICBfLmlzQXJndW1lbnRzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gXy5oYXMob2JqLCAnY2FsbGVlJyk7XG4gICAgfTtcbiAgfVxuXG4gIC8vIE9wdGltaXplIGBpc0Z1bmN0aW9uYCBpZiBhcHByb3ByaWF0ZS4gV29yayBhcm91bmQgc29tZSB0eXBlb2YgYnVncyBpbiBvbGQgdjgsXG4gIC8vIElFIDExICgjMTYyMSksIGFuZCBpbiBTYWZhcmkgOCAoIzE5MjkpLlxuICBpZiAodHlwZW9mIC8uLyAhPSAnZnVuY3Rpb24nICYmIHR5cGVvZiBJbnQ4QXJyYXkgIT0gJ29iamVjdCcpIHtcbiAgICBfLmlzRnVuY3Rpb24gPSBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09ICdmdW5jdGlvbicgfHwgZmFsc2U7XG4gICAgfTtcbiAgfVxuXG4gIC8vIElzIGEgZ2l2ZW4gb2JqZWN0IGEgZmluaXRlIG51bWJlcj9cbiAgXy5pc0Zpbml0ZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBpc0Zpbml0ZShvYmopICYmICFpc05hTihwYXJzZUZsb2F0KG9iaikpO1xuICB9O1xuXG4gIC8vIElzIHRoZSBnaXZlbiB2YWx1ZSBgTmFOYD8gKE5hTiBpcyB0aGUgb25seSBudW1iZXIgd2hpY2ggZG9lcyBub3QgZXF1YWwgaXRzZWxmKS5cbiAgXy5pc05hTiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBfLmlzTnVtYmVyKG9iaikgJiYgb2JqICE9PSArb2JqO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYSBib29sZWFuP1xuICBfLmlzQm9vbGVhbiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBvYmogPT09IHRydWUgfHwgb2JqID09PSBmYWxzZSB8fCB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEJvb2xlYW5dJztcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGVxdWFsIHRvIG51bGw/XG4gIF8uaXNOdWxsID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIG9iaiA9PT0gbnVsbDtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhcmlhYmxlIHVuZGVmaW5lZD9cbiAgXy5pc1VuZGVmaW5lZCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBvYmogPT09IHZvaWQgMDtcbiAgfTtcblxuICAvLyBTaG9ydGN1dCBmdW5jdGlvbiBmb3IgY2hlY2tpbmcgaWYgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHByb3BlcnR5IGRpcmVjdGx5XG4gIC8vIG9uIGl0c2VsZiAoaW4gb3RoZXIgd29yZHMsIG5vdCBvbiBhIHByb3RvdHlwZSkuXG4gIF8uaGFzID0gZnVuY3Rpb24ob2JqLCBrZXkpIHtcbiAgICByZXR1cm4gb2JqICE9IG51bGwgJiYgaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG4gIH07XG5cbiAgLy8gVXRpbGl0eSBGdW5jdGlvbnNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBSdW4gVW5kZXJzY29yZS5qcyBpbiAqbm9Db25mbGljdCogbW9kZSwgcmV0dXJuaW5nIHRoZSBgX2AgdmFyaWFibGUgdG8gaXRzXG4gIC8vIHByZXZpb3VzIG93bmVyLiBSZXR1cm5zIGEgcmVmZXJlbmNlIHRvIHRoZSBVbmRlcnNjb3JlIG9iamVjdC5cbiAgXy5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgcm9vdC5fID0gcHJldmlvdXNVbmRlcnNjb3JlO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8vIEtlZXAgdGhlIGlkZW50aXR5IGZ1bmN0aW9uIGFyb3VuZCBmb3IgZGVmYXVsdCBpdGVyYXRlZXMuXG4gIF8uaWRlbnRpdHkgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcblxuICAvLyBQcmVkaWNhdGUtZ2VuZXJhdGluZyBmdW5jdGlvbnMuIE9mdGVuIHVzZWZ1bCBvdXRzaWRlIG9mIFVuZGVyc2NvcmUuXG4gIF8uY29uc3RhbnQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuICB9O1xuXG4gIF8ubm9vcCA9IGZ1bmN0aW9uKCl7fTtcblxuICBfLnByb3BlcnR5ID0gcHJvcGVydHk7XG5cbiAgLy8gR2VuZXJhdGVzIGEgZnVuY3Rpb24gZm9yIGEgZ2l2ZW4gb2JqZWN0IHRoYXQgcmV0dXJucyBhIGdpdmVuIHByb3BlcnR5LlxuICBfLnByb3BlcnR5T2YgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqID09IG51bGwgPyBmdW5jdGlvbigpe30gOiBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHJldHVybiBvYmpba2V5XTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBwcmVkaWNhdGUgZm9yIGNoZWNraW5nIHdoZXRoZXIgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHNldCBvZlxuICAvLyBga2V5OnZhbHVlYCBwYWlycy5cbiAgXy5tYXRjaGVyID0gXy5tYXRjaGVzID0gZnVuY3Rpb24oYXR0cnMpIHtcbiAgICBhdHRycyA9IF8uZXh0ZW5kT3duKHt9LCBhdHRycyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIF8uaXNNYXRjaChvYmosIGF0dHJzKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJ1biBhIGZ1bmN0aW9uICoqbioqIHRpbWVzLlxuICBfLnRpbWVzID0gZnVuY3Rpb24obiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgYWNjdW0gPSBBcnJheShNYXRoLm1heCgwLCBuKSk7XG4gICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBjb250ZXh0LCAxKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgYWNjdW1baV0gPSBpdGVyYXRlZShpKTtcbiAgICByZXR1cm4gYWNjdW07XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiBtaW4gYW5kIG1heCAoaW5jbHVzaXZlKS5cbiAgXy5yYW5kb20gPSBmdW5jdGlvbihtaW4sIG1heCkge1xuICAgIGlmIChtYXggPT0gbnVsbCkge1xuICAgICAgbWF4ID0gbWluO1xuICAgICAgbWluID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIG1pbiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSk7XG4gIH07XG5cbiAgLy8gQSAocG9zc2libHkgZmFzdGVyKSB3YXkgdG8gZ2V0IHRoZSBjdXJyZW50IHRpbWVzdGFtcCBhcyBhbiBpbnRlZ2VyLlxuICBfLm5vdyA9IERhdGUubm93IHx8IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgfTtcblxuICAgLy8gTGlzdCBvZiBIVE1MIGVudGl0aWVzIGZvciBlc2NhcGluZy5cbiAgdmFyIGVzY2FwZU1hcCA9IHtcbiAgICAnJic6ICcmYW1wOycsXG4gICAgJzwnOiAnJmx0OycsXG4gICAgJz4nOiAnJmd0OycsXG4gICAgJ1wiJzogJyZxdW90OycsXG4gICAgXCInXCI6ICcmI3gyNzsnLFxuICAgICdgJzogJyYjeDYwOydcbiAgfTtcbiAgdmFyIHVuZXNjYXBlTWFwID0gXy5pbnZlcnQoZXNjYXBlTWFwKTtcblxuICAvLyBGdW5jdGlvbnMgZm9yIGVzY2FwaW5nIGFuZCB1bmVzY2FwaW5nIHN0cmluZ3MgdG8vZnJvbSBIVE1MIGludGVycG9sYXRpb24uXG4gIHZhciBjcmVhdGVFc2NhcGVyID0gZnVuY3Rpb24obWFwKSB7XG4gICAgdmFyIGVzY2FwZXIgPSBmdW5jdGlvbihtYXRjaCkge1xuICAgICAgcmV0dXJuIG1hcFttYXRjaF07XG4gICAgfTtcbiAgICAvLyBSZWdleGVzIGZvciBpZGVudGlmeWluZyBhIGtleSB0aGF0IG5lZWRzIHRvIGJlIGVzY2FwZWRcbiAgICB2YXIgc291cmNlID0gJyg/OicgKyBfLmtleXMobWFwKS5qb2luKCd8JykgKyAnKSc7XG4gICAgdmFyIHRlc3RSZWdleHAgPSBSZWdFeHAoc291cmNlKTtcbiAgICB2YXIgcmVwbGFjZVJlZ2V4cCA9IFJlZ0V4cChzb3VyY2UsICdnJyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgc3RyaW5nID0gc3RyaW5nID09IG51bGwgPyAnJyA6ICcnICsgc3RyaW5nO1xuICAgICAgcmV0dXJuIHRlc3RSZWdleHAudGVzdChzdHJpbmcpID8gc3RyaW5nLnJlcGxhY2UocmVwbGFjZVJlZ2V4cCwgZXNjYXBlcikgOiBzdHJpbmc7XG4gICAgfTtcbiAgfTtcbiAgXy5lc2NhcGUgPSBjcmVhdGVFc2NhcGVyKGVzY2FwZU1hcCk7XG4gIF8udW5lc2NhcGUgPSBjcmVhdGVFc2NhcGVyKHVuZXNjYXBlTWFwKTtcblxuICAvLyBJZiB0aGUgdmFsdWUgb2YgdGhlIG5hbWVkIGBwcm9wZXJ0eWAgaXMgYSBmdW5jdGlvbiB0aGVuIGludm9rZSBpdCB3aXRoIHRoZVxuICAvLyBgb2JqZWN0YCBhcyBjb250ZXh0OyBvdGhlcndpc2UsIHJldHVybiBpdC5cbiAgXy5yZXN1bHQgPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5LCBmYWxsYmFjaykge1xuICAgIHZhciB2YWx1ZSA9IG9iamVjdCA9PSBudWxsID8gdm9pZCAwIDogb2JqZWN0W3Byb3BlcnR5XTtcbiAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkge1xuICAgICAgdmFsdWUgPSBmYWxsYmFjaztcbiAgICB9XG4gICAgcmV0dXJuIF8uaXNGdW5jdGlvbih2YWx1ZSkgPyB2YWx1ZS5jYWxsKG9iamVjdCkgOiB2YWx1ZTtcbiAgfTtcblxuICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBpbnRlZ2VyIGlkICh1bmlxdWUgd2l0aGluIHRoZSBlbnRpcmUgY2xpZW50IHNlc3Npb24pLlxuICAvLyBVc2VmdWwgZm9yIHRlbXBvcmFyeSBET00gaWRzLlxuICB2YXIgaWRDb3VudGVyID0gMDtcbiAgXy51bmlxdWVJZCA9IGZ1bmN0aW9uKHByZWZpeCkge1xuICAgIHZhciBpZCA9ICsraWRDb3VudGVyICsgJyc7XG4gICAgcmV0dXJuIHByZWZpeCA/IHByZWZpeCArIGlkIDogaWQ7XG4gIH07XG5cbiAgLy8gQnkgZGVmYXVsdCwgVW5kZXJzY29yZSB1c2VzIEVSQi1zdHlsZSB0ZW1wbGF0ZSBkZWxpbWl0ZXJzLCBjaGFuZ2UgdGhlXG4gIC8vIGZvbGxvd2luZyB0ZW1wbGF0ZSBzZXR0aW5ncyB0byB1c2UgYWx0ZXJuYXRpdmUgZGVsaW1pdGVycy5cbiAgXy50ZW1wbGF0ZVNldHRpbmdzID0ge1xuICAgIGV2YWx1YXRlICAgIDogLzwlKFtcXHNcXFNdKz8pJT4vZyxcbiAgICBpbnRlcnBvbGF0ZSA6IC88JT0oW1xcc1xcU10rPyklPi9nLFxuICAgIGVzY2FwZSAgICAgIDogLzwlLShbXFxzXFxTXSs/KSU+L2dcbiAgfTtcblxuICAvLyBXaGVuIGN1c3RvbWl6aW5nIGB0ZW1wbGF0ZVNldHRpbmdzYCwgaWYgeW91IGRvbid0IHdhbnQgdG8gZGVmaW5lIGFuXG4gIC8vIGludGVycG9sYXRpb24sIGV2YWx1YXRpb24gb3IgZXNjYXBpbmcgcmVnZXgsIHdlIG5lZWQgb25lIHRoYXQgaXNcbiAgLy8gZ3VhcmFudGVlZCBub3QgdG8gbWF0Y2guXG4gIHZhciBub01hdGNoID0gLyguKV4vO1xuXG4gIC8vIENlcnRhaW4gY2hhcmFjdGVycyBuZWVkIHRvIGJlIGVzY2FwZWQgc28gdGhhdCB0aGV5IGNhbiBiZSBwdXQgaW50byBhXG4gIC8vIHN0cmluZyBsaXRlcmFsLlxuICB2YXIgZXNjYXBlcyA9IHtcbiAgICBcIidcIjogICAgICBcIidcIixcbiAgICAnXFxcXCc6ICAgICAnXFxcXCcsXG4gICAgJ1xccic6ICAgICAncicsXG4gICAgJ1xcbic6ICAgICAnbicsXG4gICAgJ1xcdTIwMjgnOiAndTIwMjgnLFxuICAgICdcXHUyMDI5JzogJ3UyMDI5J1xuICB9O1xuXG4gIHZhciBlc2NhcGVyID0gL1xcXFx8J3xcXHJ8XFxufFxcdTIwMjh8XFx1MjAyOS9nO1xuXG4gIHZhciBlc2NhcGVDaGFyID0gZnVuY3Rpb24obWF0Y2gpIHtcbiAgICByZXR1cm4gJ1xcXFwnICsgZXNjYXBlc1ttYXRjaF07XG4gIH07XG5cbiAgLy8gSmF2YVNjcmlwdCBtaWNyby10ZW1wbGF0aW5nLCBzaW1pbGFyIHRvIEpvaG4gUmVzaWcncyBpbXBsZW1lbnRhdGlvbi5cbiAgLy8gVW5kZXJzY29yZSB0ZW1wbGF0aW5nIGhhbmRsZXMgYXJiaXRyYXJ5IGRlbGltaXRlcnMsIHByZXNlcnZlcyB3aGl0ZXNwYWNlLFxuICAvLyBhbmQgY29ycmVjdGx5IGVzY2FwZXMgcXVvdGVzIHdpdGhpbiBpbnRlcnBvbGF0ZWQgY29kZS5cbiAgLy8gTkI6IGBvbGRTZXR0aW5nc2Agb25seSBleGlzdHMgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuICBfLnRlbXBsYXRlID0gZnVuY3Rpb24odGV4dCwgc2V0dGluZ3MsIG9sZFNldHRpbmdzKSB7XG4gICAgaWYgKCFzZXR0aW5ncyAmJiBvbGRTZXR0aW5ncykgc2V0dGluZ3MgPSBvbGRTZXR0aW5ncztcbiAgICBzZXR0aW5ncyA9IF8uZGVmYXVsdHMoe30sIHNldHRpbmdzLCBfLnRlbXBsYXRlU2V0dGluZ3MpO1xuXG4gICAgLy8gQ29tYmluZSBkZWxpbWl0ZXJzIGludG8gb25lIHJlZ3VsYXIgZXhwcmVzc2lvbiB2aWEgYWx0ZXJuYXRpb24uXG4gICAgdmFyIG1hdGNoZXIgPSBSZWdFeHAoW1xuICAgICAgKHNldHRpbmdzLmVzY2FwZSB8fCBub01hdGNoKS5zb3VyY2UsXG4gICAgICAoc2V0dGluZ3MuaW50ZXJwb2xhdGUgfHwgbm9NYXRjaCkuc291cmNlLFxuICAgICAgKHNldHRpbmdzLmV2YWx1YXRlIHx8IG5vTWF0Y2gpLnNvdXJjZVxuICAgIF0uam9pbignfCcpICsgJ3wkJywgJ2cnKTtcblxuICAgIC8vIENvbXBpbGUgdGhlIHRlbXBsYXRlIHNvdXJjZSwgZXNjYXBpbmcgc3RyaW5nIGxpdGVyYWxzIGFwcHJvcHJpYXRlbHkuXG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICB2YXIgc291cmNlID0gXCJfX3ArPSdcIjtcbiAgICB0ZXh0LnJlcGxhY2UobWF0Y2hlciwgZnVuY3Rpb24obWF0Y2gsIGVzY2FwZSwgaW50ZXJwb2xhdGUsIGV2YWx1YXRlLCBvZmZzZXQpIHtcbiAgICAgIHNvdXJjZSArPSB0ZXh0LnNsaWNlKGluZGV4LCBvZmZzZXQpLnJlcGxhY2UoZXNjYXBlciwgZXNjYXBlQ2hhcik7XG4gICAgICBpbmRleCA9IG9mZnNldCArIG1hdGNoLmxlbmd0aDtcblxuICAgICAgaWYgKGVzY2FwZSkge1xuICAgICAgICBzb3VyY2UgKz0gXCInK1xcbigoX190PShcIiArIGVzY2FwZSArIFwiKSk9PW51bGw/Jyc6Xy5lc2NhcGUoX190KSkrXFxuJ1wiO1xuICAgICAgfSBlbHNlIGlmIChpbnRlcnBvbGF0ZSkge1xuICAgICAgICBzb3VyY2UgKz0gXCInK1xcbigoX190PShcIiArIGludGVycG9sYXRlICsgXCIpKT09bnVsbD8nJzpfX3QpK1xcbidcIjtcbiAgICAgIH0gZWxzZSBpZiAoZXZhbHVhdGUpIHtcbiAgICAgICAgc291cmNlICs9IFwiJztcXG5cIiArIGV2YWx1YXRlICsgXCJcXG5fX3ArPSdcIjtcbiAgICAgIH1cblxuICAgICAgLy8gQWRvYmUgVk1zIG5lZWQgdGhlIG1hdGNoIHJldHVybmVkIHRvIHByb2R1Y2UgdGhlIGNvcnJlY3Qgb2ZmZXN0LlxuICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH0pO1xuICAgIHNvdXJjZSArPSBcIic7XFxuXCI7XG5cbiAgICAvLyBJZiBhIHZhcmlhYmxlIGlzIG5vdCBzcGVjaWZpZWQsIHBsYWNlIGRhdGEgdmFsdWVzIGluIGxvY2FsIHNjb3BlLlxuICAgIGlmICghc2V0dGluZ3MudmFyaWFibGUpIHNvdXJjZSA9ICd3aXRoKG9ianx8e30pe1xcbicgKyBzb3VyY2UgKyAnfVxcbic7XG5cbiAgICBzb3VyY2UgPSBcInZhciBfX3QsX19wPScnLF9faj1BcnJheS5wcm90b3R5cGUuam9pbixcIiArXG4gICAgICBcInByaW50PWZ1bmN0aW9uKCl7X19wKz1fX2ouY2FsbChhcmd1bWVudHMsJycpO307XFxuXCIgK1xuICAgICAgc291cmNlICsgJ3JldHVybiBfX3A7XFxuJztcblxuICAgIHRyeSB7XG4gICAgICB2YXIgcmVuZGVyID0gbmV3IEZ1bmN0aW9uKHNldHRpbmdzLnZhcmlhYmxlIHx8ICdvYmonLCAnXycsIHNvdXJjZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgZS5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cblxuICAgIHZhciB0ZW1wbGF0ZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHJldHVybiByZW5kZXIuY2FsbCh0aGlzLCBkYXRhLCBfKTtcbiAgICB9O1xuXG4gICAgLy8gUHJvdmlkZSB0aGUgY29tcGlsZWQgc291cmNlIGFzIGEgY29udmVuaWVuY2UgZm9yIHByZWNvbXBpbGF0aW9uLlxuICAgIHZhciBhcmd1bWVudCA9IHNldHRpbmdzLnZhcmlhYmxlIHx8ICdvYmonO1xuICAgIHRlbXBsYXRlLnNvdXJjZSA9ICdmdW5jdGlvbignICsgYXJndW1lbnQgKyAnKXtcXG4nICsgc291cmNlICsgJ30nO1xuXG4gICAgcmV0dXJuIHRlbXBsYXRlO1xuICB9O1xuXG4gIC8vIEFkZCBhIFwiY2hhaW5cIiBmdW5jdGlvbi4gU3RhcnQgY2hhaW5pbmcgYSB3cmFwcGVkIFVuZGVyc2NvcmUgb2JqZWN0LlxuICBfLmNoYWluID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIGluc3RhbmNlID0gXyhvYmopO1xuICAgIGluc3RhbmNlLl9jaGFpbiA9IHRydWU7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9O1xuXG4gIC8vIE9PUFxuICAvLyAtLS0tLS0tLS0tLS0tLS1cbiAgLy8gSWYgVW5kZXJzY29yZSBpcyBjYWxsZWQgYXMgYSBmdW5jdGlvbiwgaXQgcmV0dXJucyBhIHdyYXBwZWQgb2JqZWN0IHRoYXRcbiAgLy8gY2FuIGJlIHVzZWQgT08tc3R5bGUuIFRoaXMgd3JhcHBlciBob2xkcyBhbHRlcmVkIHZlcnNpb25zIG9mIGFsbCB0aGVcbiAgLy8gdW5kZXJzY29yZSBmdW5jdGlvbnMuIFdyYXBwZWQgb2JqZWN0cyBtYXkgYmUgY2hhaW5lZC5cblxuICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gY29udGludWUgY2hhaW5pbmcgaW50ZXJtZWRpYXRlIHJlc3VsdHMuXG4gIHZhciByZXN1bHQgPSBmdW5jdGlvbihpbnN0YW5jZSwgb2JqKSB7XG4gICAgcmV0dXJuIGluc3RhbmNlLl9jaGFpbiA/IF8ob2JqKS5jaGFpbigpIDogb2JqO1xuICB9O1xuXG4gIC8vIEFkZCB5b3VyIG93biBjdXN0b20gZnVuY3Rpb25zIHRvIHRoZSBVbmRlcnNjb3JlIG9iamVjdC5cbiAgXy5taXhpbiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIF8uZWFjaChfLmZ1bmN0aW9ucyhvYmopLCBmdW5jdGlvbihuYW1lKSB7XG4gICAgICB2YXIgZnVuYyA9IF9bbmFtZV0gPSBvYmpbbmFtZV07XG4gICAgICBfLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYXJncyA9IFt0aGlzLl93cmFwcGVkXTtcbiAgICAgICAgcHVzaC5hcHBseShhcmdzLCBhcmd1bWVudHMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0KHRoaXMsIGZ1bmMuYXBwbHkoXywgYXJncykpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBBZGQgYWxsIG9mIHRoZSBVbmRlcnNjb3JlIGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlciBvYmplY3QuXG4gIF8ubWl4aW4oXyk7XG5cbiAgLy8gQWRkIGFsbCBtdXRhdG9yIEFycmF5IGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlci5cbiAgXy5lYWNoKFsncG9wJywgJ3B1c2gnLCAncmV2ZXJzZScsICdzaGlmdCcsICdzb3J0JywgJ3NwbGljZScsICd1bnNoaWZ0J10sIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgbWV0aG9kID0gQXJyYXlQcm90b1tuYW1lXTtcbiAgICBfLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG9iaiA9IHRoaXMuX3dyYXBwZWQ7XG4gICAgICBtZXRob2QuYXBwbHkob2JqLCBhcmd1bWVudHMpO1xuICAgICAgaWYgKChuYW1lID09PSAnc2hpZnQnIHx8IG5hbWUgPT09ICdzcGxpY2UnKSAmJiBvYmoubGVuZ3RoID09PSAwKSBkZWxldGUgb2JqWzBdO1xuICAgICAgcmV0dXJuIHJlc3VsdCh0aGlzLCBvYmopO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIEFkZCBhbGwgYWNjZXNzb3IgQXJyYXkgZnVuY3Rpb25zIHRvIHRoZSB3cmFwcGVyLlxuICBfLmVhY2goWydjb25jYXQnLCAnam9pbicsICdzbGljZSddLCBmdW5jdGlvbihuYW1lKSB7XG4gICAgdmFyIG1ldGhvZCA9IEFycmF5UHJvdG9bbmFtZV07XG4gICAgXy5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiByZXN1bHQodGhpcywgbWV0aG9kLmFwcGx5KHRoaXMuX3dyYXBwZWQsIGFyZ3VtZW50cykpO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIEV4dHJhY3RzIHRoZSByZXN1bHQgZnJvbSBhIHdyYXBwZWQgYW5kIGNoYWluZWQgb2JqZWN0LlxuICBfLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl93cmFwcGVkO1xuICB9O1xuXG4gIC8vIFByb3ZpZGUgdW53cmFwcGluZyBwcm94eSBmb3Igc29tZSBtZXRob2RzIHVzZWQgaW4gZW5naW5lIG9wZXJhdGlvbnNcbiAgLy8gc3VjaCBhcyBhcml0aG1ldGljIGFuZCBKU09OIHN0cmluZ2lmaWNhdGlvbi5cbiAgXy5wcm90b3R5cGUudmFsdWVPZiA9IF8ucHJvdG90eXBlLnRvSlNPTiA9IF8ucHJvdG90eXBlLnZhbHVlO1xuXG4gIF8ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICcnICsgdGhpcy5fd3JhcHBlZDtcbiAgfTtcblxuICAvLyBBTUQgcmVnaXN0cmF0aW9uIGhhcHBlbnMgYXQgdGhlIGVuZCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIEFNRCBsb2FkZXJzXG4gIC8vIHRoYXQgbWF5IG5vdCBlbmZvcmNlIG5leHQtdHVybiBzZW1hbnRpY3Mgb24gbW9kdWxlcy4gRXZlbiB0aG91Z2ggZ2VuZXJhbFxuICAvLyBwcmFjdGljZSBmb3IgQU1EIHJlZ2lzdHJhdGlvbiBpcyB0byBiZSBhbm9ueW1vdXMsIHVuZGVyc2NvcmUgcmVnaXN0ZXJzXG4gIC8vIGFzIGEgbmFtZWQgbW9kdWxlIGJlY2F1c2UsIGxpa2UgalF1ZXJ5LCBpdCBpcyBhIGJhc2UgbGlicmFyeSB0aGF0IGlzXG4gIC8vIHBvcHVsYXIgZW5vdWdoIHRvIGJlIGJ1bmRsZWQgaW4gYSB0aGlyZCBwYXJ0eSBsaWIsIGJ1dCBub3QgYmUgcGFydCBvZlxuICAvLyBhbiBBTUQgbG9hZCByZXF1ZXN0LiBUaG9zZSBjYXNlcyBjb3VsZCBnZW5lcmF0ZSBhbiBlcnJvciB3aGVuIGFuXG4gIC8vIGFub255bW91cyBkZWZpbmUoKSBpcyBjYWxsZWQgb3V0c2lkZSBvZiBhIGxvYWRlciByZXF1ZXN0LlxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKCd1bmRlcnNjb3JlJywgW10sIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF87XG4gICAgfSk7XG4gIH1cbn0uY2FsbCh0aGlzKSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/underscore/underscore.js\n");

/***/ })

/******/ });